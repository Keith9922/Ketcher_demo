{"version":3,"file":"index.js","sources":["../src/domain/constants/elementColor.ts","../src/domain/constants/elements.ts","../src/domain/constants/element.types.ts","../src/domain/constants/generics.ts","../src/domain/constants/image.ts","../src/domain/constants/multitailArrow.ts","../src/domain/entities/atomList.ts","../src/utilities/ifDef.ts","../src/utilities/tfx.ts","../src/utilities/KetcherLogger.ts","../src/utilities/runAsyncAction.ts","../src/utilities/b64toBlob.ts","../src/utilities/notifyRequestCompleted.ts","../src/utilities/SettingsManager.ts","../../../node_modules/w3c-keyname/index.js","../src/utilities/keynorm.ts","../src/utilities/shortcutsUtil.ts","../src/domain/services/struct/structService.types.ts","../src/utilities/clipboardUtils.ts","../src/utilities/getSvgFromDrawnStructures.tsx","../src/domain/entities/vec2.ts","../src/domain/entities/pile.ts","../src/domain/entities/BaseMicromoleculeEntity.ts","../src/domain/entities/bond.ts","../src/domain/entities/box2Abs.ts","../src/domain/helpers/scale.ts","../src/domain/helpers/stereoValidator.ts","../src/domain/helpers/functionalGroupsProvider.ts","../src/domain/helpers/saltsAndSolventsProvider.ts","../src/application/editor/shared/constants.ts","../src/domain/entities/sgroup.ts","../src/domain/entities/monomerMicromolecule.ts","../src/domain/entities/atom.ts","../src/domain/entities/fixedPrecision.ts","../src/domain/entities/fragment.ts","../src/domain/entities/functionalGroup.ts","../src/domain/entities/halfBond.ts","../src/domain/entities/loop.ts","../src/domain/entities/rgroup.ts","../src/domain/entities/rgroupAttachmentPoint.ts","../src/domain/entities/rxnArrow.ts","../src/domain/entities/rxnPlus.ts","../src/domain/entities/sgroupForest.ts","../src/domain/entities/simpleObject.ts","../src/domain/entities/pool.ts","../src/application/editor/actions/helpers.ts","../src/domain/entities/struct.ts","../src/domain/entities/text.ts","../src/domain/serializers/ket/helpers.ts","../src/domain/serializers/ket/toKet/rxnToKet.ts","../src/domain/serializers/ket/toKet/headerToKet.ts","../src/application/editor/editorSettings.ts","../src/application/editor/constants.ts","../src/application/render/notifyRenderComplete.ts","../src/application/editor/tools/Zoom.ts","../src/application/editor/shared/coordinates.ts","../src/domain/helpers/attachmentPointCalculations.ts","../src/domain/serializers/ket/toKet/moleculeToKet.ts","../src/domain/serializers/ket/fromKet/mergeFragmentsToStruct.ts","../src/domain/serializers/ket/fromKet/moleculeToStruct.ts","../src/domain/serializers/ket/toKet/prepare.ts","../src/domain/serializers/ket/toKet/rgroupToKet.ts","../src/domain/serializers/ket/fromKet/rgroupToStruct.ts","../src/domain/serializers/ket/fromKet/rxnToStruct.ts","../src/domain/serializers/ket/toKet/simpleObjectToKet.ts","../src/domain/serializers/ket/fromKet/simpleObjectToStruct.ts","../src/domain/serializers/ket/toKet/textToKet.ts","../src/domain/serializers/ket/fromKet/textToStruct.ts","../src/application/formatters/types/ket.ts","../src/domain/entities/Command.ts","../src/application/editor/editor.types.ts","../../../node_modules/subscription/index.js","../src/domain/entities/monomer-chains/types.ts","../src/application/editor/tools/types.ts","../src/application/editor/editorEvents.ts","../src/application/render/raphael-ext.ts","../src/application/render/restruct/visel.js","../src/application/render/restruct/reobject.ts","../src/application/render/restruct/generalEnumTypes.ts","../src/application/editor/shared/utils.ts","../src/application/render/options.ts","../src/application/render/render.types.ts","../src/application/render/util.ts","../src/application/render/pathBuilder.ts","../src/application/render/draw.ts","../src/domain/types/monomers.ts","../src/domain/types/entities.ts","../src/application/render/restruct/reatom.ts","../src/application/render/restruct/rebond.ts","../src/application/render/restruct/reenhancedFlag.ts","../src/application/render/restruct/refrag.js","../src/application/render/restruct/rergroup.js","../src/application/render/restruct/rerxnarrow.ts","../src/application/render/restruct/rerxnplus.js","../src/application/render/restruct/redatasgroupdata.js","../src/application/render/bracket-params.ts","../src/application/render/restruct/resgroup.ts","../src/application/render/restruct/resimpleObject.ts","../src/application/render/restruct/reloop.js","../src/application/render/restruct/retext.ts","../src/application/render/restruct/rergroupAttachmentPoint.ts","../src/application/render/restruct/reImage.ts","../src/domain/entities/multitailArrow.ts","../src/application/render/restruct/remultitailArrow.ts","../src/application/render/restruct/restruct.ts","../src/application/render/coordinateTransformation.ts","../src/application/render/scrollbar/scroll-offset.ts","../src/application/render/scrollbar/scrollbar.ts","../src/application/render/scrollbar/utils.ts","../src/application/render/scrollbar/scrollbar-vertical.ts","../src/application/render/scrollbar/scrollbar-horizontal.ts","../src/application/render/scrollbar/scrollbar-container.ts","../src/application/render/raphaelRender.ts","../src/application/editor/operations/base.ts","../src/application/editor/operations/OperationType.ts","../src/application/editor/operations/atom/AtomAttr.ts","../src/application/editor/operations/atom/AtomMove.ts","../src/application/editor/operations/atom/index.ts","../src/application/editor/operations/bond/BondAttr.ts","../src/application/editor/operations/bond/BondMove.ts","../src/application/editor/operations/bond/index.ts","../src/application/editor/operations/CanvasLoad.ts","../src/application/editor/operations/descriptors.ts","../src/application/editor/operations/EnhancedFlagMove.ts","../src/application/editor/operations/ifThen.ts","../src/application/editor/operations/fragment.ts","../src/application/editor/operations/fragmentStereoAtom.ts","../src/application/editor/operations/FragmentStereoFlag.ts","../src/application/editor/operations/calcimplicitH.ts","../src/application/editor/operations/LoopMove.ts","../src/application/editor/operations/image/imageMove.ts","../src/application/editor/operations/image/imageResize.ts","../src/application/editor/operations/image/imageUpsertDelete.ts","../src/application/editor/operations/multitailArrow/multitailArrowAddRemoveTail.ts","../src/application/editor/operations/multitailArrow/multitailArrowMove.ts","../src/application/editor/operations/multitailArrow/multitailArrowMoveHeadTail.ts","../src/application/editor/operations/multitailArrow/multitailArrowResizeTailHead.ts","../src/application/editor/operations/multitailArrow/multitailArrowUpsertDelete.ts","../src/application/editor/operations/rgroup/RGroupAttr.ts","../src/application/editor/operations/rgroup/RGroupFragment.ts","../src/application/editor/operations/rgroupAttachmentPoint/RGroupAttachmentPointAdd.ts","../src/application/editor/operations/rgroupAttachmentPoint/RGroupAttachmentPointRemove.ts","../src/application/editor/operations/rxn/RxnArrowMove.ts","../src/application/editor/operations/rxn/RxnArrowRotate.ts","../src/application/editor/operations/rxn/RxnArrowResize.ts","../src/application/editor/operations/rxn/plus/RxnPlusMove.ts","../src/application/editor/operations/rxn/plus/index.ts","../src/application/editor/operations/rxn/index.ts","../src/application/editor/operations/simpleObject.ts","../src/application/editor/operations/sgroup/sgroupAtom.ts","../src/application/editor/operations/sgroup/SGroupAttr.ts","../src/application/editor/operations/sgroup/SGroupDataMove.ts","../src/application/editor/operations/sgroup/sgroupHierarchy.ts","../src/application/editor/operations/sgroup/sgroupAttachmentPoints.ts","../src/application/editor/operations/sgroup/index.ts","../src/application/editor/operations/Text/TextCreateDelete.ts","../src/application/editor/operations/Text/TextUpdate.ts","../src/application/editor/operations/Text/TextMove.ts","../src/application/render/renderers/BaseRenderer.ts","../src/application/render/renderers/sequence/BaseSequenceRenderer.ts","../src/domain/entities/DrawingEntity.ts","../src/domain/entities/BaseBond.ts","../src/domain/entities/MonomerToAtomBond.ts","../src/domain/AttachmentPoint.ts","../src/domain/entities/HydrogenBond.ts","../src/domain/entities/BaseMonomer.ts","../src/domain/entities/monomer-chains/BaseSubChain.ts","../src/domain/entities/monomer-chains/ChemSubChain.ts","../src/application/formatters/supportedFormatProperties.ts","../src/application/formatters/formatProperties.ts","../src/application/formatters/structFormatter.types.ts","../src/application/formatters/ketFormatter.ts","../src/application/formatters/smilesFormatter.ts","../src/application/formatters/serverFormatter.ts","../src/application/formatters/molfileV2000Formatter.ts","../src/application/formatters/formatterFactory.ts","../src/application/formatters/identifyStructFormat.ts","../src/application/formatters/constants.ts","../src/domain/entities/monomer-chains/PhosphateSubChain.ts","../src/domain/entities/monomer-chains/RnaSubChain.ts","../src/domain/entities/Phosphate.ts","../src/domain/entities/Sugar.ts","../src/domain/entities/PolymerBond.ts","../src/domain/helpers/monomers.ts","../src/domain/entities/RNABase.ts","../src/domain/entities/monomer-chains/PeptideSubChain.ts","../src/domain/entities/Peptide.ts","../src/domain/entities/Chem.ts","../src/domain/entities/UnsplitNucleotide.ts","../src/domain/entities/UnresolvedMonomer.ts","../src/domain/constants/monomers.ts","../src/domain/entities/AmbiguousMonomer.ts","../src/application/render/renderers/BaseMonomerRenderer.ts","../src/application/render/renderers/constants.ts","../src/utilities/monomers.ts","../src/application/render/renderers/ChemRenderer.ts","../src/application/render/renderers/PeptideRenderer.ts","../src/application/render/renderers/PhosphateRenderer.ts","../src/application/render/renderers/SugarRenderer.ts","../src/application/render/renderers/RNABaseRenderer.ts","../src/application/render/renderers/UnresolvedMonomerRenderer.ts","../src/application/render/renderers/UnsplitNucleotideRenderer.ts","../src/domain/entities/monomer-chains/EmptySubChain.ts","../src/domain/entities/EmptyMonomer.ts","../src/domain/PreviewAttachmentPoint.ts","../src/application/render/renderers/AmbiguousMonomerRenderer.ts","../src/domain/entities/AmbiguousMonomerSequenceNode.ts","../src/domain/entities/monomer-chains/Chain.ts","../src/domain/entities/monomer-chains/ChainsCollection.ts","../src/domain/entities/EmptySequenceNode.ts","../src/application/render/renderers/sequence/BaseSequenceItemRenderer.ts","../src/application/render/renderers/sequence/AmbiguousSequenceItemRenderer.ts","../src/application/render/renderers/sequence/SequenceNodeRendererFactory.ts","../src/application/render/renderers/sequence/PolymerBondSequenceRenderer.ts","../src/domain/helpers/rna.ts","../src/application/editor/tools/RnaPreset.ts","../src/domain/entities/Nucleoside.ts","../src/application/render/renderers/sequence/BackBoneBondSequenceRenderer.ts","../src/application/editor/operations/polymerBond/index.ts","../src/application/utils.ts","../src/application/editor/operations/monomer/index.ts","../src/application/editor/operations/drawingEntity/index.ts","../src/domain/entities/Nucleotide.ts","../src/domain/entities/canvas-matrix/Matrix.ts","../src/domain/entities/canvas-matrix/Connection.ts","../src/domain/entities/canvas-matrix/Cell.ts","../src/domain/entities/canvas-matrix/CanvasMatrix.ts","../src/application/editor/operations/modes/snake.ts","../src/domain/entities/CoreAtom.ts","../src/domain/entities/CoreBond.ts","../src/application/editor/operations/coreAtom/atom.ts","../src/application/editor/operations/coreBond/bond.ts","../src/application/editor/operations/monomerToAtomBond/monomerToAtomBond.ts","../src/application/editor/tools/Bond.ts","../src/domain/entities/DrawingEntitiesManager.ts","../src/application/editor/modes/BaseMode.ts","../src/application/editor/modes/FlexMode.ts","../src/domain/entities/MonomerSequenceNode.ts","../src/application/render/renderers/sequence/ui-controls/NewSequenceButton.ts","../src/application/editor/modes/SequenceMode.ts","../src/application/render/renderers/PolymerBondRenderer/FlexModePolymerBondRenderer.ts","../src/application/render/renderers/PolymerBondRenderer/SnakeModePolymerBondRenderer.ts","../src/application/render/renderers/PolymerBondRenderer/PolymerBondRendererFactory.ts","../src/application/render/renderers/AtomRenderer.ts","../src/application/render/renderers/BondRenderer.ts","../src/application/render/renderers/MonomerToAtomBondRenderer.ts","../src/application/render/renderers/RenderersManager.ts","../src/application/editor/modes/SnakeMode.ts","../src/application/editor/modes/types.ts","../src/application/editor/modes/index.ts","../src/application/editor/operations/modes/index.ts","../src/application/render/renderers/sequence/MonomerToAtomBondSequenceRenderer.ts","../src/application/render/renderers/sequence/SequenceRenderer.ts","../src/application/render/renderers/sequence/ChemSequenceItemRenderer.ts","../src/application/render/renderers/sequence/EmptySequenceItemRenderer.ts","../src/application/render/renderers/sequence/RNASequenceItemRenderer.ts","../src/application/render/renderers/sequence/NucleotideSequenceItemRenderer.ts","../src/application/render/renderers/sequence/NucleosideSequenceItemRenderer.ts","../src/application/render/renderers/sequence/PeptideSequenceItemRenderer.ts","../src/application/render/renderers/sequence/PhosphateSequenceItemRenderer.ts","../src/application/render/renderers/sequence/UnresolvedMonomerSequenceItemRenderer.ts","../src/application/render/renderers/sequence/UnsplitNucleotideSequenceItemRenderer.ts","../src/application/editor/operations/monomer/monomerFactory.ts","../src/application/editor/actions/action.ts","../src/application/editor/actions/aromaticFusing.ts","../src/application/editor/shared/closest.js","../src/application/editor/actions/utils.ts","../src/application/editor/actions/rgroup.ts","../src/application/editor/actions/sgroup.ts","../src/application/editor/actions/bond.ts","../src/application/editor/actions/atom.ts","../src/application/editor/actions/basic.ts","../src/application/editor/actions/chain.ts","../src/application/editor/actions/closelyFusing.ts","../src/application/editor/actions/fragment.ts","../src/application/editor/actions/rgroupAttachmentPoint.ts","../src/application/editor/actions/erase.ts","../src/application/editor/actions/paste.ts","../src/application/editor/actions/image.ts","../src/application/editor/actions/multitailArrow.ts","../src/application/editor/actions/reaction.ts","../src/application/editor/actions/rotate.ts","../src/application/editor/actions/simpleobject.ts","../src/application/editor/actions/template.ts","../src/application/editor/actions/text.ts","../src/application/editor/operations/highlight.ts","../src/application/editor/actions/highlight.ts","../src/application/editor/EditorHistory.ts","../src/application/editor/tools/Monomer.ts","../src/application/editor/tools/Erase.ts","../src/application/editor/tools/SelectRectangle.ts","../src/application/editor/tools/Clear.ts","../src/application/editor/tools/Hand.ts","../src/application/editor/tools/Tool.ts","../src/application/editor/tools/index.ts","../src/application/editor/index.ts","../src/application/render/renderStruct.ts","../src/application/editor/MacromoleculesConverter.ts","../src/application/render/view-model/HalfEdge.ts","../src/application/render/view-model/Loop.ts","../src/application/render/view-model/ViewModel.ts","../src/application/editor/Editor.ts","../src/domain/serializers/ket/fromKet/monomerToDrawingEntity.ts","../src/domain/serializers/ket/fromKet/polymerBondToDrawingEntity.ts","../src/domain/serializers/ket/multitailArrowsValidator.ts","../src/domain/serializers/ket/validate.ts","../src/domain/serializers/ket/toKet/imageToKet.ts","../src/domain/serializers/ket/fromKet/imageToStruct.ts","../src/domain/serializers/ket/toKet/multitailArrowToKet.ts","../src/domain/serializers/ket/fromKet/multitailArrowToStruct.ts","../src/domain/serializers/ket/ketSerializer.ts","../src/domain/serializers/mol/utils.js","../src/domain/serializers/mol/parseSGroup.js","../src/domain/serializers/mol/v2000.js","../src/domain/serializers/mol/v3000.js","../src/domain/serializers/mol/common.js","../src/domain/serializers/mol/molfile.ts","../src/domain/serializers/mol/molSerializer.ts","../src/domain/serializers/smi/cis_trans.js","../src/domain/serializers/smi/dfs.js","../src/domain/serializers/smi/stereocenters.js","../src/domain/serializers/smi/smiles.js","../src/domain/serializers/smi/smiSerializer.ts","../src/domain/serializers/sdf/sdfSerializer.ts","../src/domain/entities/image.ts","../src/domain/entities/highlight.ts","../src/domain/entities/sGroupAttachmentPoint.ts","../src/domain/entities/Axis.ts","../src/domain/entities/LinkerSequenceNode.ts","../src/infrastructure/services/helpers.ts","../src/infrastructure/services/struct/remoteStructService.ts","../src/infrastructure/services/struct/remoteStructServiceProvider.ts","../src/application/indigo.ts","../../../node_modules/events/events.js","../src/application/ketcher.types.ts","../src/application/ketcher.ts","../src/application/ketcherBuilder.ts"],"sourcesContent":["/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport type { ElementLabel } from './element.types';\n\ntype ElementColorType = {\n  [key in ElementLabel]: string;\n};\n\nexport const ElementColor: ElementColorType = {\n  H: '#000000',\n  He: '#89a1a1',\n  Li: '#bd77ed',\n  Be: '#8fbc00',\n  B: '#c18989',\n  C: '#000000',\n  N: '#304ff7',\n  O: '#ff0d0d',\n  F: '#78bc42',\n  Ne: '#80a2af',\n  Na: '#ab5cf2',\n  Mg: '#6fcd00',\n  Al: '#a99393',\n  Si: '#b29478',\n  P: '#ff8000',\n  S: '#c99a19',\n  Cl: '#1fd01f',\n  Ar: '#69acba',\n  K: '#8f40d4',\n  Ca: '#38e900',\n  Sc: '#999999',\n  Ti: '#979a9e',\n  V: '#99999e',\n  Cr: '#8a99c7',\n  Mn: '#9c7ac7',\n  Fe: '#e06633',\n  Co: '#d37e8e',\n  Ni: '#4ece4e',\n  Cu: '#c78033',\n  Zn: '#7d80b0',\n  Ga: '#bc8b8b',\n  Ge: '#668f8f',\n  As: '#b87ddd',\n  Se: '#e59100',\n  Br: '#a62929',\n  Kr: '#59b1c9',\n  Rb: '#702eb0',\n  Sr: '#00ff00',\n  Y: '#66afaf',\n  Zr: '#71abab',\n  Nb: '#67aeb4',\n  Mo: '#54b5b5',\n  Tc: '#3b9e9e',\n  Ru: '#248f8f',\n  Rh: '#0a7d8c',\n  Pd: '#006985',\n  Ag: '#9a9a9a',\n  Cd: '#b29764',\n  In: '#a67573',\n  Sn: '#668080',\n  Sb: '#9e63b5',\n  Te: '#d47a00',\n  I: '#940094',\n  Xe: '#429eb0',\n  Cs: '#57178f',\n  Ba: '#00c900',\n  La: '#5caed1',\n  Ce: '#9d9d7b',\n  Pr: '#8ca581',\n  Nd: '#84a984',\n  Pm: '#71b18a',\n  Sm: '#66b68e',\n  Eu: '#4ac298',\n  Gd: '#37cb9e',\n  Tb: '#28d1a4',\n  Dy: '#1bd7a8',\n  Ho: '#00e98f',\n  Er: '#00e675',\n  Tm: '#00d452',\n  Yb: '#00bf38',\n  Lu: '#00ab24',\n  Hf: '#47b3ec',\n  Ta: '#4da6ff',\n  W: '#2194d6',\n  Re: '#267dab',\n  Os: '#266696',\n  Ir: '#175487',\n  Pt: '#9898a3',\n  Au: '#c19e1c',\n  Hg: '#9797ac',\n  Tl: '#a6544d',\n  Pb: '#575961',\n  Bi: '#9e4fb5',\n  Po: '#ab5c00',\n  At: '#754f45',\n  Rn: '#428296',\n  Fr: '#420066',\n  Ra: '#007d00',\n  Ac: '#6aa2ec',\n  Th: '#00baff',\n  Pa: '#00a1ff',\n  U: '#008fff',\n  Np: '#0080ff',\n  Pu: '#006bff',\n  Am: '#545cf2',\n  Cm: '#785ce3',\n  Bk: '#8a4fe3',\n  Cf: '#a136d4',\n  Es: '#b31fd4',\n  // Need to fix colors for the elements below (c)\n  Fm: '#000000',\n  Md: '#000000',\n  No: '#000000',\n  Lr: '#000000',\n  Rf: '#47b3ec',\n  Db: '#4da6ff',\n  Sg: '#2194d6',\n  Bh: '#267dab',\n  Hs: '#266696',\n  Mt: '#175487',\n  Ds: '#9898a3',\n  Rg: '#c19e1c',\n  Cn: '#9797ac',\n  Nh: '#000000',\n  Fl: '#000000',\n  Mc: '#000000',\n  Lv: '#000000',\n  Ts: '#000000',\n  Og: '#000000',\n} as const;\n\ntype Keys = keyof typeof ElementColor;\nexport type AtomColor = typeof ElementColor[Keys];\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport type { Element } from './element.types';\n\nconst elementsArray: Array<Element> = [\n  {\n    number: 1,\n    label: 'H',\n    period: 1,\n    group: 1,\n    title: 'Hydrogen',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'other-nonmetal',\n    mass: 1.00794,\n  },\n  {\n    number: 2,\n    label: 'He',\n    period: 1,\n    group: 8,\n    title: 'Helium',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'noble',\n    mass: 4.0026022,\n  },\n  {\n    number: 3,\n    label: 'Li',\n    period: 2,\n    group: 1,\n    title: 'Lithium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkali',\n    mass: 6.94,\n  },\n  {\n    number: 4,\n    label: 'Be',\n    period: 2,\n    group: 2,\n    title: 'Beryllium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkaline-earth',\n    mass: 9.01218315,\n  },\n  {\n    number: 5,\n    label: 'B',\n    period: 2,\n    group: 3,\n    title: 'Boron',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'metalloid',\n    mass: 10.81,\n  },\n  {\n    number: 6,\n    label: 'C',\n    period: 2,\n    group: 4,\n    title: 'Carbon',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'other-nonmetal',\n    mass: 12.011,\n  },\n  {\n    number: 7,\n    label: 'N',\n    period: 2,\n    group: 5,\n    title: 'Nitrogen',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'other-nonmetal',\n    mass: 14.007,\n  },\n  {\n    number: 8,\n    label: 'O',\n    period: 2,\n    group: 6,\n    leftH: true,\n    title: 'Oxygen',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'other-nonmetal',\n    mass: 15.999,\n  },\n  {\n    number: 9,\n    label: 'F',\n    period: 2,\n    group: 7,\n    leftH: true,\n    title: 'Fluorine',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'halogen',\n    mass: 18.9984031636,\n  },\n  {\n    number: 10,\n    label: 'Ne',\n    period: 2,\n    group: 8,\n    title: 'Neon',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'noble',\n    mass: 20.17976,\n  },\n  {\n    number: 11,\n    label: 'Na',\n    period: 3,\n    group: 1,\n    title: 'Sodium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkali',\n    mass: 22.989769282,\n  },\n  {\n    number: 12,\n    label: 'Mg',\n    period: 3,\n    group: 2,\n    title: 'Magnesium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkaline-earth',\n    mass: 24.305,\n  },\n  {\n    number: 13,\n    label: 'Al',\n    period: 3,\n    group: 3,\n    title: 'Aluminium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'post-transition',\n    mass: 26.98153857,\n  },\n  {\n    number: 14,\n    label: 'Si',\n    period: 3,\n    group: 4,\n    title: 'Silicon',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'metalloid',\n    mass: 28.085,\n  },\n  {\n    number: 15,\n    label: 'P',\n    period: 3,\n    group: 5,\n    title: 'Phosphorus',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'other-nonmetal',\n    mass: 30.9737619985,\n  },\n  {\n    number: 16,\n    label: 'S',\n    period: 3,\n    group: 6,\n    leftH: true,\n    title: 'Sulfur',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'other-nonmetal',\n    mass: 32.06,\n  },\n  {\n    number: 17,\n    label: 'Cl',\n    period: 3,\n    group: 7,\n    leftH: true,\n    title: 'Chlorine',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'halogen',\n    mass: 35.45,\n  },\n  {\n    number: 18,\n    label: 'Ar',\n    period: 3,\n    group: 8,\n    title: 'Argon',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'noble',\n    mass: 39.9481,\n  },\n  {\n    number: 19,\n    label: 'K',\n    period: 4,\n    group: 1,\n    title: 'Potassium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkali',\n    mass: 39.09831,\n  },\n  {\n    number: 20,\n    label: 'Ca',\n    period: 4,\n    group: 2,\n    title: 'Calcium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkaline-earth',\n    mass: 40.0784,\n  },\n  {\n    number: 21,\n    label: 'Sc',\n    period: 4,\n    group: 3,\n    title: 'Scandium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 44.9559085,\n  },\n  {\n    number: 22,\n    label: 'Ti',\n    period: 4,\n    group: 4,\n    title: 'Titanium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 47.8671,\n  },\n  {\n    number: 23,\n    label: 'V',\n    period: 4,\n    group: 5,\n    title: 'Vanadium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 50.94151,\n  },\n  {\n    number: 24,\n    label: 'Cr',\n    period: 4,\n    group: 6,\n    title: 'Chromium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 51.99616,\n  },\n  {\n    number: 25,\n    label: 'Mn',\n    period: 4,\n    group: 7,\n    title: 'Manganese',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 54.9380443,\n  },\n  {\n    number: 26,\n    label: 'Fe',\n    period: 4,\n    group: 8,\n    title: 'Iron',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 55.8452,\n  },\n  {\n    number: 27,\n    label: 'Co',\n    period: 4,\n    group: 8,\n    title: 'Cobalt',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 58.9331944,\n  },\n  {\n    number: 28,\n    label: 'Ni',\n    period: 4,\n    group: 8,\n    title: 'Nickel',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 58.69344,\n  },\n  {\n    number: 29,\n    label: 'Cu',\n    period: 4,\n    group: 1,\n    title: 'Copper',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 63.5463,\n  },\n  {\n    number: 30,\n    label: 'Zn',\n    period: 4,\n    group: 2,\n    title: 'Zinc',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 65.382,\n  },\n  {\n    number: 31,\n    label: 'Ga',\n    period: 4,\n    group: 3,\n    title: 'Gallium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'post-transition',\n    mass: 69.7231,\n  },\n  {\n    number: 32,\n    label: 'Ge',\n    period: 4,\n    group: 4,\n    title: 'Germanium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'metalloid',\n    mass: 72.6308,\n  },\n  {\n    number: 33,\n    label: 'As',\n    period: 4,\n    group: 5,\n    title: 'Arsenic',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'metalloid',\n    mass: 74.9215956,\n  },\n  {\n    number: 34,\n    label: 'Se',\n    period: 4,\n    group: 6,\n    leftH: true,\n    title: 'Selenium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'other-nonmetal',\n    mass: 78.9718,\n  },\n  {\n    number: 35,\n    label: 'Br',\n    period: 4,\n    group: 7,\n    leftH: true,\n    title: 'Bromine',\n    state: 'liquid',\n    origin: 'primordial',\n    type: 'halogen',\n    mass: 79.904,\n  },\n  {\n    number: 36,\n    label: 'Kr',\n    period: 4,\n    group: 8,\n    title: 'Krypton',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'noble',\n    mass: 83.7982,\n  },\n  {\n    number: 37,\n    label: 'Rb',\n    period: 5,\n    group: 1,\n    title: 'Rubidium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkali',\n    mass: 85.46783,\n  },\n  {\n    number: 38,\n    label: 'Sr',\n    period: 5,\n    group: 2,\n    title: 'Strontium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkaline-earth',\n    mass: 87.621,\n  },\n  {\n    number: 39,\n    label: 'Y',\n    period: 5,\n    group: 3,\n    title: 'Yttrium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 88.905842,\n  },\n  {\n    number: 40,\n    label: 'Zr',\n    period: 5,\n    group: 4,\n    title: 'Zirconium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 91.2242,\n  },\n  {\n    number: 41,\n    label: 'Nb',\n    period: 5,\n    group: 5,\n    title: 'Niobium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 92.906372,\n  },\n  {\n    number: 42,\n    label: 'Mo',\n    period: 5,\n    group: 6,\n    title: 'Molybdenum',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 95.951,\n  },\n  {\n    number: 43,\n    label: 'Tc',\n    period: 5,\n    group: 7,\n    title: 'Technetium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'transition',\n    mass: 98,\n  },\n  {\n    number: 44,\n    label: 'Ru',\n    period: 5,\n    group: 8,\n    title: 'Ruthenium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 101.072,\n  },\n  {\n    number: 45,\n    label: 'Rh',\n    period: 5,\n    group: 8,\n    title: 'Rhodium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 102.905502,\n  },\n  {\n    number: 46,\n    label: 'Pd',\n    period: 5,\n    group: 8,\n    title: 'Palladium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 106.421,\n  },\n  {\n    number: 47,\n    label: 'Ag',\n    period: 5,\n    group: 1,\n    title: 'Silver',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 107.86822,\n  },\n  {\n    number: 48,\n    label: 'Cd',\n    period: 5,\n    group: 2,\n    title: 'Cadmium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 112.4144,\n  },\n  {\n    number: 49,\n    label: 'In', // 49\n    period: 5,\n    group: 3,\n    title: 'Indium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'post-transition',\n    mass: 114.8181,\n  },\n  {\n    number: 50,\n    label: 'Sn',\n    period: 5,\n    group: 4,\n    title: 'Tin',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'post-transition',\n    mass: 118.7107,\n  },\n  {\n    number: 51,\n    label: 'Sb',\n    period: 5,\n    group: 5,\n    title: 'Antimony',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'metalloid',\n    mass: 121.7601,\n  },\n  {\n    number: 52,\n    label: 'Te',\n    period: 5,\n    group: 6,\n    title: 'Tellurium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'metalloid',\n    mass: 127.603,\n  },\n  {\n    number: 53,\n    label: 'I',\n    period: 5,\n    group: 7,\n    leftH: true,\n    title: 'Iodine',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'halogen',\n    mass: 126.904473,\n  },\n  {\n    number: 54,\n    label: 'Xe',\n    period: 5,\n    group: 8,\n    title: 'Xenon',\n    state: 'gas',\n    origin: 'primordial',\n    type: 'noble',\n    mass: 131.2936,\n  },\n  {\n    number: 55,\n    label: 'Cs',\n    period: 6,\n    group: 1,\n    title: 'Caesium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkali',\n    mass: 132.905451966,\n  },\n  {\n    number: 56,\n    label: 'Ba',\n    period: 6,\n    group: 2,\n    title: 'Barium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'alkaline-earth',\n    mass: 137.3277,\n  },\n  {\n    number: 57,\n    label: 'La',\n    period: 6,\n    group: 3,\n    title: 'Lanthanum',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 138.905477,\n  },\n  {\n    number: 58,\n    label: 'Ce',\n    period: 6,\n    group: 3,\n    title: 'Cerium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 140.1161,\n  },\n  {\n    number: 59,\n    label: 'Pr',\n    period: 6,\n    group: 3,\n    title: 'Praseodymium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 140.907662,\n  },\n  {\n    number: 60,\n    label: 'Nd',\n    period: 6,\n    group: 3,\n    title: 'Neodymium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 144.2423,\n  },\n  {\n    number: 61,\n    label: 'Pm',\n    period: 6,\n    group: 3,\n    title: 'Promethium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'lanthanide',\n    mass: 145,\n  },\n  {\n    number: 62,\n    label: 'Sm',\n    period: 6,\n    group: 3,\n    title: 'Samarium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 150.362,\n  },\n  {\n    number: 63,\n    label: 'Eu',\n    period: 6,\n    group: 3,\n    title: 'Europium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 151.9641,\n  },\n  {\n    number: 64,\n    label: 'Gd',\n    period: 6,\n    group: 3,\n    title: 'Gadolinium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 157.253,\n  },\n  {\n    number: 65,\n    label: 'Tb',\n    period: 6,\n    group: 3,\n    title: 'Terbium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 158.925352,\n  },\n  {\n    number: 66,\n    label: 'Dy',\n    period: 6,\n    group: 3,\n    title: 'Dysprosium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 162.5001,\n  },\n  {\n    number: 67,\n    label: 'Ho',\n    period: 6,\n    group: 3,\n    title: 'Holmium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 164.930332,\n  },\n  {\n    number: 68,\n    label: 'Er',\n    period: 6,\n    group: 3,\n    title: 'Erbium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 167.2593,\n  },\n  {\n    number: 69,\n    label: 'Tm',\n    period: 6,\n    group: 3,\n    title: 'Thulium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 168.934222,\n  },\n  {\n    number: 70,\n    label: 'Yb',\n    period: 6,\n    group: 3,\n    title: 'Ytterbium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 173.0451,\n  },\n  {\n    number: 71,\n    label: 'Lu',\n    period: 6,\n    group: 3,\n    title: 'Lutetium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'lanthanide',\n    mass: 174.96681,\n  },\n  {\n    number: 72,\n    label: 'Hf',\n    period: 6,\n    group: 4,\n    title: 'Hafnium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 178.492,\n  },\n  {\n    number: 73,\n    label: 'Ta',\n    period: 6,\n    group: 5,\n    title: 'Tantalum',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 180.947882,\n  },\n  {\n    number: 74,\n    label: 'W',\n    period: 6,\n    group: 6,\n    title: 'Tungsten',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 183.841,\n  },\n  {\n    number: 75,\n    label: 'Re',\n    period: 6,\n    group: 7,\n    title: 'Rhenium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 186.2071,\n  },\n  {\n    number: 76,\n    label: 'Os',\n    period: 6,\n    group: 8,\n    title: 'Osmium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 190.233,\n  },\n  {\n    number: 77,\n    label: 'Ir',\n    period: 6,\n    group: 8,\n    title: 'Iridium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 192.2173,\n  },\n  {\n    number: 78,\n    label: 'Pt',\n    period: 6,\n    group: 8,\n    title: 'Platinum',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 195.0849,\n  },\n  {\n    number: 79,\n    label: 'Au',\n    period: 6,\n    group: 1,\n    title: 'Gold',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 196.9665695,\n  },\n  {\n    number: 80,\n    label: 'Hg',\n    period: 6,\n    group: 2,\n    title: 'Mercury',\n    state: 'liquid',\n    origin: 'primordial',\n    type: 'transition',\n    mass: 200.5923,\n  },\n  {\n    number: 81,\n    label: 'Tl',\n    period: 6,\n    group: 3,\n    title: 'Thallium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'post-transition',\n    mass: 204.38,\n  },\n  {\n    number: 82,\n    label: 'Pb',\n    period: 6,\n    group: 4,\n    title: 'Lead',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'post-transition',\n    mass: 207.21,\n  },\n  {\n    number: 83,\n    label: 'Bi',\n    period: 6,\n    group: 5,\n    title: 'Bismuth',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'post-transition',\n    mass: 208.980401,\n  },\n  {\n    number: 84,\n    label: 'Po',\n    period: 6,\n    group: 6,\n    title: 'Polonium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'metalloid',\n    mass: 209,\n  },\n  {\n    number: 85,\n    label: 'At',\n    period: 6,\n    group: 7,\n    title: 'Astatine',\n    state: 'solid',\n    origin: 'decay',\n    type: 'halogen',\n    mass: 210,\n  },\n  {\n    number: 86,\n    label: 'Rn',\n    period: 6,\n    group: 8,\n    title: 'Radon',\n    state: 'gas',\n    origin: 'decay',\n    type: 'noble',\n    mass: 222,\n  },\n  {\n    number: 87,\n    label: 'Fr',\n    period: 7,\n    group: 1,\n    title: 'Francium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'alkali',\n    mass: 223,\n  },\n  {\n    number: 88,\n    label: 'Ra',\n    period: 7,\n    group: 2,\n    title: 'Radium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'alkaline-earth',\n    mass: 226,\n  },\n  {\n    number: 89,\n    label: 'Ac',\n    period: 7,\n    group: 3,\n    title: 'Actinium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'transition',\n    mass: 227,\n  },\n  {\n    number: 90,\n    label: 'Th',\n    period: 7,\n    group: 3,\n    title: 'Thorium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'actinide',\n    mass: 232.03774,\n  },\n  {\n    number: 91,\n    label: 'Pa',\n    period: 7,\n    group: 3,\n    title: 'Protactinium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'actinide',\n    mass: 231.035882,\n  },\n  {\n    number: 92,\n    label: 'U',\n    period: 7,\n    group: 3,\n    title: 'Uranium',\n    state: 'solid',\n    origin: 'primordial',\n    type: 'actinide',\n    mass: 238.028913,\n  },\n  {\n    number: 93,\n    label: 'Np',\n    period: 7,\n    group: 3,\n    title: 'Neptunium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'actinide',\n    mass: 237,\n  },\n  {\n    number: 94,\n    label: 'Pu',\n    period: 7,\n    group: 3,\n    title: 'Plutonium',\n    state: 'solid',\n    origin: 'decay',\n    type: 'actinide',\n    mass: 244,\n  },\n  {\n    number: 95,\n    label: 'Am',\n    period: 7,\n    group: 3,\n    title: 'Americium',\n    state: 'solid',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 243,\n  },\n  {\n    number: 96,\n    label: 'Cm',\n    period: 7,\n    group: 3,\n    title: 'Curium',\n    state: 'solid',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 247,\n  },\n  {\n    number: 97,\n    label: 'Bk',\n    period: 7,\n    group: 3,\n    title: 'Berkelium',\n    state: 'solid',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 247,\n  },\n  {\n    number: 98,\n    label: 'Cf',\n    period: 7,\n    group: 3,\n    title: 'Californium',\n    state: 'solid',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 251,\n  },\n  {\n    number: 99,\n    label: 'Es',\n    period: 7,\n    group: 3,\n    title: 'Einsteinium',\n    state: 'solid',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 252,\n  },\n  {\n    number: 100,\n    label: 'Fm',\n    period: 7,\n    group: 3,\n    title: 'Fermium',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 257,\n  },\n  {\n    number: 101,\n    label: 'Md',\n    period: 7,\n    group: 3,\n    title: 'Mendelevium',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 258,\n  },\n  {\n    number: 102,\n    label: 'No',\n    period: 7,\n    group: 3,\n    title: 'Nobelium',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 259,\n  },\n  {\n    number: 103,\n    label: 'Lr',\n    period: 7,\n    group: 3,\n    title: 'Lawrencium',\n    origin: 'synthetic',\n    type: 'actinide',\n    mass: 266,\n  },\n  {\n    number: 104,\n    label: 'Rf',\n    period: 7,\n    group: 4,\n    title: 'Rutherfordium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 267,\n  },\n  {\n    number: 105,\n    label: 'Db',\n    period: 7,\n    group: 5,\n    title: 'Dubnium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 268,\n  },\n  {\n    number: 106,\n    label: 'Sg',\n    period: 7,\n    group: 6,\n    title: 'Seaborgium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 269,\n  },\n  {\n    number: 107,\n    label: 'Bh',\n    period: 7,\n    group: 7,\n    title: 'Bohrium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 270,\n  },\n  {\n    number: 108,\n    label: 'Hs',\n    period: 7,\n    group: 8,\n    title: 'Hassium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 269,\n  },\n  {\n    number: 109,\n    label: 'Mt',\n    period: 7,\n    group: 8,\n    title: 'Meitnerium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 278,\n  },\n  {\n    number: 110,\n    label: 'Ds',\n    period: 7,\n    group: 8,\n    title: 'Darmstadtium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 281,\n  },\n  {\n    number: 111,\n    label: 'Rg',\n    period: 7,\n    group: 1,\n    title: 'Roentgenium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 282,\n  },\n  {\n    number: 112,\n    label: 'Cn',\n    period: 7,\n    group: 2,\n    title: 'Copernicium',\n    origin: 'synthetic',\n    type: 'transition',\n    mass: 285,\n  },\n  {\n    number: 113,\n    label: 'Nh',\n    period: 7,\n    group: 3,\n    title: 'Nihonium',\n    origin: 'synthetic',\n    type: 'post-transition',\n    mass: 286,\n  },\n  {\n    number: 114,\n    label: 'Fl',\n    period: 7,\n    group: 4,\n    title: 'Flerovium',\n    origin: 'synthetic',\n    type: 'post-transition',\n    mass: 289,\n  },\n  {\n    number: 115,\n    label: 'Mc',\n    period: 7,\n    group: 5,\n    title: 'Moscovium',\n    origin: 'synthetic',\n    type: 'post-transition',\n    mass: 289,\n  },\n  {\n    number: 116,\n    label: 'Lv',\n    period: 7,\n    group: 6,\n    title: 'Livermorium',\n    origin: 'synthetic',\n    type: 'post-transition',\n    mass: 293,\n  },\n  {\n    number: 117,\n    label: 'Ts',\n    period: 7,\n    group: 7,\n    title: 'Tennessine',\n    origin: 'synthetic',\n    type: 'halogen',\n    mass: 294,\n  },\n  {\n    number: 118,\n    label: 'Og',\n    period: 7,\n    group: 8,\n    title: 'Oganesson',\n    origin: 'synthetic',\n    type: 'noble',\n    mass: 294,\n  },\n];\n\nconst elementsMap = elementsArray.reduce((acc, element) => {\n  acc.set(element.label, element);\n  acc.set(element.number, element);\n  return acc;\n}, new Map<string | number, Element>());\n\nexport const Elements = {\n  get: (key: number | string): Element | undefined => elementsMap.get(key),\n  filter: (predicate: (element: Element) => boolean): Array<Element> => {\n    return elementsArray.filter(predicate);\n  },\n  getAll: () => [...elementsArray],\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport type ElementLabel =\n  | 'H'\n  | 'He'\n  | 'Li'\n  | 'Be'\n  | 'B'\n  | 'C'\n  | 'N'\n  | 'O'\n  | 'F'\n  | 'Ne'\n  | 'Na'\n  | 'Mg'\n  | 'Al'\n  | 'Si'\n  | 'P'\n  | 'S'\n  | 'Cl'\n  | 'Ar'\n  | 'K'\n  | 'Ca'\n  | 'Sc'\n  | 'Ti'\n  | 'V'\n  | 'Cr'\n  | 'Mn'\n  | 'Fe'\n  | 'Co'\n  | 'Ni'\n  | 'Cu'\n  | 'Zn'\n  | 'Ga'\n  | 'Ge'\n  | 'As'\n  | 'Se'\n  | 'Br'\n  | 'Kr'\n  | 'Rb'\n  | 'Sr'\n  | 'Y'\n  | 'Zr'\n  | 'Nb'\n  | 'Mo'\n  | 'Tc'\n  | 'Ru'\n  | 'Rh'\n  | 'Pd'\n  | 'Ag'\n  | 'Cd'\n  | 'In'\n  | 'Sn'\n  | 'Sb'\n  | 'Te'\n  | 'I'\n  | 'Xe'\n  | 'Cs'\n  | 'Ba'\n  | 'La'\n  | 'Ce'\n  | 'Pr'\n  | 'Nd'\n  | 'Pm'\n  | 'Sm'\n  | 'Eu'\n  | 'Gd'\n  | 'Tb'\n  | 'Dy'\n  | 'Ho'\n  | 'Er'\n  | 'Tm'\n  | 'Yb'\n  | 'Lu'\n  | 'Hf'\n  | 'Ta'\n  | 'W'\n  | 'Re'\n  | 'Os'\n  | 'Ir'\n  | 'Pt'\n  | 'Au'\n  | 'Hg'\n  | 'Tl'\n  | 'Pb'\n  | 'Bi'\n  | 'Po'\n  | 'At'\n  | 'Rn'\n  | 'Fr'\n  | 'Ra'\n  | 'Ac'\n  | 'Th'\n  | 'Pa'\n  | 'U'\n  | 'Np'\n  | 'Pu'\n  | 'Am'\n  | 'Cm'\n  | 'Bk'\n  | 'Cf'\n  | 'Es'\n  | 'Fm'\n  | 'Md'\n  | 'No'\n  | 'Lr'\n  | 'Rf'\n  | 'Db'\n  | 'Sg'\n  | 'Bh'\n  | 'Hs'\n  | 'Mt'\n  | 'Ds'\n  | 'Rg'\n  | 'Cn'\n  | 'Nh'\n  | 'Fl'\n  | 'Mc'\n  | 'Lv'\n  | 'Ts'\n  | 'Og';\n\nexport type Period = 1 | 2 | 3 | 4 | 5 | 6 | 7;\nexport type Group = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8;\n\nexport interface Element {\n  number: number;\n  label: ElementLabel;\n  period: Period;\n  group: Group;\n  title: string;\n  state?: string;\n  origin: string;\n  type?: string;\n  mass: number;\n  leftH?: boolean;\n}\n\nexport enum AtomLabel {\n  Ac = 'Ac',\n  Ag = 'Ag',\n  Al = 'Al',\n  Am = 'Am',\n  Ar = 'Ar',\n  As = 'As',\n  At = 'At',\n  Au = 'Au',\n  B = 'B',\n  Ba = 'Ba',\n  Be = 'Be',\n  Bh = 'Bh',\n  Bi = 'Bi',\n  Bk = 'Bk',\n  Br = 'Br',\n  C = 'C',\n  Ca = 'Ca',\n  Cd = 'Cd',\n  Ce = 'Ce',\n  Cf = 'Cf',\n  Cl = 'Cl',\n  Cm = 'Cm',\n  Cn = 'Cn',\n  Co = 'Co',\n  Cr = 'Cr',\n  Cs = 'Cs',\n  Cu = 'Cu',\n  Db = 'Db',\n  Ds = 'Ds',\n  Dy = 'Dy',\n  Er = 'Er',\n  Es = 'Es',\n  Eu = 'Eu',\n  F = 'F',\n  Fe = 'Fe',\n  Fl = 'Fl',\n  Fm = 'Fm',\n  Fr = 'Fr',\n  Ga = 'Ga',\n  Gd = 'Gd',\n  Ge = 'Ge',\n  H = 'H',\n  He = 'He',\n  Hf = 'Hf',\n  Hg = 'Hg',\n  Ho = 'Ho',\n  Hs = 'Hs',\n  I = 'I',\n  In = 'In',\n  Ir = 'Ir',\n  K = 'K',\n  Kr = 'Kr',\n  La = 'La',\n  Li = 'Li',\n  Lr = 'Lr',\n  Lu = 'Lu',\n  Lv = 'Lv',\n  Mc = 'Mc',\n  Md = 'Md',\n  Mg = 'Mg',\n  Mn = 'Mn',\n  Mo = 'Mo',\n  Mt = 'Mt',\n  N = 'N',\n  Na = 'Na',\n  Nb = 'Nb',\n  Nd = 'Nd',\n  Ne = 'Ne',\n  Nh = 'Nh',\n  Ni = 'Ni',\n  No = 'No',\n  Np = 'Np',\n  O = 'O',\n  Og = 'Og',\n  Os = 'Os',\n  P = 'P',\n  Pa = 'Pa',\n  Pb = 'Pb',\n  Pd = 'Pd',\n  Pm = 'Pm',\n  Po = 'Po',\n  Pr = 'Pr',\n  Pt = 'Pt',\n  Pu = 'Pu',\n  Ra = 'Ra',\n  Rb = 'Rb',\n  Re = 'Re',\n  Rf = 'Rf',\n  Rg = 'Rg',\n  Rh = 'Rh',\n  Rn = 'Rn',\n  Ru = 'Ru',\n  S = 'S',\n  Sb = 'Sb',\n  Sc = 'Sc',\n  Se = 'Se',\n  Sg = 'Sg',\n  Si = 'Si',\n  Sm = 'Sm',\n  Sn = 'Sn',\n  Sr = 'Sr',\n  Ta = 'Ta',\n  Tb = 'Tb',\n  Tc = 'Tc',\n  Te = 'Te',\n  Th = 'Th',\n  Ti = 'Ti',\n  Tl = 'Tl',\n  Tm = 'Tm',\n  Ts = 'Ts',\n  U = 'U',\n  V = 'V',\n  W = 'W',\n  Xe = 'Xe',\n  Y = 'Y',\n  Yb = 'Yb',\n  Zn = 'Zn',\n  Zr = 'Zr',\n  // Query atoms\n  D = 'D',\n  T = 'T',\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport type GenItem = {\n  label: string;\n  description?: string;\n};\n\nexport type GenItemSet = {\n  items: GenItem[];\n  displayName?: string;\n};\n\nexport type GenGroup = {\n  itemSets: GenItemSet[];\n  title: string;\n};\n\nexport type GenericsType = {\n  [index: string]: GenGroup & { subGroups?: GenericsType };\n};\n\nexport const Generics: GenericsType = {\n  'atoms-gen': {\n    title: 'Atom Generics',\n    itemSets: [\n      {\n        displayName: 'any atom',\n        items: [\n          { label: 'A', description: 'Any atom except hydrogen' },\n          { label: 'AH', description: 'Any atom, including hydrogen' },\n        ],\n      },\n      {\n        displayName: 'except C or H',\n        items: [\n          {\n            label: 'Q',\n            description: 'Any heteroatom (any atom except C or H)',\n          },\n          { label: 'QH', description: 'Any atom except C' },\n        ],\n      },\n      {\n        displayName: 'any metal',\n        items: [\n          { label: 'M', description: 'Any metal' },\n          { label: 'MH', description: 'Any metal or hydrogen' },\n        ],\n      },\n      {\n        displayName: 'any halogen',\n        items: [\n          { label: 'X', description: 'Any halogen' },\n          { label: 'XH', description: 'Any halogen or hydrogen' },\n        ],\n      },\n    ],\n  },\n  'special-nodes': {\n    title: 'Special Nodes',\n    itemSets: [\n      {\n        items: [\n          { label: 'H+', description: 'Proton' },\n          { label: 'D', description: 'Deuterium' },\n          { label: 'T', description: 'Tritium' },\n          { label: 'R', description: 'Pseudoatom' },\n          { label: 'Pol', description: 'Polymer Bead' },\n        ],\n      },\n    ],\n  },\n\n  'group-gen': {\n    title: 'Group Generics',\n    itemSets: [\n      {\n        items: [\n          {\n            label: 'G',\n            description: 'Any group',\n          },\n          {\n            label: 'GH',\n            description: 'Any group or hydrogen',\n          },\n        ],\n      },\n      {\n        items: [\n          {\n            label: 'G*',\n            description: 'Any group with a ring closure',\n          },\n          {\n            label: 'GH*',\n            description: 'Any group with a ring closure or hydrogen',\n          },\n        ],\n      },\n    ],\n    subGroups: {\n      'group-acyclic': {\n        title: 'Acyclic',\n        itemSets: [\n          {\n            items: [\n              { label: 'ACY', description: 'Acyclic group' },\n              { label: 'ACH', description: 'Acyclic group or hydrogen' },\n            ],\n          },\n        ],\n        subGroups: {\n          'acyclic-carbo': {\n            title: 'Acyclic Carbo',\n            itemSets: [\n              {\n                items: [\n                  { label: 'ABC', description: 'Carbocyclic' },\n                  { label: 'ABH', description: 'Carbocyclic of hydrogen' },\n                ],\n              },\n              {\n                displayName: 'alkynyl',\n                items: [\n                  { label: 'AYL', description: 'Alkynyl' },\n                  { label: 'AYH', description: 'Alkynyl or hydrogen' },\n                ],\n              },\n              {\n                displayName: 'alkyl',\n                items: [\n                  { label: 'ALK', description: 'Alkyl' },\n                  { label: 'ALH', description: 'Alkyl or hydrogen' },\n                ],\n              },\n              {\n                displayName: 'alkenyl',\n                items: [\n                  { label: 'AEL', description: 'Alkenyl' },\n                  { label: 'AEH', description: 'Alkenyl or hydrogen' },\n                ],\n              },\n            ],\n          },\n          'acyclic-hetero': {\n            title: 'Acyclic Hetero',\n            itemSets: [\n              {\n                items: [\n                  { label: 'AHC', description: 'Heteroacyclic' },\n                  { label: 'AHH', description: 'Heterocyclic or hydrogen' },\n                ],\n              },\n              {\n                items: [\n                  { label: 'AOX', description: 'Alkoxy' },\n                  { label: 'AOH', description: 'Alkoxy or hydrogen' },\n                ],\n              },\n            ],\n          },\n        },\n      },\n      'group-cyclic': {\n        title: 'Cyclic',\n        itemSets: [\n          {\n            items: [\n              { label: 'CYC', description: 'Cyclic group' },\n              { label: 'CYH', description: 'Cyclic group or hydrogen' },\n            ],\n          },\n          {\n            displayName: 'no carbon',\n            items: [\n              {\n                label: 'CXX',\n                description: 'Cyclic group with no Carbon atoms',\n              },\n              {\n                label: 'CXH',\n                description: 'Cyclic group with no Carbon atoms or hydrogen',\n              },\n            ],\n          },\n        ],\n        subGroups: {\n          'cyclic-carbo': {\n            title: 'Cyclic Carbo',\n            itemSets: [\n              {\n                items: [\n                  { label: 'CBC', description: 'Carbocyclic derivatives' },\n                  {\n                    label: 'CBH',\n                    description: 'Carbocyclic derivatives or hydrogen',\n                  },\n                ],\n              },\n              {\n                displayName: 'aryl',\n                items: [\n                  { label: 'ARY', description: 'Any aryl group' },\n                  { label: 'ARH', description: 'Any aryl group or hydrogen' },\n                ],\n              },\n              {\n                displayName: 'cycloalkyl',\n                items: [\n                  { label: 'CAL', description: 'Any cycloalkyl group' },\n                  {\n                    label: 'CAH',\n                    description: 'Any cycloalkyl group or hydrogen',\n                  },\n                ],\n              },\n              {\n                displayName: 'cycloalkenyl',\n                items: [\n                  { label: 'CEL', description: 'Any cyloalkenyl group' },\n                  {\n                    label: 'CEH',\n                    description: 'Any cyloalkenyl group or hydrogen',\n                  },\n                ],\n              },\n            ],\n          },\n          'cyclic-hetero': {\n            title: 'Cyclic Hetero',\n            itemSets: [\n              {\n                items: [\n                  { label: 'CHC', description: 'Heterocyclic group' },\n                  {\n                    label: 'CHH',\n                    description: 'Heterocyclic group or hydrogen',\n                  },\n                ],\n              },\n              {\n                displayName: 'hetero aryl',\n                items: [\n                  { label: 'HAR', description: 'Heteroaryl group' },\n                  { label: 'HAH', description: 'Heteroaryl group or hydrogen' },\n                ],\n              },\n            ],\n          },\n        },\n      },\n    },\n  },\n};\n\nfunction getGenericsList(generics: GenericsType | GenGroup) {\n  if (Array.isArray(generics) && !generics[0]?.items) {\n    return generics.map((item) => item.label);\n  } else {\n    let result: string[] = [];\n    for (const subGroup of Object.values(generics)) {\n      if (typeof generics === 'string') continue;\n      result = [...result, ...getGenericsList(subGroup)];\n    }\n    return result;\n  }\n}\n\nexport const genericsList = getGenericsList(Generics);\n","import type { ImageReferenceName } from 'domain/entities';\n\nexport const IMAGE_KEY = 'images';\nexport const IMAGE_SERIALIZE_KEY = 'image';\n\nconst CURSOR_DIAGONAL_NWSE = 'nwse-resize';\nconst CURSOR_DIAGONAL_NESW = 'nesw-resize';\nconst CURSOR_VERTICAL = 'ns-resize';\nconst CURSOR_HORIZONTAL = 'ew-resize';\n\nexport const imageReferencePositionToCursor: Record<\n  ImageReferenceName,\n  string\n> = {\n  topLeftPosition: CURSOR_DIAGONAL_NWSE,\n  topMiddlePosition: CURSOR_VERTICAL,\n  topRightPosition: CURSOR_DIAGONAL_NESW,\n  rightMiddlePosition: CURSOR_HORIZONTAL,\n  bottomRightPosition: CURSOR_DIAGONAL_NWSE,\n  bottomMiddlePosition: CURSOR_VERTICAL,\n  bottomLeftPosition: CURSOR_DIAGONAL_NESW,\n  leftMiddlePosition: CURSOR_HORIZONTAL,\n};\n","import {\n  MultitailArrowReferenceLinesNames,\n  MultitailArrowReferencePositionsNames,\n} from 'domain/entities';\n\nexport const MULTITAIL_ARROW_KEY = 'multitailArrows';\n\nexport const MULTITAIL_ARROW_TOOL_NAME = 'reaction-arrow-multitail';\n\nexport const MULTITAIL_ARROW_SERIALIZE_KEY = 'multi-tailed-arrow';\n\nconst MOVE = 'move';\nconst CURSOR_RESIZE_VERTICAL = 'ns-resize';\nconst CURSOR_RESIZE_HORIZONTAL = 'ew-resize';\n\nexport const multitailReferencePositionToCursor: Record<\n  MultitailArrowReferencePositionsNames,\n  string\n> = {\n  topTail: CURSOR_RESIZE_HORIZONTAL,\n  tails: CURSOR_RESIZE_HORIZONTAL,\n  bottomTail: CURSOR_RESIZE_HORIZONTAL,\n  topSpine: MOVE,\n  bottomSpine: MOVE,\n  head: CURSOR_RESIZE_HORIZONTAL,\n};\n\nexport const multitailArrowReferenceLinesToCursor: Record<\n  MultitailArrowReferenceLinesNames,\n  string\n> = {\n  topTail: CURSOR_RESIZE_VERTICAL,\n  bottomTail: CURSOR_RESIZE_VERTICAL,\n  tails: CURSOR_RESIZE_VERTICAL,\n  head: CURSOR_RESIZE_VERTICAL,\n  spine: MOVE,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementLabel, Elements } from 'domain/constants';\n\nexport interface AtomListParams {\n  readonly notList: boolean;\n  readonly ids: Array<number>;\n}\n\nexport class AtomList {\n  notList: boolean;\n  ids: Array<number>;\n\n  constructor(params: AtomListParams) {\n    this.notList = params.notList;\n    this.ids = params.ids;\n  }\n\n  labelList() {\n    const labels: Array<ElementLabel> = [];\n    for (const id of this.ids) {\n      const currenElement = Elements.get(id);\n      currenElement && labels.push(currenElement!.label);\n    }\n\n    return labels;\n  }\n\n  label() {\n    let label = '[' + this.labelList().join(',') + ']';\n    if (this.notList) {\n      label = '!' + label;\n    }\n    return label;\n  }\n\n  equals(atomList: AtomList) {\n    return (\n      this.notList === atomList.notList &&\n      (this.ids || []).sort().toString() ===\n        (atomList.ids || []).sort().toString()\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport function ifDef<TValue = any>(\n  target: any,\n  key: string,\n  value: TValue,\n  defaultValue?: TValue,\n) {\n  if (\n    value !== undefined &&\n    value !== null &&\n    value !== defaultValue &&\n    !(Array.isArray(value) && value.length === 0)\n  ) {\n    target[key] = value;\n  }\n}\n","// TODO add tests and rename to toFixed\n// https://github.com/epam/ketcher/issues/2675\nexport function tfx<TValue extends number | string>(value: TValue): string {\n  let parsedValue: number;\n  if (typeof value === 'number') {\n    parsedValue = value;\n  } else {\n    parsedValue = parseFloat(value);\n  }\n  return parsedValue.toFixed(8);\n}\n","export enum LogLevel {\n  ERROR = 0,\n  WARN = 1,\n  INFO = 2,\n  LOG = 3,\n}\n\nexport interface LogSettings {\n  enabled?: boolean;\n  showTrace?: boolean;\n  level?: LogLevel;\n}\n\nexport class KetcherLogger {\n  static get settings(): LogSettings {\n    if (typeof window === 'undefined') {\n      return {};\n    }\n\n    if (!window?.ketcher) {\n      throw new Error(\n        'Ketcher needs to be initialized before KetcherLogger is used',\n      );\n    }\n\n    return window.ketcher?.logging ?? {};\n  }\n\n  static set settings(newSettings: LogSettings) {\n    for (const [settingName, settingValue] of Object.entries(newSettings)) {\n      this.settings[settingName] = settingValue;\n    }\n  }\n\n  static log(...messages: unknown[]): void {\n    if (!this.isMinimumLogLevel(LogLevel.LOG)) {\n      return;\n    }\n\n    const { showTrace } = this.settings;\n\n    if (showTrace) {\n      window.console.trace(messages);\n    } else {\n      window.console.log(messages);\n    }\n  }\n\n  static info(...messages: unknown[]): void {\n    if (!this.isMinimumLogLevel(LogLevel.INFO)) {\n      return;\n    }\n\n    const { showTrace } = this.settings;\n\n    if (showTrace) {\n      window.console.trace(messages);\n    } else {\n      window.console.info(messages);\n    }\n  }\n\n  static warn(...warnings: unknown[]): void {\n    if (!this.isMinimumLogLevel(LogLevel.WARN)) {\n      return;\n    }\n\n    window.console.warn(warnings);\n  }\n\n  static error(...errors: unknown[]): void {\n    if (!this.isMinimumLogLevel(LogLevel.ERROR)) {\n      return;\n    }\n\n    window.console.error(errors);\n  }\n\n  private static isMinimumLogLevel(minimumLevel: LogLevel): boolean {\n    const { enabled, level } = this.settings;\n\n    if (!enabled || level == null) {\n      return false;\n    }\n\n    return level >= minimumLevel;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport EventEmitter from 'events';\nimport { KetcherLogger } from './KetcherLogger';\n\nexport enum KetcherAsyncEvents {\n  LOADING = 'LOADING',\n  SUCCESS = 'SUCCESS',\n  FAILURE = 'FAILURE',\n}\n\nexport const runAsyncAction = async <T = any>(\n  action: () => Promise<T>,\n  eventEmitter: EventEmitter,\n): Promise<T | undefined> => {\n  eventEmitter.emit(KetcherAsyncEvents.LOADING);\n  try {\n    const res = await action();\n    eventEmitter.emit(KetcherAsyncEvents.SUCCESS);\n    return res;\n  } catch (e) {\n    KetcherLogger.error('runAsyncAction.ts::runAsyncAction', e);\n    eventEmitter.emit(KetcherAsyncEvents.FAILURE);\n    return undefined;\n  }\n};\n","export function b64toBlob(\n  b64Data: string,\n  contentType = '',\n  sliceSize = 512,\n): Blob {\n  const byteCharacters: string = window.atob(b64Data);\n  const byteArrays: Array<Uint8Array> = [];\n\n  for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    const slice: string = byteCharacters.slice(offset, offset + sliceSize);\n    const byteNumbers: Array<number> = new Array(slice.length);\n\n    for (let i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    const byteArray: Uint8Array = new Uint8Array(byteNumbers);\n    byteArrays.push(byteArray);\n  }\n\n  const blob: Blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n}\n","/**\n * Dispatch event when request is completed\n * Used only for QAs to prevent long delays in test cases\n * Triggers on Add to canvas / Aromatize / Dearomatize\n * Clean Up / Calculate CIP / Paste from clipboard\n * maybe somewhere else\n */\nexport function notifyRequestCompleted(): void {\n  const event = new Event('requestCompleted');\n  window.dispatchEvent(event);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetcherLogger } from './KetcherLogger';\n\nexport const KETCHER_SAVED_SETTINGS_KEY = 'ketcher_editor_saved_settings';\nexport const KETCHER_SAVED_OPTIONS_KEY = 'ketcher-opts';\n\ninterface SavedSettings {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  selectionTool?: any;\n  disableCustomQuery?: boolean;\n}\n\ninterface SavedOptions {\n  ignoreChiralFlag?: boolean;\n  disableQueryElements?: string[] | null;\n}\n\nexport class SettingsManager {\n  static _disableCustomQuery?: boolean;\n\n  static getSettings(): SavedSettings {\n    try {\n      return JSON.parse(\n        localStorage.getItem(KETCHER_SAVED_SETTINGS_KEY) || '{}',\n      );\n    } catch (e) {\n      KetcherLogger.error(\n        'settingsManager.ts::SettingsManager::getSettings',\n        e,\n      );\n      return {} as SavedSettings;\n    }\n  }\n\n  static saveSettings(settings: SavedSettings) {\n    if (!settings) {\n      return;\n    }\n    localStorage.setItem(KETCHER_SAVED_SETTINGS_KEY, JSON.stringify(settings));\n  }\n\n  static getOptions(): SavedOptions {\n    try {\n      const optionsFromLocalStorage = JSON.parse(\n        localStorage.getItem(KETCHER_SAVED_OPTIONS_KEY) || '{}',\n      );\n\n      // In 2.25 default bondLength was set to 2.1 by mistake.\n      // Current code reset it to 40px\n      // Can be removed in future versions\n      if (\n        optionsFromLocalStorage.bondLength === 2.1 &&\n        optionsFromLocalStorage.bondLengthUnit === 'px'\n      ) {\n        optionsFromLocalStorage.bondLength = 40;\n      }\n\n      return optionsFromLocalStorage;\n    } catch (e) {\n      KetcherLogger.error('SettingsManager.ts::SettingsManager::getOptions', e);\n      return {} as SavedOptions;\n    }\n  }\n\n  static saveOptions(options: SavedOptions) {\n    if (!options) {\n      return;\n    }\n    localStorage.setItem(KETCHER_SAVED_OPTIONS_KEY, JSON.stringify(options));\n  }\n\n  static get selectionTool() {\n    const { selectionTool } = this.getSettings();\n    return selectionTool;\n  }\n\n  static set selectionTool(selectionTool) {\n    const settings = this.getSettings();\n\n    this.saveSettings({\n      ...settings,\n      selectionTool,\n    });\n  }\n\n  static get disableCustomQuery() {\n    return this._disableCustomQuery;\n  }\n\n  static set disableCustomQuery(disableCustomQuery: boolean | undefined) {\n    this._disableCustomQuery = disableCustomQuery;\n  }\n\n  static get ignoreChiralFlag() {\n    const { ignoreChiralFlag } = this.getOptions();\n    return ignoreChiralFlag;\n  }\n\n  static set ignoreChiralFlag(ignoreChiralFlag: boolean | undefined) {\n    const options = this.getOptions();\n\n    this.saveOptions({\n      ...options,\n      ignoreChiralFlag,\n    });\n  }\n}\n","export var base = {\n  8: \"Backspace\",\n  9: \"Tab\",\n  10: \"Enter\",\n  12: \"NumLock\",\n  13: \"Enter\",\n  16: \"Shift\",\n  17: \"Control\",\n  18: \"Alt\",\n  20: \"CapsLock\",\n  27: \"Escape\",\n  32: \" \",\n  33: \"PageUp\",\n  34: \"PageDown\",\n  35: \"End\",\n  36: \"Home\",\n  37: \"ArrowLeft\",\n  38: \"ArrowUp\",\n  39: \"ArrowRight\",\n  40: \"ArrowDown\",\n  44: \"PrintScreen\",\n  45: \"Insert\",\n  46: \"Delete\",\n  59: \";\",\n  61: \"=\",\n  91: \"Meta\",\n  92: \"Meta\",\n  106: \"*\",\n  107: \"+\",\n  108: \",\",\n  109: \"-\",\n  110: \".\",\n  111: \"/\",\n  144: \"NumLock\",\n  145: \"ScrollLock\",\n  160: \"Shift\",\n  161: \"Shift\",\n  162: \"Control\",\n  163: \"Control\",\n  164: \"Alt\",\n  165: \"Alt\",\n  173: \"-\",\n  186: \";\",\n  187: \"=\",\n  188: \",\",\n  189: \"-\",\n  190: \".\",\n  191: \"/\",\n  192: \"`\",\n  219: \"[\",\n  220: \"\\\\\",\n  221: \"]\",\n  222: \"'\"\n}\n\nexport var shift = {\n  48: \")\",\n  49: \"!\",\n  50: \"@\",\n  51: \"#\",\n  52: \"$\",\n  53: \"%\",\n  54: \"^\",\n  55: \"&\",\n  56: \"*\",\n  57: \"(\",\n  59: \":\",\n  61: \"+\",\n  173: \"_\",\n  186: \":\",\n  187: \"+\",\n  188: \"<\",\n  189: \"_\",\n  190: \">\",\n  191: \"?\",\n  192: \"~\",\n  219: \"{\",\n  220: \"|\",\n  221: \"}\",\n  222: \"\\\"\"\n}\n\nvar mac = typeof navigator != \"undefined\" && /Mac/.test(navigator.platform)\nvar ie = typeof navigator != \"undefined\" && /MSIE \\d|Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent)\n\n// Fill in the digit keys\nfor (var i = 0; i < 10; i++) base[48 + i] = base[96 + i] = String(i)\n\n// The function keys\nfor (var i = 1; i <= 24; i++) base[i + 111] = \"F\" + i\n\n// And the alphabetic keys\nfor (var i = 65; i <= 90; i++) {\n  base[i] = String.fromCharCode(i + 32)\n  shift[i] = String.fromCharCode(i)\n}\n\n// For each code that doesn't have a shift-equivalent, copy the base name\nfor (var code in base) if (!shift.hasOwnProperty(code)) shift[code] = base[code]\n\nexport function keyName(event) {\n  // On macOS, keys held with Shift and Cmd don't reflect the effect of Shift in `.key`.\n  // On IE, shift effect is never included in `.key`.\n  var ignoreKey = mac && event.metaKey && event.shiftKey && !event.ctrlKey && !event.altKey ||\n      ie && event.shiftKey && event.key && event.key.length == 1 ||\n      event.key == \"Unidentified\"\n  var name = (!ignoreKey && event.key) ||\n    (event.shiftKey ? shift : base)[event.keyCode] ||\n    event.key || \"Unidentified\"\n  // Edge sometimes produces wrong names (Issue #3)\n  if (name == \"Esc\") name = \"Escape\"\n  if (name == \"Del\") name = \"Delete\"\n  // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/\n  if (name == \"Left\") name = \"ArrowLeft\"\n  if (name == \"Up\") name = \"ArrowUp\"\n  if (name == \"Right\") name = \"ArrowRight\"\n  if (name == \"Down\") name = \"ArrowDown\"\n  return name\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport * as KN from 'w3c-keyname';\n\nconst mac =\n  typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false; // eslint-disable-line no-undef\n\nfunction normalizeKeyName(name) {\n  const parts = name.split(/\\+(?!$)/);\n  let result = parts[parts.length - 1];\n  if (result === 'Space') result = ' ';\n  let alt;\n  let ctrl;\n  let shift;\n  let meta;\n\n  for (let i = 0; i < parts.length - 1; i++) {\n    const mod = parts[i];\n    if (/^(cmd|meta|m)$/i.test(mod)) meta = true;\n    else if (/^a(lt)?$/i.test(mod)) alt = true;\n    else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true;\n    else if (/^s(hift)?$/i.test(mod)) shift = true;\n    else if (/^mod$/i.test(mod))\n      if (mac) meta = true;\n      else ctrl = true;\n    else throw new Error('Unrecognized modifier name: ' + mod);\n  }\n\n  if (alt) result = 'Alt+' + result;\n  if (ctrl) result = 'Ctrl+' + result;\n  if (meta) result = 'Meta+' + result;\n  if (shift) result = 'Shift+' + result;\n\n  return result;\n}\n\nfunction normalizeKeyMap(map) {\n  const copy = Object.create(null);\n\n  Object.keys(map).forEach((prop) => {\n    copy[normalizeKeyName(prop)] = map[prop];\n  });\n\n  return copy;\n}\n\nfunction modifiers(name, event, shift) {\n  if (event.altKey) name = 'Alt+' + name;\n  if (event.ctrlKey) name = 'Ctrl+' + name;\n  if (event.metaKey) name = 'Meta+' + name;\n  if (shift !== false && event.shiftKey) name = 'Shift+' + name;\n\n  return name;\n}\n\nfunction symbolByEvent(event) {\n  return event.shiftKey ? KN.shift[event.keyCode] : KN.base[event.keyCode];\n}\n\nfunction normalizeKeyEvent(event, base = false) {\n  const name = symbolByEvent(event);\n  const isChar = name.length === 1 && name !== ' ';\n\n  return isChar && !base\n    ? modifiers(name, event, !isChar)\n    : modifiers(KN.base[event.keyCode], event, true);\n}\n\nexport function isControlKey(event) {\n  return mac ? event.metaKey : event.ctrlKey;\n}\n\n// TODO rename and unify after moving all hotkeys to core editor\n//  to handle all events in same way and to have same structure for all hotkey configs\nfunction keyNorm(obj) {\n  if (obj instanceof KeyboardEvent) {\n    return normalizeKeyEvent(obj);\n  }\n\n  return typeof obj === 'object' ? normalizeKeyMap(obj) : normalizeKeyName(obj);\n}\n\nfunction setHotKey(key, actName, hotKeys) {\n  if (Array.isArray(hotKeys[key])) hotKeys[key].push(actName);\n  else hotKeys[key] = [actName];\n}\n\nexport function initHotKeys(actions) {\n  const hotKeys = {};\n  let act;\n\n  Object.keys(actions).forEach((actName) => {\n    act = actions[actName];\n    if (!act.shortcut) return;\n\n    if (Array.isArray(act.shortcut)) {\n      act.shortcut.forEach((key) => {\n        setHotKey(key, actName, hotKeys);\n      });\n    } else {\n      setHotKey(act.shortcut, actName, hotKeys);\n    }\n  });\n\n  return keyNorm(hotKeys);\n}\n\nfunction lookup(map, event) {\n  let name = symbolByEvent(event);\n  if (name === 'Add') name = '+'; // numpad '+' and '-'\n  if (name === 'Subtract') name = '-';\n  const isChar = name.length === 1 && name !== ' ';\n\n  let res = map[modifiers(name, event, !isChar)];\n  let baseName;\n\n  if (event.shiftKey && isChar && (baseName = KN.base[event.keyCode])) {\n    res = map[modifiers(baseName, event, true)] || res;\n  }\n\n  return res;\n}\n\nkeyNorm.lookup = lookup;\n\nexport { keyNorm };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { isMacOs } from 'react-device-detect';\n\nconst shortcutAliasMap = {\n  Escape: 'Esc',\n  Delete: 'Del',\n  Mod: isMacOs ? '' : 'Ctrl',\n};\n\nexport function shortcutStr(shortcut?: string | string[]) {\n  if (!shortcut) {\n    return '';\n  }\n\n  const shortcutKey = Array.isArray(shortcut) ? shortcut[0] : shortcut;\n  return shortcutKey.replace(\n    /(\\b[a-z]\\b$|Mod|Escape|Delete)/g,\n    (key) => shortcutAliasMap[key] || key.toUpperCase(),\n  );\n}\n\nexport const generateMenuShortcuts = <T>(obj) =>\n  Object.keys(obj).reduce((acc, key) => {\n    if (obj[key]?.shortcut) {\n      const shortcut = obj[key].shortcut;\n      const processedShortcut = shortcutStr(shortcut);\n      acc[key] = processedShortcut;\n    }\n    return acc;\n  }, {}) as { [key in keyof T]: string };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport enum ChemicalMimeType {\n  Mol = 'chemical/x-mdl-molfile',\n  Rxn = 'chemical/x-mdl-rxnfile',\n  DaylightSmiles = 'chemical/x-daylight-smiles',\n  ExtendedSmiles = 'chemical/x-chemaxon-cxsmiles',\n  DaylightSmarts = 'chemical/x-daylight-smarts',\n  InChI = 'chemical/x-inchi',\n  InChIAuxInfo = 'chemical/x-inchi-aux',\n  InChIKey = 'chemical/x-inchi-key',\n  CDX = 'chemical/x-cdx',\n  CDXML = 'chemical/x-cdxml',\n  CML = 'chemical/x-cml',\n  KET = 'chemical/x-indigo-ket',\n  UNKNOWN = 'chemical/x-unknown',\n  SDF = 'chemical/x-sdf',\n  FASTA = 'chemical/x-fasta',\n  SEQUENCE = 'chemical/x-sequence',\n  PeptideSequenceThreeLetter = 'chemical/x-peptide-sequence-3-letter',\n  RNA = 'chemical/x-rna-sequence',\n  DNA = 'chemical/x-dna-sequence',\n  PEPTIDE = 'chemical/x-peptide-sequence',\n  IDT = 'chemical/x-idt',\n  HELM = 'chemical/x-helm',\n  RDF = 'chemical/x-rdf',\n}\n\nexport interface WithStruct {\n  struct: string;\n}\n\nexport interface WithFormat {\n  format: ChemicalMimeType;\n}\n\nexport interface WithOutputFormat {\n  output_format: ChemicalMimeType;\n}\nexport interface WithInputFormat {\n  input_format?: ChemicalMimeType;\n}\n\nexport interface WithSelection {\n  selected?: Array<number>;\n}\n\nexport type CheckTypes =\n  | 'radicals'\n  | 'pseudoatoms'\n  | 'stereo'\n  | 'query'\n  | 'overlapping_atoms'\n  | 'overlapping_bonds'\n  | 'rgroups'\n  | 'chiral'\n  | '3d'\n  | 'chiral_flag'\n  | 'valence';\n\nexport interface CheckData extends WithStruct {\n  types: Array<CheckTypes>;\n}\n\nexport interface CheckResult {\n  [key: string]: string;\n}\n\nexport interface ConvertData\n  extends WithStruct,\n    WithOutputFormat,\n    WithInputFormat {}\n\nexport interface ConvertResult extends WithStruct, WithFormat {}\n\nexport interface LayoutData extends WithStruct, WithOutputFormat {}\n\nexport interface LayoutResult extends WithStruct, WithFormat {}\n\nexport interface CleanData\n  extends WithStruct,\n    WithSelection,\n    WithOutputFormat {}\n\nexport interface CleanResult extends WithStruct, WithFormat {}\n\nexport interface AromatizeData extends WithStruct, WithOutputFormat {}\n\nexport interface AromatizeResult extends WithStruct, WithFormat {}\n\nexport interface DearomatizeData extends WithStruct, WithOutputFormat {}\n\nexport interface DearomatizeResult extends WithStruct, WithFormat {}\n\nexport interface CalculateCipData extends WithStruct, WithOutputFormat {}\n\nexport interface CalculateCipResult extends WithStruct, WithFormat {}\n\nexport interface ExplicitHydrogensData extends WithStruct, WithOutputFormat {\n  mode?: 'auto' | 'fold' | 'unfold';\n}\n\nexport interface ExplicitHydrogensResult extends WithStruct, WithFormat {}\n\nexport type CalculateProps =\n  | 'molecular-weight'\n  | 'most-abundant-mass'\n  | 'monoisotopic-mass'\n  | 'gross'\n  | 'mass-composition';\n\nexport interface CalculateData extends WithStruct, WithSelection {\n  properties: Array<CalculateProps>;\n}\n\nexport type CalculateResult = Record<CalculateProps, string | number | boolean>;\n\nexport type AutomapMode = 'discard' | 'keep' | 'alter' | 'clear';\n\nexport type AutoMapOptions = 'Discard' | 'Keep' | 'Alter' | 'Clear';\n\nexport interface AutomapData extends WithStruct, WithOutputFormat {\n  mode: AutomapMode;\n}\n\nexport interface AutomapResult extends WithStruct, WithFormat {}\n\nexport interface InfoResult {\n  indigoVersion: string;\n  imagoVersions: Array<string>;\n  isAvailable: boolean;\n}\n\nexport interface RecognizeResult extends WithStruct, WithOutputFormat {}\n\nexport interface StructServiceOptions {\n  [key: string]: string | number | boolean | undefined;\n}\n\nexport type OutputFormatType = 'png' | 'svg';\nexport interface GenerateImageOptions extends StructServiceOptions {\n  outputFormat: OutputFormatType;\n  backgroundColor?: string;\n}\n\nexport interface StructService {\n  info: () => Promise<InfoResult>;\n  convert: (\n    data: ConvertData,\n    options?: StructServiceOptions,\n  ) => Promise<ConvertResult>;\n  layout: (\n    data: LayoutData,\n    options?: StructServiceOptions,\n  ) => Promise<LayoutResult>;\n  clean: (\n    data: CleanData,\n    options?: StructServiceOptions,\n  ) => Promise<CleanResult>;\n  aromatize: (\n    data: AromatizeData,\n    options?: StructServiceOptions,\n  ) => Promise<AromatizeResult>;\n  dearomatize: (\n    data: DearomatizeData,\n    options?: StructServiceOptions,\n  ) => Promise<DearomatizeResult>;\n  calculateCip: (\n    data: CalculateCipData,\n    options?: StructServiceOptions,\n  ) => Promise<CalculateCipResult>;\n  automap: (\n    data: AutomapData,\n    options?: StructServiceOptions,\n  ) => Promise<AutomapResult>;\n  check: (\n    data: CheckData,\n    options?: StructServiceOptions,\n  ) => Promise<CheckResult>;\n  calculate: (\n    data: CalculateData,\n    options?: StructServiceOptions,\n  ) => Promise<CalculateResult>;\n  recognize: (blob: Blob, version: string) => Promise<RecognizeResult>;\n  getInChIKey: (struct: string) => Promise<string>;\n  generateImageAsBase64: (\n    data: string,\n    options?: GenerateImageOptions,\n  ) => Promise<string>;\n  toggleExplicitHydrogens: (\n    data: ExplicitHydrogensData,\n    options?: StructServiceOptions,\n  ) => Promise<ExplicitHydrogensResult>;\n  destroy?: () => void;\n}\n","import { ChemicalMimeType } from 'domain/services';\n\n/**\n *\n * Legacy browser API doesn't support async operations, so it is not possible\n * to call indigo, when copy/cut/paste\n */\nexport function isClipboardAPIAvailable() {\n  return (\n    typeof navigator?.clipboard?.writeText === 'function' &&\n    typeof navigator?.clipboard?.read === 'function'\n  );\n}\n\nexport function legacyCopy(clipboardData, data) {\n  let curFmt;\n  clipboardData.setData('text/plain', data['text/plain']);\n  try {\n    Object.keys(data).forEach((fmt) => {\n      curFmt = fmt;\n      clipboardData.setData(fmt, data[fmt]);\n    });\n  } catch (e) {\n    console.error('clipboardUtils.ts::legacyCopy', e);\n    console.info(`Could not write exact type ${curFmt}`);\n  }\n}\n\nexport function legacyPaste(cb, formats) {\n  let data = {};\n  data['text/plain'] = cb.getData('text/plain');\n  data = formats.reduce((res, fmt) => {\n    const d = cb.getData(fmt);\n    if (d) res[fmt] = d;\n    return res;\n  }, data);\n  return data;\n}\n\nexport function notifyCopyCut() {\n  const event = new Event('copyOrCutComplete');\n  window.dispatchEvent(event);\n}\n\nexport async function getStructStringFromClipboardData(\n  data: ClipboardItem[],\n): Promise<string> {\n  const clipboardItem = data[0];\n\n  if (clipboardItem && clipboardItem instanceof ClipboardItem) {\n    const structStr =\n      (await safelyGetMimeType(clipboardItem, `web ${ChemicalMimeType.KET}`)) ||\n      (await safelyGetMimeType(clipboardItem, `web ${ChemicalMimeType.Mol}`)) ||\n      (await safelyGetMimeType(clipboardItem, `web ${ChemicalMimeType.Rxn}`)) ||\n      (await safelyGetMimeType(clipboardItem, 'text/plain'));\n    return structStr === '' ? '' : structStr.text();\n  } else {\n    return (\n      data[ChemicalMimeType.KET] ||\n      data[ChemicalMimeType.Mol] ||\n      data[ChemicalMimeType.Rxn] ||\n      data['text/plain']\n    );\n  }\n}\n\nexport async function safelyGetMimeType(\n  clipboardItem: ClipboardItem,\n  mimeType: string,\n) {\n  try {\n    const result = await clipboardItem.getType(mimeType);\n    return result;\n  } catch {\n    return '';\n  }\n}\n","import { KetcherLogger } from 'utilities';\n\nconst SVG_NAMESPACE_URI = 'http://www.w3.org/2000/svg';\nconst ADDITIONAL_TOP_MARGIN = 54;\nconst ADDITIONAL_LEFT_MARGIN = 50;\nconst DEFAULT_MARGIN = 10;\n\nexport const getSvgFromDrawnStructures = (\n  canvas: SVGSVGElement,\n  type: 'preview' | 'file',\n  margin = DEFAULT_MARGIN,\n) => {\n  // Copy and clean up svg structures before previewing or saving\n  let svgInnerHTML = canvas?.innerHTML || '';\n  const wrapper = document.createElementNS(SVG_NAMESPACE_URI, 'svg');\n  wrapper.innerHTML = svgInnerHTML;\n  // remove #rectangle-selection-area\n  wrapper.querySelector('#rectangle-selection-area')?.remove();\n  // remove dynamic elements (scrolls, highlighters, attachment points...)\n  wrapper.querySelectorAll('.dynamic-element')?.forEach((el) => el.remove());\n  // set default cursor, mostly for sequence mode\n  wrapper\n    .querySelectorAll('text')\n    ?.forEach((el) => el.setAttribute('cursor', 'default'));\n  wrapper.querySelectorAll('rect')?.forEach((el) => {\n    if (el.getAttribute('cursor') === 'text') el.removeAttribute('cursor');\n  });\n  // remove opacity of structures, mostly for sequence \"edit in RNA builder\" mode\n  wrapper.querySelectorAll('g')?.forEach((el) => {\n    if (el.hasAttribute('opacity')) el.removeAttribute('opacity');\n  });\n  svgInnerHTML = wrapper.innerHTML;\n  // remove \"cursor: pointer\" style\n  svgInnerHTML = svgInnerHTML?.replaceAll('cursor: pointer;', '');\n\n  const drawStructureClientRect = canvas\n    ?.getElementsByClassName('drawn-structures')[0]\n    .getBoundingClientRect();\n\n  if (!drawStructureClientRect || !svgInnerHTML) {\n    const errorMessage = 'Cannot get drawn structures!';\n    KetcherLogger.error(errorMessage);\n    return;\n  }\n\n  const viewBoxX = drawStructureClientRect.x - ADDITIONAL_LEFT_MARGIN - margin;\n  const viewBoxY = drawStructureClientRect.y - ADDITIONAL_TOP_MARGIN - margin;\n  const viewBoxWidth = drawStructureClientRect.width + margin * 2;\n  const viewBoxHeight = drawStructureClientRect.height + margin * 2;\n  const viewBox = `${viewBoxX} ${viewBoxY} ${viewBoxWidth} ${viewBoxHeight}`;\n\n  if (type === 'preview')\n    return `<svg width='100%' height='100%' style='position: absolute' viewBox='${viewBox}'>${svgInnerHTML}</svg>`;\n  else if (type === 'file')\n    return `<svg width='${viewBoxWidth}' height='${viewBoxHeight}' viewBox='${viewBox}' xmlns='${SVG_NAMESPACE_URI}'>${svgInnerHTML}</svg>`;\n  else return `<svg xmlns='${SVG_NAMESPACE_URI}' />`;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport assert from 'assert';\nimport { tfx } from 'utilities';\n\nexport interface Point {\n  x?: number;\n  y?: number;\n  z?: number;\n}\nexport class Vec2 {\n  static ZERO = new Vec2(0, 0);\n  static UNIT = new Vec2(1, 1);\n\n  x: number;\n  y: number;\n  z: number;\n\n  constructor(point: Point);\n  constructor(x?: number, y?: number, z?: number);\n  constructor(...args: Array<any>) {\n    if (args.length === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    } else if (arguments.length === 1) {\n      this.x = parseFloat(args[0].x || 0);\n      this.y = parseFloat(args[0].y || 0);\n      this.z = parseFloat(args[0].z || 0);\n    } else if (arguments.length === 2) {\n      this.x = parseFloat(args[0] || 0);\n      this.y = parseFloat(args[1] || 0);\n      this.z = 0;\n    } else if (arguments.length === 3) {\n      this.x = parseFloat(args[0]);\n      this.y = parseFloat(args[1]);\n      this.z = parseFloat(args[2]);\n    } else {\n      throw new Error('Vec2(): invalid arguments');\n    }\n  }\n\n  static dist(a: Vec2, b: Vec2): number {\n    return Vec2.diff(a, b).length();\n  }\n\n  static max(v1: Vec2, v2: Vec2): Vec2 {\n    return new Vec2(\n      Math.max(v1.x, v2.x),\n      Math.max(v1.y, v2.y),\n      Math.max(v1.z, v2.z),\n    );\n  }\n\n  static min(v1: Vec2, v2: Vec2): Vec2 {\n    return new Vec2(\n      Math.min(v1.x, v2.x),\n      Math.min(v1.y, v2.y),\n      Math.min(v1.z, v2.z),\n    );\n  }\n\n  static sum(v1: Vec2, v2: Vec2): Vec2 {\n    return new Vec2(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z);\n  }\n\n  static dot(v1: Vec2, v2: Vec2): number {\n    return v1.x * v2.x + v1.y * v2.y;\n  }\n\n  static cross(v1: Vec2, v2: Vec2): number {\n    return v1.x * v2.y - v1.y * v2.x;\n  }\n\n  static angle(v1: Vec2, v2: Vec2): number {\n    return Math.atan2(Vec2.cross(v1, v2), Vec2.dot(v1, v2));\n  }\n\n  static diff(v1: Vec2, v2: Vec2): Vec2 {\n    return new Vec2(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);\n  }\n\n  // assume arguments v1, f1, v2, f2, v3, f3, etc.\n  // where v[i] are vectors and f[i] are corresponding coefficients\n  static lc(...args: Array<Vec2 | number>): Vec2 {\n    let v = new Vec2();\n    for (let i = 0; i < arguments.length / 2; ++i) {\n      v = v.addScaled(args[2 * i] as Vec2, args[2 * i + 1] as number);\n    }\n    return v;\n  }\n\n  static lc2(v1: Vec2, f1: number, v2: Vec2, f2: number): Vec2 {\n    return new Vec2(\n      v1.x * f1 + v2.x * f2,\n      v1.y * f1 + v2.y * f2,\n      v1.z * f1 + v2.z * f2,\n    );\n  }\n\n  static centre(v1: Vec2, v2: Vec2) {\n    return Vec2.lc2(v1, 0.5, v2, 0.5);\n  }\n\n  static getLinePoint(lineStart: Vec2, lineEnd: Vec2, length) {\n    const difference = lineStart.sub(lineEnd);\n    const distance = difference.length();\n    const ratio = length / distance;\n    return new Vec2(\n      lineStart.x + difference.x * ratio,\n      lineStart.y + difference.y * ratio,\n    );\n  }\n\n  static crossProduct(v1: Vec2, v2: Vec2): number {\n    return v1.x * v2.y - v1.y * v2.x;\n  }\n\n  length(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  equals(v: Vec2): boolean {\n    return this.x === v.x && this.y === v.y && this.z === v.z;\n  }\n\n  add(v: Vec2): Vec2 {\n    return new Vec2(this.x + v.x, this.y + v.y, this.z + v.z);\n  }\n\n  add_(v: Vec2): void {\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n  }\n\n  get_xy0(): Vec2 {\n    return new Vec2(this.x, this.y);\n  }\n\n  sub(v: Vec2): Vec2 {\n    return new Vec2(this.x - v.x, this.y - v.y, this.z - v.z);\n  }\n\n  scaled(sInitial: number): Vec2 {\n    const s = isFinite(sInitial) ? sInitial : 1;\n    return new Vec2(this.x * s, this.y * s, this.z * s);\n  }\n\n  negated(): Vec2 {\n    return new Vec2(-this.x, -this.y, -this.z);\n  }\n\n  yComplement(y1: number): Vec2 {\n    y1 = y1 || 0;\n    return new Vec2(this.x, y1 - this.y, this.z);\n  }\n\n  addScaled(v: Vec2, f: number): Vec2 {\n    return new Vec2(this.x + v.x * f, this.y + v.y * f, this.z + v.z * f);\n  }\n\n  normalized(): Vec2 {\n    return this.scaled(1 / this.length());\n  }\n\n  normalize(): boolean {\n    const l = this.length();\n\n    if (l < 0.000001) return false;\n\n    this.x /= l;\n    this.y /= l;\n\n    return true;\n  }\n\n  turnLeft(): Vec2 {\n    return new Vec2(-this.y, this.x, this.z);\n  }\n\n  coordStr(): string {\n    return this.x.toString() + ' , ' + this.y.toString();\n  }\n\n  toString(): string {\n    return '(' + this.x.toFixed(2) + ',' + this.y.toFixed(2) + ')';\n  }\n\n  max(v: Vec2): Vec2 {\n    assert(v != null);\n\n    return Vec2.max(this, v);\n  }\n\n  min(v: Vec2): Vec2 {\n    return Vec2.min(this, v);\n  }\n\n  ceil(): Vec2 {\n    return new Vec2(Math.ceil(this.x), Math.ceil(this.y), Math.ceil(this.z));\n  }\n\n  floor(): Vec2 {\n    return new Vec2(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\n  }\n\n  rotate(angle: number) {\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    return this.rotateSC(sin, cos);\n  }\n\n  rotateSC(sin: number, cos: number): Vec2 {\n    assert(sin === 0 || !!sin);\n    assert(cos === 0 || !!cos);\n\n    return new Vec2(\n      this.x * cos - this.y * sin,\n      this.x * sin + this.y * cos,\n      this.z,\n    );\n  }\n\n  rotateAroundOrigin(angleInDegrees: number, origin: Vec2) {\n    const angleInRadians = (angleInDegrees * Math.PI) / 180;\n    const offsetX = this.x - origin.x;\n    const offsetY = this.y - origin.y;\n\n    const rotatedX =\n      Math.cos(angleInRadians) * offsetX - Math.sin(angleInRadians) * offsetY;\n    const rotatedY =\n      Math.sin(angleInRadians) * offsetX + Math.cos(angleInRadians) * offsetY;\n\n    const x = rotatedX + origin.x;\n    const y = rotatedY + origin.y;\n\n    return new Vec2(Number(tfx(x)), Number(tfx(y)), this.z || 0);\n  }\n\n  isInsidePolygon(points: Vec2[]) {\n    // ray-casting algorithm based on\n    // https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html\n    const { x, y } = this;\n    let inside = false;\n\n    for (let i = 0, j = points.length - 1; i < points.length; j = i++) {\n      const xi = points[i].x || 0;\n      const yi = points[i].y || 0;\n      const xj = points[j].x || 0;\n      const yj = points[j].y || 0;\n\n      const intersect =\n        yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n      if (intersect) inside = !inside;\n    }\n\n    return inside;\n  }\n\n  calculateDistanceToLine(line: [Vec2, Vec2]): number {\n    if (\n      (this.x <= Math.min(line[0].x, line[1].x) ||\n        this.x >= Math.max(line[0].x, line[1].x)) &&\n      (this.y <= Math.min(line[0].y, line[1].y) ||\n        this.y >= Math.max(line[0].y, line[1].y))\n    ) {\n      return Math.min(Vec2.dist(line[0], this), Vec2.dist(line[1], this));\n    } else {\n      const a = Vec2.dist(line[0], line[1]);\n      const b = Vec2.dist(line[0], this);\n      const c = Vec2.dist(line[1], this);\n      const per = (a + b + c) / 2;\n      return (2 / a) * Math.sqrt(per * (per - a) * (per - b) * (per - c));\n    }\n  }\n\n  oxAngle(): number {\n    return Math.atan2(this.y, this.x);\n  }\n\n  static radiansToDegrees(radians: number) {\n    return radians * (180 / Math.PI);\n  }\n\n  static degrees_to_radians(degrees: number) {\n    return (degrees * Math.PI) / 180;\n  }\n\n  static oxAngleForVector(v1: Vec2, v2: Vec2): number {\n    return Math.atan2(v2.y - v1.y, v2.x - v1.x);\n  }\n\n  static findSecondPoint(\n    startPoint: { x: number; y: number },\n    lineLength: number,\n    lineAngleRadians: number,\n  ) {\n    const cos = Math.cos(lineAngleRadians);\n    const sin = Math.sin(lineAngleRadians);\n\n    const deltaX = lineLength * cos;\n    const deltaY = lineLength * sin;\n\n    const endPoint = {\n      x: startPoint.x + deltaX,\n      y: startPoint.y + deltaY,\n    };\n    return endPoint;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport class Pile<TValue = any> extends Set<TValue> {\n  // TODO: it's used only in dfs.js in one place in some strange way.\n  // Should be removed after dfs.js refactoring\n  find(predicate: (item: TValue) => boolean) {\n    for (const item of this) {\n      if (predicate(item)) return item;\n    }\n\n    return null;\n  }\n\n  equals(setB: Pile): boolean {\n    return this.isSuperset(setB) && setB.isSuperset(this);\n  }\n\n  isSuperset(subset: Pile): boolean {\n    for (const item of subset) {\n      if (!this.has(item)) return false;\n    }\n\n    return true;\n  }\n\n  filter(expression: (arg: TValue) => boolean): Pile<TValue> {\n    return new Pile(Array.from(this).filter(expression));\n  }\n\n  union(setB: Pile): Pile<TValue> {\n    const union = new Pile(this);\n\n    for (const item of setB) union.add(item);\n\n    return union;\n  }\n\n  intersection(setB: Pile): Pile<TValue> {\n    const thisSet = new Pile(this);\n    return new Pile([...thisSet].filter((item) => setB.has(item)));\n  }\n\n  /**\n   * Union multiple sets which have intersections\n   * @example ```\n   * const setA = new Pile([0, 1])\n   * const setB = new Pile([1, 2])\n   * const setC = new Pile([2, 3])\n   * const setD = new Pile([4, 5])\n   * console.log(Pile.unionMultiple([setA, setB, setC, setD]))\n   * // [{0, 1, 2, 3}, {4, 5}]\n   * ```\n   */\n  static unionIntersections<T>(sets: Array<Pile<T>>): Array<Pile<T>> {\n    let unionized = false;\n\n    // Union two of sets\n    const setsToReturn = sets.reduce((prevSets, curSet) => {\n      let isCurSetMerged = false;\n\n      const newSets = prevSets.map((set) => {\n        const intersec = set.intersection(curSet);\n        if (intersec.size > 0) {\n          unionized = true;\n          isCurSetMerged = true;\n          return set.union(curSet);\n        }\n        return set;\n      });\n\n      if (!isCurSetMerged) newSets.push(curSet);\n      return newSets;\n    }, new Array<Pile<T>>());\n\n    // Recursively union two of sets === union all sets\n    return unionized ? Pile.unionIntersections(setsToReturn) : setsToReturn;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const INVALID = 'invalid';\nexport type initiallySelectedType = boolean | 'invalid';\nexport abstract class BaseMicromoleculeEntity {\n  initiallySelected?: initiallySelectedType;\n\n  protected constructor(initiallySelected?: initiallySelectedType) {\n    this.initiallySelected = initiallySelected;\n  }\n\n  getInitiallySelected(): boolean | undefined {\n    if (this.initiallySelected === INVALID) {\n      throw new Error(\n        'this field is used only for serialization/deserialization',\n      );\n    }\n    return this.initiallySelected;\n  }\n\n  setInitiallySelected(value?: boolean): void {\n    if (this.initiallySelected === INVALID) {\n      throw new Error(\n        'this field is used only for serialization/deserialization',\n      );\n    }\n    this.initiallySelected = value;\n  }\n\n  resetInitiallySelected(invalidate?: boolean): void {\n    this.initiallySelected = invalidate ? INVALID : undefined;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Atom } from './atom';\nimport { Pile } from './pile';\nimport { Struct } from './struct';\nimport { Vec2 } from './vec2';\nimport {\n  BaseMicromoleculeEntity,\n  initiallySelectedType,\n} from 'domain/entities/BaseMicromoleculeEntity';\nimport { SGroup } from 'domain/entities/sgroup';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\n\nenum CIP {\n  E = 'E',\n  Z = 'Z',\n  M = 'M',\n  P = 'P',\n}\n\nexport interface BondAttributes {\n  reactingCenterStatus?: number | null;\n  topology?: number | null;\n  customQuery?: string | null;\n  stereo?: number;\n  xxx?: string;\n  type: number;\n  end: number;\n  begin: number;\n  cip?: CIP | null;\n  isPreview?: boolean;\n  initiallySelected?: initiallySelectedType;\n  beginSuperatomAttachmentPointNumber?: number;\n  endSuperatomAttachmentPointNumber?: number;\n  beginSgroup?: SGroup;\n  endSgroup?: SGroup;\n}\n\nexport class Bond extends BaseMicromoleculeEntity {\n  static PATTERN = {\n    TYPE: {\n      SINGLE: 1,\n      DOUBLE: 2,\n      TRIPLE: 3,\n      AROMATIC: 4,\n      SINGLE_OR_DOUBLE: 5,\n      SINGLE_OR_AROMATIC: 6,\n      DOUBLE_OR_AROMATIC: 7,\n      ANY: 8,\n      DATIVE: 9,\n      HYDROGEN: 10,\n    },\n\n    STEREO: {\n      NONE: 0,\n      UP: 1,\n      EITHER: 4,\n      DOWN: 6,\n      CIS_TRANS: 3,\n    },\n\n    TOPOLOGY: {\n      EITHER: 0,\n      RING: 1,\n      CHAIN: 2,\n    },\n\n    REACTING_CENTER: {\n      NOT_CENTER: -1,\n      UNMARKED: 0,\n      CENTER: 1,\n      UNCHANGED: 2,\n      MADE_OR_BROKEN: 4,\n      ORDER_CHANGED: 8,\n      MADE_OR_BROKEN_AND_CHANGED: 12,\n    },\n  };\n\n  static attrlist = {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n    topology: Bond.PATTERN.TOPOLOGY.EITHER,\n    reactingCenterStatus: Bond.PATTERN.REACTING_CENTER.UNMARKED,\n    cip: null,\n    customQuery: null,\n  };\n\n  begin: number;\n  end: number;\n  readonly type: number;\n  readonly xxx: string;\n  stereo: number;\n  readonly topology: number | null;\n  readonly reactingCenterStatus: number | null;\n  customQuery: string | null;\n  len: number;\n  sb: number;\n  sa: number;\n  cip?: CIP | null;\n  hb1?: number;\n  hb2?: number;\n  angle: number;\n  center: Vec2;\n  isPreview: boolean;\n  beginSuperatomAttachmentPointNumber?: number;\n  endSuperatomAttachmentPointNumber?: number;\n  beginSgroup?: SGroup;\n  endSgroup?: SGroup;\n\n  constructor(attributes: BondAttributes) {\n    super(attributes.initiallySelected);\n    this.begin = attributes.begin;\n    this.end = attributes.end;\n    this.type = attributes.type;\n    this.xxx = attributes.xxx || '';\n    this.stereo = Bond.PATTERN.STEREO.NONE;\n    this.topology = Bond.PATTERN.TOPOLOGY.EITHER;\n    this.customQuery = null;\n    this.reactingCenterStatus = 0;\n    this.cip = attributes.cip ?? null;\n    this.len = 0;\n    this.sb = 0;\n    this.sa = 0;\n    this.angle = 0;\n    this.isPreview = false;\n    this.beginSuperatomAttachmentPointNumber =\n      attributes.beginSuperatomAttachmentPointNumber;\n    this.endSuperatomAttachmentPointNumber =\n      attributes.endSuperatomAttachmentPointNumber;\n\n    if (attributes.stereo) this.stereo = attributes.stereo;\n    if (attributes.topology) this.topology = attributes.topology;\n    if (attributes.customQuery) {\n      this.customQuery = attributes.customQuery;\n      this.type = Bond.PATTERN.TYPE.ANY;\n      this.reactingCenterStatus = null;\n      this.topology = null;\n    }\n\n    if (attributes.reactingCenterStatus) {\n      this.reactingCenterStatus = attributes.reactingCenterStatus;\n    }\n\n    this.center = new Vec2();\n  }\n\n  static getAttrHash(bond: Bond) {\n    const attrs = {};\n    for (const attr in Bond.attrlist) {\n      if (bond[attr] || attr === 'stereo') {\n        attrs[attr] = bond[attr];\n      }\n    }\n    return attrs;\n  }\n\n  static getBondNeighbourIds(struct: Struct, bondId: number) {\n    const bond = struct.bonds.get(bondId)!;\n    const { begin, end } = bond;\n    const beginBondIds = Atom.getConnectedBondIds(struct, begin).filter(\n      (id) => id !== bondId,\n    );\n    const endBondIds = Atom.getConnectedBondIds(struct, end).filter(\n      (id) => id !== bondId,\n    );\n    return { beginBondIds, endBondIds };\n  }\n\n  static getFusingConditions(bond: Bond, bondBegin: Bond, bondEnd: Bond) {\n    const { DOUBLE, SINGLE } = this.PATTERN.TYPE;\n    const isFusingToDoubleBond =\n      bondBegin.type === SINGLE &&\n      bond.type === DOUBLE &&\n      bondEnd.type === SINGLE;\n    const isFusingToSingleBond =\n      bondBegin.type === DOUBLE &&\n      bond.type === SINGLE &&\n      bondEnd.type === DOUBLE;\n    const isFusingDoubleSingleSingle =\n      bondBegin.type === DOUBLE &&\n      bond.type === SINGLE &&\n      bondEnd.type === SINGLE;\n    const isFusingSingleSingleDouble =\n      bondBegin.type === SINGLE &&\n      bond.type === SINGLE &&\n      bondEnd.type === DOUBLE;\n    const isAllSingle =\n      bondBegin.type === SINGLE &&\n      bond.type === SINGLE &&\n      bondEnd.type === SINGLE;\n    return {\n      isFusingToSingleBond,\n      isFusingToDoubleBond,\n      isFusingDoubleSingleSingle,\n      isFusingSingleSingleDouble,\n      isAllSingle,\n    };\n  }\n\n  static getBenzeneConnectingBondType(\n    bond: Bond,\n    bondBegin: Bond,\n    bondEnd: Bond,\n  ): number | null {\n    const { DOUBLE, SINGLE } = this.PATTERN.TYPE;\n    const { isFusingToSingleBond, isFusingToDoubleBond } =\n      Bond.getFusingConditions(bond, bondBegin, bondEnd);\n\n    if (isFusingToDoubleBond) {\n      return DOUBLE;\n    } else if (isFusingToSingleBond) {\n      return SINGLE;\n    }\n    return null;\n  }\n\n  static getCyclopentadieneFusingBondType(\n    bond: Bond,\n    bondBegin: Bond,\n    bondEnd: Bond,\n  ): number | null {\n    const { DOUBLE, SINGLE } = this.PATTERN.TYPE;\n    const {\n      isFusingToSingleBond,\n      isFusingToDoubleBond,\n      isFusingDoubleSingleSingle,\n      isAllSingle,\n    } = Bond.getFusingConditions(bond, bondBegin, bondEnd);\n\n    if (isFusingToDoubleBond) {\n      return DOUBLE;\n    } else if (\n      isFusingToSingleBond ||\n      isAllSingle ||\n      isFusingDoubleSingleSingle\n    ) {\n      return SINGLE;\n    }\n    return null;\n  }\n\n  static getCyclopentadieneDoubleBondIndexes(\n    bond: Bond,\n    bondBegin: Bond,\n    bondEnd: Bond,\n  ) {\n    const {\n      isFusingToSingleBond,\n      isFusingToDoubleBond,\n      isFusingDoubleSingleSingle,\n    } = Bond.getFusingConditions(bond, bondBegin, bondEnd);\n\n    if (isFusingToSingleBond || isFusingToDoubleBond) {\n      return [3];\n    }\n\n    if (isFusingDoubleSingleSingle) {\n      return [2, 4];\n    }\n\n    return [1, 3];\n  }\n\n  static attrGetDefault(attr: string) {\n    if (attr in Bond.attrlist) {\n      return Bond.attrlist[attr];\n    }\n  }\n\n  isQuery(): boolean {\n    const TYPES = Bond.PATTERN.TYPE;\n    const QUERY_BOND_TYPES = [\n      TYPES.ANY,\n      TYPES.SINGLE_OR_DOUBLE,\n      TYPES.SINGLE_OR_AROMATIC,\n      TYPES.DOUBLE_OR_AROMATIC,\n      TYPES.AROMATIC,\n    ];\n    return (\n      this.customQuery !== null ||\n      QUERY_BOND_TYPES.includes(this.type) ||\n      (TYPES.SINGLE === this.type && this.stereo === Bond.PATTERN.STEREO.EITHER)\n    );\n  }\n\n  hasRxnProps(): boolean {\n    return !!this.reactingCenterStatus;\n  }\n\n  getCenter(struct: any): Vec2 {\n    const p1 = struct.atoms.get(this.begin).pp;\n    const p2 = struct.atoms.get(this.end).pp;\n    return Vec2.lc2(p1, 0.5, p2, 0.5);\n  }\n\n  getDir(struct: any): Vec2 {\n    const p1 = struct.atoms.get(this.begin)!.pp;\n    const p2 = struct.atoms.get(this.end)!.pp;\n    return p2.sub(p1).normalized();\n  }\n\n  clone(aidMap?: Map<number, number> | null): Bond {\n    const cp = new Bond(this);\n    if (aidMap) {\n      cp.begin = aidMap.get(cp.begin)!;\n      cp.end = aidMap.get(cp.end)!;\n    }\n    return cp;\n  }\n\n  getAttachedSGroups(struct: Struct) {\n    const sGroupsWithBeginAtom =\n      struct.atoms.get(this.begin)?.sgs || new Pile();\n    const sGroupsWithEndAtom = struct.atoms.get(this.end)?.sgs || new Pile();\n    return sGroupsWithBeginAtom?.intersection(sGroupsWithEndAtom);\n  }\n\n  isExternalBondBetweenMonomers(struct: Struct) {\n    if (!struct.isBondFromMacromolecule(this)) {\n      return false;\n    }\n\n    const sGroup1 = struct.getGroupFromAtomId(this.begin);\n    const sGroup2 = struct.getGroupFromAtomId(this.end);\n\n    if (!sGroup1 || !sGroup2) {\n      return false;\n    }\n\n    return sGroup1 !== sGroup2;\n  }\n\n  public static isBondToHiddenLeavingGroup(struct: Struct, bond: Bond) {\n    const beginSuperatomAttachmentPoint =\n      Atom.getSuperAtomAttachmentPointByLeavingGroup(struct, bond.begin);\n    const endSuperatomAttachmentPoint =\n      Atom.getSuperAtomAttachmentPointByLeavingGroup(struct, bond.end);\n\n    return (\n      (beginSuperatomAttachmentPoint &&\n        Atom.isHiddenLeavingGroupAtom(struct, bond.begin) &&\n        bond.end === beginSuperatomAttachmentPoint.atomId) ||\n      (endSuperatomAttachmentPoint &&\n        Atom.isHiddenLeavingGroupAtom(struct, bond.end) &&\n        bond.begin === endSuperatomAttachmentPoint.atomId)\n    );\n  }\n\n  public static isBondToExpandedMonomer(struct: Struct, bond: Bond) {\n    return [...struct.sgroups.values()].some((sgroup) => {\n      return (\n        ((sgroup.atoms.includes(bond.begin) &&\n          !sgroup.atoms.includes(bond.end)) ||\n          (sgroup.atoms.includes(bond.end) &&\n            !sgroup.atoms.includes(bond.begin))) &&\n        sgroup.isExpanded() &&\n        sgroup instanceof MonomerMicromolecule\n      );\n    });\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Vec2 } from './vec2';\nimport assert from 'assert';\n\nexport class Box2Abs {\n  readonly p0: Vec2;\n  readonly p1: Vec2;\n\n  constructor();\n  constructor(p: Vec2);\n  constructor(p0: Vec2, p1: Vec2);\n  constructor(x0: number, y0: number, x1: number, y1: number);\n  constructor(...args: Array<any>) {\n    if (args.length === 1 && 'min' in args[0] && 'max' in args[0]) {\n      this.p0 = args[0].min;\n      this.p1 = args[0].max;\n    }\n\n    if (args.length === 2) {\n      this.p0 = args[0];\n      this.p1 = args[1];\n    } else if (args.length === 4) {\n      this.p0 = new Vec2(args[0], args[1]);\n      this.p1 = new Vec2(args[2], args[3]);\n    } else if (args.length === 0) {\n      this.p0 = new Vec2();\n      this.p1 = new Vec2();\n    } else {\n      throw new Error(\n        'Box2Abs constructor only accepts 4 numbers or 2 vectors or no args!',\n      );\n    }\n  }\n\n  toString(): string {\n    return this.p0.toString() + ' ' + this.p1.toString();\n  }\n\n  clone(): Box2Abs {\n    return new Box2Abs(this.p0, this.p1);\n  }\n\n  extend(lp: Vec2, rb: Vec2): Box2Abs {\n    rb = rb || lp;\n    return new Box2Abs(this.p0.sub(lp), this.p1.add(rb));\n  }\n\n  include(p: Vec2): Box2Abs {\n    assert(p != null);\n\n    return new Box2Abs(this.p0.min(p), this.p1.max(p));\n  }\n\n  contains(p: Vec2, ext = 0.0): boolean {\n    assert(p != null);\n\n    return (\n      p.x >= this.p0.x - ext &&\n      p.x <= this.p1.x + ext &&\n      p.y >= this.p0.y - ext &&\n      p.y <= this.p1.y + ext\n    );\n  }\n\n  translate(d: Vec2): Box2Abs {\n    return new Box2Abs(this.p0.add(d), this.p1.add(d));\n  }\n\n  transform(f: (p: Vec2, options: any) => Vec2, options: any): Box2Abs {\n    assert(typeof f === 'function');\n\n    return new Box2Abs(f(this.p0, options), f(this.p1, options));\n  }\n\n  sz(): Vec2 {\n    return this.p1.sub(this.p0);\n  }\n\n  centre(): Vec2 {\n    return Vec2.centre(this.p0, this.p1);\n  }\n\n  pos() {\n    return this.p0;\n  }\n\n  hasZeroArea() {\n    const size = this.sz();\n    return size.x === 0 && size.y === 0;\n  }\n\n  static fromRelBox(relBox: any): Box2Abs {\n    return new Box2Abs(\n      relBox.x,\n      relBox.y,\n      relBox.x + relBox.width,\n      relBox.y + relBox.height,\n    );\n  }\n\n  static union(b1: Box2Abs, b2: Box2Abs): Box2Abs {\n    return new Box2Abs(Vec2.min(b1.p0, b2.p0), Vec2.max(b1.p1, b2.p1));\n  }\n\n  static segmentIntersection(a: Vec2, b: Vec2, c: Vec2, d: Vec2): boolean {\n    const dc = (a.x - c.x) * (b.y - c.y) - (a.y - c.y) * (b.x - c.x);\n    const dd = (a.x - d.x) * (b.y - d.y) - (a.y - d.y) * (b.x - d.x);\n    const da = (c.x - a.x) * (d.y - a.y) - (c.y - a.y) * (d.x - a.x);\n    const db = (c.x - b.x) * (d.y - b.y) - (c.y - b.y) * (d.x - b.x);\n\n    if (dc === 0 && dd === 0 && da === 0 && db === 0) {\n      // Check for collinearity and overlapping cases\n      return (\n        Box2Abs.#isPointOnSegment(a, b, c) ||\n        Box2Abs.#isPointOnSegment(a, b, d) ||\n        Box2Abs.#isPointOnSegment(c, d, a) ||\n        Box2Abs.#isPointOnSegment(c, d, b)\n      );\n    } else return dc * dd < 0 && da * db < 0;\n  }\n\n  // Helper function to check if a point is on a line segment\n  static #isPointOnSegment(\n    segPointA: Vec2,\n    segPointB: Vec2,\n    point: Vec2,\n  ): boolean {\n    const minX = Math.min(segPointA.x, segPointB.x);\n    const maxX = Math.max(segPointA.x, segPointB.x);\n    const minY = Math.min(segPointA.y, segPointB.y);\n    const maxY = Math.max(segPointA.y, segPointB.y);\n\n    return (\n      point.x >= minX && point.x <= maxX && point.y >= minY && point.y <= maxY\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Vec2 } from 'domain/entities';\n\nexport interface ScaleOptions {\n  microModeScale: number;\n  macroModeScale: number;\n}\n\nfunction canvasToModel(point: Vec2, options: ScaleOptions): Vec2 {\n  return point.scaled(1 / options.microModeScale);\n}\n\nfunction modelToCanvas(vector: Vec2, options: ScaleOptions): Vec2 {\n  return vector.scaled(options.microModeScale);\n}\n\nexport const Scale = {\n  canvasToModel,\n  modelToCanvas,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Bond, Neighbor, Struct } from 'domain/entities';\n\nfunction isCorrectStereoCenter(\n  bond: Bond,\n  beginNeighs: Array<Neighbor> | undefined,\n  endNeighs: Array<Neighbor> | undefined,\n  struct: Struct,\n) {\n  const beginAtom = struct.atoms.get(bond.begin);\n\n  let EndAtomNeigh: number | undefined = NaN;\n\n  if (endNeighs?.length === 2) {\n    EndAtomNeigh =\n      endNeighs[0].aid === bond.begin ? endNeighs[1].aid : endNeighs[0].aid;\n  }\n\n  if (bond.stereo > 0) {\n    if (\n      endNeighs?.length === 1 &&\n      beginNeighs?.length === 2 &&\n      Number(beginAtom?.implicitH) % 2 === 0\n    ) {\n      return false;\n    }\n\n    if (\n      endNeighs?.length === 2 &&\n      beginNeighs?.length === 2 &&\n      Number(beginAtom?.implicitH) % 2 === 0 &&\n      struct.atomGetNeighbors(EndAtomNeigh)?.length === 1\n    ) {\n      return false;\n    }\n\n    if (beginNeighs?.length === 1) {\n      return false;\n    }\n\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport const StereoValidator = {\n  isCorrectStereoCenter,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { Struct } from '../entities';\n\nexport class FunctionalGroupsProvider {\n  // eslint-disable-next-line no-use-before-define\n  private static instance: FunctionalGroupsProvider;\n  functionalGroupsList: Struct[];\n  constructor() {\n    this.functionalGroupsList = [];\n  }\n\n  public static getInstance(): FunctionalGroupsProvider {\n    if (!FunctionalGroupsProvider.instance) {\n      FunctionalGroupsProvider.instance = new FunctionalGroupsProvider();\n    }\n    return FunctionalGroupsProvider.instance;\n  }\n\n  public getFunctionalGroupsList() {\n    return this.functionalGroupsList;\n  }\n\n  public setFunctionalGroupsList(list: Struct[]): void {\n    this.functionalGroupsList = list;\n  }\n\n  public addToFunctionalGroupsList(list: Struct[]): void {\n    this.functionalGroupsList = [...this.functionalGroupsList, ...list];\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { Struct } from '../entities';\n\nexport class SaltsAndSolventsProvider {\n  // eslint-disable-next-line no-use-before-define\n  private static instance: SaltsAndSolventsProvider;\n  saltsAndSolventsList: Struct[];\n  constructor() {\n    this.saltsAndSolventsList = [];\n  }\n\n  public static getInstance(): SaltsAndSolventsProvider {\n    if (!SaltsAndSolventsProvider.instance) {\n      SaltsAndSolventsProvider.instance = new SaltsAndSolventsProvider();\n    }\n    return SaltsAndSolventsProvider.instance;\n  }\n\n  public getSaltsAndSolventsList() {\n    return this.saltsAndSolventsList;\n  }\n\n  public setSaltsAndSolventsList(list: Struct[]): void {\n    this.saltsAndSolventsList = list;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IMAGE_KEY, MULTITAIL_ARROW_KEY } from 'domain/constants';\n\nexport const SgContexts = {\n  Fragment: 'Fragment',\n  Multifragment: 'Multifragment',\n  Bond: 'Bond',\n  Atom: 'Atom',\n  Group: 'Group',\n};\n\nexport const selectionKeys = [\n  'atoms',\n  'bonds',\n  'frags',\n  'sgroups',\n  'rgroups',\n  'rgroupAttachmentPoints',\n  'rxnArrows',\n  'rxnPluses',\n  'simpleObjects',\n  'texts',\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n] as const;\n\nexport const defaultBondThickness = 2;\n\nexport enum MonomerGroups {\n  SUGARS = 'Sugars',\n  BASES = 'Bases',\n  PHOSPHATES = 'Phosphates',\n  PEPTIDES = 'Amino acids',\n  NUCLEOTIDES = 'Nucleotides',\n}\n\nexport enum MonomerGroupCodes {\n  R = 'R',\n  A = 'A',\n  C = 'C',\n  G = 'G',\n  T = 'T',\n  U = 'U',\n  X = 'X',\n  P = 'P',\n}\n\nexport const MonomerCodeToGroup: Record<MonomerGroupCodes, MonomerGroups> = {\n  R: MonomerGroups.SUGARS,\n  A: MonomerGroups.BASES,\n  C: MonomerGroups.BASES,\n  G: MonomerGroups.BASES,\n  T: MonomerGroups.BASES,\n  U: MonomerGroups.BASES,\n  X: MonomerGroups.BASES,\n  P: MonomerGroups.PHOSPHATES,\n} as const;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Atom } from './atom';\nimport { Bond } from './bond';\nimport { Box2Abs } from './box2Abs';\nimport { Pile } from './pile';\nimport { Struct } from './struct';\nimport { SaltsAndSolventsProvider } from '../helpers';\nimport { Vec2 } from './vec2';\nimport { ReStruct } from '../../application/render';\nimport { FunctionalGroup, Pool, SGroupAttachmentPoint } from 'domain/entities';\nimport { ReSGroup } from 'application/render';\nimport { SgContexts } from 'application/editor/shared/constants';\nimport assert from 'assert';\nimport { isNumber } from 'lodash';\n\nexport class SGroupBracketParams {\n  readonly c: Vec2;\n  readonly d: Vec2;\n  readonly n: Vec2;\n  readonly w: number;\n  readonly h: number;\n\n  constructor(c: Vec2, d: Vec2, w: number, h: number) {\n    this.c = c;\n    this.d = d;\n    this.n = d.rotateSC(1, 0);\n    this.w = w;\n    this.h = h;\n  }\n}\n\nexport class SGroup {\n  static TYPES = {\n    SUP: 'SUP',\n    MUL: 'MUL',\n    SRU: 'SRU',\n    MON: 'MON',\n    MER: 'MER',\n    COP: 'COP',\n    CRO: 'CRO',\n    MOD: 'MOD',\n    GRA: 'GRA',\n    COM: 'COM',\n    MIX: 'MIX',\n    FOR: 'FOR',\n    DAT: 'DAT',\n    ANY: 'ANY',\n    GEN: 'GEN',\n    queryComponent: 'queryComponent',\n  };\n\n  type: string;\n  id: number;\n  label: number;\n  bracketBox: any;\n  bracketDirection: Vec2;\n  areas: any;\n  hover: boolean;\n  hovering: any;\n  selected: boolean;\n  selectionPlate: any;\n  atoms: any;\n  atomSet: any;\n  parentAtomSet: any;\n  patoms?: any;\n  allAtoms: any;\n  bonds: any;\n  xBonds: any;\n  neiAtoms: any;\n  pp: Vec2 | null;\n  data: any;\n  dataArea: any;\n  functionalGroup: FunctionalGroup | undefined;\n  private readonly attachmentPoints: SGroupAttachmentPoint[];\n\n  constructor(type: string) {\n    this.type = type;\n    this.id = -1;\n    this.label = -1;\n    this.bracketBox = null;\n    this.bracketDirection = new Vec2(1, 0);\n    this.areas = [];\n\n    this.hover = false;\n    this.hovering = null;\n    this.selected = false;\n    this.selectionPlate = null;\n\n    this.atoms = [];\n    this.patoms = [];\n    this.bonds = [];\n    this.xBonds = [];\n    this.neiAtoms = [];\n    this.attachmentPoints = [];\n    this.pp = null;\n    this.data = {\n      mul: 1, // multiplication count for MUL group\n      connectivity: 'ht', // head-to-head, head-to-tail or either-unknown\n      name: '',\n      subscript: '',\n      expanded: undefined,\n      // data s-group fields\n      attached: false,\n      absolute: true,\n      showUnits: false,\n      nCharsToDisplay: -1,\n      tagChar: '',\n      daspPos: 1,\n      fieldType: 'F',\n      fieldName: '',\n      fieldValue: '',\n      units: '',\n      query: '',\n      queryOp: '',\n    };\n  }\n\n  // TODO: these methods should be overridden\n  //      and should only accept valid attributes for each S-group type.\n  //      The attributes should be accessed via these methods only and not directly through this.data.\n  // stub\n  getAttr(attr: string): any {\n    return this.data[attr];\n  }\n\n  setFunctionalGroup(functionalGroup: FunctionalGroup) {\n    this.functionalGroup = functionalGroup;\n  }\n\n  // TODO: should be group-specific\n  getAttrs(): any {\n    const attrs = {};\n    Object.keys(this.data).forEach((attr) => {\n      attrs[attr] = this.data[attr];\n    });\n    return attrs;\n  }\n\n  // stub\n  setAttr(attr: string, value: any): any {\n    const oldValue = this.data[attr];\n    this.data[attr] = value;\n    return oldValue;\n  }\n\n  // stub\n  checkAttr(attr: string, value: any): boolean {\n    return this.data[attr] === value;\n  }\n\n  updateOffset(offset: Vec2): void {\n    this.pp = Vec2.sum(this.bracketBox.p1, offset);\n  }\n\n  isExpanded(): boolean {\n    // flag \".data.expanded\" exists only for the SuperAtom\n    if (SGroup.isSuperAtom(this)) {\n      return Boolean(this.data.expanded);\n    } else {\n      return true;\n    }\n  }\n\n  isContracted(): boolean {\n    return !this.isExpanded();\n  }\n\n  calculatePP(struct: Struct): void {\n    let topLeftPoint;\n\n    const isAtomContext = this.data.context === SgContexts.Atom;\n    const isBondContent = this.data.context === SgContexts.Bond;\n    if (isAtomContext || isBondContent) {\n      const contentBoxes: Array<any> = [];\n      let contentBB: Box2Abs | null = null;\n\n      this.atoms.forEach((aid) => {\n        const atom = struct.atoms.get(aid);\n        const pos = new Vec2(atom!.pp);\n\n        const ext = new Vec2(0.05 * 3, 0.05 * 3);\n        const bba = new Box2Abs(pos, pos).extend(ext, ext);\n        contentBoxes.push(bba);\n      });\n\n      contentBoxes.forEach((bba) => {\n        let bbb: Box2Abs | null = null;\n        [bba.p0.x, bba.p1.x].forEach((x) => {\n          [bba.p0.y, bba.p1.y].forEach((y) => {\n            const v = new Vec2(x, y);\n            bbb = !bbb ? new Box2Abs(v, v) : bbb!.include(v);\n          });\n        });\n        contentBB = !contentBB ? bbb : Box2Abs.union(contentBB, bbb!);\n      });\n\n      topLeftPoint = isBondContent ? contentBB!.centre() : contentBB!.p0;\n    } else {\n      topLeftPoint = this.bracketBox.p1.add(new Vec2(0.5, 0.5));\n    }\n\n    const sgroups = Array.from(struct.sgroups.values());\n    for (let i = 0; i < struct.sgroups.size; ++i) {\n      if (!descriptorIntersects(sgroups as [], topLeftPoint)) break;\n\n      topLeftPoint = topLeftPoint.add(new Vec2(0, 0.5));\n    }\n\n    // TODO: the code below is a temporary solution that will be removed after the implementation of the internal format\n    // TODO: in schema.json required fields [\"context\", \"FieldValue\"] in sgroups type DAT must be returned\n    if (this.data.fieldName === 'INDIGO_CIP_DESC') {\n      if (this.atoms.length === 1) {\n        const sAtom = this.atoms[0];\n        const sAtomPP = struct.atoms.get(sAtom)?.pp;\n\n        if (sAtomPP) {\n          topLeftPoint = sAtomPP;\n        }\n      } else {\n        topLeftPoint = SGroup.getMassCentre(struct, this.atoms);\n      }\n    }\n\n    this.pp = topLeftPoint;\n  }\n\n  isGroupAttached(struct: Struct): boolean {\n    return this.getConnectionPointsCount(struct) >= 1;\n  }\n\n  addAttachmentPoint(\n    attachmentPoint: SGroupAttachmentPoint,\n    validateUniqueness = true,\n  ): void {\n    const isAttachmentPointAlreadyExist = this.attachmentPoints.some(\n      ({ atomId, leaveAtomId }) =>\n        attachmentPoint.atomId === atomId &&\n        attachmentPoint.leaveAtomId === leaveAtomId,\n    );\n\n    if (isAttachmentPointAlreadyExist && validateUniqueness) {\n      throw new Error(\n        'The same attachment point cannot be added to an S-group more than once',\n      );\n    }\n\n    this.attachmentPoints.push(attachmentPoint);\n  }\n\n  addAttachmentPoints(\n    attachmentPoints:\n      | ReadonlyArray<SGroupAttachmentPoint>\n      | SGroupAttachmentPoint[],\n    validateUniqueness = true,\n  ): void {\n    for (const attachmentPoint of attachmentPoints) {\n      this.addAttachmentPoint(attachmentPoint, validateUniqueness);\n    }\n  }\n\n  removeAttachmentPoint(attachmentPoint: SGroupAttachmentPoint): boolean {\n    const index = this.attachmentPoints.indexOf(attachmentPoint);\n    if (index !== -1) {\n      this.attachmentPoints.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  getAttachmentPoints(): ReadonlyArray<SGroupAttachmentPoint> {\n    return this.attachmentPoints;\n  }\n\n  /**\n   * Connection point - is not! the same as Attachment point.\n   * Connection point is a fact for the sgroup - is the atom that has connected bond to an external atom.\n   * So it doesn't matter how it happens (connection atom).\n   * When we talk about \"Attachment point\" it is a hypothetical, suitable place to connect to sgroup.\n   * But there are cases when sgroup doesn't have attachment points but have connection (read from external file)\n   */\n  private getConnectionPointsCount(struct: Struct): number {\n    const connectionAtoms = new Set<number>();\n    for (const atomId of this.atoms) {\n      const neighbors = struct.atomGetNeighbors(atomId) ?? [];\n      for (const { aid } of neighbors) {\n        if (!this.atoms.includes(aid)) {\n          connectionAtoms.add(atomId);\n          break;\n        }\n      }\n    }\n    return connectionAtoms.size;\n  }\n\n  isNotContractible(struct: Struct): boolean {\n    return this.getConnectionPointsCount(struct) > 1;\n  }\n\n  /**\n   * Why only one?\n   * Currently other parts of application don't support several attachment points for sgroup.\n   * So to support it - it's required to refactor almost every peace of code with sgroups.\n   *\n   *\n   * Why return 'undefined' without fallback?\n   * If sgroup doesn't have attachment points it can't be attached, (salt and solvents for example).\n   */\n  getAttachmentAtomId(): number | undefined {\n    return this.attachmentPoints[0]?.atomId;\n  }\n\n  /**\n   * WHY? When group is contracted we need to understand the represent atom to calculate position.\n   * It is not always the attachmentPoint!! if no attachment point - use the first atom\n   */\n  getContractedPosition(struct: Struct): {\n    atomId: number;\n    position: Vec2;\n  } {\n    let atomId = this.attachmentPoints[0]?.atomId;\n    let representAtom = struct.atoms.get(atomId);\n    // if there is no attachment points in sgroup - use first externally connected atom if exist or just first atom\n    if (!representAtom) {\n      let externalConnectionAtom;\n      struct.bonds.forEach((bond) => {\n        const isBeginAtomInCurrentSgroup =\n          this.atoms.indexOf(bond.begin) !== -1;\n        const isEndAtomInCurrentSgroup = this.atoms.indexOf(bond.end) !== -1;\n\n        if (isBeginAtomInCurrentSgroup && !isEndAtomInCurrentSgroup) {\n          externalConnectionAtom = bond.begin;\n        } else if (isEndAtomInCurrentSgroup && !isBeginAtomInCurrentSgroup) {\n          externalConnectionAtom = bond.end;\n        }\n      });\n\n      atomId = isNumber(externalConnectionAtom)\n        ? externalConnectionAtom\n        : this.atoms[0];\n      representAtom = struct.atoms.get(atomId);\n    }\n    assert(representAtom != null);\n    return { atomId, position: representAtom.pp };\n  }\n\n  cloneAttachmentPoints(\n    atomIdMap: Map<number, number>,\n  ): ReadonlyArray<SGroupAttachmentPoint> {\n    return this.attachmentPoints.map((point) => point.clone(atomIdMap));\n  }\n\n  public get isSuperatomWithoutLabel() {\n    return this.type === SGroup.TYPES.SUP && !this.data.name;\n  }\n\n  public get isMonomer() {\n    return false;\n  }\n\n  static getOffset(sgroup: SGroup): null | Vec2 {\n    if (!sgroup?.pp || !sgroup.bracketBox) return null;\n    return Vec2.diff(sgroup.pp, sgroup.bracketBox.p1);\n  }\n\n  static isSaltOrSolvent(moleculeName: string): boolean {\n    const saltsAndSolventsProvider = SaltsAndSolventsProvider.getInstance();\n    const saltsAndSolvents = saltsAndSolventsProvider.getSaltsAndSolventsList();\n    return saltsAndSolvents.some(\n      ({ name, abbreviation }) =>\n        name === moleculeName || moleculeName === abbreviation,\n    );\n  }\n\n  static isAtomInSaltOrSolvent(\n    atomId: number,\n    sgroupsOnCanvas: SGroup[],\n  ): boolean {\n    const onlySaltsOrSolvents = sgroupsOnCanvas.filter((sgroup) =>\n      this.isSaltOrSolvent(sgroup.data.name),\n    );\n    return onlySaltsOrSolvents.some(({ atoms }) =>\n      atoms.some((atomIdInSaltOrSolvent) => atomIdInSaltOrSolvent === atomId),\n    );\n  }\n\n  static isBondInSaltOrSolvent(\n    bondId: number,\n    sgroupsOnCanvas: SGroup[],\n  ): boolean {\n    const onlySaltsOrSolvents = sgroupsOnCanvas.filter((sgroup) =>\n      this.isSaltOrSolvent(sgroup.data.name),\n    );\n    return onlySaltsOrSolvents.some(({ bonds }) =>\n      bonds.some((bondIdInSaltOrSolvent) => bondIdInSaltOrSolvent === bondId),\n    );\n  }\n\n  static filterAtoms(atoms: any, map: any) {\n    const newAtoms: Array<any> = [];\n    for (let i = 0; i < atoms.length; ++i) {\n      const aid = atoms[i];\n      if (typeof map[aid] !== 'number') newAtoms.push(aid);\n      else if (map[aid] >= 0) newAtoms.push(map[aid]);\n      else newAtoms.push(-1);\n    }\n    return newAtoms;\n  }\n\n  static removeNegative(atoms: any) {\n    const newAtoms: Array<any> = [];\n    for (let j = 0; j < atoms.length; ++j) {\n      if (atoms[j] >= 0) newAtoms.push(atoms[j]);\n    }\n    return newAtoms;\n  }\n\n  static filter(_mol, sg, atomMap) {\n    sg.atoms = SGroup.removeNegative(SGroup.filterAtoms(sg.atoms, atomMap));\n  }\n\n  static clone(sgroup: SGroup, aidMap: Map<number, number>): SGroup {\n    const cp = new SGroup(sgroup.type);\n\n    Object.keys(sgroup.data).forEach((field) => {\n      cp.data[field] = sgroup.data[field];\n    });\n\n    cp.atoms = sgroup.atoms.map((elem) => aidMap.get(elem));\n    cp.pp = sgroup.pp;\n    cp.bracketBox = sgroup.bracketBox;\n    cp.patoms = null;\n    cp.bonds = null;\n    cp.allAtoms = sgroup.allAtoms;\n    cp.data.expanded = sgroup.data.expanded;\n    cp.addAttachmentPoints(sgroup.cloneAttachmentPoints(aidMap));\n    return cp;\n  }\n\n  static addAtom(sgroup: SGroup, aid: number, struct: Struct): void {\n    sgroup.atoms.push(aid);\n    if (sgroup.isNotContractible(struct)) {\n      sgroup.setAttr('expanded', true);\n    }\n  }\n\n  static removeAtom(sgroup: SGroup, aid: number): void {\n    if (!sgroup) {\n      return;\n    }\n\n    for (let i = 0; i < sgroup.atoms.length; ++i) {\n      if (sgroup.atoms[i] === aid) {\n        sgroup.atoms.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  static getCrossBonds(\n    mol: any,\n    parentAtomSet: Pile<number>,\n  ): { [key: number]: Array<number> } {\n    const crossBonds: { [key: number]: Array<number> } = {};\n    mol.bonds.forEach((bond, bid: number) => {\n      if (parentAtomSet.has(bond.begin) && !parentAtomSet.has(bond.end)) {\n        if (!crossBonds[bond.begin]) {\n          crossBonds[bond.begin] = [];\n        }\n        crossBonds[bond.begin].push(bid);\n      } else if (\n        parentAtomSet.has(bond.end) &&\n        !parentAtomSet.has(bond.begin)\n      ) {\n        if (!crossBonds[bond.end]) {\n          crossBonds[bond.end] = [];\n        }\n        crossBonds[bond.end].push(bid);\n      }\n    });\n    return crossBonds;\n  }\n\n  static bracketPos(\n    sGroup,\n    mol,\n    crossBondsPerAtom?: { [key: number]: Array<number> },\n    remol?: ReStruct,\n    render?,\n  ): void {\n    const BORDER_EXT = new Vec2(0.05 * 3, 0.05 * 3);\n    const PADDING_VECTOR = new Vec2(0.2, 0.4);\n    const atoms = sGroup.atoms;\n    const crossBonds = crossBondsPerAtom\n      ? Object.values(crossBondsPerAtom).flat()\n      : null;\n    // TODO: Overall cross bonds logic seems unclear and not-correct for s groups in general leading to tilted hover plate\n    if (sGroup.isMonomer || !crossBonds || crossBonds.length !== 2) {\n      sGroup.bracketDirection = new Vec2(1, 0);\n    } else {\n      const p1 = mol.bonds.get(crossBonds[0]).getCenter(mol);\n      const p2 = mol.bonds.get(crossBonds[1]).getCenter(mol);\n      sGroup.bracketDirection = Vec2.diff(p2, p1).normalized();\n    }\n    const d = sGroup.bracketDirection;\n\n    let braketBox: Box2Abs | null = null;\n    const contentBoxes: Array<any> = [];\n    const getAtom = (aid) => {\n      if (remol && render) {\n        return remol.atoms.get(aid);\n      }\n      return mol.atoms.get(aid);\n    };\n    atoms.forEach((aid) => {\n      const atom = getAtom(aid);\n      let position;\n      let structBoundingBox;\n      if ('getVBoxObj' in atom && render) {\n        structBoundingBox = atom.getVBoxObj(render);\n      } else {\n        position = new Vec2(atom.pp);\n        structBoundingBox = new Box2Abs(position, position);\n      }\n      contentBoxes.push(structBoundingBox.extend(BORDER_EXT, BORDER_EXT));\n    });\n    contentBoxes.forEach((bba) => {\n      let bbb: Box2Abs | null = null;\n      [bba.p0.x, bba.p1.x].forEach((x) => {\n        [bba.p0.y, bba.p1.y].forEach((y) => {\n          const v = new Vec2(x, y);\n          const p = new Vec2(Vec2.dot(v, d), Vec2.dot(v, d.rotateSC(1, 0)));\n          bbb = !bbb ? new Box2Abs(p, p) : bbb!.include(p);\n        });\n      });\n      braketBox = !braketBox ? bbb : Box2Abs.union(braketBox, bbb!);\n    });\n    if (!render) render = window.ketcher!.editor.render;\n    let attachmentPointsVBox =\n      render.ctab.getRGroupAttachmentPointsVBoxByAtomIds(atoms);\n    attachmentPointsVBox = attachmentPointsVBox\n      ? attachmentPointsVBox.extend(BORDER_EXT, BORDER_EXT)\n      : attachmentPointsVBox;\n    braketBox =\n      attachmentPointsVBox && braketBox\n        ? Box2Abs.union(braketBox, attachmentPointsVBox)\n        : braketBox;\n    if (braketBox)\n      braketBox = (braketBox as Box2Abs).extend(PADDING_VECTOR, PADDING_VECTOR);\n    sGroup.bracketBox = braketBox;\n  }\n\n  static getBracketParameters(\n    mol,\n    crossBondsPerAtom: { [key: number]: Array<Bond> },\n    atomSet: Pile<number>,\n    bb,\n    d,\n    n,\n  ): Array<any> {\n    const brackets: Array<any> = [];\n    const crossBondsPerAtomValues = Object.values(crossBondsPerAtom);\n    const crossBonds = crossBondsPerAtomValues.flat();\n    if (crossBonds.length < 2) {\n      (function () {\n        d = d || new Vec2(1, 0);\n        n = n || d.rotateSC(1, 0);\n        const bracketWidth = Math.min(0.25, bb.sz().x * 0.3);\n        const cl = Vec2.lc2(d, bb.p0.x, n, 0.5 * (bb.p0.y + bb.p1.y));\n        const cr = Vec2.lc2(d, bb.p1.x, n, 0.5 * (bb.p0.y + bb.p1.y));\n        const bracketHeight = bb.sz().y;\n\n        brackets.push(\n          new SGroupBracketParams(cl, d.negated(), bracketWidth, bracketHeight),\n          new SGroupBracketParams(cr, d, bracketWidth, bracketHeight),\n        );\n      })();\n    } else if (\n      crossBonds.length === 2 &&\n      crossBondsPerAtomValues.length === 2\n    ) {\n      (function () {\n        const b1 = mol.bonds.get(crossBonds[0]);\n        const b2 = mol.bonds.get(crossBonds[1]);\n        const cl0 = b1.getCenter(mol);\n        const cr0 = b2.getCenter(mol);\n        const dr = Vec2.diff(cr0, cl0).normalized();\n        const dl = dr.negated();\n\n        const bracketWidth = 0.25;\n        const bracketHeight = 1.5;\n        brackets.push(\n          new SGroupBracketParams(\n            cl0.addScaled(dl, 0),\n            dl,\n            bracketWidth,\n            bracketHeight,\n          ),\n          new SGroupBracketParams(\n            cr0.addScaled(dr, 0),\n            dr,\n            bracketWidth,\n            bracketHeight,\n          ),\n        );\n      })();\n    } else {\n      (function () {\n        for (let i = 0; i < crossBonds.length; ++i) {\n          const b = mol.bonds.get(crossBonds[i]);\n          const c = b.getCenter(mol);\n          const d = atomSet.has(b.begin)\n            ? b.getDir(mol)\n            : b.getDir(mol).negated();\n          brackets.push(new SGroupBracketParams(c, d, 0.2, 1.0));\n        }\n      })();\n    }\n    return brackets;\n  }\n\n  static getObjBBox(atoms, mol): Box2Abs {\n    const a0 = mol.atoms.get(atoms[0]).pp;\n    let bb = new Box2Abs(a0, a0);\n    for (let i = 1; i < atoms.length; ++i) {\n      const aid = atoms[i];\n      const atom = mol.atoms.get(aid);\n      const p = atom.pp;\n      bb = bb.include(p);\n    }\n    return bb;\n  }\n\n  static getAtoms(mol, sg): Array<any> {\n    if (!sg.allAtoms) return sg.atoms;\n    const atoms: Array<any> = [];\n    mol.atoms.forEach((_atom, aid) => {\n      atoms.push(aid);\n    });\n    return atoms;\n  }\n\n  static getBonds(mol, sg): Array<any> {\n    const atoms = SGroup.getAtoms(mol, sg);\n    const bonds: Array<any> = [];\n    mol.bonds.forEach((bond, bid) => {\n      if (atoms.indexOf(bond.begin) >= 0 && atoms.indexOf(bond.end) >= 0) {\n        bonds.push(bid);\n      }\n    });\n    return bonds;\n  }\n\n  static prepareMulForSaving(sgroup, mol): void {\n    sgroup.atoms.sort((a, b) => a - b);\n    sgroup.atomSet = new Pile(sgroup.atoms);\n    sgroup.parentAtomSet = new Pile(sgroup.atomSet);\n    const inBonds: Array<any> = [];\n    const xBonds: Array<any> = [];\n\n    mol.bonds.forEach((bond, bid) => {\n      if (\n        sgroup.parentAtomSet.has(bond.begin) &&\n        sgroup.parentAtomSet.has(bond.end)\n      ) {\n        inBonds.push(bid);\n      } else if (\n        sgroup.parentAtomSet.has(bond.begin) ||\n        sgroup.parentAtomSet.has(bond.end)\n      ) {\n        xBonds.push(bid);\n      }\n    });\n\n    if (xBonds.length !== 0 && xBonds.length !== 2) {\n      throw Error('Unsupported cross-bonds number');\n    }\n\n    let xAtom1 = -1;\n    let xAtom2 = -1;\n    let crossBond = null;\n    if (xBonds.length === 2) {\n      const bond1 = mol.bonds.get(xBonds[0]);\n      xAtom1 = sgroup.parentAtomSet.has(bond1.begin) ? bond1.begin : bond1.end;\n\n      const bond2 = mol.bonds.get(xBonds[1]);\n      xAtom2 = sgroup.parentAtomSet.has(bond2.begin) ? bond2.begin : bond2.end;\n      crossBond = bond2;\n    }\n\n    let tailAtom = xAtom2;\n\n    const newAtoms: Array<any> = [];\n    for (let j = 0; j < sgroup.data.mul - 1; j++) {\n      const amap = {};\n      sgroup.atoms.forEach((aid) => {\n        const atom = mol.atoms.get(aid);\n        const aid2 = mol.atoms.add(new Atom(atom));\n        newAtoms.push(aid2);\n        sgroup.atomSet.add(aid2);\n        amap[aid] = aid2;\n      });\n      inBonds.forEach((bid) => {\n        const bond = mol.bonds.get(bid);\n        const newBond = new Bond(bond);\n        newBond.begin = amap[newBond.begin];\n        newBond.end = amap[newBond.end];\n        mol.bonds.add(newBond);\n      });\n      if (crossBond !== null) {\n        const newCrossBond = new Bond(crossBond);\n        newCrossBond.begin = tailAtom;\n        newCrossBond.end = amap[xAtom1];\n        mol.bonds.add(newCrossBond);\n        tailAtom = amap[xAtom2];\n      }\n    }\n    if (tailAtom >= 0) {\n      const xBond2 = mol.bonds.get(xBonds[1]);\n      if (xBond2.begin === xAtom2) xBond2.begin = tailAtom;\n      else xBond2.end = tailAtom;\n    }\n    sgroup.bonds = xBonds;\n\n    newAtoms.forEach((aid) => {\n      mol.sGroupForest\n        .getPathToRoot(sgroup.id)\n        .reverse()\n        .forEach((sgid) => {\n          mol.atomAddToSGroup(sgid, aid);\n        });\n    });\n  }\n\n  static getMassCentre(mol, atoms): Vec2 {\n    let c = new Vec2(); // mass centre\n    for (let i = 0; i < atoms.length; ++i) {\n      c = c.addScaled(mol.atoms.get(atoms[i]).pp, 1.0 / atoms.length);\n    }\n    return c;\n  }\n\n  static isAtomInContractedSGroup = (atom, sGroups) => {\n    const contractedSGroup: number[] = [];\n\n    sGroups.forEach((sGroupOrReSGroup) => {\n      const sGroup =\n        'item' in sGroupOrReSGroup ? sGroupOrReSGroup.item : sGroupOrReSGroup;\n      if (sGroup.isContracted()) {\n        contractedSGroup.push(sGroup.id);\n      }\n    });\n    return contractedSGroup.some((sg) => atom.sgs.has(sg));\n  };\n\n  static isBondInContractedSGroup(\n    bond: Bond,\n    sGroups: Map<number, ReSGroup> | Pool<SGroup>,\n  ) {\n    return [...sGroups.values()].some((sGroupOrReSGroup) => {\n      const sGroup: SGroup | undefined =\n        'item' in sGroupOrReSGroup ? sGroupOrReSGroup.item : sGroupOrReSGroup;\n      const atomsInSGroup = sGroup?.atoms;\n      return (\n        sGroup?.isContracted() &&\n        atomsInSGroup.includes(bond?.begin) &&\n        atomsInSGroup.includes(bond?.end)\n      );\n    });\n  }\n\n  static isSuperAtom(sGroup?: SGroup): boolean {\n    if (!sGroup) {\n      return false;\n    }\n    return sGroup?.type === SGroup.TYPES.SUP;\n  }\n\n  static isDataSGroup(sGroup: SGroup): boolean {\n    return sGroup.type === SGroup.TYPES.DAT;\n  }\n\n  static isQuerySGroup(sGroup: SGroup): boolean {\n    return sGroup.type === SGroup.TYPES.queryComponent;\n  }\n\n  static isSRUSGroup(sGroup: SGroup): boolean {\n    return sGroup.type === SGroup.TYPES.SRU;\n  }\n\n  static isMulSGroup(sGroup: SGroup): boolean {\n    return sGroup.type === SGroup.TYPES.MUL;\n  }\n}\n\nfunction descriptorIntersects(sgroups: SGroup[], topLeftPoint: Vec2): boolean {\n  return sgroups.some((sg: SGroup) => {\n    if (!sg.pp) return false;\n\n    const sgBottomRightPoint = sg.pp.add(new Vec2(0.5, 0.5));\n    const bottomRightPoint = topLeftPoint.add(new Vec2(0.5, 0.5));\n\n    return Box2Abs.segmentIntersection(\n      sg.pp,\n      sgBottomRightPoint,\n      topLeftPoint,\n      bottomRightPoint,\n    );\n  });\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { SGroup } from 'domain/entities/sgroup';\nimport { Struct } from 'domain/entities/struct';\nimport assert from 'assert';\n\nexport class MonomerMicromolecule extends SGroup {\n  constructor(type: string, public monomer) {\n    super(type);\n    this.data.absolute = false;\n    this.data.attached = false;\n  }\n\n  public get isMonomer() {\n    return true;\n  }\n\n  public override getContractedPosition(struct: Struct) {\n    assert(this.pp);\n    const sgroupContractedPosition = super.getContractedPosition(struct);\n    return { position: this.pp, atomId: sgroupContractedPosition.atomId };\n  }\n\n  public static clone(\n    monomerMicromolecule: MonomerMicromolecule,\n    atomIdMap?: Map<number, number>,\n  ) {\n    const monomerMicromoleculeClone = new MonomerMicromolecule(\n      monomerMicromolecule.type,\n      monomerMicromolecule.monomer,\n    );\n    monomerMicromoleculeClone.pp = monomerMicromolecule.pp;\n    monomerMicromoleculeClone.atoms = atomIdMap\n      ? monomerMicromolecule.atoms.map((elem) => atomIdMap.get(elem))\n      : monomerMicromolecule.atoms;\n\n    return monomerMicromoleculeClone;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AtomList, AtomListParams } from './atomList';\nimport { Point, Vec2 } from './vec2';\n\nimport { Elements } from 'domain/constants';\nimport { Pile } from './pile';\nimport { Struct } from './struct';\nimport {\n  BaseMicromoleculeEntity,\n  initiallySelectedType,\n} from 'domain/entities/BaseMicromoleculeEntity';\nimport { isNumber } from 'lodash';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\n\n/**\n * Return unions of Pick.\n * Difference with <Partial<Pick<O,P>>>  that this type always require at least one property\n *\n * Example:\n * interface O {\n *   field1 : 1;\n *   field2: 2;\n *   field3: 3\n * }\n * SubsetOfFields<O, 'field1'| 'field2'>\n * @returns Pick<O, \"field1\"> | Pick<O, \"field2\">\n */\ntype SubsetOfFields<O, P extends keyof O> = P extends P ? Pick<O, P> : never;\n\nexport enum AttachmentPoints {\n  None = 0,\n  FirstSideOnly = 1,\n  SecondSideOnly = 2,\n  BothSides = 3,\n}\n\nexport enum StereoLabel {\n  Abs = 'abs',\n  And = '&',\n  Or = 'or',\n}\n\nenum CIP {\n  S = 'S',\n  R = 'R',\n  s = 's',\n  r = 'r',\n}\n\nexport type Aromaticity = 'aromatic' | 'aliphatic';\nexport type Chirality = 'clockwise' | 'anticlockwise';\n\nexport interface AtomQueryProperties {\n  aromaticity?: Aromaticity | null;\n  ringMembership?: number | null;\n  ringSize?: number | null;\n  connectivity?: number | null;\n  chirality?: Chirality | null;\n  customQuery?: string | null;\n}\n\nexport interface AtomAttributes {\n  stereoParity?: number;\n  stereoLabel?: string | null;\n  exactChangeFlag?: number;\n  rxnFragmentType?: number;\n  invRet?: number;\n  aam?: number;\n  hCount?: number;\n  isPreview?: boolean;\n  unsaturatedAtom?: number;\n  substitutionCount?: number;\n  ringBondCount?: number;\n  queryProperties?: AtomQueryProperties;\n  explicitValence?: number;\n  /**\n   * Rgroup member attachment points\n   * Its value is indigo-converted `ATTCHPT`\n   * Ref: https://discover.3ds.com/sites/default/files/2020-08/biovia_ctfileformats_2020.pdf P15\n   * Note: value `-1` has been converted to `3` by indigo.\n   */\n  attachmentPoints?: AttachmentPoints | null;\n  rglabel?: string | null;\n  charge?: number | null;\n  radical?: number;\n  cip?: CIP | null;\n  isotope?: number | null;\n  alias?: string | null;\n  pseudo?: string;\n  atomList?: AtomListParams | null;\n  label: string;\n  fragment?: number;\n  pp?: Point;\n  implicitH?: number;\n  implicitHCount?: number | null;\n  initiallySelected?: initiallySelectedType;\n}\n\nexport type AtomPropertiesInContextMenu = SubsetOfFields<\n  AtomAttributes,\n  | 'hCount'\n  | 'ringBondCount'\n  | 'substitutionCount'\n  | 'unsaturatedAtom'\n  | 'implicitHCount'\n>;\n\nexport class Atom extends BaseMicromoleculeEntity {\n  static PATTERN = {\n    RADICAL: {\n      NONE: 0,\n      SINGLET: 1,\n      DOUPLET: 2,\n      TRIPLET: 3,\n    },\n    STEREO_PARITY: {\n      NONE: 0,\n      ODD: 1,\n      EVEN: 2,\n      EITHER: 3,\n    },\n  };\n\n  // TODO: rename\n  static attrlist = {\n    alias: null,\n    label: 'C',\n    isotope: null,\n    radical: 0,\n    cip: null,\n    charge: null,\n    explicitValence: -1,\n    ringBondCount: 0,\n    substitutionCount: 0,\n    unsaturatedAtom: 0,\n    hCount: 0,\n    queryProperties: {\n      aromaticity: null,\n      ringMembership: null,\n      ringSize: null,\n      connectivity: null,\n      chirality: null,\n      customQuery: null,\n    },\n    atomList: null,\n    invRet: 0,\n    exactChangeFlag: 0,\n    rglabel: null,\n    attachmentPoints: null,\n    aam: 0,\n    isPreview: false,\n    // enhanced stereo\n    stereoLabel: null,\n    stereoParity: 0,\n    implicitHCount: null,\n  };\n\n  label: string;\n  fragment: number;\n  atomList: AtomList | null;\n  attachmentPoints: AttachmentPoints | null;\n  isotope: number | null;\n  isPreview: boolean;\n  hCount: number;\n  radical: number;\n  cip: CIP | null;\n  charge: number | null;\n  explicitValence: number;\n  ringBondCount: number;\n  queryProperties: AtomQueryProperties;\n  unsaturatedAtom: number;\n  substitutionCount: number;\n  valence: number;\n  implicitH: number;\n  implicitHCount: number | null;\n  pp: Vec2;\n  neighbors: Array<number>;\n  sgs: Pile<number>;\n  badConn: boolean;\n  alias: string | null;\n  rglabel: string | null;\n  aam: number;\n  invRet: number;\n  exactChangeFlag: number;\n  rxnFragmentType: number;\n  stereoLabel?: string | null;\n  stereoParity: number;\n  hasImplicitH?: boolean;\n  pseudo!: string;\n\n  /** @deprecated */\n  get attpnt() {\n    return this.attachmentPoints;\n  }\n\n  constructor(attributes: AtomAttributes) {\n    super(attributes?.initiallySelected);\n    this.label = attributes.label;\n    this.fragment = getValueOrDefault(attributes.fragment, -1);\n    this.alias = getValueOrDefault(attributes.alias, Atom.attrlist.alias);\n    this.isotope = getValueOrDefault(attributes.isotope, Atom.attrlist.isotope);\n    this.radical = getValueOrDefault(attributes.radical, Atom.attrlist.radical);\n    this.cip = getValueOrDefault(attributes.cip, Atom.attrlist.cip);\n    this.charge = getValueOrDefault(attributes.charge, Atom.attrlist.charge);\n    this.rglabel = getValueOrDefault(attributes.rglabel, Atom.attrlist.rglabel);\n    this.attachmentPoints = getValueOrDefault(\n      attributes.attachmentPoints,\n      Atom.attrlist.attachmentPoints,\n    );\n    this.implicitHCount = getValueOrDefault(attributes.implicitHCount, null);\n    this.explicitValence = getValueOrDefault(\n      attributes.explicitValence,\n      Atom.attrlist.explicitValence,\n    );\n    this.isPreview = getValueOrDefault(\n      attributes.isPreview,\n      Atom.attrlist.isPreview,\n    );\n\n    this.valence = 0;\n    this.implicitH = attributes.implicitHCount || attributes.implicitH || 0; // implicitH is not an attribute\n    this.pp = attributes.pp ? new Vec2(attributes.pp) : new Vec2();\n\n    // sgs should only be set when an atom is added to an s-group by an appropriate method,\n    //   or else a copied atom might think it belongs to a group, but the group be unaware of the atom\n    // TODO: make a consistency check on atom/s-group assignments\n    this.sgs = new Pile();\n\n    // query\n    this.ringBondCount = getValueOrDefault(\n      attributes.ringBondCount,\n      Atom.attrlist.ringBondCount,\n    );\n    this.substitutionCount = getValueOrDefault(\n      attributes.substitutionCount,\n      Atom.attrlist.substitutionCount,\n    );\n    this.unsaturatedAtom = getValueOrDefault(\n      attributes.unsaturatedAtom,\n      Atom.attrlist.unsaturatedAtom,\n    );\n    this.hCount = getValueOrDefault(attributes.hCount, Atom.attrlist.hCount);\n    this.queryProperties = {};\n    for (const property in Atom.attrlist.queryProperties) {\n      this.queryProperties[property] = getValueOrDefault(\n        attributes.queryProperties?.[property],\n        Atom.attrlist.queryProperties[property],\n      );\n    }\n\n    // reaction\n    this.aam = getValueOrDefault(attributes.aam, Atom.attrlist.aam);\n    this.invRet = getValueOrDefault(attributes.invRet, Atom.attrlist.invRet);\n    this.exactChangeFlag = getValueOrDefault(\n      attributes.exactChangeFlag,\n      Atom.attrlist.exactChangeFlag,\n    );\n    this.rxnFragmentType = getValueOrDefault(attributes.rxnFragmentType, -1);\n\n    // stereo\n    this.stereoLabel = getValueOrDefault(\n      attributes.stereoLabel,\n      Atom.attrlist.stereoLabel,\n    );\n    this.stereoParity = getValueOrDefault(\n      attributes.stereoParity,\n      Atom.attrlist.stereoParity,\n    );\n\n    this.atomList = attributes.atomList\n      ? new AtomList(attributes.atomList)\n      : null;\n    this.neighbors = []; // set of half-bonds having this atom as their origin\n    this.badConn = false;\n\n    Object.defineProperty(this, 'pseudo', {\n      enumerable: true,\n      get: function () {\n        return getPseudo(this.label);\n      },\n      set: function (value) {\n        if (isCorrectPseudo(value)) {\n          this.label = value;\n        }\n      },\n    });\n  }\n\n  get isRGroupAttachmentPointEditDisabled() {\n    return this.label === 'R#' && this.rglabel !== null;\n  }\n\n  /**\n   * Trick: used for cloned struct for tooltips, for preview, for templates\n   *\n   * Why?\n   * Currently, tooltips are implemented with removing sgroups (wrong implementation)\n   * That's why we need to mark atoms as sgroup attachment points.\n   *\n   * If we change preview approach to flagged (option for showing sgroups without abbreviation),\n   * then we will be able to remove this hack.\n   */\n  setRGAttachmentPointForDisplayPurpose() {\n    this.attachmentPoints = AttachmentPoints.FirstSideOnly;\n  }\n\n  static getConnectedBondIds(struct: Struct, atomId: number): number[] {\n    const result: number[] = [];\n    for (const [bondId, bond] of struct.bonds.entries()) {\n      if (bond.begin === atomId || bond.end === atomId) {\n        result.push(bondId);\n      }\n    }\n    return result;\n  }\n\n  static getAttrHash(atom: Atom) {\n    const attrs: any = {};\n    for (const attr in Atom.attrlist) {\n      if (typeof atom[attr] !== 'undefined') attrs[attr] = atom[attr];\n    }\n    return attrs;\n  }\n\n  static attrGetDefault(attr: string) {\n    if (attr in Atom.attrlist) {\n      return Atom.attrlist[attr];\n    }\n  }\n\n  static isHeteroAtom(label: string): boolean {\n    return label !== 'C' && label !== 'H';\n  }\n\n  static isInAromatizedRing(struct: Struct, atomId: number): boolean {\n    const atom = struct.atoms.get(atomId);\n    if (atom && Atom.isHeteroAtom(atom.label)) {\n      for (const [_, loop] of struct.loops) {\n        const halfBondIds = loop.hbs;\n        if (loop.aromatic) {\n          for (const halfBondId of halfBondIds) {\n            const halfBond = struct.halfBonds.get(halfBondId);\n            if (!halfBond) return false;\n            const { begin, end } = halfBond;\n            if (begin === atomId || end === atomId) {\n              return true;\n            }\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  clone(fidMap?: Map<number, number>): Atom {\n    const ret = new Atom(this);\n    if (fidMap && fidMap.has(this.fragment)) {\n      ret.fragment = fidMap.get(this.fragment)!;\n    }\n    return ret;\n  }\n\n  isQuery(): boolean {\n    const { queryProperties } = this;\n    const isAnyAtom = this.label === 'A';\n    const isAnyMetal = this.label === 'M' || this.label === 'MH';\n    const isAnyHalogen = this.label === 'X' || this.label === 'XH';\n    const isAnyGroup =\n      this.label === 'G' ||\n      this.label === 'G*' ||\n      this.label === 'GH' ||\n      this.label === 'GH*';\n    return Boolean(\n      this.substitutionCount !== 0 ||\n        this.unsaturatedAtom !== 0 ||\n        this.ringBondCount !== 0 ||\n        isAnyAtom ||\n        isAnyMetal ||\n        isAnyHalogen ||\n        isAnyGroup ||\n        this.hCount !== 0 ||\n        this.atomList !== null ||\n        Object.values(queryProperties).some((value) => value),\n    );\n  }\n\n  pureHydrogen(): boolean {\n    return this.label === 'H' && this.isotope === 0;\n  }\n\n  isPlainCarbon(): boolean {\n    return (\n      this.label === 'C' &&\n      this.isotope === null &&\n      this.radical === 0 &&\n      this.charge === null &&\n      this.explicitValence < 0 &&\n      this.ringBondCount === 0 &&\n      this.substitutionCount === 0 &&\n      this.unsaturatedAtom === 0 &&\n      this.hCount === 0 &&\n      !this.atomList\n    );\n  }\n\n  isPseudo(): boolean {\n    // TODO: handle reaxys generics separately\n    return !this.atomList && !this.rglabel && !Elements.get(this.label);\n  }\n\n  hasRxnProps(): boolean {\n    return !!(\n      this.invRet ||\n      this.exactChangeFlag ||\n      this.attachmentPoints !== null ||\n      this.aam\n    );\n  }\n\n  calcValence(connectionCount: number): boolean {\n    const label = this.label;\n    const charge = this.charge || 0;\n    if (this.isQuery() || this.attachmentPoints) {\n      this.implicitH = 0;\n      return true;\n    }\n    const element = Elements.get(label);\n\n    const groupno = element?.group;\n    const radicalCount = radicalElectrons(this.radical);\n    let valence = connectionCount;\n    let hydrogenCount: any = 0;\n    const absCharge = Math.abs(charge);\n\n    if (groupno === undefined) {\n      if (label === 'D' || label === 'T') {\n        valence = 1;\n        hydrogenCount = 1 - radicalCount - connectionCount - absCharge;\n      } else {\n        this.implicitH = 0;\n        return true;\n      }\n    } else if (groupno === 1) {\n      if (\n        label === 'H' ||\n        label === 'Li' ||\n        label === 'Na' ||\n        label === 'K' ||\n        label === 'Rb' ||\n        label === 'Cs' ||\n        label === 'Fr'\n      ) {\n        valence = 1;\n        hydrogenCount = 1 - radicalCount - connectionCount - absCharge;\n      }\n    } else if (groupno === 2) {\n      if (\n        connectionCount + radicalCount + absCharge === 2 ||\n        connectionCount + radicalCount + absCharge === 0\n      ) {\n        valence = 2;\n      } else hydrogenCount = -1;\n    } else if (groupno === 3) {\n      if (label === 'B' || label === 'Al' || label === 'Ga' || label === 'In') {\n        if (charge === -1) {\n          valence = 4;\n          hydrogenCount = 4 - radicalCount - connectionCount;\n        } else {\n          valence = 3;\n          hydrogenCount = 3 - radicalCount - connectionCount - absCharge;\n        }\n      } else if (label === 'Tl') {\n        if (charge === -1) {\n          if (radicalCount + connectionCount <= 2) {\n            valence = 2;\n            hydrogenCount = 2 - radicalCount - connectionCount;\n          } else {\n            valence = 4;\n            hydrogenCount = 4 - radicalCount - connectionCount;\n          }\n        } else if (charge === -2) {\n          if (radicalCount + connectionCount <= 3) {\n            valence = 3;\n            hydrogenCount = 3 - radicalCount - connectionCount;\n          } else {\n            valence = 5;\n            hydrogenCount = 5 - radicalCount - connectionCount;\n          }\n        } else if (radicalCount + connectionCount + absCharge <= 1) {\n          valence = 1;\n          hydrogenCount = 1 - radicalCount - connectionCount - absCharge;\n        } else {\n          valence = 3;\n          hydrogenCount = 3 - radicalCount - connectionCount - absCharge;\n        }\n      }\n    } else if (groupno === 4) {\n      if (label === 'C' || label === 'Si' || label === 'Ge') {\n        valence = 4;\n        hydrogenCount = 4 - radicalCount - connectionCount - absCharge;\n      } else if (label === 'Sn' || label === 'Pb') {\n        if (connectionCount + radicalCount + absCharge <= 2) {\n          valence = 2;\n          hydrogenCount = 2 - radicalCount - connectionCount - absCharge;\n        } else {\n          valence = 4;\n          hydrogenCount = 4 - radicalCount - connectionCount - absCharge;\n        }\n      }\n    } else if (groupno === 5) {\n      if (label === 'N' || label === 'P') {\n        if (charge === 1) {\n          valence = 4;\n          hydrogenCount = 4 - radicalCount - connectionCount;\n        } else if (charge === 2) {\n          valence = 3;\n          hydrogenCount = 3 - radicalCount - connectionCount;\n        } else if (\n          label === 'N' ||\n          radicalCount + connectionCount + absCharge <= 3\n        ) {\n          valence = 3;\n          hydrogenCount = 3 - radicalCount - connectionCount - absCharge;\n        } else {\n          // ELEM_P && rad + conn + absCharge > 3\n          valence = 5;\n          hydrogenCount = 5 - radicalCount - connectionCount - absCharge;\n        }\n      } else if (label === 'Bi' || label === 'Sb' || label === 'As') {\n        if (charge === 1) {\n          if (radicalCount + connectionCount <= 2 && label !== 'As') {\n            valence = 2;\n            hydrogenCount = 2 - radicalCount - connectionCount;\n          } else {\n            valence = 4;\n            hydrogenCount = 4 - radicalCount - connectionCount;\n          }\n        } else if (charge === 2) {\n          valence = 3;\n          hydrogenCount = 3 - radicalCount - connectionCount;\n        } else if (radicalCount + connectionCount <= 3) {\n          valence = 3;\n          hydrogenCount = 3 - radicalCount - connectionCount - absCharge;\n        } else {\n          valence = 5;\n          hydrogenCount = 5 - radicalCount - connectionCount - absCharge;\n        }\n      }\n    } else if (groupno === 6) {\n      if (label === 'O') {\n        if (charge >= 1) {\n          valence = 3;\n          hydrogenCount = 3 - radicalCount - connectionCount;\n        } else {\n          valence = 2;\n          hydrogenCount = 2 - radicalCount - connectionCount - absCharge;\n        }\n      } else if (label === 'S' || label === 'Se' || label === 'Po') {\n        if (charge === 1) {\n          if (connectionCount <= 3) {\n            valence = 3;\n            hydrogenCount = 3 - radicalCount - connectionCount;\n          } else {\n            valence = 5;\n            hydrogenCount = 5 - radicalCount - connectionCount;\n          }\n        } else if (connectionCount + radicalCount + absCharge <= 2) {\n          valence = 2;\n          hydrogenCount = 2 - radicalCount - connectionCount - absCharge;\n        } else if (connectionCount + radicalCount + absCharge <= 4) {\n          // See examples in PubChem\n          // [S] : CID 16684216\n          // [Se]: CID 5242252\n          // [Po]: no example, just following ISIS/Draw logic here\n          valence = 4;\n          hydrogenCount = 4 - radicalCount - connectionCount - absCharge;\n        } else {\n          // See examples in PubChem\n          // [S] : CID 46937044\n          // [Se]: CID 59786\n          // [Po]: no example, just following ISIS/Draw logic here\n          valence = 6;\n          hydrogenCount = 6 - radicalCount - connectionCount - absCharge;\n        }\n      } else if (label === 'Te') {\n        if (charge === -1) {\n          if (connectionCount <= 2) {\n            valence = 2;\n            hydrogenCount = 2 - radicalCount - connectionCount - absCharge;\n          }\n        } else if (charge === 0 || charge === 2) {\n          if (connectionCount <= 2) {\n            valence = 2;\n            hydrogenCount = 2 - radicalCount - connectionCount - absCharge;\n          } else if (connectionCount <= 4) {\n            valence = 4;\n            hydrogenCount = 4 - radicalCount - connectionCount - absCharge;\n          } else if (charge === 0 && connectionCount <= 6) {\n            valence = 6;\n            hydrogenCount = 6 - radicalCount - connectionCount - absCharge;\n          } else {\n            hydrogenCount = -1;\n          }\n        }\n      }\n    } else if (groupno === 7) {\n      if (label === 'F') {\n        valence = 1;\n        hydrogenCount = 1 - radicalCount - connectionCount - absCharge;\n      } else if (\n        label === 'Cl' ||\n        label === 'Br' ||\n        label === 'I' ||\n        label === 'At'\n      ) {\n        if (charge === 1) {\n          if (connectionCount <= 2) {\n            valence = 2;\n            hydrogenCount = 2 - radicalCount - connectionCount;\n          } else if (\n            connectionCount === 3 ||\n            connectionCount === 5 ||\n            connectionCount >= 7\n          ) {\n            hydrogenCount = -1;\n          }\n        } else if (charge === 0) {\n          if (connectionCount <= 1) {\n            valence = 1;\n            hydrogenCount = 1 - radicalCount - connectionCount;\n            // While the halogens can have valence 3, they can not have\n            // hydrogens in that case.\n          } else if (\n            connectionCount === 2 ||\n            connectionCount === 4 ||\n            connectionCount === 6\n          ) {\n            if (radicalCount === 1) {\n              valence = connectionCount;\n              hydrogenCount = 0;\n            } else {\n              hydrogenCount = -1; // will throw an error in the end\n            }\n          } else if (connectionCount > 7) {\n            hydrogenCount = -1; // will throw an error in the end\n          }\n        }\n      }\n    } else if (groupno === 8) {\n      if (connectionCount + radicalCount + absCharge === 0) valence = 1;\n      else hydrogenCount = -1;\n    }\n    if (Atom.isHeteroAtom(label) && this.implicitHCount !== null) {\n      hydrogenCount = this.implicitHCount;\n    }\n    this.valence = valence;\n    this.implicitH = hydrogenCount;\n    if (this.implicitH < 0) {\n      this.valence = connectionCount;\n      this.implicitH = 0;\n      this.badConn = true;\n      return false;\n    }\n    return true;\n  }\n\n  calcValenceMinusHyd(conn: number): number {\n    const charge = this.charge || 0;\n    const label = this.label;\n    const element = Elements.get(this.label);\n    if (!element) {\n      // query atom, skip\n      this.implicitH = 0;\n      return 0;\n    }\n\n    const groupno = element.group;\n    const rad = radicalElectrons(this.radical);\n\n    if (groupno === 3) {\n      if (label === 'B' || label === 'Al' || label === 'Ga' || label === 'In') {\n        if (charge === -1) {\n          if (rad + conn <= 4) return rad + conn;\n        }\n      }\n    } else if (groupno === 5) {\n      if (label === 'N' || label === 'P') {\n        if (charge === 1) return rad + conn;\n        if (charge === 2) return rad + conn;\n      } else if (label === 'Sb' || label === 'Bi' || label === 'As') {\n        if (charge === 1) return rad + conn;\n        else if (charge === 2) return rad + conn;\n      }\n    } else if (groupno === 6) {\n      if (label === 'O') {\n        if (charge >= 1) return rad + conn;\n      } else if (label === 'S' || label === 'Se' || label === 'Po') {\n        if (charge === 1) return rad + conn;\n      }\n    } else if (groupno === 7) {\n      if (label === 'Cl' || label === 'Br' || label === 'I' || label === 'At') {\n        if (charge === 1) return rad + conn;\n      }\n    }\n\n    return rad + conn + Math.abs(charge);\n  }\n\n  public static getSuperAtomAttachmentPointByAttachmentAtom(\n    struct: Struct,\n    atomId: number,\n  ) {\n    const sgroup = struct.getGroupFromAtomId(atomId);\n    return sgroup\n      ?.getAttachmentPoints()\n      .find((attachmentPoint) => attachmentPoint.atomId === atomId);\n  }\n\n  public static getSuperAtomAttachmentPointByLeavingGroup(\n    struct: Struct,\n    atomId: number,\n  ) {\n    const sgroup = struct.getGroupFromAtomId(atomId);\n    return sgroup\n      ?.getAttachmentPoints()\n      .find((attachmentPoint) => attachmentPoint.leaveAtomId === atomId);\n  }\n\n  public static isSuperatomLeavingGroupAtom(struct: Struct, atomId?: number) {\n    if (atomId === undefined) {\n      return false;\n    }\n\n    return Boolean(\n      Atom.getSuperAtomAttachmentPointByLeavingGroup(struct, atomId),\n    );\n  }\n\n  public static isSuperatomAttachmentAtom(struct: Struct, atomId?: number) {\n    if (atomId === undefined) {\n      return false;\n    }\n\n    return Boolean(\n      Atom.getSuperAtomAttachmentPointByAttachmentAtom(struct, atomId),\n    );\n  }\n\n  public static getAttachmentAtomExternalConnections(\n    struct: Struct,\n    attachmentAtomId?: number,\n    leavingGroupAtomid?: number,\n  ) {\n    const bonds = struct.bonds;\n    const atomId = isNumber(attachmentAtomId)\n      ? attachmentAtomId\n      : (leavingGroupAtomid as number);\n    const atom = struct.atoms.get(atomId);\n    const attachmentPoint = isNumber(attachmentAtomId)\n      ? Atom.getSuperAtomAttachmentPointByAttachmentAtom(struct, atomId)\n      : Atom.getSuperAtomAttachmentPointByLeavingGroup(struct, atomId);\n    const attachmentPointAtomBonds =\n      attachmentPoint &&\n      bonds.filter(\n        (_, bond) =>\n          (bond.begin === attachmentPoint.atomId &&\n            bond.end !== attachmentPoint.leaveAtomId) ||\n          (bond.end === attachmentPoint.atomId &&\n            bond.begin !== attachmentPoint.leaveAtomId),\n      );\n    const attachmentAtomExternalConnection =\n      attachmentPointAtomBonds &&\n      attachmentPointAtomBonds.filter((_, bond) => {\n        const beginAtom = struct.atoms.get(bond.begin);\n        const endAtom = struct.atoms.get(bond.end);\n        const isExternalBondBetweenMonomers =\n          bond.isExternalBondBetweenMonomers(struct);\n\n        return (\n          isExternalBondBetweenMonomers ||\n          beginAtom?.fragment !== atom?.fragment ||\n          endAtom?.fragment !== atom?.fragment\n        );\n      });\n\n    return attachmentAtomExternalConnection;\n  }\n\n  public static isHiddenLeavingGroupAtom(struct: Struct, atomId: number) {\n    const attachmentAtomExternalConnections =\n      Atom.getAttachmentAtomExternalConnections(struct, undefined, atomId);\n    const attachmentPoint = Atom.getSuperAtomAttachmentPointByLeavingGroup(\n      struct,\n      atomId,\n    );\n    const sGroup = struct.getGroupFromAtomId(atomId);\n    const isMonomer = sGroup instanceof MonomerMicromolecule;\n\n    if (!sGroup || (!isMonomer && !sGroup?.isSuperatomWithoutLabel)) {\n      return false;\n    }\n\n    return (\n      Atom.isSuperatomLeavingGroupAtom(struct, atomId) &&\n      attachmentAtomExternalConnections &&\n      attachmentAtomExternalConnections.find((_, bond) =>\n        bond.begin === attachmentPoint?.atomId\n          ? bond.beginSuperatomAttachmentPointNumber ===\n            attachmentPoint?.attachmentPointNumber\n          : bond.endSuperatomAttachmentPointNumber ===\n            attachmentPoint?.attachmentPointNumber,\n      )\n    );\n  }\n}\n\nexport function radicalElectrons(radical: any) {\n  radical -= 0;\n  if (radical === Atom.PATTERN.RADICAL.DOUPLET) return 1;\n  else if (\n    radical === Atom.PATTERN.RADICAL.SINGLET ||\n    radical === Atom.PATTERN.RADICAL.TRIPLET\n  ) {\n    return 2;\n  } else {\n    return 0;\n  }\n}\n\nfunction getValueOrDefault<T>(value: T | undefined, defaultValue: T): T {\n  return typeof value !== 'undefined' ? value : defaultValue;\n}\n\nfunction isCorrectPseudo(label) {\n  return (\n    !Elements.get(label) && label !== 'L' && label !== 'L#' && label !== 'R#'\n  );\n}\n\nfunction getPseudo(label: string) {\n  return isCorrectPseudo(label) ? label : '';\n}\n","export class FixedPrecisionCoordinates {\n  static MULTIPLIER = 10 ** 5;\n  public readonly value: number;\n\n  static fromFloatingPrecision(value: number) {\n    return new FixedPrecisionCoordinates(\n      Math.round(value * FixedPrecisionCoordinates.MULTIPLIER),\n    );\n  }\n\n  constructor(value: number | FixedPrecisionCoordinates) {\n    this.value =\n      value instanceof FixedPrecisionCoordinates ? value.value : value;\n  }\n\n  add(\n    fixedPrecisionValue: FixedPrecisionCoordinates,\n  ): FixedPrecisionCoordinates {\n    return new FixedPrecisionCoordinates(\n      this.value + fixedPrecisionValue.value,\n    );\n  }\n\n  sub(\n    fixedPrecisionValue: FixedPrecisionCoordinates,\n  ): FixedPrecisionCoordinates {\n    return new FixedPrecisionCoordinates(\n      this.value - fixedPrecisionValue.value,\n    );\n  }\n\n  multiply(\n    value: FixedPrecisionCoordinates | number,\n  ): FixedPrecisionCoordinates {\n    const isFixedPrecision = value instanceof FixedPrecisionCoordinates;\n    const multiplier = isFixedPrecision ? value.value : value;\n    const result = this.value * multiplier;\n    return new FixedPrecisionCoordinates(\n      Math.round(\n        isFixedPrecision\n          ? result / FixedPrecisionCoordinates.MULTIPLIER\n          : result,\n      ),\n    );\n  }\n\n  divide(value: FixedPrecisionCoordinates | number): FixedPrecisionCoordinates {\n    const isFixedPrecision = value instanceof FixedPrecisionCoordinates;\n    const delimiter = isFixedPrecision ? value.value : value;\n    const result = this.value / delimiter;\n    return new FixedPrecisionCoordinates(\n      Math.round(\n        isFixedPrecision\n          ? result * FixedPrecisionCoordinates.MULTIPLIER\n          : result,\n      ),\n    );\n  }\n\n  getFloatingPrecision(): number {\n    return this.value / FixedPrecisionCoordinates.MULTIPLIER;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Point, Vec2 } from './vec2';\n\nimport { Bond } from './bond';\nimport { StereoLabel } from './atom';\nimport { Struct, StructProperty } from './struct';\n\nexport enum StereoFlag {\n  Mixed = 'MIXED',\n  Abs = 'ABS',\n  And = 'AND',\n  Or = 'OR',\n}\n\nfunction calcStereoFlag(\n  struct: Struct,\n  stereoAids: Array<number>,\n): StereoFlag | undefined {\n  if (!stereoAids || stereoAids.length === 0) return undefined;\n  const filteredStereoAtoms = stereoAids\n    .map((aid) => struct.atoms.get(aid))\n    .filter((atom) => atom?.stereoLabel);\n  if (!filteredStereoAtoms.length) return undefined;\n\n  const atom = filteredStereoAtoms[0]!;\n  const stereoLabel = atom.stereoLabel!; // {string | null} \"<abs|and|or>-<group>\"\n\n  const hasAnotherLabel = filteredStereoAtoms.some(\n    (atom) => atom?.stereoLabel !== stereoLabel,\n  );\n\n  let stereoFlag: StereoFlag;\n  if (hasAnotherLabel) {\n    stereoFlag = StereoFlag.Mixed;\n  } else {\n    const label = stereoLabel.match(/\\D+/g)?.[0];\n    switch (label) {\n      case StereoLabel.Abs: {\n        stereoFlag = StereoFlag.Abs;\n        break;\n      }\n      case StereoLabel.And: {\n        stereoFlag = StereoFlag.And;\n        break;\n      }\n      case StereoLabel.Or: {\n        stereoFlag = StereoFlag.Or;\n        break;\n      }\n      default: {\n        throw new Error(`Unsupported stereo label: ${label}.`);\n      }\n    }\n  }\n  return stereoFlag;\n}\n\nexport class Fragment {\n  #enhancedStereoFlag?: StereoFlag;\n  stereoFlagPosition?: Vec2;\n  properties?: Array<StructProperty>;\n  #stereoAtoms: Array<number>;\n\n  get stereoAtoms(): Array<number> {\n    return [...this.#stereoAtoms];\n  }\n\n  get enhancedStereoFlag() {\n    return this.#enhancedStereoFlag;\n  }\n\n  constructor(\n    stereoAtoms: Array<number> = [],\n    stereoFlagPosition?: Point | null,\n    properties?: Array<StructProperty>,\n  ) {\n    if (stereoFlagPosition) {\n      this.stereoFlagPosition = new Vec2(stereoFlagPosition);\n    }\n    if (properties) {\n      this.properties = properties;\n    }\n    this.#stereoAtoms = stereoAtoms;\n  }\n\n  static getDefaultStereoFlagPosition(\n    struct: Struct,\n    fragmentId: number,\n  ): Vec2 | undefined {\n    const fragment = struct.getFragment(fragmentId);\n    if (!fragment) return undefined;\n    const bb = fragment.getCoordBoundingBox();\n    return new Vec2(bb.max.x, bb.min.y - 1);\n  }\n\n  clone(aidMap: Map<number, number>) {\n    const stereoAtoms = this.#stereoAtoms.map((aid) => aidMap.get(aid)!);\n    const fr = new Fragment(\n      stereoAtoms,\n      this.stereoFlagPosition,\n      this.properties,\n    );\n    fr.#enhancedStereoFlag = this.#enhancedStereoFlag;\n    return fr;\n  }\n\n  updateStereoFlag(struct: Struct) {\n    this.#enhancedStereoFlag = calcStereoFlag(struct, this.stereoAtoms);\n    return this.#enhancedStereoFlag;\n  }\n\n  // TODO: split to 'add' and 'remove methods\n  updateStereoAtom(struct: Struct, aid: number, frId: number, isAdd: boolean) {\n    if (isAdd && !this.#stereoAtoms.includes(aid)) this.#stereoAtoms.push(aid);\n    if (\n      !isAdd &&\n      (struct.atoms.get(aid)?.fragment !== frId ||\n        !Array.from(struct.bonds.values())\n          .filter(\n            (bond) => bond.stereo && bond.type !== Bond.PATTERN.TYPE.DOUBLE,\n          )\n          .some((bond) => bond.begin === aid))\n    ) {\n      this.#stereoAtoms = this.stereoAtoms.filter((item) => item !== aid);\n    }\n\n    this.#enhancedStereoFlag = calcStereoFlag(struct, this.stereoAtoms);\n  }\n\n  addStereoAtom(atomId: number): boolean {\n    if (!this.#stereoAtoms.includes(atomId)) {\n      this.stereoAtoms.push(atomId);\n      return true;\n    }\n    return false;\n  }\n\n  deleteStereoAtom(\n    struct: Struct,\n    fragmentId: number,\n    atomId: number,\n  ): boolean {\n    if (\n      struct.atoms.get(atomId)?.fragment !== fragmentId ||\n      !Array.from(struct.bonds.values())\n        .filter((bond) => bond.stereo && bond.type !== Bond.PATTERN.TYPE.DOUBLE)\n        .some((bond) => bond.begin === atomId)\n    ) {\n      this.#stereoAtoms = this.#stereoAtoms.filter((item) => item !== atomId);\n      return true;\n    }\n    return false;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { ReSGroup } from 'application/render';\nimport assert from 'assert';\nimport { FunctionalGroupsProvider } from '../helpers';\nimport { Atom } from './atom';\nimport { Bond } from './bond';\nimport { Pool } from './pool';\nimport { SGroup } from './sgroup';\nimport { Struct } from './struct';\nimport { HalfBond } from './halfBond';\n\nexport class FunctionalGroup {\n  #sgroup: SGroup;\n\n  constructor(sgroup: SGroup) {\n    assert(sgroup != null);\n\n    this.#sgroup = sgroup;\n    sgroup.setFunctionalGroup(this);\n  }\n\n  get name(): string {\n    return this.#sgroup.data.name;\n  }\n\n  get relatedSGroupId(): number {\n    return this.#sgroup.id;\n  }\n\n  get isExpanded(): boolean {\n    return this.#sgroup.data.expanded;\n  }\n\n  get relatedSGroup(): SGroup {\n    return this.#sgroup;\n  }\n\n  static isFunctionalGroup(sgroup): boolean {\n    const provider = FunctionalGroupsProvider.getInstance();\n    const functionalGroups = provider.getFunctionalGroupsList();\n    const {\n      data: { name },\n      type,\n    } = sgroup;\n    return (\n      type === 'SUP' &&\n      (functionalGroups.some((type) => type.name === name) ||\n        SGroup.isSaltOrSolvent(name))\n    );\n  }\n\n  static atomsInFunctionalGroup(\n    functionalGroups,\n    atom,\n    isNeedCheckForGroups = false,\n  ): number | null {\n    if (functionalGroups.size === 0) {\n      return null;\n    }\n    for (const fg of functionalGroups.values()) {\n      const isFunctionalGroup = isNeedCheckForGroups\n        ? this.isFunctionalGroup(fg.relatedSGroup)\n        : true;\n      if (isFunctionalGroup && fg.relatedSGroup.atoms.includes(atom))\n        return atom;\n    }\n    return null;\n  }\n\n  static bondsInFunctionalGroup(\n    molecule,\n    functionalGroups,\n    bond,\n  ): number | null {\n    if (functionalGroups.size === 0) {\n      return null;\n    }\n    for (const fg of functionalGroups.values()) {\n      const bonds = SGroup.getBonds(molecule, fg.relatedSGroup);\n      if (bonds.includes(bond)) return bond;\n    }\n    return null;\n  }\n\n  static isRGroupAttachmentPointInsideFunctionalGroup(\n    molecule: Struct,\n    id: number,\n  ) {\n    const rgroupAttachmentPoint = molecule.rgroupAttachmentPoints.get(id);\n    assert(rgroupAttachmentPoint != null);\n    const attachedAtom = rgroupAttachmentPoint.atomId;\n    return FunctionalGroup.atomsInFunctionalGroup(\n      molecule.functionalGroups,\n      attachedAtom,\n    );\n  }\n\n  static findFunctionalGroupByAtom(\n    functionalGroups: Pool<FunctionalGroup>,\n    atomId: number,\n  ): number | null;\n\n  static findFunctionalGroupByAtom(\n    functionalGroups: Pool<FunctionalGroup>,\n    atomId: number,\n    isFunctionalGroupReturned: true,\n  ): FunctionalGroup | null;\n\n  static findFunctionalGroupByAtom(\n    functionalGroups: Pool<FunctionalGroup>,\n    atomId: number,\n    isFunctionalGroupReturned?: boolean,\n  ): number | FunctionalGroup | null {\n    for (const fg of functionalGroups.values()) {\n      if (\n        !fg.relatedSGroup.isSuperatomWithoutLabel &&\n        fg.relatedSGroup.atoms.includes(atomId)\n      )\n        return isFunctionalGroupReturned ? fg : fg.relatedSGroupId;\n    }\n    return null;\n  }\n\n  static findFunctionalGroupByBond(\n    molecule: Struct,\n    functionalGroups: Pool<FunctionalGroup>,\n    bondId: number | null,\n  ): number | null;\n\n  static findFunctionalGroupByBond(\n    molecule: Struct,\n    functionalGroups: Pool<FunctionalGroup>,\n    bondId: number | null,\n    isFunctionalGroupReturned: true,\n  ): FunctionalGroup | null;\n\n  static findFunctionalGroupByBond(\n    molecule: Struct,\n    functionalGroups: Pool<FunctionalGroup>,\n    bondId: number | null,\n    isFunctionalGroupReturned?: boolean,\n  ): FunctionalGroup | number | null {\n    for (const fg of functionalGroups.values()) {\n      const bonds = SGroup.getBonds(molecule, fg.relatedSGroup);\n      if (!fg.relatedSGroup.isSuperatomWithoutLabel && bonds.includes(bondId)) {\n        return isFunctionalGroupReturned ? fg : fg.relatedSGroupId;\n      }\n    }\n    return null;\n  }\n\n  static findFunctionalGroupBySGroup(\n    functionalGroups: Pool<FunctionalGroup>,\n    sGroup?: SGroup,\n  ) {\n    const key = functionalGroups.find(\n      (_, functionalGroup) => functionalGroup.relatedSGroupId === sGroup?.id,\n    );\n    return key !== null ? functionalGroups.get(key) : undefined;\n  }\n\n  static clone(functionalGroup: FunctionalGroup): FunctionalGroup {\n    return new FunctionalGroup(functionalGroup.#sgroup);\n  }\n\n  static isAtomInContractedFunctionalGroup(\n    atom: Atom,\n    sgroups,\n    functionalGroups,\n    sgroupsFromReStruct: boolean,\n  ): boolean {\n    const contractedFunctionalGroups: number[] = [];\n    if (sgroupsFromReStruct) {\n      sgroups.forEach((sg) => {\n        if (\n          FunctionalGroup.isContractedFunctionalGroup(sg.item, functionalGroups)\n        ) {\n          contractedFunctionalGroups.push(sg.item.id);\n        }\n      });\n    } else {\n      sgroups.forEach((sg) => {\n        if (FunctionalGroup.isContractedFunctionalGroup(sg, functionalGroups)) {\n          contractedFunctionalGroups.push(sg.id);\n        }\n      });\n    }\n    return contractedFunctionalGroups.some((sg) => atom.sgs.has(sg));\n  }\n\n  static isBondInContractedFunctionalGroup(\n    bond: Bond,\n    sGroups: Map<number, ReSGroup> | Pool<SGroup>,\n    functionalGroups: Pool<FunctionalGroup>,\n  ) {\n    return [...sGroups.values()].some((_sGroup) => {\n      const sGroup = 'item' in _sGroup ? _sGroup?.item : _sGroup;\n      const atomsInSGroup = sGroup?.atoms;\n      const isContracted = FunctionalGroup.isContractedFunctionalGroup(\n        sGroup,\n        functionalGroups,\n      );\n      return (\n        isContracted &&\n        atomsInSGroup.includes(bond.begin) &&\n        atomsInSGroup.includes(bond.end)\n      );\n    });\n  }\n\n  static isHalfBondInContractedFunctionalGroup(\n    halfBond: HalfBond,\n    struct: Struct,\n  ) {\n    const bond = struct.bonds.get(halfBond.bid);\n    assert(bond != null);\n    return this.isBondInContractedFunctionalGroup(\n      bond,\n      struct.sgroups,\n      struct.functionalGroups,\n    );\n  }\n\n  static isContractedFunctionalGroup(sgroup, functionalGroups): boolean {\n    let isFunctionalGroup = false;\n    let expanded = false;\n\n    if (sgroup instanceof SGroup) {\n      if (sgroup.functionalGroup) {\n        isFunctionalGroup = true;\n        expanded = sgroup.functionalGroup.isExpanded;\n      }\n    } else {\n      functionalGroups.forEach((fg) => {\n        if (fg.relatedSGroupId === sgroup) {\n          isFunctionalGroup = true;\n          expanded = fg.isExpanded;\n        }\n      });\n    }\n    return !expanded && isFunctionalGroup;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Vec2 } from './vec2';\nimport assert from 'assert';\n\n/** @internal */\nexport class HalfBond {\n  begin: number;\n  end: number;\n  bid: number;\n  dir: Vec2;\n  norm: Vec2;\n  ang: number;\n  p: Vec2;\n  loop: number;\n  contra: number;\n  next: number;\n  leftSin: number;\n  leftCos: number;\n  leftNeighbor: number;\n  rightSin: number;\n  rightCos: number;\n  rightNeighbor: number;\n\n  constructor(begin: number, end: number, bid: number) {\n    assert(arguments.length === 3, 'Invalid parameter number.');\n\n    this.begin = begin;\n    this.end = end;\n    this.bid = bid;\n\n    // rendering properties\n    this.dir = new Vec2(); // direction\n    this.norm = new Vec2(); // left normal\n    this.ang = 0; // angle to (1,0), used for sorting the bonds\n    this.p = new Vec2(); // corrected origin position\n    this.loop = -1; // left loop id if the half-bond is in a loop, otherwise -1\n    this.contra = -1; // the half bond contrary to this one\n    this.next = -1; // the half-bond next ot this one in CCW order\n    this.leftSin = 0;\n    this.leftCos = 0;\n    this.leftNeighbor = 0;\n    this.rightSin = 0;\n    this.rightCos = 0;\n    this.rightNeighbor = 0;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Bond } from './bond';\nimport { Struct } from './struct';\n\nexport class Loop {\n  hbs: number[];\n  dblBonds: number;\n  aromatic: boolean;\n  convex: boolean;\n\n  constructor(hbs: Array<number>, struct: Struct, isConvex: boolean) {\n    this.hbs = hbs; // set of half-bonds involved\n    this.dblBonds = 0; // number of double bonds in the loop\n    this.aromatic = true;\n    this.convex = isConvex || false;\n\n    hbs.forEach((hb) => {\n      const bond: Bond = struct.bonds.get(struct.halfBonds.get(hb)!.bid)!;\n      if (bond.type !== Bond.PATTERN.TYPE.AROMATIC) this.aromatic = false;\n      if (bond.type === Bond.PATTERN.TYPE.DOUBLE) this.dblBonds++;\n    });\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Pile } from './pile';\nimport { Pool } from './pool';\n\nexport interface RGroupAttributes {\n  index?: number;\n  ifthen?: number;\n  resth?: boolean;\n  range?: string;\n}\nexport class RGroup {\n  frags: Pile<number>;\n  resth: boolean;\n  range: string;\n  ifthen: number;\n  index: number;\n\n  constructor(atrributes?: RGroupAttributes) {\n    this.frags = new Pile<number>();\n    this.resth = atrributes?.resth || false;\n    this.range = atrributes?.range || '';\n    this.ifthen = atrributes?.ifthen || 0;\n    this.index = atrributes?.index || -1;\n  }\n\n  static findRGroupByFragment(rgroups: Pool<RGroup>, frid: number) {\n    return rgroups.find((_rgid, rgroup) => rgroup.frags.has(frid));\n  }\n\n  getAttrs(): RGroupAttributes {\n    return {\n      resth: this.resth,\n      range: this.range,\n      ifthen: this.ifthen,\n      index: this.index,\n    };\n  }\n\n  clone(fidMap?: Map<number, number> | null): RGroup {\n    const ret = new RGroup(this);\n    this.frags.forEach((fid) => {\n      if (!fidMap || fidMap.has(fid)) {\n        ret.frags.add(fidMap ? fidMap.get(fid)! : fid);\n      }\n    });\n    return ret;\n  }\n}\n","import {\n  BaseMicromoleculeEntity,\n  initiallySelectedType,\n} from 'domain/entities/BaseMicromoleculeEntity';\n\nexport type RGroupAttachmentPointType = 'primary' | 'secondary';\n\nexport class RGroupAttachmentPoint extends BaseMicromoleculeEntity {\n  atomId: number;\n  type: RGroupAttachmentPointType;\n\n  constructor(\n    atomId: number,\n    type: RGroupAttachmentPointType,\n    initiallySelected?: initiallySelectedType,\n  ) {\n    super(initiallySelected);\n    this.atomId = atomId;\n    this.type = type;\n  }\n\n  clone(atomToNewAtom?: Map<number, number> | null) {\n    const newAtomId = atomToNewAtom?.get(this.atomId);\n    return new RGroupAttachmentPoint(\n      newAtomId ?? this.atomId,\n      this.type,\n      this.initiallySelected,\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Point, Vec2 } from './vec2';\nimport {\n  BaseMicromoleculeEntity,\n  initiallySelectedType,\n} from 'domain/entities/BaseMicromoleculeEntity';\n\nexport enum RxnArrowMode {\n  OpenAngle = 'open-angle',\n  FilledTriangle = 'filled-triangle',\n  FilledBow = 'filled-bow',\n  DashedOpenAngle = 'dashed-open-angle',\n  Failed = 'failed',\n  Retrosynthetic = 'retrosynthetic',\n  BothEndsFilledTriangle = 'both-ends-filled-triangle',\n  EquilibriumFilledTriangle = 'equilibrium-filled-triangle',\n  EquilibriumFilledHalfBow = 'equilibrium-filled-half-bow',\n  EquilibriumOpenAngle = 'equilibrium-open-angle',\n  UnbalancedEquilibriumFilledHalfBow = 'unbalanced-equilibrium-filled-half-bow',\n  UnbalancedEquilibriumOpenHalfAngle = 'unbalanced-equilibrium-open-half-angle',\n  UnbalancedEquilibriumLargeFilledHalfBow = 'unbalanced-equilibrium-large-filled-half-bow',\n  UnbalancedEquilibriumFilledHalfTriangle = 'unbalanced-equilibrium-filled-half-triangle',\n  EllipticalArcFilledBow = 'elliptical-arc-arrow-filled-bow',\n  EllipticalArcFilledTriangle = 'elliptical-arc-arrow-filled-triangle',\n  EllipticalArcOpenAngle = 'elliptical-arc-arrow-open-angle',\n  EllipticalArcOpenHalfAngle = 'elliptical-arc-arrow-open-half-angle',\n}\n\nexport interface RxnArrowAttributes {\n  mode: RxnArrowMode;\n  pos?: Array<Point>;\n  height?: number;\n  initiallySelected?: initiallySelectedType;\n}\n\nexport class RxnArrow extends BaseMicromoleculeEntity {\n  mode: RxnArrowMode;\n  pos: Array<Vec2>;\n  height?: number;\n\n  static isElliptical(arrow) {\n    return [\n      RxnArrowMode.EllipticalArcFilledBow,\n      RxnArrowMode.EllipticalArcFilledTriangle,\n      RxnArrowMode.EllipticalArcOpenHalfAngle,\n      RxnArrowMode.EllipticalArcOpenAngle,\n    ].includes(arrow.mode);\n  }\n\n  constructor(attributes: RxnArrowAttributes) {\n    super(attributes?.initiallySelected);\n    this.pos = [];\n\n    if (attributes.pos) {\n      for (let i = 0; i < attributes.pos.length; i++) {\n        const currentP = attributes.pos[i];\n        this.pos[i] = currentP ? new Vec2(attributes.pos[i]) : new Vec2();\n      }\n    }\n    this.mode = attributes.mode;\n    const defaultHeight = 1;\n\n    if (RxnArrow.isElliptical(this)) {\n      this.height = attributes.height ?? defaultHeight;\n    }\n  }\n\n  clone() {\n    return new RxnArrow(this);\n  }\n\n  center(): Vec2 {\n    return Vec2.centre(this.pos[0], this.pos[1]);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Point, Vec2 } from './vec2';\nimport {\n  BaseMicromoleculeEntity,\n  initiallySelectedType,\n} from 'domain/entities/BaseMicromoleculeEntity';\n\nexport interface RxnPlusAttributes {\n  pp?: Point;\n  initiallySelected?: initiallySelectedType;\n}\n\nexport class RxnPlus extends BaseMicromoleculeEntity {\n  pp: Vec2;\n\n  constructor(attributes?: RxnPlusAttributes) {\n    super(attributes?.initiallySelected);\n    this.pp = attributes?.pp ? new Vec2(attributes.pp) : new Vec2();\n  }\n\n  clone() {\n    return new RxnPlus(this);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Pile } from './pile';\nimport { SGroup } from './sgroup';\nimport assert from 'assert';\nimport { Struct } from './struct';\nimport { KetcherLogger } from 'utilities';\n\nexport class SGroupForest {\n  /** node id -> parent id */\n  parent: Map<number, number>;\n  /** node id -> list of child ids */\n  children: Map<number, number[]>;\n  atomSets: Map<number, any>;\n\n  constructor() {\n    this.parent = new Map();\n    this.children = new Map();\n\n    this.children.set(-1, []); // extra root node\n    this.atomSets = new Map();\n  }\n\n  /** returns an array or s-group ids in the order of breadth-first search */\n  getSGroupsBFS(): number[] {\n    const order: number[] = [];\n    const queue = Array.from(this.children.get(-1) as Array<number>);\n    while (queue.length > 0) {\n      const id = queue.shift();\n      if (typeof id !== 'number') {\n        break;\n      }\n      const children = this.children.get(id);\n      if (typeof children === 'undefined') {\n        break;\n      }\n\n      children.forEach((id) => {\n        queue.push(id);\n      });\n\n      order.push(id);\n    }\n\n    return order;\n  }\n\n  getAtomSetRelations(newId: any, atoms: any) {\n    // find the lowest superset in the hierarchy\n    const isStrictSuperset = new Map();\n    const isSubset = new Map();\n\n    this.atomSets.delete(newId);\n\n    this.atomSets.forEach((atomSet, id) => {\n      isSubset.set(id, atomSet.isSuperset(atoms));\n      isStrictSuperset.set(\n        id,\n        atoms.isSuperset(atomSet) && !atomSet.equals(atoms),\n      );\n    });\n\n    const parents = Array.from(this.atomSets.keys()).filter((sgid) => {\n      if (!isSubset.get(sgid)) {\n        return false;\n      }\n      const childs = this.children.get(sgid);\n      return childs && childs.findIndex((childId) => isSubset.get(childId)) < 0;\n    });\n\n    const children = Array.from(this.atomSets.keys()).filter(\n      (id) =>\n        isStrictSuperset.get(id) && !isStrictSuperset.get(this.parent.get(id)),\n    );\n\n    return {\n      children,\n      parent: parents.length === 0 ? -1 : parents[0],\n    };\n  }\n\n  getPathToRoot(sgid): number[] {\n    const path: number[] = [];\n    for (let id = sgid; id >= 0; id = this.parent.get(id)) {\n      path.push(id);\n    }\n    return path;\n  }\n\n  insert({ id, atoms }, parent?: number, children?: number[]) {\n    assert(!this.parent.has(id), 'sgid already present in the forest');\n    assert(!this.children.has(id), 'sgid already present in the forest');\n\n    if (!parent || !children) {\n      // if these are not provided, deduce automatically\n      const guess = this.getAtomSetRelations(id, new Pile(atoms));\n      parent = guess.parent;\n      children = guess.children;\n    }\n\n    // TODO: make children Map<int, Pile> instead of Map<int, []>?\n    children.forEach((childId) => {\n      this.resetParentLink(childId, id);\n    });\n    this.children.set(\n      id,\n      children.filter((id) => this.parent.get(id)),\n    );\n    this.parent.set(id, parent);\n    this.children.get(parent)?.push(id);\n    this.atomSets.set(id, new Pile(atoms));\n\n    return { parent, children };\n  }\n\n  private resetParentLink(childId, id) {\n    const parentId = this.parent.get(childId);\n    if (typeof parentId === 'undefined') {\n      return;\n    }\n\n    const childs = this.children.get(parentId);\n    if (!childs) {\n      return;\n    }\n\n    const childIndex = childs.indexOf(childId);\n    childs.splice(childIndex, 1);\n    this.parent.set(childId, id);\n  }\n\n  remove(id) {\n    try {\n      assert(this.parent.has(id), 'sgid is not in the forest');\n      assert(this.children.has(id), 'sgid is not in the forest');\n    } catch (e) {\n      KetcherLogger.error('sgroupForest.ts::SGroupForest::remove', e);\n      console.info('error: sgid is not in the forest');\n    }\n\n    const parentId = this.parent.get(id) as any;\n    const childs = this.children.get(parentId) as any;\n\n    if (!parentId || !childs) return;\n\n    this.children.get(id)?.forEach((childId) => {\n      this.parent.set(childId, parentId);\n      this.children.get(parentId)?.push(childId);\n    });\n\n    const i = childs.indexOf(id);\n    childs.splice(i, 1);\n\n    this.children.delete(id);\n    this.parent.delete(id);\n    this.atomSets.delete(id);\n  }\n}\n\nexport function checkOverlapping(\n  struct: Struct,\n  atoms: number[] = [],\n  sGroupType: 'queryComponent' | 'common',\n) {\n  const searchFunction = {\n    common: (sid: number) => {\n      const sg = struct.sgroups.get(sid);\n      if (sg?.type === 'DAT') return false;\n      const sgAtoms = SGroup.getAtoms(struct, sg);\n\n      return sgAtoms.length < atoms.length\n        ? sgAtoms.findIndex((aid) => atoms.indexOf(aid) === -1) >= 0\n        : atoms.findIndex((aid) => sgAtoms.indexOf(aid) === -1) >= 0;\n    },\n    queryComponent: (sid: number) => {\n      const sg = struct.sgroups.get(sid);\n      if (sg?.type !== 'queryComponent') return false;\n      const sgAtoms = SGroup.getAtoms(struct, sg);\n\n      return atoms.some((aid) => sgAtoms.includes(aid));\n    },\n  };\n  const sgroups = atoms.reduce((res, aid) => {\n    const atom = struct.atoms.get(aid);\n    return atom ? res.union(atom.sgs) : res;\n  }, new Pile());\n\n  return Array.from(sgroups).some(searchFunction[sGroupType]);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Point, Vec2 } from './vec2';\nimport {\n  BaseMicromoleculeEntity,\n  initiallySelectedType,\n} from 'domain/entities/BaseMicromoleculeEntity';\n\nexport enum SimpleObjectMode {\n  ellipse = 'ellipse',\n  rectangle = 'rectangle',\n  line = 'line',\n}\n\nexport interface SimpleObjectAttributes {\n  mode: SimpleObjectMode;\n  pos?: Array<Point>;\n  initiallySelected?: initiallySelectedType;\n}\n\nexport class SimpleObject extends BaseMicromoleculeEntity {\n  pos: Array<Vec2>;\n  mode: SimpleObjectMode;\n\n  constructor(attributes?: SimpleObjectAttributes) {\n    super(attributes?.initiallySelected);\n    this.pos = [];\n\n    if (attributes?.pos) {\n      for (let i = 0; i < attributes.pos.length; i++) {\n        const currentP = attributes.pos[i];\n        this.pos[i] = currentP ? new Vec2(attributes.pos[i]) : new Vec2();\n      }\n    }\n\n    this.mode = attributes?.mode || SimpleObjectMode.line;\n  }\n\n  clone(): SimpleObject {\n    return new SimpleObject(this);\n  }\n\n  center(): Vec2 {\n    switch (this.mode) {\n      case SimpleObjectMode.rectangle: {\n        return Vec2.centre(this.pos[0], this.pos[1]);\n      }\n      default:\n        return this.pos[0];\n    }\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport class Pool<TValue = any> extends Map<number, TValue> {\n  private nextId = 0;\n\n  add(item: TValue): number {\n    const id = this.nextId++;\n    super.set(id, item);\n    return id;\n  }\n\n  newId(): number {\n    return this.nextId++;\n  }\n\n  keyOf(item: TValue): number | null {\n    for (const [key, value] of this.entries()) {\n      if (value === item) return key;\n    }\n\n    return null;\n  }\n\n  find(predicate: (key: number, value: TValue) => boolean): number | null {\n    for (const [key, value] of this.entries()) {\n      if (predicate(key, value)) return key;\n    }\n\n    return null;\n  }\n\n  filter(predicate: (key: number, value: TValue) => boolean): Pool<TValue> {\n    return new Pool<TValue>(\n      Array.from(this).filter(([key, value]) => predicate(key, value)),\n    );\n  }\n\n  some(predicate: (value: TValue) => boolean): boolean {\n    for (const value of this.values()) {\n      if (predicate(value)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  changeInitiallySelectedPropertiesForPool(invalidate?: boolean): void {\n    this.forEach((value, key) => {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      if (typeof value.resetInitiallySelected === 'function') {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        value.resetInitiallySelected(invalidate);\n        this.set(key, value);\n      }\n    });\n  }\n\n  clone(): Pool<TValue> {\n    const newPool = new Pool<TValue>(this);\n    newPool.nextId = this.nextId;\n    return newPool;\n  }\n}\n","import { Atom, Bond, Neighbor, StereoLabel, Struct } from 'domain/entities';\nimport { StereoValidator } from 'domain/helpers';\n\nexport function getStereoAtomsMap(\n  struct: Struct,\n  bonds: Array<Bond>,\n  bond?: Bond,\n) {\n  const stereoAtomsMap = new Map();\n  const correctAtomIds: Array<number> = [];\n\n  bonds.forEach((bond: Bond | undefined) => {\n    if (bond) {\n      const beginNeighs: Array<Neighbor> | undefined = struct.atomGetNeighbors(\n        bond.begin,\n      );\n      const endNeighs: Array<Neighbor> | undefined = struct.atomGetNeighbors(\n        bond.end,\n      );\n\n      if (\n        StereoValidator.isCorrectStereoCenter(\n          bond,\n          beginNeighs,\n          endNeighs,\n          struct,\n        )\n      ) {\n        const stereoLabel = struct.atoms.get(bond.begin)?.stereoLabel;\n        if (\n          stereoLabel == null ||\n          stereoAtomsMap.get(bond.begin)?.stereoLabel == null\n        ) {\n          stereoAtomsMap.set(bond.begin, {\n            stereoParity: getStereoParity(bond.stereo),\n            stereoLabel: stereoLabel || `${StereoLabel.Abs}`,\n          });\n        }\n        correctAtomIds.push(bond.begin);\n      } else {\n        if (!correctAtomIds.includes(bond.begin)) {\n          stereoAtomsMap.set(bond.begin, {\n            stereoParity: Atom.PATTERN.STEREO_PARITY.NONE,\n            stereoLabel: null,\n          });\n        }\n        if (!correctAtomIds.includes(bond.end)) {\n          stereoAtomsMap.set(bond.end, {\n            stereoParity: Atom.PATTERN.STEREO_PARITY.NONE,\n            stereoLabel: null,\n          });\n        }\n      }\n    }\n  });\n\n  // in case the stereo band is flipped, changed or removed\n  // TODO the duplication of the code below should be fixed, mayby by function\n  if (bond) {\n    if (!correctAtomIds.includes(bond.begin)) {\n      stereoAtomsMap.set(bond.begin, {\n        stereoParity: Atom.PATTERN.STEREO_PARITY.NONE,\n        stereoLabel: null,\n      });\n    }\n    if (!correctAtomIds.includes(bond.end)) {\n      stereoAtomsMap.set(bond.end, {\n        stereoParity: Atom.PATTERN.STEREO_PARITY.NONE,\n        stereoLabel: null,\n      });\n    }\n  }\n\n  return stereoAtomsMap;\n}\n\nfunction getStereoParity(stereo: number): number | null {\n  let newAtomParity: number | null = null;\n  switch (stereo) {\n    case Bond.PATTERN.STEREO.UP:\n      newAtomParity = Atom.PATTERN.STEREO_PARITY.ODD;\n      break;\n    case Bond.PATTERN.STEREO.EITHER:\n      newAtomParity = Atom.PATTERN.STEREO_PARITY.EITHER;\n      break;\n    case Bond.PATTERN.STEREO.DOWN:\n      newAtomParity = Atom.PATTERN.STEREO_PARITY.EVEN;\n      break;\n  }\n  return newAtomParity;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport assert from 'assert';\nimport { Atom, radicalElectrons } from './atom';\nimport { EditorSelection } from 'application/editor';\nimport { Bond } from './bond';\nimport { Box2Abs } from './box2Abs';\nimport { Elements } from 'domain/constants';\nimport { Fragment } from './fragment';\nimport { FunctionalGroup } from './functionalGroup';\nimport { HalfBond } from './halfBond';\nimport { Loop } from './loop';\nimport { Pile } from './pile';\nimport { Pool } from './pool';\nimport { RGroup } from './rgroup';\nimport { RxnArrow } from './rxnArrow';\nimport { RxnPlus } from './rxnPlus';\nimport { SGroup } from './sgroup';\nimport { SGroupForest } from './sgroupForest';\nimport { SimpleObject } from './simpleObject';\nimport { Text } from './text';\nimport { Vec2 } from './vec2';\nimport { Highlight } from './highlight';\nimport { RGroupAttachmentPoint } from './rgroupAttachmentPoint';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\nimport { isNumber } from 'lodash';\nimport { Image } from './image';\nimport { getStereoAtomsMap } from 'application/editor/actions/helpers';\nimport { MultitailArrow } from './multitailArrow';\n\nexport type Neighbor = {\n  aid: number;\n  bid: number;\n};\n\nexport type StructProperty = {\n  key: string;\n  value: string;\n};\n\nfunction arrayAddIfMissing(array, item) {\n  for (let i = 0; i < array.length; ++i) {\n    if (array[i] === item) return false;\n  }\n  array.push(item);\n  return true;\n}\n\nexport class Struct {\n  atoms: Pool<Atom>;\n  bonds: Pool<Bond>;\n  sgroups: Pool<SGroup>;\n  halfBonds: Pool<HalfBond>;\n  loops: Pool<Loop>;\n  isReaction: boolean;\n  rxnArrows: Pool<RxnArrow>;\n  rxnPluses: Pool<RxnPlus>;\n  frags: Pool<Fragment | null>;\n  rgroups: Pool<RGroup>;\n  rgroupAttachmentPoints: Pool<RGroupAttachmentPoint>;\n  name: string;\n  abbreviation?: string;\n  sGroupForest: SGroupForest;\n  simpleObjects: Pool<SimpleObject>;\n  texts: Pool<Text>;\n  functionalGroups: Pool<FunctionalGroup>;\n  highlights: Pool<Highlight>;\n  images = new Pool<Image>();\n  multitailArrows = new Pool<MultitailArrow>();\n\n  constructor() {\n    this.atoms = new Pool<Atom>();\n    this.bonds = new Pool<Bond>();\n    this.sgroups = new Pool<SGroup>();\n    this.halfBonds = new Pool<HalfBond>();\n    this.loops = new Pool<Loop>();\n    this.isReaction = false;\n    this.rxnArrows = new Pool<RxnArrow>();\n    this.rxnPluses = new Pool<RxnPlus>();\n    this.frags = new Pool<Fragment>();\n    this.rgroups = new Pool<RGroup>();\n    this.rgroupAttachmentPoints = new Pool<RGroupAttachmentPoint>();\n    this.name = '';\n    this.abbreviation = '';\n    this.sGroupForest = new SGroupForest();\n    this.simpleObjects = new Pool<SimpleObject>();\n    this.texts = new Pool<Text>();\n    this.functionalGroups = new Pool<FunctionalGroup>();\n    this.highlights = new Pool<Highlight>();\n  }\n\n  hasRxnProps(): boolean {\n    return !!(\n      this.atoms.find((_aid, atom) => atom.hasRxnProps()) ||\n      this.bonds.find((_bid, bond) => bond.hasRxnProps())\n    );\n  }\n\n  hasRxnArrow(): boolean {\n    return this.rxnArrows.size >= 1;\n  }\n\n  hasMultitailArrow(): boolean {\n    return this.multitailArrows.size >= 1;\n  }\n\n  hasRxnPluses(): boolean {\n    return this.rxnPluses.size > 0;\n  }\n\n  isRxn(): boolean {\n    return this.hasRxnArrow() || this.hasRxnPluses();\n  }\n\n  isBlank(): boolean {\n    return (\n      this.atoms.size === 0 &&\n      this.rxnArrows.size === 0 &&\n      this.rxnPluses.size === 0 &&\n      this.simpleObjects.size === 0 &&\n      this.texts.size === 0 &&\n      this.images.size === 0 &&\n      this.multitailArrows.size === 0\n    );\n  }\n\n  isSingleGroup(): boolean {\n    if (!this.sgroups.size || this.sgroups.size > 1) return false;\n    const sgroup = this.sgroups.values().next().value; // get sgroup from map\n    return this.atoms.size === sgroup.atoms.length;\n  }\n\n  clone(\n    atomSet?: Pile<number> | null,\n    bondSet?: Pile<number> | null,\n    dropRxnSymbols?: boolean,\n    aidMap?: Map<number, number> | null,\n    simpleObjectsSet?: Pile<number> | null,\n    textsSet?: Pile<number> | null,\n    rgroupAttachmentPointSet?: Pile<number> | null,\n    imagesSet?: Pile<number> | null,\n    multitailArrowsSet?: Pile<number> | null,\n    bidMap?: Map<number, number> | null,\n  ): Struct {\n    return this.mergeInto(\n      new Struct(),\n      atomSet,\n      bondSet,\n      dropRxnSymbols,\n      false,\n      aidMap,\n      simpleObjectsSet,\n      textsSet,\n      rgroupAttachmentPointSet,\n      imagesSet,\n      multitailArrowsSet,\n      bidMap,\n    );\n  }\n\n  getScaffold(): Struct {\n    const atomSet = new Pile<number>();\n    this.atoms.forEach((_atom, aid) => {\n      atomSet.add(aid);\n    });\n\n    this.rgroups.forEach((rg) => {\n      rg.frags.forEach((_fnum, fid) => {\n        this.atoms.forEach((atom, aid) => {\n          if (atom.fragment === fid) atomSet.delete(aid);\n        });\n      });\n    });\n\n    return this.clone(atomSet);\n  }\n\n  getFragmentIds(_fid: number | number[]): Pile<number> {\n    const atomSet = new Pile<number>();\n    const fid = Array.isArray(_fid) ? _fid : [_fid];\n    this.atoms.forEach((atom, aid) => {\n      if (fid.includes(atom.fragment)) atomSet.add(aid);\n    });\n\n    return atomSet;\n  }\n\n  getFragment(\n    fid: number | number[],\n    copyNonFragmentObjects = true,\n    aidMap?: Map<number, number>,\n  ): Struct {\n    return this.clone(\n      this.getFragmentIds(fid),\n      null,\n      true,\n      aidMap,\n      copyNonFragmentObjects ? undefined : new Pile(),\n      copyNonFragmentObjects ? undefined : new Pile(),\n      copyNonFragmentObjects ? undefined : new Pile(),\n      copyNonFragmentObjects ? undefined : new Pile(),\n      copyNonFragmentObjects ? undefined : new Pile(),\n    );\n  }\n\n  mergeInto(\n    cp: Struct,\n    atomSet?: Pile<number> | null,\n    bondSet?: Pile<number> | null,\n    dropRxnSymbols?: boolean,\n    keepAllRGroups?: boolean,\n    aidMap?: Map<number, number> | null,\n    simpleObjectsSet?: Pile<number> | null,\n    textsSet?: Pile<number> | null,\n    rgroupAttachmentPointSet?: Pile<number> | null,\n    imagesSet?: Pile<number> | null,\n    multitailArrowsSet?: Pile<number> | null,\n    bidMapEntity?: Map<number, number> | null,\n  ): Struct {\n    atomSet = atomSet || new Pile<number>(this.atoms.keys());\n    bondSet = bondSet || new Pile<number>(this.bonds.keys());\n    simpleObjectsSet =\n      simpleObjectsSet || new Pile<number>(this.simpleObjects.keys());\n    textsSet = textsSet || new Pile<number>(this.texts.keys());\n    imagesSet = imagesSet || new Pile<number>(this.images.keys());\n    multitailArrowsSet =\n      multitailArrowsSet || new Pile<number>(this.multitailArrows.keys());\n    rgroupAttachmentPointSet =\n      rgroupAttachmentPointSet ||\n      new Pile<number>(this.rgroupAttachmentPoints.keys());\n    aidMap = aidMap || new Map();\n    const bidMap = bidMapEntity || new Map();\n\n    bondSet = bondSet.filter((bid) => {\n      const bond = this.bonds.get(bid)!;\n      return atomSet!.has(bond.begin) && atomSet!.has(bond.end);\n    });\n\n    const fidMask = new Pile();\n    this.atoms.forEach((atom, aid) => {\n      if (atomSet!.has(aid)) fidMask.add(atom.fragment);\n    });\n\n    const fidMap = new Map();\n    this.frags.forEach((_frag, fid) => {\n      if (fidMask.has(fid)) fidMap.set(fid, cp.frags.add(null));\n    });\n\n    const rgroupsIds: Array<number> = [];\n    this.rgroups.forEach((rgroup, rgid) => {\n      let keepGroup = keepAllRGroups;\n      if (!keepGroup) {\n        rgroup.frags.forEach((_fnum, fid) => {\n          rgroupsIds.push(fid);\n          if (fidMask.has(fid)) keepGroup = true;\n        });\n\n        if (!keepGroup) return;\n      }\n\n      const rg = cp.rgroups.get(rgid);\n      if (rg) {\n        rgroup.frags.forEach((_fnum, fid) => {\n          rgroupsIds.push(fid);\n          if (fidMask.has(fid)) rg.frags.add(fidMap.get(fid));\n        });\n      } else {\n        cp.rgroups.set(rgid, rgroup.clone(fidMap));\n      }\n    });\n    // atoms in not RGroup\n    this.atoms.forEach((atom, aid) => {\n      if (atomSet!.has(aid) && rgroupsIds.indexOf(atom.fragment) === -1) {\n        aidMap!.set(aid, cp.atoms.add(atom.clone(fidMap)));\n      }\n    });\n    // atoms in RGroup\n    this.atoms.forEach((atom, aid) => {\n      if (atomSet!.has(aid) && rgroupsIds.indexOf(atom.fragment) !== -1) {\n        aidMap!.set(aid, cp.atoms.add(atom.clone(fidMap)));\n      }\n    });\n\n    fidMap.forEach((newfid, oldfid) => {\n      const fragment = this.frags.get(oldfid);\n\n      // TODO: delete type check\n      if (fragment && fragment instanceof Fragment) {\n        cp.frags.set(newfid, this.frags.get(oldfid)!.clone(aidMap!)); // clone Fragments\n      }\n    });\n\n    this.bonds.forEach((bond, bid) => {\n      if (bondSet!.has(bid)) bidMap.set(bid, cp.bonds.add(bond.clone(aidMap!)));\n    });\n\n    const sgroupIdMap = {};\n    this.sgroups.forEach((sg, sgroupId) => {\n      if (sg.atoms.some((aid) => !atomSet!.has(aid))) return;\n      const oldSgroup = sg;\n\n      sg =\n        oldSgroup instanceof MonomerMicromolecule\n          ? MonomerMicromolecule.clone(oldSgroup, aidMap!)\n          : SGroup.clone(sg, aidMap!);\n\n      const id = cp.sgroups.add(sg);\n      sg.id = id;\n\n      sgroupIdMap[sgroupId] = id;\n\n      sg.atoms.forEach((aid) => {\n        const atom = cp.atoms.get(aid);\n        if (atom) {\n          atom.sgs.add(id);\n        }\n      });\n\n      if (sg.type === 'DAT') cp.sGroupForest.insert(sg, -1, []);\n      else cp.sGroupForest.insert(sg);\n    });\n\n    this.functionalGroups.forEach((fg) => {\n      if (fg.relatedSGroup.atoms.some((aid) => !atomSet!.has(aid))) return;\n      const sgroup = cp.sgroups.get(sgroupIdMap[fg.relatedSGroupId]);\n      // It is possible that there is no sgroup in case of templates library rendering\n      // Sgroup is deleteing before render to show templates without brackets (see RenderStruct.prepareStruct method)\n      fg = sgroup ? new FunctionalGroup(sgroup) : FunctionalGroup.clone(fg);\n      cp.functionalGroups.add(fg);\n    });\n\n    simpleObjectsSet.forEach((soid) => {\n      cp.simpleObjects.add(this.simpleObjects.get(soid)!.clone());\n    });\n\n    textsSet.forEach((id) => {\n      cp.texts.add(this.texts.get(id)!.clone());\n    });\n\n    imagesSet.forEach((id) => {\n      cp.images.add(this.images.get(id)!.clone());\n    });\n\n    multitailArrowsSet.forEach((id) => {\n      cp.multitailArrows.add(this.multitailArrows.get(id)!.clone());\n    });\n\n    rgroupAttachmentPointSet.forEach((id) => {\n      const rgroupAttachmentPoint = this.rgroupAttachmentPoints.get(id);\n      assert(rgroupAttachmentPoint != null);\n      cp.rgroupAttachmentPoints.add(rgroupAttachmentPoint.clone(aidMap));\n    });\n\n    if (!dropRxnSymbols) {\n      cp.isReaction = this.isReaction;\n      this.rxnArrows.forEach((item) => {\n        cp.rxnArrows.add(item.clone());\n      });\n      this.rxnPluses.forEach((item) => {\n        cp.rxnPluses.add(item.clone());\n      });\n    }\n\n    cp.name = this.name;\n\n    return cp;\n  }\n\n  // NB: this updates the structure without modifying the corresponding ReStruct.\n  //  To be applied to standalone structures only.\n  prepareLoopStructure() {\n    this.initHalfBonds();\n    this.initNeighbors();\n    this.updateHalfBonds(Array.from(this.atoms.keys()));\n    this.sortNeighbors(Array.from(this.atoms.keys()));\n    this.findLoops();\n  }\n\n  atomAddToSGroup(sgid, aid) {\n    // TODO: [MK] make sure the addition does not break the hierarchy?\n    SGroup.addAtom(this.sgroups.get(sgid)!, aid, this);\n    this.atoms.get(aid)!.sgs.add(sgid);\n  }\n\n  calcConn(atom) {\n    let conn = 0;\n    for (let i = 0; i < atom.neighbors.length; ++i) {\n      const hb = this.halfBonds.get(atom.neighbors[i])!;\n      const bond = this.bonds.get(hb.bid)!;\n\n      if (Bond.isBondToHiddenLeavingGroup(this, bond)) {\n        continue;\n      }\n\n      switch (bond.type) {\n        case Bond.PATTERN.TYPE.SINGLE:\n          conn += 1;\n          break;\n        case Bond.PATTERN.TYPE.DOUBLE:\n          conn += 2;\n          break;\n        case Bond.PATTERN.TYPE.TRIPLE:\n          conn += 3;\n          break;\n        case Bond.PATTERN.TYPE.DATIVE:\n          break;\n        case Bond.PATTERN.TYPE.HYDROGEN:\n          break;\n        case Bond.PATTERN.TYPE.AROMATIC:\n          if (atom.neighbors.length === 1) return [-1, true];\n          return [atom.neighbors.length, true];\n        default:\n          return [-1, false];\n      }\n    }\n    return [conn, false];\n  }\n\n  findBondId(begin, end) {\n    return this.bonds.find(\n      (_bid, bond) =>\n        (bond.begin === begin && bond.end === end) ||\n        (bond.begin === end && bond.end === begin),\n    );\n  }\n\n  initNeighbors() {\n    this.atoms.forEach((atom) => {\n      atom.neighbors = [];\n    });\n\n    this.bonds.forEach((bond) => {\n      const a1 = this.atoms.get(bond.begin)!;\n      const a2 = this.atoms.get(bond.end)!;\n      a1.neighbors.push(bond.hb1!);\n      a2.neighbors.push(bond.hb2!);\n    });\n  }\n\n  bondInitHalfBonds(bid, bond?: Bond) {\n    bond = bond || this.bonds.get(bid)!;\n    bond.hb1 = 2 * bid;\n    bond.hb2 = 2 * bid + 1; // eslint-disable-line no-mixed-operators\n    this.halfBonds.set(bond.hb1, new HalfBond(bond.begin, bond.end, bid));\n    this.halfBonds.set(bond.hb2, new HalfBond(bond.end, bond.begin, bid));\n    const hb1 = this.halfBonds.get(bond.hb1)!;\n    const hb2 = this.halfBonds.get(bond.hb2)!;\n    hb1.contra = bond.hb2;\n    hb2.contra = bond.hb1;\n  }\n\n  halfBondUpdate(halfBondId: number) {\n    const halfBond = this.halfBonds.get(halfBondId)!;\n    const sgroup1 = this.getGroupFromAtomId(halfBond.begin);\n    const sgroup2 = this.getGroupFromAtomId(halfBond.end);\n\n    let startCoords: Vec2;\n    let endCoords: Vec2;\n\n    if (sgroup1 instanceof MonomerMicromolecule && sgroup1 !== sgroup2) {\n      startCoords = sgroup1.isContracted()\n        ? (sgroup1.pp as Vec2)\n        : this.atoms.get(halfBond.begin)!.pp;\n    } else {\n      startCoords = this.atoms.get(halfBond.begin)!.pp;\n    }\n\n    if (sgroup2 instanceof MonomerMicromolecule && sgroup1 !== sgroup2) {\n      endCoords = sgroup2.isContracted()\n        ? (sgroup2.pp as Vec2)\n        : this.atoms.get(halfBond.end)!.pp;\n    } else {\n      endCoords = this.atoms.get(halfBond.end)!.pp;\n    }\n\n    const coordsDifference = Vec2.diff(endCoords, startCoords).normalized();\n\n    halfBond.dir =\n      Vec2.dist(endCoords, startCoords) > 1e-4\n        ? coordsDifference\n        : new Vec2(1, 0);\n    halfBond.norm = halfBond.dir.turnLeft();\n    halfBond.ang = halfBond.dir.oxAngle();\n    if (halfBond.loop < 0) halfBond.loop = -1;\n  }\n\n  initHalfBonds() {\n    this.halfBonds.clear();\n    this.bonds.forEach((bond, bid) => {\n      this.bondInitHalfBonds(bid, bond);\n    });\n  }\n\n  setHbNext(hbid, next) {\n    this.halfBonds.get(this.halfBonds.get(hbid)!.contra)!.next = next;\n  }\n\n  halfBondSetAngle(hbid, left) {\n    const hb = this.halfBonds.get(hbid)!;\n    const hbl = this.halfBonds.get(left)!;\n\n    hbl.rightCos = Vec2.dot(hbl.dir, hb.dir);\n    hb.leftCos = Vec2.dot(hbl.dir, hb.dir);\n\n    hbl.rightSin = Vec2.cross(hbl.dir, hb.dir);\n    hb.leftSin = Vec2.cross(hbl.dir, hb.dir);\n\n    hb.leftNeighbor = left;\n    hbl.rightNeighbor = hbid;\n  }\n\n  atomAddNeighbor(hbid) {\n    const hb = this.halfBonds.get(hbid)!;\n    const atom = this.atoms.get(hb.begin)!;\n\n    let i;\n    for (i = 0; i < atom.neighbors.length; ++i) {\n      if (this.halfBonds.get(atom.neighbors[i])!.ang > hb.ang) break;\n    }\n    atom.neighbors.splice(i, 0, hbid);\n    const ir = atom.neighbors[(i + 1) % atom.neighbors.length];\n    const il =\n      atom.neighbors[(i + atom.neighbors.length - 1) % atom.neighbors.length];\n    this.setHbNext(il, hbid);\n    this.setHbNext(hbid, ir);\n    this.halfBondSetAngle(hbid, il);\n    this.halfBondSetAngle(ir, hbid);\n  }\n\n  atomSortNeighbors(aid) {\n    const atom = this.atoms.get(aid)!;\n    const halfBonds = this.halfBonds;\n\n    atom.neighbors\n      .sort((nei, nei2) => halfBonds.get(nei)!.ang - halfBonds.get(nei2)!.ang)\n      .forEach((nei, i) => {\n        const nextNei = atom.neighbors[(i + 1) % atom.neighbors.length];\n        this.halfBonds.get(this.halfBonds.get(nei)!.contra)!.next = nextNei;\n        this.halfBondSetAngle(nextNei, nei);\n      });\n  }\n\n  sortNeighbors(list) {\n    if (!list) {\n      this.atoms.forEach((_atom, aid) => {\n        this.atomSortNeighbors(aid);\n      });\n    } else {\n      list.forEach((aid) => {\n        this.atomSortNeighbors(aid);\n      });\n    }\n  }\n\n  atomUpdateHalfBonds(atomId: number) {\n    this.atoms.get(atomId)!.neighbors.forEach((hbid) => {\n      this.halfBondUpdate(hbid);\n      this.halfBondUpdate(this.halfBonds.get(hbid)!.contra);\n    });\n  }\n\n  updateHalfBonds(list) {\n    if (!list) {\n      this.atoms.forEach((_atom, atomId) => {\n        this.atomUpdateHalfBonds(atomId);\n      });\n    } else {\n      list.forEach((atomId) => {\n        this.atomUpdateHalfBonds(atomId);\n      });\n    }\n  }\n\n  sGroupsRecalcCrossBonds() {\n    this.sgroups.forEach((sg) => {\n      sg.xBonds = [];\n      sg.neiAtoms = [];\n    });\n\n    this.bonds.forEach((bond, bid) => {\n      const a1 = this.atoms.get(bond.begin)!;\n      const a2 = this.atoms.get(bond.end)!;\n\n      a1.sgs.forEach((sgid) => {\n        if (!a2.sgs.has(sgid)) {\n          const sg = this.sgroups.get(sgid)!;\n          sg.xBonds.push(bid);\n          arrayAddIfMissing(sg.neiAtoms, bond.end);\n        }\n      });\n\n      a2.sgs.forEach((sgid) => {\n        if (!a1.sgs.has(sgid)) {\n          const sg = this.sgroups.get(sgid)!;\n          sg.xBonds.push(bid);\n          arrayAddIfMissing(sg.neiAtoms, bond.begin);\n        }\n      });\n    });\n  }\n\n  sGroupDelete(sgid: number) {\n    this.sgroups.get(sgid)!.atoms.forEach((atom) => {\n      this.atoms.get(atom)!.sgs.delete(sgid);\n    });\n\n    this.sGroupForest.remove(sgid);\n    this.sgroups.delete(sgid);\n  }\n\n  atomSetPos(id: number, pp: Vec2): void {\n    const item = this.atoms.get(id)!;\n    item.pp = pp;\n  }\n\n  rxnPlusSetPos(id: number, pp: Vec2): void {\n    const item = this.rxnPluses.get(id)!;\n    item.pp = pp;\n  }\n\n  rxnArrowSetPos(id: number, pos: Array<Vec2>): void {\n    const item = this.rxnArrows.get(id);\n    if (item) {\n      item.pos = pos;\n    }\n  }\n\n  simpleObjectSetPos(id: number, pos: Array<Vec2>) {\n    const item = this.simpleObjects.get(id)!;\n    item.pos = pos;\n  }\n\n  textSetPosition(id: number, position: Vec2): void {\n    const item = this.texts.get(id);\n\n    if (item) {\n      item.position = position;\n    }\n  }\n\n  getCoordBoundingBox(atomSet?: Pile<number>) {\n    let bb: any = null;\n    function extend(pp) {\n      if (!bb) {\n        bb = {\n          min: pp,\n          max: pp,\n        };\n      } else {\n        if (pp instanceof Array) {\n          pp.forEach((vec) => {\n            bb.min = Vec2.min(bb.min, vec);\n            bb.max = Vec2.max(bb.max, vec);\n          });\n        } else {\n          bb.min = Vec2.min(bb.min, pp);\n          bb.max = Vec2.max(bb.max, pp);\n        }\n      }\n    }\n\n    const global = !atomSet || atomSet.size === 0;\n\n    this.atoms.forEach((atom, aid) => {\n      if (global || atomSet!.has(aid)) extend(atom.pp);\n    });\n    if (global) {\n      this.rxnPluses.forEach((item) => {\n        extend(item.pp);\n      });\n      this.rxnArrows.forEach((item) => {\n        extend(item.pos);\n      });\n      this.simpleObjects.forEach((item) => {\n        extend(item.pos);\n      });\n      this.texts.forEach((item) => {\n        extend(item.position);\n      });\n    }\n    if (!bb && global) {\n      bb = {\n        min: new Vec2(0, 0),\n        max: new Vec2(1, 1),\n      };\n    }\n    return bb;\n  }\n\n  getCoordBoundingBoxObj() {\n    let bb: any = null;\n    function extend(pp) {\n      if (!bb) {\n        bb = {\n          min: new Vec2(pp),\n          max: new Vec2(pp),\n        };\n      } else {\n        bb.min = Vec2.min(bb.min, pp);\n        bb.max = Vec2.max(bb.max, pp);\n      }\n    }\n\n    this.atoms.forEach((atom) => {\n      extend(atom.pp);\n    });\n    return bb;\n  }\n\n  getBondLengthData() {\n    let totalLength = 0;\n    let cnt = 0;\n    this.bonds.forEach((bond) => {\n      totalLength += Vec2.dist(\n        this.atoms.get(bond.begin)!.pp,\n        this.atoms.get(bond.end)!.pp,\n      );\n      cnt++;\n    });\n    return { cnt, totalLength };\n  }\n\n  getAvgBondLength(): number {\n    const bld = this.getBondLengthData();\n    return bld.cnt > 0 ? bld.totalLength / bld.cnt : -1;\n  }\n\n  getAvgClosestAtomDistance(): number {\n    let totalDist = 0;\n    let minDist;\n    let dist = 0;\n    const keys = Array.from(this.atoms.keys());\n    let k;\n    let j;\n    for (k = 0; k < keys.length; ++k) {\n      minDist = -1;\n      for (j = 0; j < keys.length; ++j) {\n        if (j === k) continue; // eslint-disable-line no-continue\n        dist = Vec2.dist(\n          this.atoms.get(keys[j])!.pp,\n          this.atoms.get(keys[k])!.pp,\n        );\n        if (minDist < 0 || minDist > dist) minDist = dist;\n      }\n      totalDist += minDist;\n    }\n\n    return keys.length > 0 ? totalDist / keys.length : -1;\n  }\n\n  checkBondExists(begin: number, end: number): boolean {\n    const key = this.bonds.find(\n      (_bid, bond) =>\n        (bond.begin === begin && bond.end === end) ||\n        (bond.end === begin && bond.begin === end),\n    );\n\n    return key !== undefined;\n  }\n\n  findConnectedComponent(firstaid: number): Pile<number> {\n    const list = [firstaid];\n    const ids = new Pile<number>();\n    while (list.length > 0) {\n      const aid = list.pop()!;\n      ids.add(aid);\n      const atom = this.atoms.get(aid)!;\n      atom.neighbors.forEach((nei) => {\n        const neiId = this.halfBonds.get(nei)!.end;\n        if (!ids.has(neiId)) list.push(neiId);\n      });\n    }\n\n    return ids;\n  }\n\n  findConnectedComponents(discardExistingFragments?: boolean) {\n    // NB: this is a hack\n    // TODO: need to maintain half-bond and neighbor structure permanently\n    if (!this.halfBonds.size) {\n      this.initHalfBonds();\n      this.initNeighbors();\n      this.updateHalfBonds(Array.from(this.atoms.keys()));\n      this.sortNeighbors(Array.from(this.atoms.keys()));\n    }\n\n    let addedAtoms = new Pile<number>();\n\n    const components: Array<any> = [];\n    this.atoms.forEach((atom, aid) => {\n      if (\n        (discardExistingFragments || atom.fragment < 0) &&\n        !addedAtoms.has(aid)\n      ) {\n        const component = this.findConnectedComponent(aid);\n        components.push(component);\n        addedAtoms = addedAtoms.union(component);\n      }\n    });\n\n    return components;\n  }\n\n  markFragment(idSet: Pile<number>, properties: [StructProperty]) {\n    const frag = new Fragment([], undefined, properties);\n    const fid = this.frags.add(frag);\n\n    idSet.forEach((aid) => {\n      const atom = this.atoms.get(aid)!;\n      if (atom.stereoLabel) frag.updateStereoAtom(this, aid, fid, true);\n      atom.fragment = fid;\n    });\n  }\n\n  markFragments(properties?) {\n    const components = this.findConnectedComponents();\n    components.forEach((comp) => {\n      const [firstAtom] = comp;\n      const sgroup = this.getGroupFromAtomId(firstAtom);\n      if (sgroup instanceof MonomerMicromolecule) {\n        return;\n      }\n      this.markFragment(comp, properties);\n    });\n  }\n\n  scale(scale: number) {\n    if (scale === 1) return;\n\n    this.atoms.forEach((atom) => {\n      atom.pp = atom.pp.scaled(scale);\n    });\n\n    this.rxnPluses.forEach((item) => {\n      item.pp = item.pp.scaled(scale);\n    });\n\n    this.rxnArrows.forEach((item) => {\n      item.pos = item.pos.map((p) => p.scaled(scale));\n    });\n\n    this.sgroups.forEach((item) => {\n      if (item instanceof MonomerMicromolecule) {\n        return;\n      }\n      item.pp = item.pp ? item.pp.scaled(scale) : null;\n    });\n\n    this.texts.forEach((item) => {\n      item.pos = item.pos.map((p) => p.scaled(scale));\n      item.position = item.position.scaled(scale);\n    });\n\n    this.simpleObjects.forEach((simpleObjects) => {\n      simpleObjects.pos = simpleObjects.pos.map((p) => p.scaled(scale));\n    });\n\n    this.images.forEach((image) => image.rescaleSize(scale));\n    this.multitailArrows.forEach((multitailArrow) =>\n      multitailArrow.rescaleSize(scale),\n    );\n  }\n\n  rescale() {\n    let avg = this.getAvgBondLength();\n    if (avg <= 0) {\n      return;\n    }\n    if (avg < 1e-3) avg = 1;\n\n    const scale = 1 / avg;\n    this.scale(scale);\n  }\n\n  loopHasSelfIntersections(hbs: Array<number>) {\n    for (let i = 0; i < hbs.length; ++i) {\n      const hbi = this.halfBonds.get(hbs[i])!;\n      const ai = this.atoms.get(hbi.begin)!.pp;\n      const bi = this.atoms.get(hbi.end)!.pp;\n      const set = new Pile([hbi.begin, hbi.end]);\n\n      for (let j = i + 2; j < hbs.length; ++j) {\n        const hbj = this.halfBonds.get(hbs[j])!;\n        if (set.has(hbj.begin) || set.has(hbj.end)) continue; // skip edges sharing an atom\n\n        const aj = this.atoms.get(hbj.begin)!.pp;\n        const bj = this.atoms.get(hbj.end)!.pp;\n\n        if (Box2Abs.segmentIntersection(ai, bi, aj, bj)) return true;\n      }\n    }\n\n    return false;\n  }\n\n  // partition a cycle into simple cycles\n  // TODO: [MK] rewrite the detection algorithm to only find simple ones right away?\n  partitionLoop(loop: any) {\n    // eslint-disable-line max-statements\n    const subloops: Array<any> = [];\n    let continueFlag = true;\n    while (continueFlag) {\n      const atomToHalfBond = {}; // map from every atom in the loop to the index of the first half-bond starting from that atom in the uniqHb array\n      continueFlag = false;\n\n      for (let l = 0; l < loop.length; ++l) {\n        const hbid = loop[l];\n        const aid1 = this.halfBonds.get(hbid)!.begin;\n        const aid2 = this.halfBonds.get(hbid)!.end;\n        if (aid2 in atomToHalfBond) {\n          // subloop found\n          const s = atomToHalfBond[aid2]; // where the subloop begins\n          const subloop = loop.slice(s, l + 1);\n          subloops.push(subloop);\n          if (l < loop.length) {\n            // remove half-bonds corresponding to the subloop\n            loop.splice(s, l - s + 1);\n          }\n          continueFlag = true;\n          break;\n        }\n        atomToHalfBond[aid1] = l;\n      }\n      if (!continueFlag) subloops.push(loop); // we're done, no more subloops found\n    }\n    return subloops;\n  }\n\n  halfBondAngle(hbid1: number, hbid2: number): number {\n    const hba = this.halfBonds.get(hbid1)!;\n    const hbb = this.halfBonds.get(hbid2)!;\n    return Math.atan2(Vec2.cross(hba.dir, hbb.dir), Vec2.dot(hba.dir, hbb.dir));\n  }\n\n  loopIsConvex(loop: Array<any>): boolean {\n    return loop.every((item, k, loopArr) => {\n      const angle = this.halfBondAngle(item, loopArr[(k + 1) % loopArr.length]);\n      return angle <= 0;\n    });\n  }\n\n  // check whether a loop is on the inner or outer side of the polygon\n  //  by measuring the total angle between bonds\n  loopIsInner(loop: Array<any>): boolean {\n    let totalAngle = 2 * Math.PI;\n    loop.forEach((hbida, k, loopArr) => {\n      const hbidb = loopArr[(k + 1) % loopArr.length];\n      const hbb = this.halfBonds.get(hbidb)!;\n      const angle = this.halfBondAngle(hbida, hbidb);\n      totalAngle += hbb.contra === hbida ? Math.PI : angle; // back and forth along the same edge\n    });\n    return Math.abs(totalAngle) < Math.PI;\n  }\n\n  findLoops() {\n    const newLoops: Array<any> = [];\n    const bondsToMark = new Pile<number>();\n\n    /*\n      Starting from each half-bond not known to be in a loop yet,\n      follow the 'next' links until the initial half-bond is reached or\n      the length of the sequence exceeds the number of half-bonds available.\n      In a planar graph, as long as every bond is a part of some \"loop\" -\n      either an outer or an inner one - every iteration either yields a loop\n      or doesn't start at all. Thus this has linear complexity in the number\n      of bonds for planar graphs.\n   */\n\n    let hbIdNext, c, loop;\n    this.halfBonds.forEach((hb, hbId) => {\n      if (hb.loop !== -1) return;\n\n      for (\n        hbIdNext = hbId, c = 0, loop = [];\n        c <= this.halfBonds.size;\n        hbIdNext = this.halfBonds.get(hbIdNext)!.next, ++c\n      ) {\n        if (!(c > 0 && hbIdNext === hbId)) {\n          loop.push(hbIdNext);\n          continue; // eslint-disable-line no-continue\n        }\n\n        // loop found\n        const subloops = this.partitionLoop(loop);\n        subloops.forEach((loop) => {\n          let loopId;\n          if (this.loopIsInner(loop) && !this.loopHasSelfIntersections(loop)) {\n            /*\n                        loop is internal\n                        use lowest half-bond id in the loop as the loop id\n                        this ensures that the loop gets the same id if it is discarded and then recreated,\n                        which in turn is required to enable redrawing while dragging, as actions store item id's\n                     */\n            loopId = Math.min(...loop);\n            this.loops.set(\n              loopId,\n              new Loop(loop, this, this.loopIsConvex(loop)),\n            );\n          } else {\n            loopId = -2;\n          }\n\n          loop.forEach((hbid) => {\n            this.halfBonds.get(hbid)!.loop = loopId;\n            bondsToMark.add(this.halfBonds.get(hbid)!.bid);\n          });\n\n          if (loopId >= 0) newLoops.push(loopId);\n        });\n        break;\n      }\n    });\n\n    return {\n      newLoops,\n      bondsToMark: Array.from(bondsToMark),\n    };\n  }\n\n  calcImplicitHydrogen(aid: number) {\n    if (Atom.isHiddenLeavingGroupAtom(this, aid)) {\n      return;\n    }\n\n    const atom = this.atoms.get(aid)!;\n    const charge = atom.charge || 0;\n    const [conn, isAromatic] = this.calcConn(atom);\n    let correctConn = conn;\n    atom.badConn = false;\n\n    if (isAromatic) {\n      if (atom.label === 'C' && charge === 0) {\n        if (conn === 3) {\n          atom.implicitH = -radicalElectrons(atom.radical);\n          return;\n        }\n        if (conn === 2) {\n          atom.implicitH = 1 - radicalElectrons(atom.radical);\n          return;\n        }\n      } else if (\n        (atom.label === 'O' && charge === 0) ||\n        (atom.label === 'N' && charge === 0 && conn === 3) ||\n        (atom.label === 'N' && charge === 1 && conn === 3) ||\n        (atom.label === 'S' && charge === 0 && conn === 3) ||\n        !atom.implicitH\n      ) {\n        atom.implicitH = 0;\n        return;\n      } else if (!atom.hasImplicitH) {\n        correctConn++;\n      }\n    }\n\n    if (correctConn < 0 || atom.isQuery() || atom.attachmentPoints) {\n      atom.implicitH = 0;\n      return;\n    }\n\n    if (atom.explicitValence >= 0) {\n      const elem = Elements.get(atom.label);\n      atom.implicitH = elem\n        ? atom.explicitValence - atom.calcValenceMinusHyd(correctConn)\n        : 0;\n      if (atom.implicitH < 0) {\n        atom.implicitH = 0;\n        atom.badConn = true;\n      }\n    } else {\n      atom.calcValence(correctConn);\n    }\n  }\n\n  setImplicitHydrogen(list?: Array<number>) {\n    this.sgroups.forEach((item) => {\n      if (item.data.fieldName === 'MRV_IMPLICIT_H') {\n        this.atoms.get(item.atoms[0])!.hasImplicitH = true;\n      }\n    });\n\n    if (!list) {\n      this.atoms.forEach((_atom, aid) => {\n        this.calcImplicitHydrogen(aid);\n      });\n    } else {\n      list.forEach((aid) => {\n        if (this.atoms.get(aid)) {\n          this.calcImplicitHydrogen(aid);\n        }\n      });\n    }\n  }\n\n  public setStereoLabelsToAtoms() {\n    const stereAtomsMap = getStereoAtomsMap(\n      this,\n      Array.from(this.bonds.values()),\n    );\n\n    this.atoms.forEach((atom, id) => {\n      if (this?.atomGetNeighbors(id)?.length === 0) {\n        atom.stereoLabel = null;\n        atom.stereoParity = 0;\n      } else {\n        const stereoProp = stereAtomsMap.get(id);\n        if (stereoProp) {\n          atom.stereoLabel = stereoProp.stereoLabel;\n          atom.stereoParity = stereoProp.stereoParity;\n        }\n      }\n    });\n  }\n\n  atomGetNeighbors(aid: number): Array<Neighbor> | undefined {\n    return this.atoms.get(aid)?.neighbors.map((nei) => {\n      const hb = this.halfBonds.get(nei)!;\n      return {\n        aid: hb.end,\n        bid: hb.bid,\n      };\n    });\n  }\n\n  getComponents() {\n    // eslint-disable-line max-statements\n    /* saver */\n    const connectedComponents = this.findConnectedComponents(true);\n    const barriers: Array<any> = [];\n    let arrowPos: number | null = null;\n\n    this.rxnArrows.forEach((item) => {\n      // there's just one arrow\n      arrowPos = item.center().x;\n    });\n\n    this.rxnPluses.forEach((item) => {\n      barriers.push(item.pp.x);\n    });\n\n    if (arrowPos !== null) barriers.push(arrowPos);\n\n    barriers.sort((a, b) => a - b);\n\n    const components: Array<any> = [];\n\n    connectedComponents.forEach((component) => {\n      const bb = this.getCoordBoundingBox(component);\n      const c = Vec2.lc2(bb.min, 0.5, bb.max, 0.5);\n      let j = 0;\n\n      while (c.x > barriers[j]) ++j;\n\n      components[j] = components[j] || new Pile();\n      components[j] = components[j].union(component);\n    });\n\n    const submolTexts: Array<string> = [];\n    const reactants: Array<any> = [];\n    const products: Array<any> = [];\n\n    components.forEach((component) => {\n      if (!component) {\n        submolTexts.push('');\n        return;\n      }\n\n      const rxnFragmentType = this.defineRxnFragmentTypeForAtomset(\n        component,\n        arrowPos || 0,\n      );\n\n      if (rxnFragmentType === 1) reactants.push(component);\n      else products.push(component);\n    });\n\n    return {\n      reactants,\n      products,\n    };\n  }\n\n  defineRxnFragmentTypeForAtomset(atomset: Pile<number>, arrowpos: number) {\n    const bb = this.getCoordBoundingBox(atomset);\n    const c = Vec2.lc2(bb.min, 0.5, bb.max, 0.5);\n    return c.x < arrowpos ? 1 : 2;\n  }\n\n  getBondFragment(bid: number) {\n    const aid = this.bonds.get(bid)?.begin;\n    return aid && this.atoms.get(aid)?.fragment;\n  }\n\n  bindSGroupsToFunctionalGroups() {\n    this.sgroups.forEach((sgroup) => {\n      if (\n        FunctionalGroup.isFunctionalGroup(sgroup) ||\n        SGroup.isSuperAtom(sgroup)\n      ) {\n        this.functionalGroups.add(new FunctionalGroup(sgroup));\n      }\n    });\n  }\n\n  getGroupIdFromAtomId(atomId: number): number | null {\n    for (const [groupId, sgroup] of Array.from(this.sgroups)) {\n      if (sgroup.atoms.includes(atomId)) return groupId;\n    }\n    return null;\n  }\n\n  getGroupFromAtomId(atomId: number | undefined): SGroup | undefined {\n    const sgroupId = this.getGroupIdFromAtomId(atomId as number);\n    return this.sgroups?.get(sgroupId as number);\n  }\n\n  // TODO: simplify if bonds ids ever appear in sgroup\n  // ! deprecate\n  getGroupIdFromBondId(bondId: number): number | null {\n    const bond = this.bonds.get(bondId);\n    if (!bond) return null;\n    for (const [groupId, sgroup] of Array.from(this.sgroups)) {\n      if (\n        sgroup.atoms.includes(bond.begin) ||\n        sgroup.atoms.includes(bond.end)\n      ) {\n        return groupId;\n      }\n    }\n    return null;\n  }\n\n  getGroupFromBondId(atomId: number): SGroup | undefined {\n    const sgroupId = this.getGroupIdFromBondId(atomId);\n\n    if (!isNumber(sgroupId)) {\n      return;\n    }\n\n    return this.sgroups?.get(sgroupId as number);\n  }\n\n  getGroupsIdsFromBondId(bondId: number): number[] {\n    const bond = this.bonds.get(bondId);\n    if (!bond) return [];\n\n    const groupsIds: number[] = [];\n\n    for (const [groupId, sgroup] of Array.from(this.sgroups)) {\n      if (\n        sgroup.atoms.includes(bond.begin) ||\n        sgroup.atoms.includes(bond.end)\n      ) {\n        groupsIds.push(groupId);\n      }\n    }\n    return groupsIds;\n  }\n\n  getBondIdByHalfBond(halfBondId: number) {\n    const halfBond = this.halfBonds.get(halfBondId);\n    if (halfBond) {\n      return halfBond.bid;\n    }\n    return undefined;\n  }\n\n  /**\n   * @returns visibleAtoms = selected atoms\n   *                       - atoms in contracted functional groups\n   *                       + functional groups's attachment atoms\n   */\n  getSelectedVisibleAtoms(selection: EditorSelection | null) {\n    return (\n      selection?.atoms?.filter((atomId) => {\n        const atom = this.atoms.get(atomId);\n        if (!atom) {\n          return false;\n        }\n        const isAtomNotInContractedGroup =\n          !FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atom,\n            this.sgroups,\n            this.functionalGroups,\n            false,\n          );\n        if (isAtomNotInContractedGroup) {\n          return true;\n        }\n        const groupId = this.getGroupIdFromAtomId(atomId);\n        const sgroup = this.sgroups.get(groupId as number);\n        return sgroup?.getAttachmentAtomId() === atomId;\n      }) || []\n    );\n  }\n\n  getRGroupAttachmentPointsByAtomId(atomId: number) {\n    const rgroupAttachmentPoints = this.rgroupAttachmentPoints.filter(\n      (_id, attachmentPoint) => attachmentPoint.atomId === atomId,\n    );\n    return [...rgroupAttachmentPoints.keys()];\n  }\n\n  isAtomFromMacromolecule(atomId: number) {\n    const sgroup = this.getGroupFromAtomId(atomId);\n    return sgroup instanceof MonomerMicromolecule;\n  }\n\n  isBondFromMacromolecule(bondOrBondId: Bond | number) {\n    const bond =\n      bondOrBondId instanceof Bond\n        ? bondOrBondId\n        : this.bonds.get(bondOrBondId);\n\n    assert(bond);\n\n    return (\n      this.isAtomFromMacromolecule(bond.begin) ||\n      this.isAtomFromMacromolecule(bond.end)\n    );\n  }\n\n  isFunctionalGroupFromMacromolecule(functionalGroupId: number) {\n    const functionalGroup = this.functionalGroups.get(functionalGroupId);\n\n    return functionalGroup?.relatedSGroup instanceof MonomerMicromolecule;\n  }\n\n  isTargetFromMacromolecule(target?: { id: number; map: string } | null) {\n    return (\n      target &&\n      ((target.map === 'functionalGroups' &&\n        this.isFunctionalGroupFromMacromolecule(target.id)) ||\n        (target.map === 'atoms' && this.isAtomFromMacromolecule(target.id)) ||\n        (target.map === 'bonds' && this.isBondFromMacromolecule(target.id)))\n    );\n  }\n\n  disableInitiallySelected(): void {\n    // Those fields are used only in serialization/deserialization phase\n    // so we are disabling them to avoid confusion\n    this.atoms.changeInitiallySelectedPropertiesForPool(true);\n    this.bonds.changeInitiallySelectedPropertiesForPool(true);\n    this.rxnPluses.changeInitiallySelectedPropertiesForPool(true);\n    this.rxnArrows.changeInitiallySelectedPropertiesForPool(true);\n    this.texts.changeInitiallySelectedPropertiesForPool(true);\n  }\n\n  enableInitiallySelected(): void {\n    this.atoms.changeInitiallySelectedPropertiesForPool();\n    this.bonds.changeInitiallySelectedPropertiesForPool();\n    this.rxnPluses.changeInitiallySelectedPropertiesForPool();\n    this.rxnArrows.changeInitiallySelectedPropertiesForPool();\n    this.texts.changeInitiallySelectedPropertiesForPool();\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Vec2, Point } from './vec2';\nimport {\n  BaseMicromoleculeEntity,\n  initiallySelectedType,\n} from 'domain/entities/BaseMicromoleculeEntity';\n\n// TODO: move to infrastructure\nexport enum TextCommand {\n  Bold = 'BOLD',\n  Italic = 'ITALIC',\n  Subscript = 'SUBSCRIPT',\n  Superscript = 'SUPERSCRIPT',\n  FontSize = 'CUSTOM_FONT_SIZE',\n}\n\nexport interface TextAttributes {\n  // TODO: add Interface for content type\n  content: string;\n  position: Point;\n  pos: Array<Point>;\n  initiallySelected?: initiallySelectedType;\n}\n\nfunction preparePositions(positions?: Array<Point>) {\n  if (!positions || !positions.length) {\n    return [new Vec2(), new Vec2(), new Vec2(), new Vec2()];\n  }\n\n  return positions.map((position) => new Vec2(position));\n}\n\nexport class Text extends BaseMicromoleculeEntity {\n  content: string;\n  position: Vec2;\n  pos: Array<Vec2>;\n\n  constructor(attributes?: TextAttributes) {\n    super(attributes?.initiallySelected);\n    this.pos = preparePositions(attributes?.pos);\n    this.content = attributes?.content || '';\n    this.position = attributes?.position\n      ? new Vec2(attributes.position)\n      : new Vec2();\n  }\n\n  setPos(coords: Array<Vec2>): void {\n    this.pos = coords || [];\n  }\n\n  clone(): Text {\n    return new Text(this);\n  }\n}\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Vec2, Axis, Axises, Struct } from 'domain/entities';\nimport { cloneDeepWith, cloneDeep } from 'lodash';\nimport { EditorSelection } from 'application/editor';\n\nconst customizer = (value: any) => {\n  if (typeof value === 'object' && value.y) {\n    const clonedValue = cloneDeep(value);\n    clonedValue.y = -clonedValue.y;\n    return clonedValue;\n  }\n};\n\nexport const getNodeWithInvertedYCoord = <T>(node: T): T =>\n  cloneDeepWith(node, customizer);\n\nexport const setMonomerTemplatePrefix = (templateName: string) =>\n  `monomerTemplate-${templateName}`;\nexport const setMonomerPrefix = (monomerId: number) => `monomer${monomerId}`;\n\nexport const setAmbiguousMonomerTemplatePrefix = (templateName: string) =>\n  `ambiguousMonomerTemplate-${templateName}`;\n\nexport const setAmbiguousMonomerPrefix = (monomerId: number) =>\n  `ambiguousMonomer${monomerId}`;\n\nexport const getKetRef = (entityId: string) => {\n  return { $ref: entityId };\n};\n\nconst rotateCoordAxisBy180Degrees = (position: Vec2, axis: Axises): Vec2 => {\n  const rotatedPosition = {\n    x: position.x,\n    y: position.y,\n    z: position.z,\n  };\n\n  rotatedPosition[axis] = -rotatedPosition[axis];\n\n  return new Vec2(rotatedPosition.x, rotatedPosition.y, rotatedPosition.z);\n};\n\n/**\n *\n * System coordinates for browser and for chemistry files format (mol, ket, etc.) area are different.\n * It needs to rotate them by 180 degrees in y-axis.\n *\n * @param position - coordinates of the structure\n *\n */\nexport const switchIntoChemistryCoordSystem = (position: Vec2) => {\n  return rotateCoordAxisBy180Degrees(position, Axis.y);\n};\n\nexport const populateStructWithSelection = (\n  populatedStruct: Struct,\n  selection?: EditorSelection,\n) => {\n  if (!selection) {\n    return populatedStruct;\n  }\n  Object.keys(selection).forEach((entity) => {\n    const selectedEntities = selection[entity];\n    populatedStruct[entity]?.forEach((value, key) => {\n      if (typeof value.setInitiallySelected === 'function') {\n        value.setInitiallySelected(selectedEntities.includes(key) || undefined);\n      }\n    });\n  });\n  return populatedStruct;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { getNodeWithInvertedYCoord } from '../helpers';\n\nexport function arrowToKet(arrowNode) {\n  return {\n    type: 'arrow',\n    data: getNodeWithInvertedYCoord(arrowNode.data),\n    selected: arrowNode.selected,\n  };\n}\n\nexport function plusToKet(plusNode) {\n  const coord = plusNode.center;\n  return {\n    type: 'plus',\n    location: [coord.x, -coord.y, coord.z],\n    prop: plusNode.data,\n    selected: plusNode.selected,\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Struct } from 'domain/entities';\nimport { ifDef } from 'utilities';\n\nexport function headerToKet(struct: Struct): any {\n  const header = {};\n\n  ifDef(header, 'moleculeName', struct.name, '');\n  ifDef(header, 'creatorProgram', null, '');\n  ifDef(header, 'comment', null, '');\n\n  return Object.keys(header).length !== 0 ? header : null;\n}\n","const editorSettings = {\n  microModeScale: 40, // Angstroms To Pixels Factor\n  macroModeScale: 40, // Angstroms To Pixels Factor\n};\n\nexport function provideEditorSettings() {\n  return editorSettings;\n}\n","export const canvasSelector = '#polymer-editor-canvas';\nexport const drawnStructuresSelector = '.drawn-structures';\n","import _ from 'lodash';\n\nexport const notifyRenderComplete = _.debounce(() => {\n  const event = new Event('renderComplete');\n  window.dispatchEvent(event);\n}, 750);\n\nexport const notifyItemsToMergeInitializationComplete = () => {\n  const event = new Event('itemsToMergeInitializationComplete');\n  window.dispatchEvent(event);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { zoom, select, ZoomTransform, ZoomBehavior, drag } from 'd3';\nimport { BaseTool } from 'application/editor/tools/Tool';\nimport { canvasSelector, drawnStructuresSelector } from '../constants';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { clamp, isNumber } from 'lodash';\nimport { notifyRenderComplete } from 'application/render/internal';\nimport { StructureBbox } from 'application/render/renderers/types';\n\nexport enum SCROLL_POSITION {\n  CENTER = 'CENTER',\n  BOTTOM = 'BOTTOM',\n}\n\ninterface ScrollBar {\n  name: string;\n  offsetStart: number;\n  offsetEnd: number;\n  maxWidth: number;\n  maxHeight: number;\n  bar?: D3SvgElementSelection<SVGRectElement, void> | undefined;\n}\n\n// in percents\nconst AUTO_SCROLL_OFFSET_X = 10;\nconst AUTO_SCROLL_OFFSET_Y = 10;\n\nexport class ZoomTool implements BaseTool {\n  public canvas: D3SvgElementSelection<SVGSVGElement, void>;\n  public canvasWrapper: D3SvgElementSelection<SVGSVGElement, void>;\n  private zoom!: ZoomBehavior<SVGSVGElement, void> | null;\n  private zoomLevel: number;\n  private zoomTransform: ZoomTransform;\n  private resizeObserver: ResizeObserver | null = null;\n  drawingEntitiesManager: DrawingEntitiesManager;\n  private zoomEventHandlers: Array<(transform?) => void> = [];\n  private scrollBars!: {\n    horizontal: ScrollBar;\n    vertical: ScrollBar;\n  };\n\n  COLOR = '#a5afb9';\n  MIN_LENGTH = 40;\n  RADIUS = 2;\n  MARGIN = 5;\n  HORIZONTAL_DIST_TO_EDGE = 16;\n  VERTICAL_DIST_TO_EDGE = 4;\n  WIDTH = 4;\n  MINZOOMSCALE = 0.2;\n  MAXZOOMSCALE = 4;\n\n  // eslint-disable-next-line no-use-before-define\n  private static _instance: ZoomTool;\n  public static get instance() {\n    return ZoomTool._instance;\n  }\n\n  static initInstance(drawingEntitiesManager: DrawingEntitiesManager) {\n    ZoomTool._instance = new ZoomTool(drawingEntitiesManager);\n    return ZoomTool._instance;\n  }\n\n  private constructor(drawingEntitiesManager: DrawingEntitiesManager) {\n    this.canvasWrapper = select(canvasSelector);\n    this.canvas = select(drawnStructuresSelector);\n\n    this.zoomLevel = 1;\n    this.zoomTransform = new ZoomTransform(1, 0, 0);\n    this.drawingEntitiesManager = drawingEntitiesManager;\n\n    this.initActions();\n  }\n\n  initActions() {\n    this.zoom = zoom<SVGSVGElement, void>()\n      .scaleExtent([this.MINZOOMSCALE, this.MAXZOOMSCALE])\n      .wheelDelta(this.defaultWheelDelta)\n      .filter((e) => {\n        e.preventDefault();\n        if (e.ctrlKey && e.type === 'wheel') {\n          return true;\n        }\n        return false;\n      })\n      .on('zoom', this.zoomAction.bind(this))\n      .on('end', () => {\n        notifyRenderComplete();\n      });\n    this.canvasWrapper.call(this.zoom);\n\n    this.canvasWrapper.on('wheel', (event) => {\n      if (event.ctrlKey) {\n        event.preventDefault();\n      } else {\n        this.mouseWheeled(event);\n      }\n    });\n  }\n\n  setZoom(zoomLevel: number) {\n    this.zoomLevel = zoomLevel;\n  }\n\n  getZoomLevel() {\n    return this.zoomLevel;\n  }\n\n  setZoomTransform(transform: ZoomTransform) {\n    this.zoomTransform = transform;\n  }\n\n  zoomAction({ transform }) {\n    this.canvas.attr('transform', transform);\n    this.zoomLevel = transform.k;\n    this.zoomTransform = transform;\n    this.drawScrollBars();\n    requestAnimationFrame(() => {\n      this.dispatchZoomEventHandlers(transform);\n    });\n  }\n\n  subscribeOnZoomEvent(zoomEventHandler: (transform?) => void) {\n    this.zoomEventHandlers.push(zoomEventHandler);\n  }\n\n  dispatchZoomEventHandlers(transform) {\n    this.zoomEventHandlers.forEach((zoomEventHandler) => {\n      zoomEventHandler(transform);\n    });\n  }\n\n  drawScrollBars() {\n    if (this.canvas.node() && this.canvasWrapper.node()) {\n      this.initScrollBars();\n      this.renderScrollBar(this.scrollBars.horizontal);\n      this.renderScrollBar(this.scrollBars.vertical);\n    }\n  }\n\n  renderScrollBar(scrollBar: ScrollBar) {\n    const hasOffset = scrollBar.offsetStart < 0 || scrollBar.offsetEnd < 0;\n    if (hasOffset) {\n      if (scrollBar.bar) {\n        this.updateScrollBarAttrs(scrollBar);\n      } else {\n        this.drawScrollBar(scrollBar);\n      }\n    } else {\n      scrollBar.bar?.remove();\n      scrollBar.bar = undefined;\n    }\n  }\n\n  drawScrollBar(scrollBar: ScrollBar) {\n    scrollBar.bar = this.canvasWrapper.append('rect');\n    const dragged = drag().on(\n      'drag',\n      this.dragged(scrollBar.name).bind(this),\n    ) as never;\n    scrollBar.bar?.call(dragged);\n    this.updateScrollBarAttrs(scrollBar);\n  }\n\n  updateScrollBarAttrs(scrollBar: ScrollBar) {\n    const { start, length } = this.calculateDynamicAttr(scrollBar);\n\n    if (scrollBar.name === 'horizontal') {\n      scrollBar.bar\n        ?.attr('x', start)\n        .attr('y', scrollBar.maxHeight - this.HORIZONTAL_DIST_TO_EDGE)\n        .attr('width', length)\n        .attr('height', this.WIDTH);\n    } else {\n      scrollBar.bar\n        ?.attr('x', scrollBar.maxHeight - this.VERTICAL_DIST_TO_EDGE)\n        .attr('y', start)\n        .attr('width', this.WIDTH)\n        .attr('height', length);\n    }\n\n    scrollBar.bar\n      ?.attr('rx', this.RADIUS)\n      .attr('draggable', true)\n      .attr('cursor', 'pointer')\n      .attr('stroke', this.COLOR)\n      .attr('fill', this.COLOR)\n      .attr('data-testid', scrollBar.name + '-bar')\n      .attr('class', 'dynamic-element');\n  }\n\n  calculateDynamicAttr(scrollBar: ScrollBar) {\n    const start = clamp(\n      -scrollBar.offsetStart,\n      this.MARGIN,\n      scrollBar.maxWidth - this.MIN_LENGTH - this.MARGIN,\n    );\n    const end =\n      scrollBar.maxWidth -\n      clamp(-scrollBar.offsetEnd, this.MARGIN, scrollBar.maxWidth);\n    const length = Math.max(end - start, this.MIN_LENGTH);\n    return { start, length };\n  }\n\n  dragged = (name: string) => (event) => {\n    if (name === 'horizontal') {\n      this.zoom?.translateBy(this.canvasWrapper, -event.dx, 0);\n    } else {\n      this.zoom?.translateBy(this.canvasWrapper, 0, -event.dy);\n    }\n  };\n\n  public scrollTo(\n    position: Vec2,\n    stickToBottom = false,\n    xOffset?,\n    yOffset?,\n    isOffsetInPercents = true,\n  ) {\n    const canvasWrapperHeight =\n      this.canvasWrapper.node()?.height.baseVal.value || 0;\n\n    const canvasWrapperWidth =\n      this.canvasWrapper.node()?.width.baseVal.value || 0;\n\n    const offset = new Vec2(\n      canvasWrapperWidth / 2 -\n        (isNumber(xOffset) && !isOffsetInPercents\n          ? xOffset\n          : (canvasWrapperWidth * (xOffset || AUTO_SCROLL_OFFSET_X)) / 100),\n      canvasWrapperHeight / 2 -\n        (isNumber(yOffset) && !isOffsetInPercents\n          ? yOffset\n          : (canvasWrapperHeight * (yOffset || AUTO_SCROLL_OFFSET_Y)) / 100),\n    );\n\n    this.zoom?.translateTo(\n      this.canvasWrapper,\n      position.x + this.unzoomValue(offset.x),\n      position.y + this.unzoomValue(offset.y * (stickToBottom ? -1 : 1)),\n    );\n  }\n\n  public scrollBy(x: number, y: number) {\n    this.zoom?.translateBy(\n      this.canvasWrapper,\n      this.unzoomValue(x),\n      this.unzoomValue(y),\n    );\n  }\n\n  public scrollToVerticalCenter(structCenterY: number) {\n    const centerPointOfModel =\n      this.drawingEntitiesManager.getCurrentCenterPointOfCanvas();\n    const offsetY = centerPointOfModel.y - structCenterY;\n    this.zoom?.translateBy(this.canvasWrapper, 0, offsetY);\n  }\n\n  public scrollToVerticalBottom() {\n    this.drawScrollBars();\n    if (this.scrollBars.vertical.offsetEnd < 0) {\n      this.zoom?.translateBy(\n        this.canvasWrapper,\n        0,\n        this.scrollBars.vertical.offsetEnd / this.zoomLevel,\n      );\n    }\n  }\n\n  mouseWheeled(event) {\n    const isShiftKeydown = event.shiftKey;\n    const boxNode = this.canvasWrapper.node();\n    if (boxNode && (event.deltaX || event.deltaY)) {\n      const x = -event.deltaX / this.zoomLevel;\n      const y = -event.deltaY / this.zoomLevel;\n      if (isShiftKeydown) {\n        this.zoom?.translateBy(this.canvasWrapper, x - y, 0);\n      } else {\n        this.zoom?.translateBy(this.canvasWrapper, x, y);\n      }\n    }\n  }\n\n  initScrollBars() {\n    const boundingBox = this.canvas.node()?.getBoundingClientRect() as DOMRect;\n    const wrapperBoundingBox = this.canvasWrapper\n      .node()\n      ?.getBoundingClientRect() as DOMRect;\n    const canvasWrapperHeight =\n      this.canvasWrapper.node()?.height.baseVal.value || 0;\n\n    const canvasWrapperWidth =\n      this.canvasWrapper.node()?.width.baseVal.value || 0;\n    this.scrollBars = {\n      horizontal: {\n        name: 'horizontal',\n        offsetStart: boundingBox.left - wrapperBoundingBox.left,\n        offsetEnd: wrapperBoundingBox.width - boundingBox.right,\n        maxWidth: canvasWrapperWidth,\n        maxHeight: canvasWrapperHeight,\n        bar: this.scrollBars?.horizontal?.bar,\n      },\n      vertical: {\n        name: 'vertical',\n        offsetStart: boundingBox.top - wrapperBoundingBox.top,\n        offsetEnd: wrapperBoundingBox.height - boundingBox.bottom,\n        maxWidth: canvasWrapperHeight,\n        maxHeight: canvasWrapperWidth,\n        bar: this.scrollBars?.vertical?.bar,\n      },\n    };\n  }\n\n  private get zoomStep() {\n    return 0.1;\n  }\n\n  public zoomIn(zoomStep = this.zoomStep) {\n    this.zoomToLeftTopCorner(this.zoomLevel + zoomStep);\n  }\n\n  public zoomOut(zoomStep = this.zoomStep) {\n    this.zoomToLeftTopCorner(this.zoomLevel - zoomStep);\n  }\n\n  public zoomToLeftTopCorner(_newZoomLevel: number) {\n    let newZoomLevel = _newZoomLevel;\n\n    newZoomLevel = Math.min(newZoomLevel, this.MAXZOOMSCALE);\n    newZoomLevel = Math.max(newZoomLevel, this.MINZOOMSCALE);\n\n    const { x, y } = this.zoomTransform;\n    const scaleFactor = newZoomLevel / this.zoomLevel;\n\n    // Calculate the new translation to zoom to the top-left corner\n    const newX = x * scaleFactor;\n    const newY = y * scaleFactor;\n\n    this.zoom?.transform(\n      this.canvasWrapper,\n      new ZoomTransform(newZoomLevel, newX, newY),\n    );\n  }\n\n  public zoomTo(zoomLevel: number) {\n    this.zoomToLeftTopCorner(zoomLevel);\n  }\n\n  public resetZoom() {\n    this.zoom?.transform(this.canvasWrapper, new ZoomTransform(1, 0, 0));\n  }\n\n  observeCanvasResize = () => {\n    this.resizeObserver = new ResizeObserver(() => {\n      this.drawScrollBars();\n    });\n    this.resizeObserver.observe(this.canvasWrapper.node() as SVGSVGElement);\n  };\n\n  defaultWheelDelta(event) {\n    return (\n      -event.deltaY *\n      (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002)\n    );\n  }\n\n  scaleCoordinates(position: Vec2) {\n    const newX = this.zoomTransform.applyX(position.x);\n    const newY = this.zoomTransform.applyY(position.y);\n    return new Vec2(newX, newY);\n  }\n\n  invertZoom(position: Vec2) {\n    const newX = this.zoomTransform.invertX(position.x);\n    const newY = this.zoomTransform.invertY(position.y);\n    return new Vec2(newX, newY);\n  }\n\n  unzoomValue(value: number) {\n    return value / this.zoomLevel;\n  }\n\n  zoomValue(value: number) {\n    return value * this.zoomLevel;\n  }\n\n  destroy() {\n    this.scrollBars.horizontal?.bar?.remove();\n    this.scrollBars.vertical?.bar?.remove();\n    this.resizeObserver?.unobserve(this.canvasWrapper.node() as SVGSVGElement);\n    this.zoom = null;\n    this.zoomEventHandlers = [];\n  }\n\n  isFitToCanvasHeight(height) {\n    const canvasWrapperHeight = this.canvasWrapperHeight;\n\n    return (\n      height <\n      this.unzoomValue(\n        canvasWrapperHeight -\n          (canvasWrapperHeight * AUTO_SCROLL_OFFSET_Y) / 100,\n      )\n    );\n  }\n\n  public zoomStructureToFitHalfOfCanvas(structureBbox: StructureBbox) {\n    const MAX_AUTOSCALE = 2;\n    const OFFSET_FROM_CANVAS_BORDER = 2;\n    const canvasWrapperSize = this.canvasWrapperSize;\n\n    if (structureBbox.width < canvasWrapperSize.width / 2) {\n      const scale = canvasWrapperSize.width / 2 / structureBbox.width;\n      this.zoomTo(Math.min(scale, MAX_AUTOSCALE));\n      this.scrollTo(\n        new Vec2(structureBbox.left, structureBbox.top),\n        false,\n        OFFSET_FROM_CANVAS_BORDER,\n        OFFSET_FROM_CANVAS_BORDER,\n      );\n    }\n  }\n\n  private get canvasWrapperHeight() {\n    // TODO create class for Canvas and move this getter there\n    const canvasWrapperBbox = this.canvasWrapper\n      .node()\n      ?.getBoundingClientRect();\n    return canvasWrapperBbox?.height || 0;\n  }\n\n  private get canvasWrapperSize() {\n    const canvasWrapperBbox = this.canvasWrapper\n      .node()\n      ?.getBoundingClientRect();\n    return {\n      width: canvasWrapperBbox?.width || 0,\n      height: canvasWrapperBbox?.height || 0,\n    };\n  }\n}\n\nexport default ZoomTool;\n","import { Vec2 } from 'domain/entities';\nimport { provideEditorSettings } from '../editorSettings';\nimport ZoomTool from '../tools/Zoom';\n/**\n * `model` -- The original coordinates of entities, namely angstroms\n * `canvas` -- The real coordinates used to draw entities\n * `view` -- The zoomed canvas coordinates\n */\nexport class Coordinates {\n  static canvasToModel(position: Vec2) {\n    const settings = provideEditorSettings();\n    return position.scaled(1 / settings.macroModeScale);\n  }\n\n  static viewToModel(position: Vec2) {\n    const settings = provideEditorSettings();\n    const pos = ZoomTool.instance.invertZoom(position);\n    return pos.scaled(1 / settings.macroModeScale);\n  }\n\n  static modelToView(position: Vec2) {\n    const settings = provideEditorSettings();\n    return ZoomTool.instance.scaleCoordinates(\n      position.scaled(settings.macroModeScale),\n    );\n  }\n\n  static modelToCanvas(position: Vec2) {\n    const settings = provideEditorSettings();\n    return position.scaled(settings.macroModeScale);\n  }\n\n  // convert the original coordinates to transformed coordinates after the d3 transformation\n  static canvasToView(position: Vec2) {\n    return ZoomTool.instance.scaleCoordinates(position);\n  }\n\n  // convert the transformed coordinates to coordinates before the d3 transformation\n  static viewToCanvas(position: Vec2) {\n    return ZoomTool.instance.invertZoom(position);\n  }\n}\n","import { Coordinates as CoordinatesTool } from 'application/editor/shared/coordinates';\nimport { BaseMonomer } from 'domain/entities';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { AttachmentPointName } from 'domain/types';\n\nexport type Coordinates = { x: number; y: number };\n\n// eslint-disable-next-line camelcase\nexport function canvasToMonomerCoordinates(\n  coordinatesOnCanvas: Coordinates,\n  centerOFMonomer: Coordinates,\n  monomerWidth: number,\n  monomerHeight: number,\n) {\n  const zeroPointCoord = {\n    x: centerOFMonomer.x - monomerWidth / 2,\n    y: centerOFMonomer.y - monomerHeight / 2,\n  };\n\n  const monomerCoord = {\n    x: coordinatesOnCanvas.x - zeroPointCoord.x,\n    y: coordinatesOnCanvas.y - zeroPointCoord.y,\n  };\n\n  return monomerCoord;\n}\n\nexport function findLabelPoint(\n  pointOnBorder: Coordinates,\n  angle: number,\n  lineLength: number,\n  lineOffset: number,\n  labelSize: { x: number; y: number },\n  isUsed: boolean,\n) {\n  // based on https://ru.stackoverflow.com/a/1442905\n\n  const angleRadians = Vec2.degrees_to_radians(angle);\n\n  const pointOfAttachment = Vec2.findSecondPoint(\n    pointOnBorder,\n    lineLength,\n    angleRadians,\n  );\n\n  // find vector between pointOnBorder and pointOfAttachment\n\n  const attachmentVector = {\n    x: pointOfAttachment.x - pointOnBorder.x,\n    y: pointOfAttachment.y - pointOnBorder.y,\n  };\n\n  // rotate this vector at 90 degrees - change x and y, then make one negative\n  const rotatedVector = { x: -attachmentVector.y, y: attachmentVector.x };\n\n  // normalize vector\n  const normalizedVector = {\n    x: rotatedVector.x / lineLength,\n    y: rotatedVector.y / lineLength,\n  };\n\n  const normalizedAttachmentVector = {\n    x: attachmentVector.x / lineLength,\n    y: attachmentVector.y / lineLength,\n  };\n\n  // find vector for Label, using normalized vector and length\n\n  let addedOrtogonalOffset = 0;\n  const addedParallelOffset =\n    lineOffset + Math.max(labelSize.x, labelSize.y) + 1;\n  if (isUsed) {\n    if (angle >= -270 && angle <= 0) {\n      addedOrtogonalOffset = 5;\n    } else if (angle >= -360 && angle < -270) {\n      addedOrtogonalOffset = -5;\n    }\n  }\n\n  const ortogonalOffset = {\n    x: normalizedVector.x * addedOrtogonalOffset,\n    y: normalizedVector.y * addedOrtogonalOffset,\n  };\n\n  const parallelOffset = {\n    x: normalizedAttachmentVector.x * addedParallelOffset,\n    y: normalizedAttachmentVector.y * addedParallelOffset,\n  };\n\n  // add this vector to point of attachment\n  const labelCoordinates = {\n    x: pointOfAttachment.x + ortogonalOffset.x + parallelOffset.x - labelSize.x,\n    y: pointOfAttachment.y + ortogonalOffset.y + parallelOffset.y + labelSize.y,\n  };\n\n  return [labelCoordinates, pointOfAttachment];\n}\n\nexport function getSearchFunction(\n  initialAngle: number,\n  canvasOffset: Coordinates,\n  monomer: BaseMonomer,\n) {\n  return function findPointOnMonomerBorder(\n    coordStart: Coordinates,\n    length: number,\n    applyZoomForPositionCalculation: boolean,\n    angle = initialAngle,\n  ) {\n    const angleRadians = Vec2.degrees_to_radians(angle);\n\n    const secondPoint = Vec2.findSecondPoint(coordStart, length, angleRadians);\n\n    const diff = Vec2.diff(\n      new Vec2(coordStart.x, coordStart.y),\n      new Vec2(secondPoint.x, secondPoint.y),\n    );\n\n    // exit recursion\n    if (diff.length() < 1.01) {\n      return secondPoint;\n    }\n\n    const newLength = Math.round(diff.length() / 1.4);\n    const newCoordStart = { x: secondPoint.x, y: secondPoint.y };\n\n    const zoomedCoordinateOfSecondPoint = applyZoomForPositionCalculation\n      ? CoordinatesTool.canvasToView(new Vec2(secondPoint))\n      : new Vec2(secondPoint);\n\n    const newPointCoord = {\n      x: Math.round(zoomedCoordinateOfSecondPoint.x) + canvasOffset.x,\n      y: Math.round(zoomedCoordinateOfSecondPoint.y) + canvasOffset.y,\n    };\n\n    const elementsAtPoint = document.elementsFromPoint(\n      newPointCoord.x,\n      newPointCoord.y,\n    );\n\n    const isCurrentMonomerAtNewPoint = elementsAtPoint.some(\n      (element) => element === monomer.renderer?.bodyElement?.node(),\n    );\n\n    let newAngle: number;\n    if (isCurrentMonomerAtNewPoint) {\n      newAngle = initialAngle;\n    } else {\n      newAngle = initialAngle - 180;\n    }\n\n    return findPointOnMonomerBorder(\n      newCoordStart,\n      newLength,\n      applyZoomForPositionCalculation,\n      newAngle,\n    );\n  };\n}\n\nexport const anglesToSector = {\n  '45': {\n    min: 23,\n    max: 68,\n    center: 45,\n  },\n  '90': {\n    min: 68,\n    max: 113,\n    center: 90,\n  },\n  '135': {\n    min: 113,\n    max: 148,\n    center: 135,\n  },\n  '180': {\n    min: 148,\n    max: 203,\n    center: 180,\n  },\n  '225': {\n    min: 203,\n    max: 248,\n    center: 225,\n  },\n  '270': {\n    min: 248,\n    max: 293,\n    center: 270,\n  },\n  '315': {\n    min: 293,\n    max: 228,\n    center: 315,\n  },\n  '360': {\n    min: 338,\n    max: 360,\n    center: 360,\n  },\n  '0': {\n    min: 0,\n    max: 23,\n    center: 0,\n  },\n};\n\nexport enum attachmentPointNumberToAngle {\n  'R1' = 0,\n  'R2' = 180,\n  'R3' = 90,\n  'R4' = 270,\n  'R5' = 45,\n  'R6' = 135,\n  'R7' = 315,\n  'R8' = 225,\n}\n\nexport const sectorsList = [45, 90, 135, 180, 225, 270, 315, 0, 360];\n\nexport function checkFor0and360(sectorsList: number[]) {\n  if (!sectorsList.includes(0) && sectorsList.includes(360)) {\n    return sectorsList.filter((item) => item !== 360);\n  }\n  if (!sectorsList.includes(360) && sectorsList.includes(0)) {\n    return sectorsList.filter((item) => item !== 0);\n  }\n  return sectorsList;\n}\n\n/* attachmentPointName - R1, R2, ...\n * returns number of attachment point with left binary shift:\n * [attachmentPointNumber]: [binaryShiftedAttachmentPointNumber]\n * 1: 1\n * 2: 2\n * 3: 4\n * 4: 8\n * 5: 16\n * 6: 32\n * It needs for conversion of attachment points to rglabels (just for same view in monomer preview)\n * rglabel 3 means that atom has two r-group attachment points\n * */\nexport function getAttachmentPointLabelWithBinaryShift(\n  attachmentPointNumber: number,\n) {\n  let attachmentPointLabel = '';\n  for (let rgi = 0; rgi < 32; rgi++) {\n    if (attachmentPointNumber & (1 << rgi)) {\n      attachmentPointLabel += getAttachmentPointLabel(rgi + 1);\n    }\n  }\n  return attachmentPointLabel;\n}\n\nexport function getAttachmentPointLabel(attachmentPointNumber: number) {\n  return `R${attachmentPointNumber}` as AttachmentPointName;\n}\n\nexport function getAttachmentPointNumberFromLabel(\n  attachmentPointLabel: AttachmentPointName,\n) {\n  return Number(attachmentPointLabel.replace('R', ''));\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  SGroup,\n  Struct,\n  SGroupAttachmentPoint,\n  AtomQueryProperties,\n  BaseMonomer,\n  Vec2,\n} from 'domain/entities';\nimport { switchIntoChemistryCoordSystem } from 'domain/serializers/ket/helpers';\n\nimport { ifDef } from 'utilities';\nimport { getAttachmentPointLabelWithBinaryShift } from 'domain/helpers/attachmentPointCalculations';\nimport { isNumber } from 'lodash';\n\nfunction fromRlabel(rg) {\n  const res: Array<any> = [];\n  let rgi;\n  let val;\n  for (rgi = 0; rgi < 32; rgi++) {\n    if (rg & (1 << rgi)) {\n      val = rgi + 1;\n      res.push(val); // push the string\n    }\n  }\n  return res;\n}\n\nexport function moleculeToKet(struct: Struct, monomer?: BaseMonomer): any {\n  const body: any = {\n    atoms: Array.from(struct.atoms.values()).map((atom) => {\n      // For the monomers we need to serialize leaving groups as usual atom label like H, O, etc\n      if (atom.label === 'R#' && !monomer) return rglabelToKet(atom);\n      return atomToKet(atom, monomer);\n    }),\n  };\n\n  if (struct.bonds.size !== 0) {\n    body.bonds = Array.from(struct.bonds.values()).map(bondToKet);\n  }\n\n  if (struct.sgroups.size !== 0) {\n    body.sgroups = Array.from(struct.sgroups.values()).map((sGroup) =>\n      sgroupToKet(struct, sGroup),\n    );\n  }\n\n  const fragment = struct.frags.get(0);\n  if (fragment) {\n    ifDef(body, 'stereoFlagPosition', fragment.stereoFlagPosition, null);\n    if (fragment.properties) {\n      body.properties = fragment.properties;\n    }\n  }\n  return {\n    type: 'molecule',\n    ...body,\n  };\n}\n\nfunction atomToKet(source, monomer?: BaseMonomer) {\n  const result: { queryProperties?: AtomQueryProperties; type?: 'atom-list' } =\n    {};\n\n  if (source.label !== 'L#') {\n    ifDef(\n      result,\n      'label',\n      source.label === 'R#' && monomer\n        ? monomer.monomerItem.props.MonomerCaps?.[\n            getAttachmentPointLabelWithBinaryShift(source.rglabel)\n          ]\n        : source.label,\n    );\n    // reaction\n    ifDef(result, 'mapping', parseInt(source.aam), 0);\n  } else if (source.atomList) {\n    result.type = 'atom-list';\n    ifDef(result, 'elements', source.atomList.labelList());\n    ifDef(result, 'notList', source.atomList.notList, false);\n  }\n\n  ifDef(result, 'alias', source.alias);\n  const position: Vec2 = switchIntoChemistryCoordSystem(\n    new Vec2(source.pp.x, source.pp.y, source.pp.z),\n  );\n  ifDef(result, 'location', [position.x, position.y, position.z]);\n  ifDef(result, 'charge', source.charge);\n  ifDef(result, 'explicitValence', source.explicitValence, -1);\n  ifDef(result, 'isotope', source.isotope);\n  ifDef(result, 'radical', source.radical, 0);\n  ifDef(result, 'attachmentPoints', source.attachmentPoints, 0);\n  ifDef(result, 'cip', source.cip, '');\n  ifDef(result, 'selected', source.getInitiallySelected());\n  // stereo\n  ifDef(result, 'stereoLabel', source.stereoLabel, null);\n  ifDef(result, 'stereoParity', source.stereoCare, 0);\n  ifDef(result, 'weight', source.weight, 0);\n  // query\n  ifDef(result, 'ringBondCount', source.ringBondCount, 0);\n  ifDef(result, 'substitutionCount', source.substitutionCount, 0);\n  ifDef(result, 'unsaturatedAtom', !!source.unsaturatedAtom, false);\n  ifDef(result, 'hCount', source.hCount, 0);\n  // query properties\n  if (\n    Object.values(source.queryProperties).some((property) => property !== null)\n  ) {\n    result.queryProperties = {};\n    Object.keys(source.queryProperties).forEach((name) => {\n      ifDef(result.queryProperties, name, source.queryProperties[name]);\n    });\n  }\n  ifDef(result, 'invRet', source.invRet, 0);\n  ifDef(result, 'exactChangeFlag', !!source.exactChangeFlag, false);\n  ifDef(result, 'implicitHCount', source.implicitHCount);\n  return result;\n}\n\nfunction rglabelToKet(source) {\n  const result = {\n    type: 'rg-label',\n  };\n  const position: Vec2 = switchIntoChemistryCoordSystem(\n    new Vec2(source.pp.x, source.pp.y, source.pp.z),\n  );\n  ifDef(result, 'location', [position.x, position.y, position.z]);\n  ifDef(result, 'attachmentPoints', source.attachmentPoints, 0);\n\n  const refsToRGroups = fromRlabel(source.rglabel).map(\n    (rgnumber) => `rg-${rgnumber}`,\n  );\n  ifDef(result, '$refs', refsToRGroups);\n  ifDef(result, 'selected', source.getInitiallySelected());\n\n  return result;\n}\n\nfunction bondToKet(source) {\n  const result = {};\n  if (source.customQuery) {\n    ifDef(result, 'atoms', [source.begin, source.end]);\n    ifDef(result, 'customQuery', source.customQuery);\n  } else {\n    ifDef(result, 'type', source.type);\n    ifDef(result, 'atoms', [source.begin, source.end]);\n    ifDef(result, 'stereo', source.stereo, 0);\n    ifDef(result, 'topology', source.topology, 0);\n    ifDef(result, 'center', source.reactingCenterStatus, 0);\n    ifDef(result, 'cip', source.cip, '');\n  }\n  ifDef(result, 'selected', source.getInitiallySelected());\n  return result;\n}\n\nfunction sgroupToKet(struct: Struct, source: SGroup) {\n  const result = {};\n\n  ifDef(result, 'type', source.type);\n  ifDef(result, 'atoms', source.atoms);\n\n  switch (source.type) {\n    case 'GEN':\n      break;\n    case 'MUL': {\n      ifDef(result, 'mul', source.data.mul || 1);\n      break;\n    }\n    case 'queryComponent': {\n      break;\n    }\n    case 'SRU': {\n      ifDef(result, 'subscript', source.data.subscript || 'n');\n      ifDef(\n        result,\n        'connectivity',\n        source.data.connectivity.toUpperCase() || 'ht',\n      );\n      break;\n    }\n    case 'SUP': {\n      ifDef(result, 'name', source.data.name || '');\n      ifDef(result, 'expanded', source.data.expanded);\n      ifDef(result, 'id', source.id);\n      ifDef(\n        result,\n        'attachmentPoints',\n        source.getAttachmentPoints().map(sgroupAttachmentPointToKet),\n        [],\n      );\n      break;\n    }\n    case 'DAT': {\n      const data = source.data;\n      ifDef(result, 'placement', data.absolute, true);\n      ifDef(result, 'display', data.attached, false);\n      ifDef(result, 'context', data.context);\n      ifDef(result, 'fieldName', data.fieldName);\n      ifDef(result, 'fieldData', data.fieldValue);\n      ifDef(result, 'bonds', SGroup.getBonds(struct, source));\n      break;\n    }\n    default:\n      break;\n  }\n\n  return result;\n}\n\nfunction sgroupAttachmentPointToKet(source: SGroupAttachmentPoint) {\n  const result = {};\n\n  ifDef(result, 'attachmentAtom', source.atomId);\n  ifDef(result, 'leavingAtom', source.leaveAtomId);\n  ifDef(\n    result,\n    'attachmentId',\n    isNumber(source.attachmentPointNumber)\n      ? source.attachmentPointNumber.toString()\n      : source.attachmentId,\n  );\n\n  return result;\n}\n","import { Struct } from 'domain/entities';\nimport { atomToStruct, bondToStruct } from './moleculeToStruct';\nimport { KetItem } from './types';\n\nexport function mergeFragmentsToStruct(\n  ketItem: KetItem,\n  struct: Struct,\n): Struct {\n  let atomsOffset = 0;\n  if (ketItem.fragments) {\n    ketItem.fragments.forEach((fragment) => {\n      fragment.atoms?.forEach((atom) => struct.atoms.add(atomToStruct(atom)));\n      fragment.bonds?.forEach((bond) =>\n        struct.bonds.add(bondToStruct(bond, atomsOffset)),\n      );\n      atomsOffset += fragment.atoms?.length || 0;\n    });\n  }\n  return struct;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  Bond,\n  SGroup,\n  Struct,\n  SGroupAttachmentPoint,\n  RGroupAttachmentPoint,\n  AttachmentPoints,\n  AtomQueryProperties,\n} from 'domain/entities';\n\nimport { Elements } from 'domain/constants';\nimport { ifDef } from 'utilities';\nimport { mergeFragmentsToStruct } from './mergeFragmentsToStruct';\nimport { initiallySelectedType } from 'domain/entities/BaseMicromoleculeEntity';\n\nexport function toRlabel(values) {\n  let res = 0;\n  values.forEach((val) => {\n    const rgi = val - 1;\n    res |= 1 << rgi;\n  });\n  return res;\n}\n\nexport function moleculeToStruct(ketItem: any): Struct {\n  const struct = mergeFragmentsToStruct(ketItem, new Struct());\n\n  if (ketItem.atoms) {\n    ketItem.atoms.forEach((atom) => {\n      let atomId: number | null = null;\n      if (atom.type === 'rg-label') {\n        atomId = struct.atoms.add(rglabelToStruct(atom));\n      }\n      if (!atom.type || atom.type === 'atom-list') {\n        atomId = struct.atoms.add(atomToStruct(atom));\n      }\n      if (atomId !== null) {\n        addRGroupAttachmentPointsToStruct(\n          struct,\n          atomId,\n          atom.attachmentPoints,\n          atom.selected,\n        );\n      }\n    });\n  }\n\n  if (ketItem.bonds) {\n    ketItem.bonds.forEach((bond) => struct.bonds.add(bondToStruct(bond)));\n  }\n\n  if (ketItem.sgroups) {\n    ketItem.sgroups.forEach((sgroupData) => {\n      const sgroup = sgroupToStruct(sgroupData);\n      const id = struct.sgroups.add(sgroup);\n      sgroup.id = id;\n    });\n  }\n\n  struct.initHalfBonds();\n  struct.initNeighbors();\n  struct.markFragments(ketItem.properties);\n  struct.bindSGroupsToFunctionalGroups();\n\n  return struct;\n}\n\nexport function atomToStruct(source) {\n  const params: any = {};\n\n  const queryAttribute: Array<keyof AtomQueryProperties> = [\n    'aromaticity',\n    'ringMembership',\n    'connectivity',\n    'ringSize',\n    'chirality',\n    'customQuery',\n  ];\n  if (source.type === 'atom-list') {\n    params.label = 'L#';\n    const ids = source.elements\n      .map((el) => Elements.get(el)?.number)\n      .filter((id) => id);\n    ifDef(params, 'atomList', {\n      ids,\n      notList: source.notList,\n    });\n  } else {\n    ifDef(params, 'label', source.label);\n    // reaction\n    ifDef(params, 'aam', source.mapping);\n  }\n  ifDef(params, 'alias', source.alias);\n  ifDef(params, 'pp', {\n    x: source.location[0],\n    y: -source.location[1],\n    z: source.location[2] || 0.0,\n  });\n  ifDef(params, 'charge', source.charge);\n  ifDef(params, 'explicitValence', source.explicitValence);\n  ifDef(params, 'isotope', source.isotope);\n  ifDef(params, 'radical', source.radical);\n  ifDef(params, 'cip', source.cip);\n  ifDef(params, 'attachmentPoints', source.attachmentPoints);\n  // stereo\n  ifDef(params, 'stereoLabel', source.stereoLabel);\n  ifDef(params, 'stereoParity', source.stereoParity);\n  ifDef(params, 'weight', source.weight);\n  // query\n  ifDef(params, 'ringBondCount', source.ringBondCount);\n  ifDef(params, 'substitutionCount', source.substitutionCount);\n  ifDef(params, 'unsaturatedAtom', Number(Boolean(source.unsaturatedAtom)));\n  ifDef(params, 'hCount', source.hCount);\n  if (\n    source.queryProperties &&\n    Object.values(source.queryProperties).some((property) => property !== null)\n  ) {\n    params.queryProperties = {};\n    queryAttribute.forEach((attributeName) => {\n      ifDef(\n        params.queryProperties,\n        attributeName,\n        source.queryProperties[attributeName],\n      );\n    });\n  }\n\n  // reaction\n  ifDef(params, 'invRet', source.invRet);\n  ifDef(params, 'exactChangeFlag', Number(Boolean(source.exactChangeFlag)));\n  // implicit hydrogens\n  ifDef(params, 'implicitHCount', source.implicitHCount);\n\n  const newAtom = new Atom(params);\n  newAtom.setInitiallySelected(source.selected);\n  return newAtom;\n}\n\nexport function rglabelToStruct(source) {\n  const params: any = {};\n  params.label = 'R#';\n  ifDef(params, 'pp', {\n    x: source.location[0],\n    y: -source.location[1],\n    z: source.location[2] || 0.0,\n  });\n  ifDef(params, 'attachmentPoints', source.attachmentPoints);\n  const rglabel = toRlabel(source.$refs.map((el) => parseInt(el.slice(3))));\n  ifDef(params, 'rglabel', rglabel);\n  const newAtom = new Atom(params);\n  newAtom.setInitiallySelected(source.selected);\n  return newAtom;\n}\n\nfunction addRGroupAttachmentPointsToStruct(\n  struct: Struct,\n  attachedAtomId: number,\n  attachmentPoints: AttachmentPoints | null,\n  initiallySelected?: initiallySelectedType,\n) {\n  const rgroupAttachmentPoints: RGroupAttachmentPoint[] = [];\n  if (attachmentPoints === AttachmentPoints.FirstSideOnly) {\n    rgroupAttachmentPoints.push(\n      new RGroupAttachmentPoint(attachedAtomId, 'primary', initiallySelected),\n    );\n  } else if (attachmentPoints === AttachmentPoints.SecondSideOnly) {\n    rgroupAttachmentPoints.push(\n      new RGroupAttachmentPoint(attachedAtomId, 'secondary', initiallySelected),\n    );\n  } else if (attachmentPoints === AttachmentPoints.BothSides) {\n    rgroupAttachmentPoints.push(\n      new RGroupAttachmentPoint(attachedAtomId, 'primary', initiallySelected),\n    );\n    rgroupAttachmentPoints.push(\n      new RGroupAttachmentPoint(attachedAtomId, 'secondary', initiallySelected),\n    );\n  }\n  rgroupAttachmentPoints.forEach((rgroupAttachmentPoint) => {\n    struct.rgroupAttachmentPoints.add(rgroupAttachmentPoint);\n  });\n}\n\n/**\n *\n * @param source\n * @param atomOffset  if bond is a part of a fragment, then we need to consider atoms from previous fragment.\n * source.atoms contains numbers related to fragment, but we need to count atoms related to struct. Example:\n * fragments: [{\n *   atoms: [...],\n *   bonds: [...], this bonds point to atoms in the first fragment\n * }, {\n *   atoms: [...],\n *   bonds: [...], this bonds point to atoms in the second fragment\n * }]\n * When we add bonds from second fragment we need to count atoms from fragments[0].atoms.length + 1, not from zero\n * @returns newly created Bond\n */\nexport function bondToStruct(source, atomOffset = 0) {\n  const params: any = {};\n\n  ifDef(params, 'type', source.type);\n  ifDef(params, 'topology', source.topology);\n  ifDef(params, 'reactingCenterStatus', source.center);\n  ifDef(params, 'stereo', source.stereo);\n  ifDef(params, 'cip', source.cip);\n  ifDef(params, 'customQuery', source.customQuery);\n  // if (params.stereo)\n  // \tparams.stereo = params.stereo > 1 ? params.stereo * 2 : params.stereo;\n  // params.xxx = 0;\n  ifDef(params, 'begin', source.atoms[0] + atomOffset);\n  ifDef(params, 'end', source.atoms[1] + atomOffset);\n  ifDef(params, 'initiallySelected', source.selected);\n\n  const newBond = new Bond(params);\n  newBond.setInitiallySelected(source.selected);\n  return newBond;\n}\n\ntype KetAttachmentPoint = {\n  attachmentAtom: number;\n  leavingAtom?: number;\n  attachmentId?: string;\n};\n\nexport function sgroupToStruct(source) {\n  const sgroup = new SGroup(source.type);\n  ifDef(sgroup, 'atoms', source.atoms);\n  switch (source.type) {\n    case 'GEN':\n      break;\n    case 'MUL': {\n      ifDef(sgroup.data, 'mul', source.mul);\n      break;\n    }\n    case 'SRU': {\n      ifDef(sgroup.data, 'subscript', source.subscript);\n      ifDef(sgroup.data, 'connectivity', source.connectivity.toLowerCase());\n      break;\n    }\n    case 'SUP': {\n      ifDef(sgroup.data, 'name', source.name);\n      ifDef(sgroup.data, 'expanded', source.expanded);\n      ifDef(sgroup, 'id', source.id);\n      source.attachmentPoints?.forEach(\n        (\n          sourceAttachmentPoint: KetAttachmentPoint,\n          sourceAttachmentPointIndex: number,\n        ) => {\n          sgroup.addAttachmentPoint(\n            sgroupAttachmentPointToStruct(\n              sourceAttachmentPoint,\n              sourceAttachmentPointIndex + 1,\n            ),\n          );\n        },\n      );\n      break;\n    }\n    case 'DAT': {\n      ifDef(sgroup.data, 'absolute', source.placement);\n      ifDef(sgroup.data, 'attached', source.display);\n      ifDef(sgroup.data, 'context', source.context);\n      ifDef(sgroup.data, 'fieldName', source.fieldName);\n      ifDef(sgroup.data, 'fieldValue', source.fieldData);\n      break;\n    }\n    default:\n      break;\n  }\n  return sgroup;\n}\n\nfunction sgroupAttachmentPointToStruct(\n  source: KetAttachmentPoint,\n  attachmentPointNumber?: number,\n): SGroupAttachmentPoint {\n  const atomId = source.attachmentAtom;\n  const leavingAtomId = source.leavingAtom;\n  const attachmentId = source.attachmentId;\n  return new SGroupAttachmentPoint(\n    atomId,\n    leavingAtomId,\n    attachmentId,\n    attachmentId ? Number(attachmentId) : attachmentPointNumber,\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { Pile, Pool, SGroup, Struct, Vec2 } from 'domain/entities';\nimport { KetFileNode } from '../../serializers.types';\n\nexport function prepareStructForKet(struct: Struct) {\n  const ketNodes: KetFileNode[] = [];\n\n  const rgFrags = new Set(); // skip this when writing molecules\n  for (const [rgnumber, rgroup] of struct.rgroups.entries()) {\n    // RGroups writing\n    rgroup.frags.forEach((frid) => rgFrags.add(frid));\n\n    const fragsAtoms = Array.from(rgroup.frags.values()).reduce(\n      (res, frid) => res.union(struct.getFragmentIds(frid)),\n      new Pile(),\n    );\n\n    ketNodes.push({\n      type: 'rgroup',\n      fragment: struct.clone(fragsAtoms),\n      center: getFragmentCenter(struct, fragsAtoms),\n      data: { rgnumber, rgroup },\n    });\n  }\n\n  const filteredFragmentIds = Array.from(struct.frags.keys()).filter(\n    (fid) => !rgFrags.has(fid),\n  );\n  addMolecules(ketNodes, filteredFragmentIds, struct);\n\n  struct.rxnArrows.forEach((item) => {\n    ketNodes.push({\n      type: 'arrow',\n      center: item.pos[0],\n      data: {\n        mode: item.mode,\n        pos: item.pos,\n        height: item.height,\n      },\n      selected: item.getInitiallySelected(),\n    });\n  });\n\n  struct.rxnPluses.forEach((item) => {\n    ketNodes.push({\n      type: 'plus',\n      center: item.pp,\n      data: {},\n      selected: item.getInitiallySelected(),\n    });\n  });\n\n  struct.simpleObjects.forEach((item) => {\n    ketNodes.push({\n      type: 'simpleObject',\n      center: item.pos[0],\n      data: {\n        mode: item.mode,\n        pos: item.pos,\n      },\n      selected: item.getInitiallySelected(),\n    });\n  });\n\n  struct.texts.forEach((item) => {\n    ketNodes.push({\n      type: 'text',\n      center: item.position,\n      data: {\n        content: item.content,\n        position: item.position,\n        pos: item.pos,\n      },\n      selected: item.getInitiallySelected(),\n    });\n  });\n\n  struct.images.forEach((image) => {\n    ketNodes.push(image.toKetNode());\n  });\n\n  struct.multitailArrows.forEach((multitailArrow) => {\n    ketNodes.push(multitailArrow.toKetNode());\n  });\n\n  ketNodes.forEach((ketNode) => {\n    if (ketNode.fragment) {\n      const sgroups: SGroup[] = Array.from(ketNode.fragment.sgroups.values());\n      const filteredSGroups = sgroups.filter((sg: SGroup) =>\n        sg.atoms.every((atom) => atom !== undefined),\n      );\n      const filteredSGroupsMap = new Pool<SGroup>();\n      filteredSGroups.forEach((sg, index) => {\n        filteredSGroupsMap.set(index, sg);\n      });\n      ketNode.fragment.sgroups = filteredSGroupsMap;\n    }\n  });\n\n  // TODO: check if this sorting operation is needed\n  // return ketNodes.sort((a, b) => a.center.x - b.center.x)\n  return ketNodes;\n}\n\nfunction getFragmentCenter(struct, atomSet) {\n  const bb = struct.getCoordBoundingBox(atomSet);\n  return Vec2.centre(bb.min, bb.max);\n}\n\n/**\n * Merge fragments which are in the same S-Groups to one fragment(molecule)\n * and add new fragments(molecules) to KetNodes\n * See: https://github.com/epam/ketcher/issues/2142\n */\nfunction addMolecules(\n  ketNodes: KetFileNode[],\n  fragmentIds: number[],\n  struct: Struct,\n) {\n  const sGroupFragmentsMap = generateSGroupFragmentsMap(\n    ketNodes,\n    fragmentIds,\n    struct,\n  );\n  const mergedFragments = Pile.unionIntersections(\n    Array.from(sGroupFragmentsMap.values()),\n  );\n\n  mergedFragments.forEach((fragments) => {\n    let atomSet = new Pile<number>();\n    fragments.forEach((fragmentId) => {\n      atomSet = atomSet.union(struct.getFragmentIds(fragmentId));\n    });\n    ketNodes.push({\n      type: 'molecule',\n      fragment: struct.clone(atomSet),\n      center: getFragmentCenter(struct, atomSet),\n    });\n  });\n}\n\n/**\n * @example Give `fragmentIds` is `[0, 1]`,\n * and S-Group0 includes fragment0 and fragment1,\n * and S-Group1 includes fragment1,\n * then return value should be\n * ```\n * {\n *   0: [0, 1],\n *   1: [1]\n * }\n * ```\n */\nfunction generateSGroupFragmentsMap(\n  ketNodes: KetFileNode[],\n  fragmentIds: number[],\n  struct: Struct,\n) {\n  const sGroupFragmentsMap = new Map<number, Pile<number>>();\n\n  fragmentIds.forEach((fragmentId) => {\n    const atomsInFragment = struct.getFragmentIds(fragmentId);\n\n    let hasAtomInSGroup = false;\n    atomsInFragment.forEach((atomId) => {\n      struct.atoms.get(atomId)?.sgs.forEach((sGroupId) => {\n        hasAtomInSGroup = true;\n        const fragmentSet = sGroupFragmentsMap.get(sGroupId);\n        if (fragmentSet) {\n          fragmentSet.add(fragmentId);\n        } else {\n          sGroupFragmentsMap.set(sGroupId, new Pile([fragmentId]));\n        }\n      });\n    });\n\n    if (!hasAtomInSGroup) {\n      ketNodes.push({\n        type: 'molecule',\n        fragment: struct.clone(atomsInFragment),\n        center: getFragmentCenter(struct, atomsInFragment),\n      });\n    }\n  });\n\n  return sGroupFragmentsMap;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Struct } from 'domain/entities';\nimport { ifDef } from 'utilities';\nimport { moleculeToKet } from './moleculeToKet';\n\nexport function rgroupToKet(struct: Struct, data) {\n  const body = {\n    rlogic: rgroupLogicToKet(data.rgnumber, data.rgroup),\n    ...moleculeToKet(struct),\n  };\n\n  return {\n    ...body,\n    type: 'rgroup',\n  };\n}\n\nfunction rgroupLogicToKet(rgnumber, rglogic) {\n  const result = {};\n\n  ifDef(result, 'number', rgnumber);\n  ifDef(result, 'range', rglogic.range, '');\n  ifDef(result, 'resth', rglogic.resth, false);\n  ifDef(result, 'ifthen', rglogic.ifthen, 0);\n\n  return result;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RGroup, Struct } from 'domain/entities';\n\nimport { ifDef } from 'utilities';\nimport { moleculeToStruct } from './moleculeToStruct';\n\nexport function rgroupToStruct(ketItem): Struct {\n  const struct = moleculeToStruct(ketItem);\n  const rgroup = rgroupLogicToStruct(ketItem.rlogic);\n  struct.frags.forEach((_value: any, key) => {\n    rgroup.frags.add(key);\n  });\n  if (ketItem.rlogic) struct.rgroups.set(ketItem.rlogic.number, rgroup);\n  return struct;\n}\n\nexport function rgroupLogicToStruct(rglogic) {\n  const params = {};\n  ifDef(params, 'range', rglogic.range);\n  ifDef(params, 'resth', rglogic.resth);\n  ifDef(params, 'ifthen', rglogic.ifthen);\n\n  return new RGroup(params);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RxnArrow, RxnPlus, Struct } from 'domain/entities';\nimport { getNodeWithInvertedYCoord } from '../helpers';\n\nexport function rxnToStruct(ketItem: any, struct: Struct): Struct {\n  if (ketItem.type === 'arrow') {\n    const arrow = new RxnArrow(getNodeWithInvertedYCoord(ketItem.data));\n    arrow.setInitiallySelected(ketItem.selected);\n    struct.rxnArrows.add(arrow);\n  } else {\n    const plus = new RxnPlus({\n      pp: {\n        x: ketItem.location[0],\n        y: -ketItem.location[1],\n        z: ketItem.location[2],\n      },\n    });\n    plus.setInitiallySelected(ketItem.selected);\n    struct.rxnPluses.add(plus);\n  }\n  return struct;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { getNodeWithInvertedYCoord } from '../helpers';\n\nexport function simpleObjectToKet(simpleObjectNode) {\n  return {\n    type: 'simpleObject',\n    data: getNodeWithInvertedYCoord(simpleObjectNode.data),\n    selected: simpleObjectNode.selected,\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { SimpleObject, SimpleObjectMode, Struct, Vec2 } from 'domain/entities';\nimport { getNodeWithInvertedYCoord } from '../helpers';\n\nexport function simpleObjectToStruct(ketItem: any, struct: Struct): Struct {\n  const object =\n    ketItem.data.mode === 'circle' ? circleToEllipse(ketItem) : ketItem.data;\n  const simpleObject = new SimpleObject(getNodeWithInvertedYCoord(object));\n  simpleObject.setInitiallySelected(ketItem.selected);\n  struct.simpleObjects.add(simpleObject);\n  return struct;\n}\n\n/**\n * @deprecated TODO to remove after release 2.3\n * As circle has been migrated to ellipses here is function for converting old files data with circles to ellipse type\n * @param ketItem\n */\nfunction circleToEllipse(ketItem) {\n  const radius = Vec2.dist(ketItem.data.pos[1], ketItem.data.pos[0]);\n  const pos0 = ketItem.data.pos[0];\n  return {\n    mode: SimpleObjectMode.ellipse,\n    pos: [\n      {\n        x: pos0.x - Math.abs(radius),\n        y: pos0.y - Math.abs(radius),\n        z: pos0.z - Math.abs(radius),\n      },\n      {\n        x: pos0.x + Math.abs(radius),\n        y: pos0.y + Math.abs(radius),\n        z: pos0.z + Math.abs(radius),\n      },\n    ],\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { getNodeWithInvertedYCoord } from '../helpers';\n\nexport function textToKet(textNode) {\n  return {\n    type: 'text',\n    data: getNodeWithInvertedYCoord(textNode.data),\n    selected: textNode.selected,\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Struct, Text } from 'domain/entities';\nimport { getNodeWithInvertedYCoord } from '../helpers';\n\nexport function textToStruct(ketItem: any, struct: Struct) {\n  const text = new Text(getNodeWithInvertedYCoord(ketItem.data));\n  text.setInitiallySelected(ketItem.selected);\n  struct.texts.add(text);\n  return struct;\n}\n","import { AttachmentPointName } from 'domain/types';\n\nexport enum KetNodeType {\n  MONOMER = 'monomer',\n  AMBIGUOUS_MONOMER = 'ambiguousMonomer',\n}\n\nexport interface IKetMonomerNode {\n  type: KetNodeType.MONOMER;\n  id: string;\n  seqid?: number;\n  position: {\n    x: number;\n    y: number;\n  };\n  alias: string;\n  templateId: string;\n}\n\nexport interface IKetAmbiguousMonomerNode {\n  type: KetNodeType.AMBIGUOUS_MONOMER;\n  id: string;\n  position: {\n    x: number;\n    y: number;\n  };\n  alias: string;\n  templateId: string;\n}\n\nexport type KetNode = IKetMonomerNode | IKetAmbiguousMonomerNode;\n\nexport interface IKetConnectionMonomerEndPoint {\n  monomerId: string;\n  attachmentPointId?: string;\n  groupId?: string;\n}\n\nexport interface IKetConnectionMoleculeEndPoint {\n  moleculeId: string;\n  atomId: string;\n}\n\nexport type IKetConnectionEndPoint = IKetConnectionMonomerEndPoint &\n  IKetConnectionMoleculeEndPoint;\n\nexport enum KetConnectionType {\n  SINGLE = 'single',\n  HYDROGEN = 'hydrogen',\n}\n\nexport interface IKetTemplateConnectionEndPoint {\n  monomerTemplateId: string;\n  attachmentPointId: AttachmentPointName;\n}\n\nexport interface IKetTemplateConnection {\n  connectionType: KetConnectionType;\n  endpoint1: IKetTemplateConnectionEndPoint;\n  endpoint2: IKetTemplateConnectionEndPoint;\n}\n\nexport interface IKetConnection {\n  connectionType: KetConnectionType;\n  label?: string;\n  endpoint1: IKetConnectionEndPoint;\n  endpoint2: IKetConnectionEndPoint;\n}\n\nexport type monomerClass =\n  | 'RNA'\n  | 'PEPTIDE'\n  | 'CHEM'\n  | 'UNKNOWN'\n  | 'DNA'\n  | 'MODDNA';\n\nexport enum KetMonomerClass {\n  AminoAcid = 'AminoAcid',\n  Sugar = 'Sugar',\n  Phosphate = 'Phosphate',\n  Base = 'Base',\n  Terminator = 'Terminator',\n  Linker = 'Linker',\n  Unknown = 'Unknown',\n  CHEM = 'CHEM',\n  RNA = 'RNA',\n  DNA = 'DNA',\n}\nexport type IKetAttachmentPointType = 'left' | 'right' | 'side';\n\nexport interface IKetAttachmentPoint {\n  attachmentAtom: number;\n  leavingGroup: {\n    atoms: number[];\n  };\n  type?: IKetAttachmentPointType;\n  label?: string;\n}\n\nexport interface IKetIdtAliases {\n  base: string;\n  modifications?: {\n    internal?: string;\n    endpoint3?: string;\n    endpoint5?: string;\n  };\n}\n\nexport enum KetTemplateType {\n  MONOMER_TEMPLATE = 'monomerTemplate',\n  MONOMER_GROUP_TEMPLATE = 'monomerGroupTemplate',\n  AMBIGUOUS_MONOMER_TEMPLATE = 'ambiguousMonomerTemplate',\n}\n\nexport enum KetAmbiguousMonomerTemplateSubType {\n  ALTERNATIVES = 'alternatives',\n  MIXTURE = 'mixture',\n}\n\nexport interface KetAmbiguousMonomerTemplateOption {\n  templateId: string;\n  ratio?: number;\n  probability?: number;\n}\n\nexport interface IKetMonomerTemplate {\n  type: KetTemplateType.MONOMER_TEMPLATE;\n  class?: KetMonomerClass;\n  monomerSubClass?:\n    | 'AminoAcid'\n    | 'Sugar'\n    | 'Phosphate'\n    | 'Base'\n    | 'Terminator'\n    | 'Linker'\n    | 'Unknown'\n    | 'CHEM';\n  naturalAnalogShort: string;\n  id: string;\n  fullName?: string;\n  alias: string;\n  naturalAnalog?: string;\n  attachmentPoints?: IKetAttachmentPoint[];\n  root: {\n    nodes;\n  };\n  classHELM?: string;\n  name?: string;\n  idtAliases?: IKetIdtAliases;\n  unresolved?: boolean;\n  atoms: [];\n  bonds: [];\n}\n\nexport interface IKetAmbiguousMonomerTemplate {\n  type: KetTemplateType.AMBIGUOUS_MONOMER_TEMPLATE;\n  id: string;\n  subtype: KetAmbiguousMonomerTemplateSubType;\n  options: KetAmbiguousMonomerTemplateOption[];\n  idtAliases?: IKetIdtAliases;\n  alias?: string;\n}\n\nexport interface IKetMonomerTemplateRef {\n  $ref: string;\n}\n\nexport enum KetMonomerGroupTemplateClass {\n  RNA = 'RNA',\n}\n\nexport interface IKetMonomerGroupTemplate {\n  id: string;\n  name: string;\n  type: KetTemplateType;\n  class?: KetMonomerGroupTemplateClass;\n  templates: IKetMonomerTemplateRef[];\n  connections: IKetTemplateConnection[];\n  idtAliases?: IKetIdtAliases;\n}\n\nexport interface IKetNodeRef {\n  $ref: string;\n}\n\nexport interface IKetMacromoleculesContentRootProperty {\n  root: {\n    nodes: IKetNodeRef[];\n    connections: IKetConnection[];\n    templates: IKetMonomerTemplateRef[];\n  };\n}\n\nexport interface IKetMacromoleculesContentOtherProperties {\n  [key: string]:\n    | KetNode\n    | IKetMonomerTemplate\n    | IKetMonomerGroupTemplate\n    | IKetAmbiguousMonomerTemplate;\n}\n\nexport type IKetMacromoleculesContent = IKetMacromoleculesContentRootProperty &\n  IKetMacromoleculesContentOtherProperties;\n","import { Operation } from 'domain/entities/Operation';\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\n\nexport class Command {\n  public operations: Operation[] = [];\n  private undoOperationReverse = false;\n  private setUndoOperationByPriority = false;\n\n  public addOperation(operation: Operation) {\n    this.operations.push(operation);\n  }\n\n  public merge(command: Command) {\n    this.operations = [...this.operations, ...command.operations];\n    this.setUndoOperationByPriority = command.setUndoOperationByPriority;\n  }\n\n  public setUndoOperationReverse() {\n    // this method marks command that operations should be invoked in opposite sequence during invert()\n    this.undoOperationReverse = true;\n  }\n\n  public setUndoOperationsByPriority() {\n    this.setUndoOperationByPriority = true;\n  }\n\n  public invert(renderersManagers: RenderersManager) {\n    const operations = this.undoOperationReverse\n      ? this.operations.slice().reverse()\n      : [...this.operations];\n\n    if (this.setUndoOperationByPriority) {\n      operations.sort((a, b) => (a.priority || 0) - (b.priority || 0));\n    }\n\n    operations.forEach((operation) => operation.invert(renderersManagers));\n    renderersManagers.reinitializeViewModel();\n    this.invertAfterAllOperations(renderersManagers, operations);\n    renderersManagers.runPostRenderMethods();\n  }\n\n  public execute(renderersManagers: RenderersManager) {\n    this.operations.forEach((operation) =>\n      operation.execute(renderersManagers),\n    );\n    renderersManagers.reinitializeViewModel();\n    this.executeAfterAllOperations(renderersManagers);\n    renderersManagers.runPostRenderMethods();\n  }\n\n  public executeAfterAllOperations(\n    renderersManagers: RenderersManager,\n    operations = this.operations,\n  ) {\n    operations.forEach((operation) => {\n      if (operation.executeAfterAllOperations) {\n        operation.executeAfterAllOperations(renderersManagers);\n      }\n    });\n  }\n\n  public invertAfterAllOperations(\n    renderersManagers: RenderersManager,\n    operations = this.operations,\n  ) {\n    operations.forEach((operation) => {\n      if (operation.invertAfterAllOperations) {\n        operation.invertAfterAllOperations(renderersManagers);\n      }\n    });\n  }\n\n  public clear() {\n    this.operations = [];\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Action } from '../editor/actions';\nimport { Render } from 'application/render';\nimport { Struct } from 'domain/entities';\nimport { selectionKeys } from './shared/constants';\nimport { PipelineSubscription, Subscription } from 'subscription';\n\nexport type EditorSelection = {\n  [key in typeof selectionKeys[number]]?: number[];\n};\n\nexport type FloatingToolsParams = {\n  visible?: boolean;\n  rotateHandlePosition?: { x: number; y: number };\n};\n\nexport enum EditorType {\n  Micromolecules = 0,\n  Macromolecules = 1,\n}\n\nexport interface Editor {\n  isDitrty: () => boolean;\n  setOrigin: () => void;\n  struct: (struct?: Struct, needToCenterStruct?: boolean) => Struct;\n  structToAddFragment: (struct: Struct) => Struct;\n  subscribe: (eventName: string, handler: (data?: any) => any) => any;\n  unsubscribe: (eventName: string, subscriber: any) => void;\n  selection: (arg?: EditorSelection | 'all' | null) => EditorSelection | null;\n  undo: () => void;\n  redo: () => void;\n  clear: () => void;\n  options: (value?: any) => any;\n  setOptions: (opts: string) => any;\n  zoom: (value?: any) => any;\n  structSelected: () => Struct;\n  explicitSelected: () => EditorSelection;\n  centerStruct: () => void;\n  zoomAccordingContent: (struct: Struct) => void;\n  errorHandler: ((message: string) => void) | null;\n  event: {\n    message: Subscription;\n    elementEdit: PipelineSubscription;\n    bondEdit: PipelineSubscription;\n    zoomIn: PipelineSubscription;\n    zoomOut: PipelineSubscription;\n    rgroupEdit: PipelineSubscription;\n    sgroupEdit: PipelineSubscription;\n    sdataEdit: PipelineSubscription;\n    quickEdit: PipelineSubscription;\n    attachEdit: PipelineSubscription;\n    removeFG: PipelineSubscription;\n    change: Subscription;\n    selectionChange: PipelineSubscription;\n    aromatizeStruct: PipelineSubscription;\n    dearomatizeStruct: PipelineSubscription;\n    enhancedStereoEdit: PipelineSubscription;\n    confirm: PipelineSubscription;\n    showInfo: PipelineSubscription;\n    apiSettings: PipelineSubscription;\n    cursor: Subscription;\n    updateFloatingTools: Subscription<FloatingToolsParams>;\n  };\n  update: (\n    action: Action | true,\n    ignoreHistory?: boolean,\n    options?: { resizeCanvas: boolean },\n  ) => void;\n  render: Render;\n  // supposed to be RotateController from 'ketcher-react' package\n  rotateController: any;\n  macromoleculeConvertionError: string | null | undefined;\n  setMacromoleculeConvertionError: (errorMessage: string) => void;\n  clearMacromoleculeConvertionError: () => void;\n  serverSettings: object;\n}\n","function Handler(f, once, priority) {\n  this.f = f\n  this.once = once\n  this.priority = priority\n}\n\nfunction Subscription() {\n  this.handlers = []\n}\nexports.Subscription = Subscription\n\nfunction insert(s, handler) {\n  var pos = 0\n  for (; pos < s.handlers.length; pos++)\n    if (s.handlers[pos].priority < handler.priority) break\n  s.handlers = s.handlers.slice(0, pos).concat(handler).concat(s.handlers.slice(pos))\n}\n\nSubscription.prototype.handlersForDispatch = function() {\n  var handlers = this.handlers, updated = null\n  for (var i = handlers.length - 1; i >= 0; i--) if (handlers[i].once) {\n    if (!updated) updated = handlers.slice()\n    updated.splice(i, 1)\n  }\n  if (updated) this.handlers = updated\n  return handlers\n}\n\nSubscription.prototype.add = function(f, priority) {\n  insert(this, new Handler(f, false, priority || 0))\n}\n\nSubscription.prototype.addOnce = function(f, priority) {\n  insert(this, new Handler(f, true, priority || 0))\n}\n\nSubscription.prototype.remove = function(f) {\n  for (var i = 0; i < this.handlers.length; i++) if (this.handlers[i].f == f) {\n    this.handlers = this.handlers.slice(0, i).concat(this.handlers.slice(i + 1))\n    return\n  }\n}\n\nSubscription.prototype.hasHandler = function() {\n  return this.handlers.length > 0\n}\n\nSubscription.prototype.dispatch = function() {\n  var handlers = this.handlersForDispatch()\n  for (var i = 0; i < handlers.length; i++)\n    handlers[i].f.apply(null, arguments)\n}\n\nfunction PipelineSubscription() {\n  Subscription.call(this)\n}\nexports.PipelineSubscription = PipelineSubscription\n\nPipelineSubscription.prototype = new Subscription\n\nPipelineSubscription.prototype.dispatch = function(value) {\n  var handlers = this.handlersForDispatch()\n  for (var i = 0; i < handlers.length; i++)\n    value = handlers[i].f(value)\n  return value\n}\n\nfunction StoppableSubscription() {\n  Subscription.call(this)\n}\nexports.StoppableSubscription = StoppableSubscription\n\nStoppableSubscription.prototype = new Subscription\n\nStoppableSubscription.prototype.dispatch = function() {\n  var handlers = this.handlersForDispatch()\n  for (var i = 0; i < handlers.length; i++) {\n    var result = handlers[i].f.apply(null, arguments)\n    if (result) return result\n  }\n}\n\nfunction DOMSubscription() {\n  Subscription.call(this)\n}\nexports.DOMSubscription = DOMSubscription\n\nDOMSubscription.prototype = new Subscription\n\nDOMSubscription.prototype.dispatch = function(event) {\n  var handlers = this.handlersForDispatch()\n  for (var i = 0; i < handlers.length; i++)\n    if (handlers[i].f(event) || event.defaultPrevented) return true\n  return false\n}\n","import { Nucleoside } from 'domain/entities/Nucleoside';\nimport { Nucleotide } from 'domain/entities/Nucleotide';\nimport { MonomerSequenceNode } from 'domain/entities/MonomerSequenceNode';\nimport { EmptySequenceNode } from 'domain/entities/EmptySequenceNode';\nimport { LinkerSequenceNode } from 'domain/entities';\n\nexport type SubChainNode =\n  | MonomerSequenceNode\n  | Nucleoside\n  | Nucleotide\n  | EmptySequenceNode\n  | LinkerSequenceNode;\n\nexport enum SequenceType {\n  RNA = 'RNA',\n  DNA = 'DNA',\n  PEPTIDE = 'PEPTIDE',\n}\n\nexport enum IsChainCycled {\n  NOT_CYCLED,\n  CYCLED,\n}\n","export enum ToolName {\n  monomer = 'monomer',\n  preset = 'preset',\n  selectRectangle = 'select-rectangle',\n  bondSingle = 'bond-single',\n  bondHydrogen = 'bond-hydrogen',\n  erase = 'erase',\n  clear = 'clear',\n  hand = 'hand',\n}\n","import { Subscription } from 'subscription';\nimport { ToolEventHandlerName } from 'application/editor/tools/Tool';\nimport { CoreEditor } from 'application/editor/Editor';\nimport ZoomTool from 'application/editor/tools/Zoom';\nimport { SequenceType } from 'domain/entities/monomer-chains/types';\nimport { ToolName } from 'application/editor/tools/types';\n\nexport let editorEvents;\n\nexport function resetEditorEvents() {\n  editorEvents = {\n    selectMonomer: new Subscription(),\n    selectPreset: new Subscription(),\n    selectTool: new Subscription(),\n    createBondViaModal: new Subscription(),\n    cancelBondCreationViaModal: new Subscription(),\n    selectMode: new Subscription(),\n    layoutModeChange: new Subscription(),\n    selectHistory: new Subscription(),\n    error: new Subscription(),\n    openErrorModal: new Subscription(),\n    openMonomerConnectionModal: new Subscription(),\n    mouseOverPolymerBond: new Subscription(),\n    mouseLeavePolymerBond: new Subscription(),\n    mouseOnMovePolymerBond: new Subscription(),\n    mouseOverMonomer: new Subscription(),\n    mouseOnMoveMonomer: new Subscription(),\n    mouseLeaveMonomer: new Subscription(),\n    mouseOverAttachmentPoint: new Subscription(),\n    mouseLeaveAttachmentPoint: new Subscription(),\n    mouseUpAttachmentPoint: new Subscription(),\n    mouseDownAttachmentPoint: new Subscription(),\n    mouseOverDrawingEntity: new Subscription(),\n    mouseLeaveDrawingEntity: new Subscription(),\n    mouseUpMonomer: new Subscription(),\n    rightClickSequence: new Subscription(),\n    rightClickCanvas: new Subscription(),\n    rightClickPolymerBond: new Subscription(),\n    rightClickSelectedMonomers: new Subscription(),\n    editSequence: new Subscription(),\n    startNewSequence: new Subscription(),\n    turnOnSequenceEditInRNABuilderMode: new Subscription(),\n    turnOffSequenceEditInRNABuilderMode: new Subscription(),\n    modifySequenceInRnaBuilder: new Subscription(),\n    mouseOverSequenceItem: new Subscription(),\n    mouseOnMoveSequenceItem: new Subscription(),\n    mouseLeaveSequenceItem: new Subscription(),\n    changeSequenceTypeEnterMode: new Subscription(),\n    toggleSequenceEditMode: new Subscription(),\n    toggleSequenceEditInRNABuilderMode: new Subscription(),\n    clickOnSequenceItem: new Subscription(),\n    mousedownBetweenSequenceItems: new Subscription(),\n    mouseDownOnSequenceItem: new Subscription(),\n    doubleClickOnSequenceItem: new Subscription(),\n    openConfirmationDialog: new Subscription(),\n    mouseUpAtom: new Subscription(),\n    updateMonomersLibrary: new Subscription(),\n    createAntisenseChain: new Subscription(),\n    copySelectedStructure: new Subscription(),\n    deleteSelectedStructure: new Subscription(),\n  };\n}\nresetEditorEvents();\nexport const renderersEvents: ToolEventHandlerName[] = [\n  'mouseOverPolymerBond',\n  'mouseLeavePolymerBond',\n  'mouseOnMovePolymerBond',\n  'mouseOverMonomer',\n  'mouseOnMoveMonomer',\n  'mouseOverAttachmentPoint',\n  'mouseLeaveAttachmentPoint',\n  'mouseUpAttachmentPoint',\n  'mouseDownAttachmentPoint',\n  'mouseLeaveMonomer',\n  'mouseOverDrawingEntity',\n  'mouseLeaveDrawingEntity',\n  'mouseUpMonomer',\n  'rightClickSequence',\n  'rightClickCanvas',\n  'rightClickPolymerBond',\n  'rightClickSelectedMonomers',\n  'editSequence',\n  'startNewSequence',\n  'turnOnSequenceEditInRNABuilderMode',\n  'turnOffSequenceEditInRNABuilderMode',\n  'modifySequenceInRnaBuilder',\n  'mouseOverSequenceItem',\n  'mouseOnMoveSequenceItem',\n  'mouseLeaveSequenceItem',\n  'changeSequenceTypeEnterMode',\n  'toggleSequenceEditMode',\n  'toggleSequenceEditInRNABuilderMode',\n  'clickOnSequenceItem',\n  'mousedownBetweenSequenceItems',\n  'mouseDownOnSequenceItem',\n  'doubleClickOnSequenceItem',\n  'mouseUpAtom',\n];\n\nexport const hotkeysConfiguration = {\n  RNASequenceType: {\n    shortcut: ['Control+Alt+r'],\n    handler: (editor: CoreEditor) => {\n      editor.events.changeSequenceTypeEnterMode.dispatch(SequenceType.RNA);\n    },\n  },\n  DNASequenceType: {\n    shortcut: ['Control+Alt+d'],\n    handler: (editor: CoreEditor) => {\n      editor.events.changeSequenceTypeEnterMode.dispatch(SequenceType.DNA);\n    },\n  },\n  PEPTIDESequenceTYpe: {\n    shortcut: ['Control+Alt+p'],\n    handler: (editor: CoreEditor) => {\n      editor.events.changeSequenceTypeEnterMode.dispatch(SequenceType.PEPTIDE);\n    },\n  },\n  exit: {\n    shortcut: ['Shift+Tab', 'Escape'],\n    handler: (editor: CoreEditor) => {\n      editor.events.selectTool.dispatch(ToolName.selectRectangle);\n    },\n  },\n  undo: {\n    shortcut: 'Mod+z',\n    handler: (editor: CoreEditor) => {\n      editor.onSelectHistory('undo');\n    },\n  },\n  redo: {\n    shortcut: ['Mod+Shift+z', 'Mod+y'],\n    handler: (editor: CoreEditor) => {\n      editor.onSelectHistory('redo');\n    },\n  },\n  erase: {\n    shortcut: ['Delete', 'Backspace'],\n    handler: (editor: CoreEditor) => {\n      // TODO create an ability to stop event propagation from mode event handlers to keyboard shortcuts handlers\n      if (editor.isSequenceEditMode) return;\n      editor.events.selectTool.dispatch(ToolName.erase);\n      editor.events.selectTool.dispatch(ToolName.selectRectangle);\n    },\n  },\n  clear: {\n    shortcut: ['Mod+Delete', 'Mod+Backspace'],\n    handler: (editor: CoreEditor) => {\n      editor.events.selectTool.dispatch(ToolName.clear);\n      editor.events.selectTool.dispatch(ToolName.selectRectangle);\n    },\n  },\n  'zoom-plus': {\n    shortcut: 'Mod+=',\n    handler: () => {\n      ZoomTool.instance.zoomIn();\n    },\n  },\n  'zoom-minus': {\n    shortcut: 'Mod+-',\n    handler: () => {\n      ZoomTool.instance.zoomOut();\n    },\n  },\n  'zoom-reset': {\n    shortcut: 'Mod+0',\n    handler: () => {\n      ZoomTool.instance.resetZoom();\n    },\n  },\n  'select-all': {\n    shortcut: 'Mod+a',\n    handler: (editor: CoreEditor) => {\n      const modelChanges =\n        editor.drawingEntitiesManager.selectAllDrawingEntities();\n      editor.renderersContainer.update(modelChanges);\n    },\n  },\n  hand: {\n    shortcut: 'Mod+Alt+h',\n    handler: (editor: CoreEditor) => {\n      editor.events.selectTool.dispatch(ToolName.hand);\n    },\n  },\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n// Single entry point to Raphal library\n\nimport { Vec2 } from 'domain/entities';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet Raphael: any;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet raphaelModule: any;\n\nif (typeof window !== 'undefined') {\n  raphaelModule = require('raphael');\n  // Some environments (vite, webpack etc) might resolve this import differently\n  // this is a workaround to make it work in all environments\n  Raphael =\n    typeof raphaelModule === 'function' ? raphaelModule : raphaelModule.default;\n\n  // TODO: refactor ugly prototype extensions to plain old functions\n  Raphael.el.translateAbs = function (x: number, y: number): void {\n    this.delta = this.delta || new Vec2();\n    // TODO check that only numbers might be passed to this function\n    this.delta.x += x - 0;\n    this.delta.y += y - 0;\n    this.transform(\n      't' + this.delta.x.toString() + ',' + this.delta.y.toString(),\n    );\n  };\n\n  Raphael.st.translateAbs = function (x: number, y: number): void {\n    this.forEach((el) => {\n      el.translateAbs(x, y);\n    });\n  };\n}\n\nexport default Raphael;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n// Visel is a shorthand for VISual ELement\n// It corresponds to a visualization (i.e. set of paths) of an atom or a bond.\nimport { Box2Abs } from 'domain/entities/box2Abs';\nimport { Vec2 } from 'domain/entities/vec2';\n\nclass Visel {\n  constructor(type) {\n    this.type = type;\n    this.paths = [];\n    /** @type {Box2Abs[]} */\n    this.boxes = [];\n    /** @type {Box2Abs | null} */\n    this.boundingBox = null;\n    this.oldBoundingBox = null;\n    this.exts = [];\n  }\n\n  add(path, bb, ext) {\n    this.paths.push(path);\n    if (bb) {\n      this.boxes.push(bb);\n      this.boundingBox =\n        this.boundingBox == null ? bb : Box2Abs.union(this.boundingBox, bb);\n    }\n    if (ext) this.exts.push(ext);\n  }\n\n  clear() {\n    this.paths = [];\n    this.boxes = [];\n    this.exts = [];\n    if (this.boundingBox !== null) {\n      this.oldBoundingBox = this.boundingBox.clone();\n    }\n    this.boundingBox = null;\n  }\n\n  translate(...args) {\n    if (args.length > 2) {\n      // TODO: replace to debug time assert\n      throw new Error('One vector or two scalar arguments expected');\n    }\n    if (args.length === 1) {\n      const vector = args[0];\n      this.translate(vector.x, vector.y);\n    } else {\n      const x = args[0];\n      const y = args[1];\n      const delta = new Vec2(x, y);\n      for (let i = 0; i < this.paths.length; ++i) {\n        this.paths[i].translateAbs(x, y);\n      }\n      for (let j = 0; j < this.boxes.length; ++j) {\n        this.boxes[j] = this.boxes[j].translate(delta);\n      }\n      if (this.boundingBox !== null) {\n        this.boundingBox = this.boundingBox.translate(delta);\n      }\n    }\n  }\n\n  /**\n   * @param {number} degree\n   * @param {Vec2} center\n   */\n  rotate(degree, center) {\n    for (let i = 0; i < this.paths.length; ++i) {\n      this.paths[i].rotate(degree, center.x, center.y);\n    }\n\n    for (let j = 0; j < this.boxes.length; ++j) {\n      this.boxes[j] = this.boxes[j].transform((point) =>\n        point.rotateAroundOrigin(degree, center),\n      );\n    }\n    if (this.boundingBox !== null) {\n      this.boundingBox = this.boundingBox.transform((point) =>\n        point.rotateAroundOrigin(degree, center),\n      );\n    }\n  }\n}\n\nexport default Visel;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs } from 'domain/entities';\nimport ReStruct from './restruct';\nimport { Render } from '../raphaelRender';\nimport { Scale } from 'domain/helpers';\nimport Visel from './visel';\nimport { IMAGE_KEY } from 'domain/constants';\n\nclass ReObject {\n  public visel: Visel;\n  public hover = false;\n  public hovering: any = null;\n  public selected = false;\n  public selectionPlate: any = null;\n\n  constructor(viselType: string) {\n    this.visel = new Visel(viselType);\n  }\n\n  changeSelectionStyle(options: any) {\n    const { hoverStyle } = options;\n    if (['simpleObject', IMAGE_KEY].includes(this.visel.type)) {\n      this.hovering?.attr({\n        'fill-opacity': this.selected ? 1 : 0,\n      });\n    } else {\n      this.hovering?.attr({\n        fill: hoverStyle.fill,\n        'fill-opacity': this.selected ? 1 : 0,\n      });\n    }\n  }\n\n  getVBoxObj(render: Render): Box2Abs | null {\n    let vbox = this.visel.boundingBox;\n    if (vbox === null) return null;\n    if (render.options.offset) {\n      vbox = vbox.translate(render.options.offset.negated());\n    }\n    return vbox.transform(Scale.canvasToModel, render.options);\n  }\n\n  setHover(hover: boolean, render: Render): void {\n    // TODO render should be field\n    const { options } = render;\n    if (hover) {\n      let noredraw = 'hovering' in this && this.hovering !== null;\n      if (noredraw) {\n        if (this.hovering.type === 'set') {\n          if (!this.hovering[0]) return;\n          noredraw = !this.hovering[0].removed;\n        } else {\n          noredraw = !this.hovering.removed;\n        }\n      }\n      if (noredraw) {\n        this.changeSelectionStyle(options);\n        this.hovering.show();\n      } else {\n        render.paper.setStart();\n        this.drawHover(render);\n        this.hovering = render.paper.setFinish();\n      }\n    } else if (this.hovering) {\n      this.changeSelectionStyle(options);\n      this.hovering.hide();\n    }\n\n    this.hover = hover;\n  }\n\n  drawHover(_render: Render): any {\n    throw new Error('ReObject.drawHover is not overridden.');\n  }\n\n  makeSelectionPlate(_restruct: ReStruct, _paper: any, _styles: any): any {\n    throw new Error('ReObject.makeSelectionPlate is not overridden');\n  }\n}\n\nexport default ReObject;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n/*\n  This map is used to draw anything on 'layers'\n  You can treat these values as z-index: background has the lowest z-index, indices has the highest\n*/\nexport enum LayerMap {\n  background = 'background',\n  images = 'images',\n  selectionPlate = 'selectionPlate',\n  selectionPoints = 'selectionPoints',\n  hovering = 'hovering',\n  atom = 'atom',\n  bondSkeleton = 'bondSkeleton',\n  warnings = 'warnings',\n  data = 'data',\n  additionalInfo = 'additionalInfo',\n  indices = 'indices',\n}\n\nexport enum StereoColoringType {\n  LabelsOnly = 'LabelsOnly',\n  BondsOnly = 'BondsOnly',\n  LabelsAndBonds = 'LabelsAndBonds',\n  Off = 'Off',\n}\n\nexport enum StereLabelStyleType {\n  IUPAC = 'Iupac',\n  Classic = 'Classic',\n  On = 'On',\n  Off = 'Off',\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Struct } from 'domain/entities/struct';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { inRange } from 'lodash';\nimport { BondAtoms } from 'application/editor/shared/utils.types';\n\nlet FRAC = Math.PI / 12; // '15'\n\nfunction setFracAngle(angle: number): void {\n  FRAC = (Math.PI / 180) * angle;\n}\n\nfunction calcAngle(pos0: Vec2, pos1: Vec2): number {\n  const v = Vec2.diff(pos1, pos0);\n  return Math.atan2(v.y, v.x);\n}\n\nfunction fracAngle(angle, angle2): number {\n  if (angle2) angle = calcAngle(angle, angle2);\n  return Math.round(angle / FRAC) * FRAC;\n}\n\nfunction calcNewAtomPos(pos0: Vec2, pos1: Vec2, ctrlKey: boolean): Vec2 {\n  const vector = new Vec2(1, 0).rotate(\n    ctrlKey ? calcAngle(pos0, pos1) : fracAngle(pos0, pos1),\n  );\n  vector.add_(pos0); // eslint-disable-line no-underscore-dangle\n  return vector;\n}\n\nfunction degrees(angle: number): number {\n  let degree = Math.round((angle / Math.PI) * 180);\n  if (degree > 180) degree -= 360;\n  else if (degree <= -180) degree += 360;\n  return degree;\n}\n\nconst BONDS_MERGE_ANGLE = 10; // ''\nconst BONDS_MERGE_SCALE = 0.2;\n\nfunction mergeBondsParams(\n  struct1: Struct,\n  bond1: BondAtoms,\n  struct2: Struct,\n  bond2: BondAtoms,\n) {\n  // TODO find a solution to remove not-null assertion from result atoms below\n  // https://github.com/epam/ketcher/issues/2652\n  const begin1 = struct1.atoms.get(bond1.begin)!;\n  const begin2 = struct2.atoms.get(bond2.begin)!;\n  const end1 = struct1.atoms.get(bond1.end)!;\n  const end2 = struct2.atoms.get(bond2.end)!;\n\n  const angle = calcAngle(begin1.pp, end1.pp) - calcAngle(begin2.pp, end2.pp);\n  const mergeAngle = Math.abs(degrees(angle) % 180);\n\n  const scale = Vec2.dist(begin1.pp, end1.pp) / Vec2.dist(begin2.pp, end2.pp);\n\n  const merged =\n    !inRange(mergeAngle, BONDS_MERGE_ANGLE, 180 - BONDS_MERGE_ANGLE) &&\n    inRange(scale, 1 - BONDS_MERGE_SCALE, 1 + BONDS_MERGE_SCALE);\n\n  return { merged, angle, scale, cross: Math.abs(degrees(angle)) > 90 };\n}\n\nexport default {\n  calcAngle,\n  fracAngle,\n  degrees,\n  setFracAngle,\n  mergeBondsParams,\n  calcNewAtomPos,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Vec2 } from 'domain/entities';\nimport utils from '../editor/shared/utils';\nimport { ShowHydrogenLabels } from './restruct/reatom';\nimport { RenderOptions } from './render.types';\n\nfunction defaultOptions(renderOptions: RenderOptions): RenderOptions {\n  const options = getOptionsWithConvertedUnits(renderOptions);\n\n  const scaleFactorMicro = options.microModeScale || 100;\n  const scaleFactorMacro = options.macroModeScale || 200;\n\n  if (options.rotationStep) {\n    utils.setFracAngle(options.rotationStep);\n  }\n\n  const labelFontSize = Math.ceil(1.9 * (scaleFactorMicro / 6));\n  const subFontSize = Math.ceil(0.5 * labelFontSize);\n\n  const defaultOptions: Partial<RenderOptions> = {\n    'dearomatize-on-load': false,\n    ignoreChiralFlag: false,\n    disableQueryElements: null,\n    // flags for debugging\n    showAtomIds: false,\n    showBondIds: false,\n    showHalfBondIds: false,\n    showLoopIds: false,\n    // rendering customization flags\n    // TODO: hide enhanced flags opts\n    showValenceWarnings: true,\n    autoScale: false, // scale structure to fit into the given view box, used in view mode\n    autoScaleMargin: 0,\n    maxBondLength: 0, // 0 stands for \"not specified\"\n    atomColoring: true,\n    hideImplicitHydrogen: false,\n    hideTerminalLabels: false,\n    // atoms\n    carbonExplicitly: false,\n    showCharge: true,\n    showHydrogenLabels: ShowHydrogenLabels.TerminalAndHetero,\n    showValence: true,\n    // bonds\n    aromaticCircle: true,\n\n    microModeScale: scaleFactorMicro,\n    macroModeScale: scaleFactorMacro,\n    zoom: 1.0,\n    offset: new Vec2(),\n\n    lineWidth: scaleFactorMicro / 20,\n    bondSpace: options.bondSpacingInPx || scaleFactorMicro / 7,\n    stereoBond: options.stereoBondWidthInPx || scaleFactorMicro / 7,\n    subFontSize: options.fontszsubInPx || subFontSize,\n    font: '30px Arial',\n    fontszInPx: options.fontszInPx || labelFontSize,\n    fontszsubInPx: options.fontszsubInPx || subFontSize,\n    fontRLabel: (options.fontszInPx || labelFontSize) * 1.2,\n    fontRLogic: (options.fontszInPx || labelFontSize) * 0.7,\n\n    radiusScaleFactor: 0.38,\n\n    /* styles */\n    lineattr: {\n      stroke: '#000',\n      'stroke-width': options.bondThicknessInPx || scaleFactorMicro / 20,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round',\n    },\n    arrowSnappingStyle: {\n      fill: '#365CFF',\n      stroke: '#365CFF',\n    },\n    bondSnappingStyle: {\n      fill: '#365CFF',\n      stroke: '#365CFF',\n      'stroke-width': options.bondThicknessInPx * 1.5,\n    },\n    /* eslint-enable quote-props */\n    selectionStyle: {\n      fill: '#57FF8F',\n      stroke: '#57FF8F',\n    },\n    hoverStyle: {\n      stroke: '#0097A8',\n      fill: '#CCFFDD',\n      'stroke-width': (0.6 * scaleFactorMicro) / 20,\n    },\n    innerHoverStyle: {\n      stroke: '#CCFFDD',\n      fill: 'none',\n      'stroke-width': (4.6 * scaleFactorMicro) / 20,\n    },\n    sgroupBracketStyle: {\n      stroke: 'darkgray',\n      'stroke-width': (0.5 * scaleFactorMicro) / 20,\n    },\n    lassoStyle: {\n      stroke: 'gray',\n      'stroke-width': '1px',\n    },\n    selectionStyleSimpleObject: {\n      stroke: '#57FF8F',\n      'stroke-width': scaleFactorMicro / 4,\n      'stroke-linecap': 'round',\n    },\n    movingStyle: {\n      cursor: 'all-scroll',\n    },\n    atomSelectionPlateRadius: options.fontszInPx || labelFontSize,\n    contractedFunctionalGroupSize: 50,\n\n    previewOpacity: 0.5,\n    viewOnlyMode: false,\n  };\n\n  return Object.assign({}, defaultOptions, options);\n}\n\nconst measureMap = {\n  px: 1,\n  cm: 37.795278,\n  pt: 1.333333,\n  inch: 96,\n};\n\nfunction convertValue(\n  value: number,\n  measureFrom: keyof typeof measureMap,\n  measureTo: keyof typeof measureMap,\n) {\n  const convertedValue =\n    measureTo === 'px' || measureTo === 'pt'\n      ? ((value * measureMap[measureFrom]) / measureMap[measureTo]).toFixed()\n      : ((value * measureMap[measureFrom]) / measureMap[measureTo]).toFixed(3);\n  return Number(convertedValue);\n}\n\nfunction convertHashSpacingToPx(\n  value: number,\n  measureFrom: keyof typeof measureMap,\n) {\n  const convertedValue = (value * measureMap[measureFrom]) / measureMap.px;\n  return Number(convertedValue.toFixed(1));\n}\n\nexport function getOptionsWithConvertedUnits(\n  options: RenderOptions,\n): RenderOptions {\n  const convertedOptions: Partial<\n    Pick<\n      RenderOptions,\n      | 'fontszInPx'\n      | 'fontszsubInPx'\n      | 'bondSpacingInPx'\n      | 'bondThicknessInPx'\n      | 'stereoBondWidthInPx'\n      | 'microModeScale'\n      | 'hashSpacingInPx'\n    >\n  > = {};\n  const defaultUnit = 'px';\n\n  if (typeof options.fontsz !== 'undefined') {\n    convertedOptions.fontszInPx = convertValue(\n      options.fontsz,\n      options.fontszUnit || defaultUnit,\n      defaultUnit,\n    );\n  }\n\n  if (typeof options.fontszsub !== 'undefined') {\n    convertedOptions.fontszsubInPx = convertValue(\n      options.fontszsub,\n      options.fontszsubUnit || defaultUnit,\n      defaultUnit,\n    );\n  }\n\n  if (\n    typeof options.bondSpacing !== 'undefined' &&\n    typeof options.bondLength !== 'undefined'\n  ) {\n    const convertedBondLength = convertValue(\n      options.bondLength,\n      options.bondLengthUnit || defaultUnit,\n      defaultUnit,\n    );\n\n    // bondSpacing is a percentage of bondLength\n    convertedOptions.bondSpacingInPx =\n      (options.bondSpacing / 100) * convertedBondLength;\n  }\n\n  if (typeof options.bondThickness !== 'undefined') {\n    convertedOptions.bondThicknessInPx = convertValue(\n      options.bondThickness,\n      options.bondThicknessUnit || defaultUnit,\n      defaultUnit,\n    );\n  }\n\n  if (typeof options.stereoBondWidth !== 'undefined') {\n    convertedOptions.stereoBondWidthInPx = convertValue(\n      options.stereoBondWidth,\n      options.stereoBondWidthUnit || defaultUnit,\n      defaultUnit,\n    );\n  }\n\n  if (\n    typeof options.bondLength !== 'undefined' &&\n    typeof options.bondLengthUnit !== 'undefined'\n  ) {\n    convertedOptions.microModeScale = convertValue(\n      options.bondLength,\n      options.bondLengthUnit || defaultUnit,\n      defaultUnit,\n    );\n  }\n\n  if (typeof options.hashSpacing !== 'undefined') {\n    convertedOptions.hashSpacingInPx = convertHashSpacingToPx(\n      options.hashSpacing,\n      options.hashSpacingUnit || defaultUnit,\n    );\n  }\n  return {\n    ...options,\n    ...convertedOptions,\n  };\n}\n\nexport default defaultOptions;\n","import { RxnArrowMode, Vec2 } from 'domain/entities';\nimport { StereLabelStyleType } from 'application/render/restruct';\n\nexport type RenderOptionStyles = Record<string, string | number>;\n\nexport enum MeasurementUnits {\n  Px = 'px',\n  Cm = 'cm',\n  Pt = 'pt',\n  Inch = 'inch',\n}\n\nexport enum UsageInMacromolecule {\n  MonomerConnectionsModal,\n  MonomerPreview,\n  BondPreview,\n}\n\nexport type RenderOptions = {\n  width?: number;\n  height?: number;\n\n  rotationStep?: number;\n  bondSpacing: number;\n  bondLength: number;\n  bondLengthUnit: MeasurementUnits;\n  stereoBondWidth: number;\n  stereoBondWidthUnit: MeasurementUnits;\n  bondThickness: number;\n  bondThicknessUnit: MeasurementUnits;\n\n  downScale?: boolean;\n  rescaleAmount?: number;\n  radiusScaleFactor: number;\n\n  'dearomatize-on-load'?: boolean;\n  ignoreChiralFlag?: boolean;\n  disableQueryElements?: string[] | null;\n\n  showAtomIds: boolean;\n  showBondIds: boolean;\n  showHalfBondIds: boolean;\n  showLoopIds: boolean;\n  showValenceWarnings: boolean;\n  autoScale: boolean;\n  autoScaleMargin: number;\n  maxBondLength: number;\n  atomColoring: boolean;\n  hideImplicitHydrogen: boolean;\n  hideTerminalLabels: boolean;\n  carbonExplicitly: boolean;\n  showCharge: boolean;\n  showHydrogenLabels: string;\n  showValence: boolean;\n  aromaticCircle: boolean;\n  microModeScale: number;\n  macroModeScale: number;\n  zoom: number;\n  offset: Vec2;\n  lineWidth: number;\n\n  bondSpace: number;\n  stereoBond: number;\n  subFontSize: number;\n  font: string;\n  fontsz: number;\n  fontszUnit: MeasurementUnits;\n  fontszsubUnit: MeasurementUnits;\n  fontszsub: number;\n  fontRLabel: number;\n  fontRLogic: number;\n\n  hashSpacing: number;\n  hashSpacingUnit: MeasurementUnits;\n\n  /* styles */\n  lineattr: RenderOptionStyles;\n  multitailArrow: RenderOptionStyles;\n  arrowSnappingStyle: RenderOptionStyles;\n  bondSnappingStyle: RenderOptionStyles;\n  selectionStyle: RenderOptionStyles;\n  hoverStyle: RenderOptionStyles;\n  innerHoverStyle: RenderOptionStyles;\n  movingStyle: RenderOptionStyles;\n  sgroupBracketStyle: RenderOptionStyles;\n  lassoStyle: RenderOptionStyles;\n  selectionStyleSimpleObject: RenderOptionStyles;\n  hoverStyleSimpleObject: RenderOptionStyles;\n  atomSelectionPlateRadius: number;\n  contractedFunctionalGroupSize: number;\n\n  stereoLabelStyle?: StereLabelStyleType;\n\n  previewOpacity: number;\n\n  connectedMonomerAttachmentPoints?: string[];\n  currentlySelectedMonomerAttachmentPoint?: string;\n  labelInMonomerConnectionsModal?: boolean;\n  labelInPreview?: boolean;\n\n  // Converted\n  fontszInPx: number;\n  fontszsubInPx: number;\n  bondSpacingInPx: number;\n  bondThicknessInPx: number;\n  stereoBondWidthInPx: number;\n  hashSpacingInPx: number;\n  usageInMacromolecule?: UsageInMacromolecule;\n  viewOnlyMode?: boolean;\n};\n\nexport interface RelativeBox {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport interface ArrowItem {\n  mode?: RxnArrowMode;\n  pos: Vec2[];\n  height: number;\n}\n\nexport type ViewBox = {\n  minX: number;\n  minY: number;\n  width: number;\n  height: number;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RaphaelAxisAlignedBoundingBox, RaphaelPaper } from 'raphael';\nimport { Atom, Bond, Box2Abs, HalfBond, Vec2 } from 'domain/entities';\nimport assert from 'assert';\nimport { ReStruct, LayerMap } from './restruct';\nimport Visel from './restruct/visel';\nimport {\n  RelativeBox,\n  RenderOptions,\n  UsageInMacromolecule,\n} from './render.types';\n\nfunction relBox(box: RaphaelAxisAlignedBoundingBox): RelativeBox {\n  return {\n    x: box.x,\n    y: box.y,\n    width: box.width,\n    height: box.height,\n  };\n}\n\n/**\n * Finds intersection of a ray and a box and\n * Returns the shift magnitude to avoid it\n */\nfunction shiftRayBox(p: Vec2, d: Vec2, bb: Box2Abs) {\n  assert(!!p);\n  assert(!!d);\n  assert(!!bb);\n\n  // four corner points of the box\n  const b = [\n    bb.p0,\n    new Vec2(bb.p1.x, bb.p0.y),\n    bb.p1,\n    new Vec2(bb.p0.x, bb.p1.y),\n  ];\n\n  const r = b.map((v) => v.sub(p)); // b relative to p\n\n  d = d.normalized();\n\n  const rc = r.map((v) => Vec2.cross(v, d)); // cross prods\n  const rd = r.map((v) => Vec2.dot(v, d)); // dot prods\n\n  // find foremost points on the right and on the left of the ray\n  let pid = -1;\n  let nid = -1;\n\n  for (let i = 0; i < 4; ++i) {\n    if (rc[i] > 0) {\n      if (pid < 0 || rd[pid] < rd[i]) pid = i;\n    } else if (nid < 0 || rd[nid] < rd[i]) {\n      nid = i;\n    }\n  }\n\n  if (nid < 0 || pid < 0) {\n    // no intersection, no shift\n    return 0;\n  }\n\n  // check the order\n  const id0 = rd[pid] > rd[nid] ? nid : pid;\n  const id1 = rd[pid] > rd[nid] ? pid : nid;\n\n  // simple proportion to calculate the shift\n  /* eslint-disable no-mixed-operators */\n  return (\n    rd[id0] +\n    (Math.abs(rc[id0]) * (rd[id1] - rd[id0])) /\n      (Math.abs(rc[id0]) + Math.abs(rc[id1]))\n  );\n}\nfunction calcCoordinates(aPoint: Vec2, bPoint: Vec2, lengthHyp: number) {\n  const obj: {\n    pos1: null | { x: number; y: number };\n    pos2: null | { x: number; y: number };\n  } = { pos1: null, pos2: null };\n  const oPos2 = { x: bPoint.x - aPoint.x, y: bPoint.y - aPoint.y };\n  const c =\n    (lengthHyp ** 2 - oPos2.x * oPos2.x - oPos2.y * oPos2.y - lengthHyp ** 2) /\n    -2;\n  const a = oPos2.x * oPos2.x + oPos2.y * oPos2.y;\n  if (oPos2.x !== 0) {\n    const b = -2 * oPos2.y * c;\n    const e = c * c - lengthHyp * lengthHyp * oPos2.x * oPos2.x;\n    const D = b * b - 4 * a * e;\n    if (D > 0) {\n      obj.pos1 = { x: 0, y: 0 };\n      obj.pos2 = { x: 0, y: 0 };\n      obj.pos1.y = (-b + Math.sqrt(D)) / (2 * a);\n      obj.pos2.y = (-b - Math.sqrt(D)) / (2 * a);\n      obj.pos1.x = (c - obj.pos1.y * oPos2.y) / oPos2.x;\n      obj.pos2.x = (c - obj.pos2.y * oPos2.y) / oPos2.x;\n    }\n  } else {\n    obj.pos1 = { x: 0, y: 0 };\n    obj.pos2 = { x: 0, y: 0 };\n    obj.pos1.y = c / oPos2.y;\n    obj.pos2.y = c / oPos2.y;\n    obj.pos1.x = -Math.sqrt(lengthHyp ** 2 - c ** 2 / oPos2.y ** 2);\n    obj.pos2.x = Math.sqrt(lengthHyp ** 2 - c ** 2 / oPos2.y ** 2);\n  }\n  if (obj.pos1 !== null) {\n    obj.pos1.x += aPoint.x;\n    obj.pos1.y += aPoint.y;\n  }\n  if (obj.pos2 !== null) {\n    obj.pos2.x += aPoint.x;\n    obj.pos2.y += aPoint.y;\n  }\n  return obj;\n}\n\nfunction getCIPValuePath({\n  paper,\n  cipLabelPosition,\n  atomOrBond,\n  options,\n}: {\n  paper: RaphaelPaper;\n  cipLabelPosition: Vec2;\n  atomOrBond: Atom | Bond;\n  options: RenderOptions;\n}) {\n  const text = paper\n    .text(cipLabelPosition.x, cipLabelPosition.y, `(${atomOrBond.cip})`)\n    .attr({\n      font: options.font,\n      'font-size': options.fontszInPx,\n    });\n  const box = text.getBBox();\n  const path = paper.set();\n  const rect = paper\n    .rect(box.x - 1, box.y - 1, box.width + 2, box.height + 2, 3, 3)\n    .attr({ fill: '#fff', stroke: '#fff' });\n  path.push(rect.toFront(), text.toFront());\n\n  return {\n    path,\n    text,\n    rectangle: rect,\n  };\n}\n\nfunction drawCIPLabel({\n  atomOrBond,\n  position,\n  restruct,\n  visel,\n}: {\n  atomOrBond: Bond | Atom;\n  position: Vec2;\n  restruct: ReStruct;\n  visel: Visel;\n}) {\n  const { options, paper } = restruct.render;\n  const path = paper.set();\n\n  const cipLabelPosition = position.scaled(options.microModeScale);\n  const cipValuePath = getCIPValuePath({\n    paper,\n    cipLabelPosition,\n    atomOrBond,\n    options,\n  });\n\n  if (atomOrBond instanceof Atom) {\n    const box = relBox(cipValuePath.path.getBBox());\n\n    cipValuePath.path.translateAbs(0.5 * box.width, -0.5 * box.height);\n  }\n\n  path.push(cipValuePath.path.toFront());\n\n  restruct.addReObjectPath(LayerMap.additionalInfo, visel, path, null, true);\n\n  return cipValuePath;\n}\n\nfunction updateHalfBondCoordinates(\n  hb1: HalfBond,\n  hb2: HalfBond,\n  xShift: number,\n): [HalfBond, HalfBond] {\n  if (hb1.p.y !== hb2.p.y) return [hb1, hb2];\n  if (hb1.p.x < hb2.p.x && hb1.p.y === hb2.p.y) {\n    hb1.p.x = hb1.p.x + xShift;\n  } else if (hb1.p.x > hb2.p.x) {\n    hb1.p.x = hb1.p.x - xShift;\n  }\n\n  return [hb1, hb2];\n}\n\nfunction escapeHtml(str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\nfunction useLabelStyles(\n  attachmentPointSelected: boolean,\n  attachmentPointUsed: boolean,\n  usageInMacromolecule: UsageInMacromolecule,\n): {\n  color: string;\n  fill: string;\n  stroke: string;\n} {\n  let color = '#585858';\n  let fill = '#FFF';\n  let stroke = '#7C7C7F';\n\n  switch (usageInMacromolecule) {\n    case UsageInMacromolecule.MonomerPreview:\n      stroke = 'none';\n      if (attachmentPointUsed) {\n        fill = '#E1E5EA';\n        color = '#B4B9D6';\n      }\n      break;\n    case UsageInMacromolecule.MonomerConnectionsModal:\n      if (attachmentPointSelected) {\n        fill = '#167782';\n        color = '#FFF';\n      } else if (attachmentPointUsed) {\n        fill = '#E1E5EA';\n        color = '#B4B9D6';\n        stroke = '#B4B9D6';\n      }\n      break;\n    case UsageInMacromolecule.BondPreview:\n      if (attachmentPointSelected) {\n        fill = '#CDF1FC';\n      } else if (attachmentPointUsed) {\n        fill = '#E1E5EA';\n        color = '#B4B9D6';\n      }\n      stroke = 'none';\n      break;\n    default:\n      break;\n  }\n\n  return { color, fill, stroke };\n}\n\nconst util = {\n  relBox,\n  shiftRayBox,\n  calcCoordinates,\n  drawCIPLabel,\n  updateHalfBondCoordinates,\n  escapeHtml,\n  useLabelStyles,\n};\n\nexport default util;\n","import { tfx } from 'utilities';\nimport { Vec2 } from 'domain/entities';\n\ninterface Point2D {\n  x: number;\n  y: number;\n}\n\nexport class PathBuilder {\n  static generatePoint(point: Point2D): string {\n    return `${tfx(point.x)},${tfx(point.y)}`;\n  }\n\n  private pathParts: Array<string>;\n\n  constructor(initialPath?: string) {\n    this.pathParts = [];\n    if (initialPath) {\n      this.pathParts.push(initialPath);\n    }\n  }\n\n  addMovement(to: Point2D): PathBuilder {\n    this.pathParts.push(`M${PathBuilder.generatePoint(to)}`);\n    return this;\n  }\n\n  addLine(to: Point2D, from?: Point2D): PathBuilder {\n    if (from) {\n      this.addMovement(from);\n    }\n    this.pathParts.push(`L${PathBuilder.generatePoint(to)}`);\n    return this;\n  }\n\n  addClosedLine(to: Point2D, from?: Point2D): PathBuilder {\n    this.addLine(to, from);\n    const index = this.pathParts.length - 1;\n    this.pathParts[index] = this.pathParts[index].concat('Z');\n    return this;\n  }\n\n  addQuadraticBezierCurve(control: Point2D, to: Point2D): PathBuilder {\n    this.pathParts.push(\n      `Q${PathBuilder.generatePoint(control)} ${PathBuilder.generatePoint(to)}`,\n    );\n    return this;\n  }\n\n  addPathParts(pathParts: Array<string>): PathBuilder {\n    this.pathParts = this.pathParts.concat(pathParts);\n    return this;\n  }\n\n  addOpenArrowPathParts(\n    start: Vec2,\n    arrowLength: number,\n    tipXOffset = 7,\n    tipYOffset = 5,\n  ): PathBuilder {\n    const endX = start.x + arrowLength;\n    const end = new Vec2(endX, start.y);\n    const tipX = endX - tipXOffset;\n\n    return this.addLine(end, start)\n      .addLine({ x: tipX, y: end.y - tipYOffset })\n      .addLine({ x: tipX, y: end.y + tipYOffset }, end);\n  }\n\n  addFilledTriangleArrowPathParts(\n    start: Vec2,\n    arrowLength: number,\n    triangleLength = 8,\n    triangleWidth = 4,\n  ): PathBuilder {\n    const endX = start.x + arrowLength;\n    const end = new Vec2(endX, start.y);\n    const triangleBottom = new Vec2(endX - triangleLength, end.y);\n    const tipX = endX - triangleLength;\n\n    return this.addLine(start, triangleBottom)\n      .addLine({ x: tipX, y: end.y - triangleWidth }, end)\n      .addClosedLine({ x: tipX, y: end.y + triangleWidth });\n  }\n\n  addMultitailArrowBase(\n    topY: number,\n    bottomY: number,\n    spineX: number,\n    tailLength: number,\n    cubicBezierOffset = 6,\n  ): PathBuilder {\n    const tailX = spineX - tailLength;\n    const tailStart = spineX - cubicBezierOffset;\n\n    return this.addMovement({ x: tailX, y: topY })\n      .addLine({ x: tailStart, y: topY })\n      .addQuadraticBezierCurve(\n        { x: spineX, y: topY },\n        { x: spineX, y: topY + cubicBezierOffset },\n      )\n      .addLine({ x: spineX, y: bottomY - cubicBezierOffset })\n      .addQuadraticBezierCurve(\n        { x: spineX, y: bottomY },\n        { x: tailStart, y: bottomY },\n      )\n      .addLine({ x: tailX, y: bottomY });\n  }\n\n  build(): string {\n    return this.pathParts.join(' ');\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RaphaelPaper, Element } from 'raphael';\nimport { HalfBond, RxnArrowMode, Vec2 } from 'domain/entities';\n\nimport { getOptionsWithConvertedUnits } from './options';\nimport Raphael from './raphael-ext';\nimport svgPath from 'svgpath';\nimport util from './util';\nimport { ArrowItem, RelativeBox, RenderOptions } from './render.types';\nimport { tfx } from 'utilities';\nimport { PathBuilder } from './pathBuilder';\n\nconst ARROW_HEAD_LENGHT = 0.25; // 10\nconst ARROW_HEAD_WIDTH = 0.125; // 5\nconst ARROW_HEAD_ATTR = 0.1; // 4\nconst ARROW_OFFSET = 0.1; // 4\nconst ARROW_DASH_INTERVAL = 0.0875; // 3.5\nconst ARROW_FAIL_SIGN_WIDTH = 0.2; // 8\nconst ARROW_UNBALANCED_OFFSET = 0.2; // 8 (used to be 15)\n\nexport function getArrowHeadDimensions(options: RenderOptions) {\n  const { microModeScale } = getOptionsWithConvertedUnits(options);\n\n  return {\n    arrowHeadLength: ARROW_HEAD_LENGHT * microModeScale,\n    arrowHeadWidth: ARROW_HEAD_WIDTH * microModeScale,\n    arrowHeadAttr: ARROW_HEAD_ATTR * microModeScale,\n    arrowOffset: ARROW_OFFSET * microModeScale,\n  };\n}\n\nfunction getUnbalancedArrowHeadOffset(options: RenderOptions) {\n  const { microModeScale } = getOptionsWithConvertedUnits(options);\n\n  return ARROW_UNBALANCED_OFFSET * microModeScale;\n}\n\nfunction rectangle(paper: RaphaelPaper, points: [Vec2, Vec2]) {\n  return paper.rect(\n    tfx(Math.min(points[0].x, points[1].x)),\n    tfx(Math.min(points[0].y, points[1].y)),\n    tfx(Math.abs(points[1].x - points[0].x)),\n    tfx(Math.abs(points[1].y - points[0].y)),\n  );\n}\n\nfunction rectangleArrowHighlightAndSelection(\n  _paper: RaphaelPaper,\n  { pos: [start], height }: ArrowItem,\n  length: number,\n  angle: number,\n) {\n  const endX = start.x + length;\n  const [wOffset, hOffset] = [5, height || 8];\n\n  const path =\n    `M${tfx(start.x - wOffset)},${tfx(start.y)}` +\n    `L${tfx(start.x - wOffset)},${tfx(start.y - hOffset)}` +\n    `L${tfx(endX + wOffset)},${tfx(start.y - hOffset)}` +\n    `L${tfx(endX + wOffset)},${tfx(start.y + (!height ? hOffset : 0))}` +\n    `L${tfx(start.x - wOffset)},${tfx(start.y + (!height ? hOffset : 0))}Z`;\n\n  return svgPath(path).rotate(angle, start.x, start.y).toString();\n}\n\nfunction ellipse(paper: RaphaelPaper, points: [Vec2, Vec2]) {\n  const rad = Vec2.diff(points[1], points[0]);\n  const rx = rad.x / 2;\n  const ry = rad.y / 2;\n  return paper.ellipse(\n    points[0].x + rx,\n    points[0].y + ry,\n    Math.abs(rx),\n    Math.abs(ry),\n  );\n}\n\nfunction polyline(paper: RaphaelPaper, points: Vec2[]) {\n  const path = ['M', points[0].x, points[0].y];\n  for (let i = 1; i < points.length; i++)\n    path.push('L', points[i].x, points[i].y);\n  return paper.path(path);\n}\n\nfunction line(paper: RaphaelPaper, points: [Vec2, Vec2]) {\n  const path = ['M', points[0].x, points[0].y];\n  path.push('L', points[1].x, points[1].y);\n  return paper.path(path);\n}\n\nfunction arrow(\n  paper: RaphaelPaper,\n  item: ArrowItem,\n  length: number,\n  angle: number,\n  options: RenderOptions,\n  isResizing: boolean,\n) {\n  const shouldApplySnappingStyle =\n    isResizing &&\n    ['0', '-0', '90', '-90', '180', '-180'].includes(angle.toFixed());\n\n  switch (item.mode) {\n    case RxnArrowMode.OpenAngle: {\n      return arrowOpenAngle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.FilledTriangle: {\n      return arrowFilledTriangle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.FilledBow: {\n      return arrowFilledBow(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.DashedOpenAngle: {\n      return arrowDashedOpenAngle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.Failed: {\n      return arrowFailed(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.Retrosynthetic: {\n      return arrowRetrosynthetic(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.BothEndsFilledTriangle: {\n      return arrowBothEndsFilledTriangle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.EquilibriumFilledHalfBow: {\n      return arrowEquilibriumFilledHalfBow(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.EquilibriumFilledTriangle: {\n      return arrowEquilibriumFilledTriangle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.EquilibriumOpenAngle: {\n      return arrowEquilibriumOpenAngle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.UnbalancedEquilibriumFilledHalfBow: {\n      return arrowUnbalancedEquilibriumFilledHalfBow(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.UnbalancedEquilibriumOpenHalfAngle: {\n      return arrowUnbalancedEquilibriumOpenHalfAngle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.UnbalancedEquilibriumLargeFilledHalfBow: {\n      return arrowUnbalancedEquilibriumLargeFilledHalfBow(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.UnbalancedEquilibriumFilledHalfTriangle: {\n      return arrowUnbalancedEquilibriumFilledHalfTriangle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.EllipticalArcFilledBow: {\n      return arrowEllipticalArcFilledBow(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.EllipticalArcFilledTriangle: {\n      return arrowEllipticalArcFilledTriangle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.EllipticalArcOpenAngle: {\n      return arrowEllipticalArcOpenAngle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n    case RxnArrowMode.EllipticalArcOpenHalfAngle: {\n      return arrowEllipticalArcOpenHalfAngle(\n        paper,\n        item,\n        length,\n        angle,\n        options,\n        shouldApplySnappingStyle,\n      );\n    }\n  }\n}\n\nfunction arrowEllipticalArcFilledBow(\n  paper: RaphaelPaper,\n  { pos: [start], height }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const direction = height >= 0 ? 1 : -1;\n  const { arrowHeadLength, arrowHeadWidth, arrowHeadAttr } =\n    getArrowHeadDimensions(options);\n\n  const length = direction * arrowHeadLength;\n  const width = direction * arrowHeadWidth;\n  const attr = direction * arrowHeadAttr;\n\n  const endX = start.x + arrowLength;\n  const path =\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `A${arrowLength / 2},${height},${0},${0},${direction > 0 ? 1 : 0},${tfx(\n      endX,\n    )},${tfx(start.y)}` +\n    `L${tfx(endX - width)},${tfx(start.y - length)}` +\n    `l${tfx(width)},${tfx(attr)}` +\n    `l${tfx(width)},${tfx(-attr)}` +\n    `l${tfx(-width)},${length}`;\n\n  const transformedPath = svgPath(path)\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowEllipticalArcFilledTriangle(\n  paper: RaphaelPaper,\n  { pos: [start], height }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth } = getArrowHeadDimensions(options);\n\n  const direction = height >= 0 ? 1 : -1;\n\n  const triangleLength = direction * arrowHeadLength;\n  const triangleWidth = direction * arrowHeadWidth;\n\n  const endX = start.x + arrowLength;\n\n  const path =\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `A${arrowLength / 2},${height},${0},${0},${direction > 0 ? 1 : 0},${tfx(\n      endX,\n    )},${tfx(start.y)}` +\n    `L${tfx(endX - triangleWidth)},${tfx(start.y - triangleLength)}` +\n    `l${tfx(triangleLength)},${tfx(0)}` +\n    `l${tfx(-triangleWidth)},${tfx(triangleLength)}`;\n\n  const transformedPath = svgPath(path)\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowEllipticalArcOpenAngle(\n  paper: RaphaelPaper,\n  { pos: [start], height }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const direction = height >= 0 ? 1 : -1;\n\n  const { arrowHeadLength, arrowHeadWidth } = getArrowHeadDimensions(options);\n\n  const width = direction * arrowHeadWidth;\n  const length = direction * arrowHeadLength;\n\n  const endX = start.x + arrowLength;\n\n  const path =\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `A${arrowLength / 2},${height},${0},${0},${direction > 0 ? 1 : 0},${tfx(\n      endX,\n    )},${tfx(start.y)}` +\n    `L${tfx(endX - width)},${tfx(start.y - length)}` +\n    `M${tfx(endX)},${tfx(start.y)}` +\n    `L${tfx(endX + width)}, ${tfx(start.y - length)}`;\n\n  const transformedPath = svgPath(path)\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowEllipticalArcOpenHalfAngle(\n  paper: RaphaelPaper,\n  { pos: [start], height }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const direction = height >= 0 ? 1 : -1;\n\n  const { arrowHeadLength, arrowHeadWidth } = getArrowHeadDimensions(options);\n\n  const width = direction * arrowHeadWidth;\n  const length = direction * arrowHeadLength;\n  const endX = start.x + arrowLength;\n\n  const path =\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `A${arrowLength / 2},${height},${0},${0},${direction > 0 ? 1 : 0}, ${tfx(\n      endX,\n    )},${tfx(start.y)}` +\n    `L${tfx(endX + width)}, ${tfx(start.y - length)}`;\n\n  const transformedPath = svgPath(path)\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowOpenAngle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadAttr, arrowHeadLength } = getArrowHeadDimensions(options);\n  const pathBuilder = new PathBuilder().addOpenArrowPathParts(\n    start,\n    arrowLength,\n    arrowHeadLength,\n    arrowHeadAttr,\n  );\n  const transformedPath = svgPath(pathBuilder.build())\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowFilledTriangle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth } = getArrowHeadDimensions(options);\n\n  const endX = start.x + arrowLength;\n\n  const path =\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `L${tfx(endX)},${tfx(start.y)}` +\n    `L${tfx(endX - arrowHeadLength)},${tfx(start.y + arrowHeadWidth)}` +\n    `L${tfx(endX - arrowHeadLength)},${tfx(start.y - arrowHeadWidth)}` +\n    `L${tfx(endX)},${tfx(start.y)}Z`;\n\n  const transformedPath = svgPath(path)\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowFilledBow(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth, arrowHeadAttr } =\n    getArrowHeadDimensions(options);\n\n  const endX = start.x + arrowLength;\n\n  const path =\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `L${tfx(endX)},${tfx(start.y)}` +\n    `L${tfx(endX - arrowHeadLength)},${tfx(start.y + arrowHeadWidth)}` +\n    `L${tfx(endX - arrowHeadLength + arrowHeadAttr)},${tfx(start.y)}` +\n    `L${tfx(endX - arrowHeadLength)},${tfx(start.y - arrowHeadWidth)}` +\n    `L${tfx(endX)},${tfx(start.y)}Z`;\n\n  const transformedPath = svgPath(path)\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowDashedOpenAngle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth } = getArrowHeadDimensions(options);\n  const { microModeScale } = getOptionsWithConvertedUnits(options);\n\n  const dashInterval = ARROW_DASH_INTERVAL * microModeScale;\n\n  const path: string[] = [];\n\n  const endX = start.x + arrowLength;\n\n  // Dashed arrow\n  for (let i = 0; i < arrowLength / dashInterval; i++) {\n    if (i % 2) {\n      path.push(`L${tfx(start.x + i * dashInterval)},${tfx(start.y)}`);\n    } else {\n      path.push(`M${tfx(start.x + i * dashInterval)},${tfx(start.y)}`);\n    }\n  }\n\n  // Arrowhead\n  path.push(\n    `M${tfx(endX)},${tfx(start.y)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(start.y + arrowHeadWidth)}` +\n      `M${tfx(endX)},${tfx(start.y)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(start.y - arrowHeadWidth)}`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowFailed(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth, arrowHeadAttr } =\n    getArrowHeadDimensions(options);\n  const { microModeScale } = getOptionsWithConvertedUnits(options);\n\n  const failSignWidth = ARROW_FAIL_SIGN_WIDTH * microModeScale;\n\n  const endX = start.x + arrowLength;\n\n  const arrowCenter = endX - (endX - start.x) / 2;\n\n  const path: string[] = [];\n\n  // Arrow with arrowhead\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y)}` +\n      `L${tfx(endX)},${tfx(start.y)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(start.y + arrowHeadWidth)}` +\n      `L${tfx(endX - arrowHeadLength + arrowHeadAttr)},${tfx(start.y)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(start.y - arrowHeadWidth)}` +\n      `L${tfx(endX)},${tfx(start.y)}Z`,\n  );\n\n  // Failed sign line 1\n  path.push(\n    `M${tfx(arrowCenter + failSignWidth)},${tfx(start.y + failSignWidth)}` +\n      `L${tfx(arrowCenter - failSignWidth)},${tfx(start.y - failSignWidth)}`,\n  );\n\n  // Failed sign line 2\n  path.push(\n    `M${tfx(arrowCenter + failSignWidth)},${tfx(start.y - failSignWidth)}` +\n      `L${tfx(arrowCenter - failSignWidth)},${tfx(start.y + failSignWidth)}`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowRetrosynthetic(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth, arrowOffset } =\n    getArrowHeadDimensions(options);\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // First arrow and arrowhead\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}` +\n      `L${tfx(endX + arrowHeadLength)},${tfx(start.y)}`,\n  );\n\n  // Second arrow and arrowhead\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y + arrowHeadWidth + arrowOffset,\n      )}` +\n      `L${tfx(endX + arrowHeadLength)},${tfx(start.y)}`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowBothEndsFilledTriangle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth } = getArrowHeadDimensions(options);\n\n  const endX = start.x + arrowLength;\n\n  const path =\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `L${tfx(endX)},${tfx(start.y)}` +\n    `L${tfx(endX - arrowHeadLength)},${tfx(start.y + arrowHeadWidth)}` +\n    `L${tfx(endX - arrowHeadLength)},${tfx(start.y - arrowHeadWidth)}` +\n    `L${tfx(endX)},${tfx(start.y)}` +\n    `M${tfx(start.x)},${tfx(start.y)}` +\n    `L${tfx(start.x + arrowHeadLength)},${tfx(start.y - arrowHeadWidth)}` +\n    `L${tfx(start.x + arrowHeadLength)},${tfx(start.y + arrowHeadWidth)}` +\n    `L${tfx(start.x)},${tfx(start.y)}`;\n\n  const transformedPath = svgPath(path)\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowEquilibriumFilledHalfBow(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadAttr, arrowOffset, arrowHeadWidth } =\n    getArrowHeadDimensions(options);\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // top arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}` +\n      `L${tfx(endX - arrowHeadLength + arrowHeadAttr)},${tfx(\n        start.y - arrowOffset,\n      )}Z`,\n  );\n\n  // bottom arrow\n  path.push(\n    `M${tfx(endX)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + arrowHeadLength)},${tfx(\n        start.y + arrowHeadWidth + arrowOffset,\n      )}` +\n      `L${tfx(start.x + arrowHeadLength - arrowHeadAttr)},${\n        start.y + arrowOffset\n      }Z`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowEquilibriumFilledTriangle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowOffset, arrowHeadWidth } =\n    getArrowHeadDimensions(options);\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // First arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y + arrowHeadWidth - arrowOffset,\n      )}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}Z`,\n  );\n\n  // Second arrow\n  path.push(\n    `M${tfx(endX)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + arrowHeadLength)},${tfx(\n        start.y + arrowHeadWidth + arrowOffset,\n      )}` +\n      `L${tfx(start.x + arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth + arrowOffset,\n      )}` +\n      `L${tfx(start.x)},${tfx(start.y + arrowOffset)}Z`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowEquilibriumOpenAngle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth, arrowOffset } =\n    getArrowHeadDimensions(options);\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // First arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}`,\n  );\n\n  // Second arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y + arrowOffset)}` +\n      `M${tfx(start.x)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + arrowHeadLength)},${tfx(\n        start.y + arrowOffset + arrowHeadWidth,\n      )}`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowUnbalancedEquilibriumFilledHalfBow(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth, arrowOffset, arrowHeadAttr } =\n    getArrowHeadDimensions(options);\n  const unbalanceVal = getUnbalancedArrowHeadOffset(options);\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // First arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}` +\n      `L${tfx(endX - arrowHeadLength + arrowHeadAttr)},${tfx(\n        start.y - arrowOffset,\n      )}Z`,\n  );\n\n  // Second (Unbalanced) arrow\n  path.push(\n    `M${tfx(endX - unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + unbalanceVal + arrowHeadLength)},${tfx(\n        start.y + arrowHeadWidth + arrowOffset,\n      )}` +\n      `L${tfx(start.x + unbalanceVal + arrowHeadLength - arrowHeadAttr)},${\n        start.y + arrowOffset\n      }Z`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowUnbalancedEquilibriumOpenHalfAngle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth, arrowOffset } =\n    getArrowHeadDimensions(options);\n  const unbalanceVal = getUnbalancedArrowHeadOffset(options);\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // First arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}`,\n  );\n\n  // Second (Unbalanced) arrow\n  path.push(\n    `M${tfx(start.x + unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(endX - unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `M${tfx(start.x + unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + arrowHeadLength + unbalanceVal)},${tfx(\n        start.y + arrowOffset + arrowHeadWidth,\n      )}`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    ...(shouldApplySnappingStyle && {\n      stroke: options.arrowSnappingStyle.stroke,\n    }),\n  });\n}\n\nfunction arrowUnbalancedEquilibriumLargeFilledHalfBow(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const {\n    arrowHeadLength,\n    arrowHeadWidth: arrowHeadWidthNormal,\n    arrowOffset,\n    arrowHeadAttr,\n  } = getArrowHeadDimensions(options);\n  const unbalanceVal = getUnbalancedArrowHeadOffset(options);\n\n  // Multiplying by 1.5 because it's large variant\n  const arrowHeadWidth = arrowHeadWidthNormal * 1.5;\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // First arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}` +\n      `L${tfx(endX - arrowHeadLength + arrowHeadAttr)},${tfx(\n        start.y - arrowOffset,\n      )}Z`,\n  );\n\n  // Second (Unbalanced) arrow\n  path.push(\n    `M${tfx(start.x + unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(endX - unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `M${tfx(start.x + unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + arrowHeadLength + unbalanceVal)},${tfx(\n        start.y + arrowHeadWidth + arrowOffset,\n      )}` +\n      `L${tfx(start.x + arrowHeadLength - arrowHeadAttr + unbalanceVal)},${\n        start.y + arrowOffset\n      }Z`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction arrowUnbalancedEquilibriumFilledHalfTriangle(\n  paper: RaphaelPaper,\n  { pos: [start] }: ArrowItem,\n  arrowLength: number,\n  arrowAngle: number,\n  options: RenderOptions,\n  shouldApplySnappingStyle: boolean,\n) {\n  const { arrowHeadLength, arrowHeadWidth, arrowOffset } =\n    getArrowHeadDimensions(options);\n  const unbalanceVal = getUnbalancedArrowHeadOffset(options);\n\n  const endX = start.x + arrowLength;\n\n  const path: string[] = [];\n\n  // First arrow\n  path.push(\n    `M${tfx(start.x)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX)},${tfx(start.y - arrowOffset)}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(\n        start.y - arrowHeadWidth - arrowOffset,\n      )}` +\n      `L${tfx(endX - arrowHeadLength)},${tfx(start.y - arrowOffset)}Z`,\n  );\n\n  // Second (Unbalanced) arrow\n  path.push(\n    `M${tfx(start.x + unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(endX - unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `M${tfx(start.x + unbalanceVal)},${tfx(start.y + arrowOffset)}` +\n      `L${tfx(start.x + arrowHeadLength + unbalanceVal)},${tfx(\n        start.y + arrowHeadWidth + arrowOffset,\n      )}` +\n      `L${tfx(start.x + arrowHeadLength + unbalanceVal)},${\n        start.y + arrowOffset\n      }Z`,\n  );\n\n  const transformedPath = svgPath(path.join(''))\n    .rotate(arrowAngle, start.x, start.y)\n    .toString();\n\n  return paper.path(transformedPath).attr({\n    ...options.lineattr,\n    fill: '#000',\n    ...(shouldApplySnappingStyle && options.arrowSnappingStyle),\n  });\n}\n\nfunction plus(paper: RaphaelPaper, point: Vec2, options: RenderOptions) {\n  const s = options.microModeScale / 5;\n  return paper\n    .path(\n      'M{0},{4}L{0},{5}M{2},{1}L{3},{1}',\n      tfx(point.x),\n      tfx(point.y),\n      tfx(point.x - s),\n      tfx(point.x + s),\n      tfx(point.y - s),\n      tfx(point.y + s),\n    )\n    .attr(options.lineattr);\n}\n\nfunction bondSingle(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  halfBond2: HalfBond,\n  options: RenderOptions,\n  isSnapping: boolean,\n  color = '#000',\n) {\n  const a = halfBond1.p;\n  const b = halfBond2.p;\n  return paper\n    .path(makeStroke(a, b))\n    .attr(options.lineattr)\n    .attr({\n      fill: color,\n      stroke: color,\n    })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondSingleUp(\n  paper: RaphaelPaper,\n  a: Vec2,\n  b2: Vec2,\n  b3: Vec2,\n  options: RenderOptions,\n  isSnapping: boolean,\n  color = '#000',\n) {\n  // eslint-disable-line max-params\n  return paper\n    .path(\n      'M{0},{1}L{2},{3}L{4},{5}Z',\n      tfx(a.x),\n      tfx(a.y),\n      tfx(b2.x),\n      tfx(b2.y),\n      tfx(b3.x),\n      tfx(b3.y),\n    )\n    .attr(options.lineattr)\n    .attr({\n      fill: color,\n      stroke: color,\n    })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondSingleStereoBold(\n  paper: RaphaelPaper,\n  a1: Vec2,\n  a2: Vec2,\n  a3: Vec2,\n  a4: Vec2,\n  options: RenderOptions,\n  isSnapping: boolean,\n  color = '#000',\n) {\n  // eslint-disable-line max-params\n  const bond = paper\n    .path(\n      'M{0},{1}L{2},{3}L{4},{5}L{6},{7}Z',\n      tfx(a1.x),\n      tfx(a1.y),\n      tfx(a2.x),\n      tfx(a2.y),\n      tfx(a3.x),\n      tfx(a3.y),\n      tfx(a4.x),\n      tfx(a4.y),\n    )\n    .attr(options.lineattr)\n    .attr({\n      stroke: color,\n      fill: color,\n    })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n  return bond;\n}\n\nfunction bondDoubleStereoBold(\n  paper: RaphaelPaper,\n  sgBondPath: Element,\n  b1: Vec2,\n  b2: Vec2,\n  options: RenderOptions,\n  isSnapping: boolean,\n  color = '#000',\n) {\n  // eslint-disable-line max-params\n  return paper.set([\n    sgBondPath,\n    paper\n      .path('M{0},{1}L{2},{3}', tfx(b1.x), tfx(b1.y), tfx(b2.x), tfx(b2.y))\n      .attr(options.lineattr)\n      .attr({\n        stroke: color,\n        fill: color,\n      })\n      .attr(isSnapping ? options.bondSnappingStyle : {}),\n  ]);\n}\n\nfunction bondSingleDown(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  d: Vec2,\n  nlines: number,\n  step: number,\n  options: RenderOptions,\n  isSnapping: boolean,\n  color = '#000',\n) {\n  // eslint-disable-line max-params\n  const a = halfBond1.p;\n  const n = halfBond1.norm;\n  const bsp = 0.7 * options.stereoBond;\n\n  let path = '';\n  let p;\n  let q;\n  let r;\n  for (let i = 0; i < nlines; ++i) {\n    r = a.addScaled(d, step * i);\n    p = r.addScaled(n, (bsp * (i + 0.5)) / (nlines - 0.5));\n    q = r.addScaled(n, (-bsp * (i + 0.5)) / (nlines - 0.5));\n    path += makeStroke(p, q);\n  }\n  return paper\n    .path(path)\n    .attr(options.lineattr)\n    .attr({\n      fill: color,\n      stroke: color,\n    })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondSingleEither(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  d: Vec2,\n  nlines: number,\n  step: number,\n  options: RenderOptions,\n  isSnapping: boolean,\n  color = '#000',\n) {\n  // eslint-disable-line max-params\n  const a = halfBond1.p;\n  const n = halfBond1.norm;\n  const bsp = 0.7 * options.stereoBond;\n\n  let path = 'M' + tfx(a.x) + ',' + tfx(a.y);\n  let r = a;\n  for (let i = 0; i < nlines; ++i) {\n    r = a\n      .addScaled(d, step * (i + 0.5))\n      .addScaled(n, ((i & 1 ? -1 : +1) * bsp * (i + 0.5)) / (nlines - 0.5));\n    path += 'L' + tfx(r.x) + ',' + tfx(r.y);\n  }\n  return paper\n    .path(path)\n    .attr(options.lineattr)\n    .attr({\n      fill: color,\n      stroke: color,\n    })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondDouble(\n  paper: RaphaelPaper,\n  a1: Vec2,\n  a2: Vec2,\n  b1: Vec2,\n  b2: Vec2,\n  cisTrans: boolean,\n  options: RenderOptions,\n  isSnapping: boolean,\n) {\n  // eslint-disable-line max-params\n  return paper\n    .path(\n      cisTrans\n        ? 'M{0},{1}L{6},{7}M{4},{5}L{2},{3}'\n        : 'M{0},{1}L{2},{3}M{4},{5}L{6},{7}',\n      tfx(a1.x),\n      tfx(a1.y),\n      tfx(b1.x),\n      tfx(b1.y),\n      tfx(a2.x),\n      tfx(a2.y),\n      tfx(b2.x),\n      tfx(b2.y),\n    )\n    .attr(options.lineattr)\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondSingleOrDouble(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  halfBond2: HalfBond,\n  nSect: number,\n  options: RenderOptions,\n  isSnapping: boolean,\n) {\n  // eslint-disable-line max-statements, max-params\n  const a = halfBond1.p;\n  const b = halfBond2.p;\n  const n = halfBond1.norm;\n  const bsp = options.bondSpace / 2;\n\n  let path = '';\n  let pi;\n  let pp = a;\n  for (let i = 1; i <= nSect; ++i) {\n    pi = Vec2.lc2(a, (nSect - i) / nSect, b, i / nSect);\n    if (i & 1) {\n      path += makeStroke(pp, pi);\n    } else {\n      path += makeStroke(pp.addScaled(n, bsp), pi.addScaled(n, bsp));\n      path += makeStroke(pp.addScaled(n, -bsp), pi.addScaled(n, -bsp));\n    }\n    pp = pi;\n  }\n  return paper\n    .path(path)\n    .attr(options.lineattr)\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondTriple(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  halfBond2: HalfBond,\n  options: RenderOptions,\n  isSnapping: boolean,\n  color = '#000',\n) {\n  const a = halfBond1.p;\n  const b = halfBond2.p;\n  const n = halfBond1.norm;\n  const a2 = a.addScaled(n, options.bondSpace);\n  const b2 = b.addScaled(n, options.bondSpace);\n  const a3 = a.addScaled(n, -options.bondSpace);\n  const b3 = b.addScaled(n, -options.bondSpace);\n  return paper\n    .path(makeStroke(a, b) + makeStroke(a2, b2) + makeStroke(a3, b3))\n    .attr(options.lineattr)\n    .attr({\n      fill: color,\n      stroke: color,\n    })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondAromatic(\n  paper: RaphaelPaper,\n  paths: string[],\n  bondShift: number,\n  options: RenderOptions,\n  isSnapping: boolean,\n) {\n  const l1 = paper\n    .path(paths[0])\n    .attr(options.lineattr)\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n  const l2 = paper\n    .path(paths[1])\n    .attr(options.lineattr)\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n  if (bondShift !== undefined && bondShift !== null) {\n    (bondShift > 0 ? l1 : l2).attr({ 'stroke-dasharray': '- ' });\n  }\n\n  return paper.set([l1, l2]);\n}\n\nfunction bondAny(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  halfBond2: HalfBond,\n  options: RenderOptions,\n  isSnapping: boolean,\n) {\n  const a = halfBond1.p;\n  const b = halfBond2.p;\n  return paper\n    .path(makeStroke(a, b))\n    .attr(options.lineattr)\n    .attr({ 'stroke-dasharray': '- ' })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondHydrogen(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  halfBond2: HalfBond,\n  options: RenderOptions,\n  isSnapping: boolean,\n) {\n  const a = halfBond1.p;\n  const b = halfBond2.p;\n  return paper\n    .path(makeStroke(a, b))\n    .attr(options.lineattr)\n    .attr({\n      'stroke-dasharray': '.',\n      'stroke-linecap': 'square',\n    })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction bondDative(\n  paper: RaphaelPaper,\n  halfBond1: HalfBond,\n  halfBond2: HalfBond,\n  options: RenderOptions,\n  isSnapping: boolean,\n) {\n  const a = halfBond1.p;\n  const b = halfBond2.p;\n  return paper\n    .path(makeStroke(a, b))\n    .attr(options.lineattr)\n    .attr({ 'arrow-end': 'block-midium-long' })\n    .attr(isSnapping ? options.bondSnappingStyle : {});\n}\n\nfunction reactingCenter(\n  paper: RaphaelPaper,\n  points: Vec2[],\n  options: RenderOptions,\n) {\n  let pathDesc = '';\n  for (let i = 0; i < points.length / 2; ++i) {\n    pathDesc += makeStroke(points[2 * i], points[2 * i + 1]);\n  }\n  return paper.path(pathDesc).attr(options.lineattr);\n}\n\nfunction bondMark(\n  paper: RaphaelPaper,\n  point: Vec2,\n  mark: string | null,\n  options: RenderOptions,\n) {\n  const path = paper.text(point.x, point.y, mark).attr({\n    font: options.font,\n    'font-size': options.fontszsubInPx,\n    fill: '#000',\n  });\n  const rbb = util.relBox(path.getBBox());\n  recenterText(path, rbb);\n  return path;\n}\n\nfunction radicalCap(paper: RaphaelPaper, point1: Vec2, options: RenderOptions) {\n  const s = options.lineWidth * 0.9;\n  const dw = s;\n  const dh = 2 * s;\n  return paper\n    .path(\n      'M{0},{1}L{2},{3}L{4},{5}',\n      tfx(point1.x - dw),\n      tfx(point1.y + dh),\n      tfx(point1.x),\n      tfx(point1.y),\n      tfx(point1.x + dw),\n      tfx(point1.y + dh),\n    )\n    .attr({\n      stroke: '#000',\n      'stroke-width': options.lineWidth * 0.7,\n      'stroke-linecap': 'square',\n      'stroke-linejoin': 'miter',\n    });\n}\n\nfunction radicalBullet(\n  paper: RaphaelPaper,\n  point1: Vec2,\n  options: RenderOptions,\n) {\n  return paper.circle(tfx(point1.x), tfx(point1.y), options.lineWidth).attr({\n    stroke: null,\n    fill: '#000',\n  });\n}\n\nfunction bracket(\n  paper: RaphaelPaper,\n  bracketAngleDirection: Vec2,\n  bracketDirection: Vec2,\n  bondCenter: Vec2,\n  bracketWidth: number,\n  bracketHeight: number,\n  options: RenderOptions,\n  isBracketContainAttachment = false,\n) {\n  // eslint-disable-line max-params\n  bracketWidth = bracketWidth || 0.25;\n  bracketHeight = bracketHeight || 1.0;\n  const halfBracketHeight = 0.5;\n  let bracketPoint0, bracketPoint1;\n  if (isBracketContainAttachment) {\n    const longHalfBracketHeight = -0.8;\n    const shortHalfBracketHeight = 0.2;\n    bracketPoint0 = bondCenter.addScaled(\n      bracketDirection,\n      shortHalfBracketHeight * bracketHeight,\n    );\n    bracketPoint1 = bondCenter.addScaled(\n      bracketDirection,\n      longHalfBracketHeight * bracketHeight,\n    );\n  } else {\n    bracketPoint0 = bondCenter.addScaled(\n      bracketDirection,\n      -halfBracketHeight * bracketHeight,\n    );\n    bracketPoint1 = bondCenter.addScaled(\n      bracketDirection,\n      halfBracketHeight * bracketHeight,\n    );\n  }\n  const bracketArc0 = bracketPoint0.addScaled(\n    bracketAngleDirection,\n    -bracketWidth,\n  );\n  const bracketArc1 = bracketPoint1.addScaled(\n    bracketAngleDirection,\n    -bracketWidth,\n  );\n\n  return paper\n    .path(\n      'M{0},{1}L{2},{3}L{4},{5}L{6},{7}',\n      tfx(bracketArc0.x),\n      tfx(bracketArc0.y),\n      tfx(bracketPoint0.x),\n      tfx(bracketPoint0.y),\n      tfx(bracketPoint1.x),\n      tfx(bracketPoint1.y),\n      tfx(bracketArc1.x),\n      tfx(bracketArc1.y),\n    )\n    .attr(options.sgroupBracketStyle);\n}\n\nfunction selectionRectangle(\n  paper: RaphaelPaper,\n  point1: Vec2,\n  point2: Vec2,\n  options: RenderOptions,\n) {\n  return paper\n    .rect(\n      tfx(Math.min(point1.x, point2.x)),\n      tfx(Math.min(point1.y, point2.y)),\n      tfx(Math.abs(point2.x - point1.x)),\n      tfx(Math.abs(point2.y - point1.y)),\n    )\n    .attr(options.lassoStyle);\n}\n\nfunction selectionPolygon(\n  paper: RaphaelPaper,\n  r: Vec2[],\n  options: RenderOptions,\n) {\n  const v = r[r.length - 1];\n  let pstr = 'M' + tfx(v.x) + ',' + tfx(v.y);\n  for (let i = 0; i < r.length; ++i) {\n    pstr += 'L' + tfx(r[i].x) + ',' + tfx(r[i].y);\n  }\n  return paper.path(pstr).attr(options.lassoStyle);\n}\n\nfunction selectionLine(\n  paper: RaphaelPaper,\n  point1: Vec2,\n  point2: Vec2,\n  options: RenderOptions,\n) {\n  return paper.path(makeStroke(point1, point2)).attr(options.lassoStyle);\n}\n\nfunction makeStroke(point1: Vec2, point2: Vec2) {\n  return (\n    'M' +\n    tfx(point1.x) +\n    ',' +\n    tfx(point1.y) +\n    'L' +\n    tfx(point2.x) +\n    ',' +\n    tfx(point2.y) +\n    '\t'\n  );\n}\n\nfunction dashedPath(point1: Vec2, point2: Vec2, dash: number[]) {\n  let t0 = 0;\n  const t1 = Vec2.dist(point1, point2);\n  const d = Vec2.diff(point2, point1).normalized();\n  let black = true;\n  let path = '';\n  let i = 0;\n\n  while (t0 < t1) {\n    const len = dash[i % dash.length];\n    const t2 = t0 + Math.min(len, t1 - t0);\n    if (black) {\n      path +=\n        'M ' +\n        point1.addScaled(d, t0).coordStr() +\n        ' L ' +\n        point1.addScaled(d, t2).coordStr();\n    }\n    t0 += len;\n    black = !black;\n    i++;\n  }\n  return path;\n}\n\nfunction aromaticBondPaths(\n  a2: Vec2,\n  a3: Vec2,\n  b2: Vec2,\n  b3: Vec2,\n  mask: number,\n  dash: number[] | null,\n) {\n  // eslint-disable-line max-params\n  const l1 = dash && mask & 1 ? dashedPath(a2, b2, dash) : makeStroke(a2, b2);\n  const l2 = dash && mask & 2 ? dashedPath(a3, b3, dash) : makeStroke(a3, b3);\n\n  return [l1, l2];\n}\n\nfunction recenterText(path: Element, relativeBox: RelativeBox) {\n  // TODO: find a better way\n  if (Raphael.vml) {\n    const gap = relativeBox.height * 0.16;\n    path.translateAbs(0, gap);\n    relativeBox.y += gap;\n  }\n}\n\nfunction rgroupAttachmentPoint(\n  paper: RaphaelPaper,\n  shiftedAtomPositionVector: Vec2,\n  attachmentPointEnd: Vec2,\n  directionVector: Vec2,\n  options: RenderOptions,\n) {\n  const linePath = paper.path(\n    'M{0},{1}L{2},{3}',\n    tfx(shiftedAtomPositionVector.x),\n    tfx(shiftedAtomPositionVector.y),\n    tfx(attachmentPointEnd.x),\n    tfx(attachmentPointEnd.y),\n  );\n\n  const curvePath = paper.path(\n    getSvgCurveShapeAttachmentPoint(\n      attachmentPointEnd,\n      directionVector,\n      options.microModeScale,\n    ),\n  );\n\n  const resultShape = paper\n    .set([curvePath, linePath])\n    .attr(options.lineattr)\n    .attr({ 'stroke-width': options.bondThicknessInPx });\n\n  return resultShape;\n}\n\nfunction getSvgCurveShapeAttachmentPoint(\n  centerPosition: Vec2,\n  directionVector: Vec2,\n  basicSize: number,\n): string {\n  // declared here https://github.com/epam/ketcher/issues/2165\n  // this path has (0,0) in the position of attachment point atom\n  const attachmentPointSvgPathString = `M13 1.5l-1.5 3.7c-0.3 0.8-1.5 0.8-1.9 0l-1.7-4.4c-0.3-0.8-1.5-0.8-1.9 0l-1.7 4.4c-0.3 0.8-1.5 0.8-1.8 0l-1.8-4.4c-0.3-0.8-1.5-0.8-1.8 0l-1.7 4.4c-0.3 0.8-1.5 0.8-1.9 0l-1.7-4.4c-0.3-0.8-1.5-0.8-1.9 0l-1.6 4.2c-0.3 0.9-1.6 0.8-1.9 0l-1.2-3.5`;\n  const attachmentPointSvgPathSize = 39.8;\n\n  const shapeScale = basicSize / attachmentPointSvgPathSize;\n  const angleDegrees =\n    (Math.atan2(directionVector.y, directionVector.x) * 180) / Math.PI - 90;\n\n  return svgPath(attachmentPointSvgPathString)\n    .rotate(angleDegrees)\n    .scale(shapeScale)\n    .translate(centerPosition.x, centerPosition.y)\n    .toString();\n}\n\nfunction rgroupAttachmentPointLabel(\n  paper: RaphaelPaper,\n  labelPosition: Vec2,\n  labelText: string,\n  options: RenderOptions,\n  fill,\n) {\n  const labelPath = paper\n    .text(labelPosition.x, labelPosition.y, labelText)\n    .attr({\n      font: options.font,\n      'font-size': options.fontszInPx * 0.9,\n      fill,\n    });\n  return labelPath;\n}\n\nexport default {\n  recenterText,\n  arrow,\n  plus,\n  aromaticBondPaths,\n  bondSingle,\n  bondSingleUp,\n  bondSingleStereoBold,\n  bondDoubleStereoBold,\n  bondSingleDown,\n  bondSingleEither,\n  bondDouble,\n  bondSingleOrDouble,\n  bondTriple,\n  bondAromatic,\n  bondAny,\n  bondHydrogen,\n  bondDative,\n  reactingCenter,\n  bondMark,\n  radicalCap,\n  radicalBullet,\n  bracket,\n  selectionRectangle,\n  selectionPolygon,\n  selectionLine,\n  ellipse,\n  rectangle,\n  rectangleArrowHighlightAndSelection,\n  polyline,\n  line,\n  rgroupAttachmentPoint,\n  rgroupAttachmentPointLabel,\n};\n","import {\n  BaseMonomer,\n  Chem,\n  Peptide,\n  Phosphate,\n  RNABase,\n  Struct,\n  Sugar,\n  PolymerBond,\n} from 'domain/entities';\nimport {\n  IKetAttachmentPoint,\n  IKetIdtAliases,\n  KetAmbiguousMonomerTemplateOption,\n  KetAmbiguousMonomerTemplateSubType,\n  KetMonomerClass,\n} from 'application/formatters/types/ket';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { UsageInMacromolecule } from 'application/render';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\n\nexport type MonomerColorScheme = {\n  regular: string;\n  hover: string;\n};\n\nexport enum AttachmentPointName {\n  R1 = 'R1',\n  R2 = 'R2',\n  R3 = 'R3',\n  R4 = 'R4',\n  R5 = 'R5',\n  R6 = 'R6',\n  R7 = 'R7',\n  R8 = 'R8',\n  HYDROGEN = 'hydrogen',\n}\n\nexport type MonomerItemType = {\n  label: string;\n  colorScheme?: MonomerColorScheme;\n  favorite?: boolean;\n  struct: Struct;\n  props: {\n    id?: string;\n    MonomerNaturalAnalogCode: string;\n    MonomerName: string;\n    MonomerFullName?: string;\n    Name: string;\n    // TODO determine whenever these props are optional or not\n    BranchMonomer?: string;\n    MonomerCaps?: Partial<Record<AttachmentPointName, string>>;\n    MonomerCode?: string;\n    MonomerType?: string;\n    MonomerClass?: KetMonomerClass;\n    isMicromoleculeFragment?: boolean;\n    idtAliases?: IKetIdtAliases;\n    unresolved?: boolean;\n  };\n  attachmentPoints?: IKetAttachmentPoint[];\n  seqId?: number;\n  isAmbiguous?: boolean;\n  isAntisense?: boolean;\n  isSense?: boolean;\n};\n\nexport type AmbiguousMonomerType = {\n  id: string;\n  monomers: BaseMonomer[];\n  subtype: KetAmbiguousMonomerTemplateSubType;\n  label: string;\n  options: KetAmbiguousMonomerTemplateOption[];\n  idtAliases?: IKetIdtAliases;\n  isAmbiguous: true;\n  favorite?: boolean;\n};\n\nexport type MonomerOrAmbiguousType = MonomerItemType | AmbiguousMonomerType;\n\nexport const attachmentPointNames = [\n  'R1',\n  'R2',\n  'R3',\n  'R4',\n  'R5',\n  'R6',\n  'R7',\n  'R8',\n];\n\nexport type LeavingGroup = 'O' | 'OH' | 'H';\n\nexport type AttachmentPointConstructorParams = {\n  rootElement: D3SvgElementSelection<SVGGElement, void>;\n  monomer: BaseMonomer;\n  bodyWidth: number;\n  bodyHeight: number;\n  canvas: D3SvgElementSelection<SVGSVGElement, void>;\n  attachmentPointName: AttachmentPointName;\n  isUsed: boolean;\n  isPotentiallyUsed: boolean;\n  angle: number;\n  isSnake: boolean;\n  applyZoomForPositionCalculation: boolean;\n};\n\nexport type PreviewAttachmentPointConstructorParams =\n  AttachmentPointConstructorParams & {\n    selected: boolean;\n    connected: boolean;\n    usage: UsageInMacromolecule;\n  };\n\nexport type ConcreteMonomer = Peptide | Sugar | RNABase | Phosphate | Chem;\n\nexport type AttachmentPointsToBonds = Partial<\n  Record<AttachmentPointName, PolymerBond | MonomerToAtomBond | null>\n>;\n","export enum Entities {\n  Nucleotide = 'Nucleotide',\n  Nucleoside = 'Nucleoside',\n  Phosphate = 'Phosphate',\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  Bond,\n  Box2Abs,\n  FunctionalGroup,\n  SGroup,\n  StereoFlag,\n  StereoLabel,\n  Struct,\n  Vec2,\n} from 'domain/entities';\nimport { ElementColor, Elements } from 'domain/constants';\nimport {\n  LayerMap,\n  StereLabelStyleType,\n  StereoColoringType,\n} from './generalEnumTypes';\n\nimport ReObject from './reobject';\nimport ReStruct from './restruct';\nimport { Render } from '../raphaelRender';\nimport { Scale } from 'domain/helpers';\nimport draw from '../draw';\nimport util from '../util';\nimport { tfx } from 'utilities';\nimport {\n  RenderOptions,\n  RenderOptionStyles,\n} from 'application/render/render.types';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\nimport { attachmentPointNames } from 'domain/types';\nimport { getAttachmentPointLabel } from 'domain/helpers/attachmentPointCalculations';\n\ninterface ElemAttr {\n  text: string;\n  path: any;\n  rbb: { x: number; y: number; width: number; height: number };\n}\n\nconst StereoLabelMinOpacity = 0.3;\nconst MAX_LABEL_LENGTH = 8;\n\nexport enum ShowHydrogenLabels {\n  Off = 'off',\n  Hetero = 'Hetero',\n  Terminal = 'Terminal',\n  TerminalAndHetero = 'Terminal and Hetero',\n  On = 'all',\n}\n\nexport enum ShowHydrogenLabelNames {\n  Off = 'Off',\n  Hetero = 'Hetero',\n  Terminal = 'Terminal',\n  TerminalAndHetero = 'Terminal and Hetero',\n  On = 'On',\n}\n\nclass ReAtom extends ReObject {\n  a: Atom;\n  showLabel: boolean;\n  hydrogenOnTheLeft: boolean;\n  color: string;\n  component: number;\n  label?: ElemAttr;\n  cip?: {\n    // Raphael paths\n    path: any;\n    text: any;\n    rectangle: any;\n  };\n\n  constructor(atom: Atom) {\n    super('atom');\n    this.a = atom; // TODO rename a to item\n    this.showLabel = false;\n\n    this.hydrogenOnTheLeft = false;\n\n    this.color = '#000000';\n    this.component = -1;\n  }\n\n  static isSelectable(): true {\n    return true;\n  }\n\n  getVBoxObj(render: Render): Box2Abs | null {\n    if (this.visel.boundingBox) {\n      return ReObject.prototype.getVBoxObj.call(this, render);\n    }\n    return new Box2Abs(this.a.pp, this.a.pp);\n  }\n\n  drawHover(render: Render) {\n    const ret = this.makeHoverPlate(render);\n    render.ctab.addReObjectPath(LayerMap.atom, this.visel, ret);\n    return ret;\n  }\n\n  getLabeledSelectionContour(render: Render, isHighlight: boolean) {\n    const { paper, ctab: restruct, options } = render;\n    const { fontszInPx, radiusScaleFactor } = options;\n    const highlightPadding = isHighlight ? -2 : 0;\n    const padding = fontszInPx * radiusScaleFactor + highlightPadding;\n    const radius = fontszInPx * radiusScaleFactor * 2 + highlightPadding;\n    const box = this.getVBoxObj(restruct.render)!;\n    const ps1 = Scale.modelToCanvas(box.p0, restruct.render.options);\n    const ps2 = Scale.modelToCanvas(box.p1, restruct.render.options);\n    const width = ps2.x - ps1.x;\n    const height = fontszInPx * 1.23;\n    return paper.rect(\n      ps1.x - padding,\n      ps1.y - padding,\n      width + padding * 2,\n      height + padding * 2,\n      radius,\n    );\n  }\n\n  getUnlabeledSelectionContour(render: Render, isHighlight: boolean) {\n    const { paper, options } = render;\n    const { atomSelectionPlateRadius } = options;\n    const highlightPadding = isHighlight ? -2 : 0;\n    const ps = Scale.modelToCanvas(this.a.pp, options);\n    return paper.circle(\n      ps.x,\n      ps.y,\n      atomSelectionPlateRadius + highlightPadding,\n    );\n  }\n\n  getSelectionContour(render: Render, isHighlight: boolean) {\n    const hasLabel =\n      (this.a.pseudo && this.a.pseudo.length > 1 && !getQueryAttrsText(this)) ||\n      (this.showLabel && this.a.implicitH !== 0);\n    return hasLabel\n      ? this.getLabeledSelectionContour(render, isHighlight)\n      : this.getUnlabeledSelectionContour(render, isHighlight);\n  }\n\n  private isPlateShouldBeHidden = (atom: Atom, render: Render) => {\n    const sgroups = render.ctab.sgroups;\n    const functionalGroups = render.ctab.molecule.functionalGroups;\n    const struct = render.ctab.molecule;\n    const atomId = struct.atoms.keyOf(atom) as number;\n\n    return (\n      FunctionalGroup.isAtomInContractedFunctionalGroup(\n        atom,\n        sgroups,\n        functionalGroups,\n        true,\n      ) || Atom.isHiddenLeavingGroupAtom(struct, atomId)\n    );\n  };\n\n  private makeHighlightePlate = (\n    restruct: ReStruct,\n    style: RenderOptionStyles,\n  ) => {\n    const atom = this.a;\n    const { render } = restruct;\n    if (this.isPlateShouldBeHidden(atom, render)) {\n      return null;\n    }\n\n    return this.getSelectionContour(render, true).attr(style);\n  };\n\n  makeHoverPlate(render: Render) {\n    const atom = this.a;\n    const { options } = render;\n    if (this.isPlateShouldBeHidden(atom, render)) {\n      return null;\n    }\n\n    return this.getSelectionContour(render, false).attr(options.hoverStyle);\n  }\n\n  makeSelectionPlate(restruct: ReStruct) {\n    const atom = this.a;\n    const { render } = restruct;\n    const { options } = render;\n\n    if (this.isPlateShouldBeHidden(atom, render)) {\n      return null;\n    }\n    return this.getSelectionContour(render, false).attr(options.selectionStyle);\n  }\n\n  private isNeedShiftForCharge(showCharge: boolean, bondLength: number) {\n    const MIN_BOND_LENGTH = 24;\n    const isBondLengthTooShort = bondLength <= MIN_BOND_LENGTH;\n    const hasCharge = this.a.charge !== null && this.a.charge !== 0;\n    return showCharge && isBondLengthTooShort && hasCharge;\n  }\n\n  private getRatio(\n    renderOptions: RenderOptions,\n    bondLen: number | null,\n  ): number {\n    const DEFAULT_BOND_LENGTH = 40;\n    const DEFAULT_SUB_FONT_SIZE = 13;\n    const subFontSize = renderOptions.fontszsubInPx || DEFAULT_SUB_FONT_SIZE;\n    if (!bondLen) return 1;\n    const showCharge = renderOptions.showCharge;\n\n    const isNeedShift = this.isNeedShiftForCharge(showCharge, bondLen);\n\n    if (!isNeedShift) {\n      return 1;\n    }\n\n    const DEFAULT_PROPORTION = DEFAULT_BOND_LENGTH / DEFAULT_SUB_FONT_SIZE;\n    const currentProportion = bondLen / subFontSize;\n    const ratio = currentProportion / DEFAULT_PROPORTION;\n    return ratio;\n  }\n\n  /**\n   * if atom is rendered as Abbreviation: O, NH, ...\n   * In this case we need to shift the bond render start position to free space for Atom,\n   * same for the Attachment point\n   */\n  getShiftedSegmentPosition(\n    renderOptions: RenderOptions,\n    direction: Vec2,\n    _atomPosition?: Vec2,\n    bondLen: number | null = null,\n  ): Vec2 {\n    const atomPosition = Scale.modelToCanvas(\n      _atomPosition || this.a.pp,\n      renderOptions,\n    );\n    let atomSymbolShift = 0;\n    const exts = this.visel.exts;\n    const ratio = this.getRatio(renderOptions, bondLen);\n    for (let k = 0; k < exts.length; ++k) {\n      const box = exts[k].translate(atomPosition);\n      const shiftRayBox = util.shiftRayBox(atomPosition, direction, box);\n      const shift = shiftRayBox * ratio;\n      atomSymbolShift = Math.max(atomSymbolShift, shift);\n    }\n\n    if (atomSymbolShift > 0) {\n      return atomPosition.addScaled(\n        direction,\n        atomSymbolShift + 3 * renderOptions.lineWidth,\n      );\n    } else {\n      return atomPosition;\n    }\n  }\n\n  hasAttachmentPoint(): boolean {\n    return Boolean(this.a.attachmentPoints);\n  }\n\n  show(restruct: ReStruct, aid: number, options: any): void {\n    // eslint-disable-line max-statements\n    const struct = restruct.molecule;\n    const atom = struct.atoms.get(aid)!;\n    const sgroups = struct.sgroups;\n    const functionalGroups = struct.functionalGroups;\n    const render = restruct.render;\n    const ps = Scale.modelToCanvas(this.a.pp, render.options);\n    const sgroup = restruct.molecule.getGroupFromAtomId(aid);\n\n    if (Atom.isHiddenLeavingGroupAtom(struct, aid)) {\n      return;\n    }\n\n    if (\n      FunctionalGroup.isAtomInContractedFunctionalGroup(\n        atom,\n        sgroups,\n        functionalGroups,\n        false,\n      )\n    ) {\n      const isPositionAtom =\n        sgroup?.getContractedPosition(restruct.molecule).atomId === aid;\n      if (isPositionAtom) {\n        const position = Scale.modelToCanvas(\n          sgroup instanceof MonomerMicromolecule\n            ? (sgroup.pp as Vec2)\n            : this.a.pp,\n          render.options,\n        );\n        const fontFamily = options.font.substr(\n          options.font.indexOf(' ') + 1,\n          options.font.length,\n        );\n        const path = render.paper\n          .text(position.x, position.y, sgroup.data.name)\n          .attr({\n            'font-weight': 700,\n            'font-size': options.fontszInPx,\n            'font-family': fontFamily,\n          });\n\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          path,\n          position,\n          true,\n        );\n      }\n      return;\n    }\n\n    this.hydrogenOnTheLeft = shouldHydrogenBeOnLeft(restruct.molecule, this);\n    this.showLabel = isLabelVisible(restruct, render.options, this);\n    this.color = 'black'; // reset color\n\n    let delta;\n    let rightMargin;\n    let leftMargin;\n    let implh;\n    let isHydrogen;\n    let label;\n    let index: any = null;\n\n    if (this.showLabel) {\n      const data = buildLabel(this, render.paper, ps, options, aid, sgroup);\n      delta = 0.5 * options.lineWidth;\n      label = data.label;\n      rightMargin = data.rightMargin;\n      leftMargin = data.leftMargin;\n      implh = Math.floor(this.a.implicitH);\n      isHydrogen = label.text === 'H';\n\n      if (label.background) {\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          label.background,\n          ps,\n          true,\n        );\n      }\n      restruct.addReObjectPath(LayerMap.data, this.visel, label.path, ps, true);\n    }\n    if (options.showAtomIds) {\n      index = {};\n      index.text = aid.toString();\n      let idPos = this.hydrogenOnTheLeft\n        ? Vec2.lc(ps, 1, new Vec2({ x: -2, y: 0, z: 0 }), 6)\n        : Vec2.lc(ps, 1, new Vec2({ x: 2, y: 0, z: 0 }), 6);\n      if (this.showLabel) {\n        idPos = Vec2.lc(idPos, 1, new Vec2({ x: 1, y: -3, z: 0 }), 6);\n      }\n      index.path = render.paper.text(idPos.x, idPos.y, index.text).attr({\n        font: options.font,\n        'font-size': options.fontszsubInPx,\n        fill: '#070',\n      });\n      index.rbb = util.relBox(index.path.getBBox());\n      draw.recenterText(index.path, index.rbb);\n      restruct.addReObjectPath(LayerMap.indices, this.visel, index.path, ps);\n    }\n\n    if (this.showLabel) {\n      let hydroIndex: any = null;\n      if (isHydrogen && implh > 0) {\n        hydroIndex = showHydroIndex(this, render, implh, rightMargin);\n        rightMargin += hydroIndex.rbb.width + delta;\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          hydroIndex.path,\n          ps,\n          true,\n        );\n      }\n\n      if (this.a.radical !== 0) {\n        const radical = showRadical(this, render);\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          radical.path,\n          ps,\n          true,\n        );\n      }\n      if (this.a.isotope !== null) {\n        const isotope = showIsotope(this, render, leftMargin);\n        leftMargin -= isotope.rbb.width + delta;\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          isotope.path,\n          ps,\n          true,\n        );\n      }\n      if (\n        !isHydrogen &&\n        !this.a.alias &&\n        implh > 0 &&\n        displayHydrogen(this, options.showHydrogenLabels)\n      ) {\n        const data = showHydrogen(this, render, implh, {\n          hydrogen: {},\n          hydroIndex,\n          rightMargin,\n          leftMargin,\n        });\n        const hydrogen = data.hydrogen;\n        hydroIndex = data.hydroIndex;\n        rightMargin = data.rightMargin;\n        leftMargin = data.leftMargin;\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          hydrogen.path,\n          ps,\n          true,\n        );\n        if (hydroIndex != null) {\n          restruct.addReObjectPath(\n            LayerMap.data,\n            this.visel,\n            hydroIndex.path,\n            ps,\n            true,\n          );\n        }\n      }\n      if (this.a.charge === 0) {\n        this.a.charge = null;\n      }\n      if (this.a.charge && options.showCharge) {\n        const charge = showCharge(this, render, rightMargin);\n        rightMargin += charge.rbb.width + delta;\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          charge.path,\n          ps,\n          true,\n        );\n      }\n      if (this.a.explicitValence >= 0 && options.showValence) {\n        const valence = showExplicitValence(this, render, rightMargin);\n        rightMargin += valence.rbb.width + delta;\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          valence.path,\n          ps,\n          true,\n        );\n      }\n\n      if (this.a.badConn && options.showValenceWarnings) {\n        const warning = showWarning(this, render, leftMargin, rightMargin);\n        restruct.addReObjectPath(\n          LayerMap.warnings,\n          this.visel,\n          warning.path,\n          ps,\n          true,\n        );\n      }\n      if (index) {\n        /* eslint-disable no-mixed-operators */\n        pathAndRBoxTranslate(\n          index.path,\n          index.rbb,\n          -0.5 * label.rbb.width - 0.5 * index.rbb.width - delta,\n          0.3 * label.rbb.height,\n        );\n        /* eslint-enable no-mixed-operators */\n      }\n    }\n\n    // draw hover after label is calculated\n    this.setHover(this.hover, render);\n\n    const stereoLabel = this.a.stereoLabel; // Enhanced Stereo\n    const aamText = getAamText(this);\n    const customQueryText = checkIsSmartPropertiesExist(this.a)\n      ? getOnlyQueryAttributesCustomQuery(this.a)\n      : getQueryAttrsText(this);\n    let shortenCustomQueryText = customQueryText;\n    let customQueryTooltipText: string | undefined;\n\n    if (shortenCustomQueryText.length > MAX_LABEL_LENGTH) {\n      customQueryTooltipText = shortenCustomQueryText;\n      shortenCustomQueryText = `${shortenCustomQueryText.substring(\n        0,\n        MAX_LABEL_LENGTH,\n      )}...`;\n    }\n\n    // we render them together to avoid possible collisions\n\n    const fragmentId = Number(restruct.atoms.get(aid)?.a.fragment);\n    // TODO: fragment should not be null\n    const fragment = restruct.molecule.frags.get(fragmentId);\n\n    const displayStereoLabel = shouldDisplayStereoLabel(\n      stereoLabel,\n      options.stereoLabelStyle,\n      options.ignoreChiralFlag,\n      fragment?.enhancedStereoFlag,\n    );\n\n    let text = '';\n\n    if (displayStereoLabel) {\n      text = `${stereoLabel}\\n`;\n    }\n\n    if (shortenCustomQueryText.length > 0) {\n      text += `${shortenCustomQueryText}\\n`;\n    }\n\n    if (aamText.length > 0) {\n      text += `.${aamText}.`;\n    }\n\n    if (text.length > 0) {\n      const elem = Elements.get(this.a.label);\n      const aamPath = render.paper.text(ps.x, ps.y, text).attr({\n        font: options.font,\n        'font-size': options.fontszsubInPx,\n        fill:\n          options.atomColoring && elem ? ElementColor[this.a.label] : '#000',\n      });\n      if (stereoLabel) {\n        // use dom element to change color of stereo label which is the first element\n        // of just created text\n        // text -> tspan\n        const color = getStereoAtomColor(render.options, stereoLabel);\n        aamPath.node.childNodes[0].setAttribute('fill', color);\n        const opacity = getStereoAtomOpacity(render.options, stereoLabel);\n        aamPath.node.childNodes[0].setAttribute('fill-opacity', opacity);\n      }\n      const aamBox = util.relBox(aamPath.getBBox());\n      draw.recenterText(aamPath, aamBox);\n      const visel = this.visel;\n      let t = 3;\n      let dir = this.bisectLargestSector(restruct.molecule);\n      // estimate the shift to clear the atom label\n      for (let i = 0; i < visel.exts.length; ++i) {\n        t = Math.max(t, util.shiftRayBox(ps, dir, visel.exts[i].translate(ps)));\n      }\n      // estimate the shift backwards to account for the size of the aam/query text box itself\n      t += util.shiftRayBox(ps, dir.negated(), Box2Abs.fromRelBox(aamBox));\n      dir = dir.scaled(8 + t);\n      pathAndRBoxTranslate(aamPath, aamBox, dir.x, dir.y);\n      restruct.addReObjectPath(LayerMap.data, this.visel, aamPath, ps, true);\n\n      if (customQueryTooltipText) {\n        addTooltip(aamPath.node, customQueryTooltipText);\n      }\n    }\n\n    // Checking whether atom is highlighted and what's the last color\n    const highlights = restruct.molecule.highlights;\n    let isHighlighted = false;\n    let highlightColor = '';\n    highlights.forEach((highlight) => {\n      const hasCurrentHighlight = highlight.atoms?.includes(aid);\n      isHighlighted = isHighlighted || hasCurrentHighlight;\n      if (hasCurrentHighlight) {\n        highlightColor = highlight.color;\n      }\n    });\n\n    // Drawing highlight\n    if (isHighlighted) {\n      const style = { fill: highlightColor, stroke: 'none' };\n\n      const path = this.makeHighlightePlate(restruct, style);\n      restruct.addReObjectPath(LayerMap.hovering, this.visel, path);\n    }\n\n    if (atom.cip) {\n      this.cip = util.drawCIPLabel({\n        atomOrBond: atom,\n        position: atom.pp,\n        restruct: render.ctab,\n        visel: this.visel,\n      });\n    }\n  }\n\n  getLargestSectorFromNeighbors(struct: Struct): {\n    neighborAngle: number;\n    largestAngle: number;\n  } {\n    let angles: Array<number> = [];\n    this.a.neighbors.forEach((halfBondId) => {\n      const halfBond = struct.halfBonds.get(halfBondId);\n      halfBond && angles.push(halfBond.ang);\n    });\n    angles = angles.sort((a, b) => a - b);\n    const largeAngles: Array<number> = [];\n    for (let i = 0; i < angles.length - 1; ++i) {\n      largeAngles.push(angles[(i + 1) % angles.length] - angles[i]);\n    }\n    largeAngles.push(angles[0] - angles[angles.length - 1] + 2 * Math.PI);\n    let largestAngle = 0;\n    let neighborAngle = -Math.PI / 2;\n    for (let i = 0; i < angles.length; ++i) {\n      if (largeAngles[i] > largestAngle) {\n        largestAngle = largeAngles[i];\n        neighborAngle = angles[i];\n      }\n    }\n\n    return { neighborAngle, largestAngle };\n  }\n\n  bisectLargestSector(struct: Struct): Vec2 {\n    const { largestAngle, neighborAngle } =\n      this.getLargestSectorFromNeighbors(struct);\n    const bisectAngle = neighborAngle + largestAngle / 2;\n    return newVectorFromAngle(bisectAngle);\n  }\n}\n\nfunction getStereoAtomColor(options, stereoLabel) {\n  if (\n    !stereoLabel ||\n    options.colorStereogenicCenters === StereoColoringType.Off ||\n    options.colorStereogenicCenters === StereoColoringType.BondsOnly\n  ) {\n    return '#000';\n  }\n\n  return getColorFromStereoLabel(options, stereoLabel);\n}\n\nexport function getColorFromStereoLabel(options, stereoLabel) {\n  const stereoLabelType = stereoLabel.match(/\\D+/g)[0];\n\n  switch (stereoLabelType) {\n    case StereoLabel.And:\n      return options.colorOfAndCenters;\n    case StereoLabel.Or:\n      return options.colorOfOrCenters;\n    case StereoLabel.Abs:\n      return options.colorOfAbsoluteCenters;\n    default:\n      return '#000';\n  }\n}\n\nfunction getStereoAtomOpacity(options, stereoLabel) {\n  const stereoLabelType = stereoLabel.match(/\\D+/g)[0];\n  const stereoLabelNumber = +stereoLabel.replace(stereoLabelType, '');\n  if (\n    !options.autoFadeOfStereoLabels ||\n    stereoLabelType === StereoLabel.Abs ||\n    options.colorStereogenicCenters === StereoColoringType.Off ||\n    options.colorStereogenicCenters === StereoColoringType.BondsOnly\n  ) {\n    return 1;\n  }\n  return Math.max(1 - (stereoLabelNumber - 1) / 10, StereoLabelMinOpacity);\n}\n\nfunction shouldDisplayStereoLabel(\n  stereoLabel,\n  labelStyle,\n  ignoreChiralFlag,\n  flag: StereoFlag | undefined,\n): boolean {\n  if (!stereoLabel) {\n    return false;\n  }\n\n  const stereoLabelType = stereoLabel.match(/\\D+/g)[0];\n\n  if (ignoreChiralFlag && stereoLabelType === StereoLabel.Abs) {\n    return false;\n  }\n  if (ignoreChiralFlag && stereoLabelType !== StereoLabel.Abs) {\n    return true;\n  }\n\n  switch (labelStyle) {\n    case StereLabelStyleType.Off:\n      return false;\n    case StereLabelStyleType.On:\n      return true;\n    case StereLabelStyleType.Classic:\n      return !!(\n        flag === StereoFlag.Mixed || stereoLabelType === StereoLabel.Or\n      );\n    case StereLabelStyleType.IUPAC:\n      return !!(\n        flag === StereoFlag.Mixed && stereoLabelType !== StereoLabel.Abs\n      );\n    default:\n      return true;\n  }\n}\n\nfunction isLabelVisible(restruct, options, atom: ReAtom) {\n  const isAttachmentPointAtom = Boolean(atom.a.attachmentPoints);\n  const isCarbon = atom.a.label.toLowerCase() === 'c';\n  const visibleTerminal =\n    options.showHydrogenLabels !== ShowHydrogenLabels.Off &&\n    options.showHydrogenLabels !== ShowHydrogenLabels.Hetero;\n\n  const neighborsLength =\n    atom.a.neighbors.length === 0 ||\n    (atom.a.neighbors.length < 2 && visibleTerminal);\n\n  if (isAttachmentPointAtom && isCarbon) {\n    return false;\n  }\n\n  const shouldBeVisible =\n    neighborsLength ||\n    options.carbonExplicitly ||\n    options.showHydrogenLabels === ShowHydrogenLabels.On ||\n    atom.a.alias ||\n    atom.a.isotope !== null ||\n    atom.a.radical !== 0 ||\n    atom.a.charge !== null ||\n    atom.a.explicitValence >= 0 ||\n    atom.a.atomList !== null ||\n    atom.a.rglabel !== null ||\n    (atom.a.badConn && options.showValenceWarnings) ||\n    atom.a.label.toLowerCase() !== 'c';\n\n  if (shouldBeVisible) return true;\n\n  if (atom.a.neighbors.length === 2) {\n    const nei1 = atom.a.neighbors[0];\n    const nei2 = atom.a.neighbors[1];\n    const hb1 = restruct.molecule.halfBonds.get(nei1);\n    const hb2 = restruct.molecule.halfBonds.get(nei2);\n    const bond1 = restruct.bonds.get(hb1.bid);\n    const bond2 = restruct.bonds.get(hb2.bid);\n\n    const sameNotStereo =\n      bond1.b.type === bond2.b.type &&\n      bond1.b.stereo === Bond.PATTERN.STEREO.NONE &&\n      bond2.b.stereo === Bond.PATTERN.STEREO.NONE;\n\n    if (sameNotStereo && Math.abs(Vec2.cross(hb1.dir, hb2.dir)) < 0.2) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction displayHydrogen(atom: ReAtom, hydrogenLabels: ShowHydrogenLabels) {\n  return (\n    hydrogenLabels === ShowHydrogenLabels.On ||\n    (hydrogenLabels === ShowHydrogenLabels.Terminal &&\n      atom.a.neighbors.length < 2) ||\n    (hydrogenLabels === ShowHydrogenLabels.Hetero &&\n      atom.label?.text.toLowerCase() !== 'c') ||\n    (hydrogenLabels === ShowHydrogenLabels.TerminalAndHetero &&\n      (atom.a.neighbors.length < 2 || atom.label?.text.toLowerCase() !== 'c'))\n  );\n}\n\nfunction shouldHydrogenBeOnLeft(struct, atom) {\n  if (atom.a.neighbors.length === 0) {\n    if (atom.a.label === 'D' || atom.a.label === 'T') {\n      return false;\n    } else {\n      const element = Elements.get(atom.a.label);\n      return !element || Boolean(element.leftH);\n    }\n  }\n\n  if (atom.a.neighbors.length === 1) {\n    const neighbor = atom.a.neighbors[0];\n    const neighborDirection = struct.halfBonds.get(neighbor).dir;\n\n    return neighborDirection.x > 0;\n  }\n\n  return false;\n}\n\nfunction getOnlyQueryAttributesCustomQuery(atom: Atom) {\n  const queryText =\n    atom.queryProperties.customQuery ||\n    getAtomCustomQuery(\n      {\n        ...atom,\n        ...atom.queryProperties,\n      },\n      true,\n    );\n  return queryText;\n}\n\nfunction addTooltip(node, text: string) {\n  const tooltip = text.split(/(?<=[;,])/).join(' ');\n  node.childNodes[0].setAttribute('data-tooltip', util.escapeHtml(tooltip));\n}\n\nfunction buildLabel(\n  atom: ReAtom,\n  paper: any,\n  ps: Vec2,\n  options: any,\n  atomId: number,\n  sgroup?: SGroup,\n): {\n  rightMargin: number;\n  leftMargin: number;\n  label: ElemAttr;\n} {\n  const {\n    atomColoring,\n    font,\n    fontszInPx,\n    currentlySelectedMonomerAttachmentPoint,\n    connectedMonomerAttachmentPoints,\n    usageInMacromolecule,\n  } = options;\n  // eslint-disable-line max-statements\n  const label: any = {\n    text: getLabelText(atom.a, atomId, sgroup),\n  };\n  let tooltip: string | null = null;\n  if (!label.text) {\n    label.text = 'R#';\n  }\n\n  if (label.text === atom.a.label) {\n    const element = Elements.get(label.text);\n    if (atomColoring && element) {\n      atom.color = ElementColor[label.text] || '#000';\n    }\n  }\n\n  const shouldStyleLabel = usageInMacromolecule !== undefined;\n  const isMonomerAttachmentPoint = attachmentPointNames.includes(label.text);\n  const isMonomerAttachmentPointSelected =\n    currentlySelectedMonomerAttachmentPoint === label.text;\n  const isMonomerAttachmentPointUsed =\n    connectedMonomerAttachmentPoints?.includes(label.text);\n\n  const { color, fill, stroke } = util.useLabelStyles(\n    isMonomerAttachmentPointSelected,\n    isMonomerAttachmentPointUsed,\n    usageInMacromolecule,\n  );\n\n  if (isMonomerAttachmentPoint && shouldStyleLabel) {\n    atom.color = color;\n  }\n\n  if (label.text?.length > MAX_LABEL_LENGTH) {\n    tooltip = label.text;\n    label.text = `${label.text?.substring(0, 8)}...`;\n  }\n\n  const { previewOpacity } = options;\n\n  label.path = paper.text(ps.x, ps.y, label.text).attr({\n    font,\n    'font-size': fontszInPx,\n    fill: atom.color,\n    'font-style': atom.a.pseudo ? 'italic' : '',\n    'fill-opacity': atom.a.isPreview ? previewOpacity : 1,\n  });\n\n  if (isMonomerAttachmentPoint && shouldStyleLabel) {\n    const backgroundSize = fontszInPx * 2;\n\n    label.background = paper\n      .rect(\n        ps.x - backgroundSize / 2,\n        ps.y - backgroundSize / 2,\n        backgroundSize,\n        backgroundSize,\n        10,\n      )\n      .attr({ fill })\n      .attr({ stroke });\n  }\n  if (tooltip) {\n    addTooltip(label.path.node, tooltip);\n  }\n\n  label.rbb = util.relBox(label.path.getBBox());\n  draw.recenterText(label.path, label.rbb);\n  let rightMargin =\n    (label.rbb.width / 2) * (options.zoom > 1 ? 1 : options.zoom); //\n  let leftMargin =\n    (-label.rbb.width / 2) * (options.zoom > 1 ? 1 : options.zoom);\n\n  if (atom.a.atomList !== null) {\n    const xShift =\n      ((atom.hydrogenOnTheLeft ? -1 : 1) *\n        (label.rbb.width - label.rbb.height)) /\n      2;\n    pathAndRBoxTranslate(\n      label.path,\n      label.rbb,\n      xShift,\n\n      0,\n    );\n    rightMargin += xShift;\n    leftMargin += xShift;\n  }\n\n  atom.label = label;\n  return { label, rightMargin, leftMargin };\n}\n\nfunction getLabelText(atom, atomId: number, sgroup?: SGroup) {\n  if (sgroup?.isSuperatomWithoutLabel) {\n    const attachmentPoint = sgroup\n      .getAttachmentPoints()\n      .find((attachmentPoint) => {\n        return attachmentPoint.leaveAtomId === atomId;\n      });\n\n    if (attachmentPoint && attachmentPoint.attachmentPointNumber) {\n      return getAttachmentPointLabel(attachmentPoint.attachmentPointNumber);\n    }\n  }\n\n  if (atom.atomList !== null) return atom.atomList.label();\n\n  if (atom.pseudo) return atom.pseudo;\n\n  if (atom.alias) return atom.alias;\n\n  if (atom.label === 'R#' && atom.rglabel !== null) {\n    let text = '';\n\n    for (let rgi = 0; rgi < 32; rgi++) {\n      if (atom.rglabel & (1 << rgi)) {\n        // eslint-disable-line max-depth\n        text += 'R' + (rgi + 1).toString();\n      }\n    }\n\n    return text;\n  }\n\n  return atom.label;\n}\n\nfunction showHydroIndex(atom, render, implh, rightMargin): ElemAttr {\n  const ps = Scale.modelToCanvas(atom.a.pp, render.options);\n  const options = render.options;\n  const delta = 0.5 * options.lineWidth;\n  const hydroIndex: any = {};\n  hydroIndex.text = (implh + 1).toString();\n  hydroIndex.path = render.paper.text(ps.x, ps.y, hydroIndex.text).attr({\n    font: options.font,\n    'font-size': options.fontszsubInPx,\n    fill: atom.color,\n  });\n  hydroIndex.rbb = util.relBox(hydroIndex.path.getBBox());\n  draw.recenterText(hydroIndex.path, hydroIndex.rbb);\n  /* eslint-disable no-mixed-operators */\n  pathAndRBoxTranslate(\n    hydroIndex.path,\n    hydroIndex.rbb,\n    rightMargin + 0.5 * hydroIndex.rbb.width + delta,\n    0.2 * atom.label.rbb.height,\n  );\n  /* eslint-enable no-mixed-operators */\n  return hydroIndex;\n}\n\nfunction showRadical(atom: ReAtom, render: Render): Omit<ElemAttr, 'text'> {\n  const ps: Vec2 = Scale.modelToCanvas(atom.a.pp, render.options);\n  const options = render.options;\n  const paper: any = render.paper;\n  const radical: any = {};\n  let hshift;\n  switch (atom.a.radical) {\n    case 1:\n      radical.path = paper.set();\n      hshift = 1.6 * options.lineWidth;\n      radical.path.push(\n        draw.radicalBullet(paper, ps.add(new Vec2(-hshift, 0)), options),\n        draw.radicalBullet(paper, ps.add(new Vec2(hshift, 0)), options),\n      );\n      radical.path.attr('fill', atom.color);\n      break;\n    case 2:\n      radical.path = paper.set();\n      radical.path.push(draw.radicalBullet(paper, ps, options));\n      radical.path.attr('fill', atom.color);\n      break;\n    case 3:\n      radical.path = paper.set();\n      hshift = 1.6 * options.lineWidth;\n      radical.path.push(\n        draw.radicalCap(paper, ps.add(new Vec2(-hshift, 0)), options),\n        draw.radicalCap(paper, ps.add(new Vec2(hshift, 0)), options),\n      );\n      radical.path.attr('stroke', atom.color);\n      break;\n    default:\n      break;\n  }\n  radical.rbb = util.relBox(radical.path.getBBox());\n  let vshift = -0.5 * (atom.label!.rbb.height + radical.rbb.height);\n  if (atom.a.radical === 3) vshift -= options.lineWidth / 2;\n  pathAndRBoxTranslate(radical.path, radical.rbb, 0, vshift);\n  return radical;\n}\n\nfunction showIsotope(\n  atom: ReAtom,\n  render: Render,\n  leftMargin: number,\n): ElemAttr {\n  const ps = Scale.modelToCanvas(atom.a.pp, render.options);\n  const options = render.options;\n  const delta = 0.5 * options.lineWidth;\n  const isotope: any = {};\n  isotope.text = atom.a.isotope === null ? '' : atom.a.isotope.toString();\n  isotope.path = render.paper.text(ps.x, ps.y, isotope.text).attr({\n    font: options.font,\n    'font-size': options.fontszsubInPx,\n    fill: atom.color,\n  });\n  isotope.rbb = util.relBox(isotope.path.getBBox());\n  draw.recenterText(isotope.path, isotope.rbb);\n  /* eslint-disable no-mixed-operators */\n  pathAndRBoxTranslate(\n    isotope.path,\n    isotope.rbb,\n    leftMargin - 0.5 * isotope.rbb.width - delta,\n    -0.3 * atom.label!.rbb.height,\n  );\n  /* eslint-enable no-mixed-operators */\n  return isotope;\n}\n\nfunction showCharge(\n  atom: ReAtom,\n  render: Render,\n  rightMargin: number,\n): ElemAttr {\n  const ps = Scale.modelToCanvas(atom.a.pp, render.options);\n  const options = render.options;\n  const delta = 0.5 * options.lineWidth;\n  const charge: any = {};\n  charge.text = '';\n  if (atom.a.charge !== null) {\n    const absCharge = Math.abs(atom.a.charge);\n    if (absCharge !== 1) charge.text = absCharge.toString();\n    if (atom.a.charge < 0) charge.text += '\\u2013';\n    else charge.text += '+';\n  } else {\n    charge.text = '';\n  }\n\n  charge.path = render.paper.text(ps.x, ps.y, charge.text).attr({\n    font: options.font,\n    'font-size': options.fontszsubInPx,\n    fill: atom.color,\n  });\n  charge.rbb = util.relBox(charge.path.getBBox());\n  draw.recenterText(charge.path, charge.rbb);\n  /* eslint-disable no-mixed-operators */\n  pathAndRBoxTranslate(\n    charge.path,\n    charge.rbb,\n    rightMargin + 0.5 * charge.rbb.width + delta,\n    -0.3 * atom.label!.rbb.height,\n  );\n  /* eslint-enable no-mixed-operators */\n  return charge;\n}\n\nfunction showExplicitValence(\n  atom: ReAtom,\n  render: Render,\n  rightMargin: number,\n): ElemAttr {\n  const mapValence = {\n    0: '0',\n    1: 'I',\n    2: 'II',\n    3: 'III',\n    4: 'IV',\n    5: 'V',\n    6: 'VI',\n    7: 'VII',\n    8: 'VIII',\n    9: 'IX',\n    10: 'X',\n    11: 'XI',\n    12: 'XII',\n    13: 'XIII',\n    14: 'XIV',\n  };\n  const ps = Scale.modelToCanvas(atom.a.pp, render.options);\n  const options = render.options;\n  const delta = 0.5 * options.lineWidth;\n  const valence: any = {};\n  valence.text = mapValence[atom.a.explicitValence];\n  if (!valence.text) {\n    throw new Error('invalid valence ' + atom.a.explicitValence.toString());\n  }\n  valence.text = '(' + valence.text + ')';\n  valence.path = render.paper.text(ps.x, ps.y, valence.text).attr({\n    font: options.font,\n    'font-size': options.fontszsubInPx,\n    fill: atom.color,\n  });\n  valence.rbb = util.relBox(valence.path.getBBox());\n  draw.recenterText(valence.path, valence.rbb);\n  /* eslint-disable no-mixed-operators */\n  pathAndRBoxTranslate(\n    valence.path,\n    valence.rbb,\n    rightMargin + 0.5 * valence.rbb.width + delta,\n    -0.3 * atom.label!.rbb.height,\n  );\n  /* eslint-enable no-mixed-operators */\n  return valence;\n}\n\nfunction showHydrogen(\n  atom: ReAtom,\n  render: Render,\n  implh: number,\n  data: {\n    hydrogen: any;\n    hydroIndex: number;\n    rightMargin: number;\n    leftMargin: number;\n  },\n): {\n  hydrogen: ElemAttr;\n  hydroIndex: ElemAttr;\n  rightMargin: number;\n  leftMargin: number;\n} {\n  // eslint-disable-line max-statements\n  let hydroIndex: any = data.hydroIndex;\n  const hydrogenLeft = atom.hydrogenOnTheLeft;\n  const ps = Scale.modelToCanvas(atom.a.pp, render.options);\n  const options = render.options;\n  const delta = 0.5 * options.lineWidth;\n  const hydrogen = data.hydrogen;\n  hydrogen.text = 'H';\n  hydrogen.path = render.paper.text(ps.x, ps.y, hydrogen.text).attr({\n    font: options.font,\n    'font-size': options.fontszInPx,\n    fill: atom.color,\n  });\n  hydrogen.rbb = util.relBox(hydrogen.path.getBBox());\n  draw.recenterText(hydrogen.path, hydrogen.rbb);\n  if (!hydrogenLeft) {\n    pathAndRBoxTranslate(\n      hydrogen.path,\n      hydrogen.rbb,\n      data.rightMargin + 0.35 * hydrogen.rbb.width + delta,\n      0,\n    );\n    data.rightMargin += hydrogen.rbb.width + delta;\n  }\n  if (implh > 1) {\n    hydroIndex = {};\n    hydroIndex.text = implh.toString();\n    hydroIndex.path = render.paper.text(ps.x, ps.y, hydroIndex.text).attr({\n      font: options.font,\n      'font-size': options.fontszsubInPx,\n      fill: atom.color,\n    });\n    hydroIndex.rbb = util.relBox(hydroIndex.path.getBBox());\n    draw.recenterText(hydroIndex.path, hydroIndex.rbb);\n    if (!hydrogenLeft) {\n      pathAndRBoxTranslate(\n        hydroIndex.path,\n        hydroIndex.rbb,\n        data.rightMargin +\n          0.15 * hydroIndex.rbb.width * (options.zoom > 1 ? 1 : options.zoom) +\n          delta,\n        0.2 * atom.label!.rbb.height,\n      );\n      data.rightMargin += hydroIndex.rbb.width + delta;\n    }\n  }\n  if (hydrogenLeft) {\n    if (hydroIndex != null) {\n      pathAndRBoxTranslate(\n        hydroIndex.path,\n        hydroIndex.rbb,\n        data.leftMargin - 0.4 * hydroIndex.rbb.width - delta,\n        0.2 * atom.label!.rbb.height,\n      );\n      data.leftMargin -= hydroIndex.rbb.width + delta;\n    }\n    pathAndRBoxTranslate(\n      hydrogen.path,\n      hydrogen.rbb,\n      data.leftMargin -\n        0.4 *\n          hydrogen.rbb.width *\n          (implh > 1 && options.zoom < 1 ? options.zoom : 1) -\n        delta,\n      0,\n    );\n    data.leftMargin -= hydrogen.rbb.width + delta;\n  }\n  return Object.assign(data, { hydrogen, hydroIndex });\n}\n\nfunction showWarning(\n  atom,\n  render,\n  leftMargin,\n  rightMargin,\n): { rbb: DOMRect; path: any } {\n  const ps = Scale.modelToCanvas(atom.a.pp, render.options);\n  const delta = 0.5 * render.options.lineWidth;\n  const warning: any = {};\n  const y = ps.y + atom.label.rbb.height / 2 + delta;\n  warning.path = render.paper\n    .path(\n      'M{0},{1}L{2},{3}',\n      tfx(ps.x + leftMargin),\n      tfx(y),\n      tfx(ps.x + rightMargin),\n      tfx(y),\n    )\n    .attr(render.options.lineattr)\n    .attr({ stroke: '#F00' });\n  warning.rbb = util.relBox(warning.path.getBBox());\n  return warning;\n}\n\nfunction getAamText(atom) {\n  let aamText = '';\n  if (atom.a.aam > 0) aamText += atom.a.aam;\n  if (atom.a.invRet > 0) {\n    if (aamText.length > 0) aamText += ',';\n    if (atom.a.invRet === 1) aamText += 'Inv';\n    else if (atom.a.invRet === 2) aamText += 'Ret';\n    else throw new Error('Invalid value for the invert/retain flag');\n  }\n  if (atom.a.exactChangeFlag > 0) {\n    if (aamText.length > 0) aamText += ',';\n    if (atom.a.exactChangeFlag === 1) aamText += 'ext';\n    else throw new Error('Invalid value for the exact change flag');\n  }\n  return aamText;\n}\n\nfunction getRingBondCountAttrText(value: number) {\n  let attrText: string;\n  if (value > 0) {\n    attrText = 'rb' + value.toString();\n  } else if (value === -1) {\n    attrText = 'rb0';\n  } else if (value === -2) {\n    attrText = 'rb*';\n  } else {\n    throw new Error('Ring bond count invalid');\n  }\n  return attrText;\n}\n\nfunction getRingConnectivity(value: number) {\n  if (value > 0) {\n    return 'x' + value.toString();\n  } else if (value === -1 || value === -2) {\n    return 'x0';\n  } else {\n    return '';\n  }\n}\n\nfunction getDegree(value: number) {\n  if (value > 0) {\n    return 'D' + value.toString();\n  } else if (value === -1 || value === -2) {\n    return 'D0';\n  } else {\n    return '';\n  }\n}\n\nfunction getSubstitutionCountAttrText(value: number) {\n  let attrText: string;\n  if (value > 0) {\n    attrText = 's' + value.toString();\n  } else if (value === -1) {\n    attrText = 's0';\n  } else if (value === -2) {\n    attrText = 's*';\n  } else {\n    throw new Error('Substitution count invalid');\n  }\n  return attrText;\n}\n\nexport function getAtomType(atom: Atom) {\n  return atom.atomList\n    ? 'list'\n    : atom.pseudo === atom.label\n    ? 'pseudo'\n    : 'single';\n}\n\nexport function checkIsSmartPropertiesExist(atom) {\n  const smartsSpecificProperties = [\n    'ringMembership',\n    'ringSize',\n    'connectivity',\n    'chirality',\n    'aromaticity',\n    'customQuery',\n  ];\n  return smartsSpecificProperties.some((name) => atom.queryProperties?.[name]);\n}\n\nexport function getAtomCustomQuery(atom, includeOnlyQueryAttributes?: boolean) {\n  let queryAttrsText = '';\n  const nonQueryAttributes = ['charge', 'explicitValence', 'isotope'];\n\n  const addSemicolon = () => {\n    if (queryAttrsText.length > 0) queryAttrsText += ';';\n  };\n  const patterns: {\n    [key: string]: (value: string, atom) => string;\n  } = {\n    isotope: (value) => value,\n    aromaticity: (value) => (value === 'aromatic' ? 'a' : 'A'),\n    charge: (value) => {\n      if (value === '') return value;\n      const regExpResult = /^([+-]?)([0-9]{1,3}|1000)([+-]?)$/.exec(value);\n      const charge = regExpResult\n        ? parseInt(\n            regExpResult[1] + regExpResult[3] + regExpResult[2],\n          ).toString()\n        : value;\n      return charge[0] !== '-' ? `+${charge}` : charge;\n    },\n    unsaturatedAtom: (value) => (Number(value) === 1 ? 'u' : ''),\n    explicitValence: (value) => (Number(value) !== -1 ? `v${value}` : ''),\n    ringBondCount: (value) => getRingConnectivity(Number(value)),\n    substitutionCount: (value) => getDegree(Number(value)),\n    hCount: (value) =>\n      Number(value) > 0 ? 'H' + (Number(value) - 1).toString() : '',\n    implicitHCount: (value) => `h${value}`,\n    ringMembership: (value) => `R${value}`,\n    ringSize: (value) => `r${value}`,\n    connectivity: (value) => `X${value}`,\n    chirality: (value) => (value === 'clockwise' ? '@@' : '@'),\n  };\n\n  for (const propertyName in patterns) {\n    if (\n      includeOnlyQueryAttributes &&\n      nonQueryAttributes.includes(propertyName)\n    ) {\n      continue;\n    }\n\n    const value = atom[propertyName];\n    if (propertyName in atom && value !== null) {\n      const attrText = patterns[propertyName](value, atom);\n      if (attrText) {\n        addSemicolon();\n      }\n      queryAttrsText += attrText;\n    }\n  }\n\n  return queryAttrsText;\n}\n\nfunction getQueryAttrsText(atom): string {\n  let queryAttrsText = '';\n\n  const addSemicolon = () => {\n    if (queryAttrsText.length > 0) queryAttrsText += ';';\n  };\n\n  const { ringBondCount, substitutionCount, unsaturatedAtom, hCount } = atom.a;\n\n  if (ringBondCount !== 0) {\n    queryAttrsText += getRingBondCountAttrText(ringBondCount);\n  }\n  if (substitutionCount !== 0) {\n    addSemicolon();\n    queryAttrsText += getSubstitutionCountAttrText(substitutionCount);\n  }\n  if (unsaturatedAtom > 0) {\n    addSemicolon();\n    if (unsaturatedAtom === 1) queryAttrsText += 'u';\n    else throw new Error('Unsaturated atom invalid value');\n  }\n  if (hCount > 0) {\n    addSemicolon();\n    queryAttrsText += 'H' + (hCount - 1).toString();\n  }\n  return queryAttrsText;\n}\n\nfunction pathAndRBoxTranslate(path, rbb, x, y) {\n  path.translateAbs(x, y);\n  rbb.x += x;\n  rbb.y += y;\n}\n\nfunction newVectorFromAngle(angle: number): Vec2 {\n  return new Vec2(Math.cos(angle), Math.sin(angle));\n}\n\nexport default ReAtom;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  Bond,\n  FunctionalGroup,\n  HalfBond,\n  SGroup,\n  Struct,\n  Vec2,\n} from 'domain/entities';\nimport { LayerMap, StereoColoringType } from './generalEnumTypes';\nimport { getColorFromStereoLabel } from './reatom';\n\nimport ReObject from './reobject';\nimport ReStruct from './restruct';\nimport { Render } from '../raphaelRender';\nimport { Scale } from 'domain/helpers';\nimport draw from '../draw';\nimport util from '../util';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\nimport { RenderOptions, RenderOptionStyles } from '../render.types';\n\nclass ReBond extends ReObject {\n  b: Bond;\n  doubleBondShift: number;\n  path: any;\n  neihbid1 = -1;\n  neihbid2 = -1;\n  boldStereo?: boolean;\n  rbb?: { x: number; y: number; width: number; height: number };\n  cip?: {\n    // Raphael paths\n    path: any;\n    text: any;\n    rectangle: any;\n  };\n\n  constructor(bond: Bond) {\n    super('bond');\n    this.b = bond; // TODO rename b to item\n    this.doubleBondShift = 0;\n  }\n\n  static isSelectable() {\n    return true;\n  }\n\n  private static getAtomPositionForBond(\n    struct: Struct,\n    atomId: number,\n    sgroup?: SGroup,\n  ) {\n    return sgroup?.isContracted()\n      ? sgroup?.getContractedPosition(struct).atomId\n      : atomId;\n  }\n\n  static bondRecalc(bond: ReBond, restruct: ReStruct, options: any): void {\n    const render = restruct.render;\n    const sgroup1 = restruct.molecule.getGroupFromAtomId(bond.b.begin);\n    const sgroup2 = restruct.molecule.getGroupFromAtomId(bond.b.end);\n    const beginAtom = restruct.atoms.get(\n      ReBond.getAtomPositionForBond(restruct.molecule, bond.b.begin, sgroup1),\n    );\n    const endAtom = restruct.atoms.get(\n      ReBond.getAtomPositionForBond(restruct.molecule, bond.b.end, sgroup2),\n    );\n\n    if (\n      !beginAtom ||\n      !endAtom ||\n      bond.b.hb1 === undefined ||\n      bond.b.hb2 === undefined\n    ) {\n      return;\n    }\n\n    let p1: Vec2;\n    let p2: Vec2;\n\n    if (sgroup1 instanceof MonomerMicromolecule && sgroup1 !== sgroup2) {\n      p1 = sgroup1.isContracted() ? (sgroup1.pp as Vec2) : beginAtom.a.pp;\n    } else {\n      p1 = beginAtom.a.pp;\n    }\n\n    if (sgroup2 instanceof MonomerMicromolecule && sgroup1 !== sgroup2) {\n      p2 = sgroup2.isContracted() ? (sgroup2.pp as Vec2) : endAtom.a.pp;\n    } else {\n      p2 = endAtom.a.pp;\n    }\n\n    const hb1 = restruct.molecule.halfBonds.get(bond.b.hb1);\n    const hb2 = restruct.molecule.halfBonds.get(bond.b.hb2);\n\n    if (!hb1?.dir || !hb2?.dir) return;\n\n    bond.b.center = Vec2.lc2(p1, 0.5, p2, 0.5);\n    bond.b.len = Vec2.dist(\n      Scale.modelToCanvas(p1, render.options),\n      Scale.modelToCanvas(p2, render.options),\n    );\n\n    hb1.p = beginAtom.getShiftedSegmentPosition(\n      options,\n      hb1.dir,\n      p1,\n      bond.b.len,\n    );\n    hb2.p = endAtom.getShiftedSegmentPosition(options, hb2.dir, p2, bond.b.len);\n\n    bond.b.sb = options.lineWidth * 5;\n    /* eslint-disable no-mixed-operators */\n    bond.b.sa = Math.max(bond.b.sb, bond.b.len / 2 - options.lineWidth * 2);\n    /* eslint-enable no-mixed-operators */\n    bond.b.angle = (Math.atan2(hb1.dir.y, hb1.dir.x) * 180) / Math.PI;\n  }\n\n  drawHover(render: Render) {\n    const ret = this.makeHoverPlate(render);\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n    return ret;\n  }\n\n  getSelectionPoints(render: Render, isHighlight = false) {\n    // please refer to: ketcher-core/docs/data/hover_selection_1.png\n    const bond: Bond = this.b;\n    const { ctab: restruct, options } = render;\n    const { bondThickness, bondSpacingInPx, stereoBondWidth } = options;\n    const regularSelectionThikness = bondSpacingInPx + bondThickness;\n\n    // get half-bond positions, this is where the actual bond\n    // image on the screen is drawn, it may be different e.g. if the\n    // bond is connected to an atom with a label as opposed\n    // to when it is connected to a Carbon atom w/o a label\n    // please refer to: ketcher-core/docs/data/hover_selection_2.png\n    const halfBondStart = restruct.molecule.halfBonds.get(bond.hb1!)!.p;\n    const halfBondEnd = restruct.molecule.halfBonds.get(bond.hb2!)!.p;\n\n    const isStereoBond =\n      bond.stereo !== Bond.PATTERN.STEREO.NONE &&\n      bond.stereo !== Bond.PATTERN.STEREO.CIS_TRANS;\n\n    const highlightPadding = isHighlight ? -1 : 0;\n    const stereoPadding = isStereoBond ? 0 : -2;\n    const addPadding = highlightPadding + stereoPadding;\n\n    // find the points on the line where we will be drawing the curves\n    const contourStart = Vec2.getLinePoint(\n      halfBondEnd,\n      halfBondStart,\n      addPadding,\n    );\n    const contourEnd = Vec2.getLinePoint(\n      halfBondStart,\n      halfBondEnd,\n      addPadding,\n    );\n\n    const stereoBondStartHeightCoef = 0.5;\n    const bondPadding = 0.5;\n    const highlightBondPadding = isHighlight ? 0 : 2;\n    const addStart =\n      (isStereoBond\n        ? stereoBondWidth * stereoBondStartHeightCoef\n        : regularSelectionThikness + bondPadding) + highlightBondPadding;\n    const stereoBondEndHeightCoef = 1;\n    const addEnd =\n      (isStereoBond\n        ? stereoBondWidth +\n          (regularSelectionThikness * stereoBondEndHeightCoef) / stereoBondWidth\n        : regularSelectionThikness + bondPadding) + highlightBondPadding;\n\n    const contourPaddedStart = Vec2.getLinePoint(\n      contourStart,\n      contourEnd,\n      addEnd,\n    );\n    const contourPaddedEnd = Vec2.getLinePoint(\n      contourEnd,\n      contourStart,\n      addStart,\n    );\n\n    // we need four points for each bezier curve\n    // and two for each line that together form the selection contour\n    // the padded values are for the curve points and the rest of\n    // the values are for drawing the lines\n    // please refer to: ketcher-core/docs/data/hover_selection_3.png\n    const startPoint = contourStart.add(new Vec2(addEnd, 0));\n    const endPoint = contourEnd.add(new Vec2(addStart, 0));\n    const padStartPoint = contourPaddedStart.add(new Vec2(addEnd, 0));\n    const padEndPoint = contourPaddedEnd.add(new Vec2(addStart, 0));\n\n    const { angle } = bond;\n\n    // rotate the points +/-90 degrees to find the\n    // perpendicular points that will be used for actual drawing\n    // of selection contour on canvas\n    const startTop = startPoint.rotateAroundOrigin(\n      angle + 90,\n      new Vec2(contourStart.x, contourStart.y),\n    );\n    const startBottom = startPoint.rotateAroundOrigin(\n      angle - 90,\n      new Vec2(contourStart.x, contourStart.y),\n    );\n    const startPadTop = padStartPoint.rotateAroundOrigin(\n      angle + 90,\n      contourPaddedStart,\n    );\n    const startPadBottom = padStartPoint.rotateAroundOrigin(\n      angle - 90,\n      contourPaddedStart,\n    );\n    const endTop = endPoint.rotateAroundOrigin(angle + 90, contourEnd);\n    const endBottom = endPoint.rotateAroundOrigin(angle - 90, contourEnd);\n    const endPadTop = padEndPoint.rotateAroundOrigin(\n      angle + 90,\n      contourPaddedEnd,\n    );\n    const endPadBottom = padEndPoint.rotateAroundOrigin(\n      angle - 90,\n      contourPaddedEnd,\n    );\n\n    return [\n      startPadTop,\n      startTop,\n      endTop,\n      endPadTop,\n      endPadBottom,\n      endBottom,\n      startPadBottom,\n      startBottom,\n    ];\n  }\n\n  getSelectionContour(render: Render, isHighlight: boolean) {\n    const { paper } = render;\n    const [\n      startPadTop,\n      startTop,\n      endTop,\n      endPadTop,\n      endPadBottom,\n      endBottom,\n      startPadBottom,\n      startBottom,\n    ] = this.getSelectionPoints(render, isHighlight);\n\n    // for a visual representation of the points\n    // please refer to: ketcher-core/docs/data/hover_selection_exp.png\n    const pathString = `\n      M ${startTop.x} ${startTop.y}\n      L ${endTop.x} ${endTop.y}\n      C ${endPadTop.x} ${endPadTop.y}, ${endPadBottom.x} ${endPadBottom.y}, ${endBottom.x} ${endBottom.y}\n      L ${startBottom.x} ${startBottom.y}\n      C ${startPadBottom.x} ${startPadBottom.y}, ${startPadTop.x} ${startPadTop.y}, ${startTop.x} ${startTop.y}\n    `;\n\n    return paper.path(pathString);\n  }\n\n  makeHoverPlate(render: Render) {\n    const restruct = render.ctab;\n    const options = render.options;\n    if (this.isPlateShouldBeHidden(restruct, options)) {\n      return null;\n    }\n\n    const rect = this.getSelectionContour(render, false);\n\n    return rect.attr({ ...options.hoverStyle });\n  }\n\n  makeSelectionPlate(restruct: ReStruct, _: any, options: any) {\n    if (this.isPlateShouldBeHidden(restruct, options)) {\n      return null;\n    }\n\n    const rect = this.getSelectionContour(restruct.render, false);\n\n    return rect.attr(options.selectionStyle);\n  }\n\n  private isPlateShouldBeHidden = (\n    restruct: ReStruct,\n    options: RenderOptions,\n  ) => {\n    ReBond.bondRecalc(this, restruct, options);\n    const bond = this.b;\n    const sgroups = restruct.render.ctab.sgroups;\n    const functionalGroups = restruct.render.ctab.molecule.functionalGroups;\n    return (\n      FunctionalGroup.isBondInContractedFunctionalGroup(\n        bond,\n        sgroups,\n        functionalGroups,\n      ) || Bond.isBondToHiddenLeavingGroup(restruct.molecule, bond)\n    );\n  };\n\n  private makeHighlitePlate(\n    restruct: ReStruct,\n    highlightStyle: RenderOptionStyles,\n  ) {\n    const options = restruct.render.options;\n    if (this.isPlateShouldBeHidden(restruct, options)) {\n      return null;\n    }\n\n    const rect = this.getSelectionContour(restruct.render, true);\n    return rect.attr(highlightStyle);\n  }\n\n  show(restruct: ReStruct, bid: number, options: any): void {\n    // eslint-disable-line max-statements\n    const render = restruct.render;\n    const struct = restruct.molecule;\n    const bond = restruct.molecule.bonds.get(bid)!;\n    const sgroups = restruct.molecule.sgroups;\n    const functionalGroups = restruct.molecule.functionalGroups;\n\n    if (Bond.isBondToHiddenLeavingGroup(struct, bond)) {\n      return;\n    }\n\n    if (\n      bond &&\n      FunctionalGroup.isBondInContractedFunctionalGroup(\n        bond,\n        sgroups,\n        functionalGroups,\n      )\n    ) {\n      return;\n    }\n\n    if (\n      bond.type === Bond.PATTERN.TYPE.HYDROGEN &&\n      Bond.isBondToExpandedMonomer(struct, bond)\n    ) {\n      return;\n    }\n\n    const paper = render.paper;\n    const hb1 =\n      this.b.hb1 !== undefined ? struct.halfBonds.get(this.b.hb1) : null;\n    const hb2 =\n      this.b.hb2 !== undefined ? struct.halfBonds.get(this.b.hb2) : null;\n\n    checkStereoBold(bid, this, restruct);\n    ReBond.bondRecalc(this, restruct, options);\n    setDoubleBondShift(this, struct);\n    if (!hb1 || !hb2) return;\n    const isSnapping = restruct.isSnappingBond(bid);\n    this.path = getBondPath(restruct, this, hb1, hb2, isSnapping);\n    this.rbb = util.relBox(this.path.getBBox());\n    // add layer for bond's skeleton:\n    restruct.addReObjectPath(\n      LayerMap.bondSkeleton,\n      this.visel,\n      this.path,\n      null,\n      true,\n    );\n    const reactingCenter: any = {};\n    reactingCenter.path = getReactingCenterPath(render, this, hb1, hb2);\n    if (reactingCenter.path) {\n      reactingCenter.rbb = util.relBox(reactingCenter.path.getBBox());\n      restruct.addReObjectPath(\n        LayerMap.data,\n        this.visel,\n        reactingCenter.path,\n        null,\n        true,\n      );\n    }\n    const topology: any = {};\n    topology.path = getBondMark(render, this, hb1, hb2);\n    if (topology.path) {\n      topology.rbb = util.relBox(topology.path.getBBox());\n      restruct.addReObjectPath(\n        LayerMap.data,\n        this.visel,\n        topology.path,\n        null,\n        true,\n      );\n    }\n    this.setHover(this.hover, render);\n\n    let ipath = null;\n    const bondIdxOff = options.subFontSize * 0.6;\n    if (options.showBondIds) {\n      ipath = getIdsPath(bid, paper, hb1, hb2, bondIdxOff, 0.5, 0.5, hb1.norm);\n      restruct.addReObjectPath(LayerMap.indices, this.visel, ipath);\n    }\n    if (options.showHalfBondIds) {\n      ipath = getIdsPath(\n        this.b.hb1!,\n        paper,\n        hb1,\n        hb2,\n        bondIdxOff,\n        0.8,\n        0.2,\n        hb1.norm,\n      );\n      restruct.addReObjectPath(LayerMap.indices, this.visel, ipath);\n      ipath = getIdsPath(\n        this.b.hb2!,\n        paper,\n        hb1,\n        hb2,\n        bondIdxOff,\n        0.2,\n        0.8,\n        hb2.norm,\n      );\n      restruct.addReObjectPath(LayerMap.indices, this.visel, ipath);\n    }\n    if (options.showLoopIds && !options.showBondIds) {\n      ipath = getIdsPath(\n        hb1.loop,\n        paper,\n        hb1,\n        hb2,\n        bondIdxOff,\n        0.5,\n        0.5,\n        hb2.norm,\n      );\n      restruct.addReObjectPath(LayerMap.indices, this.visel, ipath);\n      ipath = getIdsPath(\n        hb2.loop,\n        paper,\n        hb1,\n        hb2,\n        bondIdxOff,\n        0.5,\n        0.5,\n        hb1.norm,\n      );\n      restruct.addReObjectPath(LayerMap.indices, this.visel, ipath);\n    }\n\n    // Checking whether bond is highlighted and what is the last color\n    const highlights = restruct.molecule.highlights;\n    let isHighlighted = false;\n    let highlightColor = '';\n    highlights.forEach((highlight) => {\n      const hasCurrentHighlight = highlight.bonds?.includes(bid);\n      isHighlighted = isHighlighted || hasCurrentHighlight;\n      if (hasCurrentHighlight) {\n        highlightColor = highlight.color;\n      }\n    });\n\n    // Drawing highlight\n    if (isHighlighted) {\n      const style = {\n        fill: highlightColor,\n        stroke: 'none',\n      };\n\n      const ret = this.makeHighlitePlate(restruct, style);\n      render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n    }\n\n    if (bond.cip) {\n      this.cip = util.drawCIPLabel({\n        atomOrBond: bond,\n        position: bond.center,\n        restruct: render.ctab,\n        visel: this.visel,\n      });\n    }\n  }\n}\n\nfunction findIncomingStereoUpBond(\n  atom: Atom,\n  bid0: number,\n  includeBoldStereoBond: boolean,\n  restruct: ReStruct,\n): number {\n  return atom.neighbors.findIndex((hbid) => {\n    const hb = restruct.molecule.halfBonds.get(hbid);\n\n    if (!hb || hb.bid === bid0) return false;\n\n    const neibond = restruct.bonds.get(hb.bid);\n\n    if (!neibond) return false;\n    const singleUp =\n      neibond.b.type === Bond.PATTERN.TYPE.SINGLE &&\n      neibond.b.stereo === Bond.PATTERN.STEREO.UP;\n\n    if (singleUp) {\n      return (\n        neibond.b.end === hb.begin ||\n        (neibond.boldStereo && includeBoldStereoBond)\n      );\n    }\n\n    return !!(\n      neibond.b.type === Bond.PATTERN.TYPE.DOUBLE &&\n      neibond.b.stereo === Bond.PATTERN.STEREO.NONE &&\n      includeBoldStereoBond &&\n      neibond.boldStereo\n    );\n  });\n}\n\nfunction findIncomingUpBonds(\n  bid0: number,\n  bond: ReBond,\n  restruct: ReStruct,\n): void {\n  const halfbonds = [bond.b.begin, bond.b.end].map((aid) => {\n    const atom = restruct.molecule.atoms.get(aid);\n    if (!atom) return -1;\n    const pos = findIncomingStereoUpBond(atom, bid0, true, restruct);\n    return pos < 0 ? -1 : atom.neighbors[pos];\n  });\n\n  bond.neihbid1 = restruct.atoms.get(bond.b.begin)?.showLabel\n    ? -1\n    : halfbonds[0];\n  bond.neihbid2 = restruct.atoms.get(bond.b.end)?.showLabel ? -1 : halfbonds[1];\n}\n\nfunction checkStereoBold(bid0, bond, restruct) {\n  const halfbonds = [bond.b.begin, bond.b.end].map((aid) => {\n    const atom = restruct.molecule.atoms.get(aid);\n    const pos = findIncomingStereoUpBond(atom, bid0, false, restruct);\n    return pos < 0 ? -1 : atom.neighbors[pos];\n  });\n  bond.boldStereo = halfbonds[0] >= 0 && halfbonds[1] >= 0;\n}\n\nfunction getBondPath(\n  restruct: ReStruct,\n  bond: ReBond,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  isSnapping: boolean,\n) {\n  let path: any = null;\n  const render = restruct.render;\n  const struct = restruct.molecule;\n  const shiftA = !restruct.atoms.get(hb1.begin)?.showLabel;\n  const shiftB = !restruct.atoms.get(hb2.begin)?.showLabel;\n  let newHalfBonds: [HalfBond, HalfBond];\n  const xShiftMinus1 = -1;\n  const xShiftPlus1 = 1;\n  switch (bond.b.type) {\n    case Bond.PATTERN.TYPE.SINGLE:\n      switch (bond.b.stereo) {\n        case Bond.PATTERN.STEREO.UP:\n          findIncomingUpBonds(hb1.bid, bond, restruct);\n          if (bond.boldStereo && bond.neihbid1 >= 0 && bond.neihbid2 >= 0) {\n            path = getBondSingleStereoBoldPath(\n              render,\n              hb1,\n              hb2,\n              bond,\n              struct,\n              isSnapping,\n            );\n          } else\n            path = getBondSingleUpPath(\n              render,\n              hb1,\n              hb2,\n              bond,\n              struct,\n              isSnapping,\n            );\n          break;\n        case Bond.PATTERN.STEREO.DOWN:\n          path = getBondSingleDownPath(\n            render,\n            hb1,\n            hb2,\n            bond,\n            struct,\n            isSnapping,\n          );\n          break;\n        case Bond.PATTERN.STEREO.EITHER:\n          path = getBondSingleEitherPath(\n            render,\n            hb1,\n            hb2,\n            bond,\n            struct,\n            isSnapping,\n          );\n          break;\n        default:\n          path = draw.bondSingle(\n            render.paper,\n            hb1,\n            hb2,\n            render.options,\n            isSnapping,\n            getStereoBondColor(render.options, bond, struct),\n          );\n          break;\n      }\n      break;\n    case Bond.PATTERN.TYPE.DOUBLE:\n      findIncomingUpBonds(hb1.bid, bond, restruct);\n      if (\n        bond.b.stereo === Bond.PATTERN.STEREO.NONE &&\n        bond.boldStereo &&\n        bond.neihbid1 >= 0 &&\n        bond.neihbid2 >= 0\n      ) {\n        path = getBondDoubleStereoBoldPath(\n          render,\n          hb1,\n          hb2,\n          bond,\n          struct,\n          shiftA,\n          shiftB,\n          isSnapping,\n        );\n      } else\n        path = getBondDoublePath(\n          render,\n          hb1,\n          hb2,\n          bond,\n          shiftA,\n          shiftB,\n          isSnapping,\n        );\n      break;\n    case Bond.PATTERN.TYPE.TRIPLE:\n      path = draw.bondTriple(\n        render.paper,\n        hb1,\n        hb2,\n        render.options,\n        isSnapping,\n      );\n      break;\n    case Bond.PATTERN.TYPE.AROMATIC: {\n      const inAromaticLoop =\n        (hb1.loop >= 0 && struct.loops.get(hb1.loop)?.aromatic) ||\n        (hb2.loop >= 0 && struct.loops.get(hb2.loop)?.aromatic);\n      path = inAromaticLoop\n        ? draw.bondSingle(render.paper, hb1, hb2, render.options, isSnapping)\n        : getBondAromaticPath(\n            render,\n            hb1,\n            hb2,\n            bond,\n            shiftA,\n            shiftB,\n            isSnapping,\n          );\n      break;\n    }\n    case Bond.PATTERN.TYPE.SINGLE_OR_DOUBLE:\n      newHalfBonds = util.updateHalfBondCoordinates(hb1, hb2, xShiftPlus1);\n      path = getSingleOrDoublePath(\n        render,\n        newHalfBonds[0],\n        newHalfBonds[1],\n        isSnapping,\n      );\n      break;\n    case Bond.PATTERN.TYPE.SINGLE_OR_AROMATIC:\n      path = getBondAromaticPath(\n        render,\n        hb1,\n        hb2,\n        bond,\n        shiftA,\n        shiftB,\n        isSnapping,\n      );\n      break;\n    case Bond.PATTERN.TYPE.DOUBLE_OR_AROMATIC:\n      newHalfBonds = util.updateHalfBondCoordinates(hb1, hb2, xShiftMinus1);\n      path = getBondAromaticPath(\n        render,\n        newHalfBonds[0],\n        newHalfBonds[1],\n        bond,\n        shiftA,\n        shiftB,\n        isSnapping,\n      );\n      break;\n    case Bond.PATTERN.TYPE.ANY:\n      newHalfBonds = util.updateHalfBondCoordinates(hb1, hb2, xShiftMinus1);\n      path = draw.bondAny(\n        render.paper,\n        newHalfBonds[0],\n        newHalfBonds[1],\n        render.options,\n        isSnapping,\n      );\n      break;\n    case Bond.PATTERN.TYPE.HYDROGEN:\n      newHalfBonds = util.updateHalfBondCoordinates(hb1, hb2, xShiftPlus1);\n      path = draw.bondHydrogen(\n        render.paper,\n        newHalfBonds[0],\n        newHalfBonds[1],\n        render.options,\n        isSnapping,\n      );\n      break;\n    case Bond.PATTERN.TYPE.DATIVE:\n      path = draw.bondDative(\n        render.paper,\n        hb1,\n        hb2,\n        render.options,\n        isSnapping,\n      );\n      break;\n    default:\n      throw new Error('Bond type ' + bond.b.type + ' not supported');\n  }\n  if (path) {\n    const { previewOpacity } = render.options;\n    path.attr({ opacity: bond.b.isPreview ? previewOpacity : 1 });\n  }\n  return path;\n}\n\n/* Get Path */\nfunction getBondSingleUpPath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bond: ReBond,\n  struct: Struct,\n  isSnapping: boolean,\n) {\n  // eslint-disable-line max-params\n  const a = hb1.p;\n  const b = hb2.p;\n  const n = hb1.norm;\n  const options = render.options;\n  const bsp = 0.7 * options.stereoBond;\n  let b2 = b.addScaled(n, bsp);\n  let b3 = b.addScaled(n, -bsp);\n  if (bond.neihbid2 >= 0) {\n    // if the end is shared with another up-bond heading this way\n    const coords = stereoUpBondGetCoordinates(\n      hb2,\n      bond.neihbid2,\n      options.stereoBond,\n      struct,\n    );\n    b2 = coords[0];\n    b3 = coords[1];\n  }\n  return draw.bondSingleUp(\n    render.paper,\n    a,\n    b2,\n    b3,\n    options,\n    isSnapping,\n    getStereoBondColor(options, bond, struct),\n  );\n}\n\nfunction getStereoBondColor(\n  options: any,\n  bond: ReBond,\n  struct: Struct,\n): string {\n  const defaultColor = '#000';\n\n  if (bond.b.stereo === 0) return defaultColor;\n\n  const beginAtomStereoLabel = struct.atoms.get(bond.b.begin)?.stereoLabel;\n  const endAtomStereoLabel = struct.atoms.get(bond.b.end)?.stereoLabel;\n\n  let stereoLabel = '';\n  if (beginAtomStereoLabel && !endAtomStereoLabel) {\n    stereoLabel = beginAtomStereoLabel;\n  } else if (!beginAtomStereoLabel && endAtomStereoLabel) {\n    stereoLabel = endAtomStereoLabel;\n  }\n\n  if (\n    // if no stereolabel presents or presents in both then use default color\n    !stereoLabel ||\n    options.colorStereogenicCenters === StereoColoringType.Off ||\n    options.colorStereogenicCenters === StereoColoringType.LabelsOnly\n  ) {\n    return defaultColor;\n  }\n\n  return getColorFromStereoLabel(options, stereoLabel);\n}\n\nfunction getBondSingleStereoBoldPath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bond: ReBond,\n  struct: Struct,\n  isSnapping: boolean,\n) {\n  // eslint-disable-line max-params\n  const options = render.options;\n  const coords1 = stereoUpBondGetCoordinates(\n    hb1,\n    bond.neihbid1,\n    options.stereoBond,\n    struct,\n  );\n  const coords2 = stereoUpBondGetCoordinates(\n    hb2,\n    bond.neihbid2,\n    options.stereoBond,\n    struct,\n  );\n  const a1 = coords1[0];\n  const a2 = coords1[1];\n  const a3 = coords2[0];\n  const a4 = coords2[1];\n  return draw.bondSingleStereoBold(\n    render.paper,\n    a1,\n    a2,\n    a3,\n    a4,\n    options,\n    isSnapping,\n    getStereoBondColor(options, bond, struct),\n  );\n}\n\nfunction getBondDoubleStereoBoldPath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bond: ReBond,\n  struct: Struct,\n  shiftA: boolean,\n  shiftB: boolean,\n  isSnapping: boolean,\n) {\n  // eslint-disable-line max-params\n  const a = hb1.p;\n  const b = hb2.p;\n  const n = hb1.norm;\n  const shift = bond.doubleBondShift;\n  const bsp = 1.5 * render.options.stereoBond;\n  let b1 = a.addScaled(n, bsp * shift);\n  let b2 = b.addScaled(n, bsp * shift);\n  if (shift > 0) {\n    if (shiftA) {\n      b1 = b1.addScaled(\n        hb1.dir,\n        bsp * getBondLineShift(hb1.rightCos, hb1.rightSin),\n      );\n    }\n    if (shiftB) {\n      b2 = b2.addScaled(\n        hb1.dir,\n        -bsp * getBondLineShift(hb2.leftCos, hb2.leftSin),\n      );\n    }\n  } else if (shift < 0) {\n    if (shiftA) {\n      b1 = b1.addScaled(\n        hb1.dir,\n        bsp * getBondLineShift(hb1.leftCos, hb1.leftSin),\n      );\n    }\n    if (shiftB) {\n      b2 = b2.addScaled(\n        hb1.dir,\n        -bsp * getBondLineShift(hb2.rightCos, hb2.rightSin),\n      );\n    }\n  }\n  const sgBondPath = getBondSingleStereoBoldPath(\n    render,\n    hb1,\n    hb2,\n    bond,\n    struct,\n    isSnapping,\n  );\n  return draw.bondDoubleStereoBold(\n    render.paper,\n    sgBondPath,\n    b1,\n    b2,\n    render.options,\n    isSnapping,\n    getStereoBondColor(render.options, bond, struct),\n  );\n}\n\nexport function getBondLineShift(cos: number, sin: number): number {\n  if (sin < 0 || Math.abs(cos) > 0.9) return 0;\n  return sin / (1 - cos);\n}\n\nfunction stereoUpBondGetCoordinates(\n  hb: HalfBond,\n  neihbid: number,\n  bondSpace: any,\n  struct: Struct,\n): [Vec2, Vec2] {\n  const neihb = struct.halfBonds.get(neihbid);\n  const cos = Vec2.dot(hb.dir, neihb!.dir);\n  const sin = Vec2.cross(hb.dir, neihb!.dir);\n  const cosHalf = Math.sqrt(0.5 * (1 - cos));\n  const biss = neihb!.dir.rotateSC(\n    (sin >= 0 ? -1 : 1) * cosHalf,\n    Math.sqrt(0.5 * (1 + cos)),\n  );\n\n  const denomAdd = 0.3;\n  const scale = 0.7;\n  const a1 = hb.p.addScaled(biss, (scale * bondSpace) / (cosHalf + denomAdd));\n  const a2 = hb.p.addScaled(\n    biss.negated(),\n    (scale * bondSpace) / (cosHalf + denomAdd),\n  );\n  return sin > 0 ? [a1, a2] : [a2, a1];\n}\n\nfunction calculateLines(length: number, lineWidth: number, interval: number) {\n  const usableLength = length - lineWidth;\n  const linesCount = Math.max(\n    Math.floor(usableLength / (lineWidth + interval)),\n    0,\n  );\n  return linesCount + 2;\n}\n\nfunction getBondSingleDownPath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bond: ReBond,\n  struct: Struct,\n  isSnapping: boolean,\n) {\n  const MIN_LINES = 4;\n  const DEFAULT_HASH_SPACING_IN_PX = 1.2;\n  const a = hb1.p;\n  const b = hb2.p;\n  const options = render.options;\n  let d = b.sub(a);\n  const len = d.length() + 0.2;\n  d = d.normalized();\n  let hashSpacingInPx = options.hashSpacingInPx ?? DEFAULT_HASH_SPACING_IN_PX;\n  const interval = hashSpacingInPx * options.lineWidth;\n  const gaps = MIN_LINES - 1;\n  const isHashSpacingTooLarge = interval >= len / gaps;\n\n  const nlines = calculateLines(len, options.lineWidth, interval);\n\n  if (isHashSpacingTooLarge && nlines < MIN_LINES) {\n    const averageSpacing = (len - options.lineWidth) / gaps;\n    hashSpacingInPx = averageSpacing / options.lineWidth;\n  }\n\n  const intervalAdjusted = hashSpacingInPx * options.lineWidth;\n\n  const finalLines = calculateLines(len, options.lineWidth, intervalAdjusted);\n\n  const step = len / (finalLines - 1);\n  return draw.bondSingleDown(\n    render.paper,\n    hb1,\n    d,\n    finalLines,\n    step,\n    options,\n    isSnapping,\n    getStereoBondColor(options, bond, struct),\n  );\n}\n\nfunction getBondSingleEitherPath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bond: ReBond,\n  struct: Struct,\n  isSnapping: boolean,\n) {\n  const a = hb1.p;\n  const b = hb2.p;\n  const options = render.options;\n  let d = b.sub(a);\n  const len = d.length();\n  d = d.normalized();\n  const interval = 0.6 * options.lineWidth;\n  const nlines =\n    Math.max(\n      Math.floor((len - options.lineWidth) / (options.lineWidth + interval)),\n      0,\n    ) + 2;\n  const step = len / (nlines - 0.5);\n  return draw.bondSingleEither(\n    render.paper,\n    hb1,\n    d,\n    nlines,\n    step,\n    options,\n    isSnapping,\n    getStereoBondColor(options, bond, struct),\n  );\n}\n\nfunction getBondDoublePath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bond: ReBond,\n  shiftA: boolean,\n  shiftB: boolean,\n  isSnapping: boolean,\n) {\n  // eslint-disable-line max-params, max-statements\n  const cisTrans = bond.b.stereo === Bond.PATTERN.STEREO.CIS_TRANS;\n\n  const a = hb1.p;\n  const b = hb2.p;\n  const n = hb1.norm;\n  const shift = cisTrans ? 0 : bond.doubleBondShift;\n\n  const options = render.options;\n  const bsp = options.bondSpace / 2;\n  const s1 = bsp + shift * bsp;\n  const s2 = -bsp + shift * bsp;\n\n  let a1 = a.addScaled(n, s1);\n  let b1 = b.addScaled(n, s1);\n  let a2 = a.addScaled(n, s2);\n  let b2 = b.addScaled(n, s2);\n\n  if (shift > 0) {\n    if (shiftA) {\n      a1 = a1.addScaled(\n        hb1.dir,\n        options.bondSpace * getBondLineShift(hb1.rightCos, hb1.rightSin),\n      );\n    }\n    if (shiftB) {\n      b1 = b1.addScaled(\n        hb1.dir,\n        -options.bondSpace * getBondLineShift(hb2.leftCos, hb2.leftSin),\n      );\n    }\n  } else if (shift < 0) {\n    if (shiftA) {\n      a2 = a2.addScaled(\n        hb1.dir,\n        options.bondSpace * getBondLineShift(hb1.leftCos, hb1.leftSin),\n      );\n    }\n    if (shiftB) {\n      b2 = b2.addScaled(\n        hb1.dir,\n        -options.bondSpace * getBondLineShift(hb2.rightCos, hb2.rightSin),\n      );\n    }\n  }\n\n  return draw.bondDouble(\n    render.paper,\n    a1,\n    a2,\n    b1,\n    b2,\n    cisTrans,\n    options,\n    isSnapping,\n  );\n}\n\nfunction getSingleOrDoublePath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  isSnapping: boolean,\n) {\n  const a = hb1.p;\n  const b = hb2.p;\n  const options = render.options;\n\n  let nSect =\n    Vec2.dist(a, b) / Number((options.bondSpace + options.lineWidth).toFixed());\n  if (!(nSect & 1)) nSect += 1;\n  return draw.bondSingleOrDouble(\n    render.paper,\n    hb1,\n    hb2,\n    nSect,\n    options,\n    isSnapping,\n  );\n}\n\nfunction getBondAromaticPath(\n  render: Render,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bond: ReBond,\n  shiftA: boolean,\n  shiftB: boolean,\n  isSnapping: boolean,\n) {\n  // eslint-disable-line max-params\n  const dashdotPattern = [0.125, 0.125, 0.005, 0.125];\n  let mask = 0;\n  let dash: number[] | null = null;\n  const options = render.options;\n  const bondShift = bond.doubleBondShift;\n\n  if (bond.b.type === Bond.PATTERN.TYPE.SINGLE_OR_AROMATIC) {\n    mask = bondShift > 0 ? 1 : 2;\n    dash = dashdotPattern.map((v) => v * options.microModeScale);\n  }\n  if (bond.b.type === Bond.PATTERN.TYPE.DOUBLE_OR_AROMATIC) {\n    mask = 3;\n    dash = dashdotPattern.map((v) => v * options.microModeScale);\n  }\n  const paths = getAromaticBondPaths(\n    hb1,\n    hb2,\n    bondShift,\n    shiftA,\n    shiftB,\n    options.bondSpace,\n    mask,\n    dash,\n  );\n  return draw.bondAromatic(render.paper, paths, bondShift, options, isSnapping);\n}\n\nfunction getAromaticBondPaths(\n  hb1: HalfBond,\n  hb2: HalfBond,\n  shift: number,\n  shiftA: boolean,\n  shiftB: boolean,\n  bondSpace: number,\n  mask: number,\n  dash: number[] | null,\n) {\n  // eslint-disable-line max-params, max-statements\n  const a = hb1.p;\n  const b = hb2.p;\n  const n = hb1.norm;\n  const bsp = bondSpace / 2;\n  const s1 = bsp + shift * bsp;\n  const s2 = -bsp + shift * bsp;\n  let a2 = a.addScaled(n, s1);\n  let b2 = b.addScaled(n, s1);\n  let a3 = a.addScaled(n, s2);\n  let b3 = b.addScaled(n, s2);\n  if (shift > 0) {\n    if (shiftA) {\n      a2 = a2.addScaled(\n        hb1.dir,\n        bondSpace * getBondLineShift(hb1.rightCos, hb1.rightSin),\n      );\n    }\n    if (shiftB) {\n      b2 = b2.addScaled(\n        hb1.dir,\n        -bondSpace * getBondLineShift(hb2.leftCos, hb2.leftSin),\n      );\n    }\n  } else if (shift < 0) {\n    if (shiftA) {\n      a3 = a3.addScaled(\n        hb1.dir,\n        bondSpace * getBondLineShift(hb1.leftCos, hb1.leftSin),\n      );\n    }\n    if (shiftB) {\n      b3 = b3.addScaled(\n        hb1.dir,\n        -bondSpace * getBondLineShift(hb2.rightCos, hb2.rightSin),\n      );\n    }\n  }\n  return draw.aromaticBondPaths(a2, a3, b2, b3, mask, dash);\n}\n\nfunction getReactingCenterPath(\n  render: Render,\n  bond: ReBond,\n  hb1: HalfBond,\n  hb2: HalfBond,\n) {\n  // eslint-disable-line max-statements\n  const a = hb1.p;\n  const b = hb2.p;\n  const c = b.add(a).scaled(0.5);\n  const d = b.sub(a).normalized();\n  const n = d.rotateSC(1, 0);\n\n  const p: Array<Vec2> = [];\n\n  const lw = render.options.lineWidth;\n  const bs = render.options.bondSpace / 2;\n  const alongIntRc = lw; // half interval along for CENTER\n  const alongIntMadeBroken = 2 * lw; // half interval between along for MADE_OR_BROKEN\n  const alongSz = 1.5 * bs; // half size along for CENTER\n  const acrossInt = 1.5 * bs; // half interval across for CENTER\n  const acrossSz = 3.0 * bs; // half size across for all\n  const tiltTan = 0.2; // tangent of the tilt angle\n\n  switch (bond.b.reactingCenterStatus) {\n    case Bond.PATTERN.REACTING_CENTER.NOT_CENTER: // X\n      p.push(c.addScaled(n, acrossSz).addScaled(d, tiltTan * acrossSz));\n      p.push(c.addScaled(n, -acrossSz).addScaled(d, -tiltTan * acrossSz));\n      p.push(c.addScaled(n, acrossSz).addScaled(d, -tiltTan * acrossSz));\n      p.push(c.addScaled(n, -acrossSz).addScaled(d, tiltTan * acrossSz));\n      break;\n    case Bond.PATTERN.REACTING_CENTER.CENTER: // #\n      p.push(\n        c\n          .addScaled(n, acrossSz)\n          .addScaled(d, tiltTan * acrossSz)\n          .addScaled(d, alongIntRc),\n      );\n      p.push(\n        c\n          .addScaled(n, -acrossSz)\n          .addScaled(d, -tiltTan * acrossSz)\n          .addScaled(d, alongIntRc),\n      );\n      p.push(\n        c\n          .addScaled(n, acrossSz)\n          .addScaled(d, tiltTan * acrossSz)\n          .addScaled(d, -alongIntRc),\n      );\n      p.push(\n        c\n          .addScaled(n, -acrossSz)\n          .addScaled(d, -tiltTan * acrossSz)\n          .addScaled(d, -alongIntRc),\n      );\n      p.push(c.addScaled(d, alongSz).addScaled(n, acrossInt));\n      p.push(c.addScaled(d, -alongSz).addScaled(n, acrossInt));\n      p.push(c.addScaled(d, alongSz).addScaled(n, -acrossInt));\n      p.push(c.addScaled(d, -alongSz).addScaled(n, -acrossInt));\n      break;\n    // case Bond.PATTERN.REACTING_CENTER.UNCHANGED: draw a circle\n    case Bond.PATTERN.REACTING_CENTER.MADE_OR_BROKEN:\n      p.push(c.addScaled(n, acrossSz).addScaled(d, alongIntMadeBroken));\n      p.push(c.addScaled(n, -acrossSz).addScaled(d, alongIntMadeBroken));\n      p.push(c.addScaled(n, acrossSz).addScaled(d, -alongIntMadeBroken));\n      p.push(c.addScaled(n, -acrossSz).addScaled(d, -alongIntMadeBroken));\n      break;\n    case Bond.PATTERN.REACTING_CENTER.ORDER_CHANGED:\n      p.push(c.addScaled(n, acrossSz));\n      p.push(c.addScaled(n, -acrossSz));\n      break;\n    case Bond.PATTERN.REACTING_CENTER.MADE_OR_BROKEN_AND_CHANGED:\n      p.push(c.addScaled(n, acrossSz).addScaled(d, alongIntMadeBroken));\n      p.push(c.addScaled(n, -acrossSz).addScaled(d, alongIntMadeBroken));\n      p.push(c.addScaled(n, acrossSz).addScaled(d, -alongIntMadeBroken));\n      p.push(c.addScaled(n, -acrossSz).addScaled(d, -alongIntMadeBroken));\n      p.push(c.addScaled(n, acrossSz));\n      p.push(c.addScaled(n, -acrossSz));\n      break;\n    default:\n      return null;\n  }\n  return draw.reactingCenter(render.paper, p, render.options);\n}\n\nfunction getBondMark(\n  render: Render,\n  bond: ReBond,\n  hb1: HalfBond,\n  hb2: HalfBond,\n) {\n  // eslint-disable-line max-statements\n  const options = render.options;\n  let mark: string | null = null;\n  let tooltip: string | null = null;\n  if (bond.b.customQuery) {\n    mark = bond.b.customQuery;\n    if (bond.b.customQuery.length > 8) {\n      tooltip = bond.b.customQuery;\n      mark = `${bond.b.customQuery.substring(0, 8)}...`;\n    }\n  } else if (bond.b.topology === Bond.PATTERN.TOPOLOGY.RING) {\n    mark = 'rng';\n  } else if (bond.b.topology === Bond.PATTERN.TOPOLOGY.CHAIN) {\n    mark = 'chn';\n  } else {\n    return null;\n  }\n\n  const a = hb1.p;\n  const b = hb2.p;\n  const c = b.add(a).scaled(0.5);\n  const d = b.sub(a).normalized();\n  let n = d.rotateSC(1, 0);\n  let fixed = options.lineWidth;\n  if (bond.doubleBondShift > 0) n = n.scaled(-bond.doubleBondShift);\n  else if (bond.doubleBondShift === 0) fixed += options.bondSpace / 2;\n\n  const s = new Vec2(2, 1).scaled(options.bondSpace);\n  if (bond.b.type === Bond.PATTERN.TYPE.TRIPLE) fixed += options.bondSpace;\n  const p = c.add(new Vec2(n.x * (s.x + fixed), n.y * (s.y + fixed)));\n  const path = draw.bondMark(render.paper, p, mark, options);\n  tooltip &&\n    path.node.childNodes[0].setAttribute(\n      'data-tooltip',\n      util.escapeHtml(tooltip),\n    );\n\n  return path;\n}\n\nfunction getIdsPath(\n  bid: number,\n  paper: any,\n  hb1: HalfBond,\n  hb2: HalfBond,\n  bondIdxOff: number,\n  param1: number,\n  param2: number,\n  norm: Vec2,\n) {\n  // eslint-disable-line max-params\n  const pb = Vec2.lc(hb1.p, param1, hb2.p, param2, norm, bondIdxOff);\n  const ipath = paper.text(pb.x, pb.y, bid.toString());\n  const irbb = util.relBox(ipath.getBBox());\n  draw.recenterText(ipath, irbb);\n  return ipath;\n}\n/* ----- */\n\nfunction setDoubleBondShift(bond: ReBond, struct: Struct): void {\n  const hb1 = bond.b.hb1;\n  const hb2 = bond.b.hb2;\n\n  if ((!hb1 && hb1 !== 0) || (!hb2 && hb2 !== 0)) {\n    bond.doubleBondShift = selectDoubleBondShiftChain(struct, bond);\n    return;\n  }\n\n  const loop1 = struct.halfBonds.get(hb1)!.loop;\n  const loop2 = struct.halfBonds.get(hb2)!.loop;\n  if (loop1 >= 0 && loop2 >= 0) {\n    const d1 = struct.loops.get(loop1)!.dblBonds;\n    const d2 = struct.loops.get(loop2)!.dblBonds;\n    const n1 = struct.loops.get(loop1)!.hbs.length;\n    const n2 = struct.loops.get(loop2)!.hbs.length;\n    bond.doubleBondShift = selectDoubleBondShift(n1, n2, d1, d2);\n  } else if (loop1 >= 0) {\n    bond.doubleBondShift = -1;\n  } else if (loop2 >= 0) {\n    bond.doubleBondShift = 1;\n  } else {\n    bond.doubleBondShift = selectDoubleBondShiftChain(struct, bond);\n  }\n}\n\nfunction selectDoubleBondShift(\n  n1: number,\n  n2: number,\n  d1: number,\n  d2: number,\n): number {\n  if (n1 === 6 && n2 !== 6 && (d1 > 1 || d2 === 1)) return -1;\n  if (n2 === 6 && n1 !== 6 && (d2 > 1 || d1 === 1)) return 1;\n  if (n2 * d1 > n1 * d2) return -1;\n  if (n2 * d1 < n1 * d2) return 1;\n  if (n2 > n1) return -1;\n  return 1;\n}\n\nfunction selectDoubleBondShiftChain(struct: Struct, bond: ReBond): number {\n  if ((!bond.b.hb1 && bond.b.hb1 !== 0) || (!bond.b.hb2 && bond.b.hb2 !== 0)) {\n    return 0;\n  }\n\n  const hb1 = struct.halfBonds.get(bond.b.hb1);\n  const hb2 = struct.halfBonds.get(bond.b.hb2);\n  if (!hb1 || !hb2) return 0;\n  const nLeft = (hb1.leftSin > 0.3 ? 1 : 0) + (hb2.rightSin > 0.3 ? 1 : 0);\n  const nRight = (hb2.leftSin > 0.3 ? 1 : 0) + (hb1.rightSin > 0.3 ? 1 : 0);\n  if (nLeft > nRight) return -1;\n  if (nLeft < nRight) return 1;\n  if ((hb1.leftSin > 0.3 ? 1 : 0) + (hb1.rightSin > 0.3 ? 1 : 0) === 1)\n    return 1;\n  return 0;\n}\n\nexport default ReBond;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs, Fragment, StereoFlag } from 'domain/entities';\n\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport ReStruct from './restruct';\nimport { Render } from '../raphaelRender';\nimport { Scale } from 'domain/helpers';\n\nclass ReEnhancedFlag extends ReObject {\n  #path: any;\n\n  constructor() {\n    super('enhancedFlag');\n  }\n\n  static isSelectable() {\n    return true;\n  }\n\n  hoverPath(render: Render): any {\n    const box = Box2Abs.fromRelBox(this.#path.getBBox());\n    const sz = box.p1.sub(box.p0);\n    const p0 = box.p0.sub(render.options.offset);\n    return render.paper.rect(p0.x, p0.y, sz.x, sz.y);\n  }\n\n  drawHover(render: Render): any {\n    // TODO: after the enhanced flag stops being displayed, need to remove the reEnhancedflag object from ctab\n    if (!this.#path?.attrs) return null;\n    const ret = this.hoverPath(render).attr(render.options.hoverStyle);\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n    return ret;\n  }\n\n  makeSelectionPlate(restruct: ReStruct, _paper: any, options: any): any {\n    // TODO: after the enhanced flag stops being displayed, need to remove the reEnhancedflag object from ctab\n    if (!this.#path?.attrs) return null;\n    return this.hoverPath(restruct.render).attr(options.selectionStyle);\n  }\n\n  show(restruct: ReStruct, fragmentId: number, options: any): void {\n    const render = restruct.render;\n    const fragment = restruct.molecule.frags.get(fragmentId);\n\n    if (!fragment?.enhancedStereoFlag) {\n      return;\n    }\n\n    const position = fragment.stereoFlagPosition\n      ? fragment.stereoFlagPosition\n      : Fragment.getDefaultStereoFlagPosition(restruct.molecule, fragmentId)!;\n\n    const paper = render.paper;\n    const ps = Scale.modelToCanvas(position, options);\n\n    const stereoFlagMap = {\n      [StereoFlag.Abs]: options.absFlagLabel,\n      [StereoFlag.And]: options.andFlagLabel,\n      [StereoFlag.Mixed]: options.mixedFlagLabel,\n      [StereoFlag.Or]: options.orFlagLabel,\n    };\n\n    if (options.showStereoFlags && !options.ignoreChiralFlag) {\n      this.#path = paper\n        .text(\n          ps.x,\n          ps.y,\n          fragment.enhancedStereoFlag\n            ? stereoFlagMap[fragment.enhancedStereoFlag]\n            : '',\n        )\n        .attr({\n          font: options.font,\n          'font-size': options.fontszInPx,\n          fill: '#000',\n        });\n    }\n    render.ctab.addReObjectPath(\n      LayerMap.data,\n      this.visel,\n      this.#path,\n      null,\n      true,\n    );\n  }\n}\n\nexport default ReEnhancedFlag;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs, Vec2 } from 'domain/entities';\n\nimport ReObject from './reobject';\nimport { Scale } from 'domain/helpers';\n\nclass ReFrag extends ReObject {\n  constructor(/* Struct.Fragment */ frag) {\n    super('frag');\n    this.item = frag;\n  }\n\n  static isSelectable() {\n    return false;\n  }\n\n  fragGetAtoms(restruct, fid) {\n    return Array.from(restruct.atoms.keys()).filter(\n      (aid) => restruct.atoms.get(aid).a.fragment === fid,\n    );\n  }\n\n  fragGetBonds(restruct, fid) {\n    return Array.from(restruct.bonds.keys()).filter((bid) => {\n      const bond = restruct.bonds.get(bid).b;\n\n      const firstFrag = restruct.atoms.get(bond.begin).a.fragment;\n      const secondFrag = restruct.atoms.get(bond.end).a.fragment;\n\n      return firstFrag === fid && secondFrag === fid;\n    });\n  }\n\n  calcBBox(restruct, fid, render) {\n    // TODO need to review parameter list\n    let ret;\n    restruct.atoms.forEach((atom) => {\n      if (atom.a.fragment !== fid) return;\n\n      // TODO ReObject.calcBBox to be used instead\n      let bba = atom.visel.boundingBox;\n      if (!bba) {\n        bba = new Box2Abs(atom.a.pp, atom.a.pp);\n        const ext = new Vec2(0.05 * 3, 0.05 * 3);\n        bba = bba.extend(ext, ext);\n      } else {\n        if (!render) render = global._ui_editor.render; // eslint-disable-line\n        bba = bba\n          .translate((render.options.offset || new Vec2()).negated())\n          .transform(Scale.canvasToModel, render.options);\n      }\n      ret = ret ? Box2Abs.union(ret, bba) : bba;\n    });\n\n    return ret;\n  }\n\n  // TODO need to review parameter list\n  _draw(render, fid, attrs) {\n    // eslint-disable-line no-underscore-dangle\n    const bb = this.calcBBox(render.ctab, fid, render);\n\n    if (bb) {\n      const p0 = Scale.modelToCanvas(\n        new Vec2(bb.p0.x, bb.p0.y),\n        render.options,\n      );\n      const p1 = Scale.modelToCanvas(\n        new Vec2(bb.p1.x, bb.p1.y),\n        render.options,\n      );\n      return render.paper\n        .rect(p0.x, p0.y, p1.x - p0.x, p1.y - p0.y, 0)\n        .attr(attrs);\n    }\n\n    // TODO abnormal situation, empty fragments must be destroyed by tools\n  }\n\n  draw(_render) {\n    // eslint-disable-line no-unused-vars\n    return null; // this._draw(render, fid, { 'stroke' : 'lightgray' }); // [RB] for debugging only\n  }\n\n  drawHover(_render) {\n    // eslint-disable-line no-unused-vars\n    // Do nothing. This method shouldn't actually be called.\n  }\n\n  setHover(hover, render) {\n    let fid = render.ctab.frags.keyOf(this);\n\n    if (!fid && fid !== 0) {\n      console.warn('Fragment does not belong to the render');\n      return;\n    }\n\n    fid = parseInt(fid, 10);\n\n    render.ctab.atoms.forEach((atom) => {\n      if (atom.a.fragment === fid) atom.setHover(hover, render);\n    });\n\n    render.ctab.bonds.forEach((bond) => {\n      if (render.ctab.atoms.get(bond.b.begin).a.fragment === fid) {\n        bond.setHover(hover, render);\n      }\n    });\n  }\n}\nexport default ReFrag;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs } from 'domain/entities/box2Abs';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport { Scale } from 'domain/helpers';\nimport draw from '../draw';\nimport util from '../util';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { Render } from '../raphaelRender';\n\nconst BORDER_EXT = new Vec2(0.05 * 3, 0.05 * 3);\nconst PADDING_VECTOR = new Vec2(0.2, 0.4);\nclass ReRGroup extends ReObject {\n  constructor(/* RGroup */ rgroup) {\n    super('rgroup');\n    this.labelBox = null;\n    this.item = rgroup;\n  }\n\n  static isSelectable() {\n    return false;\n  }\n\n  getAtoms(render) {\n    let ret = [];\n    this.item.frags.forEach((fid) => {\n      ret = ret.concat(\n        render.ctab.frags.get(fid).fragGetAtoms(render.ctab, fid),\n      );\n    });\n    return ret;\n  }\n\n  getBonds(render) {\n    let ret = [];\n    this.item.frags.forEach((fid) => {\n      ret = ret.concat(\n        render.ctab.frags.get(fid).fragGetBonds(render.ctab, fid),\n      );\n    });\n    return ret;\n  }\n\n  /**\n   * @param {Render} render\n   */\n  calcBBox(render) {\n    /** @type {Box2Abs | null} */\n    let rGroupBoundingBox = null;\n    this.item.frags.forEach((fid) => {\n      const fragBox = render.ctab.frags\n        .get(fid)\n        .calcBBox(render.ctab, fid, render);\n      if (fragBox) {\n        rGroupBoundingBox = rGroupBoundingBox\n          ? Box2Abs.union(rGroupBoundingBox, fragBox)\n          : fragBox;\n      }\n    });\n\n    const rGroupAttachmentPointsVBox =\n      render.ctab.getRGroupAttachmentPointsVBoxByAtomIds(this.getAtoms(render));\n    if (rGroupBoundingBox && rGroupAttachmentPointsVBox) {\n      rGroupBoundingBox = Box2Abs.union(\n        rGroupBoundingBox,\n        rGroupAttachmentPointsVBox,\n      );\n    }\n\n    rGroupBoundingBox = rGroupBoundingBox\n      ? rGroupBoundingBox.extend(BORDER_EXT, BORDER_EXT)\n      : rGroupBoundingBox;\n\n    return rGroupBoundingBox;\n  }\n\n  // TODO need to review parameter list\n  draw(render, options) {\n    // eslint-disable-line max-statements\n    let bb = this.calcBBox(render);\n\n    if (!bb) {\n      console.error(\n        'Abnormal situation, empty fragments must be destroyed by tools',\n      );\n      return {};\n    } else {\n      // add a little space between the attachment points and brackets\n      bb = bb.extend(PADDING_VECTOR, PADDING_VECTOR);\n    }\n\n    const ret = { data: [] };\n    const p0 = Scale.modelToCanvas(bb.p0, options);\n    const p1 = Scale.modelToCanvas(bb.p1, options);\n    const brackets = render.paper.set();\n\n    rGroupdrawBrackets(brackets, render, bb); // eslint-disable-line new-cap\n\n    ret.data.push(brackets);\n    const key = render.ctab.rgroups.keyOf(this);\n    const labelSet = render.paper.set();\n    const label = render.paper\n      .text(p0.x, (p0.y + p1.y) / 2, 'R' + key + '=')\n      .attr({\n        font: options.font,\n        'font-size': options.fontRLabel,\n        fill: 'black',\n      });\n\n    const labelBox = util.relBox(label.getBBox());\n    label.translateAbs(-labelBox.width / 2 - options.lineWidth, 0);\n\n    labelSet.push(label);\n    const logicStyle = {\n      font: options.font,\n      'font-size': options.fontRLogic,\n      fill: 'black',\n    };\n\n    const logic = [rLogicToString(key, this.item)];\n\n    let shift = labelBox.height / 2 + options.lineWidth / 2;\n    for (let i = 0; i < logic.length; ++i) {\n      const logicPath = render.paper\n        .text(p0.x, (p0.y + p1.y) / 2, logic[i])\n        .attr(logicStyle);\n      const logicBox = util.relBox(logicPath.getBBox());\n      shift += logicBox.height / 2;\n      logicPath.translateAbs(\n        -logicBox.width / 2 - 6 * options.lineWidth,\n        shift,\n      );\n      shift += logicBox.height / 2 + options.lineWidth / 2;\n      ret.data.push(logicPath);\n      labelSet.push(logicPath);\n    }\n\n    ret.data.push(label);\n    this.labelBox = Box2Abs.fromRelBox(labelSet.getBBox()).transform(\n      Scale.canvasToModel,\n      render.options,\n    );\n    return ret;\n  }\n\n  // TODO need to review parameter list\n  _draw(render, rgid, attrs) {\n    // eslint-disable-line no-underscore-dangle\n    if (!this.getVBoxObj(render)) return null;\n    const bb = this.getVBoxObj(render).extend(BORDER_EXT, BORDER_EXT); // eslint-disable-line no-underscore-dangle\n\n    if (!bb) return null;\n\n    const p0 = Scale.modelToCanvas(bb.p0, render.options);\n    const p1 = Scale.modelToCanvas(bb.p1, render.options);\n    return render.paper\n      .rect(p0.x, p0.y, p1.x - p0.x, p1.y - p0.y, 0)\n      .attr(attrs);\n  }\n\n  drawHover(render) {\n    const rgid = render.ctab.rgroups.keyOf(this);\n\n    if (!rgid) {\n      console.error(\n        'Abnormal situation, fragment does not belong to the render',\n      );\n      return null;\n    }\n\n    const ret = this._draw(\n      render,\n      rgid,\n      render.options.hoverStyle /* { 'fill' : 'red' } */,\n    ); // eslint-disable-line no-underscore-dangle\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n\n    this.item.frags.forEach((fnum, fid) => {\n      render.ctab.frags.get(fid).drawHover(render);\n    });\n\n    return ret;\n  }\n\n  show(restruct, id, options) {\n    const drawing = this.draw(restruct.render, options);\n\n    Object.keys(drawing).forEach((group) => {\n      while (drawing[group].length > 0) {\n        restruct.addReObjectPath(\n          LayerMap.data,\n          this.visel,\n          drawing[group].shift(),\n          null,\n          true,\n        );\n      }\n    });\n    // TODO rgroup selection & highlighting\n  }\n}\n\nfunction rGroupdrawBrackets(set, render, bb, d) {\n  d = Scale.modelToCanvas(d || new Vec2(1, 0), render.options);\n  const bracketWidth = Math.min(0.25, bb.sz().x * 0.3);\n  const bracketHeight = bb.p1.y - bb.p0.y;\n  const cy = 0.5 * (bb.p1.y + bb.p0.y);\n\n  const leftBracket = draw.bracket(\n    render.paper,\n    d.negated(),\n    d.negated().rotateSC(1, 0),\n    Scale.modelToCanvas(new Vec2(bb.p0.x, cy), render.options),\n    bracketWidth,\n    bracketHeight,\n    render.options,\n  );\n\n  const rightBracket = draw.bracket(\n    render.paper,\n    d,\n    d.rotateSC(1, 0),\n    Scale.modelToCanvas(new Vec2(bb.p1.x, cy), render.options),\n    bracketWidth,\n    bracketHeight,\n    render.options,\n  );\n\n  return set.push(leftBracket, rightBracket);\n}\n\nfunction rLogicToString(id, rLogic) {\n  const ifThen = rLogic.ifthen > 0 ? 'IF ' : '';\n\n  const rangeExists =\n    rLogic.range.startsWith('>') ||\n    rLogic.range.startsWith('<') ||\n    rLogic.range.startsWith('=');\n\n  let range = null;\n  if (rLogic.range.length > 0) {\n    range = rangeExists ? rLogic.range : '=' + rLogic.range;\n  } else range = '>0';\n\n  const restH = rLogic.resth ? ' (RestH)' : '';\n  const nextRg = rLogic.ifthen > 0 ? '\\nTHEN R' + rLogic.ifthen.toString() : '';\n\n  return `${ifThen}R${id.toString()}${range}${restH}${nextRg}`;\n}\n\nexport default ReRGroup;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs, RxnArrow, RxnArrowMode, Vec2 } from 'domain/entities';\n\nimport { LayerMap } from './generalEnumTypes';\nimport Raphael from '../raphael-ext';\nimport ReObject from './reobject';\nimport ReStruct from './restruct';\nimport { Render } from '../raphaelRender';\nimport { Scale } from 'domain/helpers';\nimport draw from '../draw';\nimport util from '../util';\nimport { tfx } from 'utilities';\n\ntype Arrow = {\n  pos: Array<Vec2>;\n  mode: RxnArrowMode;\n  height?: number;\n};\n\ntype ArrowParams = {\n  length: number;\n  angle: number;\n};\ninterface MinDistanceWithReferencePoint {\n  minDist: number;\n  refPoint: Vec2 | null;\n}\n\nclass ReRxnArrow extends ReObject {\n  item: Arrow;\n  isResizing = false;\n\n  constructor(/* chem.RxnArrow */ arrow: Arrow) {\n    super('rxnArrow');\n    this.item = arrow;\n  }\n\n  static isSelectable(): boolean {\n    return true;\n  }\n\n  calcDistance(p: Vec2, s: any): MinDistanceWithReferencePoint {\n    const point: Vec2 = new Vec2(p.x, p.y);\n    const distRef: MinDistanceWithReferencePoint =\n      this.getReferencePointDistance(p);\n    const item = this.item;\n    const pos = item.pos;\n\n    let dist: number = point.calculateDistanceToLine([pos[0], pos[1]]);\n\n    if (RxnArrow.isElliptical(item)) {\n      // currently an elliptical arrow is highlighted if a pointer is close to one of the 3 virtual lines\n      // that form a triangle from the arrow's 3 reference points\n      // TODO: make a better detection (maybe rectangular, so it's similar to visual highlight/selection)\n      const [startPoint, endPoint, middlePoint] = this.getReferencePoints();\n      dist = Math.min(\n        dist,\n        point.calculateDistanceToLine([startPoint, middlePoint]),\n        point.calculateDistanceToLine([middlePoint, endPoint]),\n      );\n    }\n\n    const refPoint: Vec2 | null =\n      distRef.minDist <= 8 / s ? distRef.refPoint : null;\n    // distance is a smallest between dist to figure and it's reference points\n    dist = Math.min(distRef.minDist, dist);\n    return { minDist: dist, refPoint };\n  }\n\n  getReferencePointDistance(p: Vec2): MinDistanceWithReferencePoint {\n    const dist: any = [];\n    const refPoints = this.getReferencePoints();\n    refPoints.forEach((rp) => {\n      dist.push({ minDist: Math.abs(Vec2.dist(p, rp)), refPoint: rp });\n    });\n\n    const minDist: MinDistanceWithReferencePoint = dist.reduce(\n      (acc, current) =>\n        !acc ? current : acc.minDist < current.minDist ? acc : current,\n      null,\n    );\n\n    return minDist;\n  }\n\n  hoverPath(render: Render) {\n    const path = this.generatePath(render, render.options, 'selection');\n\n    return render.paper.path(path);\n  }\n\n  drawHover(render: Render) {\n    const ret = this.hoverPath(render).attr(render.options.hoverStyle);\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n    return ret;\n  }\n\n  getReferencePoints(): Array<Vec2> {\n    const refPoints: Array<Vec2> = [];\n    const item = this.item;\n    const [a, b] = item.pos;\n    const height = item.height;\n    refPoints.push(new Vec2(a.x, a.y));\n    refPoints.push(new Vec2(b.x, b.y));\n\n    if (RxnArrow.isElliptical(item)) {\n      const middlePoint = findMiddlePoint(height!, a, b);\n      refPoints.push(middlePoint);\n    }\n    return refPoints;\n  }\n\n  makeAdditionalInfo(restruct: ReStruct) {\n    const scaleFactor = restruct.render.options.microModeScale;\n    const refPoints = this.getReferencePoints();\n    const selectionSet = restruct.render.paper.set();\n\n    refPoints.forEach((rp) => {\n      const scaledRP = Scale.modelToCanvas(rp, restruct.render.options);\n      selectionSet.push(\n        restruct.render.paper\n          .circle(scaledRP.x, scaledRP.y, scaleFactor / 8)\n          .attr({ fill: 'black' }),\n      );\n    });\n\n    return selectionSet;\n  }\n\n  makeSelectionPlate(restruct: ReStruct, _paper, styles) {\n    const render = restruct.render;\n    const options = restruct.render.options;\n    const selectionSet = restruct.render.paper.set();\n\n    selectionSet.push(\n      render.paper\n        .path(this.generatePath(render, options, 'selection'))\n        .attr(styles.selectionStyle),\n    );\n    return selectionSet;\n  }\n\n  generatePath(render: Render, options, type) {\n    let path;\n    const item = this.item;\n    const height =\n      RxnArrow.isElliptical(item) && item.height\n        ? item.height * options.microModeScale\n        : 0;\n    const pos = item.pos.map((p) => {\n      return Scale.modelToCanvas(p, options) || new Vec2();\n    });\n    const { length, angle } = this.getArrowParams(\n      pos[0].x,\n      pos[0].y,\n      pos[1].x,\n      pos[1].y,\n    );\n\n    switch (type) {\n      case 'selection':\n        path = draw.rectangleArrowHighlightAndSelection(\n          render.paper,\n          { pos, height },\n          length,\n          angle,\n        );\n        break;\n      case 'arrow':\n        path = draw.arrow(\n          render.paper,\n          { ...item, pos, height },\n          length,\n          angle,\n          options,\n          this.isResizing,\n        );\n        break;\n    }\n\n    return path;\n  }\n\n  getArrowParams(x1, y1, x2, y2): ArrowParams {\n    const length = Math.hypot(x2 - x1, y2 - y1);\n    const angle = Raphael.angle(x1, y1, x2, y2) - 180;\n\n    return { length, angle };\n  }\n\n  show(restruct: ReStruct, _id, options) {\n    const path = this.generatePath(restruct.render, options, 'arrow');\n\n    const offset = options.offset;\n    if (offset != null) path.translateAbs(offset.x, offset.y);\n\n    this.visel.add(path, Box2Abs.fromRelBox(util.relBox(path.getBBox())));\n  }\n}\n\nfunction findMiddlePoint(height: number, a: Vec2, b: Vec2) {\n  if (+tfx(height) === 0) {\n    const minX = Math.min(a.x, b.x);\n    const minY = Math.min(a.y, b.y);\n    const x = minX + Math.abs(a.x - b.x) / 2;\n    const y = minY + Math.abs(a.y - b.y) / 2;\n    return new Vec2(x, y);\n  }\n  const length = Math.hypot(b.x - a.x, b.y - a.y);\n  const lengthHyp = Math.hypot(length / 2, height);\n  const coordinates1 = util.calcCoordinates(a, b, lengthHyp).pos1;\n  const coordinates2 = util.calcCoordinates(a, b, lengthHyp).pos2;\n\n  if (height > 0) {\n    if (b.x < a.x) {\n      return new Vec2(coordinates1?.x, coordinates1?.y);\n    }\n    if (b.x > a.x) {\n      return new Vec2(coordinates2?.x, coordinates2?.y);\n    }\n    if (b.x === a.x) {\n      if (b.y > a.y) {\n        return new Vec2(coordinates2?.x, coordinates2?.y);\n      }\n      if (b.y < a.y) {\n        return new Vec2(coordinates1?.x, coordinates1?.y);\n      }\n      if (b.y === a.y) {\n        return new Vec2(a.x, a.y);\n      }\n    }\n  } else {\n    if (b.x > a.x) {\n      return new Vec2(coordinates1?.x, coordinates1?.y);\n    }\n    if (b.x < a.x) {\n      return new Vec2(coordinates2?.x, coordinates2?.y);\n    }\n    if (b.x === a.x) {\n      if (b.y > a.y) {\n        return new Vec2(coordinates1?.x, coordinates1?.y);\n      }\n      if (b.y < a.y) {\n        return new Vec2(coordinates2?.x, coordinates2?.y);\n      }\n      if (b.y === a.y) {\n        return new Vec2(a.x, a.y);\n      }\n    }\n  }\n  return new Vec2(a.x, a.y);\n}\n\nexport default ReRxnArrow;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs } from 'domain/entities';\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport { Scale } from 'domain/helpers';\nimport draw from '../draw';\nimport util from '../util';\n\nclass ReRxnPlus extends ReObject {\n  constructor(/* chem.RxnPlus */ plus) {\n    super('rxnPlus');\n    this.item = plus;\n  }\n\n  static isSelectable() {\n    return true;\n  }\n\n  hoverPath(render) {\n    const p = Scale.modelToCanvas(this.item.pp, render.options);\n    const s = render.options.microModeScale;\n    /* eslint-disable no-mixed-operators */\n    return render.paper.rect(p.x - s / 4, p.y - s / 4, s / 2, s / 2, s / 8);\n    /* eslint-enable no-mixed-operators */\n  }\n\n  drawHover(render) {\n    const ret = this.hoverPath(render).attr(render.options.hoverStyle);\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n    return ret;\n  }\n\n  makeSelectionPlate(restruct, paper, styles) {\n    // TODO [MK] review parameters\n    return this.hoverPath(restruct.render).attr(styles.selectionStyle);\n  }\n\n  show(restruct, id, options) {\n    const render = restruct.render;\n    const centre = Scale.modelToCanvas(this.item.pp, options);\n    const path = draw.plus(render.paper, centre, options);\n    const offset = options.offset;\n    if (offset != null) path.translateAbs(offset.x, offset.y);\n    this.visel.add(path, Box2Abs.fromRelBox(util.relBox(path.getBBox())));\n  }\n}\n\nexport default ReRxnPlus;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport { Scale } from 'domain/helpers';\n\nclass ReDataSGroupData extends ReObject {\n  constructor(sgroup) {\n    super('sgroupData');\n    this.sgroup = sgroup;\n  }\n\n  static isSelectable() {\n    return true;\n  }\n\n  hoverPath(render) {\n    const box = this.sgroup.dataArea;\n    const p0 = Scale.modelToCanvas(box.p0, render.options);\n    const sz = Scale.modelToCanvas(box.p1, render.options).sub(p0);\n    return render.paper.rect(p0.x, p0.y, sz.x, sz.y);\n  }\n\n  drawHover(render) {\n    const ret = this.hoverPath(render).attr(render.options.hoverStyle);\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n    return ret;\n  }\n\n  makeSelectionPlate(restruct, paper, styles) {\n    // TODO [MK] review parameters\n    return this.hoverPath(restruct.render).attr(styles.selectionStyle);\n  }\n}\n\nexport default ReDataSGroupData;\n","import { Vec2 } from 'domain/entities';\n\nexport default class BracketParams {\n  center: Vec2;\n  bracketAngleDirection: Vec2;\n  bracketDirection: Vec2;\n  width: number;\n  height: number;\n  constructor(\n    center: Vec2,\n    bracketAngleDirection: Vec2,\n    width: number,\n    height: number,\n    bracketDirection?: Vec2,\n  ) {\n    this.center = center;\n    this.bracketAngleDirection = bracketAngleDirection;\n    this.bracketDirection =\n      bracketDirection || bracketAngleDirection.rotateSC(1, 0);\n    this.width = width;\n    this.height = height;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Box2Abs,\n  FunctionalGroup,\n  Pile,\n  SGroup,\n  Vec2,\n  Struct,\n  MonomerMicromolecule,\n} from 'domain/entities';\nimport { SgContexts } from 'application/editor/shared/constants';\nimport ReDataSGroupData from './redatasgroupdata';\nimport ReStruct from './restruct';\nimport { Render } from '../raphaelRender';\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport { Scale } from 'domain/helpers';\nimport draw from '../draw';\nimport util from '../util';\nimport { tfx } from 'utilities';\nimport BracketParams from '../bracket-params';\nimport { RaphaelPaper } from 'raphael';\nimport { RenderOptions } from '../render.types';\ninterface SGroupdrawBracketsOptions {\n  set: any;\n  render: Render;\n  sgroup: SGroup;\n  crossBonds: { [key: number]: Array<number> };\n  atomSet: Pile;\n  bracketBox: Box2Abs;\n  direction: Vec2;\n  lowerIndexText?: string | null;\n  upperIndexText?: string | null;\n  indexAttribute?: object;\n}\n\nclass ReSGroup extends ReObject {\n  public item: SGroup | undefined;\n  public render!: Render;\n\n  constructor(sgroup: SGroup) {\n    super('sgroup');\n    /** @type {SGroup} */\n    this.item = sgroup;\n  }\n\n  static isSelectable(): boolean {\n    return false;\n  }\n\n  /**\n   * @param remol {ReStruct}\n   * @param sgroup {SGroup}\n   * @returns {*}\n   */\n  draw(remol: ReStruct, sgroup: SGroup): any {\n    this.render = remol.render;\n    let set = this.render.paper.set();\n    const atomSet = new Pile(sgroup.atoms);\n    const crossBonds = SGroup.getCrossBonds(remol.molecule, atomSet);\n    SGroup.bracketPos(sgroup, remol.molecule, crossBonds, remol, this.render);\n    const bracketBox = sgroup.bracketBox;\n    const direction = sgroup.bracketDirection;\n    sgroup.areas = [bracketBox];\n    if (sgroup.isExpanded()) {\n      const SGroupdrawBracketsOptions: SGroupdrawBracketsOptions = {\n        set,\n        render: this.render,\n        sgroup,\n        crossBonds,\n        atomSet,\n        bracketBox,\n        direction,\n      };\n      switch (sgroup.type) {\n        case 'MUL': {\n          SGroupdrawBracketsOptions.lowerIndexText = sgroup.data.mul;\n          break;\n        }\n        case 'queryComponent': {\n          break;\n        }\n        case 'SRU': {\n          let connectivity: string = sgroup.data.connectivity || 'eu';\n          if (connectivity === 'ht') connectivity = '';\n          const subscript = sgroup.data.subscript || 'n';\n          SGroupdrawBracketsOptions.lowerIndexText = subscript;\n          SGroupdrawBracketsOptions.upperIndexText = connectivity;\n          break;\n        }\n        case 'SUP': {\n          SGroupdrawBracketsOptions.lowerIndexText = sgroup.data.name;\n          SGroupdrawBracketsOptions.upperIndexText = null;\n          SGroupdrawBracketsOptions.indexAttribute = { 'font-style': 'italic' };\n          break;\n        }\n        case 'GEN': {\n          break;\n        }\n        case 'DAT': {\n          set = drawGroupDat(remol, sgroup);\n          break;\n        }\n        default:\n          break;\n      }\n\n      // DAT S-Groups do not have brackets\n      const sgroupTypesWithBrackets = [\n        'MUL',\n        'SRU',\n        'SUP',\n        'GEN',\n        'queryComponent',\n      ];\n      if (\n        sgroupTypesWithBrackets.includes(sgroup.type) &&\n        !sgroup.isSuperatomWithoutLabel &&\n        !(sgroup instanceof MonomerMicromolecule)\n      ) {\n        SGroupdrawBrackets(SGroupdrawBracketsOptions);\n      }\n    }\n    return set;\n  }\n\n  getTextHighlightDimensions(\n    padding = 0,\n    render: Render,\n  ): { startX: number; startY: number; width: number; height: number } {\n    let startX = 0;\n    let startY = 0;\n    let width = 0;\n    let height = 0;\n    const sGroup = this.item;\n    if (sGroup) {\n      const { atomId, position } = sGroup.getContractedPosition(\n        render.ctab.molecule,\n      );\n      if (sGroup?.isContracted() && position) {\n        const reSGroupAtom = render.ctab.atoms.get(atomId);\n        const sGroupTextBoundingBox =\n          reSGroupAtom?.visel.boundingBox || reSGroupAtom?.visel.oldBoundingBox;\n        if (sGroupTextBoundingBox) {\n          const { x, y } = Scale.modelToCanvas(position, render.options);\n          const { p0, p1 } = sGroupTextBoundingBox;\n          width = p1.x - p0.x + padding * 2;\n          height = p1.y - p0.y + padding * 2;\n          startX = x - width / 2;\n          startY = y - height / 2;\n        }\n      }\n    }\n\n    return { startX, startY, width, height };\n  }\n\n  getContractedSelectionContour(render: Render): any {\n    const { paper, options } = render;\n    const { fontszInPx, radiusScaleFactor } = options;\n    const radius = fontszInPx * radiusScaleFactor * 2;\n    const { startX, startY, width, height } = this.getTextHighlightDimensions(\n      fontszInPx / 2,\n      render,\n    );\n    return paper.rect(startX, startY, width, height, radius);\n  }\n\n  makeSelectionPlate(\n    restruct: ReStruct,\n    _paper: RaphaelPaper,\n    options: any,\n  ): any | void {\n    const sgroup = this.item;\n    const functionalGroups = restruct.molecule.functionalGroups;\n    const render = restruct.render;\n    if (\n      FunctionalGroup.isContractedFunctionalGroup(sgroup?.id, functionalGroups)\n    ) {\n      return this.getContractedSelectionContour(render).attr(\n        options.selectionStyle,\n      );\n    }\n  }\n\n  drawHover(render: Render): void {\n    // eslint-disable-line max-statements\n    const options = render.options;\n    const paper = render.paper;\n    const sGroupItem = this.item;\n    if (sGroupItem) {\n      const { a0, a1, b0, b1 } = getHighlighPathInfo(sGroupItem, render);\n      const functionalGroups = render.ctab.molecule.functionalGroups;\n      const set = paper.set();\n      if (\n        FunctionalGroup.isContractedFunctionalGroup(\n          sGroupItem.id,\n          functionalGroups,\n        )\n      ) {\n        sGroupItem.hovering = this.getContractedSelectionContour(render).attr(\n          options.hoverStyle,\n        );\n      } else if (!this.selected) {\n        sGroupItem.hovering = paper\n          .path(\n            'M{0},{1}L{2},{3}L{4},{5}L{6},{7}L{0},{1}',\n            tfx(a0.x),\n            tfx(a0.y),\n            tfx(a1.x),\n            tfx(a1.y),\n            tfx(b1.x),\n            tfx(b1.y),\n            tfx(b0.x),\n            tfx(b0.y),\n          )\n          .attr(options.hoverStyle);\n      }\n      set.push(sGroupItem.hovering);\n\n      SGroup.getAtoms(render.ctab.molecule, sGroupItem).forEach((aid) => {\n        set.push(render?.ctab?.atoms?.get(aid)?.makeHoverPlate(render));\n      }, this);\n      SGroup.getBonds(render.ctab.molecule, sGroupItem).forEach((bid) => {\n        set.push(render?.ctab?.bonds?.get(bid)?.makeHoverPlate(render));\n      }, this);\n      render.ctab.addReObjectPath(LayerMap.hovering, this.visel, set);\n    }\n  }\n\n  show(restruct: ReStruct): void {\n    const render = restruct.render;\n    const sgroup = this.item;\n    if (sgroup && sgroup.data.fieldName !== 'MRV_IMPLICIT_H') {\n      const remol = render.ctab;\n      const path = this.draw(remol, sgroup);\n      restruct.addReObjectPath(LayerMap.data, this.visel, path, null, true);\n      this.setHover(this.hover, render); // TODO: fix this\n    }\n  }\n}\n\nfunction SGroupdrawBrackets({\n  set,\n  render,\n  sgroup,\n  crossBonds,\n  atomSet,\n  bracketBox,\n  direction,\n  lowerIndexText,\n  upperIndexText,\n  indexAttribute,\n}: SGroupdrawBracketsOptions): void {\n  const attachmentPoints = [...atomSet].reduce((arr, atomId) => {\n    const rgroupAttachmentPointIds =\n      render.ctab.molecule.getRGroupAttachmentPointsByAtomId(atomId);\n    return [...arr, ...rgroupAttachmentPointIds];\n  }, []);\n  const crossBondsPerAtom = Object.values(crossBonds);\n  const crossBondsValues = crossBondsPerAtom.flat();\n  const brackets = getBracketParameters(\n    atomSet,\n    crossBondsPerAtom,\n    crossBondsValues,\n    attachmentPoints,\n    bracketBox,\n    direction,\n    render,\n    sgroup.id,\n  );\n  let rightBracketIndex = -1;\n  const isBracketContainAttachment =\n    crossBondsValues.length === 2 &&\n    crossBondsPerAtom.length === 1 &&\n    !!attachmentPoints.length;\n  for (let i = 0; i < brackets.length; ++i) {\n    const bracket = brackets[i];\n    const path = draw.bracket(\n      render.paper,\n      Scale.modelToCanvas(bracket.bracketAngleDirection, render.options),\n      Scale.modelToCanvas(bracket.bracketDirection, render.options),\n      Scale.modelToCanvas(bracket.center, render.options),\n      bracket.width,\n      bracket.height,\n      render.options,\n      isBracketContainAttachment,\n    );\n    set.push(path);\n    if (\n      rightBracketIndex < 0 ||\n      brackets[rightBracketIndex].bracketAngleDirection.x <\n        bracket.bracketAngleDirection.x ||\n      (brackets[rightBracketIndex].bracketAngleDirection.x ===\n        bracket.bracketAngleDirection.x &&\n        brackets[rightBracketIndex].bracketAngleDirection.y >\n          bracket.bracketAngleDirection.y)\n    ) {\n      rightBracketIndex = i;\n    }\n  }\n  const bracketR = brackets[rightBracketIndex];\n  function renderIndex(text: string, isLowerText = false): void {\n    let path: Vec2;\n    let lowerPath: Vec2;\n    const bracketPoint1 = new Vec2(\n      set[rightBracketIndex].getPath()[1][1],\n      set[rightBracketIndex].getPath()[1][2],\n      0,\n    );\n    const bracketPoint2 = new Vec2(\n      set[rightBracketIndex].getPath()[2][1],\n      set[rightBracketIndex].getPath()[2][2],\n      0,\n    );\n    if (bracketPoint2.y === bracketPoint1.y) {\n      lowerPath =\n        bracketPoint2.x > bracketPoint1.x ? bracketPoint1 : bracketPoint2;\n    } else {\n      lowerPath =\n        bracketPoint2.y > bracketPoint1.y ? bracketPoint2 : bracketPoint1;\n    }\n    if (isLowerText) {\n      path = lowerPath;\n    } else {\n      path =\n        lowerPath.x === bracketPoint1.x && lowerPath.y === bracketPoint1.y\n          ? bracketPoint2\n          : bracketPoint1;\n    }\n\n    const indexPos = new Vec2(path.x, path.y);\n    const indexPath = render.paper.text(indexPos.x, indexPos.y, text).attr({\n      font: render.options.font,\n      'font-size': render.options.fontszsubInPx,\n    });\n    if (indexAttribute) indexPath.attr(indexAttribute);\n    const indexBox = Box2Abs.fromRelBox(util.relBox(indexPath.getBBox()));\n    const t =\n      Math.max(\n        util.shiftRayBox(\n          indexPos,\n          bracketR.bracketAngleDirection.negated(),\n          indexBox,\n        ),\n        3,\n      ) + 2;\n    indexPath.translateAbs(\n      t * bracketR.bracketAngleDirection.x,\n      t * bracketR.bracketAngleDirection.y,\n    );\n    set.push(indexPath);\n  }\n  if (lowerIndexText) {\n    renderIndex(lowerIndexText, true);\n  }\n  if (upperIndexText) renderIndex(upperIndexText);\n}\n\nfunction showValue(\n  paper: RaphaelPaper,\n  pos: Vec2 | undefined,\n  sgroup: SGroup,\n  options: RenderOptions,\n): any {\n  const text = paper.text(pos?.x, pos?.y, sgroup.data.fieldValue).attr({\n    font: options.font,\n    'font-size': options.fontszsubInPx,\n  });\n  const box = text.getBBox();\n  let rect = paper.rect(\n    box.x - 1,\n    box.y - 1,\n    box.width + 2,\n    box.height + 2,\n    3,\n    3,\n  );\n  rect = sgroup.selected\n    ? rect.attr(options.selectionStyle)\n    : rect.attr({ fill: '#fff', stroke: '#fff' });\n  const set = paper.set();\n  set.push(rect, text.toFront());\n  return set;\n}\n\nfunction drawGroupDat(restruct: ReStruct, sgroup: SGroup) {\n  SGroup.bracketPos(sgroup, restruct.molecule);\n  sgroup.areas = sgroup.bracketBox ? [sgroup.bracketBox] : [];\n\n  if (sgroup.pp === null) sgroup.calculatePP(restruct.molecule);\n\n  return sgroup.data.attached\n    ? drawAttachedDat(restruct, sgroup)\n    : drawAbsoluteDat(restruct, sgroup);\n}\n\nfunction drawAbsoluteDat(restruct: ReStruct, sgroup: SGroup): any {\n  const render = restruct.render;\n  const options = render.options;\n  const paper = render.paper;\n  const set = paper.set();\n\n  const ps = sgroup?.pp?.scaled(options.microModeScale);\n  const name = showValue(paper, ps, sgroup, options);\n\n  if (sgroup.data.context !== SgContexts.Bond) {\n    const box = util.relBox(name.getBBox());\n    name.translateAbs(0.5 * box.width, -0.5 * box.height);\n  }\n\n  set.push(name);\n\n  const sbox = Box2Abs.fromRelBox(util.relBox(name.getBBox()));\n  sgroup.dataArea = sbox.transform(Scale.canvasToModel, render.options);\n\n  if (!restruct.sgroupData.has(sgroup.id)) {\n    restruct.sgroupData.set(sgroup.id, new ReDataSGroupData(sgroup));\n  }\n\n  return set;\n}\n\nfunction drawAttachedDat(restruct: ReStruct, sgroup: SGroup): any {\n  const render = restruct.render;\n  const options = render.options;\n  const paper = render.paper;\n  const set = paper.set();\n\n  SGroup.getAtoms(restruct, sgroup).forEach((aid) => {\n    const atom = restruct.atoms.get(aid);\n    if (atom) {\n      const p = Scale.modelToCanvas(atom.a.pp, options);\n      const bb = atom.visel.boundingBox;\n      if (bb !== null) p.x = Math.max(p.x, bb.p1.x);\n      p.x += options.lineWidth; // shift a bit to the right\n      const nameI = showValue(paper, p, sgroup, options);\n      const boxI = util.relBox(nameI.getBBox());\n      nameI.translateAbs(0.5 * boxI.width, -0.3 * boxI.height);\n      set.push(nameI);\n      let sboxI = Box2Abs.fromRelBox(util.relBox(nameI.getBBox()));\n      sboxI = sboxI.transform(Scale.canvasToModel, render.options);\n      sgroup.areas.push(sboxI);\n    }\n  });\n\n  return set;\n}\n\nfunction getBracketParameters(\n  atomSet: Pile,\n  crossBondsPerAtom: Array<Array<number>>,\n  crossBondsValues: Array<number>,\n  attachmentPoints: number[],\n  bracketBox: Box2Abs,\n  direction: Vec2,\n  render: Render,\n  id: number,\n) {\n  const mol = render.ctab.molecule;\n  const brackets: BracketParams[] = [];\n  const bracketDirection = direction.rotateSC(1, 0);\n\n  if (crossBondsValues.length < 2) {\n    getBracketParamersWithCrossBondsLessThan2(\n      direction,\n      bracketDirection,\n      bracketBox,\n      brackets,\n    );\n  } else if (crossBondsValues.length === 2 && crossBondsPerAtom.length === 2) {\n    getBracketParamersWithCrossBondsEquals2(\n      mol,\n      crossBondsValues,\n      id,\n      render,\n      attachmentPoints,\n      brackets,\n    );\n  } else if (crossBondsValues.length === 2 && crossBondsPerAtom.length === 1) {\n    getBracketParamersWithCrossBondsMoreThan2OnOneAtom(\n      crossBondsValues as [number, number],\n      mol,\n      attachmentPoints,\n      render,\n      brackets,\n    );\n  } else {\n    for (let i = 0; i < crossBondsValues.length; ++i) {\n      const bond = mol.bonds.get(Number(crossBondsValues[i]));\n      const center = bond?.getCenter(mol);\n      const direction = atomSet.has(bond?.begin)\n        ? bond?.getDir(mol)\n        : bond?.getDir(mol).negated();\n      if (center && direction) {\n        brackets.push(\n          new BracketParams(center, direction, 0.2, bracketBox.sz().y),\n        );\n      }\n    }\n  }\n  return brackets;\n}\n\nfunction getBracketParamersWithCrossBondsMoreThan2OnOneAtom(\n  crossBondsValues: [number, number],\n  mol: Struct,\n  attachmentPoints: number[],\n  render: Render,\n  brackets: BracketParams[],\n) {\n  let notTemplateShapeFirstAtom = false;\n  const bondDirections: Vec2[] = crossBondsValues.map((value) => {\n    const bond = mol.bonds.get(Number(value));\n    return bond?.getDir(mol) || new Vec2();\n  });\n  // if bonds direction is clockwise, then negated\n  const needNegated =\n    Vec2.crossProduct(bondDirections[0], bondDirections[1]) > 0;\n  notTemplateShapeFirstAtom =\n    Math.abs(Number(crossBondsValues[0]) - Number(crossBondsValues[1])) === 1;\n  if (notTemplateShapeFirstAtom && !needNegated) {\n    crossBondsValues.reverse();\n  }\n\n  for (let i = 0; i < crossBondsValues.length; ++i) {\n    const bond = mol.bonds.get(Number(crossBondsValues[i]));\n    let bondDirection = bond?.getDir(mol) || new Vec2();\n    let bracketDirection: Vec2;\n    let bracketAngleDirection: Vec2;\n    let attachmentDirection: Vec2;\n    if (attachmentPoints.length !== 2) {\n      if (needNegated && notTemplateShapeFirstAtom) {\n        bondDirection = bondDirection.negated();\n      }\n      bondDirection = i === 0 ? bondDirection : bondDirection.negated();\n      bracketDirection =\n        i === 0\n          ? bondDirection.rotateSC(1, 0).negated()\n          : bondDirection.rotateSC(1, 0);\n      bracketAngleDirection = bondDirection;\n    } else {\n      attachmentPoints = attachmentPoints.sort(\n        (point1, point2) => point1 - point2,\n      );\n      // if there are 2 attachment points then make brackets parallel to attachments\n      attachmentDirection =\n        render.ctab.rgroupAttachmentPoints.get(attachmentPoints[i])\n          ?.lineDirectionVector || new Vec2();\n      bracketDirection = attachmentDirection.negated();\n      bracketAngleDirection =\n        i === 0\n          ? bracketDirection.rotateSC(1, 0)\n          : bracketDirection.rotateSC(1, 0).negated();\n    }\n    brackets.push(\n      new BracketParams(\n        bond?.getCenter(mol) || new Vec2(),\n        bracketAngleDirection,\n        0.2,\n        attachmentPoints.length ? 1.8 : 1.0,\n        bracketDirection,\n      ),\n    );\n  }\n  return { crossBondsValues, attachmentPoints };\n}\n\nfunction getBracketParamersWithCrossBondsEquals2(\n  mol: Struct,\n  crossBondsValues: number[],\n  id: number,\n  render: Render,\n  attachmentPoints: number[],\n  brackets: BracketParams[],\n) {\n  const bond1 = mol.bonds.get(Number(crossBondsValues[0]));\n  const bond2 = mol.bonds.get(Number(crossBondsValues[1]));\n  if (bond1 && bond2) {\n    const leftCenter = bond1.getCenter(mol);\n    const rightCenter = bond2.getCenter(mol);\n    let leftShift = -1;\n    let rightShift = -1;\n    let bracketShift = -1;\n    let bracketShiftNegated = -1;\n    const centerConnection = Vec2.centre(leftCenter, rightCenter);\n    const rightDirection = Vec2.diff(rightCenter, leftCenter).normalized();\n    const leftDirection = rightDirection.negated();\n    const bracketDirection = rightDirection.rotateSC(1, 0);\n    const bracketDirectionNegated = bracketDirection.negated();\n\n    mol?.sGroupForest?.children?.get(id)?.forEach((sgid) => {\n      let boundingBox = render?.ctab?.sgroups?.get(sgid)?.visel.boundingBox;\n      boundingBox =\n        boundingBox\n          ?.translate((render.options.offset || new Vec2()).negated())\n          .transform(Scale.canvasToModel, render.options) || new Box2Abs();\n      leftShift = Math.max(\n        leftShift,\n        util.shiftRayBox(leftCenter, leftDirection, boundingBox),\n      );\n      rightShift = Math.max(\n        rightShift,\n        util.shiftRayBox(rightCenter, rightDirection, boundingBox),\n      );\n      bracketShift = Math.max(\n        bracketShift,\n        util.shiftRayBox(centerConnection, bracketDirection, boundingBox),\n      );\n      bracketShiftNegated = Math.max(\n        bracketShiftNegated,\n        util.shiftRayBox(\n          centerConnection,\n          bracketDirectionNegated,\n          boundingBox,\n        ),\n      );\n    });\n    leftShift = Math.max(leftShift + 0.2, 0);\n    rightShift = Math.max(rightShift + 0.2, 0);\n    bracketShift = Math.max(\n      Math.max(bracketShift, bracketShiftNegated) + 0.1,\n      0,\n    );\n    const bracketWidth = 0.25;\n    let bracketHeight = 1.5 + bracketShift;\n    if (attachmentPoints.length) {\n      bracketHeight = 2 + 2 * Math.sin(Math.PI / 6) + bracketShift;\n    }\n    brackets.push(\n      new BracketParams(\n        leftCenter.addScaled(leftDirection, leftShift),\n        leftDirection,\n        bracketWidth,\n        bracketHeight,\n      ),\n      new BracketParams(\n        rightCenter.addScaled(rightDirection, rightShift),\n        rightDirection,\n        bracketWidth,\n        bracketHeight,\n      ),\n    );\n  }\n}\n\nfunction getBracketParamersWithCrossBondsLessThan2(\n  direction: Vec2,\n  bracketDirection: Vec2,\n  bracketBox: Box2Abs,\n  brackets: BracketParams[],\n) {\n  direction = direction || new Vec2(1, 0);\n  bracketDirection = bracketDirection || direction.rotateSC(1, 0);\n  const bracketWidth = Math.min(0.25, bracketBox.sz().x * 0.3);\n  const leftCenter = Vec2.lc2(\n    direction,\n    bracketBox.p0.x,\n    bracketDirection,\n    0.5 * (bracketBox.p0.y + bracketBox.p1.y),\n  );\n  const rightCenter = Vec2.lc2(\n    direction,\n    bracketBox.p1.x,\n    bracketDirection,\n    0.5 * (bracketBox.p0.y + bracketBox.p1.y),\n  );\n  const bracketHeight = bracketBox.sz().y;\n\n  brackets.push(\n    new BracketParams(\n      leftCenter,\n      direction.negated(),\n      bracketWidth,\n      bracketHeight,\n    ),\n    new BracketParams(rightCenter, direction, bracketWidth, bracketHeight),\n  );\n}\n\n/**\n * @param sgroup {SGroup}\n * @param render {Render}\n * @returns {{a1: Vec2, size: number | number, startY: number, startX: number, b0: Vec2, a0: Vec2, b1: Vec2}}\n */\nfunction getHighlighPathInfo(\n  sgroup: SGroup,\n  render: Render,\n): {\n  a0: Vec2;\n  a1: Vec2;\n  b0: Vec2;\n  b1: Vec2;\n  startX: number;\n  startY: number;\n  size: number;\n} {\n  const options = render.options;\n  let bracketBox = sgroup.bracketBox.transform(Scale.modelToCanvas, options);\n  const lineWidth = options.lineWidth;\n  const vext = new Vec2(lineWidth * 4, lineWidth * 6);\n  bracketBox = bracketBox.extend(vext, vext);\n  const direction = sgroup.bracketDirection;\n  const bracketDirection = direction.rotateSC(1, 0);\n  const a0 = Vec2.lc2(\n    direction,\n    bracketBox.p0.x,\n    bracketDirection,\n    bracketBox.p0.y,\n  );\n  const a1 = Vec2.lc2(\n    direction,\n    bracketBox.p0.x,\n    bracketDirection,\n    bracketBox.p1.y,\n  );\n  const b0 = Vec2.lc2(\n    direction,\n    bracketBox.p1.x,\n    bracketDirection,\n    bracketBox.p0.y,\n  );\n  const b1 = Vec2.lc2(\n    direction,\n    bracketBox.p1.x,\n    bracketDirection,\n    bracketBox.p1.y,\n  );\n  const size = options.contractedFunctionalGroupSize;\n  let startX = (b0.x + a0.x) / 2 - size / 2;\n  let startY = (a1.y + a0.y) / 2 - size / 2;\n  const { position: contractedPosition } = sgroup.getContractedPosition(\n    render.ctab.molecule,\n  );\n  if (contractedPosition) {\n    const shift = new Vec2(size / 2, size / 2, 0);\n    const hoverPp = Vec2.diff(contractedPosition.scaled(40), shift);\n    startX = hoverPp.x;\n    startY = hoverPp.y;\n  }\n  return {\n    a0,\n    a1,\n    b0,\n    b1,\n    startX,\n    startY,\n    size,\n  };\n}\n\nexport default ReSGroup;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs, SimpleObjectMode, Vec2 } from 'domain/entities';\n\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport ReStruct from './restruct';\nimport { Render } from '../raphaelRender';\nimport { Scale } from 'domain/helpers';\nimport draw from '../draw';\nimport util from '../util';\nimport { tfx } from 'utilities';\n\ninterface MinDistanceWithReferencePoint {\n  minDist: number;\n  refPoint: Vec2 | null;\n}\ninterface StyledPath {\n  path: any;\n  stylesApplied: boolean;\n}\nclass ReSimpleObject extends ReObject {\n  private item: any;\n  private selectionSet: any;\n  private selectionPointsSet: any;\n\n  constructor(simpleObject: any) {\n    super('simpleObject');\n    this.item = simpleObject;\n  }\n\n  static isSelectable(): boolean {\n    return true;\n  }\n\n  calcDistance(p: Vec2, s: any): MinDistanceWithReferencePoint {\n    const point: Vec2 = new Vec2(p.x, p.y);\n\n    const distRef: MinDistanceWithReferencePoint =\n      this.getReferencePointDistance(p);\n    const item = this.item;\n    const mode = item.mode;\n    const pos = item.pos;\n    let dist: number;\n\n    switch (mode) {\n      case SimpleObjectMode.ellipse: {\n        const rad = Vec2.diff(pos[1], pos[0]);\n        const rx = rad.x / 2;\n        const ry = rad.y / 2;\n        const center = Vec2.sum(pos[0], new Vec2(rx, ry));\n        const pointToCenter = Vec2.diff(point, center);\n        if (rx !== 0 && ry !== 0) {\n          dist = Math.abs(\n            1 -\n              (pointToCenter.x * pointToCenter.x) / (rx * rx) -\n              (pointToCenter.y * pointToCenter.y) / (ry * ry),\n          );\n        } else {\n          // in case rx or ry is equal to 0 we have a line as a trivial case of ellipse\n          // in such case distance need to be calculated as a distance between line and current point\n          dist = point.calculateDistanceToLine([pos[0], pos[1]]);\n        }\n        break;\n      }\n      case SimpleObjectMode.rectangle: {\n        const topX = Math.min(pos[0].x, pos[1].x);\n        const topY = Math.min(pos[0].y, pos[1].y);\n        const bottomX = Math.max(pos[0].x, pos[1].x);\n        const bottomY = Math.max(pos[0].y, pos[1].y);\n\n        const distances: Array<number> = [];\n\n        if (point.x >= topX && point.x <= bottomX) {\n          if (point.y < topY) {\n            distances.push(topY - point.y);\n          } else if (point.y > bottomY) {\n            distances.push(point.y - bottomY);\n          } else {\n            distances.push(point.y - topY, bottomY - point.y);\n          }\n        }\n        if (point.x < topX && point.y < topY) {\n          distances.push(Vec2.dist(new Vec2(topX, topY), point));\n        }\n        if (point.x > bottomX && point.y > bottomY) {\n          distances.push(Vec2.dist(new Vec2(bottomX, bottomY), point));\n        }\n        if (point.x < topX && point.y > bottomY) {\n          distances.push(Vec2.dist(new Vec2(topX, bottomY), point));\n        }\n        if (point.x > bottomX && point.y < topY) {\n          distances.push(Vec2.dist(new Vec2(bottomX, topY), point));\n        }\n        if (point.y >= topY && point.y <= bottomY) {\n          if (point.x < topX) {\n            distances.push(topX - point.x);\n          } else if (point.x > bottomX) {\n            distances.push(point.x - bottomX);\n          } else {\n            distances.push(point.x - topX, bottomX - point.x);\n          }\n        }\n        dist = Math.min(...distances);\n        break;\n      }\n      case SimpleObjectMode.line: {\n        dist = point.calculateDistanceToLine([pos[0], pos[1]]);\n        break;\n      }\n\n      default: {\n        throw new Error('Unsupported shape type');\n      }\n    }\n\n    const refPoint: Vec2 | null =\n      distRef.minDist <= 8 / s ? distRef.refPoint : null;\n    // distance is a smallest between dist to figure and it's reference points\n    dist = Math.min(distRef.minDist, dist);\n    return { minDist: dist, refPoint };\n  }\n\n  getReferencePointDistance(p: Vec2): MinDistanceWithReferencePoint {\n    const dist: any = [];\n    const refPoints = this.getReferencePoints();\n    refPoints.forEach((rp) => {\n      dist.push({ minDist: Math.abs(Vec2.dist(p, rp)), refPoint: rp });\n    });\n\n    const minDist: MinDistanceWithReferencePoint = dist.reduce(\n      (acc, current) =>\n        !acc ? current : acc.minDist < current.minDist ? acc : current,\n      null,\n    );\n\n    return minDist;\n  }\n\n  getReferencePoints(onlyOnObject = false): Array<Vec2> {\n    const refPoints: Array<Vec2> = [];\n    switch (this.item.mode) {\n      case SimpleObjectMode.ellipse:\n      case SimpleObjectMode.rectangle: {\n        const p0: Vec2 = new Vec2(\n          Math.min(this.item.pos[0].x, this.item.pos[1].x),\n          Math.min(this.item.pos[0].y, this.item.pos[1].y),\n        );\n        const w = Math.abs(Vec2.diff(this.item.pos[0], this.item.pos[1]).x);\n        const h = Math.abs(Vec2.diff(this.item.pos[0], this.item.pos[1]).y);\n\n        refPoints.push(\n          new Vec2(p0.x + 0.5 * w, p0.y),\n          new Vec2(p0.x + w, p0.y + 0.5 * h),\n          new Vec2(p0.x + 0.5 * w, p0.y + h),\n          new Vec2(p0.x, p0.y + 0.5 * h),\n        );\n        if (!onlyOnObject || this.item.mode === SimpleObjectMode.rectangle) {\n          refPoints.push(\n            p0,\n            new Vec2(p0.x, p0.y + h),\n            new Vec2(p0.x + w, p0.y + h),\n            new Vec2(p0.x + w, p0.y),\n          );\n        }\n        break;\n      }\n      case SimpleObjectMode.line: {\n        this.item.pos.forEach((i) => refPoints.push(new Vec2(i.x, i.y, 0)));\n        break;\n      }\n\n      default: {\n        throw new Error('Unsupported shape type');\n      }\n    }\n    return refPoints;\n  }\n\n  getFigureHoverPath(path: any, render: Render, isBorder = true) {\n    if (isBorder) {\n      return path.attr({ ...render.options.hoverStyle, fill: 'none' });\n    } else {\n      return path.attr(render.options.innerHoverStyle);\n    }\n  }\n\n  hoverPath(render: Render): Array<StyledPath> {\n    const point: Array<Vec2> = [];\n\n    this.item.pos.forEach((p, index) => {\n      point[index] = Scale.modelToCanvas(p, render.options);\n    });\n    const scaleFactor = render.options.microModeScale;\n\n    const paths: Array<StyledPath> = [];\n\n    // TODO: It seems that inheritance will be the better approach here\n    const lineOffset = scaleFactor / 8;\n    switch (this.item.mode) {\n      case SimpleObjectMode.ellipse: {\n        const rad = Vec2.diff(point[1], point[0]);\n        const rx = rad.x / 2;\n        const ry = rad.y / 2;\n        const centerX = tfx(point[0].x + rx);\n        const centerY = tfx(point[0].y + ry);\n        const outerBorderEllipse = render.paper.ellipse(\n          centerX,\n          centerY,\n          tfx(Math.abs(rx) + lineOffset),\n          tfx(Math.abs(ry) + lineOffset),\n        );\n        paths.push({\n          path: this.getFigureHoverPath(outerBorderEllipse, render),\n          stylesApplied: true,\n        });\n\n        const fillEllipse = render.paper.ellipse(\n          centerX,\n          centerY,\n          tfx(Math.abs(rx)),\n          tfx(Math.abs(ry)),\n        );\n        paths.push({\n          path: this.getFigureHoverPath(fillEllipse, render, false),\n          stylesApplied: true,\n        });\n        if (\n          Math.abs(rx) - scaleFactor / 8 > 0 &&\n          Math.abs(ry) - scaleFactor / 8 > 0\n        ) {\n          const innerBorderEllipse = render.paper.ellipse(\n            centerX,\n            centerY,\n            tfx(Math.abs(rx) - lineOffset),\n            tfx(Math.abs(ry) - lineOffset),\n          );\n          paths.push({\n            path: this.getFigureHoverPath(innerBorderEllipse, render),\n            stylesApplied: true,\n          });\n        }\n        break;\n      }\n\n      case SimpleObjectMode.rectangle: {\n        const leftX = Math.min(point[0].x, point[1].x);\n        const topY = Math.min(point[0].y, point[1].y);\n        const rightX = Math.max(point[0].x, point[1].x) - leftX;\n        const bottomY = Math.max(point[0].y, point[1].y) - topY;\n\n        const outerBorderRect = render.paper.rect(\n          tfx(leftX - lineOffset),\n          tfx(topY - lineOffset),\n          tfx(rightX + 2 * lineOffset),\n          tfx(bottomY + 2 * lineOffset),\n        );\n        paths.push({\n          path: this.getFigureHoverPath(outerBorderRect, render),\n          stylesApplied: true,\n        });\n        const fillRect = render.paper.rect(\n          tfx(leftX),\n          tfx(topY),\n          tfx(rightX),\n          tfx(bottomY),\n        );\n        paths.push({\n          path: this.getFigureHoverPath(fillRect, render, false),\n          stylesApplied: true,\n        });\n        if (rightX - 2 * lineOffset > 0 && bottomY - 2 * lineOffset > 0) {\n          const innerRect = render.paper.rect(\n            tfx(leftX + lineOffset),\n            tfx(topY + lineOffset),\n            tfx(rightX - 2 * lineOffset),\n            tfx(bottomY - 2 * lineOffset),\n          );\n          paths.push({\n            path: this.getFigureHoverPath(innerRect, render),\n            stylesApplied: true,\n          });\n        }\n\n        break;\n      }\n      case SimpleObjectMode.line: {\n        // TODO: reuse this code for polyline\n        const poly: Array<string | number> = [];\n\n        const angle = Math.atan(\n          (point[1].y - point[0].y) / (point[1].x - point[0].x),\n        );\n\n        const p0 = { x: 0, y: 0 };\n        const p1 = { x: 0, y: 0 };\n\n        const k = point[0].x > point[1].x ? -1 : 1;\n\n        p0.x = point[0].x - k * ((scaleFactor / 8) * Math.cos(angle));\n        p0.y = point[0].y - k * ((scaleFactor / 8) * Math.sin(angle));\n        p1.x = point[1].x + k * ((scaleFactor / 8) * Math.cos(angle));\n        p1.y = point[1].y + k * ((scaleFactor / 8) * Math.sin(angle));\n\n        poly.push(\n          'M',\n          p0.x + ((k * scaleFactor) / 8) * Math.sin(angle),\n          p0.y - ((k * scaleFactor) / 8) * Math.cos(angle),\n        );\n        poly.push(\n          'L',\n          p1.x + ((k * scaleFactor) / 8) * Math.sin(angle),\n          p1.y - ((k * scaleFactor) / 8) * Math.cos(angle),\n        );\n        poly.push(\n          'L',\n          p1.x - ((k * scaleFactor) / 8) * Math.sin(angle),\n          p1.y + ((k * scaleFactor) / 8) * Math.cos(angle),\n        );\n        poly.push(\n          'L',\n          p0.x - ((k * scaleFactor) / 8) * Math.sin(angle),\n          p0.y + ((k * scaleFactor) / 8) * Math.cos(angle),\n        );\n        poly.push(\n          'L',\n          p0.x + ((k * scaleFactor) / 8) * Math.sin(angle),\n          p0.y - ((k * scaleFactor) / 8) * Math.cos(angle),\n        );\n        paths.push({\n          path: render.paper.path(poly).attr(render.options.hoverStyle),\n          stylesApplied: true,\n        });\n        break;\n      }\n      default: {\n        throw new Error('Unsupported shape type');\n      }\n    }\n\n    return paths;\n  }\n\n  drawHover(render: Render): Array<any> {\n    const paths: Array<any> = this.hoverPath(render).map((enhPath) => {\n      if (!enhPath.stylesApplied) {\n        return enhPath.path.attr(render.options.hoverStyle);\n      }\n      return enhPath.path;\n    });\n\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, paths);\n    return paths;\n  }\n\n  makeSelectionPlate(restruct: ReStruct, paper: any, styles: any): any {\n    const pos = this.item.pos.map((p) => {\n      return Scale.modelToCanvas(p, restruct.render.options) || new Vec2();\n    });\n\n    const refPoints = this.getReferencePoints();\n    const scaleFactor = restruct.render.options.microModeScale;\n    this.selectionSet = restruct.render.paper.set();\n    this.selectionPointsSet = restruct.render.paper.set();\n    this.selectionSet.push(\n      generatePath(this.item.mode, paper, pos).attr(\n        styles.selectionStyleSimpleObject,\n      ),\n    );\n    refPoints.forEach((rp) => {\n      const scaledRP = Scale.modelToCanvas(rp, restruct.render.options);\n      this.selectionPointsSet.push(\n        restruct.render.paper\n          .circle(scaledRP.x, scaledRP.y, scaleFactor / 8)\n          .attr({ fill: 'black' }),\n      );\n    });\n    restruct.addReObjectPath(\n      LayerMap.selectionPoints,\n      this.visel,\n      this.selectionPointsSet,\n    );\n    return this.selectionSet;\n  }\n\n  togglePoints(displayFlag: boolean) {\n    displayFlag\n      ? this.selectionPointsSet?.show()\n      : this.selectionPointsSet?.hide();\n  }\n\n  show(restruct: ReStruct, options: any): void {\n    const render = restruct.render;\n    const pos = this.item.pos.map((p) => {\n      return Scale.modelToCanvas(p, options) || new Vec2();\n    });\n\n    const path = generatePath(this.item.mode, render.paper, pos);\n\n    const offset = options.offset;\n    if (offset != null) path.translateAbs(offset.x, offset.y);\n\n    this.visel.add(path, Box2Abs.fromRelBox(util.relBox(path.getBBox())));\n  }\n}\n\nfunction generatePath(mode: SimpleObjectMode, paper, pos: [Vec2, Vec2]): any {\n  let path: any;\n  switch (mode) {\n    case SimpleObjectMode.ellipse: {\n      path = draw.ellipse(paper, pos);\n      break;\n    }\n    case SimpleObjectMode.rectangle: {\n      path = draw.rectangle(paper, pos);\n      break;\n    }\n    case SimpleObjectMode.line: {\n      path = draw.line(paper, pos);\n      break;\n    }\n    default: {\n      throw new Error('Unsupported shape type');\n    }\n  }\n\n  return path;\n}\n\nexport default ReSimpleObject;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Bond, Vec2 } from 'domain/entities';\n\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport { Scale } from 'domain/helpers';\nimport { tfx } from 'utilities';\n\nclass ReLoop extends ReObject {\n  constructor(loop) {\n    super('loop');\n    this.loop = loop;\n    this.centre = new Vec2();\n    this.radius = new Vec2();\n  }\n\n  static isSelectable() {\n    return false;\n  }\n\n  show(restruct, rlid, options) {\n    // eslint-disable-line max-statements\n    const render = restruct.render;\n    const paper = render.paper;\n    const molecule = restruct.molecule;\n    const loop = this.loop;\n    this.centre = new Vec2();\n    loop.hbs.forEach((hbid) => {\n      const hb = molecule.halfBonds.get(hbid);\n      const bond = restruct.bonds.get(hb.bid);\n      const apos = Scale.modelToCanvas(\n        restruct.atoms.get(hb.begin).a.pp,\n        options,\n      );\n      if (bond.b.type !== Bond.PATTERN.TYPE.AROMATIC) loop.aromatic = false;\n      this.centre.add_(apos); // eslint-disable-line no-underscore-dangle\n    });\n    loop.convex = true;\n    for (let k = 0; k < this.loop.hbs.length; ++k) {\n      const hba = molecule.halfBonds.get(loop.hbs[k]);\n      const hbb = molecule.halfBonds.get(loop.hbs[(k + 1) % loop.hbs.length]);\n      const angle = Math.atan2(\n        Vec2.cross(hba.dir, hbb.dir),\n        Vec2.dot(hba.dir, hbb.dir),\n      );\n      if (angle > 0) loop.convex = false;\n    }\n\n    this.centre = this.centre.scaled(1.0 / loop.hbs.length);\n    this.radius = -1;\n    loop.hbs.forEach((hbid) => {\n      const hb = molecule.halfBonds.get(hbid);\n      const apos = Scale.modelToCanvas(\n        restruct.atoms.get(hb.begin).a.pp,\n        options,\n      );\n      const bpos = Scale.modelToCanvas(\n        restruct.atoms.get(hb.end).a.pp,\n        options,\n      );\n      const n = Vec2.diff(bpos, apos).rotateSC(1, 0).normalized();\n      const dist = Vec2.dot(Vec2.diff(apos, this.centre), n);\n      this.radius = this.radius < 0 ? dist : Math.min(this.radius, dist);\n    });\n    this.radius *= 0.7;\n    if (!loop.aromatic) return;\n    let path = null;\n    if (loop.convex && options.aromaticCircle) {\n      path = paper.circle(this.centre.x, this.centre.y, this.radius).attr({\n        stroke: '#000',\n        'stroke-width': options.lineattr['stroke-width'],\n      });\n    } else {\n      let pathStr = '';\n      for (let k = 0; k < loop.hbs.length; ++k) {\n        const hba = molecule.halfBonds.get(loop.hbs[k]);\n        const hbb = molecule.halfBonds.get(loop.hbs[(k + 1) % loop.hbs.length]);\n        const angle = Math.atan2(\n          Vec2.cross(hba.dir, hbb.dir),\n          Vec2.dot(hba.dir, hbb.dir),\n        );\n        const halfAngle = (Math.PI - angle) / 2;\n        const dir = hbb.dir.rotate(halfAngle);\n        const pi = Scale.modelToCanvas(\n          restruct.atoms.get(hbb.begin).a.pp,\n          options,\n        );\n        let sin = Math.sin(halfAngle);\n        const minSin = 0.1;\n        if (Math.abs(sin) < minSin) sin = (sin * minSin) / Math.abs(sin);\n        const offset = options.bondSpace / sin;\n        const qi = pi.addScaled(dir, -offset);\n        pathStr += k === 0 ? 'M' : 'L';\n        pathStr += tfx(qi.x) + ',' + tfx(qi.y);\n      }\n      pathStr += 'Z';\n      path = paper.path(pathStr).attr({\n        stroke: '#000',\n        'stroke-width': options.lineattr['stroke-width'],\n        'stroke-dasharray': '- ',\n      });\n    }\n    restruct.addReObjectPath(LayerMap.data, this.visel, path, null, true);\n  }\n\n  isValid(struct, rlid) {\n    const halfBonds = struct.halfBonds;\n    return this.loop.hbs.every(\n      (hbid) => halfBonds.has(hbid) && halfBonds.get(hbid).loop === rlid,\n    );\n  }\n}\n\nexport default ReLoop;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  DraftInlineStyleType,\n  RawDraftContentBlock,\n  RawDraftContentState,\n  RawDraftInlineStyleRange,\n} from 'draft-js';\nimport { Box2Abs, Text, TextCommand, Vec2 } from 'domain/entities';\nimport { flatten, isEqual } from 'lodash/fp';\n\nimport { LayerMap } from './generalEnumTypes';\nimport ReObject from './reobject';\nimport ReStruct from './restruct';\nimport { Scale } from 'domain/helpers';\nimport { RaphaelBaseElement } from 'raphael';\n\ninterface CustomRawDraftInlineStyleRange\n  extends Omit<RawDraftInlineStyleRange, 'style'> {\n  style:\n    | DraftInlineStyleType\n    | TextCommand.Subscript\n    | TextCommand.Superscript\n    | TextCommand.FontSize;\n}\n\nconst SCALE = 40; // from ketcher-core\n\nclass ReText extends ReObject {\n  private item: Text;\n  paths: Array<Array<RaphaelBaseElement>> = [];\n\n  constructor(text: Text) {\n    super('text');\n    this.item = text;\n  }\n\n  static isSelectable() {\n    return true;\n  }\n\n  getReferencePoints(): Array<Vec2> {\n    if (!this.paths.length) return [];\n\n    const { p0, p1 } = this.getRelBox(this.paths);\n\n    const p = this.item.position;\n    const width = Math.abs(Vec2.diff(p0, p1).x) / SCALE;\n    const height = Math.abs(Vec2.diff(p0, p1).y) / SCALE;\n\n    const refPoints: Array<Vec2> = [];\n\n    refPoints.push(\n      this.item.position,\n      new Vec2(p.x, p.y + height),\n      new Vec2(p.x + width, p.y + height),\n      new Vec2(p.x + width, p.y),\n    );\n\n    return refPoints;\n  }\n\n  getVBoxObj(): Box2Abs {\n    const [leftTopPoint, _, rightBottomPoint] = this.getReferencePoints();\n    return new Box2Abs(leftTopPoint, rightBottomPoint);\n  }\n\n  hoverPath(render: any): any {\n    const { p0, p1 } = this.getRelBox(this.paths);\n    const topLeft = p0.sub(render.options.offset);\n    const { x: width, y: height } = p1.sub(p0);\n\n    return render.paper.rect(topLeft.x, topLeft.y, width, height, 5);\n  }\n\n  getRelBox(paths: Array<Array<RaphaelBaseElement>>): { p0: Vec2; p1: Vec2 } {\n    const firstElOfFirstRow: RaphaelBaseElement = paths[0][0];\n    const leftEdge = firstElOfFirstRow.getBBox().x;\n\n    const firstRow: Array<RaphaelBaseElement> = paths[0];\n    const topEdge: number = Math.min(\n      ...firstRow.map((path) => path.getBBox().y),\n    );\n\n    const widestRow: Array<RaphaelBaseElement> = paths.reduce(\n      (widestRow, nextRow) =>\n        this.getRowWidth(nextRow) > this.getRowWidth(widestRow)\n          ? nextRow\n          : widestRow,\n      paths[0],\n    );\n    const lastElOfWidestRow: RaphaelBaseElement =\n      widestRow[widestRow.length - 1];\n    const rightEdge: number =\n      lastElOfWidestRow.getBBox().x + lastElOfWidestRow.getBBox().width;\n\n    const lastRow: Array<RaphaelBaseElement> = paths[paths.length - 1];\n    const bottomEdge: number = Math.max(\n      ...lastRow.map((path) => path.getBBox().y + path.getBBox().height),\n    );\n\n    return {\n      p0: new Vec2(leftEdge, topEdge),\n      p1: new Vec2(rightEdge, bottomEdge),\n    };\n  }\n\n  getRowWidth(row: Array<RaphaelBaseElement>): number {\n    return row.reduce((rowWidth, nextRow) => {\n      rowWidth += nextRow.getBBox().width;\n      return rowWidth;\n    }, 0);\n  }\n\n  drawHover(render: any): any {\n    if (!this.paths.length) return null;\n    const ret = this.hoverPath(render).attr(render.options.hoverStyle);\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\n    return ret;\n  }\n\n  makeSelectionPlate(restruct: ReStruct, paper: any, options: any): any {\n    if (!this.paths.length || !paper) return null;\n    return this.hoverPath(restruct.render).attr(options.selectionStyle);\n  }\n\n  show(restruct: ReStruct, _id: number, options: any): void {\n    const render = restruct.render;\n    const paper = render.paper;\n    const paperScale = Scale.modelToCanvas(this.item.position!, options);\n\n    let shiftY = 0;\n    this.paths = [];\n    // TODO: create parser in ketcher-core package\n    const rawContentState: RawDraftContentState | null = this.item.content\n      ? (JSON.parse(this.item.content) as RawDraftContentState)\n      : null;\n    if (!rawContentState) {\n      return;\n    }\n\n    rawContentState.blocks.forEach((block: RawDraftContentBlock) => {\n      const ranges: Array<[number, number, Record<string, any>]> =\n        this.getRanges(block, options);\n      let shiftX = 0;\n      const row: Array<RaphaelBaseElement> = [];\n      ranges.forEach(([start, end, styles]) => {\n        block.text = block.text.replace(/[^\\S\\r\\n]/g, '\\u00a0');\n        const path = paper\n          .text(\n            paperScale.x,\n            paperScale.y,\n            block.text.substring(start, end + 1) || '\\u00a0',\n          )\n          .attr({\n            font: options.font,\n            'font-size': options.fontszInPx,\n            'text-anchor': 'start',\n            fill: '#000000',\n            ...styles,\n          });\n        path.translateAbs(shiftX, shiftY + (styles.shiftY || 0));\n        row.push(path);\n        shiftX += path.getBBox().width;\n      });\n\n      this.paths.push(row);\n\n      const { p0, p1 } = this.getRelBox([row]);\n      shiftY += Math.abs(Vec2.diff(p0, p1).y);\n    });\n\n    this.item.setPos(this.getReferencePoints());\n\n    render.ctab.addReObjectPath(\n      LayerMap.data,\n      this.visel,\n      flatten(this.paths),\n      null,\n      true,\n    );\n  }\n\n  getRanges(\n    block: RawDraftContentBlock,\n    options: any,\n  ): Array<[number, number, Record<string, any>]> {\n    const ranges: Array<[number, number, Record<string, any>]> = [];\n\n    let start = 0;\n    let styles: Record<string, any> = this.getStyles(block, start, options);\n    for (let i = 1; i < block.text.length; i++) {\n      const nextStyles = this.getStyles(block, i, options);\n\n      if (!isEqual(styles, nextStyles)) {\n        ranges.push([start, i - 1, styles]);\n        styles = nextStyles;\n        start = i;\n      }\n    }\n    ranges.push([start, block.text.length - 1, styles]);\n\n    return ranges;\n  }\n\n  getStyles(\n    block: RawDraftContentBlock,\n    index: number,\n    options: any,\n  ): Record<string, string> {\n    const ranges = block.inlineStyleRanges.filter(\n      (inlineRange: CustomRawDraftInlineStyleRange) =>\n        inlineRange.offset <= index &&\n        index < inlineRange.offset + inlineRange.length,\n    );\n\n    const customFontSize: number | null = ranges.reduce(\n      (acc: number | null, range: any) => {\n        if (range.style.includes(TextCommand.FontSize)) {\n          return range.style.match(/\\d+/)?.[0];\n        }\n        return acc;\n      },\n      null,\n    );\n\n    // Sort to apply font size styles first and then override it by subscript/superscript styles\n    ranges.sort((_, nextRange) => {\n      return nextRange.style.includes(TextCommand.FontSize) ? 1 : -1;\n    });\n\n    return ranges.reduce(\n      (styles: any, textRange: CustomRawDraftInlineStyleRange) => {\n        const fontsz = customFontSize || options.fontszInPx;\n        const fontszsub = (customFontSize || options.fontszsubInPx) * 0.5;\n        switch (textRange.style) {\n          case TextCommand.Bold:\n            styles['font-weight'] = 'bold';\n            break;\n\n          case TextCommand.Italic:\n            styles['font-style'] = 'italic';\n            break;\n\n          case TextCommand.Subscript:\n            styles['font-size'] = fontszsub + 'px';\n            styles.shiftY = fontsz / 4;\n\n            break;\n\n          case TextCommand.Superscript:\n            styles['font-size'] = fontszsub + 'px';\n            styles.shiftY = -fontsz / 3;\n            break;\n\n          case `${TextCommand.FontSize}_${customFontSize}px`:\n            styles['font-size'] = customFontSize + 'px';\n            break;\n\n          default:\n        }\n\n        return styles;\n      },\n      {},\n    );\n  }\n}\n\nexport default ReText;\n","import { RaphaelPaper } from 'raphael';\nimport {\n  AttachmentPoints,\n  Bond,\n  RGroupAttachmentPoint,\n  RGroupAttachmentPointType,\n  Struct,\n  Vec2,\n} from 'domain/entities';\nimport { Scale } from 'domain/helpers';\nimport { ReAtom, ReObject, ReStruct } from '.';\nimport draw from '../draw';\nimport { Render } from '../raphaelRender';\nimport { RenderOptions, RenderOptionStyles } from '../render.types';\nimport { LayerMap } from './generalEnumTypes';\nimport Visel from './visel';\n\nclass ReRGroupAttachmentPoint extends ReObject {\n  item: RGroupAttachmentPoint;\n  reAtom: ReAtom;\n  lineDirectionVector: Vec2 = new Vec2();\n\n  static LINE_OUTLINE_WIDTH = 0.36;\n  static OUTLINE_PADDING = 0.15;\n  static CURVE_OUTLINE_WIDTH = 1.0;\n  static CURVE_OUTLINE_HEIGHT = 0.42;\n\n  constructor(item: RGroupAttachmentPoint, reAtom: ReAtom) {\n    super('rgroupAttachmentPoint');\n    this.item = item;\n    this.reAtom = reAtom;\n  }\n\n  get normalizedLineDirectionVector() {\n    return this.lineDirectionVector.normalized();\n  }\n\n  get normalizedCurveDirectionVector() {\n    return this.lineDirectionVector.rotate(Math.PI / 2).normalized();\n  }\n\n  get startPoint() {\n    return this.reAtom.a.pp;\n  }\n\n  get middlePoint() {\n    return this.outlineEndPoint.addScaled(\n      this.normalizedLineDirectionVector,\n      -ReRGroupAttachmentPoint.CURVE_OUTLINE_HEIGHT,\n    );\n  }\n\n  get endPoint() {\n    return this.startPoint.add(this.lineDirectionVector);\n  }\n\n  get outlineEndPoint() {\n    const length =\n      this.lineDirectionVector.length() +\n      ReRGroupAttachmentPoint.OUTLINE_PADDING;\n    return this.startPoint.addScaled(\n      this.normalizedLineDirectionVector,\n      length,\n    );\n  }\n\n  static isSelectable() {\n    return true;\n  }\n\n  getOutlinePoints(isHighlight = false) {\n    const highlightPadding = isHighlight ? -0.1 : 0;\n    const curveOutlineWidth =\n      ReRGroupAttachmentPoint.CURVE_OUTLINE_WIDTH + highlightPadding;\n    const lineOutlineWidth =\n      ReRGroupAttachmentPoint.LINE_OUTLINE_WIDTH + highlightPadding;\n\n    const topLeftPadPoint = this.outlineEndPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      -curveOutlineWidth / 2,\n    );\n    const topLeftPoint = topLeftPadPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      ReRGroupAttachmentPoint.OUTLINE_PADDING,\n    );\n    const topRightPadPoint = this.outlineEndPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      curveOutlineWidth / 2,\n    );\n    const topRightPoint = topRightPadPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      -ReRGroupAttachmentPoint.OUTLINE_PADDING,\n    );\n    const middleMostLeftPadPoint = this.middlePoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      -curveOutlineWidth / 2,\n    );\n    const middleMostLeftPoint = middleMostLeftPadPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      ReRGroupAttachmentPoint.OUTLINE_PADDING,\n    );\n    const middleMostRightPadPoint = this.middlePoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      curveOutlineWidth / 2,\n    );\n    const middleMostRightPoint = middleMostRightPadPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      -ReRGroupAttachmentPoint.OUTLINE_PADDING,\n    );\n    const middleLeftPoint = this.middlePoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      -lineOutlineWidth / 2,\n    );\n    const middleRightPoint = this.middlePoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      lineOutlineWidth / 2,\n    );\n    const bottomLeftPadPoint = this.startPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      -lineOutlineWidth / 2,\n    );\n    const bottomLeftPoint = bottomLeftPadPoint.addScaled(\n      this.normalizedLineDirectionVector,\n      ReRGroupAttachmentPoint.OUTLINE_PADDING,\n    );\n    const bottomRightPadPoint = this.startPoint.addScaled(\n      this.normalizedCurveDirectionVector,\n      lineOutlineWidth / 2,\n    );\n    const bottomRightPoint = bottomRightPadPoint.addScaled(\n      this.normalizedLineDirectionVector,\n      ReRGroupAttachmentPoint.OUTLINE_PADDING,\n    );\n\n    return [\n      topLeftPadPoint,\n      topLeftPoint,\n      topRightPoint,\n      topRightPadPoint,\n      middleMostRightPadPoint,\n      middleMostRightPoint,\n      middleRightPoint,\n      bottomRightPoint,\n      bottomRightPadPoint,\n      bottomLeftPadPoint,\n      bottomLeftPoint,\n      middleLeftPoint,\n      middleMostLeftPoint,\n      middleMostLeftPadPoint,\n    ] as const;\n  }\n\n  getDistanceTo(destination: Vec2) {\n    return Vec2.dist(destination, this.middlePoint);\n  }\n\n  private makeHighlightePlate = (\n    restruct: ReStruct,\n    style: RenderOptionStyles,\n  ) => {\n    const { paper, options } = restruct.render;\n    const hoverPlatePath = this.getHoverPlatePath(options, true);\n    return paper.path(hoverPlatePath).attr(options.selectionStyle).attr(style);\n  };\n\n  show(restruct: ReStruct, rgroupAttachmentPointId: number) {\n    const directionVector = this.getAttachmentPointDirectionVector(\n      restruct.molecule,\n    );\n\n    if (!directionVector) {\n      return;\n    }\n    this.lineDirectionVector = directionVector;\n\n    showAttachmentPointShape(\n      this.reAtom,\n      restruct.render,\n      directionVector,\n      restruct.addReObjectPath.bind(restruct),\n      this.visel,\n    );\n\n    const showLabel = isAttachmentPointLabelRequired(restruct);\n    if (showLabel) {\n      // in case of isTrisectionRequired (trisection case) we should show labels '1' and '2' for those separated vectors\n      const labelText = this.item.type === 'primary' ? '1' : '2';\n      showAttachmentPointLabel(\n        this.reAtom,\n        restruct.render,\n        directionVector,\n        restruct.addReObjectPath.bind(restruct),\n        labelText,\n        this.visel,\n      );\n    }\n    const highlights = restruct.molecule.highlights;\n    let isHighlighted = false;\n    let highlightColor = '';\n    highlights.forEach((highlight) => {\n      const hasCurrentHighlight = highlight.rgroupAttachmentPoints?.includes(\n        rgroupAttachmentPointId,\n      );\n      isHighlighted = isHighlighted || hasCurrentHighlight;\n      if (hasCurrentHighlight) {\n        highlightColor = highlight.color;\n      }\n    });\n    if (isHighlighted) {\n      const style = { fill: highlightColor, stroke: 'none' };\n      const path = this.makeHighlightePlate(restruct, style);\n      restruct.addReObjectPath(LayerMap.hovering, this.visel, path);\n    }\n  }\n\n  private getHoverPlatePath(options: RenderOptions, isHighlight = false) {\n    const outlinePoints = this.getOutlinePoints(isHighlight);\n    const scaledOutlinePoints = outlinePoints.map((point) =>\n      Scale.modelToCanvas(point, options),\n    );\n    const [\n      topLeftPadPoint,\n      topLeftPoint,\n      topRightPoint,\n      topRightPadPoint,\n      middleMostRightPadPoint,\n      middleMostRightPoint,\n      middleRightPoint,\n      bottomRightPoint,\n      bottomRightPadPoint,\n      bottomLeftPadPoint,\n      bottomLeftPoint,\n      middleLeftPoint,\n      middleMostLeftPoint,\n      middleMostLeftPadPoint,\n    ] = scaledOutlinePoints;\n\n    // Docs: ketcher-core/docs/data/hover_selection_rgroup_attachment_point.png\n    const pathString = `\n      M ${topLeftPoint.x} ${topLeftPoint.y}\n      L ${topRightPoint.x} ${topRightPoint.y}\n      C ${topRightPadPoint.x} ${topRightPadPoint.y}, ${middleMostRightPadPoint.x} ${middleMostRightPadPoint.y}, ${middleMostRightPoint.x} ${middleMostRightPoint.y}\n      L ${middleRightPoint.x} ${middleRightPoint.y}\n      L ${bottomRightPoint.x} ${bottomRightPoint.y}\n      C ${bottomRightPadPoint.x} ${bottomRightPadPoint.y}, ${bottomLeftPadPoint.x} ${bottomLeftPadPoint.y}, ${bottomLeftPoint.x} ${bottomLeftPoint.y}\n      L ${middleLeftPoint.x} ${middleLeftPoint.y}\n      L ${middleMostLeftPoint.x} ${middleMostLeftPoint.y}\n      C ${middleMostLeftPadPoint.x} ${middleMostLeftPadPoint.y}, ${topLeftPadPoint.x} ${topLeftPadPoint.y}, ${topLeftPoint.x} ${topLeftPoint.y}\n    `;\n    return pathString;\n  }\n\n  makeHoverPlate(render: Render) {\n    const hoverPlatePath = this.getHoverPlatePath(render.options);\n    return render.paper.path(hoverPlatePath).attr(render.options.hoverStyle);\n  }\n\n  makeSelectionPlate(\n    _restruct: ReStruct,\n    paper: RaphaelPaper,\n    options: RenderOptions,\n  ) {\n    const hoverPlatePath = this.getHoverPlatePath(options);\n    return paper.path(hoverPlatePath).attr(options.selectionStyle);\n  }\n\n  drawHover(render: Render) {\n    const hoverPlate = this.makeHoverPlate(render);\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, hoverPlate);\n    return hoverPlate;\n  }\n\n  private getAttachmentPointDirectionVector(struct: Struct) {\n    if (!this.reAtom.hasAttachmentPoint()) {\n      return;\n    }\n    if (this.isTrisectionAttachmentPoint()) {\n      return trisectionLargestSector(this.reAtom, struct, this.item.type);\n    } else {\n      const hasOnlyOneBond = this.reAtom.a.neighbors.length === 1;\n      const directionVector = hasOnlyOneBond\n        ? getAttachmentDirectionForOnlyOneBond(this.reAtom, struct)\n        : this.reAtom.bisectLargestSector(struct);\n      return directionVector;\n    }\n  }\n\n  private isTrisectionAttachmentPoint(): boolean {\n    // in this case we should split the attachment point vector to two vectors\n    return this.reAtom.a.attachmentPoints === AttachmentPoints.BothSides;\n  }\n}\n\nfunction showAttachmentPointShape(\n  atom: ReAtom,\n  { options, paper }: Render,\n  directionVector: Vec2,\n  addReObjectPath: InstanceType<typeof ReStruct>['addReObjectPath'],\n  visel: Visel,\n): void {\n  const atomPositionVector = Scale.modelToCanvas(atom.a.pp, options);\n  const shiftedAtomPositionVector = atom.getShiftedSegmentPosition(\n    options,\n    directionVector,\n  );\n  const attachmentPointEnd = atomPositionVector.addScaled(\n    directionVector,\n    options.microModeScale * 0.85,\n  );\n\n  const resultShape = draw.rgroupAttachmentPoint(\n    paper,\n    shiftedAtomPositionVector,\n    attachmentPointEnd,\n    directionVector,\n    options,\n  );\n\n  addReObjectPath(\n    LayerMap.indices,\n    visel,\n    resultShape,\n    atomPositionVector,\n    true,\n  );\n}\n\nfunction trisectionLargestSector(\n  atom: ReAtom,\n  struct: Struct,\n  attachmentPointType: RGroupAttachmentPointType,\n) {\n  const { largestAngle, neighborAngle } =\n    atom.getLargestSectorFromNeighbors(struct);\n  const firstTrisectorAngle = neighborAngle + largestAngle / 3;\n  const secondTrisectorAngle = neighborAngle + (largestAngle * 2) / 3;\n\n  return attachmentPointType === 'primary'\n    ? newVectorFromAngle(firstTrisectorAngle)\n    : newVectorFromAngle(secondTrisectorAngle);\n}\n\nfunction newVectorFromAngle(angle: number): Vec2 {\n  return new Vec2(Math.cos(angle), Math.sin(angle));\n}\n\nfunction isAttachmentPointLabelRequired(restruct: ReStruct) {\n  return restruct.molecule.atoms.some(\n    ({ attachmentPoints }) =>\n      attachmentPoints === AttachmentPoints.SecondSideOnly ||\n      attachmentPoints === AttachmentPoints.BothSides,\n  );\n}\n\nfunction getAttachmentDirectionForOnlyOneBond(\n  atom: ReAtom,\n  struct: Struct,\n): Vec2 {\n  const DEGREE_120_FOR_ONE_BOND = (2 * Math.PI) / 3;\n  const DEGREE_180_FOR_TRIPLE_BOND = Math.PI;\n  const onlyNeighbor = atom.a.neighbors[0];\n  // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n  const neighbour = struct.halfBonds.get(onlyNeighbor)!;\n  const angle = neighbour.ang;\n  const isTripleBond =\n    struct.bonds.get(neighbour.bid)?.type === Bond.PATTERN.TYPE.TRIPLE;\n  const finalAngle =\n    angle +\n    (isTripleBond ? DEGREE_180_FOR_TRIPLE_BOND : DEGREE_120_FOR_ONE_BOND);\n  return newVectorFromAngle(finalAngle);\n}\n\nfunction showAttachmentPointLabel(\n  atom: ReAtom,\n  { options, paper }: Render,\n  directionVector: Vec2,\n  addReObjectPath: InstanceType<typeof ReStruct>['addReObjectPath'],\n  labelText: string,\n  visel: Visel,\n): void {\n  const atomPositionVector = Scale.modelToCanvas(atom.a.pp, options);\n  const labelPosition = getLabelPositionForAttachmentPoint(\n    atomPositionVector,\n    directionVector,\n    options.microModeScale,\n  );\n  const labelPath = draw.rgroupAttachmentPointLabel(\n    paper,\n    labelPosition,\n    labelText,\n    options,\n    atom.color,\n  );\n  addReObjectPath(LayerMap.indices, visel, labelPath, atomPositionVector, true);\n}\n\nfunction getLabelPositionForAttachmentPoint(\n  atomPositionVector: Vec2,\n  directionVector: Vec2,\n  shapeHeight: number,\n): Vec2 {\n  const normal = directionVector.rotateSC(1, 0);\n  return atomPositionVector\n    .addScaled(normal, 0.17 * shapeHeight)\n    .addScaled(directionVector, shapeHeight * 0.7);\n}\n\nexport { ReRGroupAttachmentPoint };\n","import { LayerMap, ReObject, ReStruct } from 'application/render/restruct';\nimport {\n  Image,\n  ImageReferenceName,\n  ImageReferencePositionInfo,\n} from 'domain/entities/image';\nimport { RenderOptions } from 'application/render/render.types';\nimport { Scale } from 'domain/helpers';\nimport { RaphaelPaper, RaphaelSet } from 'raphael';\nimport { Box2Abs, Vec2 } from 'domain/entities';\nimport draw from 'application/render/draw';\nimport { IMAGE_KEY } from 'domain/constants';\nimport { Render } from 'application/render';\n\ntype GetReferencePositions = ReturnType<Image['getReferencePositions']>;\nconst REFERENCE_POINT_LINE_WIDTH_MULTIPLIER = 0.4;\n\ninterface ClosestReferencePosition {\n  distance: number;\n  ref: ImageReferencePositionInfo | null;\n}\n\nexport class ReImage extends ReObject {\n  private selectionPointsSet: RaphaelSet;\n\n  static isSelectable(): boolean {\n    return true;\n  }\n\n  constructor(public image: Image) {\n    super(IMAGE_KEY);\n  }\n\n  private getScaledPointWithOffset(\n    originalPoint: Vec2,\n    renderOptions: RenderOptions,\n  ): Vec2 {\n    const scaledPoint: Vec2 = Scale.modelToCanvas(originalPoint, renderOptions);\n    return scaledPoint.add(renderOptions.offset);\n  }\n\n  private getScale(renderOptions: RenderOptions) {\n    return renderOptions.microModeScale / 8;\n  }\n\n  private getDimensions(renderOptions: RenderOptions): Vec2 {\n    return Vec2.diff(\n      this.getScaledPointWithOffset(\n        this.image.getBottomRightPosition(),\n        renderOptions,\n      ),\n      this.getScaledPointWithOffset(\n        this.image.getTopLeftPosition(),\n        renderOptions,\n      ),\n    );\n  }\n\n  private getSelectionReferencePositions(\n    renderOptions: RenderOptions,\n  ): GetReferencePositions {\n    // We need just one additional pixel for selection dots to not overlap with image\n    const scale = this.getScale(renderOptions) + 1;\n    const [\n      topLeftPosition,\n      topRightPosition,\n      bottomRightPosition,\n      bottomLeftPosition,\n    ] = this.image\n      .getCornerPositions()\n      .map((position) => Scale.modelToCanvas(position, renderOptions));\n    const selectionTopLeftPosition = topLeftPosition.sub(\n      new Vec2(scale, scale),\n    );\n    const selectionTopRightPosition = topRightPosition.add(\n      new Vec2(scale, -1 * scale),\n    );\n    const selectionBottomRightPosition = bottomRightPosition.add(\n      new Vec2(scale, scale),\n    );\n    const selectionBottomLeftPosition = bottomLeftPosition.add(\n      new Vec2(-1 * scale, scale),\n    );\n\n    return {\n      topLeftPosition: selectionTopLeftPosition,\n      topMiddlePosition: Vec2.centre(\n        selectionTopLeftPosition,\n        selectionTopRightPosition,\n      ),\n      topRightPosition: selectionTopRightPosition,\n      rightMiddlePosition: Vec2.centre(\n        selectionTopRightPosition,\n        selectionBottomRightPosition,\n      ),\n      bottomRightPosition: selectionBottomRightPosition,\n      bottomMiddlePosition: Vec2.centre(\n        selectionBottomLeftPosition,\n        selectionBottomRightPosition,\n      ),\n      bottomLeftPosition: selectionBottomLeftPosition,\n      leftMiddlePosition: Vec2.centre(\n        selectionTopLeftPosition,\n        selectionBottomLeftPosition,\n      ),\n    };\n  }\n\n  private drawSelectionLine(\n    paper: RaphaelPaper,\n    renderOptions: RenderOptions,\n  ): RaphaelSet {\n    const selectionSet = paper.set();\n    const scale = this.getScale(renderOptions);\n    const {\n      topLeftPosition,\n      topRightPosition,\n      bottomRightPosition,\n      bottomLeftPosition,\n    } = this.getSelectionReferencePositions(renderOptions);\n    const polygon = [\n      topLeftPosition,\n      topRightPosition,\n      bottomRightPosition,\n      bottomLeftPosition,\n    ];\n    const styleOptions = renderOptions.selectionStyleSimpleObject;\n    const strokeWidth =\n      Number(styleOptions['stroke-width']) +\n      scale * REFERENCE_POINT_LINE_WIDTH_MULTIPLIER;\n\n    selectionSet.push(\n      draw.selectionPolygon(paper, polygon, renderOptions).attr({\n        ...renderOptions.selectionStyleSimpleObject,\n        'stroke-linecap': 'square',\n        'stroke-width': strokeWidth,\n      }),\n    );\n    return selectionSet;\n  }\n\n  private drawSelectionPoints(\n    reStruct: ReStruct,\n    paper: RaphaelPaper,\n    renderOptions: RenderOptions,\n  ) {\n    this.selectionPointsSet = paper.set();\n    const scale = this.getScale(renderOptions);\n    const strokeWidth = scale * REFERENCE_POINT_LINE_WIDTH_MULTIPLIER;\n    const selectionReferencePositions = Object.entries(\n      this.getSelectionReferencePositions(renderOptions),\n    );\n    selectionReferencePositions.forEach(([key, { x, y }]) => {\n      const element = paper.circle(x, y, scale).attr({\n        fill: 'none',\n        'stroke-width': strokeWidth,\n      });\n      if (element.node && element.node.setAttribute) {\n        element.node.setAttribute('data-testid', `imageResize-${key}`);\n      }\n\n      this.selectionPointsSet.push(element);\n    });\n    reStruct.addReObjectPath(\n      LayerMap.selectionPoints,\n      this.visel,\n      this.selectionPointsSet,\n    );\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  show(restruct: ReStruct, renderOptions: RenderOptions, nextPath?: any) {\n    const scaledTopLeftWithOffset = this.getScaledPointWithOffset(\n      this.image.getTopLeftPosition(),\n      renderOptions,\n    );\n    const dimensions = this.getDimensions(renderOptions);\n\n    const image = restruct.render.paper.image(\n      this.image.bitmap,\n      scaledTopLeftWithOffset.x,\n      scaledTopLeftWithOffset.y,\n      dimensions.x,\n      dimensions.y,\n    );\n    restruct.addReObjectPath(LayerMap.images, this.visel, image);\n\n    if (nextPath) {\n      image.insertBefore(nextPath);\n    }\n  }\n\n  drawHover(render: Render) {\n    const offset =\n      this.getScale(render.options) *\n      (1 + REFERENCE_POINT_LINE_WIDTH_MULTIPLIER);\n    const STROKE_WIDTH = 0.6;\n    const FILL_WIDTH = 2 * offset - STROKE_WIDTH;\n    const { topLeftPosition, bottomRightPosition } =\n      this.getSelectionReferencePositions(render.options);\n    const outerBorderOffset = new Vec2(offset, offset);\n    const topLeftCorner = topLeftPosition.sub(outerBorderOffset);\n    const dimensions = bottomRightPosition.sub(topLeftPosition);\n    const dimensionsWithBorders = dimensions.add(outerBorderOffset.scaled(2));\n\n    const paths = [\n      render.paper\n        .rect(\n          topLeftCorner.x,\n          topLeftCorner.y,\n          dimensionsWithBorders.x,\n          dimensionsWithBorders.y,\n        )\n        .attr({ ...render.options.hoverStyle, fill: 'none' }),\n      render.paper\n        .rect(topLeftPosition.x, topLeftPosition.y, dimensions.x, dimensions.y)\n        .attr({\n          ...render.options.innerHoverStyle,\n          'stroke-width': FILL_WIDTH,\n        }),\n    ];\n\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, paths);\n\n    return paths;\n  }\n\n  makeSelectionPlate(\n    reStruct: ReStruct,\n    paper: RaphaelPaper,\n    options: RenderOptions,\n  ) {\n    this.drawSelectionPoints(reStruct, paper, options);\n    return this.drawSelectionLine(paper, options);\n  }\n\n  getVBoxObj(): Box2Abs | null {\n    return new Box2Abs(\n      this.image.getTopLeftPosition(),\n      this.image.getBottomRightPosition(),\n    );\n  }\n\n  togglePoints(displayFlag: boolean) {\n    displayFlag\n      ? this.selectionPointsSet?.show()\n      : this.selectionPointsSet?.hide();\n  }\n\n  calculateDistanceToPoint(point: Vec2, renderOptions: RenderOptions): number {\n    if (this.isPointInsidePolygon(point, renderOptions)) {\n      return 0;\n    }\n    const {\n      topLeftPosition,\n      topRightPosition,\n      bottomRightPosition,\n      bottomLeftPosition,\n    } = this.getSelectionReferencePositions(renderOptions);\n\n    return Math.min(\n      point.calculateDistanceToLine([topLeftPosition, topRightPosition]),\n      point.calculateDistanceToLine([topRightPosition, bottomRightPosition]),\n      point.calculateDistanceToLine([bottomRightPosition, bottomLeftPosition]),\n      point.calculateDistanceToLine([bottomLeftPosition, topLeftPosition]),\n    );\n  }\n\n  calculateClosestReferencePosition(\n    point: Vec2,\n    renderOptions: RenderOptions,\n  ): ClosestReferencePosition {\n    const entries = Object.entries(\n      this.getSelectionReferencePositions(renderOptions),\n    ) as Array<[ImageReferenceName, Vec2]>;\n    return entries.reduce(\n      (acc, [key, position]) => {\n        const offset = Vec2.diff(position, point);\n        const distance = offset.length();\n        if (distance < acc.distance) {\n          return {\n            distance,\n            ref: {\n              name: key,\n              offset: Scale.canvasToModel(offset, renderOptions),\n            },\n          };\n        } else {\n          return acc;\n        }\n      },\n      {\n        ref: null,\n        distance: Number.POSITIVE_INFINITY,\n      } as ClosestReferencePosition,\n    );\n  }\n\n  isPointInsidePolygon(point: Vec2, renderOptions: RenderOptions): boolean {\n    const referencePositions =\n      this.getSelectionReferencePositions(renderOptions);\n\n    return point.isInsidePolygon([\n      referencePositions.topLeftPosition,\n      referencePositions.topRightPosition,\n      referencePositions.bottomRightPosition,\n      referencePositions.bottomLeftPosition,\n    ]);\n  }\n}\n","import { BaseMicromoleculeEntity } from 'domain/entities/BaseMicromoleculeEntity';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { Pool } from 'domain/entities/pool';\nimport { getNodeWithInvertedYCoord, KetFileNode } from 'domain/serializers';\nimport { MULTITAIL_ARROW_SERIALIZE_KEY } from 'domain/constants';\nimport { FixedPrecisionCoordinates } from 'domain/entities';\n\nexport type Line = [Vec2, Vec2];\n\nexport interface MultitailArrowsReferencePositions {\n  head: Vec2;\n  topTail: Vec2;\n  bottomTail: Vec2;\n  topSpine: Vec2;\n  bottomSpine: Vec2;\n  tails: Pool<Vec2>;\n}\n\nenum MultitailValidationErrors {\n  INCORRECT_SPINE = 'INCORRECT_SPINE',\n  INCORRECT_HEAD = 'INCORRECT_HEAD',\n  INCORRECT_TAILS = 'INCORRECT_TAILS',\n}\n\nexport type MultitailArrowReferencePositionsNames =\n  keyof MultitailArrowsReferencePositions;\n\nexport interface MultitailArrowsReferenceLines {\n  head: Line;\n  topTail: Line;\n  bottomTail: Line;\n  spine: Line;\n  tails: Pool<Line>;\n}\n\nexport type MultitailArrowReferenceLinesNames =\n  keyof MultitailArrowsReferenceLines;\n\nexport interface KetFileMultitailArrowNode {\n  head: {\n    position: Vec2;\n  };\n  spine: {\n    pos: [Vec2, Vec2];\n  };\n  tails: {\n    pos: Array<Vec2>;\n  };\n  zOrder: 0;\n}\n\ninterface TailDistance {\n  distance: number;\n  center: number;\n}\n\nexport class MultitailArrow extends BaseMicromoleculeEntity {\n  static KET_MIN_DISTANCE =\n    FixedPrecisionCoordinates.fromFloatingPrecision(0.01);\n\n  static MIN_TAIL_DISTANCE =\n    FixedPrecisionCoordinates.fromFloatingPrecision(0.35);\n\n  static MIN_HEAD_LENGTH = FixedPrecisionCoordinates.fromFloatingPrecision(0.5);\n  static MIN_TAIL_LENGTH = FixedPrecisionCoordinates.fromFloatingPrecision(0.4);\n  static MIN_TOP_BOTTOM_OFFSET =\n    FixedPrecisionCoordinates.fromFloatingPrecision(0.15);\n\n  static MIN_HEIGHT = FixedPrecisionCoordinates.fromFloatingPrecision(0.5);\n  static TOP_TAIL_NAME = 'topTail';\n  static BOTTOM_TAIL_NAME = 'bottomTail';\n  static TAILS_NAME = 'tails';\n\n  static canAddTail(distance: TailDistance['distance']): boolean {\n    return (\n      distance >=\n      MultitailArrow.MIN_TAIL_DISTANCE.multiply(2).getFloatingPrecision()\n    );\n  }\n\n  static fromTwoPoints(topLeft: Vec2, bottomRight: Vec2) {\n    const center = Vec2.centre(topLeft, bottomRight);\n    const tailLength = FixedPrecisionCoordinates.fromFloatingPrecision(\n      Math.max(\n        (bottomRight.x - topLeft.x) / 3,\n        MultitailArrow.MIN_TAIL_LENGTH.getFloatingPrecision(),\n      ),\n    );\n    const topSpineX = FixedPrecisionCoordinates.fromFloatingPrecision(\n      topLeft.x,\n    ).add(tailLength);\n    const topSpineY = FixedPrecisionCoordinates.fromFloatingPrecision(\n      topLeft.y,\n    );\n    const height = FixedPrecisionCoordinates.fromFloatingPrecision(\n      Math.max(\n        bottomRight.y - topLeft.y,\n        MultitailArrow.MIN_HEIGHT.getFloatingPrecision(),\n      ),\n    );\n    const headOffsetX = FixedPrecisionCoordinates.fromFloatingPrecision(\n      bottomRight.x,\n    ).sub(topSpineX);\n    const headOffsetY = FixedPrecisionCoordinates.fromFloatingPrecision(\n      center.y,\n    ).sub(topSpineY);\n\n    return new MultitailArrow(\n      topSpineX,\n      topSpineY,\n      height,\n      headOffsetX,\n      headOffsetY,\n      tailLength,\n      new Pool<FixedPrecisionCoordinates>(),\n    );\n  }\n\n  static validateKetNode(\n    ketFileData: KetFileMultitailArrowNode,\n  ): string | null {\n    const { head, spine, tails } = ketFileData;\n    const [spineStart, spineEnd] = spine.pos;\n    const spineStartX = FixedPrecisionCoordinates.fromFloatingPrecision(\n      spineStart.x,\n    );\n    const spineStartY = FixedPrecisionCoordinates.fromFloatingPrecision(\n      spineStart.y,\n    );\n    const spineEndX = FixedPrecisionCoordinates.fromFloatingPrecision(\n      spineEnd.x,\n    );\n    const spineEndY = FixedPrecisionCoordinates.fromFloatingPrecision(\n      spineEnd.y,\n    );\n    const headX = FixedPrecisionCoordinates.fromFloatingPrecision(\n      head.position.x,\n    );\n    const headY = FixedPrecisionCoordinates.fromFloatingPrecision(\n      head.position.y,\n    );\n    const tailsFixedPrecision = tails.pos\n      .map((tail) => ({\n        x: FixedPrecisionCoordinates.fromFloatingPrecision(tail.x),\n        y: FixedPrecisionCoordinates.fromFloatingPrecision(tail.y),\n      }))\n      .sort((a, b) => b.y.value - a.y.value);\n\n    if (\n      spineStartX.value !== spineEndX.value ||\n      spineStartY.value < spineEndY.sub(MultitailArrow.KET_MIN_DISTANCE).value\n    ) {\n      return MultitailValidationErrors.INCORRECT_SPINE;\n    }\n    if (\n      headX.value < spineStartX.add(MultitailArrow.KET_MIN_DISTANCE).value ||\n      headY.sub(MultitailArrow.KET_MIN_DISTANCE).value < spineEndY.value ||\n      headY.add(MultitailArrow.KET_MIN_DISTANCE).value > spineStartY.value\n    ) {\n      return MultitailValidationErrors.INCORRECT_HEAD;\n    }\n    if (\n      tailsFixedPrecision.at(0)?.y.value !== spineStartY.value ||\n      tailsFixedPrecision.at(-1)?.y.value !== spineEndY.value\n    ) {\n      return MultitailValidationErrors.INCORRECT_TAILS;\n    }\n\n    const firstTailX = tailsFixedPrecision[0].x;\n    if (\n      firstTailX.value > spineStartX.sub(MultitailArrow.KET_MIN_DISTANCE).value\n    ) {\n      return MultitailValidationErrors.INCORRECT_TAILS;\n    }\n\n    const result = tailsFixedPrecision.every((tail, index, allTails) => {\n      if (\n        index > 0 &&\n        allTails[index - 1].y.value <\n          tail.y.add(MultitailArrow.KET_MIN_DISTANCE).value\n      ) {\n        return false;\n      }\n\n      return (\n        tail.x.value === firstTailX.value &&\n        tail.y.value >= spineEndY.value &&\n        tail.y.value <= spineStartY.value\n      );\n    });\n\n    return !result ? MultitailValidationErrors.INCORRECT_TAILS : null;\n  }\n\n  static fromKetNode(ketFileNode: KetFileNode<KetFileMultitailArrowNode>) {\n    const data = getNodeWithInvertedYCoord(\n      ketFileNode.data,\n    ) as KetFileMultitailArrowNode;\n    const [spineStart, spineEnd] = data.spine.pos;\n    const head = data.head.position;\n    const spineTopX = FixedPrecisionCoordinates.fromFloatingPrecision(\n      spineStart.x,\n    );\n    const spineTopY = FixedPrecisionCoordinates.fromFloatingPrecision(\n      spineStart.y,\n    );\n    const height = FixedPrecisionCoordinates.fromFloatingPrecision(\n      spineEnd.y,\n    ).sub(spineTopY);\n    const headOffsetX = FixedPrecisionCoordinates.fromFloatingPrecision(\n      head.x,\n    ).sub(spineTopX);\n    const headOffsetY = FixedPrecisionCoordinates.fromFloatingPrecision(\n      head.y,\n    ).sub(spineTopY);\n\n    const tailsYOffset = new Pool<FixedPrecisionCoordinates>();\n    const tails = data.tails.pos.sort((a, b) => a.y - b.y);\n    const tailsLength = spineTopX.sub(\n      FixedPrecisionCoordinates.fromFloatingPrecision(tails[0].x),\n    );\n    tails.slice(1, -1).forEach((tail) => {\n      tailsYOffset.add(\n        FixedPrecisionCoordinates.fromFloatingPrecision(tail.y).sub(spineTopY),\n      );\n    });\n\n    return new MultitailArrow(\n      spineTopX,\n      spineTopY,\n      height,\n      headOffsetX,\n      headOffsetY,\n      tailsLength,\n      tailsYOffset,\n    );\n  }\n\n  static fromFloatingPointCoordinates(\n    spineTop: Vec2,\n    height: number,\n    headOffset: Vec2,\n    tailLength: number,\n    tailsYOffset: Pool<number>,\n  ) {\n    const tailsYOffsetFixedPrecision = tailsYOffset.clone();\n    tailsYOffsetFixedPrecision.forEach((item, key, map) => {\n      const pool = map as unknown as Pool<FixedPrecisionCoordinates>;\n      pool.set(key, FixedPrecisionCoordinates.fromFloatingPrecision(item));\n    });\n    return new MultitailArrow(\n      FixedPrecisionCoordinates.fromFloatingPrecision(spineTop.x),\n      FixedPrecisionCoordinates.fromFloatingPrecision(spineTop.y),\n      FixedPrecisionCoordinates.fromFloatingPrecision(height),\n      FixedPrecisionCoordinates.fromFloatingPrecision(headOffset.x),\n      FixedPrecisionCoordinates.fromFloatingPrecision(headOffset.y),\n      FixedPrecisionCoordinates.fromFloatingPrecision(tailLength),\n      tailsYOffsetFixedPrecision as unknown as Pool<FixedPrecisionCoordinates>,\n    );\n  }\n\n  constructor(\n    private spineTopX: FixedPrecisionCoordinates,\n    private spineTopY: FixedPrecisionCoordinates,\n    private height: FixedPrecisionCoordinates,\n    private headOffsetX: FixedPrecisionCoordinates,\n    private headOffsetY: FixedPrecisionCoordinates,\n    private tailLength: FixedPrecisionCoordinates,\n    private tailsYOffset: Pool<FixedPrecisionCoordinates>,\n  ) {\n    super();\n  }\n\n  getReferencePositions(): MultitailArrowsReferencePositions {\n    const tailX = this.spineTopX.sub(this.tailLength);\n    const bottomY = this.spineTopY.add(this.height);\n    const tails = new Pool<Vec2>();\n    this.tailsYOffset.forEach((tailYOffset, key) => {\n      tails.set(\n        key,\n        new Vec2(\n          tailX.getFloatingPrecision(),\n          this.spineTopY.add(tailYOffset).getFloatingPrecision(),\n        ),\n      );\n    });\n\n    return {\n      head: new Vec2(\n        this.spineTopX.add(this.headOffsetX).getFloatingPrecision(),\n        this.spineTopY.add(this.headOffsetY).getFloatingPrecision(),\n      ),\n      topTail: new Vec2(\n        tailX.getFloatingPrecision(),\n        this.spineTopY.getFloatingPrecision(),\n      ),\n      bottomTail: new Vec2(\n        tailX.getFloatingPrecision(),\n        bottomY.getFloatingPrecision(),\n      ),\n      topSpine: new Vec2(\n        this.spineTopX.getFloatingPrecision(),\n        this.spineTopY.getFloatingPrecision(),\n      ),\n      bottomSpine: new Vec2(\n        this.spineTopX.getFloatingPrecision(),\n        bottomY.getFloatingPrecision(),\n      ),\n      tails,\n    };\n  }\n\n  getReferencePositionsArray(): Array<Vec2> {\n    const { tails, ...positions } = this.getReferencePositions();\n    return Object.values(positions).concat(Array.from(tails.values()));\n  }\n\n  getReferenceLines(\n    referencePositions: MultitailArrowsReferencePositions,\n  ): MultitailArrowsReferenceLines {\n    const spineX = referencePositions.topSpine.x;\n    const headSpinePosition = new Vec2(spineX, referencePositions.head.y);\n    const tails = new Pool<Line>();\n    referencePositions.tails.forEach((tail, key) => {\n      tails.set(key, [tail, new Vec2(spineX, tail.y)]);\n    });\n\n    return {\n      topTail: [referencePositions.topTail, referencePositions.topSpine],\n      bottomTail: [\n        referencePositions.bottomTail,\n        referencePositions.bottomSpine,\n      ],\n      spine: [referencePositions.topSpine, referencePositions.bottomSpine],\n      head: [headSpinePosition, referencePositions.head],\n      tails,\n    };\n  }\n\n  getTailsDistance(\n    tailsYOffsets: Array<FixedPrecisionCoordinates>,\n  ): Array<TailDistance> {\n    const allTailsOffsets = tailsYOffsets\n      .concat([new FixedPrecisionCoordinates(0), this.height])\n      .sort((a, b) => a.sub(b).getFloatingPrecision());\n    return allTailsOffsets.reduce(\n      (acc: Array<TailDistance>, item, index, array) => {\n        if (index === 0) {\n          return acc;\n        }\n        const distance = item.sub(array[index - 1]);\n        const centerFloatingPoint = item.sub(distance.divide(2));\n        return acc.concat({\n          distance: distance.getFloatingPrecision(),\n          center: centerFloatingPoint.getFloatingPrecision(),\n        });\n      },\n      [],\n    );\n  }\n\n  getTailsMaxDistance(): TailDistance {\n    return this.getTailsDistance(Array.from(this.tailsYOffset.values())).reduce(\n      (acc: TailDistance, item) => {\n        return item.distance > acc.distance ? item : acc;\n      },\n      { distance: 0, center: 0 },\n    );\n  }\n\n  getTailCoordinate(id: number): FixedPrecisionCoordinates | undefined {\n    return this.tailsYOffset.get(id);\n  }\n\n  addTail(id?: number, coordinate?: FixedPrecisionCoordinates): number {\n    // Coordinate can only be present for undo\\redo\n    if (typeof id === 'number' && coordinate) {\n      this.tailsYOffset.set(id, coordinate);\n      return id;\n    }\n    const { center, distance } = this.getTailsMaxDistance();\n    if (!MultitailArrow.canAddTail(distance)) {\n      throw new Error('Cannot add tail because no minimal distance found');\n    }\n    const centerFixedPrecision =\n      FixedPrecisionCoordinates.fromFloatingPrecision(center);\n    if (typeof id === 'number') {\n      this.tailsYOffset.set(id, centerFixedPrecision);\n      return id;\n    } else {\n      return this.tailsYOffset.add(centerFixedPrecision);\n    }\n  }\n\n  removeTail(id: number) {\n    this.tailsYOffset.delete(id);\n  }\n\n  center(): Vec2 {\n    return Vec2.centre(\n      new Vec2(\n        this.spineTopX.sub(this.tailLength).getFloatingPrecision(),\n        this.spineTopY.getFloatingPrecision(),\n      ),\n      new Vec2(\n        this.spineTopX.add(this.headOffsetX).getFloatingPrecision(),\n        this.spineTopY.add(this.height).getFloatingPrecision(),\n      ),\n    );\n  }\n\n  clone(): MultitailArrow {\n    return new MultitailArrow(\n      this.spineTopX,\n      this.spineTopY,\n      this.height,\n      this.headOffsetX,\n      this.headOffsetY,\n      this.tailLength,\n      this.tailsYOffset,\n    );\n  }\n\n  rescaleSize(scale: number) {\n    this.spineTopX = this.spineTopX.multiply(scale);\n    this.spineTopY = this.spineTopY.multiply(scale);\n    this.headOffsetX = this.headOffsetX.multiply(scale);\n    this.headOffsetY = this.headOffsetY.multiply(scale);\n    this.height = this.height.multiply(scale);\n    this.tailLength = this.tailLength.multiply(scale);\n    this.tailsYOffset.forEach((item, index) => {\n      this.tailsYOffset.set(index, item.multiply(scale));\n    });\n  }\n\n  resizeHead(offset: number): number {\n    const fixedPrecisionOffset =\n      FixedPrecisionCoordinates.fromFloatingPrecision(offset);\n    const headOffsetX = new FixedPrecisionCoordinates(\n      Math.max(\n        this.headOffsetX.add(fixedPrecisionOffset).value,\n        MultitailArrow.MIN_HEAD_LENGTH.value,\n      ),\n    );\n    const realOffset = headOffsetX.sub(this.headOffsetX);\n    this.headOffsetX = headOffsetX;\n    return realOffset.getFloatingPrecision();\n  }\n\n  moveHead(offset: number): number {\n    const fixedPrecisionOffset =\n      FixedPrecisionCoordinates.fromFloatingPrecision(offset);\n    const headOffsetY = new FixedPrecisionCoordinates(\n      Math.min(\n        Math.max(\n          MultitailArrow.MIN_TOP_BOTTOM_OFFSET.value,\n          this.headOffsetY.add(fixedPrecisionOffset).value,\n        ),\n        this.height.sub(MultitailArrow.MIN_TOP_BOTTOM_OFFSET).value,\n      ),\n    );\n    const realOffset = headOffsetY.sub(this.headOffsetY);\n    this.headOffsetY = headOffsetY;\n    return realOffset.getFloatingPrecision();\n  }\n\n  resizeTails(offset: number): number {\n    const fixedPrecisionOffset =\n      FixedPrecisionCoordinates.fromFloatingPrecision(offset);\n    const updatedLength = new FixedPrecisionCoordinates(\n      Math.max(\n        this.tailLength.sub(fixedPrecisionOffset).value,\n        MultitailArrow.MIN_TAIL_LENGTH.value,\n      ),\n    );\n    const realOffset = this.tailLength.sub(updatedLength);\n    this.tailLength = updatedLength;\n    return realOffset.getFloatingPrecision();\n  }\n\n  normalizeTailPosition(\n    proposedPosition: FixedPrecisionCoordinates,\n    tailId: number,\n  ): FixedPrecisionCoordinates | null {\n    const proposedPositionFloatingPrecision =\n      proposedPosition.getFloatingPrecision();\n    const getDistanceToTailDistance = (tailDistance: TailDistance): number =>\n      Math.abs(tailDistance.center - proposedPositionFloatingPrecision) -\n      tailDistance.distance / 2;\n\n    const tailsWithoutCurrent = Array.from(this.tailsYOffset.entries())\n      .filter(([key]) => key !== tailId)\n      .map(([_, value]) => value);\n    const tailMinDistance = this.getTailsDistance(tailsWithoutCurrent)\n      .filter((item) => MultitailArrow.canAddTail(item.distance))\n      .sort(\n        (a, b) => getDistanceToTailDistance(a) - getDistanceToTailDistance(b),\n      )\n      .at(0);\n\n    if (!tailMinDistance) {\n      return null;\n    }\n\n    const positionCenter = FixedPrecisionCoordinates.fromFloatingPrecision(\n      tailMinDistance.center,\n    );\n    const positionDistance = FixedPrecisionCoordinates.fromFloatingPrecision(\n      tailMinDistance.distance,\n    );\n    const maxDistanceFromCenter = positionDistance\n      .divide(2)\n      .sub(MultitailArrow.MIN_TAIL_DISTANCE);\n    if (\n      Math.abs(positionCenter.sub(proposedPosition).value) >=\n      maxDistanceFromCenter.value\n    ) {\n      const distanceFromCenter =\n        positionCenter.value > proposedPosition.value\n          ? maxDistanceFromCenter.multiply(-1)\n          : maxDistanceFromCenter;\n      return positionCenter.add(distanceFromCenter);\n    }\n    return proposedPosition;\n  }\n\n  moveTail(offset: number, id: number, normalize?: true): number;\n  moveTail(\n    offset: number,\n    name:\n      | typeof MultitailArrow.TOP_TAIL_NAME\n      | typeof MultitailArrow.BOTTOM_TAIL_NAME,\n  ): number;\n\n  moveTail(offset: number, second: number | string, normalize?: true): number {\n    const offsetFixedPrecision =\n      FixedPrecisionCoordinates.fromFloatingPrecision(offset);\n    const minHeight = new FixedPrecisionCoordinates(\n      Math.max(\n        MultitailArrow.MIN_TAIL_DISTANCE.multiply(this.tailsYOffset.size + 1)\n          .value,\n        MultitailArrow.MIN_HEIGHT.value,\n      ),\n    );\n    const tailsOffset = Array.from(this.tailsYOffset.values()).sort(\n      (a, b) => a.value - b.value,\n    );\n    const lastTail = tailsOffset.at(-1) || new FixedPrecisionCoordinates(0);\n    const firstTail =\n      tailsOffset.at(0) || new FixedPrecisionCoordinates(Infinity);\n    const closestTopLimit = new FixedPrecisionCoordinates(\n      Math.min(\n        firstTail.sub(MultitailArrow.MIN_TAIL_DISTANCE).value,\n        this.headOffsetY.sub(MultitailArrow.MIN_TOP_BOTTOM_OFFSET).value,\n      ),\n    );\n    const closestBottomLimit = new FixedPrecisionCoordinates(\n      Math.max(\n        lastTail.add(MultitailArrow.MIN_TAIL_DISTANCE).value,\n        this.headOffsetY.add(MultitailArrow.MIN_TOP_BOTTOM_OFFSET).value,\n      ),\n    );\n\n    if (typeof second === 'number') {\n      const originalValue = this.tailsYOffset.get(\n        second,\n      ) as FixedPrecisionCoordinates;\n      let updatedHeight = new FixedPrecisionCoordinates(\n        Math.max(\n          MultitailArrow.MIN_TAIL_DISTANCE.value,\n          Math.min(\n            originalValue.add(offsetFixedPrecision).value,\n            this.height.sub(MultitailArrow.MIN_TAIL_DISTANCE).value,\n          ),\n        ),\n      );\n      if (normalize) {\n        const result = this.normalizeTailPosition(updatedHeight, second);\n        if (result === null) {\n          return originalValue.getFloatingPrecision();\n        }\n        updatedHeight = result;\n      }\n\n      const realOffset = updatedHeight.sub(originalValue);\n      this.tailsYOffset.set(second, updatedHeight);\n      return realOffset.getFloatingPrecision();\n    } else if (second === MultitailArrow.BOTTOM_TAIL_NAME) {\n      const updatedHeight = new FixedPrecisionCoordinates(\n        Math.max(\n          minHeight.value,\n          this.height.add(offsetFixedPrecision).value,\n          closestBottomLimit.value,\n        ),\n      );\n      const realOffset = updatedHeight.sub(this.height);\n      this.height = updatedHeight;\n      return realOffset.getFloatingPrecision();\n    } else {\n      const realOffset = new FixedPrecisionCoordinates(\n        Math.min(\n          offsetFixedPrecision.value,\n          closestTopLimit.value,\n          this.height.sub(minHeight).value,\n        ),\n      );\n      if (realOffset.value !== 0) {\n        this.spineTopY = this.spineTopY.add(realOffset);\n        this.headOffsetY = this.headOffsetY.sub(realOffset);\n        this.height = this.height.sub(realOffset);\n        const updatedTails = this.tailsYOffset.clone();\n        updatedTails.forEach((item, key) => {\n          updatedTails.set(key, item.sub(realOffset));\n        });\n        this.tailsYOffset = updatedTails;\n      }\n      return realOffset.getFloatingPrecision();\n    }\n  }\n\n  move(offset: Vec2): void {\n    this.spineTopX = this.spineTopX.add(\n      FixedPrecisionCoordinates.fromFloatingPrecision(offset.x),\n    );\n    this.spineTopY = this.spineTopY.add(\n      FixedPrecisionCoordinates.fromFloatingPrecision(offset.y),\n    );\n  }\n\n  toKetNode(): KetFileNode<KetFileMultitailArrowNode> {\n    const head = new Vec2(\n      this.spineTopX.add(this.headOffsetX).getFloatingPrecision(),\n      this.spineTopY.add(this.headOffsetY).getFloatingPrecision(),\n    );\n    const bottomY = this.spineTopY.add(this.height);\n    const spine: [Vec2, Vec2] = [\n      new Vec2(\n        this.spineTopX.getFloatingPrecision(),\n        this.spineTopY.getFloatingPrecision(),\n      ),\n      new Vec2(\n        this.spineTopX.getFloatingPrecision(),\n        bottomY.getFloatingPrecision(),\n      ),\n    ];\n    const tailX = this.spineTopX.sub(this.tailLength);\n    const nonBorderTails = Array.from(this.tailsYOffset.values()).map(\n      (yOffset) => this.spineTopY.add(yOffset),\n    );\n    const convertTail = (y: FixedPrecisionCoordinates) =>\n      new Vec2(tailX.getFloatingPrecision(), y.getFloatingPrecision());\n    const tails = [this.spineTopY]\n      .concat(nonBorderTails)\n      .concat(bottomY)\n      .map(convertTail);\n\n    return {\n      type: MULTITAIL_ARROW_SERIALIZE_KEY,\n      center: this.center(),\n      selected: this.getInitiallySelected(),\n      data: getNodeWithInvertedYCoord({\n        head: {\n          position: head,\n        },\n        spine: {\n          pos: spine,\n        },\n        tails: {\n          pos: tails,\n        },\n        zOrder: 0,\n      }),\n    };\n  }\n}\n","import ReObject from './reobject';\nimport { Line, MultitailArrow } from 'domain/entities/multitailArrow';\nimport { MULTITAIL_ARROW_KEY } from 'domain/constants/multitailArrow';\nimport { LayerMap, Render, ReStruct } from 'application/render';\nimport { RenderOptions } from 'application/render/render.types';\nimport { getArrowHeadDimensions } from 'application/render/draw';\nimport { PathBuilder } from 'application/render/pathBuilder';\nimport { Scale } from 'domain/helpers';\nimport { Box2Abs, Pool, Vec2 } from 'domain/entities';\nimport util from 'application/render/util';\nimport { RaphaelPaper } from 'raphael';\n\nexport enum MultitailArrowRefName {\n  HEAD = 'head',\n  TAILS = 'tails',\n  TOP_TAIL = 'topTail',\n  BOTTOM_TAIL = 'bottomTail',\n  SPINE = 'spine',\n}\n\nexport interface MultitailArrowReferencePosition {\n  name: MultitailArrowRefName;\n  isLine: boolean;\n  tailId: number | null;\n}\n\nexport interface MultitailArrowClosestReferencePosition {\n  distance: number;\n  ref: MultitailArrowReferencePosition | null;\n}\n\nexport class ReMultitailArrow extends ReObject {\n  static CUBIC_BEZIER_OFFSET = 6;\n  static FRAME_OFFSET = 0.175;\n  static SELECTION_POINT_OFFSET_FROM_SPINE = 0.1;\n\n  static isSelectable(): boolean {\n    return true;\n  }\n\n  static getTailIdFromRefName(name: string): number | null {\n    if (name.startsWith(MultitailArrowRefName.TAILS)) {\n      return parseInt(name.replace(`${MultitailArrowRefName.TAILS}-`, ''));\n    }\n    return null;\n  }\n\n  constructor(public multitailArrow: MultitailArrow) {\n    super(MULTITAIL_ARROW_KEY);\n  }\n\n  getFrameOffset(options: RenderOptions) {\n    return ReMultitailArrow.FRAME_OFFSET * options.microModeScale;\n  }\n\n  getSelectionPointOffset(options: RenderOptions) {\n    return (\n      ReMultitailArrow.SELECTION_POINT_OFFSET_FROM_SPINE *\n      options.microModeScale\n    );\n  }\n\n  getReferencePositions(\n    renderOptions: RenderOptions,\n  ): ReturnType<MultitailArrow['getReferencePositions']> {\n    const positions = this.multitailArrow.getReferencePositions();\n    const tails = new Pool<Vec2>();\n    positions.tails.forEach((item, key) => {\n      tails.set(key, Scale.modelToCanvas(item, renderOptions));\n    });\n\n    return {\n      head: Scale.modelToCanvas(positions.head, renderOptions),\n      topTail: Scale.modelToCanvas(positions.topTail, renderOptions),\n      bottomTail: Scale.modelToCanvas(positions.bottomTail, renderOptions),\n      topSpine: Scale.modelToCanvas(positions.topSpine, renderOptions),\n      bottomSpine: Scale.modelToCanvas(positions.bottomSpine, renderOptions),\n      tails,\n    };\n  }\n\n  getReferenceLines(\n    renderOptions: RenderOptions,\n    referencePositions = this.getReferencePositions(renderOptions),\n  ) {\n    return this.multitailArrow.getReferenceLines(referencePositions);\n  }\n\n  drawSingleLineHover(\n    builder: PathBuilder,\n    renderOptions: RenderOptions,\n    lineStart: Vec2,\n    lineEnd: Vec2,\n    verticalDirection: -1 | 1,\n    horizontalDirection: -1 | 1,\n  ): void {\n    const offset = this.getFrameOffset(renderOptions);\n    const cubicBezierOffset =\n      horizontalDirection * ReMultitailArrow.CUBIC_BEZIER_OFFSET;\n    const start = lineStart.add(\n      new Vec2(offset * horizontalDirection, offset * verticalDirection),\n    );\n    const end = start.add(new Vec2(0, 2 * offset * -verticalDirection));\n    builder\n      .addLine(start)\n      .addLine(lineEnd.add(new Vec2(0, offset * verticalDirection)))\n      .addQuadraticBezierCurve(\n        lineEnd.add(new Vec2(cubicBezierOffset, offset * verticalDirection)),\n        lineEnd.add(new Vec2(cubicBezierOffset, 0)),\n      )\n      .addQuadraticBezierCurve(\n        lineEnd.add(new Vec2(cubicBezierOffset, offset * -verticalDirection)),\n        lineEnd.add(new Vec2(0, offset * -verticalDirection)),\n      )\n      .addLine(end);\n  }\n\n  buildFrame(renderOptions: RenderOptions): string {\n    const offset = this.getFrameOffset(renderOptions);\n    const { topSpine, bottomSpine, topTail, bottomTail, head, tails } =\n      this.getReferencePositions(renderOptions);\n    const builder = new PathBuilder();\n    const tailsPoints = Array.from(tails.values()).sort((a, b) => a.y - b.y);\n\n    const start = topSpine.add(new Vec2(offset, offset));\n\n    builder\n      .addMovement(start)\n      .addLine(\n        topSpine.add(\n          new Vec2(offset, -offset + ReMultitailArrow.CUBIC_BEZIER_OFFSET),\n        ),\n      )\n      .addQuadraticBezierCurve(\n        topSpine.add(new Vec2(offset, -offset)),\n        topSpine.add(\n          new Vec2(offset - ReMultitailArrow.CUBIC_BEZIER_OFFSET, -offset),\n        ),\n      );\n    this.drawSingleLineHover(builder, renderOptions, topSpine, topTail, -1, -1);\n    tailsPoints.forEach((tailPoint) => {\n      this.drawSingleLineHover(\n        builder,\n        renderOptions,\n        new Vec2(topSpine.x, tailPoint.y),\n        tailPoint,\n        -1,\n        -1,\n      );\n    });\n    this.drawSingleLineHover(\n      builder,\n      renderOptions,\n      bottomSpine,\n      bottomTail,\n      -1,\n      -1,\n    );\n    builder\n      .addLine(\n        bottomSpine.add(\n          new Vec2(offset - ReMultitailArrow.CUBIC_BEZIER_OFFSET, offset),\n        ),\n      )\n      .addQuadraticBezierCurve(\n        bottomSpine.add(new Vec2(offset, offset)),\n        bottomSpine.add(\n          new Vec2(offset, offset - ReMultitailArrow.CUBIC_BEZIER_OFFSET),\n        ),\n      );\n    this.drawSingleLineHover(\n      builder,\n      renderOptions,\n      new Vec2(topSpine.x, head.y),\n      head,\n      1,\n      1,\n    );\n    builder.addLine(start);\n    return builder.build();\n  }\n\n  drawHover(render: Render) {\n    const path = this.buildFrame(render.options);\n    const paths = render.ctab.render.paper\n      .path(path)\n      .attr({ ...render.options.hoverStyle });\n\n    render.ctab.addReObjectPath(LayerMap.hovering, this.visel, paths);\n\n    return paths;\n  }\n\n  getSelectionPointsFromReferencePoint(\n    point: Vec2,\n    topSpine: Vec2,\n    name: string,\n    spineOffset: number,\n  ) {\n    const spineOffsetWithDirection =\n      topSpine.x > point.x ? -spineOffset : spineOffset;\n    return {\n      [`${name}-resize`]: point,\n      [`${name}-move`]: new Vec2(\n        topSpine.x + spineOffsetWithDirection,\n        point.y,\n      ),\n    };\n  }\n\n  addTestSelectionPoints(\n    reStruct: ReStruct,\n    paper: RaphaelPaper,\n    renderOptions: RenderOptions,\n  ) {\n    const OFFSET = this.getSelectionPointOffset(renderOptions);\n    const { topTail, bottomTail, tails, head, topSpine } =\n      this.getReferencePositions(renderOptions);\n    const selectionPointSet = paper.set();\n    const points: Record<string, Vec2> = {\n      ...this.getSelectionPointsFromReferencePoint(\n        topTail,\n        topSpine,\n        'topTail',\n        OFFSET,\n      ),\n      ...this.getSelectionPointsFromReferencePoint(\n        bottomTail,\n        topSpine,\n        'bottomTail',\n        OFFSET,\n      ),\n      ...this.getSelectionPointsFromReferencePoint(\n        head,\n        topSpine,\n        'head',\n        OFFSET,\n      ),\n      ...Array.from(tails.entries()).reduce(\n        (acc, [key, value]) => ({\n          ...acc,\n          ...this.getSelectionPointsFromReferencePoint(\n            value,\n            topSpine,\n            `${MultitailArrow.TAILS_NAME}-${key}`,\n            OFFSET,\n          ),\n        }),\n        {},\n      ),\n    };\n    Object.entries(points).forEach(([key, point]) => {\n      const element = paper.circle(point.x, point.y, 1).attr({\n        fill: 'none',\n        stroke: 'none',\n      });\n      if (element.node && element.node.setAttribute) {\n        element.node.setAttribute('data-testid', key);\n      }\n      selectionPointSet.push(element);\n    });\n    reStruct.addReObjectPath(\n      LayerMap.selectionPlate,\n      this.visel,\n      selectionPointSet,\n    );\n  }\n\n  makeSelectionPlate(\n    reStruct: ReStruct,\n    paper: RaphaelPaper,\n    options: RenderOptions,\n  ) {\n    this.addTestSelectionPoints(reStruct, paper, options);\n    const path = this.buildFrame(options);\n    const selectionSet = paper.set();\n    const paths = reStruct.render.paper\n      .path(path)\n      .attr({ ...options.selectionStyle });\n\n    selectionSet.push(paths);\n    return selectionSet;\n  }\n\n  show(reStruct: ReStruct, renderOptions: RenderOptions) {\n    reStruct.clearVisel(this.visel);\n    const pathBuilder = new PathBuilder();\n    const headPathBuilder = new PathBuilder();\n    const { topTail, topSpine, bottomSpine, head, tails } =\n      this.getReferencePositions(renderOptions);\n    const topTailOffsetX = topSpine.sub(topTail).x;\n    const arrowStart = new Vec2(topSpine.x, head.y);\n    const arrowLength = head.x - arrowStart.x;\n\n    const { arrowHeadLength, arrowHeadWidth } =\n      getArrowHeadDimensions(renderOptions);\n\n    pathBuilder.addMultitailArrowBase(\n      topSpine.y,\n      bottomSpine.y,\n      topSpine.x,\n      topTailOffsetX,\n    );\n    headPathBuilder.addFilledTriangleArrowPathParts(\n      arrowStart,\n      arrowLength,\n      arrowHeadLength,\n      arrowHeadWidth,\n    );\n    tails.forEach((tail) => {\n      pathBuilder.addLine(tail, { x: topSpine.x, y: tail.y });\n    });\n\n    const path = reStruct.render.paper.path(pathBuilder.build());\n    const header = reStruct.render.paper.path(headPathBuilder.build());\n    path.attr(renderOptions.lineattr);\n    header.attr({\n      ...renderOptions.lineattr,\n      fill: '#000',\n    });\n    this.visel.add(path, Box2Abs.fromRelBox(util.relBox(path.getBBox())));\n    this.visel.add(header, Box2Abs.fromRelBox(util.relBox(header.getBBox())));\n  }\n\n  private getClosestArrowPartPosition(\n    point: Vec2,\n    entities: Array<[string, Vec2]>,\n    isLine: false,\n  ): MultitailArrowClosestReferencePosition;\n\n  private getClosestArrowPartPosition(\n    point: Vec2,\n    entities: Array<[string, Line]>,\n    isLine: true,\n  ): MultitailArrowClosestReferencePosition;\n\n  private getClosestArrowPartPosition(\n    point: Vec2,\n    entities: Array<[string, Vec2 | Line]>,\n    isLine: boolean,\n  ): MultitailArrowClosestReferencePosition {\n    return entities.reduce(\n      (acc, [name, value]) => {\n        const distance = isLine\n          ? point.calculateDistanceToLine(value as Line)\n          : Vec2.dist(point, value as Vec2);\n        const tailId = ReMultitailArrow.getTailIdFromRefName(name);\n        let refName: MultitailArrowRefName;\n        if (typeof tailId === 'number') {\n          refName = MultitailArrowRefName.TAILS;\n        } else if (\n          [\n            MultitailArrowRefName.HEAD,\n            MultitailArrowRefName.BOTTOM_TAIL,\n            MultitailArrowRefName.TOP_TAIL,\n          ].includes(name as MultitailArrowRefName)\n        ) {\n          refName = name as MultitailArrowRefName;\n        } else {\n          refName = MultitailArrowRefName.SPINE;\n        }\n\n        return distance < acc.distance\n          ? {\n              distance,\n              ref:\n                refName !== MultitailArrowRefName.SPINE\n                  ? {\n                      name: refName,\n                      isLine,\n                      tailId,\n                    }\n                  : null,\n            }\n          : acc;\n      },\n      {\n        distance: Infinity,\n        ref: null,\n      } as MultitailArrowClosestReferencePosition,\n    );\n  }\n\n  private getTailArrayFromPool<T>(tails: Pool<T>): Array<[string, T]> {\n    return Array.from(tails.entries()).map(([key, value]) => [\n      `${MultitailArrow.TAILS_NAME}-${key}`,\n      value,\n    ]);\n  }\n\n  calculateDistanceToPoint(\n    point: Vec2,\n    renderOptions: RenderOptions,\n    maxDistanceToPoint: number,\n  ): MultitailArrowClosestReferencePosition {\n    const referencePositions = this.getReferencePositions(renderOptions);\n    const referenceLines = this.getReferenceLines(\n      renderOptions,\n      referencePositions,\n    );\n    const { tails, ...rest } = referenceLines;\n    const tailsAndHeadLines: Array<[string, Line]> = Object.entries(\n      rest,\n    ).concat(this.getTailArrayFromPool(tails));\n\n    const lineResult = this.getClosestArrowPartPosition(\n      point,\n      tailsAndHeadLines,\n      true,\n    );\n\n    if (lineResult.distance < maxDistanceToPoint) {\n      const {\n        topSpine: _t,\n        bottomSpine: _b,\n        tails: tailsPoints,\n        ...validReferencePositions\n      } = referencePositions;\n\n      const tailsAnddHeadPoints: Array<[string, Vec2]> = Object.entries(\n        validReferencePositions,\n      ).concat(this.getTailArrayFromPool(tailsPoints));\n\n      const pointsResult = this.getClosestArrowPartPosition(\n        point,\n        tailsAnddHeadPoints,\n        false,\n      );\n      if (\n        pointsResult.distance < maxDistanceToPoint / 2 ||\n        (pointsResult.distance < maxDistanceToPoint &&\n          pointsResult.distance <= lineResult.distance)\n      ) {\n        return pointsResult;\n      }\n    }\n\n    return lineResult;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Box2Abs,\n  FunctionalGroup,\n  Pile,\n  Pool,\n  RGroupAttachmentPoint,\n  Struct,\n  Vec2,\n} from 'domain/entities';\nimport assert from 'assert';\nimport { LayerMap } from './generalEnumTypes';\nimport ReAtom from './reatom';\nimport ReBond from './rebond';\nimport ReDataSGroupData from './redatasgroupdata';\nimport ReEnhancedFlag from './reenhancedFlag';\nimport ReFrag from './refrag';\nimport ReLoop from './reloop';\nimport ReRGroup from './rergroup';\nimport ReRxnArrow from './rerxnarrow';\nimport ReRxnPlus from './rerxnplus';\nimport ReSGroup from './resgroup';\nimport ReSimpleObject from './resimpleObject';\nimport ReText from './retext';\nimport { Render } from '../raphaelRender';\nimport Visel from './visel';\nimport util from '../util';\nimport { ReRGroupAttachmentPoint } from './rergroupAttachmentPoint';\nimport { ReImage } from 'application/render/restruct/reImage';\nimport { IMAGE_KEY, MULTITAIL_ARROW_KEY } from 'domain/constants';\nimport { ReMultitailArrow } from './remultitailArrow';\n\nclass ReStruct {\n  public static readonly maps = {\n    atoms: ReAtom,\n    bonds: ReBond,\n    rxnPluses: ReRxnPlus,\n    rxnArrows: ReRxnArrow,\n    frags: ReFrag,\n    rgroups: ReRGroup,\n    rgroupAttachmentPoints: ReRGroupAttachmentPoint,\n    sgroupData: ReDataSGroupData,\n    enhancedFlags: ReEnhancedFlag,\n    sgroups: ReSGroup,\n    reloops: ReLoop,\n    simpleObjects: ReSimpleObject,\n    texts: ReText,\n    [IMAGE_KEY]: ReImage,\n    [MULTITAIL_ARROW_KEY]: ReMultitailArrow,\n  } as const;\n\n  public render: Render;\n  public molecule: Struct;\n  public atoms: Map<number, ReAtom> = new Map();\n  public bonds: Map<number, ReBond> = new Map();\n  public reloops: Map<number, ReLoop> = new Map();\n  public rxnPluses: Map<number, ReRxnPlus> = new Map();\n  public rxnArrows: Map<number, ReRxnArrow> = new Map();\n  public frags: Pool = new Pool();\n  public rgroups: Pool = new Pool();\n  public rgroupAttachmentPoints: Pool<ReRGroupAttachmentPoint> = new Pool();\n\n  public sgroups: Map<number, ReSGroup> = new Map();\n  public sgroupData: Map<number, ReDataSGroupData> = new Map();\n  public enhancedFlags: Map<number, ReEnhancedFlag> = new Map();\n  public simpleObjects: Map<number, ReSimpleObject> = new Map();\n  public texts: Map<number, ReText> = new Map();\n  public images = new Map<number, ReImage>();\n  public multitailArrows = new Map<number, ReMultitailArrow>();\n\n  private initialized = false;\n  private layers: Record<LayerMap, any> = {} as Record<LayerMap, unknown>;\n  public connectedComponents: Pool = new Pool();\n  private ccFragmentType: Pool = new Pool();\n  private structChanged = false;\n\n  // TWIMC, Those maps are accessed via dynamic names, using static maps field + 'Changed' string\n  private atomsChanged: Map<number, 1> = new Map();\n  private simpleObjectsChanged: Map<number, ReSimpleObject> = new Map();\n  private rxnArrowsChanged: Map<number, ReRxnArrow> = new Map();\n  private rxnPlusesChanged: Map<number, ReRxnPlus> = new Map();\n  private enhancedFlagsChanged: Map<number, ReEnhancedFlag> = new Map();\n  private bondsChanged: Map<number, ReEnhancedFlag> = new Map();\n  private textsChanged: Map<number, ReText> = new Map();\n  private imagesChanged = new Map<number, ReImage>();\n  private multitailArrowsChanged = new Map<number, ReMultitailArrow>();\n  private snappingBonds: number[] = [];\n\n  constructor(\n    molecule,\n    render: Render | { skipRaphaelInitialization: boolean; theme },\n  ) {\n    // eslint-disable-line max-statements\n    this.render = render as Render;\n    this.molecule = molecule || new Struct();\n    this.initLayers();\n    this.clearMarks();\n    // TODO: eachItem ?\n\n    molecule.atoms.forEach((atom, aid) => {\n      this.atoms.set(aid, new ReAtom(atom));\n    });\n\n    molecule.bonds.forEach((bond, bid) => {\n      this.bonds.set(bid, new ReBond(bond));\n    });\n\n    molecule.loops.forEach((loop, lid) => {\n      this.reloops.set(lid, new ReLoop(loop));\n    });\n\n    molecule.rxnPluses.forEach((item, id) => {\n      this.rxnPluses.set(id, new ReRxnPlus(item));\n    });\n\n    molecule.rxnArrows.forEach((item, id) => {\n      this.rxnArrows.set(id, new ReRxnArrow(item));\n    });\n\n    molecule.simpleObjects.forEach((item, id) => {\n      this.simpleObjects.set(id, new ReSimpleObject(item));\n    });\n\n    molecule.texts.forEach((item, id) => {\n      this.texts.set(id, new ReText(item));\n    });\n\n    molecule.frags.forEach((item, id) => {\n      this.frags.set(id, new ReFrag(item));\n      if (item) this.enhancedFlags.set(id, new ReEnhancedFlag());\n    });\n\n    molecule.rgroups.forEach((item, id) => {\n      this.rgroups.set(id, new ReRGroup(item));\n    });\n\n    molecule.rgroupAttachmentPoints.forEach(\n      (item: RGroupAttachmentPoint, id: number) => {\n        const reAtom = this.atoms.get(item.atomId);\n        assert(reAtom != null);\n        this.rgroupAttachmentPoints.set(\n          id,\n          new ReRGroupAttachmentPoint(item, reAtom),\n        );\n      },\n    );\n\n    molecule.sgroups.forEach((item, id) => {\n      this.sgroups.set(id, new ReSGroup(item));\n      if (item.type === 'DAT' && !item.data.attached) {\n        this.sgroupData.set(id, new ReDataSGroupData(item));\n      }\n    });\n    molecule.images.forEach((item, id) => {\n      this.images.set(id, new ReImage(item));\n    });\n    molecule.multitailArrows.forEach((item, id) => {\n      this.multitailArrows.set(id, new ReMultitailArrow(item));\n    });\n  }\n\n  get visibleRGroupAttachmentPoints() {\n    const sgroups = this.molecule.sgroups;\n    const functionalGroups = this.molecule.functionalGroups;\n    return this.rgroupAttachmentPoints.filter((_id, reItem) => {\n      const atomId = reItem.item.atomId;\n      const atom = this.molecule.atoms.get(atomId);\n      assert(atom != null);\n      return !FunctionalGroup.isAtomInContractedFunctionalGroup(\n        atom,\n        sgroups,\n        functionalGroups,\n        false,\n      );\n    });\n  }\n\n  connectedComponentRemoveAtom(aid: number, reAtom?: ReAtom): void {\n    const atom = reAtom || this.atoms.get(aid);\n    if (!atom || atom.component < 0) return;\n    const cc = this.connectedComponents.get(atom.component);\n\n    cc.delete(aid);\n    if (cc.size < 1) this.connectedComponents.delete(atom.component);\n\n    atom.component = -1;\n  }\n\n  clearConnectedComponents(): void {\n    this.connectedComponents.clear();\n    this.atoms.forEach((atom) => {\n      atom.component = -1;\n    });\n  }\n\n  getConnectedComponent(\n    aid: Array<number> | number,\n    adjacentComponents: Pile,\n  ): Pile {\n    const list = Array.isArray(aid) ? Array.from(aid) : [aid];\n    const ids = new Pile();\n\n    while (list.length > 0) {\n      const aid = list.pop()!;\n      ids.add(aid);\n      const atom = this.atoms.get(aid);\n      if (!atom) continue;\n      if (atom.component >= 0) adjacentComponents.add(atom.component);\n\n      atom.a.neighbors.forEach((neighbor) => {\n        const halfBond = this.molecule.halfBonds.get(neighbor);\n        if (!halfBond) return;\n        const neiId = halfBond.end;\n        if (!ids.has(neiId)) list.push(neiId);\n      });\n    }\n\n    return ids;\n  }\n\n  addConnectedComponent(idSet: Pile<number>): number {\n    const compId = this.connectedComponents.add(idSet);\n    const adjacentComponents = new Pile();\n    const aidSet = this.getConnectedComponent(\n      Array.from(idSet),\n      adjacentComponents,\n    );\n\n    adjacentComponents.delete(compId);\n\n    let type = -1;\n    aidSet.forEach((aid) => {\n      const atom = this.atoms.get(aid);\n      if (!atom) return;\n      atom.component = compId;\n      if (atom.a.rxnFragmentType !== -1) type = atom.a.rxnFragmentType;\n    });\n\n    this.ccFragmentType.set(compId, type);\n    return compId;\n  }\n\n  removeConnectedComponent(ccid: number): boolean {\n    this.connectedComponents.get(ccid).forEach((aid) => {\n      const atom = this.atoms.get(aid);\n      if (atom) atom.component = -1;\n    });\n\n    return this.connectedComponents.delete(ccid);\n  }\n\n  assignConnectedComponents(): void {\n    this.atoms.forEach((atom, aid) => {\n      if (atom.component >= 0) return;\n\n      const adjacentComponents = new Pile();\n      const idSet = this.getConnectedComponent(aid, adjacentComponents);\n      adjacentComponents.forEach((ccid) => {\n        this.removeConnectedComponent(ccid);\n      });\n\n      this.addConnectedComponent(idSet);\n    });\n  }\n\n  initLayers(): void {\n    for (const group in LayerMap) {\n      this.layers[LayerMap[group]] = this.render.paper\n        .rect(0, 0, 10, 10)\n        .attr({\n          class: group + 'Layer',\n          fill: '#000',\n          opacity: '0.0',\n        })\n        .toFront();\n    }\n  }\n\n  addReObjectPath(\n    group: LayerMap,\n    visel: Visel,\n    path,\n    pos: Vec2 | null = null,\n    visible = false,\n  ): void {\n    // eslint-disable-line max-params\n    if (!path || !this.layers[group].node.parentNode) return;\n    const paths = Array.isArray(path) ? path : [path];\n\n    paths.forEach((path) => {\n      const offset = this.render.options.offset;\n      let bb = visible ? Box2Abs.fromRelBox(util.relBox(path.getBBox())) : null;\n      const ext = pos && bb ? bb.translate(pos.negated()) : null;\n      if (offset !== null) {\n        path.translateAbs(offset.x, offset.y);\n        bb = bb ? bb.translate(offset) : null;\n      }\n      visel.add(path, bb, ext);\n      path.insertBefore(this.layers[LayerMap[group]]);\n    });\n  }\n\n  clearMarks(): void {\n    Object.keys(ReStruct.maps).forEach((map) => {\n      this[map + 'Changed'] = new Map();\n    });\n\n    this.structChanged = false;\n  }\n\n  markItemRemoved(): void {\n    this.structChanged = true;\n  }\n\n  markBond(bid: number, mark: number): void {\n    this.markItem('bonds', bid, mark);\n  }\n\n  markAtom(aid: number, mark: number): void {\n    this.markItem('atoms', aid, mark);\n  }\n\n  markRgroupAttachmentPoint(rgAPid: number, mark: number): void {\n    this.markItem('rgroupAttachmentPoints', rgAPid, mark);\n  }\n\n  markItem(map: string, id: number, mark: number): void {\n    const mapChanged = this[map + 'Changed'];\n\n    const value = mapChanged.has(id)\n      ? Math.max(mark, mapChanged.get(id))\n      : mark;\n\n    mapChanged.set(id, value);\n\n    if (this[map].has(id)) this.clearVisel(this[map].get(id).visel);\n  }\n\n  clearVisel(visel: Visel): void {\n    visel.paths.forEach((path) => {\n      path.remove();\n    });\n    visel.clear();\n  }\n\n  eachItem(func) {\n    Object.keys(ReStruct.maps).forEach((map) => {\n      this[map].forEach(func);\n    });\n  }\n\n  /**\n   * Why?\n   * we can't use just getVBoxObj and the center for atoms\n   * because this will lead incorrect center position for the move atom around it\n   * because of atom's vBox contain text label with is not constant after flip/rotate\n   * and this lead to unstable flip tool work\n   */\n  // eslint-disable-next-line no-use-before-define\n  getSelectionBoxCenter(selection: SelectionMap): Vec2 | undefined {\n    let boundingBox: Box2Abs | null = null;\n\n    for (const atomId of selection.atoms ?? []) {\n      const atomPositionPoint = this.atoms.get(atomId)!.a.pp;\n      const atomBox = new Box2Abs(atomPositionPoint, atomPositionPoint);\n      boundingBox =\n        boundingBox == null ? atomBox : Box2Abs.union(boundingBox, atomBox);\n    }\n    const selectionExceptAtoms = { ...selection };\n    delete selectionExceptAtoms.atoms;\n\n    const selectionExceptAtomsBoundingBox =\n      this.getBoundingBoxForSelection(selectionExceptAtoms);\n    if (selectionExceptAtomsBoundingBox) {\n      boundingBox = boundingBox\n        ? Box2Abs.union(boundingBox, selectionExceptAtomsBoundingBox)\n        : selectionExceptAtomsBoundingBox;\n    }\n\n    return boundingBox?.centre();\n  }\n\n  // eslint-disable-next-line no-use-before-define\n  getVBoxObj(selection?: SelectionMap): Box2Abs {\n    if (isSelectionEmpty(selection)) {\n      selection = this.getAllElementsAsSelectionMap();\n    }\n\n    let boundingBox = this.getBoundingBoxForSelection(selection);\n\n    boundingBox = boundingBox || new Box2Abs(0, 0, 0, 0);\n    return boundingBox;\n  }\n\n  // eslint-disable-next-line no-use-before-define\n  private getAllElementsAsSelectionMap(): SelectionMap {\n    // eslint-disable-next-line no-use-before-define\n    const selection: SelectionMap = {};\n    Object.keys(ReStruct.maps).forEach((map) => {\n      selection[map] = Array.from(this[map].keys());\n    });\n    return selection;\n  }\n\n  // eslint-disable-next-line no-use-before-define\n  private getBoundingBoxForSelection(selection: SelectionMap): Box2Abs | null {\n    let boundingBox: Box2Abs | null = null;\n    Object.keys(ReStruct.maps).forEach((elementKey) => {\n      selection[elementKey]?.forEach((elementId) => {\n        const box = this[elementKey].get(elementId).getVBoxObj(this.render);\n        if (box) {\n          boundingBox = boundingBox\n            ? Box2Abs.union(boundingBox, box)\n            : box.clone();\n        }\n      });\n    });\n    return boundingBox;\n  }\n\n  translate(d): void {\n    this.eachItem((item) => item.visel.translate(d));\n  }\n\n  scale(s: number): void {\n    // NOTE: bounding boxes are not valid after scaling\n    this.eachItem((item) => scaleVisel(item.visel, s));\n  }\n\n  clearVisels(): void {\n    this.eachItem((item) => this.clearVisel(item.visel));\n  }\n\n  update(force: boolean): boolean {\n    // eslint-disable-line max-statements\n    force = force || !this.initialized;\n\n    // check items to update\n    Object.keys(ReStruct.maps).forEach((map) => {\n      const mapChanged = this[map + 'Changed'];\n      if (force) {\n        this[map].forEach((_item, id) => mapChanged.set(id, 1));\n      } else {\n        // check if some of the items marked are already gone\n        mapChanged.forEach((_value, id) => {\n          if (!this[map].has(id)) mapChanged.delete(id);\n        });\n      }\n    });\n\n    this.atomsChanged.forEach((_value, aid) =>\n      this.connectedComponentRemoveAtom(aid),\n    );\n\n    // clean up empty fragments\n    // TODO: fragment removal should be triggered by the action responsible for the fragment contents removal and form an operation of its own\n    const emptyFrags = this.frags.filter(\n      (fid, frag) => !frag.calcBBox(this.render.ctab, fid, this.render),\n    );\n\n    emptyFrags.forEach((frag, fid) => {\n      this.clearVisel(frag.visel);\n      this.frags.delete(fid);\n      this.molecule.frags.delete(fid);\n    });\n\n    Object.keys(ReStruct.maps).forEach((map) => {\n      const mapChanged = this[map + 'Changed'];\n\n      mapChanged.forEach((_value, id) => {\n        if (this[map].get(id).visel) {\n          this.clearVisel(this[map].get(id).visel);\n        }\n        this.structChanged = this.structChanged || mapChanged.get(id) > 0;\n      });\n    });\n    // TODO: when to update sgroup?\n    this.sgroups.forEach((sgroup) => {\n      this.clearVisel(sgroup.visel);\n      sgroup.hovering = null;\n      sgroup.selectionPlate = null;\n    });\n\n    // TODO [RB] need to implement update-on-demand for fragments and r-groups\n    this.frags.forEach((frag) => {\n      this.clearVisel(frag.visel);\n    });\n\n    this.rgroups.forEach((rgroup) => {\n      this.clearVisel(rgroup.visel);\n    });\n\n    if (force) {\n      // clear and recreate all half-bonds\n      this.clearConnectedComponents();\n      this.molecule.initHalfBonds();\n      this.molecule.initNeighbors();\n    }\n\n    // only update half-bonds adjacent to atoms that have moved\n    const atomsChangedArray = Array.from(this.atomsChanged.keys());\n    this.molecule.updateHalfBonds(atomsChangedArray);\n    this.molecule.sortNeighbors(atomsChangedArray);\n\n    this.assignConnectedComponents();\n    this.initialized = true;\n\n    this.verifyLoops();\n    const updLoops = force || this.structChanged;\n    if (updLoops) this.updateLoops();\n    this.showAtoms();\n    this.showBonds();\n    this.showRgroupAttachmentPoints();\n    if (updLoops) this.showLoops();\n    this.showReactionSymbols();\n    this.showSGroups();\n\n    this.showFragments();\n    this.showRGroups();\n    this.showEnhancedFlags();\n    this.showSimpleObjects();\n    this.showTexts();\n    this.showImages();\n    this.showMultitailArrows();\n    this.clearMarks();\n\n    return true;\n  }\n\n  updateLoops(): void {\n    this.reloops.forEach((reloop) => {\n      this.clearVisel(reloop.visel);\n    });\n    const ret = this.molecule.findLoops();\n    ret.bondsToMark.forEach((bid) => {\n      this.markBond(bid, 1);\n    });\n    ret.newLoops.forEach((loopId) => {\n      this.reloops.set(loopId, new ReLoop(this.molecule.loops.get(loopId)));\n    });\n  }\n\n  showLoops(): void {\n    const options = this.render.options;\n    this.reloops.forEach((reloop, rlid) => {\n      reloop.show(this, rlid, options);\n    });\n  }\n\n  showSimpleObjects(): void {\n    const options = this.render.options;\n\n    this.simpleObjectsChanged.forEach((_value, id) => {\n      const simpleObject = this.simpleObjects.get(id);\n      if (simpleObject) simpleObject.show(this, options);\n    });\n  }\n\n  showTexts() {\n    const options = this.render.options;\n\n    this.textsChanged.forEach((_value, id) => {\n      const text = this.texts.get(id);\n      if (text) text.show(this, id, options);\n    });\n  }\n\n  showReactionSymbols(): void {\n    const options = this.render.options;\n\n    this.rxnArrowsChanged.forEach((_value, id) => {\n      const arrow = this.rxnArrows.get(id);\n      if (arrow) arrow.show(this, id, options);\n    });\n\n    this.rxnPlusesChanged.forEach((_value, id) => {\n      const plus = this.rxnPluses.get(id);\n      if (plus) plus.show(this, id, options);\n    });\n  }\n\n  showSGroups(): void {\n    this.molecule.sGroupForest\n      .getSGroupsBFS()\n      .reverse()\n      .forEach((id) => {\n        const resgroup = this.sgroups.get(id);\n        if (!resgroup) return;\n        resgroup.show(this);\n      });\n  }\n\n  showFragments(): void {\n    this.frags.forEach((frag, id) => {\n      const path = frag.draw(this.render, id);\n      if (path) {\n        this.addReObjectPath(LayerMap.data, frag.visel, path, null, true);\n      }\n      // TODO fragment selection & highlighting\n    });\n  }\n\n  showRGroups(): void {\n    const options = this.render.options;\n    this.rgroups.forEach((rgroup, id) => {\n      rgroup.show(this, id, options);\n    });\n  }\n\n  loopRemove(loopId: number): void {\n    const reloop = this.reloops.get(loopId);\n    if (!reloop) {\n      return;\n    }\n    this.clearVisel(reloop.visel);\n\n    const bondlist: Array<number> = [];\n\n    reloop.loop.hbs.forEach((hbid) => {\n      const hb = this.molecule.halfBonds.get(hbid);\n      if (!hb) return;\n      hb.loop = -1;\n      this.markBond(hb.bid, 1);\n      this.markAtom(hb.begin, 1);\n      bondlist.push(hb.bid);\n    });\n\n    this.reloops.delete(loopId);\n    this.molecule.loops.delete(loopId);\n  }\n\n  verifyLoops(): void {\n    this.reloops.forEach((reloop, rlid) => {\n      if (!reloop.isValid(this.molecule, rlid)) this.loopRemove(rlid);\n    });\n  }\n\n  getRGroupAttachmentPointsVBoxByAtomIds(atomsIds: number[]): Box2Abs | null {\n    let allAtomAttachmentPointsVBox: Box2Abs | null = null;\n\n    atomsIds.forEach((atomId) => {\n      const attachmentPointIds =\n        this.molecule.getRGroupAttachmentPointsByAtomId(atomId);\n\n      const oneAtomAttachmentPointsVBox = attachmentPointIds.reduce(\n        (previousVBox, attachmentPointId) => {\n          const attachmentPoint =\n            this.rgroupAttachmentPoints.get(attachmentPointId);\n          assert(attachmentPoint != null);\n          const currentVBox = attachmentPoint.getVBoxObj(this.render);\n          return previousVBox && currentVBox\n            ? Box2Abs.union(previousVBox, currentVBox)\n            : currentVBox;\n        },\n        null as Box2Abs | null,\n      );\n\n      if (allAtomAttachmentPointsVBox && oneAtomAttachmentPointsVBox) {\n        allAtomAttachmentPointsVBox = Box2Abs.union(\n          allAtomAttachmentPointsVBox,\n          oneAtomAttachmentPointsVBox,\n        );\n      } else {\n        allAtomAttachmentPointsVBox =\n          allAtomAttachmentPointsVBox ?? oneAtomAttachmentPointsVBox;\n      }\n    });\n\n    return allAtomAttachmentPointsVBox;\n  }\n\n  private showRgroupAttachmentPoints() {\n    // why update all rgroupAttachmentPoints instead of changed ones?\n    // 1. The label of an R-Group attachment point may be affected by other R-Group attachment points\n    // 2. The visibility of an an R-Group attachment point may be affected by contracting/expanding an S-Group\n    this.rgroupAttachmentPoints.forEach((_value, id) => {\n      const rgroupAttachmentPoint = this.rgroupAttachmentPoints.get(id);\n      if (rgroupAttachmentPoint?.visel) {\n        this.clearVisel(rgroupAttachmentPoint.visel);\n      }\n\n      const attachedAtomId = rgroupAttachmentPoint?.item.atomId;\n      const sgroup = this.molecule.getGroupFromAtomId(attachedAtomId);\n      const isInsideContractedSGroup = Boolean(sgroup?.isContracted());\n      if (isInsideContractedSGroup) {\n        return;\n      }\n\n      rgroupAttachmentPoint?.show(this, id);\n    });\n  }\n\n  private showAtoms(): void {\n    // eslint-disable-line max-statements\n    const options = this.render.options;\n    this.atomsChanged.forEach((_value, aid) => {\n      const atom = this.atoms.get(aid);\n      if (atom) atom.show(this, aid, options);\n    });\n  }\n\n  showEnhancedFlags(): void {\n    const options = this.render.options;\n\n    this.enhancedFlagsChanged.forEach((_value, chid) => {\n      const flag = this.enhancedFlags.get(chid);\n      if (flag) flag.show(this, chid, options);\n    });\n  }\n\n  showBonds(): void {\n    // eslint-disable-line max-statements\n    const options = this.render.options;\n\n    this.bondsChanged.forEach((_value, bid) => {\n      const bond = this.bonds.get(bid);\n      if (bond) {\n        bond.show(this, bid, options);\n      }\n    });\n  }\n\n  showImages() {\n    const options = this.render.options;\n    this.imagesChanged.forEach((_, id) => {\n      const image = this.images.get(id);\n      if (image) {\n        image.show(this, options);\n      }\n    });\n  }\n\n  showMultitailArrows() {\n    this.multitailArrowsChanged.forEach((_, id) => {\n      const multitailArrow = this.multitailArrows.get(id);\n      if (multitailArrow) {\n        multitailArrow.show(this, this.render.options);\n      }\n    });\n  }\n\n  setSelection(selection?) {\n    const atoms: { selected: boolean; sgroup: number }[] = [];\n\n    Object.keys(ReStruct.maps).forEach((map) => {\n      const [mapValues] = this[map].values(); // hack to include ReSGroup, figure out better solution\n      if (ReStruct.maps[map].isSelectable() || mapValues instanceof ReSGroup) {\n        this[map].forEach((item, id) => {\n          if (item instanceof ReAtom) {\n            let sgroup;\n            for (const sgId of item.a.sgs.values()) {\n              sgroup = sgId;\n            }\n            atoms.push({\n              selected: item.selected,\n              sgroup,\n            });\n          }\n          if (\n            item instanceof ReSGroup &&\n            FunctionalGroup.isContractedFunctionalGroup(\n              item?.item?.id,\n              this.molecule.functionalGroups,\n            )\n          ) {\n            const sGroupAtoms = atoms.filter(\n              (atom) => atom.sgroup === item?.item?.id,\n            );\n            item.selected =\n              sGroupAtoms.length > 0 &&\n              sGroupAtoms.some((atom) => atom.selected);\n          }\n\n          let selected = selection?.[map]\n            ? selection[map].indexOf(id) > -1\n            : item.selected;\n\n          if (selection === null) {\n            selected = false;\n          }\n\n          this.showItemSelection(item, selected);\n        });\n      }\n    });\n  }\n\n  showItemSelection(item, selected) {\n    const exists = isSelectionSvgObjectExists(item);\n    // TODO: simplify me, who sets `removed`?\n    item.selected = selected;\n    if (item instanceof ReDataSGroupData) item.sgroup.selected = selected;\n    if (selected) {\n      if (!exists) {\n        const render = this.render;\n        const options = render.options;\n        const paper = render.paper;\n\n        item.selectionPlate = item.makeSelectionPlate(this, paper, options);\n        this.addReObjectPath(\n          LayerMap.selectionPlate,\n          item.visel,\n          item.selectionPlate,\n        );\n\n        if (typeof item.makeAdditionalInfo === 'function') {\n          item.additionalInfo = item.makeAdditionalInfo(this);\n          this.addReObjectPath(\n            LayerMap.additionalInfo,\n            item.visel,\n            item.additionalInfo,\n          );\n        }\n      }\n      if (item.selectionPlate) {\n        item.selectionPlate.show();\n        item.additionalInfo?.show();\n        item.cip?.rectangle.attr({\n          fill: '#7f7',\n          stroke: '#7f7',\n        });\n        if (item.togglePoints) item.togglePoints(true);\n      }\n    } else if (exists && item.selectionPlate) {\n      item.selectionPlate.hide();\n      if (item.togglePoints) item.togglePoints(false);\n      item.additionalInfo?.hide();\n      item.cip?.rectangle.attr({\n        fill: '#fff',\n        stroke: '#fff',\n      });\n    }\n  }\n\n  addSnappingBonds(bondId: number) {\n    this.snappingBonds.push(bondId);\n  }\n\n  clearSnappingBonds() {\n    this.snappingBonds = [];\n  }\n\n  isSnappingBond(bondId: number) {\n    return this.snappingBonds.includes(bondId);\n  }\n}\n\n// eslint-disable-next-line no-use-before-define\nfunction isSelectionEmpty(selection?: SelectionMap): selection is undefined {\n  if (!selection) return true;\n\n  const anySelection = Object.keys(ReStruct.maps).some(\n    (map) => selection[map] && selection[map].length > 0,\n  );\n\n  return !anySelection;\n}\n\nfunction scaleRPath(path, scaleFactor: number): void {\n  if (path.type === 'set') {\n    // TODO: rework scaling\n    for (let i = 0; i < path.length; ++i) scaleRPath(path[i], scaleFactor);\n  } else {\n    if (!(typeof path.attrs === 'undefined')) {\n      if ('font-size' in path.attrs) {\n        path.attr('font-size', path.attrs['font-size'] * scaleFactor);\n      } else if ('stroke-width' in path.attrs) {\n        path.attr('stroke-width', path.attrs['stroke-width'] * scaleFactor);\n      }\n    }\n    path.scale(scaleFactor, scaleFactor, 0, 0);\n  }\n}\n\nfunction scaleVisel(visel, s) {\n  for (let i = 0; i < visel.paths.length; ++i) scaleRPath(visel.paths[i], s);\n}\n\n/**\n * SelectionPlate could be an item then value would be in it\n * or it could be a set of items then removed value need to be check on at least one of items in set\n * @param item\n * @returns {boolean}\n */\nfunction isSelectionSvgObjectExists(item) {\n  return (\n    item &&\n    item.selectionPlate !== null &&\n    ((!item.selectionPlate?.items && !item.selectionPlate?.removed) ||\n      (Array.isArray(item.selectionPlate?.items) &&\n        !item.selectionPlate[0]?.removed))\n  );\n}\n\ntype SelectionMap = Partial<\n  Record<keyof typeof ReStruct.maps, number[] | undefined>\n>;\n\nexport default ReStruct;\n","import { Vec2 } from 'domain/entities';\nimport { Render } from './raphaelRender';\nimport { Scale } from 'domain/helpers';\n\nconst canvasToView = (point: Vec2, render: Render) => {\n  const offset = new Vec2(render.viewBox.minX, render.viewBox.minY);\n  return point.sub(offset).scaled(render.options.zoom);\n};\n\nconst modelToView = (vector: Vec2, render: Render) => {\n  const pointInCanvas = Scale.modelToCanvas(vector, render.options);\n  return canvasToView(pointInCanvas, render);\n};\n\nconst viewToCanvas = (point: Vec2, render: Render) => {\n  const offset = new Vec2(render.viewBox.minX, render.viewBox.minY);\n  return point.scaled(1 / render.options.zoom).add(offset);\n};\n\nconst pageToView = (\n  event: MouseEvent | { clientX: number; clientY: number },\n  renderClientArea: HTMLElement,\n) => {\n  const { top: offsetTop, left: offsetLeft } =\n    renderClientArea.getBoundingClientRect();\n  return new Vec2(event.clientX - offsetLeft, event.clientY - offsetTop);\n};\n\nconst pageToCanvas = (\n  event: MouseEvent | { clientX: number; clientY: number },\n  render: Render,\n) => {\n  const pointInViewBox = pageToView(event, render.clientArea);\n  return viewToCanvas(pointInViewBox, render);\n};\n\nconst pageToModel = (\n  event: MouseEvent | { clientX: number; clientY: number },\n  render: Render,\n) => {\n  const pointInCanvas = pageToCanvas(event, render);\n  return Scale.canvasToModel(pointInCanvas, render.options);\n};\n\n/**\n * @see ./__docs__/Coordinate-Origins.png\n * `model` - The original coordinates of entities.\n * `canvas` - The scaled `model`. The real coordinates Raphael uses to draw entities.\n * `page` - The part of the document you're viewing which is currently visible in the window.\n * `view` - The part of the canvas you're viewing which is currently visible in the window.\n * */\nexport const CoordinateTransformation = {\n  modelToView,\n  canvasToView,\n  viewToCanvas,\n  pageToCanvas,\n  pageToModel,\n};\n","import { Box2Abs, Vec2 } from 'domain/entities';\nimport { Render } from '../raphaelRender';\nimport { Scale } from 'domain/helpers';\n\nexport class ScrollOffset {\n  #render: Render;\n  up = 0;\n  down = 0;\n  left = 0;\n  right = 0;\n\n  constructor(render: Render) {\n    this.#render = render;\n  }\n\n  getAbsViewBox(): Box2Abs {\n    const viewBox = this.#render.viewBox;\n    const viewBoxMinXY = new Vec2(viewBox.minX, viewBox.minY);\n    const viewBoxMaxXY = new Vec2(\n      viewBox.minX + viewBox.width,\n      viewBox.minY + viewBox.height,\n    );\n    return new Box2Abs(viewBoxMinXY, viewBoxMaxXY);\n  }\n\n  getAbsBoundingBox(): Box2Abs {\n    const protoBoundingBox = this.#render.ctab.getVBoxObj();\n    const boundingBoxMinXY = Scale.modelToCanvas(\n      protoBoundingBox.p0,\n      this.#render.options,\n    );\n    const boundingBoxMaxXY = Scale.modelToCanvas(\n      protoBoundingBox.p1,\n      this.#render.options,\n    );\n    return new Box2Abs(boundingBoxMinXY, boundingBoxMaxXY);\n  }\n\n  #calculateOffset() {\n    const absBoundingBox = this.getAbsBoundingBox();\n    if (absBoundingBox.hasZeroArea()) {\n      this.up = 0;\n      this.down = 0;\n      this.left = 0;\n      this.right = 0;\n    } else {\n      const absViewBox = this.getAbsViewBox();\n      this.up = absViewBox.p0.y - absBoundingBox.p0.y;\n      this.down = absBoundingBox.p1.y - absViewBox.p1.y;\n      this.left = absViewBox.p0.x - absBoundingBox.p0.x;\n      this.right = absBoundingBox.p1.x - absViewBox.p1.x;\n    }\n  }\n\n  update() {\n    this.#calculateOffset();\n  }\n\n  hasVerticalOffset() {\n    return this.up > 0 || this.down > 0;\n  }\n\n  hasHorizontalOffset() {\n    return this.left > 0 || this.right > 0;\n  }\n}\n","import { Render } from '../raphaelRender';\nimport { ViewBox } from '../render.types';\nimport { RaphaelElement, RaphaelRectAttr } from './types';\n\nexport abstract class Scrollbar {\n  protected bar: RaphaelElement | null = null;\n  protected render: Render;\n  protected viewBoxBeforeDrag: ViewBox | null = null;\n\n  protected MIN_LENGTH = 40;\n  protected RADIUS = 2;\n  protected MARGIN = 5;\n  protected WIDTH = 4;\n  protected DIST_TO_EDGE = 5;\n  protected COLOR = '#b2bbc3';\n\n  protected constructor(render: Render) {\n    this.render = render;\n  }\n\n  update() {\n    this.bar = this.hasOffset() ? this.redraw() : this.hide();\n  }\n\n  protected redraw() {\n    return this.bar ? this.updateAttr() : this.draw();\n  }\n\n  protected updateAttr() {\n    const attr = this.getDynamicAttr();\n    return this.bar?.attr(attr);\n  }\n\n  protected hide() {\n    this.bar?.undrag();\n    this.bar?.remove();\n    return null;\n  }\n\n  protected draw() {\n    const { x, y, width, height, r } = this.getDynamicAttr();\n    const bar = this.render.paper.rect(x, y, width, height, r).attr({\n      stroke: this.COLOR,\n      fill: this.COLOR,\n    });\n\n    /** @see https://dmitrybaranovskiy.github.io/raphael/reference.html#Element.drag */\n    bar.drag(\n      this.onDragMove,\n      this.onDragStart,\n      this.onDragEnd,\n      this,\n      this,\n      this,\n    );\n\n    return bar;\n  }\n\n  protected onDragStart(_x: number, _y: number, event: MouseEvent) {\n    this.viewBoxBeforeDrag = { ...this.render.viewBox };\n    event.stopPropagation();\n  }\n\n  protected onDragEnd(event: MouseEvent) {\n    event.stopPropagation();\n  }\n\n  abstract hasOffset(): boolean;\n  abstract getDynamicAttr(): RaphaelRectAttr;\n  abstract onDragMove(\n    dx: number,\n    dy: number,\n    x: number,\n    y: number,\n    event: MouseEvent,\n  ): void;\n}\n","import type { RenderOptions } from '../render.types';\n\nconst SCALE_FACTOR = 0.5;\n\n/**\n * To make scrollbar provide better UX, this function can help to achieve\n * moving scrollbar `x` offsets leads to moving viewBox `2 * x` offsets\n * */\nexport const getUserFriendlyScrollOffset = (offset: number) => {\n  return offset * SCALE_FACTOR;\n};\n\nexport const getUserFriendlyViewBoxDelta = (delta: number) => {\n  return delta / SCALE_FACTOR;\n};\n\nexport const getZoomedValue = (value: number, renderOptions: RenderOptions) => {\n  return value / renderOptions.zoom;\n};\n","import { clamp } from 'lodash';\nimport { Render } from '../raphaelRender';\nimport { ScrollOffset } from './scroll-offset';\nimport { Scrollbar } from './scrollbar';\nimport { RaphaelRectAttr } from './types';\nimport {\n  getUserFriendlyScrollOffset,\n  getUserFriendlyViewBoxDelta,\n  getZoomedValue,\n} from './utils';\n\nexport class VerticalScrollbar extends Scrollbar {\n  #scrollOffset: ScrollOffset;\n\n  constructor(render: Render, scrollOffset: ScrollOffset) {\n    super(render);\n    this.#scrollOffset = scrollOffset;\n  }\n\n  hasOffset(): boolean {\n    return this.#scrollOffset.hasVerticalOffset();\n  }\n\n  getDynamicAttr(): RaphaelRectAttr {\n    const minX =\n      this.render.viewBox.minX +\n      this.render.viewBox.width -\n      getZoomedValue(this.DIST_TO_EDGE, this.render.options);\n    const minY =\n      this.render.viewBox.minY +\n      clamp(\n        getUserFriendlyScrollOffset(this.#scrollOffset.up),\n        getZoomedValue(this.MARGIN, this.render.options),\n        this.render.viewBox.height -\n          getZoomedValue(this.MIN_LENGTH + this.MARGIN, this.render.options),\n      );\n    const maxY =\n      this.render.viewBox.minY +\n      this.render.viewBox.height -\n      clamp(\n        getUserFriendlyScrollOffset(this.#scrollOffset.down),\n        getZoomedValue(this.MARGIN, this.render.options),\n        this.render.viewBox.height,\n      );\n    const length = Math.max(\n      maxY - minY,\n      getZoomedValue(this.MIN_LENGTH, this.render.options),\n    );\n\n    return {\n      x: minX,\n      y: minY,\n      width: getZoomedValue(this.WIDTH, this.render.options),\n      height: length,\n      r: getZoomedValue(this.RADIUS, this.render.options),\n    };\n  }\n\n  onDragMove(\n    _dx: number,\n    dy: number,\n    _x: number,\n    _y: number,\n    _event: MouseEvent,\n  ): void {\n    if (!this.viewBoxBeforeDrag) {\n      return;\n    }\n\n    this.render.setViewBox({\n      ...this.viewBoxBeforeDrag,\n      minY: this.viewBoxBeforeDrag.minY + getUserFriendlyViewBoxDelta(dy),\n    });\n  }\n}\n","import { clamp } from 'lodash';\nimport { Render } from '../raphaelRender';\nimport { ScrollOffset } from './scroll-offset';\nimport { Scrollbar } from './scrollbar';\nimport { RaphaelRectAttr } from './types';\nimport {\n  getUserFriendlyScrollOffset,\n  getUserFriendlyViewBoxDelta,\n  getZoomedValue,\n} from './utils';\n\nexport class HorizontalScrollbar extends Scrollbar {\n  #scrollOffset: ScrollOffset;\n\n  constructor(render: Render, scrollOffset: ScrollOffset) {\n    super(render);\n    this.#scrollOffset = scrollOffset;\n  }\n\n  hasOffset(): boolean {\n    return this.#scrollOffset.hasHorizontalOffset();\n  }\n\n  getDynamicAttr(): RaphaelRectAttr {\n    const minX =\n      this.render.viewBox.minX +\n      clamp(\n        getUserFriendlyScrollOffset(this.#scrollOffset.left),\n        getZoomedValue(this.MARGIN, this.render.options),\n        this.render.viewBox.width -\n          getZoomedValue(this.MIN_LENGTH + this.MARGIN, this.render.options),\n      );\n    const minY =\n      this.render.viewBox.minY +\n      this.render.viewBox.height -\n      getZoomedValue(this.DIST_TO_EDGE, this.render.options);\n    const maxX =\n      this.render.viewBox.minX +\n      this.render.viewBox.width -\n      clamp(\n        getUserFriendlyScrollOffset(this.#scrollOffset.right),\n        getZoomedValue(this.MARGIN, this.render.options),\n        this.render.viewBox.width,\n      );\n    const length = Math.max(\n      maxX - minX,\n      getZoomedValue(this.MIN_LENGTH, this.render.options),\n    );\n\n    return {\n      x: minX,\n      y: minY,\n      width: length,\n      height: getZoomedValue(this.WIDTH, this.render.options),\n      r: getZoomedValue(this.RADIUS, this.render.options),\n    };\n  }\n\n  onDragMove(\n    dx: number,\n    _dy: number,\n    _x: number,\n    _y: number,\n    _event: MouseEvent,\n  ): void {\n    if (!this.viewBoxBeforeDrag) {\n      return;\n    }\n\n    this.render.setViewBox({\n      ...this.viewBoxBeforeDrag,\n      minX: this.viewBoxBeforeDrag.minX + getUserFriendlyViewBoxDelta(dx),\n    });\n  }\n}\n","import { Render } from '../raphaelRender';\nimport { ScrollOffset } from './scroll-offset';\nimport { VerticalScrollbar } from './scrollbar-vertical';\nimport { HorizontalScrollbar } from './scrollbar-horizontal';\n\nexport class ScrollbarContainer {\n  #scrollOffset: ScrollOffset;\n  #verticalBar: VerticalScrollbar | null = null;\n  #horizontalBar: HorizontalScrollbar | null = null;\n\n  constructor(render: Render) {\n    this.#scrollOffset = new ScrollOffset(render);\n    this.#verticalBar = new VerticalScrollbar(render, this.#scrollOffset);\n    this.#horizontalBar = new HorizontalScrollbar(render, this.#scrollOffset);\n  }\n\n  update() {\n    this.#scrollOffset.update();\n    this.#verticalBar?.update();\n    this.#horizontalBar?.update();\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Box2Abs, Struct, Vec2 } from 'domain/entities';\nimport { RaphaelPaper } from 'raphael';\n\nimport Raphael from './raphael-ext';\nimport { ReStruct } from './restruct';\nimport { Scale } from 'domain/helpers';\nimport defaultOptions from './options';\nimport draw from './draw';\nimport { RenderOptions, ViewBox } from './render.types';\nimport { KetcherLogger } from 'utilities';\nimport { CoordinateTransformation } from './coordinateTransformation';\nimport { ScrollbarContainer } from './scrollbar';\nimport { notifyRenderComplete } from './notifyRenderComplete';\n\nexport class Render {\n  public skipRaphaelInitialization = false;\n  public readonly clientArea: HTMLElement;\n  public readonly paper: RaphaelPaper;\n  // TODO https://github.com/epam/ketcher/issues/2631\n  public sz: Vec2;\n  // TODO https://github.com/epam/ketcher/issues/2630\n  public ctab: ReStruct;\n  public options: RenderOptions;\n  public viewBox!: ViewBox;\n  private readonly userOpts: RenderOptions;\n  private oldCb: Box2Abs | null = null;\n  private scrollbar: ScrollbarContainer;\n  private resizeObserver: ResizeObserver | null = null;\n\n  constructor(\n    clientArea: HTMLElement,\n    options: RenderOptions,\n    reuseRestructIfExist?: boolean,\n  ) {\n    this.userOpts = options;\n    this.clientArea = clientArea;\n    this.paper = new Raphael(\n      clientArea,\n      options.width || '100%',\n      options.height || '100%',\n    );\n    this.sz = this.getCanvasSizeVector();\n    this.options = defaultOptions(this.userOpts);\n    if (reuseRestructIfExist && global.ketcher?.editor?.render?.ctab) {\n      this.ctab = global.ketcher?.editor?.render?.ctab;\n      this.ctab.render = this;\n      this.ctab.initLayers();\n      this.ctab.update(true);\n    } else {\n      this.ctab = new ReStruct(new Struct(), this);\n    }\n    this.scrollbar = new ScrollbarContainer(this);\n    this.setViewBox({\n      minX: 0,\n      minY: 0,\n      width: this.sz.x,\n      height: this.sz.y,\n    });\n  }\n\n  observeCanvasResize = () => {\n    this.resizeObserver = new ResizeObserver(() => {\n      this.sz = this.getCanvasSizeVector();\n      this.resizeViewBox();\n    });\n\n    this.resizeObserver.observe(this.paper.canvas);\n  };\n\n  unobserveCanvasResize = () => {\n    this.resizeObserver?.unobserve(this.paper.canvas);\n  };\n\n  updateOptions(opts: string) {\n    try {\n      const passedOptions = JSON.parse(opts);\n      if (passedOptions && typeof passedOptions === 'object') {\n        this.options = { ...this.options, ...passedOptions };\n        return this.options;\n      }\n    } catch (e) {\n      KetcherLogger.error('raphaelRenderer.ts::updateOptions', e);\n      console.log('Not a valid settings object');\n    }\n    return false;\n  }\n\n  selectionPolygon(polygon: Vec2[]) {\n    return draw.selectionPolygon(this.paper, polygon, this.options);\n  }\n\n  selectionLine(point0: Vec2, point1: Vec2) {\n    return draw.selectionLine(this.paper, point0, point1, this.options);\n  }\n\n  selectionRectangle(point0: Vec2, point1: Vec2) {\n    return draw.selectionRectangle(this.paper, point0, point1, this.options);\n  }\n\n  /** @deprecated recommend using `CoordinateTransformation.pageToModel` instead */\n  page2obj(event: MouseEvent | { clientX: number; clientY: number }) {\n    return CoordinateTransformation.pageToModel(event, this);\n  }\n\n  setZoom(zoom: number, event?: WheelEvent) {\n    const zoomedWidth = this.sz.x / zoom;\n    const zoomedHeight = this.sz.y / zoom;\n    const [viewBoxX, viewBoxY] = event\n      ? this.zoomOnMouse(event, zoomedWidth, zoomedHeight)\n      : this.zoomOnCanvasCenter(zoomedWidth, zoomedHeight);\n    this.setViewBox({\n      minX: viewBoxX,\n      minY: viewBoxY,\n      width: zoomedWidth,\n      height: zoomedHeight,\n    });\n\n    this.options.zoom = zoom;\n  }\n\n  private getCanvasSizeVector() {\n    return this.userOpts.width\n      ? new Vec2(this.userOpts.width, this.userOpts.height)\n      : new Vec2(this.clientArea.clientWidth, this.clientArea.clientHeight);\n  }\n\n  resizeViewBox() {\n    this.sz = this.getCanvasSizeVector();\n    const newWidth = this.sz.x / this.options.zoom;\n    const newHeight = this.sz.y / this.options.zoom;\n    this.setViewBox((prev) => ({\n      ...prev,\n      width: newWidth,\n      height: newHeight,\n    }));\n  }\n\n  private zoomOnCanvasCenter(zoomedWidth: number, zoomedHeight: number) {\n    const fixedPoint = new Vec2(\n      this.viewBox.minX + this.viewBox.width / 2,\n      this.viewBox.minY + this.viewBox.height / 2,\n    );\n    const viewBoxX = fixedPoint.x - zoomedWidth / 2;\n    const viewBoxY = fixedPoint.y - zoomedHeight / 2;\n    return [viewBoxX, viewBoxY];\n  }\n\n  private zoomOnMouse(\n    event: WheelEvent,\n    zoomedWidth: number,\n    zoomedHeight: number,\n  ) {\n    const fixedPoint = CoordinateTransformation.pageToCanvas(event, this);\n    const widthRatio = (fixedPoint.x - this.viewBox.minX) / this.viewBox.width;\n    const heightRatio =\n      (fixedPoint.y - this.viewBox.minY) / this.viewBox.height;\n    const viewBoxX = fixedPoint.x - zoomedWidth * widthRatio;\n    const viewBoxY = fixedPoint.y - zoomedHeight * heightRatio;\n    return [viewBoxX, viewBoxY];\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/viewBox\n   */\n  setViewBox(func: (viewBox: ViewBox) => ViewBox): void;\n  setViewBox(viewBox: ViewBox): void;\n  setViewBox(arg: ViewBox | ((viewBox: ViewBox) => ViewBox)): void {\n    const newViewBox = typeof arg === 'function' ? arg(this.viewBox) : arg;\n    this.viewBox = newViewBox;\n    this.paper.canvas.setAttribute(\n      'viewBox',\n      `${newViewBox.minX} ${newViewBox.minY} ${newViewBox.width} ${newViewBox.height}`,\n    );\n    this.scrollbar.update();\n  }\n\n  setMolecule(struct: Struct, forceUpdateWithTimeout = false) {\n    this.paper.clear();\n    this.ctab = new ReStruct(struct, this);\n    this.options.offset = new Vec2();\n    // need to use force update with timeout to have ability select bonds in case of usage:\n    // addFragment, setMolecule or \"Paste from clipboard\" with \"Open as New Project\" button\n    if (forceUpdateWithTimeout) {\n      setTimeout(() => {\n        this.update(true);\n      }, 0);\n    } else {\n      this.update(false);\n    }\n  }\n\n  update(force = false, viewSz: Vec2 | null = null) {\n    // eslint-disable-line max-statements\n    viewSz =\n      viewSz ||\n      new Vec2(\n        this.userOpts.width || this.clientArea.clientWidth || 100,\n        this.userOpts.height || this.clientArea.clientHeight || 100,\n      );\n\n    const changes = this.ctab.update(force);\n    this.ctab.setSelection(); // [MK] redraw the selection bits where necessary\n    if (changes) {\n      const bb = this.ctab\n        .getVBoxObj()\n        .transform(Scale.modelToCanvas, this.options)\n        .translate(this.options.offset || new Vec2());\n\n      if (this.options.downScale) {\n        this.ctab.molecule.rescale();\n      }\n\n      const isAutoScale = this.options.autoScale || this.options.downScale;\n      if (!isAutoScale) {\n        if (!this.oldCb) this.oldCb = new Box2Abs();\n        this.scrollbar.update();\n        this.options.offset = this.options.offset || new Vec2();\n      } else {\n        const sz1 = bb.sz();\n        const marg = this.options.autoScaleMargin;\n        const mv = new Vec2(marg, marg);\n        const csz = viewSz;\n        if (marg && (csz.x < 2 * marg + 1 || csz.y < 2 * marg + 1)) {\n          throw new Error('View box too small for the given margin');\n        }\n        let rescale =\n          this.options.rescaleAmount ||\n          Math.max(sz1.x / (csz.x - 2 * marg), sz1.y / (csz.y - 2 * marg));\n\n        const isForceDownscale = this.options.downScale && rescale < 1;\n        const isBondsLengthFit = this.options.maxBondLength / rescale > 1;\n        if (isBondsLengthFit || isForceDownscale) {\n          rescale = 1;\n        }\n        const sz2 = sz1.add(mv.scaled(2 * rescale));\n        this.paper.setViewBox(\n          bb.pos().x - marg * rescale - (csz.x * rescale - sz2.x) / 2,\n          bb.pos().y - marg * rescale - (csz.y * rescale - sz2.y) / 2,\n          csz.x * rescale,\n          csz.y * rescale,\n        );\n      }\n\n      notifyRenderComplete();\n    }\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n// todo: rename file in another PR\nimport { ReStruct, StereLabelStyleType } from '../../render';\n\nimport { OperationType } from './OperationType';\n\ntype ValueOf<TObject extends object> = Readonly<TObject[keyof TObject]>;\ntype OperationType = ValueOf<typeof OperationType>;\n\nclass BaseOperation {\n  // eslint-disable-next-line no-use-before-define\n  private _inverted: BaseOperation | undefined;\n  type: OperationType;\n  priority: number;\n  data: any;\n\n  constructor(type: OperationType, priority = 0) {\n    this.type = type;\n    this.priority = priority;\n  }\n\n  execute(_restruct: ReStruct): void {\n    throw new Error('Operation.execute() is not implemented');\n  }\n\n  perform(restruct: ReStruct): BaseOperation {\n    this.execute(restruct);\n    if (!this._inverted) {\n      this._inverted = this.invert();\n      this._inverted._inverted = this;\n    }\n    return this._inverted;\n  }\n\n  invert(): BaseOperation {\n    throw new Error('Operation.invert() is not implemented');\n  }\n\n  isDummy(_restruct: ReStruct): boolean {\n    return false;\n  }\n\n  protected static invalidateAtom(restruct: ReStruct, atomId: number, level?) {\n    const atom = restruct.atoms.get(atomId);\n    if (!atom) {\n      return;\n    }\n\n    restruct.markAtom(atomId, level ? 1 : 0);\n\n    const halfBonds = restruct.molecule.halfBonds;\n\n    atom.a.neighbors.forEach((halfBondId) => {\n      if (!halfBonds.has(halfBondId)) {\n        return;\n      }\n\n      const halfBond = halfBonds.get(halfBondId);\n      if (!halfBond) {\n        return;\n      }\n\n      restruct.markBond(halfBond.bid, 1);\n      restruct.markAtom(halfBond.end, 0);\n\n      if (level) {\n        BaseOperation.invalidateLoop(restruct, halfBond.bid);\n      }\n    });\n\n    const fragment = atom.a.fragment;\n    const stereoLabelStyle = restruct.render.options.stereoLabelStyle;\n\n    restruct.atoms.forEach((atom, atomId) => {\n      if (\n        stereoLabelStyle === StereLabelStyleType.IUPAC ||\n        stereoLabelStyle === StereLabelStyleType.Classic\n      ) {\n        if (atom.a.fragment === fragment) restruct.markAtom(atomId, 0);\n      }\n    });\n  }\n\n  protected static invalidateLoop(restruct: ReStruct, bondId: number) {\n    const bond = restruct.bonds.get(bondId);\n    if (!bond || !bond.b.hb1 || !bond.b.hb2) {\n      return;\n    }\n\n    const halfBond1 = restruct.molecule.halfBonds.get(bond.b.hb1);\n    const halfBond2 = restruct.molecule.halfBonds.get(bond.b.hb2);\n\n    if (halfBond1 && halfBond1.loop >= 0) {\n      restruct.loopRemove(halfBond1.loop);\n    }\n\n    if (halfBond2 && halfBond2.loop >= 0) {\n      restruct.loopRemove(halfBond2.loop);\n    }\n  }\n\n  protected static invalidateBond(restruct: ReStruct, bondId: number) {\n    BaseOperation.invalidateLoop(restruct, bondId);\n\n    const bond = restruct.bonds.get(bondId);\n    if (!bond) {\n      return;\n    }\n    BaseOperation.invalidateAtom(restruct, bond.b.begin, 0);\n    BaseOperation.invalidateAtom(restruct, bond.b.end, 0);\n  }\n\n  protected static invalidateItem(\n    restruct: ReStruct,\n    mapName: keyof typeof ReStruct.maps,\n    id: number,\n    level?: any,\n  ) {\n    if (mapName === 'atoms') {\n      BaseOperation.invalidateAtom(restruct, id, level);\n      return;\n    }\n\n    if (mapName === 'bonds') {\n      BaseOperation.invalidateBond(restruct, id);\n\n      if (level > 0) {\n        BaseOperation.invalidateLoop(restruct, id);\n      }\n      return;\n    }\n\n    restruct.markItem(mapName, id, level);\n  }\n\n  protected static invalidateEnhancedFlag(\n    restruct: ReStruct,\n    fragmentId: number,\n  ) {\n    BaseOperation.invalidateItem(restruct, 'enhancedFlags', fragmentId, 1);\n  }\n}\n\nexport { BaseOperation };\nexport default BaseOperation;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const OperationType = Object.freeze({\n  ATOM_ADD: 'Add atom',\n  ATOM_DELETE: 'Delete atom',\n  ATOM_ATTR: 'Set atom attribute',\n  ATOM_MOVE: 'Move atom',\n  CALC_IMPLICIT_H: 'Calculate implicit hydrogen',\n  BOND_ADD: 'Add bond',\n  BOND_DELETE: 'Delete bond',\n  BOND_ATTR: 'Set bond attribute',\n  BOND_MOVE: 'Move bond',\n  LOOP_MOVE: 'Move loop',\n  S_GROUP_ATTACHMENT_POINT_ADD: 'Add attachment point to s-group',\n  S_GROUP_ATTACHMENT_POINT_REMOVE: 'Remove attachment point from s-group',\n  S_GROUP_ATOM_ADD: 'Add atom to s-group',\n  S_GROUP_ATOM_REMOVE: 'Remove atom from s-group',\n  S_GROUP_ATTR: 'Set s-group attribute',\n  S_GROUP_CREATE: 'Create s-group',\n  S_GROUP_DELETE: 'Delete s-group',\n  S_GROUP_ADD_TO_HIERACHY: 'Add s-group to hierarchy',\n  S_GROUP_REMOVE_FROM_HIERACHY: 'Delete s-group from hierarchy',\n  R_GROUP_ATTR: 'Set r-group attribute',\n  R_GROUP_FRAGMENT: 'R-group fragment',\n  R_GROUP_ATTACHMENT_POINT_ADD: 'Add R-group attachment point',\n  R_GROUP_ATTACHMENT_POINT_REMOVE: 'Remove R-group attachment point',\n  UPDATE_IF_THEN: 'Update',\n  RESTORE_IF_THEN: 'Restore',\n  RXN_ARROW_ADD: 'Add rxn arrow',\n  RXN_ARROW_DELETE: 'Delete rxn arrow',\n  RXN_ARROW_MOVE: 'Move rxn arrow',\n  RXN_ARROW_ROTATE: 'Rotate rxn arrow',\n  RXN_ARROW_RESIZE: 'Resize rxn arrow',\n  RXN_PLUS_ADD: 'Add rxn plus',\n  RXN_PLUS_DELETE: 'Delete rxn plus',\n  RXN_PLUS_MOVE: 'Move rxn plus',\n  S_GROUP_DATA_MOVE: 'Move s-group data',\n  CANVAS_LOAD: 'Load canvas',\n  ALIGN_DESCRIPTORS: 'Align descriptors',\n  SIMPLE_OBJECT_ADD: 'Add simple object',\n  SIMPLE_OBJECT_DELETE: 'Delete simple object',\n  SIMPLE_OBJECT_MOVE: 'Move simple object',\n  SIMPLE_OBJECT_RESIZE: 'Resize simple object',\n  RESTORE_DESCRIPTORS_POSITION: 'Restore descriptors position',\n  FRAGMENT_ADD: 'Add fragment',\n  FRAGMENT_DELETE: 'Delete fragment',\n  FRAGMENT_SET_PROPERTIES: 'Set fragment properties',\n  FRAGMENT_STEREO_FLAG: 'Add fragment stereo flag',\n  FRAGMENT_ADD_STEREO_ATOM: 'Add stereo atom to fragment',\n  FRAGMENT_DELETE_STEREO_ATOM: 'Delete stereo atom from fragment',\n  ENHANCED_FLAG_MOVE: 'Move enhanced flag',\n  TEXT_CREATE: 'Add text',\n  TEXT_UPDATE: 'Edit text',\n  TEXT_DELETE: 'Delete text',\n  TEXT_MOVE: 'Move text',\n  ADD_HIGHLIGHT: 'Highlight',\n  UPDATE_HIGHLIGHT: 'Update highlight',\n  REMOVE_HIGHLIGHT: 'Remove highlight',\n  POLYMER_BOND_ADD: 'Add polymer bond',\n  POLYMER_BOND_DELETE: 'Remove polymer bond',\n  POLYMER_BOND_MOVE: 'Move polymer bond',\n  POLYMER_BOND_FINISH_CREATION: 'Finish polymer bond creation',\n  POLYMER_BOND_CANCEL_CREATION: 'Cancel polymer bond creation',\n  PEPTIDE_ADD: 'Add peptide',\n  PEPTIDE_REMOVE: 'Remove peptide',\n  PEPTIDE_MOVE: 'Move peptide',\n  PEPTIDE_HOVER: 'Hover peptide',\n  DRAWING_ENTITY_SELECT: 'Select drawing entity',\n  DRAWING_ENTITY_HOVER: 'Hover drawing entity',\n  SHOW_POLYMER_BOND_INFORMATION: 'Show polymer bond information',\n  IMAGE_UPSERT: 'Upsert image',\n  IMAGE_DELETE: 'Delete image',\n  IMAGE_MOVE: 'Move image',\n  IMAGE_RESIZE: 'Resize image',\n  MULTITAIL_ARROW_UPSERT: 'Upsert multitail arrow',\n  MULTITAIL_ARROW_DELETE: 'Delete multitail arrow',\n  MULTITAIL_ARROW_MOVE: 'Move multitail arrow',\n  MULTITAIL_ARROW_ADD_TAIL: 'Add multitail arrow tail',\n  MULTITAIL_ARROW_REMOVE_TAIL: 'Remove multitail arrow tail',\n  MULTITAIL_ARROW_RESIZE_HEAD_TAIL: 'Resize head tail',\n  MULTITAIL_ARROW_MOVE_HEAD_TAIL: 'Move head tail',\n});\n\nexport enum OperationPriority {\n  ATOM_ATTR = 1,\n  BOND_ADD = 1,\n  R_GROUP_ATTACHMENT_POINT_REMOVE = 1,\n  ATOM_MOVE = 2,\n  BOND_ATTR = 2,\n  BOND_MOVE = 2,\n  BOND_DELETE = 3,\n  S_GROUP_ATOM_ADD = 3,\n  S_GROUP_ATTACHMENT_POINT_ADD = 3,\n  R_GROUP_ATTACHMENT_POINT_ADD = 3,\n  S_GROUP_ATTR = 4,\n  ATOM_DELETE = 5,\n  FRAGMENT_STEREO_FLAG = 6,\n  CALC_IMPLICIT_H = 10,\n  FRAGMENT_DELETE_STEREO_ATOM = 90,\n  S_GROUP_DELETE = 95,\n  S_GROUP_ADD_TO_HIERACHY = 100,\n  FRAGMENT_ADD_STEREO_ATOM = 100,\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\n\ntype Data = {\n  aid?: any;\n  attribute?: any;\n  value?: any;\n};\n\nexport class AtomAttr extends BaseOperation {\n  data: Data | null;\n  data2: Data | null;\n\n  constructor(atomId?: any, attribute?: any, value?: any) {\n    super(OperationType.ATOM_ATTR, OperationPriority.ATOM_ATTR);\n    this.data = { aid: atomId, attribute, value };\n    this.data2 = null;\n  }\n\n  execute(restruct: ReStruct) {\n    if (this.data) {\n      const { aid, attribute, value } = this.data;\n\n      const atom = restruct.molecule.atoms.get(aid)!;\n      if (!this.data2) {\n        this.data2 = {\n          aid,\n          attribute,\n          value: atom[attribute],\n        };\n      }\n\n      atom[attribute] = value;\n      BaseOperation.invalidateAtom(restruct, aid);\n    }\n  }\n\n  invert() {\n    const inverted = new AtomAttr();\n    inverted.data = this.data2;\n    inverted.data2 = this.data;\n    return inverted;\n  }\n\n  isDummy(restruct: ReStruct) {\n    return (\n      restruct.molecule.atoms.get(this.data?.aid)![this.data?.attribute] ===\n      this.data?.value\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\nimport { Scale } from 'domain/helpers';\n\nexport class AtomMove extends BaseOperation {\n  data: {\n    aid: any;\n    d: any;\n    noinvalidate: any;\n  };\n\n  constructor(atomId?: any, d?: any, noinvalidate?: any) {\n    super(OperationType.ATOM_MOVE, OperationPriority.ATOM_MOVE);\n    this.data = { aid: atomId, d, noinvalidate };\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const { aid, d } = this.data;\n    const atom = struct.atoms.get(aid);\n    if (!atom) return;\n    atom!.pp.add_(d); // eslint-disable-line no-underscore-dangle\n    const reatom = restruct.atoms.get(aid);\n    if (reatom) {\n      const scaled = Scale.modelToCanvas(d, restruct.render.options);\n      reatom.visel.translate(scaled);\n    }\n\n    this.data.d = d.negated();\n\n    if (!this.data.noinvalidate) {\n      BaseOperation.invalidateAtom(restruct, aid, 1);\n    }\n  }\n\n  invert() {\n    const inverted = new AtomMove();\n    inverted.data = this.data;\n    return inverted;\n  }\n\n  isDummy() {\n    const { d } = this.data;\n    return d.x === 0 && d.y === 0;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { Atom, Pile, Vec2 } from 'domain/entities';\nimport { ReAtom, ReStruct } from '../../../render';\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype Data = {\n  aid: any;\n  atom: any;\n  pos: any;\n};\n\nclass AtomAdd extends BaseOperation {\n  data: Data;\n\n  constructor(atom?: any, pos?: any) {\n    super(OperationType.ATOM_ADD);\n    this.data = { atom, pos, aid: null };\n  }\n\n  execute(restruct: ReStruct) {\n    const { atom, pos } = this.data;\n\n    const struct = restruct.molecule;\n\n    const pp: { label: string } = { label: '' };\n    if (atom) {\n      Object.keys(atom).forEach((p) => {\n        pp[p] = atom[p];\n      });\n    }\n\n    pp.label = pp.label || 'C';\n    if (typeof this.data.aid !== 'number') {\n      this.data.aid = struct.atoms.add(new Atom(pp));\n    } else {\n      struct.atoms.set(this.data.aid, new Atom(pp));\n    }\n\n    const { aid } = this.data;\n\n    // notifyAtomAdded\n    const atomData = new ReAtom(struct.atoms.get(aid)!);\n\n    atomData.component = restruct.connectedComponents.add(new Pile([aid]));\n    restruct.atoms.set(aid, atomData);\n    restruct.markAtom(aid, 1);\n\n    struct.atomSetPos(aid, new Vec2(pos));\n\n    const arrow = struct.rxnArrows.get(0);\n    if (arrow) {\n      const atom = struct.atoms.get(aid)!;\n      atom.rxnFragmentType = struct.defineRxnFragmentTypeForAtomset(\n        new Pile([aid]),\n        arrow.pos[0].x,\n      );\n    }\n  }\n\n  invert() {\n    const inverted = new AtomDelete();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nclass AtomDelete extends BaseOperation {\n  data: Data;\n\n  constructor(atomId?: any) {\n    super(OperationType.ATOM_DELETE, OperationPriority.ATOM_DELETE);\n    this.data = { aid: atomId, atom: null, pos: null };\n  }\n\n  execute(restruct: ReStruct) {\n    const { aid } = this.data;\n\n    const struct = restruct.molecule;\n    if (!this.data.atom) {\n      this.data.atom = struct.atoms.get(aid);\n      this.data.pos = this.data.atom.pp;\n    }\n\n    // notifyAtomRemoved(aid);\n    const restructedAtom = restruct.atoms.get(aid);\n    if (!restructedAtom) {\n      return;\n    }\n\n    const set = restruct.connectedComponents.get(restructedAtom.component);\n    set.delete(aid);\n    if (set.size === 0) {\n      restruct.connectedComponents.delete(restructedAtom.component);\n    }\n\n    restruct.clearVisel(restructedAtom.visel);\n    restruct.atoms.delete(aid);\n    restruct.markItemRemoved();\n    struct.atoms.delete(aid);\n  }\n\n  invert() {\n    const inverted = new AtomAdd();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nexport { AtomAdd, AtomDelete };\nexport * from './AtomAttr';\nexport * from './AtomMove';\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\n\ntype Data = {\n  bid: any;\n  attribute: any;\n  value: any;\n  needInvalidateBond?: boolean;\n};\n\nexport class BondAttr extends BaseOperation {\n  data: Data | null;\n  data2: Data | null;\n\n  constructor(\n    bondId?: any,\n    attribute?: any,\n    value?: any,\n    needInvalidateBond = true,\n  ) {\n    super(OperationType.BOND_ATTR, OperationPriority.BOND_ATTR);\n    this.data = { bid: bondId, attribute, value, needInvalidateBond };\n    this.data2 = null;\n  }\n\n  execute(restruct: ReStruct) {\n    if (this.data) {\n      const { attribute, bid, value } = this.data;\n      const bond = restruct.molecule.bonds.get(bid)!;\n\n      if (!this.data2) {\n        this.data2 = {\n          bid,\n          attribute,\n          value: bond[attribute],\n        };\n      }\n\n      bond[attribute] = value;\n\n      if (this.data.needInvalidateBond) {\n        BaseOperation.invalidateBond(restruct, bid);\n      }\n      if (attribute === 'type') {\n        BaseOperation.invalidateLoop(restruct, bid);\n      }\n    }\n  }\n\n  isDummy(restruct: ReStruct) {\n    if (this.data) {\n      const { attribute, bid, value } = this.data;\n      const bond = restruct.molecule.bonds.get(bid)!;\n      return bond[attribute] === value;\n    }\n    return false;\n  }\n\n  invert() {\n    const inverted = new BondAttr();\n    inverted.data = this.data2;\n    inverted.data2 = this.data;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\nimport { Scale } from 'domain/helpers';\n\nexport class BondMove extends BaseOperation {\n  data: {\n    bid: any;\n    d: any;\n  };\n\n  constructor(bondId?: any, d?: any) {\n    super(OperationType.BOND_MOVE, OperationPriority.BOND_MOVE);\n    this.data = { bid: bondId, d };\n  }\n\n  execute(restruct: ReStruct) {\n    const { bid, d } = this.data;\n    const bond = restruct.bonds.get(bid);\n    if (!bond) return;\n\n    const scaled = Scale.modelToCanvas(d, restruct.render.options);\n    bond.visel.translate(scaled);\n    this.data.d = d.negated();\n  }\n\n  invert() {\n    const inverted = new BondMove();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { ReBond, ReStruct } from '../../../render';\n\nimport { BaseOperation } from '../base';\nimport { Bond } from 'domain/entities';\nimport { OperationPriority, OperationType } from '../OperationType';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype Data = {\n  bond: any;\n  begin: any;\n  end: any;\n  bid: any;\n  needInvalidateAtoms?: boolean;\n};\n\nclass BondAdd extends BaseOperation {\n  data: Data;\n\n  constructor(begin?: any, end?: any, bond?: any, needInvalidateAtoms = true) {\n    super(OperationType.BOND_ADD, OperationPriority.BOND_ADD);\n    this.data = { bond, begin, end, bid: null, needInvalidateAtoms };\n  }\n\n  execute(restruct: ReStruct) {\n    const { begin, bond, end } = this.data;\n    // eslint-disable-line max-statements\n    const struct = restruct.molecule;\n\n    if (begin === end) {\n      throw new Error('Distinct atoms expected');\n    }\n\n    if (this.data.needInvalidateAtoms) {\n      BaseOperation.invalidateAtom(restruct, begin, 1);\n      BaseOperation.invalidateAtom(restruct, end, 1);\n    }\n\n    const pp: {\n      type: number;\n      begin: number;\n      end: number;\n    } = {\n      type: 0,\n      begin: 0,\n      end: 0,\n    };\n\n    if (bond) {\n      Object.keys(bond).forEach((p) => {\n        pp[p] = bond[p];\n      });\n    }\n\n    pp.type = pp.type || Bond.PATTERN.TYPE.SINGLE;\n    pp.begin = begin;\n    pp.end = end;\n\n    const newBond = new Bond(pp);\n    if (typeof this.data.bid === 'number') {\n      struct.bonds.set(this.data.bid, newBond);\n    } else {\n      this.data.bid = struct.bonds.add(newBond);\n    }\n\n    const { bid } = this.data;\n    const structBond = struct.bonds.get(bid)!;\n\n    struct.bondInitHalfBonds(bid);\n    struct.atomAddNeighbor(structBond.hb1);\n    struct.atomAddNeighbor(structBond.hb2);\n\n    // notifyBondAdded\n    restruct.bonds.set(bid, new ReBond(structBond));\n    restruct.markBond(bid, 1);\n  }\n\n  invert() {\n    const inverted = new BondDelete();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nclass BondDelete extends BaseOperation {\n  data: Data;\n\n  constructor(bondId?: any) {\n    super(OperationType.BOND_DELETE, OperationPriority.BOND_DELETE);\n    this.data = {\n      bid: bondId,\n      bond: null,\n      begin: null,\n      end: null,\n      needInvalidateAtoms: true,\n    };\n  }\n\n  execute(restruct: ReStruct) {\n    const { bid } = this.data;\n\n    // eslint-disable-line max-statements\n    const struct = restruct.molecule;\n    if (!this.data.bond) {\n      this.data.bond = struct.bonds.get(bid);\n      this.data.begin = this.data.bond.begin;\n      this.data.end = this.data.bond.end;\n    }\n\n    BaseOperation.invalidateBond(restruct, bid);\n\n    // notifyBondRemoved\n    const rebond = restruct.bonds.get(bid);\n    if (!rebond) return;\n    [rebond.b.hb1, rebond.b.hb2].forEach((hbid) => {\n      if (hbid === undefined) return;\n      const halfBond = restruct.molecule.halfBonds.get(hbid);\n      if (halfBond && halfBond.loop >= 0) {\n        restruct.loopRemove(halfBond.loop);\n      }\n    }, restruct);\n    restruct.clearVisel(rebond.visel);\n    restruct.bonds.delete(bid);\n    restruct.markItemRemoved();\n\n    const structBond = struct.bonds.get(bid)!;\n    [structBond.hb1, structBond.hb2].forEach((hbid) => {\n      const halfBond = struct.halfBonds.get(hbid!);\n      if (!halfBond) {\n        return;\n      }\n\n      const atom = struct.atoms.get(halfBond.begin)!;\n      const pos = atom.neighbors.indexOf(hbid!);\n      const prev = (pos + atom.neighbors.length - 1) % atom.neighbors.length;\n      const next = (pos + 1) % atom.neighbors.length;\n      struct.setHbNext(atom.neighbors[prev], atom.neighbors[next]);\n      atom.neighbors.splice(pos, 1);\n    });\n    struct.halfBonds.delete(structBond.hb1!);\n    struct.halfBonds.delete(structBond.hb2!);\n\n    struct.bonds.delete(bid);\n  }\n\n  invert() {\n    const inverted = new BondAdd();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nexport { BondAdd, BondDelete };\nexport * from './BondAttr';\nexport * from './BondMove';\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from './base';\nimport { OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\nimport { Struct } from 'domain/entities';\n\nexport class CanvasLoad extends BaseOperation {\n  data: {\n    struct?: Struct;\n  };\n\n  constructor(struct?: Struct) {\n    super(OperationType.CANVAS_LOAD);\n    this.data = { struct };\n  }\n\n  execute(restruct: ReStruct) {\n    const oldStruct = restruct.molecule;\n    restruct.clearVisels(); // TODO: What is it?\n    if (this.data.struct) {\n      restruct.render.setMolecule(this.data.struct, true);\n    }\n\n    this.data.struct = oldStruct;\n  }\n\n  invert() {\n    const inverted = new CanvasLoad();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { BaseOperation } from './base';\nimport { OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\nimport { Vec2 } from 'domain/entities';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\nclass AlignDescriptors extends BaseOperation {\n  history: any;\n\n  constructor() {\n    super(OperationType.ALIGN_DESCRIPTORS);\n    this.history = {};\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const sgroups: any[] = Array.from(struct.sgroups.values()).reverse();\n\n    const structBox: any = struct.getCoordBoundingBoxObj();\n    let alignPoint = new Vec2(structBox.max.x, structBox.min.y).add(\n      new Vec2(2.0, -1.0),\n    );\n\n    sgroups.forEach((sgroup) => {\n      this.history[sgroup.id] = new Vec2(sgroup.pp);\n      alignPoint = alignPoint.add(new Vec2(0.0, 0.5));\n      sgroup.pp = alignPoint;\n      struct.sgroups.set(sgroup.id, sgroup);\n      BaseOperation.invalidateItem(restruct, 'sgroupData', sgroup.id, 1);\n    });\n  }\n\n  invert() {\n    return new RestoreDescriptorsPosition(this.history);\n  }\n}\n\nclass RestoreDescriptorsPosition extends BaseOperation {\n  history: any;\n\n  constructor(history: any) {\n    super(OperationType.RESTORE_DESCRIPTORS_POSITION);\n    this.history = history;\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const sgroups: any[] = Array.from(struct.sgroups.values());\n\n    sgroups.forEach((sgroup) => {\n      sgroup.pp = this.history[sgroup.id];\n      struct.sgroups.set(sgroup.id, sgroup);\n      BaseOperation.invalidateItem(restruct, 'sgroupData', sgroup.id, 1);\n    });\n  }\n\n  invert() {\n    return new AlignDescriptors();\n  }\n}\n\nexport { AlignDescriptors, RestoreDescriptorsPosition };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Fragment, Vec2 } from 'domain/entities';\n\nimport { BaseOperation } from './base';\nimport { OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\n\nexport class EnhancedFlagMove extends BaseOperation {\n  data: {\n    frid: any;\n    p: any;\n  };\n\n  constructor(fragmentId?: any, p?: any) {\n    super(OperationType.ENHANCED_FLAG_MOVE);\n    this.data = { frid: fragmentId, p };\n  }\n\n  execute(restruct: ReStruct) {\n    const { frid } = this.data;\n    const { p } = this.data;\n    const fragment = restruct.molecule.frags.get(frid);\n    if (!fragment) return;\n\n    const currentPosition = fragment.stereoFlagPosition\n      ? new Vec2(fragment.stereoFlagPosition.x, fragment.stereoFlagPosition.y)\n      : Fragment.getDefaultStereoFlagPosition(restruct.molecule, frid)!;\n\n    const newPosition = Vec2.sum(currentPosition, p);\n    fragment.stereoFlagPosition = newPosition;\n\n    this.data.p = p.negated();\n    BaseOperation.invalidateItem(restruct, 'enhancedFlags', frid, 1);\n  }\n\n  invert() {\n    const inverted = new EnhancedFlagMove();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { BaseOperation } from './base';\nimport { OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\nclass UpdateIfThen extends BaseOperation {\n  rgid_new: any;\n  rgid_old: any;\n  ifThenHistory: any;\n  skipRgids: any[];\n\n  constructor(rgNew: any, rgOld: any, skipRgids: any = []) {\n    super(OperationType.UPDATE_IF_THEN);\n    this.rgid_new = rgNew;\n    this.rgid_old = rgOld;\n    this.ifThenHistory = new Map();\n    this.skipRgids = skipRgids || [];\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n\n    struct.rgroups.forEach((rg, rgid) => {\n      if (rg.ifthen === this.rgid_old && !this.skipRgids.includes(rgid)) {\n        rg.ifthen = this.rgid_new;\n        this.ifThenHistory.set(rgid, this.rgid_old);\n        struct.rgroups.set(rgid, rg);\n      }\n    });\n  }\n\n  invert() {\n    return new RestoreIfThen(this.rgid_new, this.rgid_old, this.ifThenHistory);\n  }\n}\n\nclass RestoreIfThen extends BaseOperation {\n  rgid_new: any;\n  rgid_old: any;\n  ifThenHistory: any;\n\n  constructor(rgNew: any, rgOld: any, history: any) {\n    super(OperationType.RESTORE_IF_THEN);\n    this.rgid_new = rgNew;\n    this.rgid_old = rgOld;\n    this.ifThenHistory = history || new Map();\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n\n    this.ifThenHistory.forEach((rg, rgid) => {\n      const rgValue = struct.rgroups.get(rgid)!;\n      rgValue.ifthen = rg;\n      struct.rgroups.set(rgid, rgValue);\n    });\n  }\n\n  invert() {\n    return new UpdateIfThen(this.rgid_old, this.rgid_new);\n  }\n}\n\nexport { UpdateIfThen, RestoreIfThen };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { ReEnhancedFlag, ReFrag, ReStruct } from '../../render';\n\nimport { BaseOperation } from './base';\nimport { Fragment, StructProperty } from 'domain/entities';\nimport { OperationType } from './OperationType';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\nclass FragmentAdd extends BaseOperation {\n  frid: any;\n  properties?: Array<StructProperty>;\n\n  constructor(fragmentId?: any, properties?: Array<StructProperty>) {\n    super(OperationType.FRAGMENT_ADD);\n    this.frid = typeof fragmentId === 'undefined' ? null : fragmentId;\n    if (properties) {\n      this.properties = properties;\n    }\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const frag = new Fragment([], null, this.properties);\n\n    if (this.frid === null) {\n      this.frid = struct.frags.add(frag);\n    } else {\n      struct.frags.set(this.frid, frag);\n    }\n\n    restruct.frags.set(this.frid, new ReFrag(frag)); // TODO add restruct.notifyFragmentAdded\n    restruct.enhancedFlags.set(this.frid, new ReEnhancedFlag());\n  }\n\n  invert() {\n    return new FragmentDelete(this.frid);\n  }\n}\n\nclass FragmentSetProperties extends BaseOperation {\n  frid: any;\n  properties?: Array<StructProperty>;\n\n  constructor(fragmentId: any, properties?: Array<StructProperty>) {\n    super(OperationType.FRAGMENT_SET_PROPERTIES);\n    this.frid = fragmentId;\n    this.properties = properties;\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const frag = struct.frags.get(this.frid);\n\n    if (frag) {\n      if (this.properties) {\n        frag.properties = this.properties;\n      } else {\n        delete frag?.properties;\n      }\n    }\n  }\n\n  invert() {\n    return new FragmentSetProperties(this.frid, undefined);\n  }\n}\n\nclass FragmentDelete extends BaseOperation {\n  frid: any;\n\n  constructor(fragmentId: any) {\n    super(OperationType.FRAGMENT_DELETE, 100);\n    this.frid = fragmentId;\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    if (!struct.frags.get(this.frid)) {\n      return;\n    }\n\n    BaseOperation.invalidateItem(restruct, 'frags', this.frid, 1);\n    restruct.frags.delete(this.frid);\n    struct.frags.delete(this.frid); // TODO add restruct.notifyFragmentRemoved\n\n    const enhancedFalg = restruct.enhancedFlags.get(this.frid);\n    if (!enhancedFalg) return;\n    restruct.clearVisel(enhancedFalg.visel);\n    restruct.enhancedFlags.delete(this.frid);\n  }\n\n  invert() {\n    return new FragmentAdd(this.frid);\n  }\n}\n\nexport { FragmentAdd, FragmentDelete, FragmentSetProperties };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { BaseOperation } from './base';\nimport { OperationPriority, OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype Data = {\n  frid: any;\n  aid: any;\n};\n\n// todo : merge add and delete stereo atom\nclass FragmentAddStereoAtom extends BaseOperation {\n  data: Data;\n\n  constructor(fragmentId: any, atomId: any) {\n    super(\n      OperationType.FRAGMENT_ADD_STEREO_ATOM,\n      OperationPriority.FRAGMENT_ADD_STEREO_ATOM,\n    );\n    this.data = { frid: fragmentId, aid: atomId };\n  }\n\n  execute(restruct: ReStruct) {\n    const { aid, frid } = this.data;\n\n    const frag = restruct.molecule.frags.get(frid);\n    if (frag) {\n      frag.updateStereoAtom(restruct.molecule, aid, frid, true);\n\n      BaseOperation.invalidateEnhancedFlag(restruct, frid);\n    }\n  }\n\n  invert() {\n    return new FragmentDeleteStereoAtom(this.data.frid, this.data.aid);\n  }\n}\n\nclass FragmentDeleteStereoAtom extends BaseOperation {\n  data: Data;\n\n  constructor(fragmentId: any, atomId: any) {\n    super(\n      OperationType.FRAGMENT_DELETE_STEREO_ATOM,\n      OperationPriority.FRAGMENT_DELETE_STEREO_ATOM,\n    );\n    this.data = { frid: fragmentId, aid: atomId };\n  }\n\n  execute(restruct: ReStruct) {\n    const { aid, frid } = this.data;\n\n    const frag = restruct.molecule.frags.get(frid);\n    if (frag) {\n      frag.updateStereoAtom(restruct.molecule, aid, frid, false);\n\n      BaseOperation.invalidateEnhancedFlag(restruct, frid);\n    }\n  }\n\n  invert() {\n    const { aid, frid } = this.data;\n    return new FragmentAddStereoAtom(frid, aid);\n  }\n}\n\nexport { FragmentAddStereoAtom, FragmentDeleteStereoAtom };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from './base';\nimport { OperationPriority, OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\n\nexport class FragmentStereoFlag extends BaseOperation {\n  frid: number;\n\n  constructor(fragmentId: number) {\n    super(\n      OperationType.FRAGMENT_STEREO_FLAG,\n      OperationPriority.FRAGMENT_STEREO_FLAG,\n    );\n    this.frid = fragmentId;\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n\n    const fragment = struct.frags.get(this.frid)!;\n    fragment.updateStereoFlag(struct);\n\n    BaseOperation.invalidateEnhancedFlag(restruct, this.frid);\n  }\n\n  invert() {\n    const inverted = new FragmentStereoFlag(this.frid);\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from './base';\nimport { OperationPriority, OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\n\nexport class CalcImplicitH extends BaseOperation {\n  atomIds: Array<number>;\n\n  constructor(aids: Array<number>) {\n    super(OperationType.CALC_IMPLICIT_H, OperationPriority.CALC_IMPLICIT_H);\n    this.atomIds = aids;\n  }\n\n  execute(restruct: ReStruct) {\n    const aIds = this.atomIds;\n\n    restruct.molecule.setImplicitHydrogen(aIds);\n  }\n\n  invert() {\n    return new CalcImplicitH(this.atomIds);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from './base';\nimport { OperationType } from './OperationType';\nimport { ReStruct } from '../../render';\nimport { Scale } from 'domain/helpers';\n\nexport class LoopMove extends BaseOperation {\n  data: {\n    id: any;\n    d: any;\n  };\n\n  constructor(id?: any, d?: any) {\n    super(OperationType.LOOP_MOVE);\n    this.data = { id, d };\n  }\n\n  execute(restruct: ReStruct) {\n    // not sure if there should be an action to move a loop in the first place\n    // but we have to somehow move the aromatic ring,\n    // which is associated with the loop, rather than with any of the bonds\n    const { id, d } = this.data;\n    const reloop = restruct.reloops.get(id);\n\n    if (reloop && reloop.visel) {\n      const scaled = Scale.modelToCanvas(d, restruct.render.options);\n      reloop.visel.translate(scaled);\n    }\n    this.data.d = d.negated();\n  }\n\n  invert() {\n    const inverted = new LoopMove();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n","import { BaseOperation } from 'application/editor/operations/base';\nimport { Vec2 } from 'domain/entities';\nimport { OperationType } from 'application/editor';\nimport { ReStruct } from 'application/render';\nimport { Scale } from 'domain/helpers';\n\nexport class ImageMove extends BaseOperation {\n  constructor(private id: number, private offset: Vec2) {\n    super(OperationType.IMAGE_MOVE);\n  }\n\n  execute(reStruct: ReStruct) {\n    const renderItem = reStruct.images.get(this.id);\n    const item = reStruct.molecule.images.get(this.id);\n\n    if (!item || !renderItem) {\n      return;\n    }\n    const scaledOffset = Scale.modelToCanvas(\n      this.offset,\n      reStruct.render.options,\n    );\n\n    renderItem.visel.translate(scaledOffset);\n    item.addPositionOffset(this.offset);\n  }\n\n  invert(): BaseOperation {\n    return new ImageMove(this.id, this.offset.negated());\n  }\n}\n","import { BaseOperation } from 'application/editor/operations/base';\nimport { ImageReferenceName, Vec2 } from 'domain/entities';\nimport { ReStruct } from 'application/render';\nimport { OperationType } from 'application/editor';\n\nconst moveLeftPositions: Array<ImageReferenceName> = [\n  'topLeftPosition',\n  'leftMiddlePosition',\n  'bottomLeftPosition',\n];\n\nconst moveRightPositions: Array<ImageReferenceName> = [\n  'topRightPosition',\n  'rightMiddlePosition',\n  'bottomRightPosition',\n];\n\nconst moveTopPositions: Array<ImageReferenceName> = [\n  'topLeftPosition',\n  'topMiddlePosition',\n  'topRightPosition',\n];\n\nconst moveBottomPositions: Array<ImageReferenceName> = [\n  'bottomLeftPosition',\n  'bottomMiddlePosition',\n  'bottomRightPosition',\n];\n\nexport class ImageResize extends BaseOperation {\n  private previousPosition: Vec2 | null = null;\n  constructor(\n    private id: number,\n    private position: Vec2,\n    private referencePositionName: ImageReferenceName,\n  ) {\n    super(OperationType.IMAGE_RESIZE);\n  }\n\n  execute(reStruct: ReStruct) {\n    const item = reStruct.molecule.images.get(this.id);\n    const renderItem = reStruct.images.get(this.id);\n\n    if (!item || !renderItem) {\n      return;\n    }\n    const referencePositions = item.getReferencePositions();\n    this.previousPosition = referencePositions[this.referencePositionName];\n    const diff = Vec2.diff(this.position, this.previousPosition);\n    const topLeftPosition = new Vec2(referencePositions.topLeftPosition);\n    const bottomRightPosition = new Vec2(\n      referencePositions.bottomRightPosition,\n    );\n\n    if (moveTopPositions.includes(this.referencePositionName)) {\n      topLeftPosition.add_(new Vec2(0, diff.y));\n    } else if (moveBottomPositions.includes(this.referencePositionName)) {\n      bottomRightPosition.add_(new Vec2(0, diff.y));\n    }\n    if (moveLeftPositions.includes(this.referencePositionName)) {\n      topLeftPosition.add_(new Vec2(diff.x, 0));\n    } else if (moveRightPositions.includes(this.referencePositionName)) {\n      bottomRightPosition.add_(new Vec2(diff.x, 0));\n    }\n\n    item.resize(topLeftPosition, bottomRightPosition);\n    const next = renderItem.visel.paths[0].next;\n    reStruct.clearVisel(renderItem.visel);\n    renderItem.show(reStruct, reStruct.render.options, next);\n  }\n\n  invert(): BaseOperation {\n    return new ImageResize(\n      this.id,\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      this.previousPosition!,\n      this.referencePositionName,\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { BaseOperation } from 'application/editor/operations/base';\nimport { OperationType } from 'application/editor';\nimport { Image } from 'domain/entities/image';\nimport { ReStruct } from 'application/render';\nimport { ReImage } from 'application/render/restruct/reImage';\nimport { IMAGE_KEY } from 'domain/constants';\n\ninterface ImageUpsertData {\n  id?: number;\n}\n\ninterface ImageDeleteData {\n  id: number;\n}\n\nexport class ImageUpsert extends BaseOperation {\n  data: ImageUpsertData;\n  constructor(private readonly image: Image, id?: number) {\n    super(OperationType.IMAGE_UPSERT);\n    this.data = { id };\n  }\n\n  execute(reStruct: ReStruct) {\n    const struct = reStruct.molecule;\n\n    if (this.data.id === undefined) {\n      this.data.id = struct.images.newId();\n    }\n    const id = this.data.id;\n    const item = this.image.clone();\n    struct.images.set(id, item);\n    reStruct.images.set(id, new ReImage(item));\n\n    BaseOperation.invalidateItem(reStruct, IMAGE_KEY, id, 1);\n  }\n\n  invert(): BaseOperation {\n    return new ImageDelete(this.data.id!);\n  }\n}\n\nexport class ImageDelete extends BaseOperation {\n  private image?: Image;\n  data: ImageDeleteData;\n  constructor(id: number) {\n    super(OperationType.IMAGE_DELETE);\n    this.data = { id };\n  }\n\n  execute(reStruct: ReStruct) {\n    const reImage = reStruct.images.get(this.data.id);\n\n    if (!reImage) {\n      return;\n    }\n\n    this.image = reImage.image.clone();\n    reStruct.clearVisel(reImage.visel);\n    reStruct.markItemRemoved();\n    reStruct.images.delete(this.data.id);\n    reStruct.molecule.images.delete(this.data.id);\n  }\n\n  invert(): BaseOperation {\n    return new ImageUpsert(this.image!, this.data.id);\n  }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define,@typescript-eslint/no-non-null-assertion */\nimport { BaseOperation } from 'application/editor/operations/base';\nimport { OperationType } from 'application/editor';\nimport { ReStruct } from 'application/render';\nimport { FixedPrecisionCoordinates } from 'domain/entities';\n\nexport class MultitailArrowAddTail extends BaseOperation {\n  constructor(\n    private itemId: number,\n    private tailId?: number,\n    private coordinate?: FixedPrecisionCoordinates,\n  ) {\n    super(OperationType.MULTITAIL_ARROW_ADD_TAIL);\n  }\n\n  execute(reStruct: ReStruct) {\n    const reMultitailArrow = reStruct.multitailArrows.get(this.itemId);\n    const multitailArrow = reStruct.molecule.multitailArrows.get(this.itemId);\n\n    if (!reMultitailArrow || !multitailArrow) {\n      return;\n    }\n    this.tailId = multitailArrow.addTail(this.tailId, this.coordinate);\n    BaseOperation.invalidateItem(reStruct, 'multitailArrows', this.itemId, 1);\n  }\n\n  invert() {\n    return new MultitailArrowRemoveTail(this.itemId, this.tailId!);\n  }\n}\n\nexport class MultitailArrowRemoveTail extends BaseOperation {\n  private coordinate?: FixedPrecisionCoordinates;\n  constructor(private itemId: number, private tailId: number) {\n    super(OperationType.MULTITAIL_ARROW_REMOVE_TAIL);\n  }\n\n  execute(reStruct: ReStruct) {\n    const reMultitailArrow = reStruct.multitailArrows.get(this.itemId);\n    const multitailArrow = reStruct.molecule.multitailArrows.get(this.itemId);\n    this.coordinate = multitailArrow?.getTailCoordinate(this.tailId);\n\n    if (!reMultitailArrow || !multitailArrow || !this.coordinate) {\n      return;\n    }\n\n    multitailArrow.removeTail(this.tailId);\n    BaseOperation.invalidateItem(reStruct, 'multitailArrows', this.itemId, 1);\n  }\n\n  invert(): BaseOperation {\n    return new MultitailArrowAddTail(this.itemId, this.tailId, this.coordinate);\n  }\n}\n","import { Vec2 } from 'domain/entities';\nimport { OperationType } from 'application/editor';\nimport { Scale } from 'domain/helpers';\nimport { ReStruct } from 'application/render';\nimport BaseOperation from 'application/editor/operations/base';\n\nexport class MultitailArrowMove extends BaseOperation {\n  constructor(private id: number, private offset: Vec2) {\n    super(OperationType.MULTITAIL_ARROW_MOVE);\n  }\n\n  execute(reStruct: ReStruct) {\n    const renderItem = reStruct.multitailArrows.get(this.id);\n    const item = reStruct.molecule.multitailArrows.get(this.id);\n\n    if (!item || !renderItem) {\n      return;\n    }\n    const scaledOffset = Scale.modelToCanvas(\n      this.offset,\n      reStruct.render.options,\n    );\n\n    renderItem.visel.translate(scaledOffset);\n    item.move(this.offset);\n  }\n\n  invert() {\n    return new MultitailArrowMove(this.id, this.offset.negated());\n  }\n}\n","import { BaseOperation } from 'application/editor/operations/base';\nimport { OperationType } from 'application/editor';\nimport { MultitailArrowRefName, ReStruct } from 'application/render';\nimport { MULTITAIL_ARROW_KEY } from 'domain/constants';\n\nexport class MultitailArrowMoveHeadTail extends BaseOperation {\n  constructor(\n    private id: number,\n    private offset: number,\n    private name: string,\n    private tailId: number | null,\n    private normalize?: true,\n  ) {\n    super(OperationType.MULTITAIL_ARROW_MOVE_HEAD_TAIL);\n  }\n\n  execute(reStruct: ReStruct) {\n    const reMultitailArrow = reStruct.multitailArrows.get(this.id);\n    const multitailArrow = reStruct.molecule.multitailArrows.get(this.id);\n    if (!multitailArrow || !reMultitailArrow) {\n      return;\n    }\n    switch (this.name) {\n      case MultitailArrowRefName.HEAD:\n        this.offset = multitailArrow.moveHead(this.offset);\n        break;\n      case MultitailArrowRefName.TOP_TAIL:\n        this.offset = multitailArrow.moveTail(this.offset, this.name);\n        break;\n      case MultitailArrowRefName.BOTTOM_TAIL:\n        this.offset = multitailArrow.moveTail(this.offset, this.name);\n        break;\n      default:\n        this.offset = multitailArrow.moveTail(\n          this.offset,\n          this.tailId as number,\n          this.normalize,\n        );\n    }\n    BaseOperation.invalidateItem(reStruct, MULTITAIL_ARROW_KEY, this.id, 1);\n  }\n\n  invert(): BaseOperation {\n    return new MultitailArrowMoveHeadTail(\n      this.id,\n      -this.offset,\n      this.name,\n      this.tailId,\n    );\n  }\n}\n","import { BaseOperation } from 'application/editor/operations/base';\nimport { OperationType } from 'application/editor';\nimport { ReStruct } from 'application/render';\nimport { MULTITAIL_ARROW_KEY } from 'domain/constants';\n\nexport class MultitailArrowResizeTailHead extends BaseOperation {\n  constructor(\n    private id: number,\n    private offset: number,\n    private isHead: boolean,\n  ) {\n    super(OperationType.MULTITAIL_ARROW_RESIZE_HEAD_TAIL);\n  }\n\n  execute(reStruct: ReStruct) {\n    const multitailArrow = reStruct.molecule.multitailArrows.get(this.id);\n    if (!multitailArrow) {\n      return;\n    }\n    this.offset = this.isHead\n      ? multitailArrow.resizeHead(this.offset)\n      : multitailArrow.resizeTails(this.offset);\n    BaseOperation.invalidateItem(reStruct, MULTITAIL_ARROW_KEY, this.id, 1);\n  }\n\n  invert(): BaseOperation {\n    return new MultitailArrowResizeTailHead(this.id, -this.offset, this.isHead);\n  }\n}\n","/* eslint-disable @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-use-before-define */\nimport { BaseOperation } from 'application/editor/operations/base';\nimport { MultitailArrow } from 'domain/entities/multitailArrow';\nimport { OperationType } from 'application/editor';\nimport { ReStruct, ReMultitailArrow } from 'application/render';\nimport { MULTITAIL_ARROW_KEY } from 'domain/constants';\n\ninterface MultitailArrowUpsertData {\n  id?: number;\n}\n\ninterface MultitailArrowDeleteData {\n  id: number;\n}\n\nexport class MultitailArrowUpsert extends BaseOperation {\n  data: MultitailArrowUpsertData;\n  constructor(private readonly multitailArrow: MultitailArrow, id?: number) {\n    super(OperationType.MULTITAIL_ARROW_UPSERT);\n    this.data = { id };\n  }\n\n  execute(reStruct: ReStruct) {\n    const struct = reStruct.molecule;\n\n    if (this.data.id === undefined) {\n      this.data.id = struct.multitailArrows.newId();\n    }\n    const id = this.data.id;\n    const item = this.multitailArrow.clone();\n    struct.multitailArrows.set(id, item);\n    reStruct.multitailArrows.set(id, new ReMultitailArrow(item));\n\n    BaseOperation.invalidateItem(reStruct, MULTITAIL_ARROW_KEY, id, 1);\n  }\n\n  invert(): BaseOperation {\n    return new MultitailArrowDelete(this.data.id!);\n  }\n}\n\nexport class MultitailArrowDelete extends BaseOperation {\n  private multitailArrow?: MultitailArrow;\n  data: MultitailArrowDeleteData;\n  constructor(id: number) {\n    super(OperationType.MULTITAIL_ARROW_DELETE);\n    this.data = { id };\n  }\n\n  execute(reStruct: ReStruct) {\n    const reMultitailArrow = reStruct.multitailArrows.get(this.data.id);\n\n    if (!reMultitailArrow) {\n      return;\n    }\n\n    this.multitailArrow = reMultitailArrow.multitailArrow.clone();\n    reStruct.clearVisel(reMultitailArrow.visel);\n    reStruct.markItemRemoved();\n    reStruct.multitailArrows.delete(this.data.id);\n    reStruct.molecule.multitailArrows.delete(this.data.id);\n  }\n\n  invert(): BaseOperation {\n    return new MultitailArrowUpsert(this.multitailArrow!, this.data.id);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\n\ntype Data = {\n  rgid: any;\n  attribute: any;\n  value: any;\n};\n\nexport class RGroupAttr extends BaseOperation {\n  data: Data | null;\n  data2: Data | null;\n\n  constructor(rgroupId?: any, attribute?: any, value?: any) {\n    super(OperationType.R_GROUP_ATTR);\n    this.data = { rgid: rgroupId, attribute, value };\n    this.data2 = null;\n  }\n\n  execute(restruct: ReStruct) {\n    if (this.data) {\n      const { rgid, attribute, value } = this.data;\n\n      const rgp = restruct.molecule.rgroups.get(rgid)!;\n\n      if (!rgp) {\n        return;\n      }\n\n      if (!this.data2) {\n        this.data2 = {\n          rgid,\n          attribute,\n          value: rgp[attribute],\n        };\n      }\n\n      rgp[attribute] = value;\n\n      BaseOperation.invalidateItem(restruct, 'rgroups', rgid);\n    }\n  }\n\n  invert() {\n    const inverted = new RGroupAttr();\n    inverted.data = this.data2;\n    inverted.data2 = this.data;\n    return inverted;\n  }\n\n  isDummy(restruct: ReStruct) {\n    if (this.data) {\n      const { rgid, attribute, value } = this.data;\n      const rgroup = restruct.molecule.rgroups.get(rgid)!;\n      return rgroup[attribute] === value;\n    }\n    return false;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ReRGroup, ReStruct } from '../../../render';\n\nimport { BaseOperation } from '../base';\nimport { OperationType } from '../OperationType';\nimport { RGroup } from 'domain/entities';\n\nexport class RGroupFragment extends BaseOperation {\n  rgid_new: any;\n  rg_new: any;\n  rgid_old: any;\n  rg_old: any;\n  frid: any;\n\n  constructor(rgroupId: any, fragmentId: any, rg?: any) {\n    super(OperationType.R_GROUP_FRAGMENT);\n    this.rgid_new = rgroupId;\n    this.rg_new = rg;\n    this.rgid_old = null;\n    this.rg_old = null;\n    this.frid = fragmentId;\n  }\n\n  execute(restruct: ReStruct) {\n    // eslint-disable-line max-statements\n    const struct = restruct.molecule;\n    this.rgid_old =\n      this.rgid_old || RGroup.findRGroupByFragment(struct.rgroups, this.frid);\n\n    this.rg_old = this.rgid_old ? struct.rgroups.get(this.rgid_old) : null;\n\n    this.removeOld(struct, restruct);\n    this.setNew(struct, restruct);\n  }\n\n  private removeOld(struct: any, restruct: any) {\n    if (!this.rg_old) {\n      return;\n    }\n\n    this.rg_old.frags.delete(this.frid);\n    restruct.clearVisel(restruct.rgroups.get(this.rgid_old).visel);\n\n    if (this.rg_old.frags.size === 0) {\n      restruct.rgroups.delete(this.rgid_old);\n      struct.rgroups.delete(this.rgid_old);\n      restruct.markItemRemoved();\n    } else {\n      restruct.markItem('rgroups', this.rgid_old, 1);\n    }\n  }\n\n  private setNew(struct: any, restruct: ReStruct) {\n    if (!this.rgid_new) {\n      return;\n    }\n\n    let rgNew = struct.rgroups.get(this.rgid_new);\n    if (!rgNew) {\n      rgNew = this.rg_new || new RGroup();\n      struct.rgroups.set(this.rgid_new, rgNew);\n      restruct.rgroups.set(this.rgid_new, new ReRGroup(rgNew));\n    } else {\n      restruct.markItem('rgroups', this.rgid_new, 1);\n    }\n\n    rgNew.frags.add(this.frid);\n  }\n\n  invert() {\n    return new RGroupFragment(this.rgid_old, this.frid, this.rg_old);\n  }\n}\n","import { ReStruct, ReRGroupAttachmentPoint } from 'application/render';\nimport assert from 'assert';\nimport {\n  RGroupAttachmentPoint,\n  RGroupAttachmentPointType,\n} from 'domain/entities';\nimport { RGroupAttachmentPointRemove } from '.';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport BaseOperation from '../base';\n\ntype Data = {\n  atomId: number;\n  attachmentPointType: RGroupAttachmentPointType;\n  attachmentPointId?: number;\n};\n\nclass RGroupAttachmentPointAdd extends BaseOperation {\n  data: Data;\n\n  constructor(data: Data) {\n    super(\n      OperationType.R_GROUP_ATTACHMENT_POINT_ADD,\n      OperationPriority.R_GROUP_ATTACHMENT_POINT_ADD,\n    );\n    this.data = data;\n  }\n\n  execute(restruct: ReStruct) {\n    const { atomId, attachmentPointType } = this.data;\n    const newAttachmentPoint = new RGroupAttachmentPoint(\n      atomId,\n      attachmentPointType,\n    );\n\n    const struct = restruct.molecule;\n    const revertedId = this.data.attachmentPointId;\n    let attachmentPointId = 0;\n    if (revertedId === undefined) {\n      const newId = struct.rgroupAttachmentPoints.add(newAttachmentPoint);\n      attachmentPointId = newId;\n    } else {\n      struct.rgroupAttachmentPoints.set(revertedId, newAttachmentPoint);\n      attachmentPointId = revertedId;\n    }\n    this.data.attachmentPointId = attachmentPointId;\n\n    const reAtom = restruct.atoms.get(atomId);\n    assert(reAtom != null);\n    restruct.rgroupAttachmentPoints.set(\n      attachmentPointId,\n      new ReRGroupAttachmentPoint(newAttachmentPoint, reAtom),\n    );\n  }\n\n  invert() {\n    if (this.data.attachmentPointId === undefined) {\n      throw Error(`Inverted attachmentPointId doesn't exist`);\n    }\n    return new RGroupAttachmentPointRemove(this.data.attachmentPointId);\n  }\n}\n\nexport { RGroupAttachmentPointAdd };\n","import { ReStruct } from 'application/render';\nimport assert from 'assert';\nimport { RGroupAttachmentPointAdd } from '.';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport BaseOperation from '../base';\n\ntype Data = { atomId: number; attachmentPointType; attachmentPointId: number };\n\nconst INITIAL_DATA = {\n  atomId: 0,\n  attachmentPointType: 1,\n  attachmentPointId: 0,\n};\n\nclass RGroupAttachmentPointRemove extends BaseOperation {\n  data: Data;\n\n  constructor(attachmentPointId: number) {\n    super(\n      OperationType.R_GROUP_ATTACHMENT_POINT_REMOVE,\n      OperationPriority.R_GROUP_ATTACHMENT_POINT_REMOVE,\n    );\n    this.data = {\n      ...INITIAL_DATA,\n      attachmentPointId,\n    };\n  }\n\n  execute(restruct: ReStruct) {\n    const { attachmentPointId } = this.data;\n    const struct = restruct.molecule;\n    const item = struct.rgroupAttachmentPoints.get(attachmentPointId);\n    const reItem = restruct.rgroupAttachmentPoints.get(attachmentPointId);\n    assert(item != null && reItem != null);\n\n    this.data.atomId = item.atomId;\n    this.data.attachmentPointType = item.type;\n\n    restruct.markItemRemoved();\n    restruct.clearVisel(reItem.visel);\n    restruct.rgroupAttachmentPoints.delete(attachmentPointId);\n\n    struct.rgroupAttachmentPoints.delete(attachmentPointId);\n  }\n\n  invert() {\n    return new RGroupAttachmentPointAdd(this.data);\n  }\n}\n\nexport { RGroupAttachmentPointRemove };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Base from '../base';\nimport { OperationType } from '../OperationType';\nimport { Scale } from 'domain/helpers';\n\ninterface RxnArrowMoveData {\n  id: number;\n  d: any;\n  noinvalidate: boolean;\n}\n\nexport class RxnArrowMove extends Base {\n  data: RxnArrowMoveData;\n\n  constructor(id?: any, d?: any, noinvalidate?: any) {\n    super(OperationType.RXN_ARROW_MOVE);\n    this.data = { id, d, noinvalidate };\n  }\n\n  execute(restruct: any): void {\n    const struct = restruct.molecule;\n    const id = this.data.id;\n    const d = this.data.d;\n    const item = struct.rxnArrows.get(id);\n    item.pos.forEach((p) => p.add_(d));\n    restruct.rxnArrows\n      .get(id)\n      .visel.translate(Scale.modelToCanvas(d, restruct.render.options));\n    this.data.d = d.negated();\n    if (!this.data.noinvalidate) {\n      Base.invalidateItem(restruct, 'rxnArrows', id, 1);\n    }\n  }\n\n  invert() {\n    const move = new RxnArrowMove(\n      this.data.id,\n      this.data.d,\n      this.data.noinvalidate,\n    );\n    move.data = this.data;\n    return move;\n  }\n}\n","import utils from 'application/editor/shared/utils';\nimport { ReStruct } from 'application/render';\nimport { Vec2 } from 'domain/entities';\nimport { OperationType } from '../OperationType';\nimport Base from '../base';\n\ninterface RxnArrowRotateData {\n  id: number;\n  angle: number;\n  center: Vec2;\n  noinvalidate?: boolean;\n}\n\nexport class RxnArrowRotate extends Base {\n  data: RxnArrowRotateData;\n\n  constructor(id: number, angle: number, center: Vec2, noinvalidate?: boolean) {\n    super(OperationType.RXN_ARROW_ROTATE);\n    this.data = { id, angle, center, noinvalidate };\n  }\n\n  execute(reStruct: ReStruct) {\n    const degree = utils.degrees(this.data.angle);\n\n    const arrowId = this.data.id;\n    const arrow = reStruct.molecule.rxnArrows.get(arrowId);\n    if (arrow) {\n      // Note: Struct and ReStruct are in two different systems,\n      //       must manually update struct's position\n      arrow.pos = arrow.pos.map((p) =>\n        p.rotateAroundOrigin(degree, this.data.center),\n      );\n    }\n\n    const options = reStruct.render.options;\n    const drawingCenter = this.data.center\n      .scaled(options.microModeScale)\n      .add(options.offset);\n\n    reStruct.rxnArrows.get(arrowId)?.visel.rotate(degree, drawingCenter);\n\n    if (!this.data.noinvalidate) {\n      Base.invalidateItem(reStruct, 'rxnArrows', arrowId, 1);\n    }\n  }\n\n  invert() {\n    const move = new RxnArrowRotate(\n      this.data.id,\n      -this.data.angle,\n      this.data.center,\n      this.data.noinvalidate,\n    );\n    return move;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ReStruct } from 'application/render';\nimport assert from 'assert';\nimport { RxnArrow, Vec2 } from 'domain/entities';\nimport { Scale } from 'domain/helpers';\nimport { tfx } from 'utilities';\nimport { OperationType } from '../OperationType';\nimport Base from '../base';\n\nexport const ARROW_MAX_SNAPPING_ANGLE = Math.PI / 12; // 15\n\ninterface RxnArrowResizeData {\n  id: number;\n  d: Vec2;\n  current: Vec2;\n  anchor: Vec2 | null;\n  noinvalidate: boolean;\n}\nexport class RxnArrowResize extends Base {\n  data: RxnArrowResizeData;\n  isSnappingEnabled: boolean;\n\n  constructor(\n    id: number,\n    d: Vec2,\n    current: Vec2,\n    anchor: Vec2 | null,\n    noinvalidate: boolean,\n    isSnappingEnabled: boolean,\n  ) {\n    super(OperationType.RXN_ARROW_RESIZE);\n    this.data = { id, d, current, anchor, noinvalidate };\n    this.isSnappingEnabled = isSnappingEnabled;\n  }\n\n  execute(restruct: ReStruct): void {\n    const struct = restruct.molecule;\n    const id = this.data.id;\n    let d = this.data.d;\n    const current = this.data.current;\n    const item = struct.rxnArrows.get(id);\n    const reItem = restruct.rxnArrows.get(id);\n    assert(item != null && reItem != null);\n    const anchor = this.data.anchor;\n    if (anchor) {\n      const previousPos0 = item.pos[0].get_xy0();\n      const previousPos1 = item.pos[1].get_xy0();\n      let middlePoint;\n\n      if (RxnArrow.isElliptical(item)) {\n        [, , middlePoint] = reItem.getReferencePoints();\n      }\n\n      if (\n        /**\n         *          (anchor)\n         *   (pos[1])   ^\n         *              |   (d)\n         *   (pos[0])   o  > (current)\n         *\n         * more details: ./RxnArrowResize.doc.png\n         */\n        tfx(anchor.x) === tfx(item.pos[1].x) &&\n        tfx(anchor.y) === tfx(item.pos[1].y)\n      ) {\n        if (this.isSnappingEnabled) {\n          const currentArrowVector = current.sub(item.pos[0]);\n          const snappedArrowVector = getSnappedArrowVector(currentArrowVector);\n          const snappedCurrent = item.pos[0].add(snappedArrowVector);\n          current.x = snappedCurrent.x;\n          current.y = snappedCurrent.y;\n        }\n        item.pos[1].x = anchor.x = current.x;\n        current.x = previousPos1.x;\n        item.pos[1].y = anchor.y = current.y;\n        current.y = previousPos1.y;\n      }\n\n      if (\n        /**\n         *          (anchor)\n         *   (pos[0])   o\n         *              |   (d)\n         *   (pos[1])   x  o  (current)\n         *\n         * more details: ./RxnArrowResize.doc.png\n         */\n        tfx(anchor.x) === tfx(item.pos[0].x) &&\n        tfx(anchor.y) === tfx(item.pos[0].y)\n      ) {\n        if (this.isSnappingEnabled) {\n          const currentArrowVector = current.sub(item.pos[1]);\n          const snappedArrowVector = getSnappedArrowVector(currentArrowVector);\n          const snappedCurrent = item.pos[1].add(snappedArrowVector);\n          current.x = snappedCurrent.x;\n          current.y = snappedCurrent.y;\n        }\n        item.pos[0].x = anchor.x = current.x;\n        current.x = previousPos0.x;\n        item.pos[0].y = anchor.y = current.y;\n        current.y = previousPos0.y;\n      }\n\n      if (\n        tfx(anchor.x) === tfx(middlePoint?.x) &&\n        tfx(anchor.y) === tfx(middlePoint?.y)\n      ) {\n        const { angle } = reItem.getArrowParams(\n          item.pos[0].x,\n          item.pos[0].y,\n          item.pos[1].x,\n          item.pos[1].y,\n        );\n        const angleInRadians = (angle * Math.PI) / 180;\n        const cosAngle = Math.cos(angleInRadians);\n        const sinAngle = Math.sin(angleInRadians);\n\n        const diffX = current.x - anchor.x;\n        const diffY = current.y - anchor.y;\n\n        const diff = diffY * cosAngle - diffX * sinAngle;\n        if (item.height !== undefined) {\n          item.height -= diff;\n        }\n\n        const [, , newMiddlePoint] = reItem.getReferencePoints();\n\n        anchor.y = newMiddlePoint.y;\n        anchor.x = newMiddlePoint.x;\n      }\n    } else {\n      if (this.isSnappingEnabled) {\n        d = getSnappedArrowVector(d);\n      }\n      item.pos[1].add_(d);\n    }\n\n    reItem.visel.translate(Scale.modelToCanvas(d, restruct.render.options));\n    this.data.d = d.negated();\n\n    if (!this.data.noinvalidate) {\n      Base.invalidateItem(restruct, 'rxnArrows', id, 1);\n    }\n  }\n\n  invert(): Base {\n    return new RxnArrowResize(\n      this.data.id,\n      this.data.d,\n      this.data.current,\n      this.data.anchor,\n      this.data.noinvalidate,\n      this.isSnappingEnabled,\n    );\n  }\n}\n\nexport function getSnappedArrowVector(arrow: Vec2) {\n  const AXIS = {\n    POSITIVE_X: 0,\n    POSITIVE_Y: Math.PI / 2,\n    NEGATIVE_X: [Math.PI, -Math.PI],\n    NEGATIVE_Y: -Math.PI / 2,\n  };\n  const oxAngle = arrow.oxAngle();\n  const arrowLength = arrow.length();\n  const isSnappingToPositiveXAxis =\n    Math.abs(oxAngle - AXIS.POSITIVE_X) <= ARROW_MAX_SNAPPING_ANGLE;\n  if (isSnappingToPositiveXAxis) {\n    return new Vec2(arrowLength, 0);\n  }\n  const isSnappingToPositiveYAxis =\n    Math.abs(oxAngle - AXIS.POSITIVE_Y) <= ARROW_MAX_SNAPPING_ANGLE;\n  if (isSnappingToPositiveYAxis) {\n    return new Vec2(0, arrowLength);\n  }\n  const isSnappingToNegativeXAxis =\n    Math.abs(oxAngle - AXIS.NEGATIVE_X[0]) <= ARROW_MAX_SNAPPING_ANGLE ||\n    Math.abs(oxAngle - AXIS.NEGATIVE_X[1]) <= ARROW_MAX_SNAPPING_ANGLE;\n  if (isSnappingToNegativeXAxis) {\n    return new Vec2(-arrowLength, 0);\n  }\n  const isSnappingToNegativeYAxis =\n    Math.abs(oxAngle - AXIS.NEGATIVE_Y) <= ARROW_MAX_SNAPPING_ANGLE;\n  if (isSnappingToNegativeYAxis) {\n    return new Vec2(0, -arrowLength);\n  }\n  return arrow;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../../base';\nimport { OperationType } from '../../OperationType';\nimport { ReStruct } from '../../../../render';\nimport { Scale } from 'domain/helpers';\n\nexport class RxnPlusMove extends BaseOperation {\n  data: {\n    id: any;\n    d: any;\n    noinvalidate: any;\n  };\n\n  constructor(id?: any, d?: any, noinvalidate?: any) {\n    super(OperationType.RXN_PLUS_MOVE);\n    this.data = { id, d, noinvalidate };\n  }\n\n  execute(restruct: ReStruct) {\n    const { id, d, noinvalidate } = this.data;\n\n    const struct = restruct.molecule;\n    struct.rxnPluses.get(id)!.pp.add_(d); // eslint-disable-line no-underscore-dangle\n\n    const rxn = restruct.rxnPluses.get(id)!;\n    const scaled = Scale.modelToCanvas(d, restruct.render.options);\n    rxn.visel.translate(scaled);\n\n    this.data.d = d.negated();\n\n    if (!noinvalidate) {\n      BaseOperation.invalidateItem(restruct, 'rxnPluses', id, 1);\n    }\n  }\n\n  invert() {\n    const inverted = new RxnPlusMove();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { ReRxnPlus, ReStruct } from '../../../../render';\nimport { RxnPlus, Vec2 } from 'domain/entities';\n\nimport { BaseOperation } from '../../base';\nimport { OperationType } from '../../OperationType';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype Data = {\n  plid: any;\n  pos: any;\n};\n\nclass RxnPlusAdd extends BaseOperation {\n  data: Data;\n\n  constructor(pos?: any) {\n    super(OperationType.RXN_PLUS_ADD);\n    this.data = { plid: null, pos };\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n\n    const newRxn = new RxnPlus();\n    if (typeof this.data.plid === 'number') {\n      struct.rxnPluses.set(this.data.plid, newRxn);\n    } else {\n      this.data.plid = struct.rxnPluses.add(newRxn);\n    }\n\n    const { pos, plid } = this.data;\n\n    const structRxn = struct.rxnPluses.get(plid);\n    // notifyRxnPlusAdded\n    restruct.rxnPluses.set(plid, new ReRxnPlus(structRxn));\n\n    struct.rxnPlusSetPos(plid, new Vec2(pos));\n\n    BaseOperation.invalidateItem(restruct, 'rxnPluses', plid, 1);\n  }\n\n  invert() {\n    const inverted = new RxnPlusDelete();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nclass RxnPlusDelete extends BaseOperation {\n  data: Data;\n\n  constructor(plid?: any) {\n    super(OperationType.RXN_PLUS_DELETE);\n    this.data = { plid, pos: null };\n  }\n\n  execute(restruct: ReStruct) {\n    const { plid } = this.data;\n\n    const struct = restruct.molecule;\n    if (!this.data.pos) {\n      this.data.pos = struct.rxnPluses.get(plid)!.pp;\n    }\n\n    // notifyRxnPlusRemoved\n    restruct.markItemRemoved();\n    const rxn = restruct.rxnPluses.get(plid);\n    if (!rxn) return;\n    restruct.clearVisel(rxn.visel);\n    restruct.rxnPluses.delete(plid);\n\n    struct.rxnPluses.delete(plid);\n  }\n\n  invert() {\n    const inverted = new RxnPlusAdd();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nexport { RxnPlusAdd, RxnPlusDelete };\nexport * from './RxnPlusMove';\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { RxnArrow, RxnArrowMode, Vec2 } from 'domain/entities';\n\nimport Base from '../base';\nimport { OperationType } from '../OperationType';\nimport { ReRxnArrow } from '../../../render';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype RxnArrowAddData = {\n  id?: number;\n  pos: Array<Vec2>;\n  mode: RxnArrowMode;\n};\n\nclass RxnArrowAdd extends Base {\n  data: RxnArrowAddData;\n\n  constructor(\n    pos: Array<Vec2> = [],\n    mode: RxnArrowMode = RxnArrowMode.OpenAngle,\n    id?: number,\n  ) {\n    super(OperationType.RXN_ARROW_ADD);\n    this.data = { pos, mode, id };\n  }\n\n  execute(restruct: any): void {\n    const struct = restruct.molecule;\n    const item = new RxnArrow({ mode: this.data.mode });\n\n    if (this.data.id == null) {\n      const index = struct.rxnArrows.add(item);\n      this.data.id = index;\n    } else {\n      struct.rxnArrows.set(this.data.id!, item);\n    }\n\n    const itemId = this.data.id!;\n\n    restruct.rxnArrows.set(itemId, new ReRxnArrow(item));\n\n    const positions = [...this.data.pos];\n\n    struct.rxnArrowSetPos(\n      itemId,\n      positions.map((p) => new Vec2(p)),\n    );\n\n    Base.invalidateItem(restruct, 'rxnArrows', itemId, 1);\n  }\n\n  invert(): Base {\n    return new RxnArrowDelete(this.data.id!);\n  }\n}\n\ninterface RxnArrowDeleteData {\n  id: number;\n  pos?: Array<Vec2>;\n  mode?: RxnArrowMode;\n}\n\nclass RxnArrowDelete extends Base {\n  data: RxnArrowDeleteData;\n  performed: boolean;\n\n  constructor(id: number) {\n    super(OperationType.RXN_ARROW_DELETE);\n    this.data = { id, pos: [], mode: RxnArrowMode.OpenAngle };\n    this.performed = false;\n  }\n\n  execute(restruct: any): void {\n    const struct = restruct.molecule;\n    const item = struct.rxnArrows.get(this.data.id) as any;\n    this.data.pos = item.pos;\n    this.data.mode = item.mode;\n    this.performed = true;\n\n    restruct.markItemRemoved();\n    restruct.clearVisel(restruct.rxnArrows.get(this.data.id).visel);\n    restruct.rxnArrows.delete(this.data.id);\n\n    struct.rxnArrows.delete(this.data.id);\n  }\n\n  invert(): Base {\n    return new RxnArrowAdd(this.data.pos, this.data.mode, this.data.id);\n  }\n}\n\nexport { RxnArrowAdd, RxnArrowDelete };\nexport * from './RxnArrowMove';\nexport * from './RxnArrowRotate';\nexport * from './RxnArrowResize';\nexport * from './plus';\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { SimpleObject, SimpleObjectMode, Vec2 } from 'domain/entities';\n\nimport Base from './base';\nimport { OperationType } from './OperationType';\nimport { ReSimpleObject } from '../../render';\nimport { Scale } from 'domain/helpers';\nimport { tfx } from 'utilities';\n\ninterface SimpleObjectAddData {\n  id?: number;\n  pos: Array<Vec2>;\n  mode: SimpleObjectMode;\n  toCircle: boolean;\n}\nexport class SimpleObjectAdd extends Base {\n  data: SimpleObjectAddData;\n\n  constructor(\n    pos: Array<Vec2> = [],\n    mode: SimpleObjectMode = SimpleObjectMode.line,\n    toCircle = false,\n    id?: number,\n  ) {\n    super(OperationType.SIMPLE_OBJECT_ADD);\n    this.data = { pos, mode, toCircle, id };\n  }\n\n  execute(restruct: any): void {\n    const struct = restruct.molecule;\n    const item = new SimpleObject({ mode: this.data.mode });\n\n    if (this.data.id == null) {\n      const index = struct.simpleObjects.add(item);\n      this.data.id = index;\n    } else {\n      struct.simpleObjects.set(this.data.id!, item);\n    }\n\n    const itemId = this.data.id!;\n\n    restruct.simpleObjects.set(itemId, new ReSimpleObject(item));\n\n    const positions = [...this.data.pos];\n    if (this.data.toCircle) {\n      positions[1] = makeCircleFromEllipse(positions[0], positions[1]);\n    }\n    struct.simpleObjectSetPos(\n      itemId,\n      positions.map((p) => new Vec2(p)),\n    );\n\n    Base.invalidateItem(restruct, 'simpleObjects', itemId, 1);\n  }\n\n  invert(): Base {\n    return new SimpleObjectDelete(this.data.id!);\n  }\n}\n\ninterface SimpleObjectDeleteData {\n  id: number;\n  pos?: Array<Vec2>;\n  mode?: SimpleObjectMode;\n  toCircle?: boolean;\n}\n\nexport class SimpleObjectDelete extends Base {\n  data: SimpleObjectDeleteData;\n  performed: boolean;\n\n  constructor(id: number) {\n    super(OperationType.SIMPLE_OBJECT_DELETE);\n    this.data = { id, pos: [], mode: SimpleObjectMode.line, toCircle: false };\n    this.performed = false;\n  }\n\n  execute(restruct: any): void {\n    const struct = restruct.molecule;\n    const item = struct.simpleObjects.get(this.data.id) as any;\n    // save to data current values. In future they could be used in invert for restoring simple object\n    this.data.pos = item.pos;\n    this.data.mode = item.mode;\n    this.data.toCircle = item.toCircle;\n    this.performed = true;\n\n    restruct.markItemRemoved();\n    restruct.clearVisel(restruct.simpleObjects.get(this.data.id).visel);\n    restruct.simpleObjects.delete(this.data.id);\n\n    struct.simpleObjects.delete(this.data.id);\n  }\n\n  invert(): Base {\n    return new SimpleObjectAdd(\n      this.data.pos,\n      this.data.mode,\n      this.data.toCircle,\n      this.data.id,\n    );\n  }\n}\n\ninterface SimpleObjectMoveData {\n  id: number;\n  d: any;\n  noinvalidate: boolean;\n}\n\nexport class SimpleObjectMove extends Base {\n  data: SimpleObjectMoveData;\n\n  constructor(id: number, d: any, noinvalidate: boolean) {\n    super(OperationType.SIMPLE_OBJECT_MOVE);\n    this.data = { id, d, noinvalidate };\n  }\n\n  execute(restruct: any): void {\n    const struct = restruct.molecule;\n    const id = this.data.id;\n    const d = this.data.d;\n    const item = struct.simpleObjects.get(id);\n    item.pos.forEach((p) => p.add_(d));\n    restruct.simpleObjects\n      .get(id)\n      .visel.translate(Scale.modelToCanvas(d, restruct.render.options));\n    this.data.d = d.negated();\n    if (!this.data.noinvalidate) {\n      Base.invalidateItem(restruct, 'simpleObjects', id, 1);\n    }\n  }\n\n  invert(): Base {\n    const move = new SimpleObjectMove(\n      this.data.id,\n      this.data.d,\n      this.data.noinvalidate,\n    );\n    // todo Need further investigation on why this is needed?\n    move.data = this.data;\n    return move;\n  }\n}\n\ninterface SimpleObjectResizeData {\n  id: number;\n  d: any;\n  current: Vec2;\n  anchor: Vec2;\n  noinvalidate: boolean;\n  toCircle: boolean;\n}\n\nfunction handleRectangleChangeWithAnchor(item, anchor, current) {\n  const previousPos0 = item.pos[0].get_xy0();\n  const previousPos1 = item.pos[1].get_xy0();\n\n  if (tfx(anchor.x) === tfx(item.pos[1].x)) {\n    item.pos[1].x = anchor.x = current.x;\n    current.x = previousPos1.x;\n  }\n  if (tfx(anchor.y) === tfx(item.pos[1].y)) {\n    item.pos[1].y = anchor.y = current.y;\n    current.y = previousPos1.y;\n  }\n  if (tfx(anchor.x) === tfx(item.pos[0].x)) {\n    item.pos[0].x = anchor.x = current.x;\n    current.x = previousPos0.x;\n  }\n  if (tfx(anchor.y) === tfx(item.pos[0].y)) {\n    item.pos[0].y = anchor.y = current.y;\n    current.y = previousPos0.y;\n  }\n}\n\nexport class SimpleObjectResize extends Base {\n  data: SimpleObjectResizeData;\n\n  constructor(\n    id: number,\n    d: any,\n    current: Vec2,\n    anchor: any,\n    noinvalidate: boolean,\n    toCircle: boolean,\n  ) {\n    super(OperationType.SIMPLE_OBJECT_RESIZE);\n    this.data = { id, d, current, anchor, noinvalidate, toCircle };\n  }\n\n  execute(restruct: any): void {\n    const struct = restruct.molecule;\n    const id = this.data.id;\n    const d = this.data.d;\n    const current = this.data.current;\n    const item = struct.simpleObjects.get(id);\n    const anchor = this.data.anchor;\n    if (item.mode === SimpleObjectMode.ellipse) {\n      if (anchor) {\n        handleRectangleChangeWithAnchor(item, anchor, current);\n      } else if (this.data.toCircle) {\n        const previousPos1 = item.pos[1].get_xy0();\n        const circlePoint = makeCircleFromEllipse(item.pos[0], current);\n        item.pos[1].x = circlePoint.x;\n        item.pos[1].y = circlePoint.y;\n        this.data.current = previousPos1;\n      } else {\n        const previousPos1 = item.pos[1].get_xy0();\n        item.pos[1].x = current.x;\n        item.pos[1].y = current.y;\n        this.data.current = previousPos1;\n      }\n    } else if (item.mode === SimpleObjectMode.line && anchor) {\n      const previousPos0 = item.pos[0].get_xy0();\n      const previousPos1 = item.pos[1].get_xy0();\n\n      if (\n        tfx(anchor.x) === tfx(item.pos[1].x) &&\n        tfx(anchor.y) === tfx(item.pos[1].y)\n      ) {\n        item.pos[1].x = anchor.x = current.x;\n        current.x = previousPos1.x;\n        item.pos[1].y = anchor.y = current.y;\n        current.y = previousPos1.y;\n      }\n\n      if (\n        tfx(anchor.x) === tfx(item.pos[0].x) &&\n        tfx(anchor.y) === tfx(item.pos[0].y)\n      ) {\n        item.pos[0].x = anchor.x = current.x;\n        current.x = previousPos0.x;\n        item.pos[0].y = anchor.y = current.y;\n        current.y = previousPos0.y;\n      }\n    } else if (item.mode === SimpleObjectMode.rectangle && anchor) {\n      handleRectangleChangeWithAnchor(item, anchor, current);\n    } else item.pos[1].add_(d);\n\n    restruct.simpleObjects\n      .get(id)\n      .visel.translate(Scale.modelToCanvas(d, restruct.render.options));\n    this.data.d = d.negated();\n    if (!this.data.noinvalidate) {\n      Base.invalidateItem(restruct, 'simpleObjects', id, 1);\n    }\n  }\n\n  invert(): Base {\n    return new SimpleObjectResize(\n      this.data.id,\n      this.data.d,\n      this.data.current,\n      this.data.anchor,\n      this.data.noinvalidate,\n      this.data.toCircle,\n    );\n  }\n}\n\nexport function makeCircleFromEllipse(position0: Vec2, position1: Vec2): Vec2 {\n  const diff = Vec2.diff(position1, position0);\n  const min = Math.abs(diff.x) < Math.abs(diff.y) ? diff.x : diff.y;\n  return new Vec2(\n    position0.x + (diff.x > 0 ? 1 : -1) * Math.abs(min),\n    position0.y + (diff.y > 0 ? 1 : -1) * Math.abs(min),\n    0,\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\nimport { SGroup } from 'domain/entities';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype Data = {\n  sgid: any;\n  aid: any;\n};\n\nclass SGroupAtomAdd extends BaseOperation {\n  data: Data;\n\n  constructor(sgroupId?: any, aid?: any) {\n    super(OperationType.S_GROUP_ATOM_ADD, OperationPriority.S_GROUP_ATOM_ADD);\n    this.data = { sgid: sgroupId, aid };\n  }\n\n  execute(restruct: ReStruct) {\n    const { aid, sgid } = this.data;\n\n    const struct = restruct.molecule;\n    const atom = struct.atoms.get(aid)!;\n    const sgroup = struct.sgroups.get(sgid)!;\n\n    if (sgroup.atoms.indexOf(aid) >= 0) {\n      return;\n    }\n\n    if (!atom) {\n      throw new Error('OpSGroupAtomAdd: Atom ' + aid + ' not found');\n    }\n\n    struct.atomAddToSGroup(sgid, aid);\n    BaseOperation.invalidateAtom(restruct, aid);\n  }\n\n  invert() {\n    const inverted = new SGroupAtomRemove();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nclass SGroupAtomRemove extends BaseOperation {\n  data: Data;\n\n  constructor(sgroupId?: any, aid?: any) {\n    super(OperationType.S_GROUP_ATOM_REMOVE, 4);\n    this.data = { sgid: sgroupId, aid };\n  }\n\n  execute(restruct: ReStruct) {\n    const { aid, sgid } = this.data;\n\n    const struct = restruct.molecule;\n    const atom = struct.atoms.get(aid)!;\n    const sgroup = struct.sgroups.get(sgid)!;\n\n    if (!atom || !sgroup) {\n      return;\n    }\n\n    SGroup.removeAtom(sgroup, aid);\n    atom.sgs.delete(sgid);\n    BaseOperation.invalidateAtom(restruct, aid);\n  }\n\n  invert() {\n    const inverted = new SGroupAtomAdd();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nexport { SGroupAtomAdd, SGroupAtomRemove };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\n\nexport class SGroupAttr extends BaseOperation {\n  data: {\n    sgid: any;\n    attr: any;\n    value: any;\n  };\n\n  constructor(sgroupId?: any, attribute?: any, value?: any) {\n    super(OperationType.S_GROUP_ATTR, OperationPriority.S_GROUP_ATTR);\n    this.data = {\n      sgid: sgroupId,\n      attr: attribute,\n      value,\n    };\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const sgroupId = this.data.sgid!;\n    const sgroup = struct.sgroups.get(sgroupId)!;\n\n    if (!sgroup) {\n      return;\n    }\n\n    const sgroupData = restruct.sgroupData.get(sgroupId);\n    if (sgroup.type === 'DAT' && sgroupData) {\n      // clean the stuff here, else it might be left behind if the sgroups is set to \"attached\"\n      restruct.clearVisel(sgroupData.visel);\n      restruct.sgroupData.delete(sgroupId);\n    }\n\n    this.data.value = sgroup.setAttr(this.data.attr, this.data.value);\n  }\n\n  invert() {\n    const inverted = new SGroupAttr();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\n\nexport class SGroupDataMove extends BaseOperation {\n  data: {\n    id: any;\n    d: any;\n  };\n\n  constructor(id?: any, d?: any) {\n    super(OperationType.S_GROUP_DATA_MOVE);\n    this.data = { id, d };\n  }\n\n  execute(restruct: ReStruct) {\n    const { d, id } = this.data;\n    const { sgroups } = restruct.molecule;\n\n    sgroups.get(id)!.pp?.add_(d); // eslint-disable-line no-underscore-dangle\n    this.data.d = d.negated();\n\n    // [MK] this currently does nothing since the DataSGroupData Visel only contains the highlighting/selection and SGroups are redrawn every time anyway\n    BaseOperation.invalidateItem(restruct, 'sgroupData', id, 1);\n  }\n\n  invert() {\n    const inverted = new SGroupDataMove();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype Data = {\n  sgid: any;\n  parent?: any;\n  children?: any;\n};\n\nclass SGroupAddToHierarchy extends BaseOperation {\n  data: Data;\n\n  constructor(sgroupId?: any, parent?: any, children?: any) {\n    super(\n      OperationType.S_GROUP_ADD_TO_HIERACHY,\n      OperationPriority.S_GROUP_ADD_TO_HIERACHY,\n    );\n    this.data = { sgid: sgroupId, parent, children };\n  }\n\n  execute(restruct: ReStruct) {\n    const { sgid, parent, children } = this.data;\n\n    const struct = restruct.molecule;\n    const sgroup = struct.sgroups.get(sgid)!;\n    const relations = struct.sGroupForest.insert(sgroup, parent, children);\n\n    this.data.parent = relations.parent;\n    this.data.children = relations.children;\n  }\n\n  invert() {\n    const inverted = new SGroupRemoveFromHierarchy();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nclass SGroupRemoveFromHierarchy extends BaseOperation {\n  data: Data;\n\n  constructor(sgroupId?: any) {\n    super(OperationType.S_GROUP_REMOVE_FROM_HIERACHY, 110);\n    this.data = { sgid: sgroupId };\n  }\n\n  execute(restruct: any) {\n    const { sgid } = this.data;\n    const struct = restruct.molecule;\n\n    this.data.parent = struct.sGroupForest.parent.get(sgid);\n    this.data.children = struct.sGroupForest.children.get(sgid);\n    struct.sGroupForest.remove(sgid);\n  }\n\n  invert() {\n    const inverted = new SGroupAddToHierarchy();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nexport { SGroupAddToHierarchy, SGroupRemoveFromHierarchy };\n","import { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\nimport { SGroupAttachmentPoint } from 'domain/entities';\nimport assert from 'assert';\n\ntype Data = {\n  sGroupId: number;\n  attachmentPoint: SGroupAttachmentPoint;\n};\n\nexport class SGroupAttachmentPointAdd extends BaseOperation {\n  data: Data;\n\n  constructor(sGroupId: number, attachmentPoint: SGroupAttachmentPoint) {\n    super(\n      OperationType.S_GROUP_ATTACHMENT_POINT_ADD,\n      OperationPriority.S_GROUP_ATTACHMENT_POINT_ADD,\n    );\n    this.data = { sGroupId, attachmentPoint };\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const sgroup = struct.sgroups.get(this.data.sGroupId);\n\n    assert(sgroup != null);\n\n    const attachmentPoint = this.data.attachmentPoint;\n    const apAtom = struct.atoms.get(attachmentPoint.atomId);\n\n    if (!apAtom) {\n      throw new Error(\n        `attachmentPoint for Atom with id \"${attachmentPoint.atomId}\" is not found`,\n      );\n    }\n\n    sgroup.addAttachmentPoint(attachmentPoint);\n  }\n\n  invert() {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return new SGroupAttachmentPointRemove(\n      this.data.sGroupId,\n      this.data.attachmentPoint,\n    );\n  }\n}\n\nexport class SGroupAttachmentPointRemove extends BaseOperation {\n  data: Data;\n\n  constructor(sGroupId: number, attachmentPoint: SGroupAttachmentPoint) {\n    super(OperationType.S_GROUP_ATTACHMENT_POINT_REMOVE, 4);\n    this.data = { sGroupId, attachmentPoint };\n  }\n\n  execute(restruct: ReStruct) {\n    const { sGroupId, attachmentPoint } = this.data;\n    const struct = restruct.molecule;\n    const sgroup = struct.sgroups.get(sGroupId);\n    sgroup?.removeAttachmentPoint(attachmentPoint);\n  }\n\n  invert() {\n    return new SGroupAttachmentPointAdd(\n      this.data.sGroupId,\n      this.data.attachmentPoint,\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { FunctionalGroup, SGroup, Vec2 } from 'domain/entities';\nimport { ReSGroup, ReStruct } from '../../../render';\n\nimport { BaseOperation } from '../base';\nimport { OperationPriority, OperationType } from '../OperationType';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\n\n// todo: separate classes: now here is circular dependency in `invert` method\n\ntype Data = {\n  sgid: any;\n  type?: any;\n  pp?: any;\n  expanded?: boolean;\n  name?: string;\n  oldSgroup?: SGroup;\n};\n\nclass SGroupCreate extends BaseOperation {\n  data: Data;\n\n  constructor(\n    sgroupId?: any,\n    type?: any,\n    pp?: any,\n    expanded?: boolean,\n    name?: string,\n    oldSgroup?: SGroup,\n  ) {\n    super(OperationType.S_GROUP_CREATE);\n    this.data = {\n      sgid: sgroupId,\n      type,\n      pp,\n      expanded,\n      name,\n      oldSgroup,\n    };\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const { sgid, pp, expanded, name, oldSgroup } = this.data;\n    const sgroup =\n      oldSgroup instanceof MonomerMicromolecule\n        ? new MonomerMicromolecule(SGroup.TYPES.SUP, oldSgroup.monomer)\n        : new SGroup(this.data.type);\n\n    sgroup.id = sgid;\n    struct.sgroups.set(sgid, sgroup);\n\n    if (pp) {\n      sgroup!.pp = new Vec2(pp);\n    }\n\n    if (expanded) {\n      sgroup.data.expanded = expanded;\n    }\n\n    if (name) {\n      sgroup.data.name = name;\n    }\n\n    const existingSGroup = struct.sgroups.get(sgid);\n\n    if (existingSGroup) {\n      restruct.sgroups.set(sgid, new ReSGroup(existingSGroup));\n      if (\n        FunctionalGroup.isFunctionalGroup(sgroup) ||\n        SGroup.isSuperAtom(sgroup)\n      ) {\n        restruct.molecule.functionalGroups.add(new FunctionalGroup(sgroup));\n      }\n    }\n    this.data.sgid = sgid;\n  }\n\n  invert() {\n    const inverted = new SGroupDelete();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nclass SGroupDelete extends BaseOperation {\n  data: Data;\n\n  constructor(sgroupId?: any) {\n    super(OperationType.S_GROUP_DELETE, OperationPriority.S_GROUP_DELETE);\n    this.data = { sgid: sgroupId };\n  }\n\n  execute(restruct: ReStruct) {\n    const struct = restruct.molecule;\n    const { sgid } = this.data;\n    const sgroup = restruct.sgroups.get(sgid);\n    const sgroupData = restruct.sgroupData.get(sgid);\n    if (!sgroup) return;\n    this.data.type = sgroup?.item?.type;\n    this.data.pp = sgroup?.item?.pp;\n    this.data.oldSgroup = sgroup.item;\n\n    if (sgroup?.item?.type === 'DAT' && sgroupData) {\n      restruct.clearVisel(sgroupData.visel);\n      restruct.sgroupData.delete(sgid);\n    }\n\n    restruct.clearVisel(sgroup.visel);\n    if (sgroup?.item?.atoms?.length !== 0) {\n      throw new Error('S-Group not empty!');\n    }\n\n    if (\n      FunctionalGroup.isFunctionalGroup(sgroup.item) ||\n      SGroup.isSuperAtom(sgroup.item)\n    ) {\n      let relatedFGroupId;\n      this.data.name = sgroup.item.data.name;\n      this.data.expanded = (sgroup.item as SGroup).isExpanded();\n      restruct.molecule.functionalGroups.forEach((fg, fgid) => {\n        if (fg.relatedSGroupId === sgid) {\n          relatedFGroupId = fgid;\n        }\n      });\n      restruct.molecule.functionalGroups.delete(relatedFGroupId);\n    }\n\n    restruct.sgroups.delete(sgid);\n    struct.sgroups.delete(sgid);\n  }\n\n  invert() {\n    const inverted = new SGroupCreate();\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nexport { SGroupCreate, SGroupDelete };\nexport * from './sgroupAtom';\nexport * from './SGroupAttr';\nexport * from './SGroupDataMove';\nexport * from './sgroupHierarchy';\nexport * from './sgroupAttachmentPoints';\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { ReStruct, ReText } from '../../../render';\nimport { Text, Vec2 } from 'domain/entities';\n\nimport { BaseOperation } from '../base';\nimport { OperationType } from '../OperationType';\n\ninterface TextCreateData {\n  id?: number;\n  content: string;\n  pos: Array<Vec2>;\n  position: Vec2;\n}\n\nexport class TextCreate extends BaseOperation {\n  data: TextCreateData;\n\n  constructor(content: string, position: Vec2, pos: Array<Vec2>, id?: number) {\n    super(OperationType.TEXT_CREATE);\n    this.data = { content, position, pos, id };\n  }\n\n  execute(restruct: ReStruct): void {\n    const item = new Text(this.data);\n\n    if (this.data.id == null) {\n      const index = restruct.molecule.texts.add(item);\n      this.data.id = index;\n    } else {\n      restruct.molecule.texts.set(this.data.id!, item);\n    }\n\n    const itemId = this.data.id!;\n\n    restruct.texts.set(itemId, new ReText(item));\n\n    restruct.molecule.textSetPosition(itemId, new Vec2(this.data.position));\n    BaseOperation.invalidateItem(restruct, 'texts', itemId, 1);\n  }\n\n  invert(): BaseOperation {\n    return new TextDelete(this.data.id!);\n  }\n}\n\ninterface TextDeleteData {\n  id: number;\n  content?: string;\n  position?: Vec2;\n  pos?: Array<Vec2> | [];\n}\n\nexport class TextDelete extends BaseOperation {\n  data: TextDeleteData;\n\n  constructor(id: number) {\n    super(OperationType.TEXT_DELETE);\n    this.data = { id };\n  }\n\n  execute(restruct: ReStruct): void {\n    const struct = restruct.molecule;\n    const item = struct.texts.get(this.data.id)!;\n    if (!item) return;\n\n    this.data.content = item.content!;\n    this.data.position = item.position;\n\n    restruct.markItemRemoved();\n\n    restruct.clearVisel(restruct.texts.get(this.data.id)!.visel);\n    restruct.texts.delete(this.data.id);\n\n    struct.texts.delete(this.data.id);\n  }\n\n  invert(): BaseOperation {\n    return new TextCreate(\n      this.data.content!,\n      this.data.position!,\n      this.data.pos!,\n      this.data.id,\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\n\ninterface TextUpdateData {\n  id: number;\n  content: string;\n  previousContent?: string;\n}\n\nexport class TextUpdate extends BaseOperation {\n  data: TextUpdateData;\n\n  constructor(id: number, content: string) {\n    super(OperationType.TEXT_UPDATE);\n    this.data = { id, content };\n  }\n\n  execute(restruct: ReStruct) {\n    const { id, content } = this.data;\n    const text = restruct.molecule.texts.get(id);\n\n    if (text) {\n      this.data.previousContent = text.content!;\n      text.content = content;\n    }\n\n    BaseOperation.invalidateItem(restruct, 'texts', id, 1);\n  }\n\n  invert() {\n    const inverted = new TextUpdate(this.data.id, this.data.previousContent!);\n\n    inverted.data.previousContent = this.data.content;\n    return inverted;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../base';\nimport { OperationType } from '../OperationType';\nimport { ReStruct } from '../../../render';\nimport { Scale } from 'domain/helpers';\n\ninterface TextMoveData {\n  id: any;\n  d: any;\n  noinvalidate?: boolean;\n}\n\nexport class TextMove extends BaseOperation {\n  data: TextMoveData;\n\n  constructor(id: any, d: any, noinvalidate?: boolean) {\n    super(OperationType.TEXT_MOVE);\n    this.data = { id, d, noinvalidate };\n  }\n\n  execute(restruct: ReStruct): void {\n    const struct = restruct.molecule;\n    const id = this.data.id;\n    const difference = this.data.d;\n    const item = struct.texts.get(id);\n    const renderItem = restruct.texts.get(id);\n\n    if (!item || !renderItem) {\n      return;\n    }\n\n    item.position.add_(difference);\n    item.setPos(renderItem.getReferencePoints());\n\n    renderItem.visel.translate(\n      Scale.modelToCanvas(difference, restruct.render.options),\n    );\n\n    this.data.d = difference.negated();\n\n    if (!this.data.noinvalidate) {\n      BaseOperation.invalidateItem(restruct, 'texts', id, 1);\n    }\n  }\n\n  invert(): BaseOperation {\n    const move = new TextMove(\n      this.data.id,\n      this.data.d,\n      this.data.noinvalidate,\n    );\n\n    move.data = this.data;\n\n    return move;\n  }\n}\n","import { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { provideEditorSettings } from 'application/editor/editorSettings';\nimport ZoomTool from 'application/editor/tools/Zoom';\nimport { select } from 'd3';\nimport {\n  canvasSelector,\n  drawnStructuresSelector,\n} from 'application/editor/constants';\n\nexport interface IBaseRenderer {\n  show(theme): void;\n  remove(): void;\n}\n\nexport abstract class BaseRenderer implements IBaseRenderer {\n  protected rootElement?: D3SvgElementSelection<SVGGElement, void>;\n\n  public bodyElement?:\n    | D3SvgElementSelection<SVGUseElement, this>\n    | D3SvgElementSelection<SVGLineElement, this>\n    | D3SvgElementSelection<SVGPathElement, this>\n    | D3SvgElementSelection<SVGCircleElement, this>;\n\n  protected hoverElement?:\n    | D3SvgElementSelection<SVGUseElement, void>\n    | D3SvgElementSelection<SVGGElement, void>\n    | D3SvgElementSelection<SVGCircleElement, void>\n    | D3SvgElementSelection<SVGRectElement, void>\n    | D3SvgElementSelection<SVGPathElement, void>;\n\n  protected hoverAreaElement?: D3SvgElementSelection<\n    SVGGElement | SVGLineElement,\n    void\n  >;\n\n  protected hoverCircleAreaElement?: D3SvgElementSelection<\n    SVGGElement | SVGCircleElement,\n    void\n  >;\n\n  protected canvasWrapper: D3SvgElementSelection<SVGSVGElement, void>;\n\n  protected canvas: D3SvgElementSelection<SVGSVGElement, void>;\n  protected constructor(public drawingEntity: DrawingEntity) {\n    this.canvasWrapper =\n      ZoomTool.instance?.canvasWrapper || select(canvasSelector);\n    this.canvas = ZoomTool.instance?.canvas || select(drawnStructuresSelector);\n  }\n\n  protected get editorSettings() {\n    return provideEditorSettings();\n  }\n\n  public get rootBBox() {\n    const rootNode = this.rootElement?.node();\n    if (!rootNode) return;\n\n    return rootNode.getBBox();\n  }\n\n  public get rootBoundingClientRect() {\n    const rootNode = this.rootElement?.node();\n    if (!rootNode) return;\n\n    return rootNode.getBoundingClientRect();\n  }\n\n  public get width() {\n    return this.rootBBox?.width || 0;\n  }\n\n  public get height() {\n    return this.rootBBox?.height || 0;\n  }\n\n  public get x() {\n    return this.rootBBox?.x || 0;\n  }\n\n  public get y() {\n    return this.rootBBox?.y || 0;\n  }\n\n  public abstract show(theme, force?: boolean): void;\n  public abstract drawSelection(): void;\n  public abstract moveSelection(): void;\n  protected abstract appendHover(\n    hoverArea,\n  ):\n    | D3SvgElementSelection<SVGGElement, void>\n    | D3SvgElementSelection<SVGUseElement, void>\n    | D3SvgElementSelection<SVGCircleElement, void>\n    | D3SvgElementSelection<SVGRectElement, void>\n    | D3SvgElementSelection<SVGPathElement, void>\n    | void;\n\n  protected abstract removeHover(): void;\n  protected abstract appendHoverAreaElement(): void;\n\n  public remove() {\n    this.rootElement?.remove();\n    this.rootElement = undefined;\n  }\n\n  public redrawHover() {\n    if (this.drawingEntity.hovered) {\n      const hoverElement = this.appendHover(this.hoverAreaElement);\n      if (hoverElement) {\n        this.hoverElement = hoverElement;\n      }\n    } else {\n      this.removeHover();\n      this.hoverElement = undefined;\n    }\n  }\n\n  move() {}\n}\n","import { BaseRenderer } from 'application/render/renderers/internal';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { Vec2 } from 'domain/entities/vec2';\n\nexport class BaseSequenceRenderer extends BaseRenderer {\n  protected appendHover(\n    _hoverArea,\n  ): D3SvgElementSelection<SVGUseElement, void> | void {\n    return undefined;\n  }\n\n  protected appendHoverAreaElement(): void {}\n\n  drawSelection(): void {}\n\n  moveSelection(): void {}\n\n  protected removeHover(): void {}\n\n  show(_theme?): void {}\n\n  get center() {\n    return new Vec2(0, 0, 0);\n  }\n}\n","import { Vec2 } from 'domain/entities/vec2';\nimport { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport assert from 'assert';\nimport { Coordinates } from 'application/editor/shared/coordinates';\nimport { BaseSequenceRenderer } from 'application/render/renderers/sequence/BaseSequenceRenderer';\nlet id = 0;\n\nexport interface DrawingEntityConfig {\n  generateId: boolean;\n}\nexport abstract class DrawingEntity {\n  public selected = false;\n  public hovered = false;\n  public id = 0;\n  public baseRenderer?: BaseRenderer;\n\n  protected constructor(\n    private _position: Vec2 = new Vec2(0, 0),\n    private config: DrawingEntityConfig = {\n      generateId: true,\n    },\n  ) {\n    this._position = _position || new Vec2(0, 0);\n    if (this.config?.generateId === true) {\n      this.id = id;\n      id++;\n    }\n  }\n\n  moveRelative(position: Vec2) {\n    this._position.x += position.x;\n    this._position.y += position.y;\n  }\n\n  public moveAbsolute(position: Vec2) {\n    this._position = position;\n  }\n\n  get position() {\n    return this._position;\n  }\n\n  public turnOnHover() {\n    this.hovered = true;\n  }\n\n  public turnOffHover() {\n    this.hovered = false;\n  }\n\n  public turnOnSelection() {\n    this.selected = true;\n  }\n\n  public turnOffSelection() {\n    this.selected = false;\n  }\n\n  public abstract get center(): Vec2;\n\n  public selectIfLocatedInRectangle(\n    rectangleTopLeftPoint: Vec2,\n    rectangleBottomRightPoint: Vec2,\n    isPreviousSelected = false,\n    shiftKey = false,\n  ) {\n    assert(this.baseRenderer);\n    const prevSelectedValue = this.selected;\n    let center = Coordinates.modelToCanvas(this.center);\n    if (this.baseRenderer instanceof BaseSequenceRenderer) {\n      center = this.baseRenderer.center;\n    }\n    const locatedInRectangle =\n      rectangleBottomRightPoint.x > center.x &&\n      rectangleBottomRightPoint.y > center.y &&\n      rectangleTopLeftPoint.x < center.x &&\n      rectangleTopLeftPoint.y < center.y;\n    if ((shiftKey && !isPreviousSelected) || !shiftKey) {\n      if (locatedInRectangle) {\n        this.turnOnSelection();\n      } else {\n        this.turnOffSelection();\n      }\n    }\n\n    return prevSelectedValue !== this.selected;\n  }\n\n  public setBaseRenderer(renderer: BaseRenderer) {\n    this.baseRenderer = renderer;\n  }\n}\n","import { DrawingEntity } from './DrawingEntity';\nimport { Vec2 } from 'domain/entities/vec2';\n\nexport abstract class BaseBond extends DrawingEntity {\n  public endPosition: Vec2 = new Vec2();\n\n  abstract get firstEndEntity(): DrawingEntity;\n  abstract get secondEndEntity(): DrawingEntity | undefined;\n\n  public get finished() {\n    return Boolean(this.firstEndEntity && this.secondEndEntity);\n  }\n\n  public get center() {\n    return Vec2.centre(this.startPosition, this.endPosition);\n  }\n\n  public moveToLinkedEntities() {\n    const firstMonomerCenter = this.firstEndEntity.position;\n    const secondMonomerCenter = this.secondEndEntity?.position;\n    this.moveBondStartAbsolute(firstMonomerCenter.x, firstMonomerCenter.y);\n    if (secondMonomerCenter) {\n      this.moveBondEndAbsolute(secondMonomerCenter.x, secondMonomerCenter.y);\n    }\n  }\n\n  public moveBondStartAbsolute(x, y) {\n    this.moveAbsolute(new Vec2(x, y));\n  }\n\n  public moveBondEndAbsolute(x, y) {\n    this.endPosition = new Vec2(x, y);\n  }\n\n  public get startPosition() {\n    return this.position;\n  }\n\n  public getAnotherEntity(monomer: DrawingEntity): DrawingEntity | undefined {\n    return this.firstEndEntity === monomer\n      ? this.secondEndEntity\n      : this.firstEndEntity;\n  }\n}\n","import { Atom } from 'domain/entities/CoreAtom';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { BaseRenderer } from 'application/render';\nimport { MonomerToAtomBondRenderer } from 'application/render/renderers/MonomerToAtomBondRenderer';\nimport { MonomerToAtomBondSequenceRenderer } from 'application/render/renderers/sequence/MonomerToAtomBondSequenceRenderer';\nimport { BaseBond } from './BaseBond';\n\nexport class MonomerToAtomBond extends BaseBond {\n  public renderer?:\n    | MonomerToAtomBondRenderer\n    | MonomerToAtomBondSequenceRenderer = undefined;\n\n  constructor(public monomer: BaseMonomer, public atom: Atom) {\n    super();\n  }\n\n  public setRenderer(\n    renderer: MonomerToAtomBondRenderer | MonomerToAtomBondSequenceRenderer,\n  ): void {\n    super.setBaseRenderer(renderer as BaseRenderer);\n    this.renderer = renderer;\n  }\n\n  get firstEndEntity(): BaseMonomer {\n    return this.monomer;\n  }\n\n  get secondEndEntity(): Atom {\n    return this.atom;\n  }\n}\n","import { Vec2 } from 'domain/entities/vec2';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { Selection, line } from 'd3';\nimport { BaseMonomer } from './entities/BaseMonomer';\nimport assert from 'assert';\nimport {\n  canvasToMonomerCoordinates,\n  findLabelPoint,\n  Coordinates,\n  getSearchFunction,\n} from './helpers/attachmentPointCalculations';\nimport { editorEvents } from 'application/editor/editorEvents';\nimport { AttachmentPointConstructorParams, AttachmentPointName } from './types';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\n\nexport class AttachmentPoint {\n  static attachmentPointVector = 6;\n  static attachmentPointLength = Math.hypot(\n    AttachmentPoint.attachmentPointVector,\n    AttachmentPoint.attachmentPointVector,\n  );\n\n  static labelOffset = 3.5;\n  static radius = 3;\n  static labelSize = { x: 3.5, y: 2.5 };\n  static colors = {\n    fillUsed: '#0097A8',\n    fill: 'white',\n    fillPotentially: '#167782',\n    strokeUsed: '#0097A8',\n    stroke: '#167782',\n    strokePotentially: '#167782',\n  };\n\n  protected rootElement: D3SvgElementSelection<SVGGElement, void>;\n  protected attachmentPoint: D3SvgElementSelection<SVGGElement, this> | null;\n  public monomer: BaseMonomer;\n  protected bodyWidth: number;\n  protected bodyHeight: number;\n  protected attachmentPointName: AttachmentPointName;\n  protected canvasOffset: Coordinates;\n  protected centerOfMonomer: Coordinates;\n  protected element:\n    | Selection<SVGGElement, this, HTMLElement, never>\n    | undefined;\n\n  private hoverableArea:\n    | Selection<SVGGElement, this, HTMLElement, never>\n    | undefined;\n\n  protected initialAngle = 0;\n  private isUsed: boolean;\n  private isSnake;\n  private editorEvents: typeof editorEvents;\n  private applyZoomForPositionCalculation: boolean;\n\n  constructor(\n    constructorParams: AttachmentPointConstructorParams,\n    skipInit?: boolean,\n  ) {\n    this.rootElement = constructorParams.rootElement;\n    this.monomer = constructorParams.monomer;\n    this.bodyWidth = constructorParams.bodyWidth;\n    this.bodyHeight = constructorParams.bodyHeight;\n    this.canvasOffset =\n      constructorParams.canvas.node()?.getBoundingClientRect() ||\n      new DOMRect(0, 0, 0, 0);\n    this.attachmentPointName = constructorParams.attachmentPointName;\n    this.centerOfMonomer =\n      constructorParams.monomer.renderer?.center || new Vec2(0, 0, 0);\n    this.isSnake = constructorParams.isSnake;\n    this.isUsed = constructorParams.isUsed;\n    this.initialAngle = constructorParams.angle;\n    this.applyZoomForPositionCalculation =\n      constructorParams.applyZoomForPositionCalculation;\n    this.editorEvents = editorEvents;\n    this.attachmentPoint = null;\n\n    if (!skipInit) {\n      this.appendAttachmentPoint();\n    }\n  }\n\n  private get fill() {\n    if (\n      this.monomer.isAttachmentPointPotentiallyUsed(this.attachmentPointName)\n    ) {\n      return AttachmentPoint.colors.fillPotentially;\n    } else if (this.monomer.isAttachmentPointUsed(this.attachmentPointName)) {\n      return AttachmentPoint.colors.fillUsed;\n    } else {\n      return AttachmentPoint.colors.fill;\n    }\n  }\n\n  protected get stroke() {\n    if (\n      this.monomer.isAttachmentPointPotentiallyUsed(this.attachmentPointName)\n    ) {\n      return AttachmentPoint.colors.strokePotentially;\n    } else if (this.monomer.isAttachmentPointUsed(this.attachmentPointName)) {\n      return AttachmentPoint.colors.strokeUsed;\n    } else {\n      return AttachmentPoint.colors.stroke;\n    }\n  }\n\n  public removeAttachmentPoint() {\n    this.element?.remove();\n  }\n\n  protected renderAttachmentPointByCoordinates(\n    attachmentOnBorder: Coordinates,\n    attachmentPointCoordinates: Coordinates,\n    labelCoordinatesOnMonomer: Coordinates,\n  ) {\n    const fill = this.fill;\n    const stroke = this.stroke;\n\n    this.attachmentPoint = this.rootElement\n      .insert('g', ':first-child')\n      .data([this])\n      .style('pointer-events', 'none')\n      .style('cursor', 'pointer')\n      .attr('class', 'dynamic-element');\n\n    const attachmentPointElement = this.attachmentPoint.append('g');\n\n    attachmentPointElement\n      .append('line')\n      .attr('x1', attachmentOnBorder.x)\n      .attr('y1', attachmentOnBorder.y)\n      .attr('x2', attachmentPointCoordinates.x)\n      .attr('y2', attachmentPointCoordinates.y)\n      .attr('stroke', stroke)\n      .attr('stroke-linecap', 'round')\n      .attr('stroke-width', '1px');\n\n    attachmentPointElement\n      .append('circle')\n      .attr('r', AttachmentPoint.radius)\n      .attr('cx', attachmentPointCoordinates.x)\n      .attr('cy', attachmentPointCoordinates.y)\n      .attr('stroke', fill === 'white' ? '#0097A8' : 'white')\n      .attr('stroke-width', '1px')\n      .attr('fill', fill);\n\n    const labelGroup = this.attachmentPoint.append('text');\n\n    labelGroup\n      .text(this.attachmentPointName)\n      .attr('x', labelCoordinatesOnMonomer.x)\n      .attr('y', labelCoordinatesOnMonomer.y)\n      .style('font-size', '6px')\n      .style('fill', '#585858')\n      .style('user-select', 'none');\n\n    return this.attachmentPoint;\n  }\n\n  private renderHoverableArea(\n    monomerCenter: Coordinates,\n    attachmentPointCenter: Coordinates,\n    angleDegrees: number,\n    hasBond: boolean,\n  ) {\n    if (!this.element) {\n      return;\n    }\n\n    const rotation = angleDegrees + 90;\n    const halfWidth = 8;\n\n    const areaHeight = Math.sqrt(\n      (monomerCenter.x - attachmentPointCenter.x) ** 2 +\n        (monomerCenter.y - attachmentPointCenter.y) ** 2,\n    );\n\n    const points: Coordinates[] = [\n      { x: -AttachmentPoint.radius, y: AttachmentPoint.radius + 2 },\n      { x: AttachmentPoint.radius, y: AttachmentPoint.radius + 2 },\n      {\n        x: halfWidth,\n        y: -areaHeight + 10,\n      },\n      {\n        x: -halfWidth,\n        y: -areaHeight + 10,\n      },\n      { x: -AttachmentPoint.radius, y: AttachmentPoint.radius + 2 },\n    ];\n\n    const lineFunction = line<Coordinates>()\n      .x(({ x }) => x)\n      .y(({ y }) => y);\n\n    const hoverableAreaElement = this.element.append('g');\n\n    hoverableAreaElement\n      .append('path')\n      .attr('d', lineFunction(points) + 'z')\n      .attr('stroke', 'black')\n      .attr('stroke-width', '1px')\n      .attr('fill', '#0097A8')\n      .style('opacity', '0')\n      .style('pointer-events', hasBond ? 'none' : 'auto')\n      .attr(\n        'transform',\n        `translate(${attachmentPointCenter.x},${attachmentPointCenter.y})rotate(${rotation})`,\n      );\n\n    hoverableAreaElement\n      .on('mouseover', (event) => {\n        event.attachmentPointName = this.attachmentPointName;\n        this.editorEvents.mouseOverAttachmentPoint.dispatch(event);\n      })\n      .on('mouseleave', (event) => {\n        this.editorEvents.mouseLeaveAttachmentPoint.dispatch(event);\n      })\n      .on('mousedown', (event) => {\n        event.attachmentPointName = this.attachmentPointName;\n        this.editorEvents.mouseDownAttachmentPoint.dispatch(event);\n      })\n      .on('mouseup', (event) => {\n        event.attachmentPointName = this.attachmentPointName;\n        this.editorEvents.mouseUpAttachmentPoint.dispatch(event);\n      });\n\n    return hoverableAreaElement;\n  }\n\n  public appendAttachmentPoint() {\n    let angleDegrees;\n    let angleRadians: number;\n    const polymerBond =\n      this.monomer.attachmentPointsToBonds[this.attachmentPointName];\n\n    const firstMonomer =\n      polymerBond instanceof MonomerToAtomBond\n        ? polymerBond.monomer\n        : polymerBond?.firstMonomer;\n    const flip = this.monomer.id === firstMonomer?.id;\n    const isAttachmentpointR1 = this.attachmentPointName === 'R1';\n    if (!polymerBond) {\n      angleDegrees = this.initialAngle;\n    } else if (\n      !(polymerBond instanceof MonomerToAtomBond) &&\n      this.isSnake &&\n      !polymerBond?.renderer?.isMonomersOnSameHorizontalLine()\n    ) {\n      angleRadians = isAttachmentpointR1 ? 0 : Math.PI;\n      angleDegrees = Vec2.radiansToDegrees(angleRadians);\n    } else {\n      angleRadians = this.rotateToAngle(polymerBond, flip);\n\n      angleDegrees = Vec2.radiansToDegrees(angleRadians);\n    }\n\n    const [\n      attachmentToBorderCoordinates,\n      attachmentPointCoordinates,\n      labelCoordinates,\n    ] = this.getCoordinates(angleDegrees);\n\n    const attachmentToCenterCoordinates = canvasToMonomerCoordinates(\n      this.centerOfMonomer,\n      this.centerOfMonomer,\n      this.bodyWidth,\n      this.bodyHeight,\n    );\n\n    const attachmentPoint = this.renderAttachmentPointByCoordinates(\n      attachmentToBorderCoordinates,\n      attachmentPointCoordinates,\n      labelCoordinates,\n    );\n\n    this.element = attachmentPoint;\n\n    const hoverableArea = this.renderHoverableArea(\n      attachmentToCenterCoordinates,\n      attachmentPointCoordinates,\n      angleDegrees,\n      Boolean(polymerBond),\n    );\n\n    this.hoverableArea = hoverableArea;\n\n    return attachmentPoint;\n  }\n\n  public updateAttachmentPointStyleForHover() {\n    this.attachmentPoint?.select('line').style('stroke', this.stroke);\n    this.attachmentPoint\n      ?.select('circle')\n      .style('fill', this.fill)\n      .attr('stroke', this.fill === 'white' ? '#0097A8' : 'white');\n  }\n\n  public rotateToAngle(\n    polymerBond: PolymerBond | MonomerToAtomBond,\n    flip = false,\n  ) {\n    let angleRadians = 0;\n    if (flip) {\n      angleRadians = Vec2.oxAngleForVector(\n        polymerBond.endPosition,\n        polymerBond.position,\n      );\n    } else {\n      angleRadians = Vec2.oxAngleForVector(\n        polymerBond.position,\n        polymerBond.endPosition,\n      );\n    }\n\n    return angleRadians;\n  }\n\n  protected getCoordinates(angleDegrees) {\n    const [pointOnBorder, pointOfAttachment, labelPoint] =\n      this.catchThePoint(angleDegrees);\n\n    const attachmentToBorderCoordinates = canvasToMonomerCoordinates(\n      pointOnBorder,\n      this.centerOfMonomer,\n      this.bodyWidth,\n      this.bodyHeight,\n    );\n\n    const attachmentPointCoordinates = canvasToMonomerCoordinates(\n      pointOfAttachment,\n      this.centerOfMonomer,\n      this.bodyWidth,\n      this.bodyHeight,\n    );\n\n    const labelCoordinates = canvasToMonomerCoordinates(\n      labelPoint,\n      this.centerOfMonomer,\n      this.bodyWidth,\n      this.bodyHeight,\n    );\n\n    return [\n      attachmentToBorderCoordinates,\n      attachmentPointCoordinates,\n      labelCoordinates,\n    ];\n  }\n\n  public updateCoords() {\n    const polymerBond =\n      this.monomer.attachmentPointsToBonds[this.attachmentPointName];\n\n    if (!polymerBond || polymerBond instanceof MonomerToAtomBond) {\n      return;\n    }\n\n    const flip = this.monomer.id === polymerBond?.firstMonomer?.id;\n\n    const angleRadians = this.rotateToAngle(polymerBond, flip);\n    const angleDegrees = Vec2.radiansToDegrees(angleRadians);\n\n    const [\n      attachmentToBorderCoordinates,\n      attachmentPointCoordinates,\n      labelCoordinates,\n    ] = this.getCoordinates(angleDegrees);\n\n    this.attachmentPoint\n      ?.select('line')\n      .attr('x1', attachmentToBorderCoordinates.x)\n      .attr('y1', attachmentToBorderCoordinates.y)\n      .attr('x2', attachmentPointCoordinates.x)\n      .attr('y2', attachmentPointCoordinates.y);\n\n    this.attachmentPoint\n      ?.select('circle')\n      .attr('cx', attachmentPointCoordinates.x)\n      .attr('cy', attachmentPointCoordinates.y)\n      .attr('stroke', 'white')\n      .attr('fill', AttachmentPoint.colors.fillPotentially);\n\n    this.attachmentPoint\n      ?.select('text')\n      .attr('x', labelCoordinates.x)\n      .attr('y', labelCoordinates.y);\n  }\n\n  private catchThePoint(rotationAngle: number): Coordinates[] {\n    assert(this.monomer.renderer);\n\n    const currentMonomerCenter = {\n      x: this.monomer.renderer.center.x,\n      y: this.monomer.renderer.center.y,\n    };\n\n    this.initialAngle = rotationAngle;\n\n    const findPointOnMonomerBorder = getSearchFunction(\n      this.initialAngle - 180,\n      this.canvasOffset,\n      this.monomer,\n    );\n\n    const applyZoomForPositionCalculation =\n      this.applyZoomForPositionCalculation;\n\n    const pointOnBorder = findPointOnMonomerBorder(\n      currentMonomerCenter,\n      (this.bodyWidth + this.bodyHeight) / 2,\n      applyZoomForPositionCalculation,\n    );\n\n    const [labelPoint, pointOfAttachment] = findLabelPoint(\n      pointOnBorder,\n      this.initialAngle - 180,\n      AttachmentPoint.attachmentPointLength,\n      AttachmentPoint.labelOffset,\n      AttachmentPoint.labelSize,\n      this.isUsed,\n    );\n\n    return [pointOnBorder, pointOfAttachment, labelPoint];\n  }\n\n  public getElement() {\n    return this.element;\n  }\n\n  public getAttachmentPointName() {\n    return this.attachmentPointName;\n  }\n\n  public getHoverableArea() {\n    return this.hoverableArea;\n  }\n\n  public getAngle() {\n    if (this.initialAngle < 0 && this.isUsed) {\n      return this.initialAngle + 360;\n    }\n    return this.initialAngle;\n  }\n}\n","import { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { BaseMonomer } from './BaseMonomer';\nimport { BaseBond } from './BaseBond';\nimport { FlexOrSequenceOrSnakeModePolymerBondRenderer } from 'domain/entities/PolymerBond';\n\nexport class HydrogenBond extends BaseBond {\n  public secondMonomer?: BaseMonomer;\n  public renderer?: FlexOrSequenceOrSnakeModePolymerBondRenderer = undefined;\n\n  constructor(public firstMonomer: BaseMonomer, secondMonomer?: BaseMonomer) {\n    super();\n    this.firstMonomer = firstMonomer;\n    this.secondMonomer = secondMonomer;\n  }\n\n  public setFirstMonomer(monomer: BaseMonomer) {\n    this.firstMonomer = monomer;\n  }\n\n  public setSecondMonomer(monomer: BaseMonomer) {\n    this.secondMonomer = monomer;\n  }\n\n  public setRenderer(\n    renderer: FlexOrSequenceOrSnakeModePolymerBondRenderer,\n  ): void {\n    super.setBaseRenderer(renderer as BaseRenderer);\n    this.renderer = renderer;\n  }\n\n  public get isBackBoneChainConnection() {\n    return false;\n  }\n\n  public get firstMonomerAttachmentPoint() {\n    return this.firstMonomer.getAttachmentPointByBond(this);\n  }\n\n  public get secondMonomerAttachmentPoint() {\n    return this.secondMonomer?.getAttachmentPointByBond(this);\n  }\n\n  public get isSideChainConnection() {\n    return true;\n  }\n\n  get firstEndEntity(): BaseMonomer {\n    return this.firstMonomer;\n  }\n\n  get secondEndEntity(): BaseMonomer | undefined {\n    return this.secondMonomer;\n  }\n\n  public getAnotherMonomer(monomer: BaseMonomer): BaseMonomer | undefined {\n    return super.getAnotherEntity(monomer) as BaseMonomer;\n  }\n}\n","import { DrawingEntity, DrawingEntityConfig } from './DrawingEntity';\nimport { Vec2 } from 'domain/entities/vec2';\nimport {\n  AttachmentPointName,\n  AttachmentPointsToBonds,\n  MonomerItemType,\n} from 'domain/types';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { getAttachmentPointLabel } from 'domain/helpers/attachmentPointCalculations';\nimport assert from 'assert';\nimport {\n  IKetAttachmentPoint,\n  IKetAttachmentPointType,\n} from 'application/formatters/types/ket';\nimport { RnaSubChain } from 'domain/entities/monomer-chains/RnaSubChain';\nimport { ChemSubChain } from 'domain/entities/monomer-chains/ChemSubChain';\nimport { PeptideSubChain } from 'domain/entities/monomer-chains/PeptideSubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { PhosphateSubChain } from 'domain/entities/monomer-chains/PhosphateSubChain';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { compact, isNumber, values } from 'lodash';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\n\nexport type BaseMonomerConfig = DrawingEntityConfig;\nexport const HYDROGEN_BOND_ATTACHMENT_POINT = 'hydrogen';\n\nexport abstract class BaseMonomer extends DrawingEntity {\n  public renderer?: BaseMonomerRenderer | BaseSequenceItemRenderer = undefined;\n  public attachmentPointsToBonds: AttachmentPointsToBonds = {};\n\n  public chosenFirstAttachmentPointForBond: AttachmentPointName | null;\n  public potentialSecondAttachmentPointForBond: AttachmentPointName | null;\n  public chosenSecondAttachmentPointForBond: AttachmentPointName | null;\n\n  public potentialAttachmentPointsToBonds: AttachmentPointsToBonds = {};\n\n  public attachmentPointsVisible = false;\n  public monomerItem: MonomerItemType;\n  public isMonomerInRnaChainRow = false;\n  public hydrogenBonds: HydrogenBond[] = [];\n\n  constructor(\n    monomerItem: MonomerItemType,\n    _position?: Vec2,\n    config?: BaseMonomerConfig,\n  ) {\n    super(_position, config);\n\n    this.monomerItem = { ...monomerItem };\n    this.attachmentPointsToBonds = this.getAttachmentPointDict();\n    this.potentialAttachmentPointsToBonds = this.getAttachmentPointDict();\n    this.monomerItem.attachmentPoints =\n      this.monomerItem.attachmentPoints ||\n      this.getMonomerDefinitionAttachmentPoints();\n    this.chosenFirstAttachmentPointForBond = null;\n    this.potentialSecondAttachmentPointForBond = null;\n    this.chosenSecondAttachmentPointForBond = null;\n  }\n\n  public get label() {\n    return this.monomerItem.label;\n  }\n\n  public get center() {\n    return this.position;\n  }\n\n  public get listOfAttachmentPoints() {\n    const maxAttachmentPointNumber = this.getMaxAttachmentPointNumber();\n    const attachmentPointList: AttachmentPointName[] = [];\n    for (let i = 1; i <= maxAttachmentPointNumber; i++) {\n      const attachmentPointLabel = getAttachmentPointLabel(i);\n\n      if (this.attachmentPointsToBonds[attachmentPointLabel] !== undefined) {\n        attachmentPointList.push(attachmentPointLabel);\n      }\n    }\n    return attachmentPointList;\n  }\n\n  public turnOnAttachmentPointsVisibility() {\n    this.attachmentPointsVisible = true;\n  }\n\n  public turnOffAttachmentPointsVisibility() {\n    this.attachmentPointsVisible = false;\n  }\n\n  public setChosenFirstAttachmentPoint(\n    attachmentPoint: AttachmentPointName | null,\n  ) {\n    this.chosenFirstAttachmentPointForBond = attachmentPoint;\n  }\n\n  public setChosenSecondAttachmentPoint(\n    attachmentPoint: AttachmentPointName | null,\n  ) {\n    this.chosenSecondAttachmentPointForBond = attachmentPoint;\n  }\n\n  public setPotentialSecondAttachmentPoint(\n    attachmentPoint: AttachmentPointName | null,\n  ) {\n    this.potentialSecondAttachmentPointForBond = attachmentPoint;\n  }\n\n  public setPotentialBond(\n    attachmentPoint: string | undefined,\n    potentialBond?: PolymerBond | HydrogenBond | null,\n  ) {\n    if (potentialBond instanceof HydrogenBond) {\n      this.hydrogenBonds.push(potentialBond);\n\n      return;\n    }\n\n    if (attachmentPoint !== undefined) {\n      this.potentialAttachmentPointsToBonds[attachmentPoint] = potentialBond;\n    }\n  }\n\n  public getAttachmentPointByBond(\n    bond: PolymerBond | MonomerToAtomBond | HydrogenBond,\n  ): AttachmentPointName | undefined {\n    if (bond instanceof HydrogenBond) {\n      return this.hydrogenBonds.find((hydrogenBond) => hydrogenBond === bond)\n        ? AttachmentPointName.HYDROGEN\n        : undefined;\n    }\n\n    for (const attachmentPointName in this.attachmentPointsToBonds) {\n      if (this.attachmentPointsToBonds[attachmentPointName] === bond) {\n        return attachmentPointName as AttachmentPointName;\n      }\n    }\n\n    return undefined;\n  }\n\n  public abstract getValidSourcePoint(\n    monomer?: BaseMonomer,\n  ): AttachmentPointName | undefined;\n\n  public abstract getValidTargetPoint(monomer: BaseMonomer): string | undefined;\n\n  public getPotentialAttachmentPointByBond(bond: PolymerBond) {\n    for (const attachmentPointName in this.potentialAttachmentPointsToBonds) {\n      if (this.potentialAttachmentPointsToBonds[attachmentPointName] === bond) {\n        return attachmentPointName as AttachmentPointName;\n      }\n    }\n\n    return undefined;\n  }\n\n  public get firstFreeAttachmentPoint() {\n    const maxAttachmentPointNumber = this.getMaxAttachmentPointNumber();\n    for (let i = 1; i <= maxAttachmentPointNumber; i++) {\n      const attachmentPoint = `R${i}` as AttachmentPointName;\n      if (\n        this.hasAttachmentPoint(attachmentPoint) &&\n        this.attachmentPointsToBonds[attachmentPoint] === null\n      ) {\n        return attachmentPoint;\n      }\n    }\n\n    return undefined;\n  }\n\n  private getMaxAttachmentPointNumber() {\n    let maxAttachmentPointNumber = 1;\n    for (const attachmentPoint in this.attachmentPointsToBonds) {\n      const match = attachmentPoint.match(/R(\\d+)/);\n      if (match) {\n        const pointNumber = parseInt(match[1]);\n        if (!isNaN(pointNumber) && pointNumber > maxAttachmentPointNumber) {\n          maxAttachmentPointNumber = pointNumber;\n        }\n      }\n    }\n    return maxAttachmentPointNumber;\n  }\n\n  public get R1AttachmentPoint(): AttachmentPointName | undefined {\n    if (this.attachmentPointsToBonds.R1 === null) {\n      return AttachmentPointName.R1;\n    }\n\n    return undefined;\n  }\n\n  public get R2AttachmentPoint(): AttachmentPointName | undefined {\n    if (this.attachmentPointsToBonds.R2 === null) {\n      return AttachmentPointName.R2;\n    }\n\n    return undefined;\n  }\n\n  public get hasFreeAttachmentPoint() {\n    return Boolean(this.firstFreeAttachmentPoint);\n  }\n\n  public isAttachmentPointExistAndFree(attachmentPoint: AttachmentPointName) {\n    return (\n      this.hasAttachmentPoint(attachmentPoint) &&\n      !this.isAttachmentPointUsed(attachmentPoint)\n    );\n  }\n\n  public setRenderer(renderer: BaseMonomerRenderer) {\n    super.setBaseRenderer(renderer as BaseRenderer);\n    this.renderer = renderer;\n  }\n\n  public forEachBond(\n    callback: (\n      polymerBond: PolymerBond | MonomerToAtomBond | HydrogenBond,\n      attachmentPointName: AttachmentPointName,\n    ) => void,\n  ) {\n    for (const attachmentPointName in this.attachmentPointsToBonds) {\n      if (this.attachmentPointsToBonds[attachmentPointName]) {\n        callback(\n          this.attachmentPointsToBonds[attachmentPointName],\n          attachmentPointName as AttachmentPointName,\n        );\n      }\n    }\n\n    this.hydrogenBonds.forEach((hydrogenBond) => {\n      callback(hydrogenBond, AttachmentPointName.HYDROGEN);\n    });\n  }\n\n  public setBond(\n    attachmentPointName: AttachmentPointName,\n    bond: PolymerBond | MonomerToAtomBond | HydrogenBond,\n  ) {\n    if (!(bond instanceof HydrogenBond)) {\n      this.attachmentPointsToBonds[attachmentPointName] = bond;\n\n      return;\n    }\n\n    if (!this.hydrogenBonds.includes(bond)) {\n      this.hydrogenBonds.push(bond);\n    }\n  }\n\n  public unsetBond(\n    attachmentPointName?: AttachmentPointName,\n    bondToDelete?: HydrogenBond | PolymerBond,\n  ) {\n    if (bondToDelete instanceof HydrogenBond) {\n      this.hydrogenBonds = this.hydrogenBonds.filter(\n        (bond) => bond !== bondToDelete,\n      );\n\n      return;\n    }\n\n    if (attachmentPointName) {\n      this.attachmentPointsToBonds[attachmentPointName] = null;\n    }\n  }\n\n  public get covalentBonds() {\n    return compact(values(this.attachmentPointsToBonds));\n  }\n\n  public get hasBonds() {\n    let hasBonds = false;\n    for (const bondName in this.attachmentPointsToBonds) {\n      if (this.attachmentPointsToBonds[bondName]) {\n        hasBonds = true;\n      }\n    }\n\n    return hasBonds || this.hydrogenBonds.length > 0;\n  }\n\n  public hasHydrogenBondWithMonomer(monomer: BaseMonomer) {\n    return this.hydrogenBonds.find(\n      (bond) => bond.firstMonomer === monomer || bond.secondMonomer === monomer,\n    );\n  }\n\n  public hasPotentialBonds() {\n    return Object.values(this.potentialAttachmentPointsToBonds).some(\n      (bond) => !!bond,\n    );\n  }\n\n  public getPotentialBond(attachmentPointName: string) {\n    return this.potentialAttachmentPointsToBonds[attachmentPointName];\n  }\n\n  public removeBond(polymerBond: PolymerBond) {\n    const attachmentPointName = this.getAttachmentPointByBond(polymerBond);\n    if (!attachmentPointName) return;\n    this.unsetBond(attachmentPointName);\n  }\n\n  public removePotentialBonds(clearSelectedPoints = false) {\n    if (clearSelectedPoints) {\n      this.chosenFirstAttachmentPointForBond = null;\n      this.chosenSecondAttachmentPointForBond = null;\n      this.potentialSecondAttachmentPointForBond = null;\n    }\n\n    for (const attachmentPointName in this.potentialAttachmentPointsToBonds) {\n      this.potentialAttachmentPointsToBonds[attachmentPointName] = null;\n    }\n  }\n\n  public get availableAttachmentPointForBondEnd() {\n    if (this.chosenSecondAttachmentPointForBond) {\n      return this.chosenSecondAttachmentPointForBond;\n    }\n    return this.firstFreeAttachmentPoint;\n  }\n\n  public hasAttachmentPoint(attachmentPointName: AttachmentPointName) {\n    return this.attachmentPointsToBonds[attachmentPointName] !== undefined;\n  }\n\n  public get usedAttachmentPointsNamesList() {\n    const list: AttachmentPointName[] = [];\n\n    this.listOfAttachmentPoints.forEach((attachmentPointName) => {\n      if (this.isAttachmentPointUsed(attachmentPointName)) {\n        list.push(attachmentPointName);\n      }\n    });\n\n    return list;\n  }\n\n  public get unUsedAttachmentPointsNamesList() {\n    const list: AttachmentPointName[] = [];\n\n    this.listOfAttachmentPoints.forEach((attachmentPointName) => {\n      if (!this.isAttachmentPointUsed(attachmentPointName)) {\n        list.push(attachmentPointName);\n      }\n    });\n\n    return list;\n  }\n\n  public getBondByAttachmentPoint(attachmentPointName: AttachmentPointName) {\n    return this.attachmentPointsToBonds[attachmentPointName];\n  }\n\n  public getPotentialBondByAttachmentPoint(\n    attachmentPointName: AttachmentPointName,\n  ) {\n    return this.potentialAttachmentPointsToBonds[attachmentPointName];\n  }\n\n  public isAttachmentPointUsed(attachmentPointName: AttachmentPointName) {\n    return Boolean(this.getBondByAttachmentPoint(attachmentPointName));\n  }\n\n  public isAttachmentPointPotentiallyUsed(\n    attachmentPointName: AttachmentPointName,\n  ) {\n    return Boolean(this.getPotentialBondByAttachmentPoint(attachmentPointName));\n  }\n\n  private getAttachmentPointDict(): AttachmentPointsToBonds {\n    if (this.monomerItem.attachmentPoints) {\n      const { attachmentPointDictionary } =\n        BaseMonomer.getAttachmentPointDictFromMonomerDefinition(\n          this.monomerItem.attachmentPoints,\n        );\n      return attachmentPointDictionary;\n    } else {\n      return this.getAttachmentPointDictFromAtoms();\n    }\n  }\n\n  public static getAttachmentPointDictFromMonomerDefinition(\n    attachmentPoints: IKetAttachmentPoint[],\n  ): {\n    attachmentPointDictionary: AttachmentPointsToBonds;\n    attachmentPointsList: AttachmentPointName[];\n  } {\n    const attachmentPointDictionary = {};\n    const attachmentPointsList: AttachmentPointName[] = [];\n    const attachmentPointTypeToNumber: {\n      [key in IKetAttachmentPointType]: (\n        attachmentPointNumber?: number,\n      ) => number;\n    } = {\n      left: () => 1,\n      right: () => 2,\n      side: (attachmentPointNumber) => {\n        assert(attachmentPointNumber);\n        return (\n          attachmentPointNumber +\n          Number(!('R1' in attachmentPointDictionary)) +\n          Number(!('R2' in attachmentPointDictionary))\n        );\n      },\n    };\n    attachmentPoints.forEach((attachmentPoint, attachmentPointIndex) => {\n      const attachmentPointNumber = attachmentPointIndex + 1;\n      let calculatedAttachmentPointNumber;\n      if (attachmentPoint.type) {\n        const getLabelByTypeAction =\n          attachmentPointTypeToNumber[attachmentPoint.type];\n        calculatedAttachmentPointNumber =\n          typeof getLabelByTypeAction === 'function'\n            ? attachmentPointTypeToNumber[attachmentPoint.type](\n                attachmentPointNumber,\n              )\n            : attachmentPointNumber;\n      } else {\n        calculatedAttachmentPointNumber = attachmentPointNumber;\n      }\n      const calculatedLabel =\n        attachmentPoint.label || `R${calculatedAttachmentPointNumber}`;\n      attachmentPointDictionary[calculatedLabel] = null;\n      attachmentPointsList.push(calculatedLabel as AttachmentPointName);\n    });\n    return { attachmentPointDictionary, attachmentPointsList };\n  }\n\n  public get attachmentPointNumberToType() {\n    return {\n      1: 'left',\n      2: 'right',\n      moreThanTwo: 'side',\n    };\n  }\n\n  private getMonomerDefinitionAttachmentPoints() {\n    const monomerDefinitionAttachmentPoints: IKetAttachmentPoint[] = [];\n    this.superatomAttachmentPoints.forEach((superatomAttachmentPoint) => {\n      if (!isNumber(superatomAttachmentPoint.attachmentPointNumber)) {\n        return;\n      }\n\n      const bondsToLeavingGroupAtom = this.monomerItem.struct.bonds.filter(\n        (_, bond) => {\n          return (\n            bond.begin === superatomAttachmentPoint.leaveAtomId ||\n            bond.end === superatomAttachmentPoint.leaveAtomId\n          );\n        },\n      );\n\n      if (bondsToLeavingGroupAtom.size > 1) {\n        return;\n      }\n\n      monomerDefinitionAttachmentPoints.push({\n        attachmentAtom: superatomAttachmentPoint.atomId,\n        leavingGroup: {\n          atoms:\n            superatomAttachmentPoint.leaveAtomId === 0 ||\n            superatomAttachmentPoint.leaveAtomId\n              ? [superatomAttachmentPoint.leaveAtomId]\n              : [],\n        },\n        type:\n          this.attachmentPointNumberToType[\n            superatomAttachmentPoint.attachmentPointNumber\n          ] || this.attachmentPointNumberToType.moreThanTwo,\n      });\n    });\n    return monomerDefinitionAttachmentPoints;\n  }\n\n  get superatomAttachmentPoints() {\n    const struct = this.monomerItem.struct;\n    const superatomWithoutLabel = struct.sgroups\n      .filter((_, sgroup) => sgroup.isSuperatomWithoutLabel)\n      ?.get(0);\n\n    if (!superatomWithoutLabel) {\n      return [];\n    }\n\n    return superatomWithoutLabel.getAttachmentPoints();\n  }\n\n  public getAttachmentPointDictFromAtoms(): AttachmentPointsToBonds {\n    const attachmentPointNameToBond = {};\n\n    this.superatomAttachmentPoints.forEach((superatomAttachmentPoint) => {\n      if (!isNumber(superatomAttachmentPoint.attachmentPointNumber)) {\n        return;\n      }\n\n      const label = getAttachmentPointLabel(\n        superatomAttachmentPoint.attachmentPointNumber,\n      );\n      const leavingGroupAtomId = superatomAttachmentPoint.leaveAtomId;\n      const bondsToLeavingGroupAtom = this.monomerItem.struct.bonds.filter(\n        (_, bond) => {\n          return (\n            bond.begin === leavingGroupAtomId || bond.end === leavingGroupAtomId\n          );\n        },\n      );\n\n      if (bondsToLeavingGroupAtom.size > 1) {\n        return;\n      }\n\n      attachmentPointNameToBond[label] = null;\n    });\n\n    return attachmentPointNameToBond;\n  }\n\n  public get startBondAttachmentPoint() {\n    if (this.chosenFirstAttachmentPointForBond) {\n      return this.chosenFirstAttachmentPointForBond;\n    }\n    if (this.attachmentPointsToBonds.R2 === null) {\n      return 'R2';\n    }\n\n    if (this.attachmentPointsToBonds.R1 === null) {\n      return 'R1';\n    }\n\n    return this.firstFreeAttachmentPoint;\n  }\n\n  abstract get SubChainConstructor():\n    | typeof RnaSubChain\n    | typeof ChemSubChain\n    | typeof PhosphateSubChain\n    | typeof PeptideSubChain;\n\n  public isMonomerTypeDifferentForChaining(\n    monomerToChain: SubChainNode | BaseMonomer,\n  ) {\n    return this.SubChainConstructor !== monomerToChain.SubChainConstructor;\n  }\n\n  public get isModification() {\n    return this.monomerItem.props.MonomerNaturalAnalogCode !== this.label;\n  }\n\n  public get sideConnections() {\n    const sideConnections: PolymerBond[] = [];\n    this.forEachBond((bond) => {\n      if (!(bond instanceof MonomerToAtomBond) && bond.isSideChainConnection) {\n        sideConnections.push(bond);\n      }\n    });\n    return sideConnections;\n  }\n\n  public get monomerCaps() {\n    return this.monomerItem.props.MonomerCaps;\n  }\n}\n","import { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { PolymerBond } from '../PolymerBond';\n\nexport class BaseSubChain {\n  public nodes: Array<SubChainNode> = [];\n  public bonds: Array<PolymerBond> = [];\n\n  constructor() {}\n\n  public get lastNode() {\n    return this.nodes[this.nodes.length - 1];\n  }\n\n  public get firstNode() {\n    return this.nodes[0];\n  }\n\n  public add(node: SubChainNode) {\n    this.nodes.push(node);\n  }\n\n  public get length() {\n    return this.nodes.length;\n  }\n}\n","import { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\n\nexport class ChemSubChain extends BaseSubChain {}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ChemicalMimeType } from 'domain/services';\n\nexport class SupportedFormatProperties {\n  name: string;\n  mime: ChemicalMimeType;\n  extensions: string[];\n  supportsCoords?: boolean;\n  options?: any;\n\n  constructor(\n    name: string,\n    mime: ChemicalMimeType,\n    extensions: string[],\n    supportsCoords?: boolean,\n    options?: any,\n  ) {\n    this.name = name;\n    this.mime = mime;\n    this.extensions = extensions;\n    this.supportsCoords = supportsCoords || false;\n    this.options = options || {};\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ChemicalMimeType } from 'domain/services';\nimport { SupportedFormat } from './structFormatter.types';\nimport { SupportedFormatProperties } from './supportedFormatProperties';\n\ntype FormatPropertiesMap = {\n  [key in SupportedFormat]: SupportedFormatProperties;\n};\n\nconst formatProperties: FormatPropertiesMap = {\n  molAuto: new SupportedFormatProperties(\n    // TODO: is it a valid name?\n    'MDL Molfile Auto Format detect',\n    ChemicalMimeType.Mol,\n    ['.mol'],\n    true,\n    { 'molfile-saving-mode': 'auto' },\n  ),\n  mol: new SupportedFormatProperties(\n    'MDL Molfile V2000',\n    ChemicalMimeType.Mol,\n    ['.mol'],\n    true,\n  ),\n  molV3000: new SupportedFormatProperties(\n    'MDL Molfile V3000',\n    ChemicalMimeType.Mol,\n    ['.mol'],\n    true,\n    { 'molfile-saving-mode': '3000' },\n  ),\n  rxn: new SupportedFormatProperties(\n    'MDL Rxnfile V2000',\n    ChemicalMimeType.Rxn,\n    ['.rxn'],\n    true,\n  ),\n  rxnV3000: new SupportedFormatProperties(\n    'MDL Rxnfile V3000',\n    ChemicalMimeType.Rxn,\n    ['.rxn'],\n    true,\n    { 'molfile-saving-mode': '3000' },\n  ),\n  smiles: new SupportedFormatProperties(\n    'Daylight SMILES',\n    ChemicalMimeType.DaylightSmiles,\n    ['.smi', '.smiles'],\n    true,\n  ),\n  smilesExt: new SupportedFormatProperties(\n    'Extended SMILES',\n    ChemicalMimeType.ExtendedSmiles,\n    ['.cxsmi', '.cxsmiles'],\n  ),\n  smarts: new SupportedFormatProperties(\n    'Daylight SMARTS',\n    ChemicalMimeType.DaylightSmarts,\n    ['.smarts'],\n  ),\n  inChI: new SupportedFormatProperties('InChI', ChemicalMimeType.InChI, [\n    '.inchi',\n  ]),\n  inChIAuxInfo: new SupportedFormatProperties(\n    'InChI AuxInfo',\n    ChemicalMimeType.InChIAuxInfo,\n    ['.inchi'],\n  ),\n  inChIKey: new SupportedFormatProperties(\n    'InChIKey',\n    ChemicalMimeType.InChIKey,\n    ['.inchikey'],\n  ),\n  cml: new SupportedFormatProperties(\n    'CML',\n    ChemicalMimeType.CML,\n    ['.cml', '.mrv'],\n    true,\n  ),\n  ket: new SupportedFormatProperties('Ket Format', ChemicalMimeType.KET, [\n    '.ket',\n  ]),\n  cdxml: new SupportedFormatProperties(\n    'CDXML',\n    ChemicalMimeType.CDXML,\n    ['.cdxml'],\n    true,\n  ),\n  cdx: new SupportedFormatProperties(\n    'Base64 CDX',\n    ChemicalMimeType.CDX,\n    ['.b64cdx'],\n    true,\n  ),\n  binaryCdx: new SupportedFormatProperties(\n    'CDX',\n    ChemicalMimeType.CDX,\n    ['.cdx'],\n    true,\n  ),\n  sdf: new SupportedFormatProperties(\n    'SDF V2000',\n    ChemicalMimeType.SDF,\n    ['.sdf'],\n    true,\n  ),\n  sdfV3000: new SupportedFormatProperties(\n    'SDF V3000',\n    ChemicalMimeType.SDF,\n    ['.sdf'],\n    true,\n    { 'molfile-saving-mode': '3000' },\n  ),\n  fasta: new SupportedFormatProperties(\n    'FASTA',\n    ChemicalMimeType.FASTA,\n    ['.fasta'],\n    true,\n  ),\n  idt: new SupportedFormatProperties(\n    'IDT',\n    ChemicalMimeType.IDT,\n    ['.idt'],\n    false,\n  ),\n  helm: new SupportedFormatProperties(\n    'HELM',\n    ChemicalMimeType.HELM,\n    ['.helm'],\n    true,\n  ),\n  sequence: new SupportedFormatProperties(\n    'SEQUENCE',\n    ChemicalMimeType.SEQUENCE,\n    ['.seq'],\n    false,\n    {},\n  ),\n  unknown: new SupportedFormatProperties(\n    'Unknown',\n    ChemicalMimeType.UNKNOWN,\n    ['.'],\n    true,\n  ),\n  rdf: new SupportedFormatProperties(\n    'RDF V2000',\n    ChemicalMimeType.RDF,\n    ['.rdf'],\n    true,\n  ),\n  rdfV3000: new SupportedFormatProperties(\n    'RDF V3000',\n    ChemicalMimeType.RDF,\n    ['.rdf'],\n    true,\n    { 'molfile-saving-mode': '3000' },\n  ),\n};\n\nconst imgFormatProperties = {\n  svg: { extension: '.svg', name: 'SVG Document' },\n  png: { extension: '.png', name: 'PNG Image' },\n};\n\nfunction getPropertiesByImgFormat(format) {\n  return imgFormatProperties[format];\n}\n\nfunction getPropertiesByFormat(format: SupportedFormat) {\n  return formatProperties[format];\n}\n\nfunction getFormatMimeTypeByFileName(fileName: string) {\n  const fileExtension = '.' + fileName.split('.').pop();\n  const format = Object.values(formatProperties).find((properties) => {\n    return properties.extensions.includes(fileExtension);\n  });\n  return format?.mime;\n}\n\nexport {\n  formatProperties,\n  getPropertiesByFormat,\n  getPropertiesByImgFormat,\n  getFormatMimeTypeByFileName,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MolSerializerOptions } from 'domain/serializers';\nimport { Struct } from 'domain/entities';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { StructServiceOptions } from 'domain/services';\nimport { EditorSelection } from 'application/editor';\n\nexport interface StructFormatter {\n  getStructureFromStructAsync: (\n    struct: Struct,\n    drawingEntitiesManager?: DrawingEntitiesManager,\n    selection?: EditorSelection,\n  ) => Promise<string>;\n  getStructureFromStringAsync: (stringifiedStruct: string) => Promise<Struct>;\n  parseMacromoleculeString?: (stringifiedStruct: string) => void;\n}\n\nexport enum SupportedFormat {\n  mol = 'mol',\n  molV3000 = 'molV3000',\n  molAuto = 'molAuto',\n  rxn = 'rxn',\n  rxnV3000 = 'rxnV3000',\n  smiles = 'smiles',\n  smilesExt = 'smilesExt',\n  smarts = 'smarts',\n  inChI = 'inChI',\n  inChIAuxInfo = 'inChIAuxInfo',\n  inChIKey = 'inChIKey',\n  cml = 'cml',\n  ket = 'ket',\n  cdxml = 'cdxml',\n  cdx = 'cdx',\n  binaryCdx = 'binaryCdx',\n  sdf = 'sdf',\n  sdfV3000 = 'sdfV3000',\n  fasta = 'fasta',\n  sequence = 'sequence',\n  idt = 'idt',\n  helm = 'helm',\n  unknown = 'unknown',\n  rdf = 'rdf',\n  rdfV3000 = 'rdfV3000',\n}\n\nexport type FormatterFactoryOptions = Partial<\n  MolSerializerOptions & StructServiceOptions\n>;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetSerializer } from 'domain/serializers';\nimport { Struct } from 'domain/entities';\nimport { StructFormatter } from './structFormatter.types';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { EditorSelection } from 'application/editor';\n\nexport class KetFormatter implements StructFormatter {\n  #ketSerializer: KetSerializer;\n\n  constructor(serializer: KetSerializer) {\n    this.#ketSerializer = serializer;\n  }\n\n  async getStructureFromStructAsync(\n    struct: Struct,\n    drawingEntitiesManager?: DrawingEntitiesManager,\n    selection?: EditorSelection,\n  ): Promise<string> {\n    const ket = this.#ketSerializer.serialize(\n      struct,\n      drawingEntitiesManager,\n      selection,\n    );\n    return ket;\n  }\n\n  async getStructureFromStringAsync(content: string): Promise<Struct> {\n    return this.#ketSerializer.deserialize(content);\n  }\n\n  parseMacromoleculeString(content: string): void {\n    this.#ketSerializer.deserializeMicromolecules(content);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetSerializer, SmiSerializer } from 'domain/serializers';\nimport { StructFormatter, SupportedFormat } from './structFormatter.types';\nimport { StructService, StructServiceOptions } from 'domain/services';\n\nimport { ServerFormatter } from './serverFormatter';\nimport { Struct } from 'domain/entities';\n\nexport class SmilesFormatter implements StructFormatter {\n  #smiSerializer: SmiSerializer;\n  #structService: StructService;\n  #ketSerializer: KetSerializer;\n  #format: SupportedFormat;\n  #options?: StructServiceOptions;\n\n  constructor(\n    smiSerializer: SmiSerializer,\n    structService: StructService,\n    ketSerializer: KetSerializer,\n    format: SupportedFormat,\n    options?: StructServiceOptions,\n  ) {\n    this.#smiSerializer = smiSerializer;\n    this.#ketSerializer = ketSerializer;\n    this.#structService = structService;\n    this.#format = format;\n    this.#options = options;\n  }\n\n  async getStructureFromStructAsync(struct: Struct): Promise<string> {\n    const stringifiedMolfile = this.#smiSerializer.serialize(struct);\n    return stringifiedMolfile;\n  }\n\n  getStructureFromStringAsync(stringifiedStruct: string): Promise<Struct> {\n    const serverFormatter = new ServerFormatter(\n      this.#structService,\n      this.#ketSerializer,\n      this.#format,\n      this.#options,\n    );\n\n    return serverFormatter.getStructureFromStringAsync(stringifiedStruct);\n  }\n\n  static isContainsCoordinates(smiles: string) {\n    return /\\([\\d.,;-]+\\)/.test(smiles);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ConvertData,\n  ConvertResult,\n  LayoutData,\n  LayoutResult,\n  StructService,\n  StructServiceOptions,\n} from 'domain/services';\nimport { StructFormatter, SupportedFormat } from './structFormatter.types';\n\nimport { KetSerializer } from 'domain/serializers';\nimport { Struct } from 'domain/entities';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { getPropertiesByFormat } from './formatProperties';\nimport { KetcherLogger } from 'utilities';\nimport { SmilesFormatter } from './smilesFormatter';\n\ntype ConvertPromise = (\n  data: ConvertData,\n  options?: StructServiceOptions,\n) => Promise<ConvertResult>;\n\ntype LayoutPromise = (\n  data: LayoutData,\n  options?: StructServiceOptions,\n) => Promise<LayoutResult>;\n\nexport class ServerFormatter implements StructFormatter {\n  #structService: StructService;\n  #ketSerializer: KetSerializer;\n  #format: SupportedFormat;\n  #options?: StructServiceOptions;\n\n  constructor(\n    structService: StructService,\n    ketSerializer: KetSerializer,\n    format: SupportedFormat,\n    options?: StructServiceOptions,\n  ) {\n    this.#structService = structService;\n    this.#ketSerializer = ketSerializer;\n    this.#format = format;\n    this.#options = options;\n  }\n\n  async getStructureFromStructAsync(\n    struct: Struct,\n    drawingEntitiesManager?: DrawingEntitiesManager,\n  ): Promise<string> {\n    const formatProperties = getPropertiesByFormat(this.#format);\n\n    try {\n      const stringifiedStruct = this.#ketSerializer.serialize(\n        struct,\n        drawingEntitiesManager,\n      );\n      const convertResult = await this.#structService.convert(\n        {\n          struct: stringifiedStruct,\n          output_format: formatProperties.mime,\n        },\n        { ...this.#options, ...formatProperties.options },\n      );\n\n      return convertResult.struct;\n    } catch (e: any) {\n      let message;\n      if (e.message === 'Server is not compatible') {\n        message = `${formatProperties.name} is not supported.`;\n      } else {\n        message = `Convert error!\\n${e.message || e}`;\n      }\n      KetcherLogger.error('serverFormatter.ts::getStructureFromStructAsync', e);\n      throw new Error(message);\n    }\n  }\n\n  getCallingMethod(\n    stringifiedStruct: string,\n    format: SupportedFormat,\n  ): {\n    method: LayoutPromise | ConvertPromise;\n    struct: string;\n  } {\n    if (this.#format === SupportedFormat.smiles) {\n      return {\n        method: SmilesFormatter.isContainsCoordinates(stringifiedStruct)\n          ? this.#structService.convert\n          : this.#structService.layout,\n        struct: stringifiedStruct,\n      };\n    }\n    const withCoords = getPropertiesByFormat(format).supportsCoords;\n    if (withCoords) {\n      return {\n        method: this.#structService.convert,\n        struct: stringifiedStruct,\n      };\n    }\n    return {\n      method: this.#structService.layout,\n      struct: stringifiedStruct.trim(),\n    };\n  }\n\n  async getStructureFromStringAsync(\n    stringifiedStruct: string,\n  ): Promise<Struct> {\n    const data: ConvertData | LayoutData = {\n      struct: undefined as any,\n      output_format: getPropertiesByFormat(SupportedFormat.ket).mime,\n    };\n\n    const { method, struct } = this.getCallingMethod(\n      stringifiedStruct,\n      this.#format,\n    );\n    data.struct = struct;\n\n    try {\n      const result = await method(data, this.#options);\n      const parsedStruct = this.#ketSerializer.deserialize(result.struct);\n      if (method === this.#structService.layout) {\n        parsedStruct.rescale();\n      }\n      return parsedStruct;\n    } catch (e: any) {\n      if (e.message !== 'Server is not compatible') {\n        KetcherLogger.error(\n          'serverFormatter.ts::getStructureFromStringAsync',\n          e,\n        );\n        throw Error(`Convert error!\\n${e.message || e}`);\n      }\n\n      const formatError =\n        this.#format === 'smiles'\n          ? `${\n              getPropertiesByFormat(SupportedFormat.smilesExt).name\n            } and opening of ${\n              getPropertiesByFormat(SupportedFormat.smiles).name\n            }`\n          : getPropertiesByFormat(this.#format).name;\n\n      throw Error(`${formatError} is not supported in standalone mode.`);\n    }\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MolSerializer } from 'domain/serializers';\nimport { Struct } from 'domain/entities';\nimport { StructFormatter } from './structFormatter.types';\n\nexport class MolfileV2000Formatter implements StructFormatter {\n  #molSerializer: MolSerializer;\n\n  constructor(molSerializer: MolSerializer) {\n    this.#molSerializer = molSerializer;\n  }\n\n  async getStructureFromStructAsync(struct: Struct): Promise<string> {\n    const stringifiedMolfile = this.#molSerializer.serialize(struct);\n    return stringifiedMolfile;\n  }\n\n  async getStructureFromStringAsync(\n    stringifiedStruct: string,\n  ): Promise<Struct> {\n    const struct = this.#molSerializer.deserialize(stringifiedStruct);\n    return struct;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FormatterFactoryOptions,\n  StructFormatter,\n  SupportedFormat,\n} from './structFormatter.types';\nimport {\n  KetSerializer,\n  MolSerializer,\n  MolSerializerOptions,\n} from 'domain/serializers';\nimport { StructService, StructServiceOptions } from 'domain/services';\nimport { KetFormatter } from './ketFormatter';\nimport { ServerFormatter } from './serverFormatter';\nimport { MolfileV2000Formatter } from './molfileV2000Formatter';\n\nexport class FormatterFactory {\n  #structService: StructService;\n\n  constructor(structService: StructService) {\n    this.#structService = structService;\n  }\n\n  private separateOptions(\n    options?: FormatterFactoryOptions,\n  ): [Partial<MolSerializerOptions>, Partial<StructServiceOptions>] {\n    if (!options) {\n      return [{}, {}];\n    }\n\n    const {\n      reactionRelayout,\n      badHeaderRecover,\n      ignoreChiralFlag,\n      ...structServiceOptions\n    } = options;\n\n    const molfileParseOptions: Partial<MolSerializerOptions> = {};\n\n    if (typeof reactionRelayout === 'boolean') {\n      molfileParseOptions.reactionRelayout = reactionRelayout;\n    }\n    if (typeof badHeaderRecover === 'boolean') {\n      molfileParseOptions.badHeaderRecover = badHeaderRecover;\n    }\n\n    if (typeof ignoreChiralFlag === 'boolean') {\n      molfileParseOptions.ignoreChiralFlag = ignoreChiralFlag;\n      structServiceOptions['ignore-no-chiral-flag'] = ignoreChiralFlag;\n    }\n\n    return [molfileParseOptions, structServiceOptions];\n  }\n\n  create(\n    format: SupportedFormat,\n    options?: FormatterFactoryOptions,\n    queryPropertiesAreUsed?: boolean,\n  ): StructFormatter {\n    const [molSerializerOptions, structServiceOptions] =\n      this.separateOptions(options);\n\n    let formatter: StructFormatter;\n    switch (format) {\n      case SupportedFormat.ket:\n        formatter = new KetFormatter(new KetSerializer());\n        break;\n\n      case SupportedFormat.mol:\n        if (queryPropertiesAreUsed) {\n          formatter = new ServerFormatter(\n            this.#structService,\n            new KetSerializer(),\n            format,\n            structServiceOptions,\n          );\n        } else {\n          formatter = new MolfileV2000Formatter(\n            new MolSerializer(molSerializerOptions),\n          );\n        }\n        break;\n\n      case SupportedFormat.cml:\n      case SupportedFormat.inChIAuxInfo:\n      case SupportedFormat.inChI:\n      case SupportedFormat.inChIKey:\n      case SupportedFormat.molV3000:\n      case SupportedFormat.smiles:\n      case SupportedFormat.rxnV3000:\n      case SupportedFormat.smilesExt:\n      case SupportedFormat.smarts:\n      case SupportedFormat.cdxml:\n      case SupportedFormat.cdx:\n      case SupportedFormat.binaryCdx:\n      case SupportedFormat.unknown:\n      case SupportedFormat.rxn:\n      default:\n        formatter = new ServerFormatter(\n          this.#structService,\n          new KetSerializer(),\n          format,\n          structServiceOptions,\n        );\n    }\n\n    return formatter;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetcherLogger } from 'utilities';\nimport { SupportedFormat } from './structFormatter.types';\n\nexport function identifyStructFormat(\n  stringifiedStruct: string,\n  isMacromolecules = false,\n): SupportedFormat {\n  // Mimic Indigo/molecule_auto_loader.cpp as much as possible\n  const sanitizedString = stringifiedStruct.trim();\n\n  try {\n    if (JSON.parse(sanitizedString)) {\n      return SupportedFormat.ket;\n    }\n  } catch (e) {\n    KetcherLogger.error('identifyStructFormat.ts::identifyStructFromat', e);\n  } // eslint-disable-line\n\n  const isRXN = sanitizedString.includes('$RXN');\n  const isSDF = sanitizedString.includes('\\n$$$$');\n  const isV2000 = sanitizedString.includes('V2000');\n  const isV3000 = sanitizedString.includes('V3000');\n\n  if (isRXN) {\n    return SupportedFormat.rxn;\n  }\n\n  if (isSDF) {\n    if (isV2000) {\n      return SupportedFormat.sdf;\n    } else {\n      return SupportedFormat.sdfV3000;\n    }\n  }\n\n  if (isV2000) {\n    return SupportedFormat.mol;\n  }\n\n  if (isV3000) {\n    return SupportedFormat.molV3000;\n  }\n\n  const match = sanitizedString.match(/^(M {2}END|\\$END MOL)$/m);\n\n  if (match) {\n    const end = (match.index || 0) + match[0].length;\n    if (\n      end === sanitizedString.length ||\n      sanitizedString.slice(end, end + 20).search(/^\\$(MOL|END CTAB)$/m) !== -1\n    ) {\n      return SupportedFormat.mol;\n    }\n  }\n\n  if (\n    sanitizedString[0] === '<' &&\n    sanitizedString.indexOf('<molecule') !== -1\n  ) {\n    return SupportedFormat.cml;\n  }\n\n  const clearStr = sanitizedString\n    .replace(/\\s/g, '')\n    .replace(/(\\\\r)|(\\\\n)/g, '');\n  const isBase64String =\n    /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n  const cdxHeader = 'VjCD0100';\n  if (\n    clearStr.length % 4 === 0 &&\n    isBase64String.test(clearStr) &&\n    window.atob(clearStr).startsWith(cdxHeader)\n  ) {\n    return SupportedFormat.cdx;\n  }\n\n  if (sanitizedString.slice(0, 5) === 'InChI') {\n    return SupportedFormat.inChI;\n  }\n\n  if (sanitizedString.indexOf('\\n') === -1 && !isMacromolecules) {\n    // TODO: smiles regexp\n    return SupportedFormat.smiles;\n  }\n\n  if (sanitizedString.indexOf('<CDXML') !== -1) {\n    return SupportedFormat.cdxml;\n  }\n\n  if (sanitizedString[0] === '>') {\n    return SupportedFormat.fasta;\n  }\n\n  const isSequence = /^[a-zA-Z\\s\\n]*$/.test(sanitizedString);\n  const isThreeLetter = /^(?:(?:[A-Z][a-z]{2})\\s?)+$/.test(sanitizedString);\n  const isIdt = /([a-zA-Z0-9]+)\\/*([a-zA-Z0-9*-]+)/.test(sanitizedString);\n\n  if (!isThreeLetter && isIdt) {\n    return SupportedFormat.idt;\n  } else if (isSequence) {\n    return SupportedFormat.sequence;\n  }\n\n  return SupportedFormat.unknown;\n}\n","export const macromoleculesFilesInputFormats = {\n  ket: 'chemical/x-indigo-ket',\n  mol: 'chemical/x-mdl-molfile',\n  seq: {\n    rna: 'chemical/x-rna-sequence',\n    dna: 'chemical/x-dna-sequence',\n    peptide: 'chemical/x-peptide-sequence',\n    peptide3Letter: 'chemical/x-peptide-sequence-3-letter',\n  },\n  fasta: {\n    rna: 'chemical/x-rna-fasta',\n    dna: 'chemical/x-dna-fasta',\n    peptide: 'chemical/x-peptide-fasta',\n  },\n  idt: 'chemical/x-idt',\n  helm: 'chemical/x-helm',\n};\n","import { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\n\nexport class PhosphateSubChain extends BaseSubChain {}\n","import { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\n\nexport class RnaSubChain extends BaseSubChain {}\n","import { BaseMonomer } from './BaseMonomer';\nimport { AttachmentPointName, MonomerItemType } from 'domain/types';\nimport { Vec2 } from './vec2';\nimport { Sugar } from './Sugar';\nimport { PhosphateSubChain } from 'domain/entities/monomer-chains/PhosphateSubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { RnaSubChain } from 'domain/entities/monomer-chains/RnaSubChain';\n\nexport class Phosphate extends BaseMonomer {\n  constructor(monomerItem: MonomerItemType, _position?: Vec2) {\n    super(monomerItem, _position);\n  }\n\n  public getValidSourcePoint(secondMonomer: BaseMonomer) {\n    if (!secondMonomer) {\n      return this.firstFreeAttachmentPoint;\n    }\n\n    return this.getValidPoint(\n      secondMonomer,\n      secondMonomer.potentialSecondAttachmentPointForBond,\n    );\n  }\n\n  public getValidTargetPoint(firstMonomer: BaseMonomer) {\n    if (!firstMonomer) {\n      return this.firstFreeAttachmentPoint;\n    }\n\n    // same implementation for both source and target attachment points\n    return this.getValidPoint(\n      firstMonomer,\n      firstMonomer.chosenFirstAttachmentPointForBond,\n    );\n  }\n\n  private getValidPoint(\n    otherMonomer: BaseMonomer,\n    potentialPointOnOther: string | null,\n  ) {\n    // If we chose specific start AP on this monomer, return it\n    if (this.chosenFirstAttachmentPointForBond) {\n      return this.chosenFirstAttachmentPointForBond;\n    }\n\n    // If we want to choose specific end AP on this monomer, return it\n    if (this.potentialSecondAttachmentPointForBond) {\n      return this.potentialSecondAttachmentPointForBond;\n    }\n\n    // If this is the only available AP on this monomer, return it\n    if (this.unUsedAttachmentPointsNamesList.length === 1) {\n      return this.unUsedAttachmentPointsNamesList[0];\n    }\n\n    // If other monomer is not a Sugar, we want to open modal\n    if (!(otherMonomer instanceof Sugar)) {\n      return;\n    }\n    // If we chose a specific AP on other monomer, we want to determine the correct AP on this one\n    if (potentialPointOnOther) {\n      if (\n        potentialPointOnOther === AttachmentPointName.R2 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R1)\n      ) {\n        return AttachmentPointName.R1;\n      } else if (\n        potentialPointOnOther !== AttachmentPointName.R2 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n      ) {\n        return AttachmentPointName.R2;\n      } else {\n        return;\n      }\n    }\n\n    if (\n      otherMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R2) &&\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R1)\n    ) {\n      return AttachmentPointName.R1;\n    }\n\n    if (\n      !otherMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R2) &&\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n    ) {\n      return AttachmentPointName.R2;\n    }\n\n    return undefined;\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return ![PhosphateSubChain, RnaSubChain].includes(\n      monomerToChain.SubChainConstructor,\n    );\n  }\n\n  public get SubChainConstructor() {\n    return PhosphateSubChain;\n  }\n}\n","import { BaseMonomer } from './BaseMonomer';\nimport { RNABase } from './RNABase';\nimport { Phosphate } from './Phosphate';\nimport { AttachmentPointName } from 'domain/types';\nimport { RnaSubChain } from 'domain/entities/monomer-chains/RnaSubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { PhosphateSubChain } from 'domain/entities/monomer-chains/PhosphateSubChain';\nimport { isRnaBaseOrAmbiguousRnaBase } from 'domain/helpers/monomers';\nimport { IVariantMonomer } from 'domain/entities/types';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\n\nexport class Sugar extends BaseMonomer {\n  public getValidSourcePoint(secondMonomer?: BaseMonomer & IVariantMonomer) {\n    if (!secondMonomer) {\n      return this.firstFreeAttachmentPoint;\n    }\n\n    return this.getValidPoint(\n      secondMonomer,\n      secondMonomer.potentialSecondAttachmentPointForBond,\n    );\n  }\n\n  public getValidTargetPoint(firstMonomer: BaseMonomer & IVariantMonomer) {\n    if (!firstMonomer) {\n      return this.firstFreeAttachmentPoint;\n    }\n\n    // same implementation for both source and target attachment points\n    return this.getValidPoint(\n      firstMonomer,\n      firstMonomer.chosenFirstAttachmentPointForBond,\n    );\n  }\n\n  private getValidPoint(\n    otherMonomer: BaseMonomer & IVariantMonomer,\n    potentialPointOnOther: string | null,\n  ) {\n    // If we chose specific start AP on this monomer, return it\n    if (this.chosenFirstAttachmentPointForBond) {\n      return this.chosenFirstAttachmentPointForBond;\n    }\n    // If we want to choose specific end AP on this monomer, return it\n    if (this.potentialSecondAttachmentPointForBond) {\n      return this.potentialSecondAttachmentPointForBond;\n    }\n    // If this is the only available AP on this monomer, return it\n    if (this.unUsedAttachmentPointsNamesList.length === 1) {\n      return this.unUsedAttachmentPointsNamesList[0];\n    }\n\n    // If other monomer is neither a Phosphate nor RNABase, open modal\n    if (\n      !(otherMonomer instanceof Phosphate) &&\n      !isRnaBaseOrAmbiguousRnaBase(otherMonomer)\n    ) {\n      return;\n    }\n\n    // If other monomer is RNABase, attach it to R3 or open modal\n    if (isRnaBaseOrAmbiguousRnaBase(otherMonomer)) {\n      if (this.isAttachmentPointExistAndFree(AttachmentPointName.R3)) {\n        return AttachmentPointName.R3;\n      } else return;\n    }\n\n    // If we chose a specific AP on some Phosphate, we want to determine the correct AP on this Sugar\n    if (potentialPointOnOther) {\n      if (\n        potentialPointOnOther === AttachmentPointName.R1 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n      ) {\n        return AttachmentPointName.R2;\n      } else if (\n        potentialPointOnOther !== AttachmentPointName.R1 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R1)\n      ) {\n        return AttachmentPointName.R1;\n      } else {\n        return;\n      }\n    }\n\n    if (\n      otherMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R1) &&\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n    ) {\n      return AttachmentPointName.R2;\n    }\n\n    if (\n      otherMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R2) &&\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R1)\n    ) {\n      return AttachmentPointName.R1;\n    }\n\n    if (\n      !otherMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R1) &&\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R1)\n    ) {\n      return AttachmentPointName.R1;\n    }\n\n    return undefined;\n  }\n\n  public get SubChainConstructor() {\n    return RnaSubChain;\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return ![PhosphateSubChain, RnaSubChain].includes(\n      monomerToChain.SubChainConstructor,\n    );\n  }\n\n  public get isPartOfRNA(): boolean {\n    const r3PolymerBond = this.attachmentPointsToBonds.R3;\n\n    return (\n      r3PolymerBond instanceof PolymerBond &&\n      r3PolymerBond?.getAnotherMonomer(this) instanceof RNABase\n    );\n  }\n}\n","import { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { FlexModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/FlexModePolymerBondRenderer';\nimport { SnakeModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/SnakeModePolymerBondRenderer';\nimport { BackBoneBondSequenceRenderer } from 'application/render/renderers/sequence/BackBoneBondSequenceRenderer';\nimport { PolymerBondSequenceRenderer } from 'application/render/renderers/sequence/PolymerBondSequenceRenderer';\nimport { Sugar } from 'domain/entities/Sugar';\nimport {\n  isMonomerConnectedToR2RnaBase,\n  isRnaBaseOrAmbiguousRnaBase,\n} from 'domain/helpers/monomers';\nimport { AttachmentPointName } from 'domain/types';\nimport { BaseMonomer } from './BaseMonomer';\nimport { BaseBond } from 'domain/entities/BaseBond';\n\nexport type FlexOrSequenceOrSnakeModePolymerBondRenderer =\n  | BackBoneBondSequenceRenderer\n  | FlexModePolymerBondRenderer\n  | PolymerBondSequenceRenderer\n  | SnakeModePolymerBondRenderer;\n\nexport class PolymerBond extends BaseBond {\n  public secondMonomer?: BaseMonomer;\n  public renderer?: FlexOrSequenceOrSnakeModePolymerBondRenderer = undefined;\n  public restOfRowsWithAntisense?: number = undefined;\n\n  constructor(public firstMonomer: BaseMonomer, secondMonomer?: BaseMonomer) {\n    super();\n    this.firstMonomer = firstMonomer;\n    this.secondMonomer = secondMonomer;\n  }\n\n  public setFirstMonomer(monomer: BaseMonomer) {\n    this.firstMonomer = monomer;\n  }\n\n  public setSecondMonomer(monomer: BaseMonomer) {\n    this.secondMonomer = monomer;\n  }\n\n  public setRenderer(\n    renderer: FlexOrSequenceOrSnakeModePolymerBondRenderer,\n  ): void {\n    super.setBaseRenderer(renderer as BaseRenderer);\n    this.renderer = renderer;\n  }\n\n  public static get backBoneChainAttachmentPoints() {\n    return [AttachmentPointName.R1, AttachmentPointName.R2];\n  }\n\n  public get isBackBoneChainConnection() {\n    return !this.isSideChainConnection;\n  }\n\n  public get firstMonomerAttachmentPoint() {\n    return this.firstMonomer.getAttachmentPointByBond(this);\n  }\n\n  public get secondMonomerAttachmentPoint() {\n    return this.secondMonomer?.getAttachmentPointByBond(this);\n  }\n\n  public get isSideChainConnection() {\n    const firstMonomerAttachmentPoint = this.firstMonomerAttachmentPoint;\n    const secondMonomerAttachmentPoint = this.secondMonomerAttachmentPoint;\n\n    if (!firstMonomerAttachmentPoint || !secondMonomerAttachmentPoint) {\n      return false;\n    }\n\n    return (\n      (!(\n        PolymerBond.backBoneChainAttachmentPoints.includes(\n          firstMonomerAttachmentPoint,\n        ) &&\n        PolymerBond.backBoneChainAttachmentPoints.includes(\n          secondMonomerAttachmentPoint,\n        )\n      ) ||\n        (isMonomerConnectedToR2RnaBase(this.firstMonomer) &&\n          isRnaBaseOrAmbiguousRnaBase(this.secondMonomer)) ||\n        (isMonomerConnectedToR2RnaBase(this.secondMonomer) &&\n          isRnaBaseOrAmbiguousRnaBase(this.firstMonomer)) ||\n        firstMonomerAttachmentPoint === secondMonomerAttachmentPoint) &&\n      !(\n        (firstMonomerAttachmentPoint === AttachmentPointName.R1 &&\n          isRnaBaseOrAmbiguousRnaBase(this.firstMonomer) &&\n          secondMonomerAttachmentPoint === AttachmentPointName.R3 &&\n          this.secondMonomer instanceof Sugar) ||\n        (firstMonomerAttachmentPoint === AttachmentPointName.R3 &&\n          this.firstMonomer instanceof Sugar &&\n          secondMonomerAttachmentPoint === AttachmentPointName.R1 &&\n          isRnaBaseOrAmbiguousRnaBase(this.secondMonomer))\n      )\n    );\n  }\n\n  get firstEndEntity(): BaseMonomer {\n    return this.firstMonomer;\n  }\n\n  get secondEndEntity(): BaseMonomer | undefined {\n    return this.secondMonomer;\n  }\n\n  public getAnotherMonomer(monomer: BaseMonomer): BaseMonomer | undefined {\n    return super.getAnotherEntity(monomer) as BaseMonomer;\n  }\n}\n","import {\n  AmbiguousMonomer,\n  BaseMonomer,\n  Peptide,\n  Phosphate,\n  RNABase,\n  Sugar,\n  UnsplitNucleotide,\n} from 'domain/entities';\nimport {\n  AttachmentPointName,\n  MonomerItemType,\n  MonomerOrAmbiguousType,\n  AmbiguousMonomerType,\n} from 'domain/types';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { IVariantMonomer } from 'domain/entities/types';\nimport { KetMonomerClass } from 'application/formatters';\nimport { MONOMER_CLASS_TO_CONSTRUCTOR } from 'domain/constants/monomers';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\n\nexport function getMonomerUniqueKey(monomer: MonomerItemType) {\n  return `${monomer.props.MonomerName}___${monomer.props.Name}`;\n}\n\nexport function checkIsR2R1Connection(\n  monomer: BaseMonomer,\n  nextMonomer: BaseMonomer,\n) {\n  const r1PolymerBond = nextMonomer.attachmentPointsToBonds.R1;\n\n  return (\n    r1PolymerBond instanceof PolymerBond &&\n    r1PolymerBond?.getAnotherMonomer(nextMonomer) === monomer\n  );\n}\n\nexport function isR2R1ConnectionFromRnaBase(polymerBond: PolymerBond) {\n  const firstMonomerAttachmentPoint =\n    polymerBond.firstMonomer.getAttachmentPointByBond(polymerBond);\n  const secondMonomerAttachmentPoint =\n    polymerBond.secondMonomer?.getAttachmentPointByBond(polymerBond);\n\n  return (\n    (isRnaBaseOrAmbiguousRnaBase(polymerBond.firstMonomer) &&\n      firstMonomerAttachmentPoint === AttachmentPointName.R2 &&\n      secondMonomerAttachmentPoint === AttachmentPointName.R1) ||\n    (isRnaBaseOrAmbiguousRnaBase(polymerBond.secondMonomer) &&\n      secondMonomerAttachmentPoint === AttachmentPointName.R2 &&\n      firstMonomerAttachmentPoint === AttachmentPointName.R1)\n  );\n}\n\nexport function isMonomerConnectedToR2RnaBase(monomer?: BaseMonomer) {\n  if (!monomer) {\n    return false;\n  }\n\n  const R1PolymerBond = monomer.attachmentPointsToBonds.R1;\n\n  if (R1PolymerBond instanceof MonomerToAtomBond) {\n    return false;\n  }\n\n  const R1ConnectedMonomer = R1PolymerBond?.getAnotherMonomer(monomer);\n  const r2PolymerBond = R1ConnectedMonomer?.attachmentPointsToBonds.R2;\n\n  return (\n    isRnaBaseOrAmbiguousRnaBase(R1ConnectedMonomer) &&\n    getSugarFromRnaBase(R1ConnectedMonomer) &&\n    r2PolymerBond instanceof PolymerBond &&\n    r2PolymerBond?.getAnotherMonomer(R1ConnectedMonomer) === monomer\n  );\n}\n\nexport function getPreviousMonomerInChain(monomer: BaseMonomer) {\n  const r1PolymerBond = monomer.attachmentPointsToBonds.R1;\n  const previousMonomer =\n    r1PolymerBond instanceof PolymerBond\n      ? r1PolymerBond?.getAnotherMonomer(monomer)\n      : undefined;\n\n  if (!previousMonomer || !(r1PolymerBond instanceof PolymerBond)) {\n    return undefined;\n  }\n\n  return previousMonomer &&\n    previousMonomer.getAttachmentPointByBond(r1PolymerBond) ===\n      AttachmentPointName.R2\n    ? previousMonomer\n    : undefined;\n}\n\nexport function getNextMonomerInChain(\n  monomer?: BaseMonomer,\n  firstMonomer?: BaseMonomer | null,\n) {\n  if (!monomer) return undefined;\n\n  const r2PolymerBond = monomer.attachmentPointsToBonds.R2;\n  const nextMonomer =\n    r2PolymerBond instanceof PolymerBond\n      ? r2PolymerBond?.getAnotherMonomer?.(monomer)\n      : undefined;\n\n  if (\n    !nextMonomer ||\n    (nextMonomer === firstMonomer && r2PolymerBond) ||\n    isMonomerConnectedToR2RnaBase(nextMonomer)\n  )\n    return undefined;\n\n  return r2PolymerBond &&\n    nextMonomer?.getAttachmentPointByBond(r2PolymerBond) ===\n      AttachmentPointName.R1\n    ? nextMonomer\n    : undefined;\n}\n\nexport function getRnaBaseFromSugar(monomer?: BaseMonomer) {\n  if (!monomer || !(monomer instanceof Sugar)) return undefined;\n  const r3PolymerBond = monomer.attachmentPointsToBonds.R3;\n  const r3ConnectedMonomer =\n    r3PolymerBond instanceof PolymerBond\n      ? r3PolymerBond?.getAnotherMonomer(monomer)\n      : undefined;\n\n  if (!r3ConnectedMonomer) {\n    return undefined;\n  }\n\n  const r1PolymerBondOfConnectedMonomer =\n    r3ConnectedMonomer?.attachmentPointsToBonds.R1;\n  const r1ConnectedMonomer =\n    r1PolymerBondOfConnectedMonomer instanceof PolymerBond\n      ? r1PolymerBondOfConnectedMonomer?.getAnotherMonomer(r3ConnectedMonomer)\n      : undefined;\n\n  return isRnaBaseOrAmbiguousRnaBase(r3ConnectedMonomer) &&\n    r1ConnectedMonomer === monomer\n    ? r3ConnectedMonomer\n    : undefined;\n}\n\nexport function getSugarFromRnaBase(monomer?: BaseMonomer) {\n  if (!monomer || !isRnaBaseOrAmbiguousRnaBase(monomer)) return undefined;\n  const r1PolymerBond = monomer.attachmentPointsToBonds.R1;\n  const r1ConnectedMonomer =\n    r1PolymerBond instanceof PolymerBond\n      ? r1PolymerBond?.getAnotherMonomer(monomer)\n      : undefined;\n\n  if (!r1ConnectedMonomer) {\n    return undefined;\n  }\n\n  const r3PolymerBondOfConnectedMonomer =\n    r1ConnectedMonomer?.attachmentPointsToBonds.R3;\n  const r3ConnectedMonomer =\n    r3PolymerBondOfConnectedMonomer instanceof PolymerBond\n      ? r3PolymerBondOfConnectedMonomer?.getAnotherMonomer(r1ConnectedMonomer)\n      : undefined;\n\n  return r1ConnectedMonomer instanceof Sugar && r3ConnectedMonomer === monomer\n    ? r1ConnectedMonomer\n    : undefined;\n}\n\nexport function getPhosphateFromSugar(monomer?: BaseMonomer) {\n  if (!monomer) return undefined;\n  const nextMonomerInChain = getNextMonomerInChain(monomer);\n\n  return nextMonomerInChain instanceof Phosphate\n    ? nextMonomerInChain\n    : undefined;\n}\n\nexport function isMonomerBeginningOfChain(\n  monomer: BaseMonomer,\n  MonomerTypes: Array<\n    typeof Peptide | typeof Phosphate | typeof Sugar | typeof UnsplitNucleotide\n  >,\n) {\n  const r1PolymerBond = monomer.attachmentPointsToBonds.R1;\n\n  if (r1PolymerBond instanceof MonomerToAtomBond) {\n    return true;\n  }\n\n  const previousMonomer = r1PolymerBond?.getAnotherMonomer(monomer);\n  const isPreviousMonomerPartOfChain =\n    previousMonomer &&\n    !MonomerTypes.some(\n      (MonomerType) =>\n        previousMonomer instanceof MonomerType ||\n        (previousMonomer instanceof AmbiguousMonomer &&\n          MONOMER_CLASS_TO_CONSTRUCTOR[previousMonomer.monomerClass] ===\n            MonomerType),\n    );\n  const previousConnectionNotR2 =\n    r1PolymerBond &&\n    previousMonomer?.getAttachmentPointByBond(r1PolymerBond) !== 'R2';\n\n  // For single monomers we check that monomer has bonds, but for UnsplitNucleotide we don't\n  // to be consistent with rna triplets (we show enumeration for single triplet)\n  return (\n    ((monomer.isAttachmentPointExistAndFree(AttachmentPointName.R1) ||\n      !monomer.hasAttachmentPoint(AttachmentPointName.R1)) &&\n      (monomer.hasBonds || monomer instanceof UnsplitNucleotide)) ||\n    previousConnectionNotR2 ||\n    isPreviousMonomerPartOfChain\n  );\n}\n\nexport function isValidNucleotide(\n  sugar: Sugar,\n  firstMonomerInCyclicChain?: BaseMonomer,\n): boolean {\n  if (!getRnaBaseFromSugar(sugar)) {\n    return false;\n  }\n\n  const phosphate = getPhosphateFromSugar(sugar);\n  if (!phosphate || phosphate === firstMonomerInCyclicChain) {\n    return false;\n  }\n\n  const nextMonomerAfterPhosphate = getNextMonomerInChain(phosphate);\n  return !!nextMonomerAfterPhosphate;\n}\n\nexport function isValidNucleoside(\n  sugar: Sugar,\n  firstMonomerInCyclicChain?: BaseMonomer,\n): boolean {\n  if (!getRnaBaseFromSugar(sugar)) {\n    return false;\n  }\n\n  const phosphate = getPhosphateFromSugar(sugar);\n  if (!phosphate || phosphate === firstMonomerInCyclicChain) {\n    return true;\n  }\n\n  const nextMonomerAfterPhosphate = getNextMonomerInChain(phosphate);\n  return !nextMonomerAfterPhosphate;\n}\n\nexport const isRnaBaseVariantMonomer = (\n  monomer: BaseMonomer & IVariantMonomer,\n) => monomer.monomerClass === KetMonomerClass.Base;\n\nexport function isAmbiguousMonomerLibraryItem(\n  monomer?: MonomerOrAmbiguousType,\n): monomer is AmbiguousMonomerType {\n  return Boolean(monomer && monomer.isAmbiguous);\n}\n\nexport function isPeptideOrAmbiguousPeptide(\n  monomer?: BaseMonomer,\n): monomer is Peptide | AmbiguousMonomer {\n  return (\n    monomer instanceof Peptide ||\n    (monomer instanceof AmbiguousMonomer &&\n      monomer.monomerClass === KetMonomerClass.AminoAcid)\n  );\n}\n\nexport function isRnaBaseOrAmbiguousRnaBase(\n  monomer?: BaseMonomer,\n): monomer is RNABase | AmbiguousMonomer {\n  return (\n    monomer instanceof RNABase ||\n    (monomer instanceof AmbiguousMonomer &&\n      monomer.monomerClass === KetMonomerClass.Base)\n  );\n}\n","import { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { ChemSubChain } from 'domain/entities/monomer-chains/ChemSubChain';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { AttachmentPointName } from 'domain/types';\nimport { getSugarFromRnaBase } from 'domain/helpers/monomers';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\n\nexport class RNABase extends BaseMonomer {\n  public getValidSourcePoint() {\n    if (this.chosenFirstAttachmentPointForBond) {\n      return this.chosenFirstAttachmentPointForBond;\n    }\n    return this.firstFreeAttachmentPoint;\n  }\n\n  public getValidTargetPoint() {\n    if (this.potentialSecondAttachmentPointForBond) {\n      return this.potentialSecondAttachmentPointForBond;\n    }\n    return this.firstFreeAttachmentPoint;\n  }\n\n  public get SubChainConstructor() {\n    return ChemSubChain;\n  }\n\n  public override get sideConnections() {\n    const sideConnections: PolymerBond[] = [];\n    this.forEachBond((polymerBond, attachmentPointName) => {\n      if (\n        !(polymerBond instanceof MonomerToAtomBond) &&\n        (attachmentPointName !== AttachmentPointName.R1 ||\n          !getSugarFromRnaBase(this))\n      ) {\n        sideConnections.push(polymerBond);\n      }\n    });\n\n    return sideConnections;\n  }\n}\n","import { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\n\nexport class PeptideSubChain extends BaseSubChain {}\n","import { BaseMonomer } from './BaseMonomer';\nimport { AttachmentPointName } from 'domain/types';\nimport { PeptideSubChain } from 'domain/entities/monomer-chains/PeptideSubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\n\nexport class Peptide extends BaseMonomer {\n  public getValidSourcePoint(secondMonomer?: BaseMonomer) {\n    if (this.chosenFirstAttachmentPointForBond) {\n      return this.chosenFirstAttachmentPointForBond;\n    }\n    if (this.unUsedAttachmentPointsNamesList.length === 1) {\n      return this.unUsedAttachmentPointsNamesList[0];\n    }\n    if (secondMonomer?.potentialSecondAttachmentPointForBond) {\n      if (\n        secondMonomer?.potentialSecondAttachmentPointForBond ===\n          AttachmentPointName.R1 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n      ) {\n        return AttachmentPointName.R2;\n      }\n      if (\n        secondMonomer?.potentialSecondAttachmentPointForBond ===\n          AttachmentPointName.R2 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R1)\n      ) {\n        return AttachmentPointName.R1;\n      }\n      return;\n    }\n    if (\n      (!secondMonomer ||\n        secondMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R1)) &&\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n    ) {\n      return AttachmentPointName.R2;\n    }\n    if (\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R1) &&\n      secondMonomer?.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n    ) {\n      return AttachmentPointName.R1;\n    }\n\n    return undefined;\n  }\n\n  public getValidTargetPoint(firstMonomer: BaseMonomer) {\n    if (this.potentialSecondAttachmentPointForBond) {\n      return this.potentialSecondAttachmentPointForBond;\n    }\n    if (this.unUsedAttachmentPointsNamesList.length === 1) {\n      return this.unUsedAttachmentPointsNamesList[0];\n    }\n    if (firstMonomer?.chosenFirstAttachmentPointForBond) {\n      if (\n        firstMonomer?.chosenFirstAttachmentPointForBond ===\n          AttachmentPointName.R1 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n      ) {\n        return AttachmentPointName.R2;\n      }\n      if (\n        firstMonomer?.chosenFirstAttachmentPointForBond ===\n          AttachmentPointName.R2 &&\n        this.isAttachmentPointExistAndFree(AttachmentPointName.R1)\n      ) {\n        return AttachmentPointName.R1;\n      }\n      return;\n    }\n    if (\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R1) &&\n      firstMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n    ) {\n      return AttachmentPointName.R1;\n    }\n    if (\n      firstMonomer.isAttachmentPointExistAndFree(AttachmentPointName.R1) &&\n      this.isAttachmentPointExistAndFree(AttachmentPointName.R2)\n    ) {\n      return AttachmentPointName.R2;\n    }\n\n    return undefined;\n  }\n\n  public get SubChainConstructor() {\n    return PeptideSubChain;\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return ![PeptideSubChain].includes(monomerToChain.SubChainConstructor);\n  }\n}\n","import { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { Peptide } from 'domain/entities/Peptide';\nimport { ChemSubChain } from 'domain/entities/monomer-chains/ChemSubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\n\nexport class Chem extends BaseMonomer {\n  public getValidSourcePoint(monomer?: BaseMonomer) {\n    return Peptide.prototype.getValidSourcePoint.call(this, monomer);\n  }\n\n  public getValidTargetPoint(monomer: BaseMonomer) {\n    return Peptide.prototype.getValidTargetPoint.call(this, monomer);\n  }\n\n  public get SubChainConstructor() {\n    return ChemSubChain;\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return ![ChemSubChain].includes(monomerToChain.SubChainConstructor);\n  }\n}\n","import { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { Peptide } from 'domain/entities/Peptide';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { RnaSubChain } from 'domain/entities/monomer-chains/RnaSubChain';\n\nexport class UnsplitNucleotide extends BaseMonomer {\n  public getValidSourcePoint(monomer?: BaseMonomer) {\n    return Peptide.prototype.getValidSourcePoint.call(this, monomer);\n  }\n\n  public getValidTargetPoint(monomer: BaseMonomer) {\n    return Peptide.prototype.getValidTargetPoint.call(this, monomer);\n  }\n\n  public get SubChainConstructor() {\n    return RnaSubChain;\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return ![RnaSubChain].includes(monomerToChain.SubChainConstructor);\n  }\n}\n","import { BaseMonomer } from './BaseMonomer';\nimport { ChemSubChain } from 'domain/entities/monomer-chains/ChemSubChain';\nimport { PeptideSubChain } from 'domain/entities/monomer-chains/PeptideSubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { Peptide } from 'domain/entities/Peptide';\n\nexport class UnresolvedMonomer extends BaseMonomer {\n  public getValidSourcePoint(secondMonomer?: BaseMonomer) {\n    if (!secondMonomer) {\n      return this.firstFreeAttachmentPoint;\n    }\n\n    return Peptide.prototype.getValidSourcePoint.call(this, secondMonomer);\n  }\n\n  public getValidTargetPoint(firstMonomer: BaseMonomer) {\n    if (!firstMonomer) {\n      return this.firstFreeAttachmentPoint;\n    }\n\n    return Peptide.prototype.getValidTargetPoint.call(this, firstMonomer);\n  }\n\n  public get SubChainConstructor() {\n    return ChemSubChain;\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return ![PeptideSubChain, ChemSubChain].includes(\n      monomerToChain.SubChainConstructor,\n    );\n  }\n}\n","import { KetMonomerClass } from 'application/formatters';\nimport {\n  Sugar,\n  UnsplitNucleotide,\n  RNABase,\n  Phosphate,\n  Peptide,\n  Chem,\n} from 'domain/entities/internal';\n\nexport enum RNA_DNA_NON_MODIFIED_PART {\n  SUGAR_RNA = 'R',\n  SUGAR_DNA = 'dR',\n  PHOSPHATE = 'P',\n}\n\nexport enum RnaDnaNaturalAnaloguesEnum {\n  ADENINE = 'A',\n  THYMINE = 'T',\n  GUANINE = 'G',\n  CYTOSINE = 'C',\n  URACIL = 'U',\n}\n\nexport enum StandardAmbiguousRnaBase {\n  N = 'N',\n  B = 'B',\n  V = 'V',\n  D = 'D',\n  H = 'H',\n  K = 'K',\n  M = 'M',\n  W = 'W',\n  Y = 'Y',\n  R = 'R',\n  S = 'S',\n}\n\nexport const rnaDnaNaturalAnalogues = [\n  RnaDnaNaturalAnaloguesEnum.ADENINE,\n  RnaDnaNaturalAnaloguesEnum.THYMINE,\n  RnaDnaNaturalAnaloguesEnum.GUANINE,\n  RnaDnaNaturalAnaloguesEnum.CYTOSINE,\n  RnaDnaNaturalAnaloguesEnum.URACIL,\n] as string[];\nexport const unknownNaturalAnalogues = ['.', 'X'];\nexport const peptideNaturalAnalogues = [\n  'A',\n  'C',\n  'D',\n  'E',\n  'F',\n  'G',\n  'H',\n  'I',\n  'K',\n  'L',\n  'M',\n  'N',\n  'O',\n  'P',\n  'Q',\n  'R',\n  'S',\n  'T',\n  'V',\n  'U',\n  'W',\n  'Y',\n];\n\nexport const NO_NATURAL_ANALOGUE = 'X';\n\nexport const MONOMER_CLASS_TO_CONSTRUCTOR = {\n  [KetMonomerClass.CHEM]: Chem,\n  [KetMonomerClass.AminoAcid]: Peptide,\n  [KetMonomerClass.Phosphate]: Phosphate,\n  [KetMonomerClass.Sugar]: Sugar,\n  [KetMonomerClass.Base]: RNABase,\n  [KetMonomerClass.RNA]: UnsplitNucleotide,\n};\n","import { BaseMonomer } from './BaseMonomer';\nimport { ChemSubChain } from 'domain/entities/monomer-chains/ChemSubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { Struct } from 'domain/entities/struct';\nimport { monomerFactory } from 'application/editor/operations/monomer/monomerFactory';\nimport {\n  KetAmbiguousMonomerTemplateSubType,\n  KetMonomerClass,\n} from 'application/formatters';\nimport { MONOMER_CLASS_TO_CONSTRUCTOR } from 'domain/constants/monomers';\nimport { IVariantMonomer } from 'domain/entities/types';\nimport { AmbiguousMonomerType, AttachmentPointName } from 'domain/types';\nimport { PeptideSubChain } from 'domain/entities/monomer-chains/PeptideSubChain';\nimport { RnaSubChain } from 'domain/entities/monomer-chains/RnaSubChain';\n\nexport const DEFAULT_VARIANT_MONOMER_LABEL = '%';\n\nexport class AmbiguousMonomer extends BaseMonomer implements IVariantMonomer {\n  public monomers: BaseMonomer[];\n  public monomerClass: KetMonomerClass;\n  constructor(\n    public variantMonomerItem: AmbiguousMonomerType,\n    position?: Vec2,\n    generateId = true,\n  ) {\n    const variantMonomerLabel =\n      variantMonomerItem.subtype ===\n        KetAmbiguousMonomerTemplateSubType.MIXTURE ||\n      variantMonomerItem.label?.length > 1\n        ? DEFAULT_VARIANT_MONOMER_LABEL\n        : variantMonomerItem.label;\n\n    super(\n      {\n        label: variantMonomerLabel,\n        props: {\n          MonomerNaturalAnalogCode: '',\n          MonomerName: variantMonomerLabel,\n          Name: variantMonomerLabel,\n        },\n        attachmentPoints: AmbiguousMonomer.getAttachmentPoints(\n          variantMonomerItem.monomers,\n        ),\n        struct: new Struct(),\n        isAmbiguous: true,\n      },\n      position,\n      { generateId },\n    );\n    this.monomers = variantMonomerItem.monomers;\n    this.monomerClass = AmbiguousMonomer.getMonomerClass(\n      variantMonomerItem.monomers,\n    );\n  }\n\n  public static getMonomerClass(monomers: BaseMonomer[]) {\n    const [, , monomerClass] = monomerFactory(monomers[0].monomerItem);\n\n    const containDifferentMonomerTypes = monomers.some((monomer) => {\n      const [, , MonomerClassToCompare] = monomerFactory(monomer.monomerItem);\n\n      return monomerClass !== MonomerClassToCompare;\n    });\n\n    if (containDifferentMonomerTypes) {\n      return KetMonomerClass.CHEM;\n    }\n\n    return monomerClass;\n  }\n\n  private static getAttachmentPoints(monomers: BaseMonomer[]) {\n    const monomersAttachmentPoints = monomers.map(\n      (monomer) => monomer.listOfAttachmentPoints,\n    );\n    const possibleAttachmentPoints = monomersAttachmentPoints.flat();\n    const attachmentPoints = possibleAttachmentPoints.filter(\n      (attachmentPointName) => {\n        return monomersAttachmentPoints.every((monomerAttachmentPoints) =>\n          monomerAttachmentPoints.includes(attachmentPointName),\n        );\n      },\n    );\n\n    return attachmentPoints.map((attachmentPointName) => {\n      return {\n        label: attachmentPointName,\n        leavingGroup: {\n          atoms: [],\n        },\n        attachmentAtom: -1,\n      };\n    });\n  }\n\n  public get monomerCaps() {\n    let monomerCaps: Partial<Record<AttachmentPointName, string>> | undefined;\n\n    this.monomers.forEach((monomer) => {\n      if (monomer.monomerItem.props.MonomerCaps) {\n        if (!monomerCaps) {\n          monomerCaps = { ...monomer.monomerItem.props.MonomerCaps };\n        } else {\n          for (const [attachmentPointName, label] of Object.entries(\n            monomer.monomerItem.props.MonomerCaps,\n          )) {\n            if (!monomerCaps[attachmentPointName]) {\n              delete monomerCaps[attachmentPointName];\n            } else if (monomerCaps[attachmentPointName] !== label) {\n              monomerCaps[attachmentPointName] = '';\n            }\n          }\n        }\n      }\n    });\n\n    return monomerCaps;\n  }\n\n  public getValidSourcePoint(_secondMonomer?: BaseMonomer) {\n    return MONOMER_CLASS_TO_CONSTRUCTOR[\n      this.monomerClass\n    ].prototype.getValidSourcePoint.call(this, _secondMonomer);\n  }\n\n  public getValidTargetPoint(_firstMonomer: BaseMonomer) {\n    return MONOMER_CLASS_TO_CONSTRUCTOR[\n      this.monomerClass\n    ].prototype.getValidTargetPoint.call(this, _firstMonomer);\n  }\n\n  public get SubChainConstructor() {\n    const monomerClassToSubchainConstructor = {\n      [KetMonomerClass.CHEM]: ChemSubChain,\n      [KetMonomerClass.AminoAcid]: PeptideSubChain,\n      [KetMonomerClass.RNA]: RnaSubChain,\n      [KetMonomerClass.DNA]: RnaSubChain,\n    };\n\n    return monomerClassToSubchainConstructor[this.monomerClass] || ChemSubChain;\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return MONOMER_CLASS_TO_CONSTRUCTOR[\n      this.monomerClass\n    ].prototype.isMonomerTypeDifferentForChaining.call(this, monomerToChain);\n  }\n}\n","import { editorEvents } from 'application/editor/editorEvents';\nimport { CoreEditor, SelectRectangle } from 'application/editor/internal';\nimport { Coordinates } from 'application/editor/shared/coordinates';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport assert from 'assert';\nimport { AttachmentPoint } from 'domain/AttachmentPoint';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { Vec2 } from 'domain/entities/vec2';\nimport {\n  anglesToSector,\n  attachmentPointNumberToAngle,\n  checkFor0and360,\n  sectorsList,\n} from 'domain/helpers/attachmentPointCalculations';\nimport {\n  AttachmentPointConstructorParams,\n  AttachmentPointName,\n} from 'domain/types';\nimport { BaseRenderer } from './BaseRenderer';\nimport { monomerFactory } from 'application/editor/operations/monomer/monomerFactory';\nimport { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\n\nconst labelPositions: { [key: string]: { x: number; y: number } | undefined } =\n  {};\nexport const MONOMER_CSS_CLASS = 'monomer';\nlet monomerSize: { width: number; height: number } = { width: 0, height: 0 };\n\nexport abstract class BaseMonomerRenderer extends BaseRenderer {\n  private editorEvents: typeof editorEvents;\n  private editor: CoreEditor;\n  private selectionCircle?: D3SvgElementSelection<SVGCircleElement, void>;\n  private selectionBorder?: D3SvgElementSelection<SVGUseElement, void>;\n  public declare bodyElement?: D3SvgElementSelection<SVGUseElement, this>;\n  private freeSectorsList: number[] = sectorsList;\n\n  private attachmentPoints: AttachmentPoint[] | [] = [];\n  private hoveredAttachmentPoint: AttachmentPointName | null = null;\n\n  private monomerSymbolElement?: SVGUseElement | SVGRectElement;\n  public monomerSize: { width: number; height: number };\n\n  private enumerationElement?: D3SvgElementSelection<SVGTextElement, void>;\n  public enumeration: number | null = null;\n\n  private terminalIndicatorElement?: D3SvgElementSelection<\n    SVGTextElement,\n    void\n  >;\n\n  public CHAIN_START_TERMINAL_INDICATOR_TEXT = '';\n  public CHAIN_END_TERMINAL_INDICATOR_TEXT = '';\n\n  static isSelectable() {\n    return true;\n  }\n\n  protected constructor(\n    public monomer: BaseMonomer,\n    private monomerSelectedElementId: string,\n    private monomerHoveredElementId: string,\n    monomerSymbolElementId: string,\n    private scale?: number,\n  ) {\n    super(monomer as DrawingEntity);\n    this.monomer.setRenderer(this);\n    this.editorEvents = editorEvents;\n    this.editor = CoreEditor?.provideEditorInstance();\n    this.monomerSymbolElement = document.querySelector(\n      `${monomerSymbolElementId} .monomer-body`,\n    ) as SVGUseElement | SVGRectElement;\n    // Cross-browser width and height detection via getAttribute()\n    // as getBoundingClientRect() and getBBox() return 0 values in Firefox\n    // in this case (<path> inside <symbol>, <defs>)\n    this.monomerSize = {\n      width: +(\n        this.monomerSymbolElement?.getAttribute('data-actual-width') || 0\n      ),\n      height: +(\n        this.monomerSymbolElement?.getAttribute('data-actual-height') || 0\n      ),\n    };\n    monomerSize = this.monomerSize;\n  }\n\n  // FIXME: `BaseMonomerRenderer` should not know about `isSnake`.\n  private isSnakeBondForAttachmentPoint(\n    attachmentPointName: AttachmentPointName,\n  ): boolean {\n    const renderer =\n      this.monomer.attachmentPointsToBonds[attachmentPointName]?.renderer;\n    if (!renderer) return false;\n    if ('isSnake' in renderer) {\n      return renderer.isSnake && !renderer.isMonomersOnSameHorizontalLine();\n    }\n    return false;\n  }\n\n  public static get monomerSize() {\n    return monomerSize;\n  }\n\n  public get center() {\n    return new Vec2(\n      this.scaledMonomerPosition.x + this.monomerSize.width / 2,\n      this.scaledMonomerPosition.y + this.monomerSize.height / 2,\n    );\n  }\n\n  public get textColor() {\n    const WHITE = 'white';\n    const colorsMap = {\n      D: WHITE,\n      F: WHITE,\n      K: WHITE,\n      Q: WHITE,\n      R: WHITE,\n      W: WHITE,\n      Y: WHITE,\n    };\n    return (\n      colorsMap[this.monomer.monomerItem.props.MonomerNaturalAnalogCode] ||\n      'black'\n    );\n  }\n\n  protected getMonomerColor(theme) {\n    return (\n      theme.monomer.color[\n        this.monomer.monomerItem.props.MonomerNaturalAnalogCode\n      ]?.regular || theme.monomer.color.X.regular\n    );\n  }\n\n  protected getPeptideColor(theme) {\n    const naturalAnalogCode =\n      this.monomer.monomerItem.props.MonomerNaturalAnalogCode;\n    const peptideColor = theme.peptide.color[naturalAnalogCode]?.regular;\n    return peptideColor || this.getMonomerColor(theme);\n  }\n\n  public redrawAttachmentPoints(): void {\n    this.hoveredAttachmentPoint = null;\n    if (!this.rootElement) return;\n    if (this.monomer.attachmentPointsVisible) {\n      this.removeAttachmentPoints();\n      this.drawAttachmentPoints();\n    } else {\n      this.removeAttachmentPoints();\n    }\n  }\n\n  public updateAttachmentPoints(): void {\n    this.hoveredAttachmentPoint = null;\n    if (!this.rootElement) return;\n    if (this.attachmentPoints.length > 0) {\n      this.attachmentPoints.forEach((point) => {\n        point.updateAttachmentPointStyleForHover();\n      });\n    } else {\n      this.drawAttachmentPoints();\n    }\n  }\n\n  public redrawAttachmentPointsCoordinates() {\n    const chosenAttachmentPointName =\n      this.monomer.chosenFirstAttachmentPointForBond;\n    const chosenAttachmentPoint = this.attachmentPoints.find(\n      (item) => item.getAttachmentPointName() === chosenAttachmentPointName,\n    );\n    const angle = chosenAttachmentPoint?.getAngle();\n    const allAngles = this.attachmentPoints.map((item) => {\n      return item.getAngle();\n    });\n    const isSectorOccupied = allAngles.some((item) => {\n      if (angle !== item && typeof angle === 'number') {\n        return Math.abs(angle - item) < 20 || Math.abs(angle - item) > 340;\n      }\n      return false;\n    });\n\n    if (isSectorOccupied) {\n      this.redrawAttachmentPoints();\n      return;\n    }\n\n    const attachmentPoint = this.attachmentPoints.find(\n      (item) => item.getAttachmentPointName() === chosenAttachmentPointName,\n    );\n\n    assert(attachmentPoint);\n    attachmentPoint.updateCoords();\n  }\n\n  public drawAttachmentPoints(\n    appendFn?: (\n      apName: AttachmentPointName,\n      customAngle?: number,\n    ) => AttachmentPoint,\n  ) {\n    if (this.attachmentPoints.length) {\n      return;\n    }\n\n    const appendFnToUse = appendFn || this.appendAttachmentPoint.bind(this);\n\n    // draw used attachment points\n    this.monomer.usedAttachmentPointsNamesList.forEach((item) => {\n      const attachmentPoint = appendFnToUse(item);\n      const angle: number = attachmentPoint.getAngle();\n\n      this.attachmentPoints.push(attachmentPoint as never);\n\n      // remove this sector from list of free sectors\n      const newList = this.freeSectorsList.filter((item) => {\n        return (\n          anglesToSector[item].min > angle || anglesToSector[item].max <= angle\n        );\n      });\n      this.freeSectorsList = checkFor0and360(newList);\n    });\n\n    const unrenderedAtPoints: AttachmentPointName[] = [];\n\n    // draw free attachment points\n    this.monomer.unUsedAttachmentPointsNamesList.forEach((item) => {\n      const properAngleForFreeAttachmentPoint =\n        attachmentPointNumberToAngle[item];\n\n      // if this angle is free for unused att point, draw it\n      if (this.freeSectorsList.includes(properAngleForFreeAttachmentPoint)) {\n        const attachmentPoint = appendFnToUse(\n          item,\n          properAngleForFreeAttachmentPoint,\n        );\n        this.attachmentPoints.push(attachmentPoint as never);\n\n        // remove this sector from list\n        const newList = this.freeSectorsList.filter((item) => {\n          return item !== properAngleForFreeAttachmentPoint;\n        });\n        this.freeSectorsList = checkFor0and360(newList);\n      } else {\n        // if this sector is already taken - add name to unrendered list\n        unrenderedAtPoints.push(item);\n      }\n    });\n\n    unrenderedAtPoints.forEach((item) => {\n      const customAngle = this.freeSectorsList.shift();\n      const attachmentPoint = appendFnToUse(item, customAngle);\n      this.attachmentPoints.push(attachmentPoint as never);\n    });\n  }\n\n  protected prepareAttachmentPointsParams(\n    attachmentPointName: AttachmentPointName,\n    customAngle?: number,\n  ): AttachmentPointConstructorParams {\n    let rotation;\n\n    if (!this.monomer.isAttachmentPointUsed(attachmentPointName)) {\n      rotation = attachmentPointNumberToAngle[attachmentPointName];\n    }\n\n    return {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      rootElement: this.rootElement!,\n      monomer: this.monomer,\n      bodyWidth: this.monomerSize.width,\n      bodyHeight: this.monomerSize.height,\n      canvas: this.canvasWrapper,\n      attachmentPointName,\n      isUsed: this.monomer.isAttachmentPointUsed(attachmentPointName),\n      isPotentiallyUsed:\n        this.monomer.isAttachmentPointPotentiallyUsed(attachmentPointName) ||\n        this.hoveredAttachmentPoint === attachmentPointName,\n      angle: customAngle ?? rotation,\n      applyZoomForPositionCalculation: true,\n      // FIXME: `BaseMonomerRenderer` should not know about `isSnake`.\n      isSnake: this.isSnakeBondForAttachmentPoint(attachmentPointName),\n    };\n  }\n\n  public appendAttachmentPoint(\n    attachmentPointName: AttachmentPointName,\n    customAngle?: number,\n  ) {\n    const attachmentPointParams = this.prepareAttachmentPointsParams(\n      attachmentPointName,\n      customAngle,\n    );\n\n    return new AttachmentPoint(attachmentPointParams);\n  }\n\n  public removeAttachmentPoints() {\n    this.attachmentPoints.forEach((item) => {\n      item.removeAttachmentPoint();\n    });\n    this.attachmentPoints = [];\n    this.freeSectorsList = sectorsList;\n  }\n\n  public hoverAttachmentPoint(attachmentPointName: AttachmentPointName): void {\n    this.hoveredAttachmentPoint = attachmentPointName;\n  }\n\n  protected appendRootElement(\n    canvas: D3SvgElementSelection<SVGSVGElement, void>,\n  ) {\n    return canvas\n      .append('g')\n      .data([this])\n      .attr('class', MONOMER_CSS_CLASS)\n      .attr('transition', 'transform 0.2s')\n      .attr(\n        'transform',\n        `translate(${this.scaledMonomerPosition.x}, ${\n          this.scaledMonomerPosition.y\n        }) scale(${this.scale || 1})`,\n      ) as never as D3SvgElementSelection<SVGGElement, void>;\n  }\n\n  protected appendLabel(rootElement: D3SvgElementSelection<SVGGElement, void>) {\n    const fontSize = 6;\n    const textElement = rootElement\n      .append('text')\n      .text(this.monomer.label)\n      .attr('fill', this.textColor)\n      .attr('font-size', `${fontSize}px`)\n      .attr('line-height', `${fontSize}px`)\n      .attr('font-weight', '700')\n      .style('cursor', 'pointer')\n      .style('user-select', 'none')\n      .attr('pointer-events', 'none');\n\n    // cache label position to reuse it form other monomers with same label\n    // need to improve performance for large amount of monomers\n    // getBBox triggers reflow\n    const [, , monomerClass] = monomerFactory(\n      this.monomer instanceof AmbiguousMonomer\n        ? this.monomer.variantMonomerItem\n        : this.monomer.monomerItem,\n    );\n    const monomerUniqueKey = this.monomer.label + monomerClass;\n\n    if (!labelPositions[monomerUniqueKey]) {\n      const textBBox = (textElement.node() as SVGTextElement).getBBox();\n      labelPositions[monomerUniqueKey] = {\n        x: this.width / 2 - textBBox.width / 2,\n        y: this.height / 2,\n      };\n    }\n    textElement\n      .attr('x', labelPositions[monomerUniqueKey]?.x || 0)\n      .attr('y', labelPositions[monomerUniqueKey]?.y || 0);\n\n    if (this.scale && this.scale !== 1) {\n      labelPositions[monomerUniqueKey] = undefined;\n    }\n  }\n\n  public appendHover(\n    hoverAreaElement: D3SvgElementSelection<SVGGElement, void>,\n  ) {\n    let cursor = 'default';\n\n    if (this.hoverElement) this.hoverElement.remove();\n    if (this.editor.selectedTool instanceof SelectRectangle) cursor = 'move';\n\n    return hoverAreaElement\n      .style('cursor', cursor)\n      .append('use')\n      .attr('href', this.monomerHoveredElementId)\n      .attr('pointer-events', 'none')\n      .attr('class', 'dynamic-element');\n  }\n\n  public removeHover() {\n    if (!this.hoverElement) return;\n    this.hoverElement.remove();\n  }\n\n  public static getScaledMonomerPosition(\n    positionInAngstoms: Vec2,\n    monomerSize: { width: number; height: number } = { width: 0, height: 0 },\n  ) {\n    // we need to convert monomer coordinates(stored in angstroms) to pixels.\n    // it needs to be done in view layer of application (like renderers)\n    const monomerPositionInPixels =\n      Coordinates.modelToCanvas(positionInAngstoms);\n\n    return new Vec2(\n      monomerPositionInPixels.x - monomerSize.width / 2,\n      monomerPositionInPixels.y - monomerSize.height / 2,\n    );\n  }\n\n  public get scaledMonomerPosition() {\n    return BaseMonomerRenderer.getScaledMonomerPosition(\n      this.monomer.position,\n      this.monomerSize,\n    );\n  }\n\n  public appendSelection() {\n    if (this.selectionCircle) {\n      this.selectionCircle.attr('cx', this.center.x).attr('cy', this.center.y);\n    } else {\n      this.selectionBorder = this.rootElement\n        ?.append('use')\n        .attr('href', this.monomerSelectedElementId)\n        .attr('stroke', '#57FF8F')\n        .attr('pointer-events', 'none')\n        .attr('class', 'dynamic-element');\n\n      this.selectionCircle = this.canvas\n        ?.insert('circle', ':first-child')\n        .attr('r', '21px')\n        .attr('opacity', '0.7')\n        .attr('cx', this.center.x)\n        .attr('cy', this.center.y)\n        .attr('fill', '#57FF8F')\n        .attr('class', 'dynamic-element');\n    }\n  }\n\n  public removeSelection() {\n    this.selectionCircle?.remove();\n    this.selectionBorder?.remove();\n    this.selectionCircle = undefined;\n    this.selectionBorder = undefined;\n  }\n\n  protected abstract appendBody(\n    rootElement: D3SvgElementSelection<SVGGElement, void>,\n    theme?,\n  );\n\n  protected appendHoverAreaElement() {\n    this.hoverAreaElement = this.rootElement;\n  }\n\n  private appendEvents() {\n    if (!this.bodyElement) {\n      return;\n    }\n\n    this.bodyElement\n      .on('mouseover', (event) => {\n        this.editorEvents.mouseOverDrawingEntity.dispatch(event);\n        this.editorEvents.mouseOverMonomer.dispatch(event);\n      })\n      .on('mousemove', (event) => {\n        this.editorEvents.mouseOnMoveMonomer.dispatch(event);\n      })\n      .on('mouseleave', (event) => {\n        this.editorEvents.mouseLeaveDrawingEntity.dispatch(event);\n        this.editorEvents.mouseLeaveMonomer.dispatch(event);\n      })\n      .on('mouseup', (event) => {\n        this.editorEvents.mouseUpMonomer.dispatch(event);\n      });\n  }\n\n  public abstract get enumerationElementPosition(): {\n    x: number;\n    y: number;\n  } | void;\n\n  public abstract get beginningElementPosition(): {\n    x: number;\n    y: number;\n  } | void;\n\n  public setEnumeration(enumeration: number | null) {\n    this.enumeration = enumeration;\n  }\n\n  protected appendEnumeration() {\n    assert(this.rootElement);\n    assert(this.enumerationElementPosition);\n    this.enumerationElement = this.rootElement\n      .append('text')\n      .attr('direction', 'rtl')\n      .attr('fill', '#7C7C7F')\n      .attr('font-size', '6px')\n      .attr('line-height', '7px')\n      .attr('font-weight', '500')\n      .attr('text-align', 'right')\n      .attr('style', 'user-select: none;')\n      .attr('x', this.enumerationElementPosition.x)\n      .attr('y', this.enumerationElementPosition.y)\n      .text(this.enumeration);\n  }\n\n  public redrawEnumeration(needToDrawTerminalIndicator: boolean) {\n    this.redrawChainTerminalIndicator(needToDrawTerminalIndicator);\n\n    if (!this.enumerationElement) return;\n\n    this.enumerationElement.text(this.enumeration);\n  }\n\n  public redrawChainTerminalIndicator(needToDraw: boolean) {\n    if (\n      !this.rootElement ||\n      !this.CHAIN_START_TERMINAL_INDICATOR_TEXT ||\n      !this.beginningElementPosition\n    ) {\n      return;\n    }\n\n    this.terminalIndicatorElement?.remove();\n\n    if (!needToDraw) {\n      return;\n    }\n\n    this.terminalIndicatorElement = this.rootElement\n      .append('text')\n      .attr('direction', 'rtl')\n      .attr('fill', '#0097A8')\n      .attr('font-size', '6px')\n      .attr('line-height', '7px')\n      .attr('font-weight', '700')\n      .attr('text-align', 'right')\n      .attr('style', 'user-select: none;')\n      .attr('x', this.beginningElementPosition.x)\n      .attr('y', this.beginningElementPosition.y)\n      .text(\n        this.monomer.monomerItem.isAntisense\n          ? this.CHAIN_END_TERMINAL_INDICATOR_TEXT\n          : this.CHAIN_START_TERMINAL_INDICATOR_TEXT,\n      );\n  }\n\n  protected abstract get modificationConfig();\n\n  protected drawModification() {\n    const config = this.modificationConfig;\n    const DARK_COLOR = '#333333';\n    const LIGHT_COLOR = 'white';\n\n    if (config && this.monomer.isModification) {\n      let fillColor: string | undefined;\n\n      if (config.requiresFill) {\n        const isTextColorDark = this.textColor === DARK_COLOR;\n        fillColor = isTextColorDark ? LIGHT_COLOR : DARK_COLOR;\n      }\n\n      const useElement = this.rootElement\n        ?.append('use')\n        .attr('xlink:href', config.backgroundId)\n        .attr('pointer-events', 'none')\n        .attr('class', 'modification-background');\n\n      if (fillColor) {\n        useElement?.attr('fill', fillColor);\n      }\n    }\n  }\n\n  public show(theme?) {\n    this.rootElement =\n      this.rootElement ||\n      this.appendRootElement(this.scale ? this.canvasWrapper : this.canvas);\n    this.bodyElement = this.appendBody(this.rootElement, theme);\n    this.appendEvents();\n    this.drawModification();\n\n    this.appendLabel(this.rootElement);\n    this.appendHoverAreaElement();\n    if (this.monomer.selected) {\n      this.drawSelection();\n    }\n    this.redrawAttachmentPoints();\n  }\n\n  public drawSelection() {\n    if (!this.rootElement) {\n      return;\n    }\n    if (this.monomer.selected) {\n      this.appendSelection();\n      this.raiseElement();\n    } else {\n      this.removeSelection();\n    }\n  }\n\n  private raiseElement() {\n    this.selectionCircle?.raise();\n    this.rootElement?.raise();\n  }\n\n  public moveSelection() {\n    assert(this.rootElement);\n    this.appendSelection();\n    this.move();\n  }\n\n  public move() {\n    this.rootElement?.attr(\n      'transform',\n      `translate(${this.scaledMonomerPosition.x}, ${\n        this.scaledMonomerPosition.y\n      }) scale(${this.scale || 1})`,\n    );\n  }\n\n  public remove() {\n    this.rootElement?.remove();\n    this.rootElement = undefined;\n    this.removeSelection();\n    if (this.monomer.hovered) {\n      this.editorEvents.mouseLeaveMonomer.dispatch();\n    }\n  }\n}\n","import { KetMonomerClass } from 'application/formatters';\n\nexport const MONOMER_SYMBOLS_IDS = {\n  [KetMonomerClass.AminoAcid]: {\n    hover: '#peptide-hover',\n    selected: '#peptide-selection',\n    body: '#peptide',\n  },\n  [KetMonomerClass.CHEM]: {\n    hover: '#chem-selection',\n    selected: '#chem-selection',\n    body: '#chem',\n  },\n  [KetMonomerClass.Sugar]: {\n    hover: '#sugar-selection',\n    selected: '#sugar-selection',\n    body: '#sugar',\n    variant: '#sugar-variant',\n  },\n  [KetMonomerClass.Base]: {\n    hover: '#rna-base-selection',\n    selected: '#rna-base-selection',\n    body: '#rna-base',\n    variant: '#rna-base-variant',\n  },\n  [KetMonomerClass.Phosphate]: {\n    hover: '#phosphate-selection',\n    selected: '#phosphate-selection',\n    body: '#phosphate',\n    variant: '#phosphate-variant',\n  },\n  [KetMonomerClass.RNA]: {\n    hover: '#nucleotide-hover',\n    selected: '#nucleotide-selection',\n    body: '#nucleotide',\n  },\n};\n","import { BaseMonomer } from 'domain/entities';\n\nexport function isMonomerSgroupWithAttachmentPoints(monomer: BaseMonomer) {\n  const sgroups = monomer.monomerItem.struct.sgroups;\n\n  return (\n    monomer.monomerItem.props.isMicromoleculeFragment &&\n    sgroups.some((sgroup) => sgroup.isSuperatomWithoutLabel)\n  );\n}\n","import { Selection } from 'd3';\nimport { Chem } from 'domain/entities/Chem';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { MONOMER_SYMBOLS_IDS } from 'application/render/renderers/constants';\nimport { KetMonomerClass } from 'application/formatters';\nimport { isMonomerSgroupWithAttachmentPoints } from '../../../utilities/monomers';\n\nconst CHEM_SELECTED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.CHEM].selected;\nconst CHEM_SYMBOL_ELEMENT_ID = MONOMER_SYMBOLS_IDS[KetMonomerClass.CHEM].body;\n\nexport class ChemRenderer extends BaseMonomerRenderer {\n  constructor(public monomer: Chem, scale?: number) {\n    super(\n      monomer,\n      CHEM_SELECTED_ELEMENT_ID,\n      CHEM_SELECTED_ELEMENT_ID,\n      CHEM_SYMBOL_ELEMENT_ID,\n      scale,\n    );\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n    theme,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr('href', CHEM_SYMBOL_ELEMENT_ID)\n      .attr('stroke', theme.monomer.color.CHEM.regular);\n  }\n\n  public get enumerationElementPosition() {\n    return undefined;\n  }\n\n  public get beginningElementPosition() {\n    return undefined;\n  }\n\n  public show(theme?) {\n    if (\n      this.monomer.monomerItem.props.isMicromoleculeFragment &&\n      !isMonomerSgroupWithAttachmentPoints(this.monomer)\n    ) {\n      return;\n    }\n\n    super.show(theme);\n  }\n\n  protected get modificationConfig() {\n    return undefined;\n  }\n}\n","import { Selection } from 'd3';\nimport { Peptide } from 'domain/entities/Peptide';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { MONOMER_SYMBOLS_IDS } from 'application/render/renderers/constants';\nimport { KetMonomerClass } from 'application/formatters';\n\nconst PEPTIDE_SELECTED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.AminoAcid].selected;\nconst PEPTIDE_HOVERED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.AminoAcid].hover;\nconst PEPTIDE_SYMBOL_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.AminoAcid].body;\n\nexport class PeptideRenderer extends BaseMonomerRenderer {\n  public CHAIN_START_TERMINAL_INDICATOR_TEXT = 'N';\n  public CHAIN_END_TERMINAL_INDICATOR_TEXT = 'C';\n\n  constructor(public monomer: Peptide, scale?: number) {\n    super(\n      monomer,\n      PEPTIDE_SELECTED_ELEMENT_ID,\n      PEPTIDE_HOVERED_ELEMENT_ID,\n      PEPTIDE_SYMBOL_ELEMENT_ID,\n      scale,\n    );\n  }\n\n  protected get modificationConfig() {\n    return { backgroundId: '#modified-background', requiresFill: true };\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n    theme,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr('href', PEPTIDE_SYMBOL_ELEMENT_ID)\n      .attr('fill', this.getPeptideColor(theme));\n  }\n\n  public get textColor() {\n    const LIGHT_COLOR = 'white';\n    const DARK_COLOR = '#333333';\n\n    const peptideColorsMap: { [key: string]: string } = {\n      D: DARK_COLOR,\n      E: LIGHT_COLOR,\n      K: DARK_COLOR,\n      H: LIGHT_COLOR,\n      O: LIGHT_COLOR,\n      R: LIGHT_COLOR,\n      Q: DARK_COLOR,\n      Y: LIGHT_COLOR,\n      U: DARK_COLOR,\n      S: LIGHT_COLOR,\n      C: LIGHT_COLOR,\n      N: LIGHT_COLOR,\n      T: LIGHT_COLOR,\n      L: DARK_COLOR,\n      I: LIGHT_COLOR,\n      F: LIGHT_COLOR,\n      A: LIGHT_COLOR,\n      W: DARK_COLOR,\n      P: DARK_COLOR,\n      G: DARK_COLOR,\n      M: DARK_COLOR,\n      V: DARK_COLOR,\n    };\n\n    const monomerCode = this.monomer.monomerItem.props.MonomerNaturalAnalogCode;\n    let baseColor = peptideColorsMap[monomerCode] ?? super.textColor;\n\n    if (this.monomer.isModification) {\n      baseColor = baseColor === LIGHT_COLOR ? DARK_COLOR : LIGHT_COLOR;\n    }\n\n    return baseColor;\n  }\n\n  show(theme) {\n    super.show(theme);\n    this.appendEnumeration();\n  }\n\n  public get enumerationElementPosition() {\n    return { x: 10, y: -1 };\n  }\n\n  public get beginningElementPosition() {\n    return { x: -6, y: 10 };\n  }\n}\n","import { Selection } from 'd3';\nimport { Phosphate } from 'domain/entities/Phosphate';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { MONOMER_SYMBOLS_IDS } from 'application/render/renderers/constants';\nimport { KetMonomerClass } from 'application/formatters';\nimport { RNA_DNA_NON_MODIFIED_PART } from 'domain/constants/monomers';\n\nconst PHOSPHATE_SELECTED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.Phosphate].selected;\nconst PHOSPHATE_SYMBOL_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.Phosphate].body;\n\nexport class PhosphateRenderer extends BaseMonomerRenderer {\n  constructor(public monomer: Phosphate, scale?: number) {\n    super(\n      monomer,\n      PHOSPHATE_SELECTED_ELEMENT_ID,\n      PHOSPHATE_SELECTED_ELEMENT_ID,\n      PHOSPHATE_SYMBOL_ELEMENT_ID,\n      scale,\n    );\n  }\n\n  protected getMonomerColor(theme) {\n    return theme.monomer.color[RNA_DNA_NON_MODIFIED_PART.PHOSPHATE].regular;\n  }\n\n  public get textColor() {\n    return this.monomer.isModification ? '#fff' : '#333333';\n  }\n\n  protected get modificationConfig() {\n    return { backgroundId: '#phosphate-modified-background' };\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n    theme,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr('href', PHOSPHATE_SYMBOL_ELEMENT_ID)\n      .attr('fill', this.getMonomerColor(theme));\n  }\n\n  show(theme) {\n    super.show(theme);\n  }\n\n  public get enumerationElementPosition() {\n    return undefined;\n  }\n\n  public get beginningElementPosition() {\n    return undefined;\n  }\n}\n","import { Selection } from 'd3';\nimport { Sugar } from 'domain/entities/Sugar';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { MONOMER_SYMBOLS_IDS } from 'application/render/renderers/constants';\nimport { KetMonomerClass } from 'application/formatters';\nimport { RNA_DNA_NON_MODIFIED_PART } from 'domain/constants/monomers';\n\nconst SUGAR_SELECTED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.Sugar].selected;\nconst SUGAR_SYMBOL_ELEMENT_ID = MONOMER_SYMBOLS_IDS[KetMonomerClass.Sugar].body;\n\nexport class SugarRenderer extends BaseMonomerRenderer {\n  public CHAIN_START_TERMINAL_INDICATOR_TEXT = '5';\n  public CHAIN_END_TERMINAL_INDICATOR_TEXT = '3';\n\n  constructor(public monomer: Sugar, scale?: number) {\n    super(\n      monomer,\n      SUGAR_SELECTED_ELEMENT_ID,\n      SUGAR_SELECTED_ELEMENT_ID,\n      SUGAR_SYMBOL_ELEMENT_ID,\n      scale,\n    );\n  }\n\n  public get textColor() {\n    return this.monomer.isModification ? '#333333' : '#fff';\n  }\n\n  protected get modificationConfig() {\n    return { backgroundId: '#sugar-modified-background' };\n  }\n\n  protected getMonomerColor(theme) {\n    return theme.monomer.color[RNA_DNA_NON_MODIFIED_PART.SUGAR_RNA].regular;\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n    theme,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr('href', SUGAR_SYMBOL_ELEMENT_ID)\n      .attr('fill', this.getMonomerColor(theme));\n  }\n\n  public get enumerationElementPosition() {\n    return undefined;\n  }\n\n  public get beginningElementPosition() {\n    return { x: -5, y: 7 };\n  }\n}\n","import { Selection } from 'd3';\nimport { RNABase } from 'domain/entities/RNABase';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { MONOMER_SYMBOLS_IDS } from 'application/render/renderers/constants';\nimport { KetMonomerClass } from 'application/formatters';\n\nconst RNABASE_SELECTED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.Base].selected;\nconst RNABASE_SYMBOL_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.Base].body;\n\nexport class RNABaseRenderer extends BaseMonomerRenderer {\n  constructor(public monomer: RNABase, scale?: number) {\n    super(\n      monomer,\n      RNABASE_SELECTED_ELEMENT_ID,\n      RNABASE_SELECTED_ELEMENT_ID,\n      RNABASE_SYMBOL_ELEMENT_ID,\n      scale,\n    );\n  }\n\n  public get textColor() {\n    return this.monomer.isModification ? '#fff' : '#333333';\n  }\n\n  protected get modificationConfig() {\n    return { backgroundId: '#rna-base-modified-background' };\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n    theme,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr('href', RNABASE_SYMBOL_ELEMENT_ID)\n      .attr('fill', this.getMonomerColor(theme));\n  }\n\n  show(theme) {\n    super.show(theme);\n    this.appendEnumeration();\n  }\n\n  public get enumerationElementPosition() {\n    return { x: 11, y: 5 };\n  }\n\n  public get beginningElementPosition() {\n    return undefined;\n  }\n}\n","import { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { UnresolvedMonomer } from 'domain/entities';\nimport { Selection } from 'd3';\n\nconst UNRESOLVED_MONOMER_SELECTED_ELEMENT_ID = '#unresolved-monomer-selection';\nconst UNRESOLVED_MONOMER_HOVERED_ELEMENT_ID = '#unresolved-monomer-hover';\nconst UNRESOLVED_MONOMER_SYMBOL_ELEMENT_ID = '#unresolved-monomer';\n\nexport class UnresolvedMonomerRenderer extends BaseMonomerRenderer {\n  constructor(public monomer: UnresolvedMonomer, scale?: number) {\n    super(\n      monomer,\n      UNRESOLVED_MONOMER_SELECTED_ELEMENT_ID,\n      UNRESOLVED_MONOMER_HOVERED_ELEMENT_ID,\n      UNRESOLVED_MONOMER_SYMBOL_ELEMENT_ID,\n      scale,\n    );\n  }\n\n  public get textColor() {\n    return 'white';\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr('href', UNRESOLVED_MONOMER_SYMBOL_ELEMENT_ID);\n  }\n\n  show(theme) {\n    super.show(theme);\n  }\n\n  public get enumerationElementPosition() {\n    return undefined;\n  }\n\n  public get beginningElementPosition() {\n    return undefined;\n  }\n\n  protected get modificationConfig() {\n    return undefined;\n  }\n}\n","import { Selection } from 'd3';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { UnsplitNucleotide } from 'domain/entities';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { MONOMER_SYMBOLS_IDS } from 'application/render/renderers/constants';\nimport { KetMonomerClass } from 'application/formatters';\n\nconst NUCLEOTIDE_SELECTED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.RNA].selected;\nconst NUCLEOTIDE_HOVERED_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.RNA].hover;\nconst NUCLEOTIDE_SYMBOL_ELEMENT_ID =\n  MONOMER_SYMBOLS_IDS[KetMonomerClass.RNA].body;\n\nexport class UnsplitNucleotideRenderer extends BaseMonomerRenderer {\n  public CHAIN_START_TERMINAL_INDICATOR_TEXT = '5';\n\n  constructor(public monomer: UnsplitNucleotide, scale?: number) {\n    super(\n      monomer,\n      NUCLEOTIDE_SELECTED_ELEMENT_ID,\n      NUCLEOTIDE_HOVERED_ELEMENT_ID,\n      NUCLEOTIDE_SYMBOL_ELEMENT_ID,\n      scale,\n    );\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n    theme,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr('href', NUCLEOTIDE_SYMBOL_ELEMENT_ID)\n      .attr('fill', this.getMonomerColor(theme));\n  }\n\n  show(theme) {\n    super.show(theme);\n    this.appendEnumeration();\n  }\n\n  protected appendLabel(rootElement: D3SvgElementSelection<SVGGElement, void>) {\n    const fontSize = 6;\n    const Y_OFFSET_FROM_MIDDLE = -2;\n\n    rootElement\n      .append('foreignObject')\n      .attr('width', this.width)\n      .attr('height', this.height - this.height / 3)\n      .html(\n        `\n        <div style=\"\n            padding: 0 4px;\n            text-align: center;\n            color: ${this.textColor};\n            display: flex;\n            height: 100%;\n            align-items: center;\n            justify-content: center;\n        \">\n          ${this.monomer.label}\n        </div>\n      `,\n      )\n      .attr('font-size', `${fontSize}px`)\n      .attr('line-height', `${fontSize}px`)\n      .attr('font-weight', '700')\n      .style('cursor', 'pointer')\n      .style('user-select', 'none')\n      .attr('pointer-events', 'none')\n      .attr('x', '4px')\n      .attr('y', this.height / 2 + Y_OFFSET_FROM_MIDDLE);\n  }\n\n  public get enumerationElementPosition() {\n    return { x: 7, y: 7 };\n  }\n\n  public get beginningElementPosition() {\n    return { x: 0, y: 15 };\n  }\n\n  protected get modificationConfig() {\n    return undefined;\n  }\n}\n","import { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\n\nexport class EmptySubChain extends BaseSubChain {}\n","import { BaseMonomer } from './BaseMonomer';\nimport { EmptySubChain } from 'domain/entities/monomer-chains/EmptySubChain';\nimport { Struct } from 'domain/entities/struct';\n\nfunction getEmptyMonomerItem() {\n  return {\n    label: '',\n    struct: new Struct(),\n    props: {\n      MonomerNaturalAnalogCode: '',\n      MonomerName: '',\n      Name: '',\n    },\n  };\n}\n\nexport class EmptyMonomer extends BaseMonomer {\n  constructor() {\n    super(getEmptyMonomerItem(), undefined, { generateId: false });\n  }\n\n  public getValidSourcePoint() {\n    return undefined;\n  }\n\n  public getValidTargetPoint() {\n    return undefined;\n  }\n\n  public get SubChainConstructor() {\n    return EmptySubChain;\n  }\n\n  public isMonomerTypeDifferentForChaining() {\n    return true;\n  }\n}\n","import { AttachmentPoint } from './AttachmentPoint';\nimport { Coordinates } from 'domain/helpers/attachmentPointCalculations';\nimport { PreviewAttachmentPointConstructorParams } from 'domain/types';\nimport { UsageInMacromolecule } from 'application/render';\nimport util from 'application/render/util';\nimport { Vec2 } from 'domain/entities';\n\nexport class PreviewAttachmentPoint extends AttachmentPoint {\n  private connected: boolean;\n  private selected: boolean;\n  private usage: UsageInMacromolecule;\n\n  constructor(constructorParams: PreviewAttachmentPointConstructorParams) {\n    super(constructorParams, true);\n\n    this.connected = constructorParams.connected;\n    this.selected = constructorParams.selected;\n    this.usage = constructorParams.usage;\n\n    this.appendAttachmentPoint();\n  }\n\n  protected renderAttachmentPointByCoordinates(\n    attachmentOnBorder: Coordinates,\n    attachmentPointCoordinates: Coordinates,\n  ) {\n    this.attachmentPoint = this.rootElement\n      .insert('g', ':first-child')\n      .data([this])\n      .style('pointer-events', 'none')\n      .style('cursor', 'pointer')\n      .attr('class', 'dynamic-element');\n\n    const attachmentPointElement = this.attachmentPoint.append('g');\n\n    attachmentPointElement\n      .append('line')\n      .attr('x1', attachmentOnBorder.x)\n      .attr('y1', attachmentOnBorder.y)\n      .attr('x2', attachmentPointCoordinates.x)\n      .attr('y2', attachmentPointCoordinates.y)\n      .attr('stroke', this.stroke)\n      .attr('stroke-linecap', 'round')\n      .attr('stroke-width', '1px');\n\n    const { color, stroke, fill } = util.useLabelStyles(\n      this.selected,\n      this.connected,\n      this.usage,\n    );\n\n    const labelGroup = this.attachmentPoint?.append('g');\n\n    const angleInRadians = Vec2.degrees_to_radians(this.initialAngle);\n    const cos = Math.cos(angleInRadians);\n    const sin = Math.sin(angleInRadians);\n\n    const centerX = attachmentPointCoordinates.x - 10;\n    const centerY = attachmentPointCoordinates.y - 8;\n    const rectX = centerX - 10 * cos;\n    const rectY = centerY - 10 * sin;\n    const labelX = attachmentPointCoordinates.x - 10 * cos;\n    const labelY = attachmentPointCoordinates.y - 10 * sin;\n\n    labelGroup\n      .append('rect')\n      .attr('x', rectX)\n      .attr('y', rectY)\n      .attr('rx', 4)\n      .attr('ry', 4)\n      .attr('width', 20)\n      .attr('height', 16)\n      .attr('fill', fill)\n      .attr('stroke', stroke)\n      .attr('stroke-width', '1px');\n\n    labelGroup\n      .append('text')\n      .attr('x', labelX)\n      .attr('y', labelY)\n      .attr('fill', color)\n      .attr('font-size', '10px')\n      .attr('text-anchor', 'middle')\n      .attr('alignment-baseline', 'middle')\n      .text(this.attachmentPointName);\n\n    return this.attachmentPoint;\n  }\n\n  public appendAttachmentPoint() {\n    const [attachmentToBorderCoordinates, attachmentPointCoordinates] =\n      this.getCoordinates(this.initialAngle);\n\n    const attachmentPoint = this.renderAttachmentPointByCoordinates(\n      attachmentToBorderCoordinates,\n      attachmentPointCoordinates,\n    );\n\n    this.element = attachmentPoint;\n\n    return attachmentPoint;\n  }\n}\n","import { Selection } from 'd3';\nimport { BaseMonomerRenderer } from 'application/render/renderers';\nimport { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\nimport { MONOMER_SYMBOLS_IDS } from 'application/render/renderers/constants';\nimport { monomerFactory } from 'application/editor';\nimport { EmptyMonomer } from 'domain/entities/EmptyMonomer';\nimport { AttachmentPointName } from 'domain/types';\nimport { PreviewAttachmentPoint } from 'domain/PreviewAttachmentPoint';\nimport { UsageInMacromolecule } from 'application/render';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { KetMonomerClass } from 'application/formatters';\n\ntype PreviewAttachmentPointParams = {\n  canvas: D3SvgElementSelection<SVGSVGElement, void>;\n  usage: UsageInMacromolecule;\n  selectedAttachmentPoint: string | null | undefined;\n  connectedAttachmentPoints: string[] | undefined;\n};\n\nexport class AmbiguousMonomerRenderer extends BaseMonomerRenderer {\n  private monomerRenderer: BaseMonomerRenderer;\n  private monomerSymbolElementsIds: {\n    selected: string;\n    hover: string;\n    body: string;\n    variant?: string;\n  };\n\n  constructor(public monomer: AmbiguousMonomer, scale?: number) {\n    const monomerClass = AmbiguousMonomer.getMonomerClass(monomer.monomers);\n    const monomerSymbolElementsIds = MONOMER_SYMBOLS_IDS[monomerClass];\n\n    super(\n      monomer,\n      monomerSymbolElementsIds.selected,\n      monomerSymbolElementsIds.hover,\n      monomerSymbolElementsIds.body,\n      scale,\n    );\n\n    const [, MonomerRenderer] = monomerFactory(\n      this.monomer.monomers[0].monomerItem,\n    );\n\n    this.monomerRenderer = new MonomerRenderer(new EmptyMonomer());\n    this.monomerSymbolElementsIds = monomerSymbolElementsIds;\n    this.CHAIN_START_TERMINAL_INDICATOR_TEXT =\n      this.monomerRenderer.CHAIN_START_TERMINAL_INDICATOR_TEXT;\n  }\n\n  protected appendBody(\n    rootElement: Selection<SVGGElement, void, HTMLElement, never>,\n  ) {\n    return rootElement\n      .append('use')\n      .data([this])\n      .attr(\n        'href',\n        this.monomerSymbolElementsIds.variant ||\n          this.monomerSymbolElementsIds.body,\n      )\n      .attr('fill', '#fff')\n      .attr('stroke', '#585858')\n      .attr('stroke-width', '1px')\n      .attr('paint-order', 'fill');\n  }\n\n  public get enumerationElementPosition() {\n    return this.monomerRenderer.enumerationElementPosition;\n  }\n\n  public get beginningElementPosition() {\n    return this.monomerRenderer.beginningElementPosition;\n  }\n\n  private appendNumberOfMonomers() {\n    const isMonomersAmountTenOrMore = this.monomer.monomers.length >= 10;\n    const numberOfMonomersElement = this.rootElement\n      ?.append('g')\n      .attr(\n        'transform',\n        `translate(${\n          this.center.x -\n          this.scaledMonomerPosition.x -\n          (isMonomersAmountTenOrMore ? 2 : 0)\n        }, ${\n          this.center.y -\n          this.scaledMonomerPosition.y +\n          (this.monomer.monomerClass === KetMonomerClass.Base ? 7 : 8)\n        })`,\n      )\n      .attr('pointer-events', 'none');\n\n    numberOfMonomersElement\n      ?.append('foreignObject')\n      .attr('width', '20px')\n      .attr('height', '20px')\n      .attr('x', isMonomersAmountTenOrMore ? '-3' : '-4')\n      .attr('y', '-4')\n      .append('xhtml:div')\n      .attr(\n        'style',\n        `\n        width: ${isMonomersAmountTenOrMore ? '10px' : '8px'};\n        height: 8px;\n        border-radius: ${isMonomersAmountTenOrMore ? '20px' : '50%'};\n        border: 0.5px solid #cceaee;\n      `,\n      );\n\n    numberOfMonomersElement\n      ?.append('text')\n      .attr('x', -1.6)\n      .attr('y', 2.1)\n      .attr('font-size', '6px')\n      .attr('font-weight', 300)\n      .text(this.monomer.monomers.length);\n  }\n\n  public show(theme) {\n    super.show(theme);\n    this.appendNumberOfMonomers();\n    if (this.enumerationElementPosition) {\n      this.appendEnumeration();\n    }\n  }\n\n  private appendPreviewAttachmentPoint(\n    params: PreviewAttachmentPointParams,\n    attachmentPointName: AttachmentPointName,\n    customAngle?: number,\n  ) {\n    const { selectedAttachmentPoint, connectedAttachmentPoints, usage } =\n      params;\n    const attachmentPointParams = this.prepareAttachmentPointsParams(\n      attachmentPointName,\n      customAngle,\n    );\n\n    return new PreviewAttachmentPoint({\n      ...attachmentPointParams,\n      connected:\n        connectedAttachmentPoints?.includes(attachmentPointName) ?? false,\n      selected: selectedAttachmentPoint === attachmentPointName,\n      usage,\n      canvas: params.canvas,\n      applyZoomForPositionCalculation: false,\n    });\n  }\n\n  public showExternal(params: PreviewAttachmentPointParams) {\n    this.rootElement = this.appendRootElement(params.canvas);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    this.bodyElement = this.appendBody(this.rootElement);\n    this.appendLabel(this.rootElement);\n    this.appendNumberOfMonomers();\n    this.drawAttachmentPoints(\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.appendPreviewAttachmentPoint.bind(this, params),\n    );\n  }\n\n  protected get modificationConfig() {\n    return undefined;\n  }\n}\n","import { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\n\nexport class AmbiguousMonomerSequenceNode {\n  constructor(public monomer: AmbiguousMonomer) {}\n\n  public get SubChainConstructor() {\n    return this.monomer.SubChainConstructor;\n  }\n\n  public get firstMonomerInNode() {\n    return this.monomer;\n  }\n\n  public get lastMonomerInNode() {\n    return this.monomer;\n  }\n\n  public get monomers() {\n    return [this.monomer];\n  }\n\n  public get renderer() {\n    return this.monomer.renderer;\n  }\n\n  public get modified() {\n    return this.monomer.isModification;\n  }\n}\n","import { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\nimport {\n  BaseMonomer,\n  Peptide,\n  Phosphate,\n  SubChainNode,\n  Sugar,\n  UnresolvedMonomer,\n  UnsplitNucleotide,\n  Nucleoside,\n  Nucleotide,\n  MonomerSequenceNode,\n  EmptySequenceNode,\n  LinkerSequenceNode,\n  AmbiguousMonomer,\n} from 'domain/entities';\nimport {\n  getNextMonomerInChain,\n  isValidNucleoside,\n  isValidNucleotide,\n} from 'domain/helpers/monomers';\nimport { EmptySubChain } from 'domain/entities/monomer-chains/EmptySubChain';\nimport { AmbiguousMonomerSequenceNode } from 'domain/entities/AmbiguousMonomerSequenceNode';\n\nexport class Chain {\n  public subChains: BaseSubChain[] = [];\n\n  public firstMonomer?: BaseMonomer;\n\n  public isCyclic = false;\n\n  constructor(firstMonomer?: BaseMonomer, isCyclic?: boolean) {\n    if (firstMonomer) {\n      this.firstMonomer = firstMonomer;\n\n      this.fillSubChains(firstMonomer);\n    }\n\n    if (isCyclic) {\n      this.isCyclic = isCyclic;\n    }\n  }\n\n  private createSubChainIfNeed(monomer) {\n    const needCreateNewSubchain =\n      !this.lastNode?.monomer ||\n      monomer.isMonomerTypeDifferentForChaining(this.lastNode.monomer);\n\n    if (needCreateNewSubchain) {\n      this.subChains.push(new monomer.SubChainConstructor());\n    }\n  }\n\n  public add(monomer: BaseMonomer) {\n    this.createSubChainIfNeed(monomer);\n\n    if (\n      monomer instanceof Peptide ||\n      monomer instanceof UnsplitNucleotide ||\n      monomer instanceof UnresolvedMonomer\n    ) {\n      this.lastSubChain.add(new MonomerSequenceNode(monomer));\n      return;\n    }\n\n    if (monomer instanceof AmbiguousMonomer) {\n      this.lastSubChain.add(new AmbiguousMonomerSequenceNode(monomer));\n      return;\n    }\n\n    if (monomer instanceof Sugar) {\n      if (isValidNucleoside(monomer, this.firstMonomer)) {\n        this.lastSubChain.add(Nucleoside.fromSugar(monomer, false));\n        return;\n      }\n      if (isValidNucleotide(monomer, this.firstMonomer)) {\n        this.lastSubChain.add(Nucleotide.fromSugar(monomer, false));\n        return;\n      }\n    }\n\n    const nextMonomer = getNextMonomerInChain(monomer);\n    const isNextMonomerNucleosideOrNucleotideOrPeptide = () => {\n      const isNucleosideOrNucleotide =\n        nextMonomer instanceof Sugar &&\n        (isValidNucleotide(nextMonomer) || isValidNucleoside(nextMonomer));\n      return isNucleosideOrNucleotide || nextMonomer instanceof Peptide;\n    };\n    if (\n      monomer instanceof Phosphate &&\n      (!this.lastNode ||\n        this.lastNode instanceof Nucleoside ||\n        this.lastNode.lastMonomerInNode instanceof UnsplitNucleotide) &&\n      (!nextMonomer || isNextMonomerNucleosideOrNucleotideOrPeptide())\n    ) {\n      this.lastSubChain.add(new MonomerSequenceNode(monomer));\n      return;\n    }\n    this.lastSubChain.add(new LinkerSequenceNode(monomer));\n  }\n\n  public addNode(node: SubChainNode) {\n    this.createSubChainIfNeed(node.monomer);\n\n    this.lastSubChain.add(node);\n\n    return this;\n  }\n\n  private fillSubChains(monomer?: BaseMonomer) {\n    if (!monomer) return;\n\n    this.add(monomer);\n\n    this.fillSubChains(\n      getNextMonomerInChain(\n        this.lastNode?.lastMonomerInNode,\n        this.firstMonomer,\n      ),\n    );\n  }\n\n  public get lastSubChain() {\n    return this.subChains[this.subChains.length - 1];\n  }\n\n  public get nodes() {\n    const nodes: SubChainNode[] = [];\n    this.subChains.forEach((subChain) => {\n      nodes.push(...subChain.nodes);\n    });\n\n    return nodes;\n  }\n\n  public get lastNode():\n    | EmptySequenceNode\n    | MonomerSequenceNode\n    | Nucleoside\n    | Nucleotide\n    | undefined {\n    return this.lastSubChain?.lastNode;\n  }\n\n  public get lastNonEmptyNode() {\n    if (this.lastNode instanceof EmptySequenceNode) {\n      const nodes = this.nodes;\n\n      return nodes[nodes.length - 2];\n    } else {\n      return this.lastNode;\n    }\n  }\n\n  public get firstSubChain() {\n    return this.subChains[0];\n  }\n\n  public get firstNode() {\n    return this.firstSubChain?.firstNode;\n  }\n\n  public get length() {\n    let length = 0;\n    this.subChains.forEach((subChain) => {\n      length += subChain.length;\n    });\n\n    return length;\n  }\n\n  public get isEmpty() {\n    return (\n      this.subChains.length === 1 &&\n      this.subChains[0].nodes.length === 1 &&\n      this.subChains[0].nodes[0] instanceof EmptySequenceNode\n    );\n  }\n\n  public get isAntisense() {\n    return this.nodes.some((node) => node.monomer.monomerItem.isAntisense);\n  }\n\n  public forEachNode(\n    callback: ({\n      node,\n      subChain,\n    }: {\n      node: SubChainNode;\n      subChain: BaseSubChain;\n      nodeIndex: number;\n    }) => void,\n  ) {\n    let nodeIndex = 0;\n\n    this.subChains.forEach((subChain) => {\n      subChain.nodes.forEach((node) => {\n        callback({ node, subChain, nodeIndex });\n        nodeIndex++;\n      });\n    });\n  }\n\n  public static createChainWithEmptyNode() {\n    const emptyChain = new Chain();\n    const emptySequenceNode = new EmptySequenceNode();\n    const emptySubChain = new EmptySubChain();\n\n    emptySubChain.add(emptySequenceNode);\n    emptyChain.subChains.push(emptySubChain);\n\n    return { emptyChain, emptySubChain, emptySequenceNode };\n  }\n\n  public get isNewSequenceChain() {\n    return this.length === 1 && this.firstNode instanceof EmptySequenceNode;\n  }\n\n  public get monomers() {\n    return this.nodes.reduce(\n      (monomers: BaseMonomer[], node) => [...monomers, ...node.monomers],\n      [],\n    );\n  }\n}\n","import { Chain } from 'domain/entities/monomer-chains/Chain';\nimport {\n  AmbiguousMonomer,\n  BaseMonomer,\n  Chem,\n  IsChainCycled,\n  Peptide,\n  Phosphate,\n  RNABase,\n  SubChainNode,\n  Sugar,\n  UnresolvedMonomer,\n  UnsplitNucleotide,\n} from 'domain/entities';\nimport {\n  getNextMonomerInChain,\n  getPreviousMonomerInChain,\n  getRnaBaseFromSugar,\n  isMonomerConnectedToR2RnaBase,\n  isRnaBaseOrAmbiguousRnaBase,\n} from 'domain/helpers/monomers';\nimport { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\nimport { isMonomerSgroupWithAttachmentPoints } from '../../../utilities/monomers';\n\nexport interface ComplimentaryChainsWithData {\n  complimentaryChain: Chain;\n  chain: Chain;\n  firstConnectedNode: SubChainNode;\n  firstConnectedComplimentaryNode: SubChainNode;\n}\n\nexport class ChainsCollection {\n  public chains: Chain[] = [];\n\n  private get monomerToChain() {\n    const monomerToChain = new Map<BaseMonomer, Chain>();\n\n    this.chains.forEach((chain) => {\n      chain.forEachNode(({ node }) => {\n        node.monomers.forEach((monomer) => {\n          monomerToChain.set(monomer, chain);\n        });\n      });\n    });\n\n    return monomerToChain;\n  }\n\n  public get monomerToNode() {\n    const monomerToNode = new Map<BaseMonomer, SubChainNode>();\n\n    this.forEachNode(({ node }) => {\n      node.monomers.forEach((monomer) => {\n        monomerToNode.set(monomer, node);\n      });\n    });\n\n    return monomerToNode;\n  }\n\n  public rearrange() {\n    this.chains.sort((chain1, chain2) => {\n      // The factor is used to reduce the influence of the X coordinate on the sorting\n      // to make the sorting more oriented to Y coordinate\n      const X_COORDINATE_REDUCTION_FACTOR = 0.01;\n      if (\n        chain2.firstNode?.monomer.position.x * X_COORDINATE_REDUCTION_FACTOR +\n          chain2.firstNode?.monomer.position.y >\n        chain1.firstNode?.monomer.position.x * X_COORDINATE_REDUCTION_FACTOR +\n          chain1.firstNode?.monomer.position.y\n      ) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n\n    const reorderedChains = new Set<Chain>();\n    const monomerToChain = this.monomerToChain;\n    this.chains.forEach((chain) => {\n      reorderedChains.add(chain);\n\n      chain.forEachNode(({ node }) => {\n        node.monomers.forEach((monomer) => {\n          const sideConnections = monomer.sideConnections;\n          if (sideConnections.length) {\n            sideConnections.forEach((sideConnection) => {\n              const anotherMonomer = sideConnection.getAnotherMonomer(monomer);\n              const anotherChain =\n                anotherMonomer && monomerToChain.get(anotherMonomer);\n              if (anotherChain && !reorderedChains.has(anotherChain)) {\n                reorderedChains.add(anotherChain);\n              }\n            });\n          }\n        });\n      });\n    });\n    this.chains = [...reorderedChains.values()];\n  }\n\n  public add(chain: Chain) {\n    this.chains.push(chain);\n\n    return this;\n  }\n\n  public static fromMonomers(monomers: BaseMonomer[]) {\n    const chainsCollection = new ChainsCollection();\n    const filteredMonomers = monomers.filter(\n      (monomer) =>\n        !monomer.monomerItem.props.isMicromoleculeFragment ||\n        isMonomerSgroupWithAttachmentPoints(monomer),\n    );\n\n    if (filteredMonomers.length === 0) {\n      return chainsCollection;\n    }\n\n    const [firstMonomersInRegularChains, firstMonomersInCycledChains] =\n      this.getFirstMonomersInChains(filteredMonomers);\n\n    firstMonomersInRegularChains.forEach((monomer) => {\n      chainsCollection.add(new Chain(monomer));\n    });\n\n    firstMonomersInCycledChains.forEach((monomer) => {\n      chainsCollection.add(new Chain(monomer, !!IsChainCycled.CYCLED));\n    });\n\n    const firstMonomersInMiddleOfChains =\n      this.getFirstMonomersInMiddleOfChains(filteredMonomers);\n\n    if (firstMonomersInMiddleOfChains.length) {\n      firstMonomersInMiddleOfChains.forEach(\n        (firstMonomerInMiddleOfChain: BaseMonomer) => {\n          chainsCollection.add(new Chain(firstMonomerInMiddleOfChain));\n        },\n      );\n    }\n\n    return chainsCollection;\n  }\n\n  public static getFirstMonomersInChains(\n    monomers: BaseMonomer[],\n    MonomerTypes: Array<\n      | typeof Peptide\n      | typeof Chem\n      | typeof Phosphate\n      | typeof Sugar\n      | typeof RNABase\n      | typeof UnresolvedMonomer\n      | typeof UnsplitNucleotide\n      | typeof AmbiguousMonomer\n    > = [\n      Peptide,\n      Chem,\n      Phosphate,\n      Sugar,\n      RNABase,\n      UnresolvedMonomer,\n      UnsplitNucleotide,\n      AmbiguousMonomer,\n    ],\n  ) {\n    const monomersList = monomers.filter((monomer) =>\n      MonomerTypes.some((MonomerType) => monomer instanceof MonomerType),\n    );\n\n    const firstMonomersInChains: BaseMonomer[][] = [];\n\n    const firstMonomersInRegularChains =\n      this.getFirstMonomersInRegularChains(monomersList);\n\n    const firstMonomersInCycledChains =\n      this.getFirstMonomersInCycledChains(monomersList);\n\n    firstMonomersInChains.push(\n      firstMonomersInRegularChains,\n      firstMonomersInCycledChains,\n    );\n\n    return firstMonomersInChains;\n  }\n\n  private static getFirstMonomersInMiddleOfChains(monomers: BaseMonomer[]) {\n    const initialMonomersSet = new Set(monomers);\n    const handledMonomers = new Set<BaseMonomer>();\n    const firstMonomersInMiddleOfChains: BaseMonomer[] = [];\n\n    monomers.forEach((monomer) => {\n      if (handledMonomers.has(monomer)) {\n        return;\n      }\n\n      handledMonomers.add(monomer);\n\n      let previousMonomerInChain = getPreviousMonomerInChain(monomer);\n\n      while (\n        previousMonomerInChain &&\n        !handledMonomers.has(previousMonomerInChain) &&\n        !initialMonomersSet.has(previousMonomerInChain)\n      ) {\n        const previousMonomer = getPreviousMonomerInChain(\n          previousMonomerInChain,\n        );\n\n        handledMonomers.add(previousMonomerInChain);\n\n        if (!previousMonomer) {\n          firstMonomersInMiddleOfChains.push(previousMonomerInChain);\n        } else {\n          previousMonomerInChain = previousMonomer;\n        }\n      }\n    });\n\n    return firstMonomersInMiddleOfChains;\n  }\n\n  public get firstNode() {\n    return this.chains[0]?.subChains[0]?.nodes[0];\n  }\n\n  private static getFirstMonomersInRegularChains(\n    monomersList: BaseMonomer[],\n  ): BaseMonomer[] {\n    const firstMonomersInRegularChains = monomersList.filter((monomer) => {\n      const R1PolymerBond = monomer.attachmentPointsToBonds.R1;\n\n      if (R1PolymerBond instanceof MonomerToAtomBond) {\n        return true;\n      }\n\n      const isFirstMonomerWithR2R1connection =\n        !R1PolymerBond || R1PolymerBond.isSideChainConnection;\n      const R1ConnectedMonomer = R1PolymerBond?.getAnotherMonomer(monomer);\n      const isRnaBaseConnectedToSugar =\n        isRnaBaseOrAmbiguousRnaBase(monomer) &&\n        R1ConnectedMonomer instanceof Sugar &&\n        getRnaBaseFromSugar(R1ConnectedMonomer) === monomer;\n\n      return (\n        (isFirstMonomerWithR2R1connection ||\n          isMonomerConnectedToR2RnaBase(monomer)) &&\n        !isRnaBaseConnectedToSugar\n      );\n    });\n\n    return firstMonomersInRegularChains;\n  }\n\n  private static getFirstMonomersInCycledChains(\n    monomersList: BaseMonomer[],\n  ): BaseMonomer[] {\n    const handledMonomers = new Set<BaseMonomer>();\n    const cyclicChains: BaseMonomer[][] = [];\n\n    monomersList.forEach((monomer) => {\n      if (handledMonomers.has(monomer)) {\n        return;\n      }\n\n      const monomersInSameChain = new Set<BaseMonomer>();\n      monomersInSameChain.add(monomer);\n      handledMonomers.add(monomer);\n      let nextMonomerInChain = getNextMonomerInChain(monomer);\n\n      while (nextMonomerInChain && !handledMonomers.has(nextMonomerInChain)) {\n        monomersInSameChain.add(nextMonomerInChain);\n        handledMonomers.add(nextMonomerInChain);\n        nextMonomerInChain = getNextMonomerInChain(nextMonomerInChain);\n      }\n\n      if (monomer === nextMonomerInChain) {\n        cyclicChains.push(Array.from(monomersInSameChain));\n      }\n    });\n\n    const firstMonomersOfCycledChainsSet = cyclicChains.map((cyclicChain) =>\n      this.getMonomerWithLowerCoordsFromMonomerList(cyclicChain),\n    );\n\n    return firstMonomersOfCycledChainsSet;\n  }\n\n  private static getMonomerWithLowerCoordsFromMonomerList(\n    monomerList: BaseMonomer[],\n  ): BaseMonomer {\n    const monomerListShallowCopy = monomerList.slice();\n\n    monomerListShallowCopy.sort((monomer1, monomer2) => {\n      if (\n        monomer2.position.x + monomer2.position.y >\n        monomer1.position.x + monomer1.position.y\n      ) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n\n    const monomerWithLowerCoords = monomerListShallowCopy[0];\n\n    return monomerWithLowerCoords;\n  }\n\n  public get lastNode() {\n    return this.chains[0].lastSubChain.lastNode;\n  }\n\n  public get length() {\n    return this.chains.reduce((length, chain) => length + chain.length, 0);\n  }\n\n  public forEachNode(\n    forEachCallback: (params: {\n      chainIndex: number;\n      subChainIndex: number;\n      nodeIndex: number;\n      nodeIndexOverall: number;\n      node: SubChainNode;\n      subChain: BaseSubChain;\n      chain: Chain;\n    }) => void,\n  ) {\n    let nodeIndexOverall = 0;\n\n    this.chains.forEach((chain, chainIndex) => {\n      chain.subChains.forEach((subChain, subChainIndex) => {\n        subChain.nodes.forEach((node, nodeIndex) => {\n          forEachCallback({\n            chainIndex,\n            subChainIndex,\n            nodeIndex,\n            nodeIndexOverall,\n            node,\n            subChain,\n            chain,\n          });\n          nodeIndexOverall++;\n        });\n      });\n    });\n  }\n\n  private getFirstAntisenseMonomerInNode(node: SubChainNode) {\n    for (let i = 0; i < node.monomers.length; i++) {\n      const monomer = node.monomers[i];\n      const hydrogenBond = monomer.hydrogenBonds[0];\n\n      if (hydrogenBond) {\n        return hydrogenBond.getAnotherMonomer(monomer);\n      }\n    }\n\n    return undefined;\n  }\n\n  public getComplimentaryChainsWithData(chain: Chain) {\n    const complimentaryChainsWithData: ComplimentaryChainsWithData[] = [];\n    const handledChains = new Set<Chain>();\n    const monomerToChain = this.monomerToChain;\n\n    chain.forEachNode(({ node }) => {\n      const complimentaryMonomer = this.getFirstAntisenseMonomerInNode(node);\n      const complimentaryNode =\n        complimentaryMonomer && this.monomerToNode.get(complimentaryMonomer);\n      const complimentaryChain =\n        complimentaryMonomer && monomerToChain.get(complimentaryMonomer);\n\n      if (\n        !complimentaryNode ||\n        !complimentaryChain ||\n        handledChains.has(complimentaryChain)\n      ) {\n        return;\n      }\n\n      handledChains.add(complimentaryChain);\n      complimentaryChainsWithData.push({\n        complimentaryChain,\n        chain,\n        firstConnectedNode: node,\n        firstConnectedComplimentaryNode: complimentaryNode,\n      });\n    });\n\n    return complimentaryChainsWithData;\n  }\n}\n","import { EmptySubChain } from 'domain/entities/monomer-chains/EmptySubChain';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { EmptyMonomer } from 'domain/entities/EmptyMonomer';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\n\nexport class EmptySequenceNode {\n  public renderer?: BaseSequenceItemRenderer = undefined;\n  public monomer = new EmptyMonomer();\n  constructor() {}\n\n  public get SubChainConstructor() {\n    return EmptySubChain;\n  }\n\n  public get firstMonomerInNode() {\n    return this.monomer;\n  }\n\n  public get lastMonomerInNode() {\n    return this.monomer;\n  }\n\n  public get hovered() {\n    return false;\n  }\n\n  public get selected() {\n    return false;\n  }\n\n  public get monomerItem() {\n    return { props: { MonomerNaturalAnalogCode: null } };\n  }\n\n  public get monomers(): BaseMonomer[] {\n    return [];\n  }\n\n  public setRenderer(renderer) {\n    this.renderer = renderer;\n    this.monomer.setRenderer(renderer);\n  }\n\n  public get modified() {\n    return false;\n  }\n}\n","import { D3SvgElementSelection } from 'application/render/types';\nimport { Vec2 } from 'domain/entities';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { BaseSequenceRenderer } from 'application/render/renderers/sequence/BaseSequenceRenderer';\nimport { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\nimport { CoreEditor } from 'application/editor/internal';\nimport { EmptySequenceNode } from 'domain/entities/EmptySequenceNode';\nimport { editorEvents } from 'application/editor/editorEvents';\nimport assert from 'assert';\nimport { SequenceRenderer } from 'application/render';\n\nconst CHAIN_START_ARROW_SYMBOL_ID = 'sequence-start-arrow';\n\nexport abstract class BaseSequenceItemRenderer extends BaseSequenceRenderer {\n  private editorEvents: typeof editorEvents;\n  public textElement?: D3SvgElementSelection<SVGTextElement, void>;\n  public counterElement?: D3SvgElementSelection<SVGTextElement, void>;\n  private selectionRectangle?: D3SvgElementSelection<SVGRectElement, void>;\n  public spacerElement?: D3SvgElementSelection<SVGGElement, void>;\n  public backgroundElement?: D3SvgElementSelection<SVGRectElement, void>;\n  public caretElement?: D3SvgElementSelection<SVGLineElement, void>;\n\n  constructor(\n    public node: SubChainNode,\n    private firstNodeInChainPosition: Vec2,\n    private monomerIndexInChain: number,\n    private isLastMonomerInChain: boolean,\n    private subChain: BaseSubChain,\n    private _isEditingSymbol: boolean,\n    public monomerSize: { width: number; height: number },\n    public scaledMonomerPosition: Vec2,\n  ) {\n    super(node.monomer);\n    this.editorEvents = editorEvents;\n  }\n\n  abstract get symbolToDisplay(): string;\n\n  public get isEditingSymbol() {\n    return this._isEditingSymbol;\n  }\n\n  public set isEditingSymbol(isEditingSymbol: boolean) {\n    this._isEditingSymbol = isEditingSymbol;\n  }\n\n  private get isSingleEmptyNode() {\n    return (\n      SequenceRenderer.chainsCollection.length === 1 &&\n      this.node instanceof EmptySequenceNode\n    );\n  }\n\n  protected abstract drawModification(): void;\n\n  protected appendHover(): D3SvgElementSelection<SVGUseElement, void> | void {\n    return undefined;\n  }\n\n  protected appendHoverAreaElement(): void {}\n  moveSelection(): void {}\n\n  public get currentSubChain() {\n    return this.subChain;\n  }\n\n  public get scaledMonomerPositionForSequence() {\n    const indexInRow = this.monomerIndexInChain % this.symbolsInRow;\n    const rowIndex = Math.floor(this.monomerIndexInChain / this.symbolsInRow);\n\n    return new Vec2(\n      this.firstNodeInChainPosition.x +\n        indexInRow * 20 +\n        Math.floor(indexInRow / this.nthSeparationInRow) * 10,\n      this.firstNodeInChainPosition.y + 47 * rowIndex,\n    );\n  }\n\n  public get center() {\n    return this.scaledMonomerPositionForSequence.add(new Vec2(4.5, 0, 0));\n  }\n\n  protected get isSequenceEditModeTurnedOn() {\n    return CoreEditor.provideEditorInstance().isSequenceEditMode;\n  }\n\n  protected get isSequenceEditInRnaBuilderModeTurnedOn() {\n    return CoreEditor.provideEditorInstance().isSequenceEditInRNABuilderMode;\n  }\n\n  private appendRootElement() {\n    const rootElement = this.canvas\n      .append('g')\n      .data([this])\n      .attr('transition', 'transform 0.2s')\n      .attr(\n        'transform',\n        `translate(${this.scaledMonomerPositionForSequence.x}, ${this.scaledMonomerPositionForSequence.y})`,\n      ) as never as D3SvgElementSelection<SVGGElement, void>;\n\n    if (this.isSequenceEditModeTurnedOn || this.isSingleEmptyNode) {\n      rootElement.attr('pointer-events', 'all').attr('cursor', 'text');\n    }\n\n    return rootElement;\n  }\n\n  private appendBackgroundElement() {\n    const backgroundElement = this.rootElement\n      ?.append('rect')\n      .attr('width', 16)\n      .attr('height', 20)\n      .attr('y', -16)\n      .attr('x', -2)\n      .attr('rx', 2)\n      .attr(\n        'cursor',\n        this.isSequenceEditModeTurnedOn || this.isSingleEmptyNode\n          ? 'text'\n          : 'default',\n      );\n\n    backgroundElement?.attr('fill', 'transparent');\n\n    return backgroundElement;\n  }\n\n  private appendSpacerElement() {\n    const spacerGroupElement = this.rootElement\n      ?.append('g')\n      .attr('transform', 'translate(14, -16)');\n\n    spacerGroupElement\n      ?.append('rect')\n      .attr('width', 4)\n      .attr('height', 20)\n      .attr(\n        'cursor',\n        this.isSequenceEditInRnaBuilderModeTurnedOn ? 'default' : 'text',\n      )\n      .attr('fill', 'transparent');\n\n    return spacerGroupElement;\n  }\n\n  private get nthSeparationInRow() {\n    return 10;\n  }\n\n  private get symbolsInRow() {\n    return 30;\n  }\n\n  private appendCounterElement(\n    rootElement: D3SvgElementSelection<SVGGElement, void>,\n  ) {\n    return rootElement\n      .append('text')\n      .attr('x', '2')\n      .attr('y', '-24')\n      .text(this.monomerIndexInChain + 1)\n      .attr('font-family', 'Courier New')\n      .attr('font-size', '12px')\n      .attr('font-weight', '700')\n      .attr('style', 'user-select: none')\n      .attr('fill', '#7C7C7F');\n  }\n\n  private get needDisplayCounter() {\n    return (\n      ((this.monomerIndexInChain + 1) % this.nthSeparationInRow === 0 ||\n        this.isLastMonomerInChain) &&\n      !(this.node instanceof EmptySequenceNode)\n    );\n  }\n\n  private get isBeginningOfChain() {\n    return this.monomerIndexInChain === 0;\n  }\n\n  public showCaret() {\n    this.caretElement = this.spacerElement\n      ?.append('line')\n      .attr('x1', -17)\n      .attr('y1', -1)\n      .attr('x2', -17)\n      .attr('y2', 21)\n      .attr('stroke', '#333')\n      .attr('class', 'blinking');\n  }\n\n  public removeCaret() {\n    this.caretElement?.remove();\n    this.caretElement = undefined;\n  }\n\n  protected redrawBackgroundElementColor() {\n    this.backgroundElement?.attr(\n      'fill',\n      this.isSequenceEditModeTurnedOn || this.isSingleEmptyNode\n        ? '#FF7A001A'\n        : 'transparent',\n    );\n  }\n\n  private appendChainStartArrow() {\n    this.rootElement\n      ?.append('use')\n      .attr('x', -17)\n      .attr('y', -27)\n      .attr('href', `#${CHAIN_START_ARROW_SYMBOL_ID}`);\n  }\n\n  private drawGreyOverlay() {\n    this.rootElement?.attr('opacity', '0.2');\n  }\n\n  show(): void {\n    this.rootElement = this.appendRootElement();\n    if (\n      (this.isBeginningOfChain && this.isSequenceEditModeTurnedOn) ||\n      this.isSingleEmptyNode\n    ) {\n      this.appendChainStartArrow();\n    }\n    this.spacerElement = this.appendSpacerElement();\n    this.backgroundElement = this.appendBackgroundElement();\n\n    if (\n      (this.isSequenceEditModeTurnedOn && this.isEditingSymbol) ||\n      this.isSingleEmptyNode\n    ) {\n      this.showCaret();\n    }\n\n    this.textElement = this.rootElement\n      .append('text')\n      .text(this.symbolToDisplay)\n      .attr('font-family', 'Courier New')\n      .attr('font-size', '20px')\n      .attr('font-weight', '700')\n      .attr(\n        'fill',\n        this.isSequenceEditInRnaBuilderModeTurnedOn ? '24545A' : '#333333',\n      )\n      .attr('style', 'user-select: none;')\n      .attr(\n        'cursor',\n        this.isSequenceEditModeTurnedOn || this.isSingleEmptyNode\n          ? 'text'\n          : 'default',\n      );\n\n    this.appendEvents();\n    if (this.needDisplayCounter) {\n      this.counterElement = this.appendCounterElement(this.rootElement);\n    }\n\n    this.drawSelection();\n\n    if (\n      this.isSequenceEditInRnaBuilderModeTurnedOn &&\n      !this.node.monomer.selected\n    ) {\n      this.drawGreyOverlay();\n    }\n  }\n\n  drawSelection(): void {\n    if (!this.rootElement) {\n      return;\n    }\n    if (this.node.monomer.selected && !this.isSingleEmptyNode) {\n      this.appendSelection();\n      this.raiseElement();\n    } else {\n      this.removeSelection();\n    }\n\n    if (this.node.modified) {\n      this.drawModification();\n    }\n  }\n\n  public appendSelection() {\n    this.selectionRectangle =\n      this.selectionRectangle ||\n      this.rootElement?.insert('rect', ':first-child');\n\n    if (this.isSequenceEditInRnaBuilderModeTurnedOn) {\n      this.selectionRectangle\n        ?.attr('fill', '#99D6DC')\n        .attr('x', -3)\n        .attr('y', -21)\n        .attr('width', 18)\n        .attr('height', 30)\n        .attr('rx', 3)\n        .attr('class', 'dynamic-element');\n    } else {\n      this.selectionRectangle\n        ?.attr('fill', '#57FF8F')\n        .attr('x', -4)\n        .attr('y', -16)\n        .attr('width', 20)\n        .attr('height', 20)\n        .attr('class', 'dynamic-element');\n    }\n    this.backgroundElement?.attr('fill', 'none');\n  }\n\n  public removeSelection() {\n    this.selectionRectangle?.remove();\n    this.selectionRectangle = undefined;\n  }\n\n  private raiseElement() {\n    this.selectionRectangle?.lower();\n  }\n\n  public remove() {\n    this.rootElement?.remove();\n    this.rootElement = undefined;\n    this.removeSelection();\n  }\n\n  public setEnumeration() {}\n  public redrawEnumeration() {}\n  public redrawAttachmentPoints() {}\n  public redrawAttachmentPointsCoordinates() {}\n  public get enumeration() {\n    return null;\n  }\n\n  public redrawChainBeginning() {}\n  public hoverAttachmentPoint(): void {}\n  public updateAttachmentPoints() {}\n\n  private drawBackgroundElementHover() {\n    if (this.isSequenceEditModeTurnedOn || this.isSingleEmptyNode) {\n      return;\n    }\n\n    this.backgroundElement?.attr(\n      'fill',\n      this.node.monomer.selected ? 'none' : '#E1E8E9',\n    );\n\n    if (this.node.modified) {\n      this.drawModification();\n    }\n  }\n\n  private removeBackgroundElementHover() {\n    this.backgroundElement?.attr('fill', 'none');\n\n    if (this.node.modified) {\n      this.drawModification();\n    }\n  }\n\n  private appendEvents() {\n    assert(this.textElement);\n\n    this.textElement.on('mouseover', (event) => {\n      this.drawBackgroundElementHover();\n      this.editorEvents.mouseOverSequenceItem.dispatch(event);\n    });\n    this.textElement.on('mousemove', (event) => {\n      this.editorEvents.mouseOnMoveSequenceItem.dispatch(event);\n    });\n    this.textElement.on('mouseleave', (event) => {\n      this.removeBackgroundElementHover();\n      this.editorEvents.mouseLeaveSequenceItem.dispatch(event);\n    });\n    this.spacerElement?.on('mousedown', (event) => {\n      this.editorEvents.mousedownBetweenSequenceItems.dispatch(event);\n    });\n    this.backgroundElement?.on('click', (event) => {\n      this.editorEvents.clickOnSequenceItem.dispatch(event);\n    });\n    this.backgroundElement?.on('mousedown', (event) => {\n      this.editorEvents.mouseDownOnSequenceItem.dispatch(event);\n    });\n    this.backgroundElement?.on('dblclick', (event) => {\n      this.editorEvents.doubleClickOnSequenceItem.dispatch(event);\n    });\n    this.textElement.on('dblclick', (event) => {\n      this.editorEvents.doubleClickOnSequenceItem.dispatch(event);\n    });\n    this.backgroundElement?.on('mouseover', () => {\n      this.drawBackgroundElementHover();\n    });\n    this.backgroundElement?.on('mouseleave', () => {\n      this.removeBackgroundElementHover();\n    });\n  }\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\n\nexport class AmbiguousSequenceItemRenderer extends BaseSequenceItemRenderer {\n  get symbolToDisplay(): string {\n    return this.node.monomer.label;\n  }\n\n  protected drawModification() {}\n}\n","import {\n  Chem,\n  Peptide,\n  Phosphate,\n  Vec2,\n  Nucleotide,\n  Nucleoside,\n  EmptySequenceNode,\n  LinkerSequenceNode,\n  UnresolvedMonomer,\n  UnsplitNucleotide,\n} from 'domain/entities';\nimport {\n  PeptideSequenceItemRenderer,\n  ChemSequenceItemRenderer,\n  PhosphateSequenceItemRenderer,\n  NucleotideSequenceItemRenderer,\n  EmptySequenceItemRenderer,\n  BaseMonomerRenderer,\n  BaseSequenceItemRenderer,\n  NucleosideSequenceItemRenderer,\n  UnresolvedMonomerSequenceItemRenderer,\n  UnsplitNucleotideSequenceItemRenderer,\n} from 'application/render';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\nimport { AmbiguousMonomerSequenceNode } from 'domain/entities/AmbiguousMonomerSequenceNode';\nimport { AmbiguousSequenceItemRenderer } from 'application/render/renderers/sequence/AmbiguousSequenceItemRenderer';\n\nexport class SequenceNodeRendererFactory {\n  static fromNode(\n    node: SubChainNode,\n    firstMonomerInChainPosition: Vec2,\n    monomerIndexInChain: number,\n    isLastMonomerInChain: boolean,\n    subChain: BaseSubChain,\n    isEditingSymbol: boolean,\n    renderer?: BaseMonomerRenderer | BaseSequenceItemRenderer,\n  ) {\n    let RendererClass;\n\n    switch (node.constructor) {\n      case Nucleotide:\n        RendererClass = NucleotideSequenceItemRenderer;\n        break;\n      case Nucleoside:\n        RendererClass = NucleosideSequenceItemRenderer;\n        break;\n      case EmptySequenceNode:\n        RendererClass = EmptySequenceItemRenderer;\n        break;\n      case LinkerSequenceNode:\n        RendererClass = ChemSequenceItemRenderer;\n        break;\n      case AmbiguousMonomerSequenceNode:\n        RendererClass = AmbiguousSequenceItemRenderer;\n        break;\n      default:\n        switch (node.monomer.constructor) {\n          case Phosphate:\n            RendererClass = PhosphateSequenceItemRenderer;\n            break;\n          case Peptide:\n            RendererClass = PeptideSequenceItemRenderer;\n            break;\n          case Chem:\n            RendererClass = ChemSequenceItemRenderer;\n            break;\n          case UnresolvedMonomer:\n            RendererClass = UnresolvedMonomerSequenceItemRenderer;\n            break;\n          case UnsplitNucleotide:\n            RendererClass = UnsplitNucleotideSequenceItemRenderer;\n            break;\n          default:\n            RendererClass = ChemSequenceItemRenderer;\n            break;\n        }\n    }\n\n    return new RendererClass(\n      node,\n      firstMonomerInChainPosition,\n      monomerIndexInChain,\n      isLastMonomerInChain,\n      subChain,\n      isEditingSymbol,\n      renderer?.monomerSize,\n      renderer?.scaledMonomerPosition,\n    );\n  }\n}\n","import { PolymerBond } from 'domain/entities/PolymerBond';\nimport assert from 'assert';\nimport { BaseSequenceRenderer } from 'application/render/renderers/sequence/BaseSequenceRenderer';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { SubChainNode, Vec2 } from 'domain/entities';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\n\nexport class PolymerBondSequenceRenderer extends BaseSequenceRenderer {\n  private selectionElement:\n    | D3SvgElementSelection<SVGPathElement, void>\n    | undefined;\n\n  constructor(\n    public polymerBond: PolymerBond,\n    private firstNode?: SubChainNode,\n    private secondNode?: SubChainNode,\n  ) {\n    super(polymerBond);\n  }\n\n  private get isHydrogenBond() {\n    return this.polymerBond instanceof HydrogenBond;\n  }\n\n  private get firstMonomer() {\n    return this.firstNode?.monomer || this.polymerBond.firstMonomer;\n  }\n\n  private get secondMonomer() {\n    return this.secondNode?.monomer || this.polymerBond.secondMonomer;\n  }\n\n  private get areMonomersOnSameRow() {\n    assert(this.firstMonomer.renderer instanceof BaseSequenceItemRenderer);\n    assert(this.secondMonomer?.renderer instanceof BaseSequenceItemRenderer);\n\n    return (\n      this.firstMonomer.renderer?.scaledMonomerPositionForSequence.y ===\n      this.secondMonomer?.renderer?.scaledMonomerPositionForSequence.y\n    );\n  }\n\n  public get scaledPosition() {\n    assert(this.firstMonomer.renderer instanceof BaseSequenceItemRenderer);\n    assert(this.secondMonomer?.renderer instanceof BaseSequenceItemRenderer);\n    const firstMonomerY =\n      this.firstMonomer.renderer.scaledMonomerPositionForSequence.y;\n    const firstMonomerX =\n      this.firstMonomer.renderer.scaledMonomerPositionForSequence.x;\n    const secondMonomerY =\n      this.secondMonomer.renderer.scaledMonomerPositionForSequence.y;\n    const secondMonomerX =\n      this.secondMonomer.renderer.scaledMonomerPositionForSequence.x;\n\n    return {\n      startPosition: new Vec2(firstMonomerX, firstMonomerY),\n      endPosition: new Vec2(secondMonomerX, secondMonomerY),\n    };\n  }\n\n  public get center() {\n    return Vec2.centre(\n      new Vec2(\n        this.scaledPosition.startPosition.x + 6,\n        this.mainLineY.mainLineY1,\n      ),\n      new Vec2(\n        this.scaledPosition.startPosition.x + 6,\n        this.mainLineY.mainLineY2,\n      ),\n    );\n  }\n\n  private get mainLineY() {\n    const mainLineY1 =\n      this.scaledPosition.startPosition.y -\n      (this.scaledPosition.startPosition.y > this.scaledPosition.endPosition.y\n        ? 15\n        : -3) +\n      (this.areMonomersOnSameRow ? -25 : 0);\n\n    const mainLineY2 =\n      this.scaledPosition.endPosition.y -\n      (this.scaledPosition.endPosition.y > this.scaledPosition.startPosition.y\n        ? 15\n        : -3) +\n      (this.areMonomersOnSameRow ? -25 : 0);\n    return { mainLineY1, mainLineY2 };\n  }\n\n  public show() {\n    this.rootElement = this.canvas\n      .insert('g', `:first-child`)\n      .data([this]) as never as D3SvgElementSelection<SVGGElement, void>;\n\n    this.rootElement\n      ?.append('path')\n      .attr('stroke', 'black')\n      .attr('fill', 'none')\n      .attr('d', this.getBondPath())\n      .attr('stroke-dasharray', this.isHydrogenBond ? '2' : '0');\n  }\n\n  public drawSelection() {\n    assert(this.rootElement);\n    if (this.polymerBond.selected) {\n      this.selectionElement?.remove();\n      this.selectionElement = this.rootElement\n        ?.insert('path', ':first-child')\n        .attr('stroke', '#57FF8F')\n        .attr('stroke-width', '6')\n        .attr('fill', 'none');\n\n      this.selectionElement.attr('d', this.getBondPath());\n    } else {\n      this.selectionElement?.remove();\n    }\n  }\n\n  private getBondPath() {\n    let path = '';\n    if (this.areMonomersOnSameRow) {\n      path = `M ${this.scaledPosition.startPosition.x + 6},\n      ${this.mainLineY.mainLineY1 + 5} \n      L ${this.scaledPosition.startPosition.x + 6}, ${\n        this.mainLineY.mainLineY1\n      } \n      L ${this.scaledPosition.endPosition.x + 6}, ${this.mainLineY.mainLineY2}\n      L ${this.scaledPosition.endPosition.x + 6}, ${\n        this.mainLineY.mainLineY2 + 5\n      }`;\n    } else {\n      path = `M ${this.scaledPosition.startPosition.x + 6}, ${\n        this.mainLineY.mainLineY1\n      } L ${this.scaledPosition.endPosition.x + 6}, ${\n        this.mainLineY.mainLineY2\n      }`;\n    }\n    return path;\n  }\n\n  public moveStart(): void {}\n\n  public moveEnd(): void {}\n\n  public get isSnake(): false {\n    return false;\n  }\n\n  public isMonomersOnSameHorizontalLine(): false {\n    return false;\n  }\n}\n","import { CoreEditor } from 'application/editor/internal';\nimport { AmbiguousMonomer, SequenceType } from 'domain/entities';\nimport { RNA_DNA_NON_MODIFIED_PART } from 'domain/constants/monomers';\nimport { MONOMER_CONST } from 'application/editor';\nimport { isAmbiguousMonomerLibraryItem } from 'domain/helpers/monomers';\nimport { KetMonomerClass } from 'application/formatters';\n\nexport function getRnaPartLibraryItem(\n  editor: CoreEditor,\n  rnaBaseName: string,\n  monomerClass?: KetMonomerClass,\n) {\n  return editor.monomersLibrary.find((libraryItem) =>\n    isAmbiguousMonomerLibraryItem(libraryItem)\n      ? (!monomerClass ||\n          AmbiguousMonomer.getMonomerClass(libraryItem.monomers) ===\n            monomerClass) &&\n        libraryItem.label === rnaBaseName\n      : (!monomerClass || libraryItem.props.MonomerClass === monomerClass) &&\n        libraryItem.props.MonomerName === rnaBaseName,\n  );\n}\n\nexport function getPeptideLibraryItem(editor: CoreEditor, peptideName: string) {\n  return editor.monomersLibrary.find(\n    (libraryItem) =>\n      libraryItem.props.MonomerType === MONOMER_CONST.PEPTIDE &&\n      libraryItem.props.MonomerName === peptideName,\n  );\n}\n\nexport function getSugarBySequenceType(sequenceType: SequenceType) {\n  switch (sequenceType) {\n    case SequenceType.DNA:\n      return RNA_DNA_NON_MODIFIED_PART.SUGAR_DNA;\n    case SequenceType.RNA:\n      return RNA_DNA_NON_MODIFIED_PART.SUGAR_RNA;\n    default:\n      return undefined;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { Tool, IRnaPreset } from 'application/editor/tools/Tool';\nimport { Sugar } from 'domain/entities/Sugar';\nimport { Vec2 } from 'domain/entities';\n\nimport { CoreEditor, EditorHistory } from 'application/editor/internal';\nimport { BaseMonomerRenderer } from 'application/render/renderers';\nimport { MonomerItemType } from 'domain/types';\nimport { monomerFactory } from '../operations/monomer/monomerFactory';\nimport { RNABase } from 'domain/entities/RNABase';\nimport { Phosphate } from 'domain/entities/Phosphate';\nimport { Coordinates } from '../shared/coordinates';\n\nexport const RNA_MONOMER_DISTANCE = 22.5;\nclass RnaPresetTool implements Tool {\n  rnaBase: MonomerItemType | undefined;\n  sugar: MonomerItemType | undefined;\n  phosphate: MonomerItemType | undefined;\n\n  private rnaBasePreview: RNABase | undefined;\n  private phosphatePreview: Phosphate | undefined;\n  private sugarPreview: Sugar | undefined;\n  private rnaBasePreviewRenderer: BaseMonomerRenderer | undefined;\n  private phosphatePreviewRenderer: BaseMonomerRenderer | undefined;\n  private sugarPreviewRenderer: BaseMonomerRenderer | undefined;\n  readonly MONOMER_PREVIEW_SCALE_FACTOR = 0.5;\n  readonly MONOMER_PREVIEW_OFFSET_X = 30;\n  readonly MONOMER_PREVIEW_OFFSET_Y = 30;\n  readonly RNA_BASE_PREVIEW_OFFSET_X = 1;\n  readonly RNA_BASE_PREVIEW_OFFSET_Y = 20;\n  readonly PHOSPHATE_PREVIEW_OFFSET_X = 18;\n  history: EditorHistory;\n\n  constructor(private editor: CoreEditor, preset: IRnaPreset) {\n    this.editor = editor;\n    if (preset?.base) {\n      this.rnaBase = preset?.base;\n    }\n    if (preset?.phosphate) {\n      this.phosphate = preset?.phosphate;\n    }\n    if (preset?.sugar) {\n      this.sugar = preset?.sugar;\n    }\n    this.history = new EditorHistory(this.editor);\n  }\n\n  mousedown() {\n    if (!this.sugar || !this.sugarPreviewRenderer) {\n      this.editor.events.error.dispatch('No sugar in RNA preset found');\n      return;\n    }\n\n    const { command: modelChanges } =\n      this.editor.drawingEntitiesManager.addRnaPreset({\n        sugar: this.sugar,\n        sugarPosition: Coordinates.canvasToModel(\n          new Vec2(\n            this.editor.lastCursorPositionOfCanvas.x,\n            this.editor.lastCursorPositionOfCanvas.y,\n          ),\n        ),\n        phosphate: this.phosphate,\n        phosphatePosition: this.phosphatePreviewRenderer\n          ? Coordinates.canvasToModel(\n              new Vec2(\n                this.editor.lastCursorPositionOfCanvas.x +\n                  this.sugarPreviewRenderer?.width +\n                  RNA_MONOMER_DISTANCE,\n                this.editor.lastCursorPositionOfCanvas.y,\n              ),\n            )\n          : undefined,\n        rnaBase: this.rnaBase,\n        rnaBasePosition: this.rnaBasePreviewRenderer\n          ? Coordinates.canvasToModel(\n              new Vec2(\n                this.editor.lastCursorPositionOfCanvas.x,\n                this.editor.lastCursorPositionOfCanvas.y +\n                  this.sugarPreviewRenderer.height +\n                  RNA_MONOMER_DISTANCE,\n              ),\n            )\n          : undefined,\n      });\n\n    this.history.update(modelChanges);\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  mousemove() {\n    this.sugarPreview?.moveAbsolute(\n      Coordinates.canvasToModel(\n        new Vec2(\n          this.editor.lastCursorPosition.x + this.MONOMER_PREVIEW_OFFSET_X,\n          this.editor.lastCursorPosition.y + this.MONOMER_PREVIEW_OFFSET_Y,\n        ),\n      ),\n    );\n\n    this.rnaBasePreview?.moveAbsolute(\n      Coordinates.canvasToModel(\n        new Vec2(\n          this.editor.lastCursorPosition.x +\n            this.MONOMER_PREVIEW_OFFSET_X +\n            this.RNA_BASE_PREVIEW_OFFSET_X,\n          this.editor.lastCursorPosition.y +\n            this.MONOMER_PREVIEW_OFFSET_Y +\n            this.RNA_BASE_PREVIEW_OFFSET_Y,\n        ),\n      ),\n    );\n\n    this.phosphatePreview?.moveAbsolute(\n      Coordinates.canvasToModel(\n        new Vec2(\n          this.editor.lastCursorPosition.x +\n            this.MONOMER_PREVIEW_OFFSET_X +\n            this.PHOSPHATE_PREVIEW_OFFSET_X,\n          this.editor.lastCursorPosition.y + this.MONOMER_PREVIEW_OFFSET_Y,\n        ),\n      ),\n    );\n\n    this.rnaBasePreviewRenderer?.move();\n    this.phosphatePreviewRenderer?.move();\n    this.sugarPreviewRenderer?.move();\n  }\n\n  public mouseLeaveClientArea() {\n    this.sugarPreviewRenderer?.remove();\n    this.sugarPreviewRenderer = undefined;\n    this.sugarPreview = undefined;\n    this.phosphatePreviewRenderer?.remove();\n    this.phosphatePreviewRenderer = undefined;\n    this.phosphatePreview = undefined;\n    this.rnaBasePreviewRenderer?.remove();\n    this.rnaBasePreviewRenderer = undefined;\n    this.rnaBasePreview = undefined;\n  }\n\n  public mouseover() {\n    if (!this.sugar) {\n      this.editor.events.error.dispatch('No sugar in RNA preset found');\n      return;\n    }\n\n    if (this.sugarPreview) {\n      return;\n    }\n\n    const [Sugar, SugarRenderer] = monomerFactory(this.sugar);\n    this.sugarPreview = new Sugar(this.sugar) as Sugar;\n\n    this.sugarPreviewRenderer = new SugarRenderer(\n      this.sugarPreview,\n      this.MONOMER_PREVIEW_SCALE_FACTOR,\n    );\n\n    this.sugarPreviewRenderer?.show(this.editor.theme);\n\n    if (this.rnaBase) {\n      const [RNABase, RNABaseRenderer] = monomerFactory(this.rnaBase);\n      this.rnaBasePreview = new RNABase(this.rnaBase) as RNABase;\n      this.rnaBasePreviewRenderer = new RNABaseRenderer(\n        this.rnaBasePreview,\n        this.MONOMER_PREVIEW_SCALE_FACTOR,\n      );\n\n      this.rnaBasePreviewRenderer?.show(this.editor.theme);\n    }\n\n    if (this.phosphate) {\n      const [Phosphate, PhosphateRenderer] = monomerFactory(this.phosphate);\n\n      this.phosphatePreview = new Phosphate(this.phosphate) as Phosphate;\n\n      this.phosphatePreviewRenderer = new PhosphateRenderer(\n        this.phosphatePreview,\n        this.MONOMER_PREVIEW_SCALE_FACTOR,\n      );\n\n      this.phosphatePreviewRenderer?.show(this.editor.theme);\n    }\n  }\n\n  hidePreview() {\n    this.rnaBasePreviewRenderer?.remove();\n    this.phosphatePreviewRenderer?.remove();\n    this.sugarPreviewRenderer?.remove();\n  }\n\n  destroy(): void {\n    this.hidePreview();\n  }\n}\n\nexport { RnaPresetTool };\n","import { RNABase } from 'domain/entities/RNABase';\nimport { Sugar } from 'domain/entities/Sugar';\nimport assert from 'assert';\nimport {\n  getNextMonomerInChain,\n  getRnaBaseFromSugar,\n  isValidNucleoside,\n  isValidNucleotide,\n} from 'domain/helpers/monomers';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { Coordinates, CoreEditor } from 'application/editor/internal';\nimport { AttachmentPointName } from 'domain/types';\nimport { Command } from 'domain/entities/Command';\nimport { getRnaPartLibraryItem } from 'domain/helpers/rna';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\nimport { RNA_MONOMER_DISTANCE } from 'application/editor/tools/RnaPreset';\nimport { SugarRenderer } from 'application/render';\nimport { RNA_DNA_NON_MODIFIED_PART } from 'domain/constants/monomers';\nimport { KetMonomerClass } from 'application/formatters';\n\nexport class Nucleoside {\n  constructor(\n    public sugar: Sugar,\n    public rnaBase: RNABase | AmbiguousMonomer,\n  ) {}\n\n  static fromSugar(sugar: Sugar, needValidation = true) {\n    if (needValidation) {\n      assert(\n        isValidNucleoside(sugar),\n        'Created nucleoside is not valid. Please check nucleotide parts connections.',\n      );\n\n      const isNucleotide = isValidNucleotide(sugar);\n      assert(!isNucleotide, 'Created nucleoside is nucleotide.');\n    }\n\n    return new Nucleoside(sugar, getRnaBaseFromSugar(sugar) as RNABase);\n  }\n\n  static createOnCanvas(\n    rnaBaseName: string,\n    position: Vec2,\n    sugarName: RNA_DNA_NON_MODIFIED_PART = RNA_DNA_NON_MODIFIED_PART.SUGAR_RNA,\n    isAntisense = false,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const rnaBaseLibraryItem = getRnaPartLibraryItem(\n      editor,\n      rnaBaseName,\n      KetMonomerClass.Base,\n    );\n    const sugarLibraryItem = getRnaPartLibraryItem(\n      editor,\n      sugarName,\n      KetMonomerClass.Sugar,\n    );\n\n    assert(sugarLibraryItem);\n    assert(rnaBaseLibraryItem);\n\n    const topLeftItemPosition = position;\n    const bottomItemPosition = position.add(\n      Coordinates.canvasToModel(\n        new Vec2(0, RNA_MONOMER_DISTANCE + SugarRenderer.monomerSize.height),\n      ),\n    );\n    const modelChanges = new Command();\n\n    modelChanges.merge(\n      editor.drawingEntitiesManager.addMonomer(\n        { ...sugarLibraryItem, isAntisense },\n        isAntisense ? bottomItemPosition : topLeftItemPosition,\n      ),\n    );\n    modelChanges.merge(\n      editor.drawingEntitiesManager.addMonomer(\n        { ...rnaBaseLibraryItem, isAntisense },\n        isAntisense ? topLeftItemPosition : bottomItemPosition,\n      ),\n    );\n\n    const sugar = modelChanges.operations[0].monomer as Sugar;\n    const rnaBase = modelChanges.operations[1].monomer as RNABase;\n\n    modelChanges.merge(\n      editor.drawingEntitiesManager.createPolymerBond(\n        sugar,\n        rnaBase,\n        AttachmentPointName.R3,\n        AttachmentPointName.R1,\n      ),\n    );\n\n    return { modelChanges, node: Nucleoside.fromSugar(sugar, false) };\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return this.sugar.isMonomerTypeDifferentForChaining(monomerToChain);\n  }\n\n  public get SubChainConstructor() {\n    return this.sugar.SubChainConstructor;\n  }\n\n  public get monomer() {\n    return this.sugar;\n  }\n\n  public get monomers(): BaseMonomer[] {\n    return [this.sugar, this.rnaBase];\n  }\n\n  public get firstMonomerInNode() {\n    return this.sugar;\n  }\n\n  public get lastMonomerInNode() {\n    return this.sugar;\n  }\n\n  public get renderer() {\n    return this.monomer.renderer;\n  }\n\n  public get modified() {\n    // TODO move isNotLastNode to separate getter because it is not modification\n    //  It was added here because it needs to show similar icon as for phosphates modifications\n    const isNotLastNode = !!getNextMonomerInChain(this.sugar);\n\n    return (\n      this.rnaBase.isModification || this.sugar.isModification || isNotLastNode\n    );\n  }\n}\n","import { BaseSequenceRenderer } from 'application/render/renderers/sequence/BaseSequenceRenderer';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\n\nexport class BackBoneBondSequenceRenderer extends BaseSequenceRenderer {\n  constructor(polymerBond: PolymerBond) {\n    super(polymerBond);\n  }\n\n  public get isSnake(): false {\n    return false;\n  }\n\n  public isMonomersOnSameHorizontalLine(): false {\n    return false;\n  }\n\n  public moveStart(): void {}\n\n  public moveEnd(): void {}\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { Operation } from 'domain/entities/Operation';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { HydrogenBond } from 'domain/entities';\n\nexport class PolymerBondAddOperation implements Operation {\n  public polymerBond;\n  public priority = 1;\n  constructor(\n    private addPolymerBondChangeModel: (\n      polymerBond?: PolymerBond | HydrogenBond,\n    ) => PolymerBond | HydrogenBond,\n    private deletePolymerBondChangeModel: (polymerBond) => void,\n  ) {\n    this.polymerBond = this.addPolymerBondChangeModel();\n  }\n\n  public execute(renderersManager: RenderersManager) {\n    this.polymerBond = this.addPolymerBondChangeModel(this.polymerBond);\n    renderersManager.addPolymerBond(this.polymerBond);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.deletePolymerBondChangeModel(this.polymerBond);\n    renderersManager.deletePolymerBond(this.polymerBond);\n  }\n}\n\nexport class PolymerBondDeleteOperation implements Operation {\n  public priority = -1;\n  constructor(\n    public polymerBond: PolymerBond | HydrogenBond,\n    private deletePolymerBondChangeModel: () => void,\n    private finishPolymerBondCreationModelChange: (\n      polymerBond?: PolymerBond | HydrogenBond,\n    ) => PolymerBond | HydrogenBond,\n  ) {\n    this.deletePolymerBondChangeModel();\n  }\n\n  public execute(renderersManager: RenderersManager) {\n    this.deletePolymerBondChangeModel();\n    renderersManager.deletePolymerBond(this.polymerBond);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.polymerBond = this.finishPolymerBondCreationModelChange(\n      this.polymerBond,\n    );\n    renderersManager.addPolymerBond(this.polymerBond);\n  }\n}\n\nexport class PolymerBondMoveOperation implements Operation {\n  constructor(public polymerBond: PolymerBond) {}\n\n  public execute(renderersManager: RenderersManager) {\n    renderersManager.movePolymerBond(this.polymerBond);\n  }\n\n  public invert() {}\n}\n\nexport class PolymerBondShowInfoOperation implements Operation {\n  constructor(public polymerBond: PolymerBond) {}\n\n  public execute(renderersManager: RenderersManager) {\n    renderersManager.showPolymerBondInformation(this.polymerBond);\n  }\n\n  public invert() {}\n}\n\nexport class PolymerBondCancelCreationOperation implements Operation {\n  constructor(\n    public polymerBond: PolymerBond,\n    private secondMonomer?: BaseMonomer,\n  ) {}\n\n  public execute(renderersManager: RenderersManager) {\n    renderersManager.cancelPolymerBondCreation(\n      this.polymerBond,\n      this.secondMonomer,\n    );\n  }\n\n  public invert() {}\n}\n\nexport class PolymerBondFinishCreationOperation implements Operation {\n  public polymerBond;\n  public priority = 1;\n  constructor(\n    private finishPolymerBondCreationModelChange: (\n      polymerBond?: PolymerBond,\n    ) => PolymerBond,\n    private deletePolymerBondCreationModelChange: (polymerBond) => void,\n  ) {\n    this.polymerBond = this.finishPolymerBondCreationModelChange();\n  }\n\n  public execute(renderersManager: RenderersManager) {\n    this.polymerBond = this.finishPolymerBondCreationModelChange(\n      this.polymerBond,\n    );\n    renderersManager.finishPolymerBondCreation(this.polymerBond);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.deletePolymerBondCreationModelChange(this.polymerBond);\n    renderersManager.deletePolymerBond(this.polymerBond);\n  }\n}\n\nexport class SelectLayoutModeOperation implements Operation {\n  private onExecute;\n  private onInvert;\n\n  constructor(\n    public _onExecute: () => void,\n    public _onInvert: () => void,\n    public mode,\n    public prevMode,\n  ) {\n    this.onExecute = _onExecute;\n    this.onInvert = _onInvert;\n  }\n\n  public execute(): void {\n    this.onExecute();\n  }\n\n  public invert(): void {\n    this.onInvert();\n  }\n}\n\nexport class ReconnectPolymerBondOperation implements Operation {\n  public polymerBond;\n  constructor(\n    private reconnectPolymerBondModelChange: () => PolymerBond,\n    private revertReconnectPolymerBondModelChange: () => PolymerBond,\n  ) {}\n\n  public execute(renderersManager: RenderersManager) {\n    this.polymerBond = this.reconnectPolymerBondModelChange();\n    renderersManager.redrawDrawingEntity(this.polymerBond, false, true);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.polymerBond = this.revertReconnectPolymerBondModelChange();\n    renderersManager.redrawDrawingEntity(this.polymerBond, false, true);\n  }\n}\n","import { Struct } from 'domain/entities';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport {\n  FormatterFactory,\n  SupportedFormat,\n  identifyStructFormat,\n} from './formatters';\nimport { Ketcher } from './ketcher';\nimport { ChemicalMimeType, StructService } from 'domain/services';\nimport { CoreEditor, EditorHistory } from './editor/internal';\nimport { KetSerializer } from 'domain/serializers';\nimport assert from 'assert';\nimport { EditorSelection } from './editor/editor.types';\n\nclass KetcherProvider {\n  private ketcherInstance: Ketcher | undefined;\n\n  setKetcherInstance(ketcherInstance: Ketcher) {\n    this.ketcherInstance = ketcherInstance;\n  }\n\n  getKetcher() {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return this.ketcherInstance!;\n  }\n}\n\nconst ketcherProvider = new KetcherProvider();\n\nexport { ketcherProvider };\n\nexport function getStructure(\n  structureFormat = SupportedFormat.rxn,\n  formatterFactory: FormatterFactory,\n  struct: Struct,\n  drawingEntitiesManager?: DrawingEntitiesManager,\n  selection?: EditorSelection,\n): Promise<string> {\n  const serverSettings = ketcherProvider.getKetcher().editor.serverSettings;\n  const formatter = formatterFactory.create(structureFormat, serverSettings);\n\n  return formatter.getStructureFromStructAsync(\n    struct,\n    drawingEntitiesManager,\n    selection,\n  );\n}\n\nexport async function prepareStructToRender(\n  structStr: string,\n  structService: StructService,\n  ketcherInstance: Ketcher,\n): Promise<Struct> {\n  const struct: Struct = await parseStruct(\n    structStr,\n    structService,\n    ketcherInstance,\n  );\n  struct.initHalfBonds();\n  struct.initNeighbors();\n  struct.setImplicitHydrogen();\n  struct.setStereoLabelsToAtoms();\n  struct.markFragments();\n\n  return struct;\n}\n\nexport function parseStruct(\n  structStr: string,\n  structService: StructService,\n  ketcherInstance: Ketcher,\n) {\n  const format = identifyStructFormat(structStr);\n  const factory = new FormatterFactory(structService);\n  const options = ketcherInstance.editor.options();\n\n  const service = factory.create(format, {\n    'dearomatize-on-load': options['dearomatize-on-load'],\n    ignoreChiralFlag: options.ignoreChiralFlag,\n  });\n  return service.getStructureFromStringAsync(structStr);\n}\n\nexport function deleteAllEntitiesOnCanvas() {\n  const editor = CoreEditor.provideEditorInstance();\n  const modelChanges = editor.drawingEntitiesManager.deleteAllEntities();\n  editor.renderersContainer.update(modelChanges);\n}\n\nexport async function parseAndAddMacromoleculesOnCanvas(\n  struct: string,\n  structService: StructService,\n) {\n  const editor = CoreEditor.provideEditorInstance();\n  const ketSerializer = new KetSerializer();\n  const format = identifyStructFormat(struct);\n  let ketStruct = struct;\n  if (format !== SupportedFormat.ket) {\n    ketStruct = (\n      await structService.convert({\n        struct,\n        output_format: ChemicalMimeType.KET,\n      })\n    ).struct;\n  }\n\n  const deserialisedKet = ketSerializer.deserializeToDrawingEntities(ketStruct);\n  assert(deserialisedKet);\n  const { command: modelChanges } =\n    deserialisedKet.drawingEntitiesManager.mergeInto(\n      editor.drawingEntitiesManager,\n    );\n\n  new EditorHistory(editor).update(modelChanges);\n  editor.renderersContainer.update(modelChanges);\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { Operation } from 'domain/entities/Operation';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { AttachmentPointName } from 'domain/types';\n\nexport class MonomerAddOperation implements Operation {\n  public monomer: BaseMonomer;\n  public priority = 1;\n  constructor(\n    public addMonomerChangeModel: (monomer?: BaseMonomer) => BaseMonomer,\n    public deleteMonomerChangeModel: (monomer: BaseMonomer) => void,\n    private callback?: () => void,\n  ) {\n    this.monomer = this.addMonomerChangeModel();\n  }\n\n  public execute(renderersManager: RenderersManager) {\n    this.monomer = this.addMonomerChangeModel(this.monomer);\n    renderersManager.addMonomer(this.monomer, this.callback);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    if (this.monomer) {\n      this.deleteMonomerChangeModel(this.monomer);\n      renderersManager.deleteMonomer(this.monomer);\n    }\n  }\n}\n\nexport class MonomerMoveOperation implements Operation {\n  public monomer: BaseMonomer;\n  constructor(\n    private monomerMoveModelChange: () => BaseMonomer,\n    private invertMonomerMoveModelChange: () => BaseMonomer,\n  ) {\n    this.monomer = this.monomerMoveModelChange();\n  }\n\n  public execute(renderersManager: RenderersManager) {\n    this.monomer = this.monomerMoveModelChange();\n    renderersManager.moveMonomer(this.monomer);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.monomer = this.invertMonomerMoveModelChange();\n    renderersManager.moveMonomer(this.monomer);\n  }\n}\n\nexport class MonomerHoverOperation implements Operation {\n  constructor(\n    private peptide: BaseMonomer,\n    private needRedrawAttachmentPoints: boolean,\n  ) {}\n\n  public execute(renderersManager: RenderersManager) {\n    renderersManager.hoverMonomer(\n      this.peptide,\n      this.needRedrawAttachmentPoints,\n    );\n  }\n\n  public invert() {}\n}\n\nexport class AttachmentPointHoverOperation implements Operation {\n  constructor(\n    private peptide: BaseMonomer,\n    private attachmentPointName: AttachmentPointName,\n  ) {}\n\n  public execute(renderersManager: RenderersManager) {\n    renderersManager.hoverAttachmentPoint(\n      this.peptide,\n      this.attachmentPointName,\n    );\n  }\n\n  public invert() {}\n}\n\nexport class MonomerDeleteOperation implements Operation {\n  monomer: BaseMonomer;\n  public priority = -1;\n  constructor(\n    monomer: BaseMonomer,\n    public addMonomerChangeModel: (monomer: BaseMonomer) => BaseMonomer,\n    public deleteMonomerChangeModel: (monomer: BaseMonomer) => void,\n    private callback?: () => void,\n  ) {\n    this.monomer = monomer;\n  }\n\n  public execute(renderersManager: RenderersManager) {\n    this.deleteMonomerChangeModel(this.monomer);\n    renderersManager.deleteMonomer(this.monomer);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.monomer = this.addMonomerChangeModel(this.monomer);\n    renderersManager.addMonomer(this.monomer, this.callback);\n  }\n}\n\nexport class MonomerItemModifyOperation implements Operation {\n  monomer: BaseMonomer;\n  constructor(\n    monomer: BaseMonomer,\n    public updateMonomerItem: () => BaseMonomer,\n    public revertMonomerItem: () => BaseMonomer,\n  ) {\n    this.monomer = monomer;\n    this.execute();\n  }\n\n  public execute() {\n    this.monomer = this.updateMonomerItem();\n  }\n\n  public invert() {\n    this.monomer = this.revertMonomerItem();\n  }\n}\n","import { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { Operation } from 'domain/entities/Operation';\nimport { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { BaseBond } from 'domain/entities/BaseBond';\nexport class DrawingEntityHoverOperation implements Operation {\n  constructor(private drawingEntity: DrawingEntity) {}\n\n  public execute(renderersManager: RenderersManager) {\n    renderersManager.hoverDrawingEntity(this.drawingEntity);\n  }\n\n  public invert() {}\n}\n\nexport class DrawingEntitySelectOperation implements Operation {\n  constructor(private drawingEntity: DrawingEntity) {}\n\n  public execute(renderersManager: RenderersManager) {\n    renderersManager.selectDrawingEntity(this.drawingEntity);\n  }\n\n  public invert() {}\n}\nexport class DrawingEntityMoveOperation implements Operation {\n  private wasInverted = false;\n  constructor(\n    private moveDrawingEntityChangeModel: () => void,\n    private invertMoveDrawingEntityChangeModel: () => void,\n    private redoDrawingEntityChangeModel: () => void,\n    private drawingEntity: DrawingEntity,\n  ) {}\n\n  public execute() {\n    this.wasInverted\n      ? this.redoDrawingEntityChangeModel()\n      : this.moveDrawingEntityChangeModel();\n  }\n\n  public invert() {\n    this.invertMoveDrawingEntityChangeModel();\n    this.wasInverted = true;\n  }\n\n  public executeAfterAllOperations(renderersManager: RenderersManager) {\n    // Redraw Polymer bonds instead of moving needed here because\n    // they have two drawing modes: straight and curved.\n    // During switching snake/flex layout modes and undo/redo\n    // we need to redraw them to apply the correct drawing mode.\n    if (this.drawingEntity instanceof BaseBond) {\n      renderersManager.redrawDrawingEntity(this.drawingEntity);\n    } else {\n      renderersManager.moveDrawingEntity(this.drawingEntity);\n    }\n  }\n\n  public invertAfterAllOperations(renderersManager: RenderersManager) {\n    if (this.drawingEntity instanceof BaseBond) {\n      renderersManager.redrawDrawingEntity(this.drawingEntity);\n    } else {\n      renderersManager.moveDrawingEntity(this.drawingEntity);\n    }\n  }\n}\n\nexport class DrawingEntityRedrawOperation implements Operation {\n  constructor(\n    private drawingEntityRedrawModelChange: () => DrawingEntity,\n    private invertDrawingEntityRedrawModelChange: () => DrawingEntity,\n  ) {}\n\n  public execute(renderersManager: RenderersManager) {\n    const drawingEntity = this.drawingEntityRedrawModelChange();\n    renderersManager.redrawDrawingEntity(drawingEntity, true);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    const drawingEntity = this.invertDrawingEntityRedrawModelChange();\n    renderersManager.redrawDrawingEntity(drawingEntity, true);\n  }\n}\n","import { RNABase } from 'domain/entities/RNABase';\nimport { Phosphate } from 'domain/entities/Phosphate';\nimport { Sugar } from 'domain/entities/Sugar';\nimport assert from 'assert';\nimport {\n  getPhosphateFromSugar,\n  getRnaBaseFromSugar,\n  isValidNucleoside,\n  isValidNucleotide,\n} from 'domain/helpers/monomers';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { Coordinates, CoreEditor } from 'application/editor/internal';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { getRnaPartLibraryItem } from 'domain/helpers/rna';\nimport { RNA_DNA_NON_MODIFIED_PART } from 'domain/constants/monomers';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\nimport { RNA_MONOMER_DISTANCE } from 'application/editor/tools/RnaPreset';\nimport { SugarRenderer } from 'application/render';\nimport { SNAKE_LAYOUT_CELL_WIDTH } from 'domain/entities/DrawingEntitiesManager';\nimport { KetMonomerClass } from 'application/formatters';\n\nexport class Nucleotide {\n  constructor(\n    public sugar: Sugar,\n    public rnaBase: RNABase | AmbiguousMonomer,\n    public phosphate: Phosphate,\n  ) {}\n\n  static fromSugar(sugar: Sugar, needValidation = true) {\n    if (needValidation) {\n      assert(\n        isValidNucleotide(sugar),\n        'Nucleotide is not valid. Please check nucleotide parts connections.',\n      );\n\n      const isNucleoside = isValidNucleoside(sugar);\n      assert(\n        !isNucleoside,\n        'Nucleotide is nucleoside because it is a last sugar+base of rna chain',\n      );\n    }\n\n    return new Nucleotide(\n      sugar,\n      getRnaBaseFromSugar(sugar) as RNABase,\n      getPhosphateFromSugar(sugar) as Phosphate,\n    );\n  }\n\n  static createOnCanvas(\n    rnaBaseName: string,\n    position: Vec2,\n    sugarName: RNA_DNA_NON_MODIFIED_PART = RNA_DNA_NON_MODIFIED_PART.SUGAR_RNA,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const rnaBaseLibraryItem = getRnaPartLibraryItem(\n      editor,\n      rnaBaseName,\n      KetMonomerClass.Base,\n    );\n    const phosphateLibraryItem = getRnaPartLibraryItem(\n      editor,\n      RNA_DNA_NON_MODIFIED_PART.PHOSPHATE,\n    );\n    const sugarLibraryItem = getRnaPartLibraryItem(\n      editor,\n      sugarName,\n      KetMonomerClass.Sugar,\n    );\n\n    assert(sugarLibraryItem);\n    assert(rnaBaseLibraryItem);\n    assert(phosphateLibraryItem);\n\n    const topLeftItemPosition = position;\n    const bottomItemPosition = position.add(\n      Coordinates.canvasToModel(\n        new Vec2(0, RNA_MONOMER_DISTANCE + SugarRenderer.monomerSize.height),\n      ),\n    );\n\n    const { command: modelChanges, monomers } =\n      editor.drawingEntitiesManager.addRnaPreset({\n        sugar: sugarLibraryItem,\n        sugarPosition: topLeftItemPosition,\n        rnaBase: rnaBaseLibraryItem,\n        rnaBasePosition: bottomItemPosition,\n        phosphate: phosphateLibraryItem,\n        phosphatePosition: topLeftItemPosition.add(\n          Coordinates.canvasToModel(new Vec2(SNAKE_LAYOUT_CELL_WIDTH, 0)),\n        ),\n      });\n\n    const sugar = monomers.find((monomer) => monomer instanceof Sugar) as Sugar;\n\n    return { modelChanges, node: Nucleotide.fromSugar(sugar, false) };\n  }\n\n  public isMonomerTypeDifferentForChaining(monomerToChain: SubChainNode) {\n    return this.sugar.isMonomerTypeDifferentForChaining(monomerToChain);\n  }\n\n  public get SubChainConstructor() {\n    return this.sugar.SubChainConstructor;\n  }\n\n  public get monomer() {\n    return this.sugar;\n  }\n\n  public get monomers(): BaseMonomer[] {\n    return [this.sugar, this.rnaBase, this.phosphate];\n  }\n\n  public get firstMonomerInNode() {\n    return this.sugar;\n  }\n\n  public get lastMonomerInNode() {\n    return this.phosphate;\n  }\n\n  public get renderer() {\n    return this.monomer.renderer;\n  }\n\n  public get modified() {\n    return (\n      this.rnaBase.isModification ||\n      this.sugar.isModification ||\n      this.phosphate.isModification\n    );\n  }\n}\n","export class Matrix<T> {\n  private matrix: T[][];\n\n  constructor() {\n    this.matrix = [];\n  }\n\n  get(x: number, y: number): T | undefined {\n    if (!this.matrix[x]) {\n      return undefined;\n    }\n    return this.matrix[x][y];\n  }\n\n  getRow(x: number) {\n    return this.matrix[x];\n  }\n\n  set(x: number, y: number, value: T) {\n    if (!this.matrix[x]) {\n      this.matrix[x] = [];\n    }\n    this.matrix[x][y] = value;\n  }\n\n  public get height() {\n    return this.matrix.length;\n  }\n\n  public get width() {\n    return this.matrix.reduce((max, row) => Math.max(max, row.length), 0);\n  }\n\n  forEach(callback: (value: T, x: number, y: number) => void): void {\n    for (let x = 0; x < this.matrix.length; x++) {\n      for (let y = 0; y < this.matrix[x]?.length; y++) {\n        const value = this.matrix[x][y];\n        if (value) {\n          callback(value, x, y);\n        }\n      }\n    }\n  }\n\n  forEachRightToLeft(callback: (value: T, x: number, y: number) => void): void {\n    for (let x = this.matrix.length - 1; x >= 0; x--) {\n      for (let y = this.matrix[x]?.length - 1; y >= 0; y--) {\n        const value = this.matrix[x][y];\n        if (value) {\n          callback(value, x, y);\n        }\n      }\n    }\n  }\n\n  forEachBottomToTop(callback: (value: T, x: number, y: number) => void): void {\n    for (let y = this.matrix[0]?.length - 1; y >= 0; y--) {\n      for (let x = this.matrix.length - 1; x >= 0; x--) {\n        const value = this.matrix[x][y];\n        if (value) {\n          callback(value, x, y);\n        }\n      }\n    }\n  }\n}\n","import { PolymerBond } from 'domain/entities/PolymerBond';\nimport { SubChainNode } from 'domain/entities';\n\nexport type ConnectionDirectionInDegrees = 0 | 90 | 180 | 270;\nexport type ConnectionDirectionOfLastCell = {\n  readonly x: number;\n  readonly y: number;\n};\n\nexport class Connection {\n  constructor(\n    public readonly connectedNode: SubChainNode | null,\n    public readonly direction:\n      | ConnectionDirectionInDegrees\n      | ConnectionDirectionOfLastCell,\n    public readonly isVertical: boolean,\n    public readonly polymerBond: PolymerBond,\n    public xOffset: number,\n    public yOffset: number,\n  ) {}\n}\n","import { BaseMonomer, SubChainNode } from 'domain/entities';\nimport { Connection } from 'domain/entities/canvas-matrix/Connection';\n\nexport class Cell {\n  constructor(\n    public node: SubChainNode | null | undefined,\n    public connections: Connection[],\n    public x: number,\n    public y: number,\n    public monomer?: BaseMonomer,\n  ) {}\n}\n","import { BaseMonomer, MonomerToAtomBond, SubChainNode } from 'domain/entities';\nimport { ChainsCollection } from 'domain/entities/monomer-chains/ChainsCollection';\nimport { Matrix } from 'domain/entities/canvas-matrix/Matrix';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { Connection } from 'domain/entities/canvas-matrix/Connection';\nimport { Cell } from 'domain/entities/canvas-matrix/Cell';\nimport { isNumber } from 'lodash';\n\ninterface MatrixConfig {\n  initialMatrix: Matrix<Cell>;\n}\n\nexport class CanvasMatrix {\n  private matrix: Matrix<Cell>;\n  private initialMatrixWidth: number;\n  private monomerToCell: Map<BaseMonomer, Cell> = new Map();\n  public polymerBondToCells: Map<PolymerBond, Cell[]> = new Map();\n  public polymerBondToConnections: Map<PolymerBond, Connection[]> = new Map();\n\n  constructor(\n    public chainsCollection: ChainsCollection,\n    private matrixConfig: MatrixConfig = {\n      initialMatrix: new Matrix<Cell>(),\n    },\n  ) {\n    this.matrix = new Matrix<Cell>();\n    this.initialMatrixWidth = this.matrixConfig.initialMatrix.width;\n    this.fillCells();\n  }\n\n  private fillConnectionsOffset(\n    direction: number,\n    increaseOffset = (connection: Connection, increaseValue?: number) => {\n      if (isNumber(increaseValue)) {\n        connection.xOffset = increaseValue;\n      } else {\n        connection.xOffset++;\n      }\n    },\n    getOffset = (connection: Connection): number => connection.xOffset,\n  ): void {\n    // set offsets for connections with overlappings\n    const currentConnections = new Map<PolymerBond, Set<Connection>>();\n    const iterationMethod =\n      direction === 180\n        ? this.matrix.forEach.bind(this.matrix)\n        : direction === 0\n        ? this.matrix.forEachRightToLeft.bind(this.matrix)\n        : this.matrix.forEachBottomToTop.bind(this.matrix);\n\n    iterationMethod((cell) => {\n      const biggestOffsetInCell = cell.connections.reduce(\n        (biggestOffset: number, connection: Connection): number => {\n          return getOffset(connection) > biggestOffset\n            ? getOffset(connection)\n            : biggestOffset;\n        },\n        0,\n      );\n      cell.connections.forEach((connection: Connection): void => {\n        if (connection.direction !== direction || connection.connectedNode) {\n          return;\n        }\n        if (!currentConnections.has(connection.polymerBond)) {\n          const polymerBondConnections = this.polymerBondToConnections.get(\n            connection.polymerBond,\n          );\n          polymerBondConnections?.forEach(\n            (polymerBondConnection: Connection): void => {\n              increaseOffset(polymerBondConnection, biggestOffsetInCell);\n            },\n          );\n          currentConnections.set(\n            connection.polymerBond,\n            new Set(polymerBondConnections),\n          );\n        }\n      });\n      cell.connections.forEach((connection: Connection): void => {\n        if (\n          !connection.connectedNode ||\n          (connection.direction !== direction &&\n            !currentConnections.has(connection.polymerBond))\n        ) {\n          return;\n        }\n        if (currentConnections.has(connection.polymerBond)) {\n          currentConnections.delete(connection.polymerBond);\n          currentConnections.forEach((connections: Set<Connection>): void => {\n            Array.from(connections.values()).forEach(\n              (currentConnection: Connection): void => {\n                increaseOffset(currentConnection);\n              },\n            );\n          });\n        } else {\n          currentConnections.set(\n            connection.polymerBond,\n            new Set(this.polymerBondToConnections.get(connection.polymerBond)),\n          );\n        }\n      });\n      if (\n        (cell.x === 0 && direction !== 90) ||\n        (cell.y === 0 && direction === 90)\n      ) {\n        currentConnections.clear();\n      }\n      Array.from(currentConnections.keys()).forEach((polymerBond) => {\n        const polymerBondConnections =\n          this.polymerBondToConnections.get(polymerBond);\n        if (\n          polymerBondConnections?.every(\n            (connection: Connection): boolean =>\n              !cell.connections.includes(connection),\n          )\n        ) {\n          currentConnections.delete(polymerBond);\n        }\n      });\n    });\n  }\n\n  private fillRightConnectionsOffset() {\n    const direction = 0;\n    const handledConnections = new Set<PolymerBond>();\n\n    this.matrix.forEach((cell) => {\n      const biggestOffsetInCell = cell.connections.reduce(\n        (biggestOffset: number, connection: Connection): number => {\n          return connection.xOffset > biggestOffset\n            ? connection.xOffset\n            : biggestOffset;\n        },\n        0,\n      );\n\n      cell.connections.forEach((connection: Connection): void => {\n        if (connection.direction !== direction) {\n          return;\n        }\n        if (connection.xOffset <= biggestOffsetInCell) {\n          const polymerBondConnections = this.polymerBondToConnections.get(\n            connection.polymerBond,\n          );\n          polymerBondConnections?.forEach(\n            (polymerBondConnection: Connection): void => {\n              polymerBondConnection.xOffset = biggestOffsetInCell;\n            },\n          );\n          handledConnections.add(connection.polymerBond);\n        }\n      });\n    });\n\n    handledConnections.forEach((polymerBond) => {\n      const polymerBondConnections =\n        this.polymerBondToConnections.get(polymerBond);\n      polymerBondConnections?.forEach((polymerBondConnection) => {\n        if (polymerBondConnection.direction !== direction) {\n          return;\n        }\n\n        polymerBondConnection.xOffset++;\n      });\n    });\n  }\n\n  private fillCells() {\n    // create matrix by initial matrix filling empty cells\n\n    for (\n      let rowNumber = 0;\n      rowNumber < this.matrixConfig.initialMatrix.height;\n      rowNumber++\n    ) {\n      for (\n        let columnNumber = 0;\n        columnNumber < this.initialMatrixWidth;\n        columnNumber++\n      ) {\n        const initialMatrixCell = this.matrixConfig.initialMatrix.get(\n          rowNumber,\n          columnNumber,\n        );\n\n        if (!initialMatrixCell) {\n          this.matrix.set(\n            rowNumber,\n            columnNumber,\n            new Cell(null, [], columnNumber, rowNumber),\n          );\n\n          continue;\n        }\n\n        const cell = new Cell(\n          initialMatrixCell.node,\n          [],\n          columnNumber,\n          rowNumber,\n          initialMatrixCell.monomer,\n        );\n\n        this.matrix.set(rowNumber, columnNumber, cell);\n\n        if (initialMatrixCell.monomer) {\n          this.monomerToCell.set(initialMatrixCell.monomer, cell);\n        }\n      }\n    }\n\n    const monomerToNode = this.chainsCollection.monomerToNode;\n    const handledConnections = new Set<PolymerBond>();\n\n    this.matrix.forEach((cell) => {\n      const monomer = cell.monomer;\n\n      monomer?.forEachBond((polymerBond) => {\n        if (polymerBond instanceof MonomerToAtomBond) {\n          return;\n        }\n\n        if (\n          polymerBond.isSideChainConnection &&\n          !handledConnections.has(polymerBond)\n        ) {\n          const anotherMonomer = polymerBond.getAnotherMonomer(\n            monomer,\n          ) as BaseMonomer;\n          const connectedNode = monomerToNode.get(\n            anotherMonomer,\n          ) as SubChainNode;\n          const connectedCell = this.monomerToCell.get(anotherMonomer);\n\n          if (!connectedCell) {\n            return;\n          }\n\n          const xDistance = connectedCell.x - cell.x;\n          const yDistance = connectedCell.y - cell.y;\n          const xDirection = xDistance > 0 ? 0 : 180;\n          const yDirection = yDistance > 0 ? 90 : 270;\n          let xDistanceAbsolute = Math.abs(xDistance);\n          let yDistanceAbsolute = Math.abs(yDistance);\n          const isVertical = xDistanceAbsolute === 0;\n\n          // fill start cell by connection with direction\n          let connection = new Connection(\n            connectedNode,\n            isVertical ? 90 : xDirection,\n            isVertical,\n            polymerBond,\n            0,\n            0,\n          );\n\n          cell.connections.push(connection);\n          this.polymerBondToCells.set(polymerBond, [cell]);\n          this.polymerBondToConnections.set(polymerBond, [connection]);\n\n          let nextCellX = cell.x;\n          let nextCellY = cell.y;\n\n          // fill x cells by connection with direction\n          while (xDistanceAbsolute > 1) {\n            nextCellX += Math.sign(xDistance);\n            const nextCellToHandle = this.matrix.get(\n              nextCellY,\n              nextCellX,\n            ) as Cell;\n            connection = new Connection(\n              null,\n              xDirection,\n              isVertical,\n              polymerBond,\n              0,\n              0,\n            );\n            nextCellToHandle.connections.push(connection);\n            this.polymerBondToCells.get(polymerBond)?.push(nextCellToHandle);\n            this.polymerBondToConnections.get(polymerBond)?.push(connection);\n\n            xDistanceAbsolute--;\n          }\n\n          // fill y cells by connection with direction\n          while (yDistanceAbsolute > 1) {\n            nextCellY += Math.sign(yDistance);\n            const nextCellToHandle = this.matrix.get(\n              nextCellY,\n              nextCellX,\n            ) as Cell;\n            connection = new Connection(\n              null,\n              yDirection,\n              isVertical,\n              polymerBond,\n              0,\n              0,\n            );\n            nextCellToHandle.connections.push(connection);\n            this.polymerBondToCells.get(polymerBond)?.push(nextCellToHandle);\n            this.polymerBondToConnections.get(polymerBond)?.push(connection);\n\n            yDistanceAbsolute--;\n          }\n\n          // fill last cell by connection\n          nextCellX += Math.sign(xDistance);\n          nextCellY += Math.sign(yDistance);\n\n          const lastCellToHandle = this.matrix.get(\n            nextCellY,\n            nextCellX,\n          ) as Cell;\n          connection = new Connection(\n            connectedNode,\n            isVertical\n              ? yDirection\n              : { x: xDistance === 0 ? 0 : xDirection, y: yDirection },\n            isVertical,\n            polymerBond,\n            0,\n            0,\n          );\n          lastCellToHandle.connections.push(connection);\n          this.polymerBondToCells.get(polymerBond)?.push(lastCellToHandle);\n          this.polymerBondToConnections.get(polymerBond)?.push(connection);\n\n          handledConnections.add(polymerBond);\n        }\n      });\n    });\n\n    this.fillConnectionsOffset(180);\n    this.fillRightConnectionsOffset();\n    this.fillConnectionsOffset(0);\n    this.fillConnectionsOffset(\n      90,\n      (connection: Connection, increaseValue: number | undefined): void => {\n        if (isNumber(increaseValue)) {\n          connection.yOffset = increaseValue;\n        } else {\n          connection.yOffset++;\n        }\n      },\n      (connection: Connection): number => connection.yOffset,\n    );\n  }\n}\n","import { Operation } from 'domain/entities/Operation';\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\n\nexport class RecalculateCanvasMatrixOperation implements Operation {\n  public priority = 1;\n  constructor(\n    private recalculateCanvasMatrixModelChange: () => void,\n    private invertRecalculateCanvasMatrixModelChange: () => void,\n  ) {}\n\n  public execute(renderersManager: RenderersManager) {\n    this.recalculateCanvasMatrixModelChange();\n    renderersManager.rerenderSideConnectionPolymerBonds();\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.invertRecalculateCanvasMatrixModelChange();\n    renderersManager.rerenderSideConnectionPolymerBonds();\n  }\n}\n","import { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { Bond } from 'domain/entities/CoreBond';\nimport { Bond as MicromoleculesBond } from 'domain/entities/bond';\nimport { BaseRenderer } from 'application/render';\nimport { AtomLabel, Elements } from 'domain/constants';\nimport { AtomRenderer } from 'application/render/renderers/AtomRenderer';\n\nexport class Atom extends DrawingEntity {\n  public bonds: Bond[] = [];\n  public renderer: AtomRenderer | undefined = undefined;\n  constructor(\n    position: Vec2,\n    public monomer: BaseMonomer,\n    public atomIdInMicroMode,\n    public label: AtomLabel,\n  ) {\n    super(position);\n  }\n\n  public get center() {\n    return this.position;\n  }\n\n  public addBond(bond: Bond) {\n    this.bonds.push(bond);\n  }\n\n  public setRenderer(renderer: AtomRenderer) {\n    this.renderer = renderer;\n    super.setBaseRenderer(renderer as BaseRenderer);\n  }\n\n  private calculateConnections() {\n    let connectionsAmount = 0;\n\n    for (let i = 0; i < this.bonds.length; i++) {\n      switch (this.bonds[i].type) {\n        case MicromoleculesBond.PATTERN.TYPE.SINGLE:\n          connectionsAmount += 1;\n          break;\n        case MicromoleculesBond.PATTERN.TYPE.DOUBLE:\n          connectionsAmount += 2;\n          break;\n        case MicromoleculesBond.PATTERN.TYPE.TRIPLE:\n          connectionsAmount += 3;\n          break;\n        case MicromoleculesBond.PATTERN.TYPE.DATIVE:\n          break;\n        case MicromoleculesBond.PATTERN.TYPE.HYDROGEN:\n          break;\n        case MicromoleculesBond.PATTERN.TYPE.AROMATIC:\n          if (this.bonds.length === 1) return 0;\n          return this.bonds.length;\n        default:\n          return 0;\n      }\n    }\n\n    return connectionsAmount;\n  }\n\n  private calculateCharge() {\n    return 0;\n  }\n\n  private calculateRadicalAmount() {\n    return 0;\n  }\n\n  calculateValence() {\n    const label = this.label;\n    const element = Elements.get(label);\n    const elementGroupNumber = element?.group;\n    const connectionAmount = this.calculateConnections();\n    const radicalAmount = this.calculateRadicalAmount();\n    const absCharge = 0;\n    const charge = this.calculateCharge();\n    let valence = this.calculateConnections();\n    let hydrogenAmount = 0;\n\n    if (elementGroupNumber === undefined) {\n      if (label === AtomLabel.D || label === AtomLabel.T) {\n        valence = 1;\n        hydrogenAmount = 1 - radicalAmount - connectionAmount - absCharge;\n      } else {\n        // this.implicitH = 0;\n        // return true;\n      }\n    } else if (elementGroupNumber === 1) {\n      if (\n        label === AtomLabel.H ||\n        label === AtomLabel.Li ||\n        label === AtomLabel.Na ||\n        label === AtomLabel.K ||\n        label === AtomLabel.Rb ||\n        label === AtomLabel.Cs ||\n        label === AtomLabel.Fr\n      ) {\n        valence = 1;\n        hydrogenAmount = 1 - radicalAmount - connectionAmount - absCharge;\n      }\n    } else if (elementGroupNumber === 2) {\n      if (\n        connectionAmount + radicalAmount + absCharge === 2 ||\n        connectionAmount + radicalAmount + absCharge === 0\n      ) {\n        valence = 2;\n      } else hydrogenAmount = -1;\n    } else if (elementGroupNumber === 3) {\n      if (\n        label === AtomLabel.B ||\n        label === AtomLabel.Al ||\n        label === AtomLabel.Ga ||\n        label === AtomLabel.In\n      ) {\n        if (charge === -1) {\n          valence = 4;\n          hydrogenAmount = 4 - radicalAmount - connectionAmount;\n        } else {\n          valence = 3;\n          hydrogenAmount = 3 - radicalAmount - connectionAmount - absCharge;\n        }\n      } else if (label === AtomLabel.Tl) {\n        if (charge === -1) {\n          if (radicalAmount + connectionAmount <= 2) {\n            valence = 2;\n            hydrogenAmount = 2 - radicalAmount - connectionAmount;\n          } else {\n            valence = 4;\n            hydrogenAmount = 4 - radicalAmount - connectionAmount;\n          }\n        } else if (charge === -2) {\n          if (radicalAmount + connectionAmount <= 3) {\n            valence = 3;\n            hydrogenAmount = 3 - radicalAmount - connectionAmount;\n          } else {\n            valence = 5;\n            hydrogenAmount = 5 - radicalAmount - connectionAmount;\n          }\n        } else if (radicalAmount + connectionAmount + absCharge <= 1) {\n          valence = 1;\n          hydrogenAmount = 1 - radicalAmount - connectionAmount - absCharge;\n        } else {\n          valence = 3;\n          hydrogenAmount = 3 - radicalAmount - connectionAmount - absCharge;\n        }\n      }\n    } else if (elementGroupNumber === 4) {\n      if (\n        label === AtomLabel.C ||\n        label === AtomLabel.Si ||\n        label === AtomLabel.Ge\n      ) {\n        valence = 4;\n        hydrogenAmount = 4 - radicalAmount - connectionAmount - absCharge;\n      } else if (label === AtomLabel.Sn || label === AtomLabel.Pb) {\n        if (connectionAmount + radicalAmount + absCharge <= 2) {\n          valence = 2;\n          hydrogenAmount = 2 - radicalAmount - connectionAmount - absCharge;\n        } else {\n          valence = 4;\n          hydrogenAmount = 4 - radicalAmount - connectionAmount - absCharge;\n        }\n      }\n    } else if (elementGroupNumber === 5) {\n      if (label === AtomLabel.N || label === AtomLabel.P) {\n        if (charge === 1) {\n          valence = 4;\n          hydrogenAmount = 4 - radicalAmount - connectionAmount;\n        } else if (charge === 2) {\n          valence = 3;\n          hydrogenAmount = 3 - radicalAmount - connectionAmount;\n        } else if (\n          label === AtomLabel.N ||\n          radicalAmount + connectionAmount + absCharge <= 3\n        ) {\n          valence = 3;\n          hydrogenAmount = 3 - radicalAmount - connectionAmount - absCharge;\n        } else {\n          // ELEM_P && rad + conn + absCharge > 3\n          valence = 5;\n          hydrogenAmount = 5 - radicalAmount - connectionAmount - absCharge;\n        }\n      } else if (\n        label === AtomLabel.Bi ||\n        label === AtomLabel.Sb ||\n        label === AtomLabel.As\n      ) {\n        if (charge === 1) {\n          if (radicalAmount + connectionAmount <= 2 && label !== AtomLabel.As) {\n            valence = 2;\n            hydrogenAmount = 2 - radicalAmount - connectionAmount;\n          } else {\n            valence = 4;\n            hydrogenAmount = 4 - radicalAmount - connectionAmount;\n          }\n        } else if (charge === 2) {\n          valence = 3;\n          hydrogenAmount = 3 - radicalAmount - connectionAmount;\n        } else if (radicalAmount + connectionAmount <= 3) {\n          valence = 3;\n          hydrogenAmount = 3 - radicalAmount - connectionAmount - absCharge;\n        } else {\n          valence = 5;\n          hydrogenAmount = 5 - radicalAmount - connectionAmount - absCharge;\n        }\n      }\n    } else if (elementGroupNumber === 6) {\n      if (label === AtomLabel.O) {\n        if (charge >= 1) {\n          valence = 3;\n          hydrogenAmount = 3 - radicalAmount - connectionAmount;\n        } else {\n          valence = 2;\n          hydrogenAmount = 2 - radicalAmount - connectionAmount - absCharge;\n        }\n      } else if (\n        label === AtomLabel.S ||\n        label === AtomLabel.Se ||\n        label === AtomLabel.Po\n      ) {\n        if (charge === 1) {\n          if (connectionAmount <= 3) {\n            valence = 3;\n            hydrogenAmount = 3 - radicalAmount - connectionAmount;\n          } else {\n            valence = 5;\n            hydrogenAmount = 5 - radicalAmount - connectionAmount;\n          }\n        } else if (connectionAmount + radicalAmount + absCharge <= 2) {\n          valence = 2;\n          hydrogenAmount = 2 - radicalAmount - connectionAmount - absCharge;\n        } else if (connectionAmount + radicalAmount + absCharge <= 4) {\n          // See examples in PubChem\n          // [S] : CID 16684216\n          // [Se]: CID 5242252\n          // [Po]: no example, just following ISIS/Draw logic here\n          valence = 4;\n          hydrogenAmount = 4 - radicalAmount - connectionAmount - absCharge;\n        } else {\n          // See examples in PubChem\n          // [S] : CID 46937044\n          // [Se]: CID 59786\n          // [Po]: no example, just following ISIS/Draw logic here\n          valence = 6;\n          hydrogenAmount = 6 - radicalAmount - connectionAmount - absCharge;\n        }\n      } else if (label === AtomLabel.Te) {\n        if (charge === -1) {\n          if (connectionAmount <= 2) {\n            valence = 2;\n            hydrogenAmount = 2 - radicalAmount - connectionAmount - absCharge;\n          }\n        } else if (charge === 0 || charge === 2) {\n          if (connectionAmount <= 2) {\n            valence = 2;\n            hydrogenAmount = 2 - radicalAmount - connectionAmount - absCharge;\n          } else if (connectionAmount <= 4) {\n            valence = 4;\n            hydrogenAmount = 4 - radicalAmount - connectionAmount - absCharge;\n          } else if (charge === 0 && connectionAmount <= 6) {\n            valence = 6;\n            hydrogenAmount = 6 - radicalAmount - connectionAmount - absCharge;\n          } else {\n            hydrogenAmount = -1;\n          }\n        }\n      }\n    } else if (elementGroupNumber === 7) {\n      if (label === AtomLabel.F) {\n        valence = 1;\n        hydrogenAmount = 1 - radicalAmount - connectionAmount - absCharge;\n      } else if (\n        label === AtomLabel.Cl ||\n        label === AtomLabel.Br ||\n        label === AtomLabel.I ||\n        label === AtomLabel.At\n      ) {\n        if (charge === 1) {\n          if (connectionAmount <= 2) {\n            valence = 2;\n            hydrogenAmount = 2 - radicalAmount - connectionAmount;\n          } else if (\n            connectionAmount === 3 ||\n            connectionAmount === 5 ||\n            connectionAmount >= 7\n          ) {\n            hydrogenAmount = -1;\n          }\n        } else if (charge === 0) {\n          if (connectionAmount <= 1) {\n            valence = 1;\n            hydrogenAmount = 1 - radicalAmount - connectionAmount;\n            // While the halogens can have valence 3, they can not have\n            // hydrogens in that case.\n          } else if (\n            connectionAmount === 2 ||\n            connectionAmount === 4 ||\n            connectionAmount === 6\n          ) {\n            if (radicalAmount === 1) {\n              valence = connectionAmount;\n              hydrogenAmount = 0;\n            } else {\n              hydrogenAmount = -1; // will throw an error in the end\n            }\n          } else if (connectionAmount > 7) {\n            hydrogenAmount = -1; // will throw an error in the end\n          }\n        }\n      }\n    } else if (elementGroupNumber === 8) {\n      if (connectionAmount + radicalAmount + absCharge === 0) valence = 1;\n      else hydrogenAmount = -1;\n    }\n    // if (Atom.isHeteroAtom(label) && this.implicitHCount !== null) {\n    //   hydrogenAmount = this.implicitHCount;\n    // }\n    // this.valence = valence;\n    // this.implicitH = hydrogenAmount;\n    // if (this.implicitH < 0) {\n    //   this.valence = connectionAmount;\n    //   this.implicitH = 0;\n    //   this.badConn = true;\n    //   return false;\n    // }\n\n    return {\n      valence,\n      hydrogenAmount,\n    };\n  }\n}\n","import { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { BaseRenderer } from 'application/render';\nimport { BondRenderer } from 'application/render/renderers/BondRenderer';\n\nexport class Bond extends DrawingEntity {\n  public endPosition: Vec2 = new Vec2();\n  public renderer: BondRenderer | undefined = undefined;\n  public cycles = [];\n  constructor(\n    public firstAtom: Atom,\n    public secondAtom: Atom,\n    public bondIdInMicroMode,\n    public type = 1,\n    public stereo = 0,\n  ) {\n    super(firstAtom.position);\n    this.endPosition = secondAtom.position;\n  }\n\n  public setRenderer(renderer: BondRenderer): void {\n    super.setBaseRenderer(renderer as BaseRenderer);\n    this.renderer = renderer;\n  }\n\n  public get startPosition() {\n    return this.position;\n  }\n\n  public get center() {\n    return this.position;\n  }\n\n  public moveBondStartAbsolute(x, y) {\n    this.moveAbsolute(new Vec2(x, y));\n  }\n\n  public moveBondEndAbsolute(x, y) {\n    this.endPosition = new Vec2(x, y);\n  }\n\n  public moveToLinkedAtoms() {\n    const firstAtomCenter = this.firstAtom.position;\n    const secondAtomCenter = this.secondAtom.position;\n    this.moveBondStartAbsolute(firstAtomCenter.x, firstAtomCenter.y);\n    if (secondAtomCenter) {\n      this.moveBondEndAbsolute(secondAtomCenter.x, secondAtomCenter.y);\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { Operation } from 'domain/entities/Operation';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport {\n  Bond as MicromoleculesBond,\n  Atom as MicromoleculesAtom,\n} from 'domain/entities';\nimport { KetcherLogger } from 'utilities';\n\ninterface BondWithIdInMicromolecules {\n  bondId: number;\n  bond: MicromoleculesBond;\n}\n\ninterface DeletedMoleculeStructItems {\n  atomInMoleculeStruct: MicromoleculesAtom;\n  bondsInMoleculeStruct: BondWithIdInMicromolecules[];\n}\n\nfunction addAtomToMoleculeStruct(\n  atom: Atom,\n  atomInMoleculeStruct: MicromoleculesAtom,\n  bondsInMoleculeStruct: BondWithIdInMicromolecules[] = [],\n) {\n  const moleculeStruct = atom.monomer.monomerItem.struct;\n\n  moleculeStruct.atoms.set(atom.atomIdInMicroMode, atomInMoleculeStruct);\n\n  bondsInMoleculeStruct.forEach(({ bondId, bond }) => {\n    moleculeStruct.bonds.set(bondId, bond);\n  });\n}\n\nfunction deleteAtomFromMoleculeStruct(atom: Atom) {\n  const moleculeStruct = atom.monomer.monomerItem.struct;\n  const atomInMoleculeStruct = moleculeStruct.atoms.get(atom.atomIdInMicroMode);\n\n  if (!atomInMoleculeStruct) {\n    KetcherLogger.warn('Atom is not found in molecule struct during deletion');\n\n    return;\n  }\n\n  const bondsInMoleculeStruct = moleculeStruct.bonds.filter((_, bond) => {\n    return (\n      bond.begin === atom.atomIdInMicroMode ||\n      bond.end === atom.atomIdInMicroMode\n    );\n  });\n\n  moleculeStruct.atoms.delete(atom.atomIdInMicroMode);\n\n  bondsInMoleculeStruct.forEach((_, bondId) => {\n    moleculeStruct.bonds.delete(bondId);\n  });\n\n  return {\n    atomInMoleculeStruct,\n    bondsInMoleculeStruct: [...bondsInMoleculeStruct.entries()].map(\n      ([bondId, bond]) => {\n        return { bondId, bond };\n      },\n    ),\n  };\n}\nexport class AtomAddOperation implements Operation {\n  public atom: Atom;\n  private deletedMoleculeStructItems?: DeletedMoleculeStructItems;\n  public priority = 2;\n\n  constructor(\n    public addAtomChangeModel: (atom?: Atom) => Atom,\n    public deleteAtomChangeModel: (atom: Atom) => void,\n  ) {\n    this.atom = this.addAtomChangeModel();\n  }\n\n  public execute() {\n    this.atom = this.addAtomChangeModel(this.atom);\n\n    if (this.deletedMoleculeStructItems) {\n      addAtomToMoleculeStruct(\n        this.atom,\n        this.deletedMoleculeStructItems.atomInMoleculeStruct,\n        this.deletedMoleculeStructItems.bondsInMoleculeStruct,\n      );\n    }\n  }\n\n  public invert() {\n    if (this.atom) {\n      this.deleteAtomChangeModel(this.atom);\n    }\n\n    this.deletedMoleculeStructItems = deleteAtomFromMoleculeStruct(this.atom);\n  }\n\n  public executeAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.addAtom(this.atom);\n  }\n\n  public invertAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.deleteAtom(this.atom);\n  }\n}\n\nexport class AtomDeleteOperation implements Operation {\n  private deletedMoleculeStructItems?: DeletedMoleculeStructItems;\n  public priority = 2;\n\n  constructor(\n    public atom: Atom,\n    public deleteAtomChangeModel: () => void,\n    public addAtomChangeModel: (atom?: Atom) => Atom,\n  ) {}\n\n  public execute() {\n    this.deleteAtomChangeModel();\n\n    this.deletedMoleculeStructItems = deleteAtomFromMoleculeStruct(this.atom);\n  }\n\n  public invert() {\n    this.addAtomChangeModel(this.atom);\n\n    if (this.deletedMoleculeStructItems) {\n      addAtomToMoleculeStruct(\n        this.atom,\n        this.deletedMoleculeStructItems.atomInMoleculeStruct,\n        this.deletedMoleculeStructItems.bondsInMoleculeStruct,\n      );\n    }\n  }\n\n  public invertAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.addAtom(this.atom);\n  }\n\n  public executeAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.deleteAtom(this.atom);\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { Operation } from 'domain/entities/Operation';\nimport { Bond } from 'domain/entities/CoreBond';\nimport { Bond as MicromoleculesBond } from 'domain/entities/bond';\n\nfunction addBondToMoleculeStruct(\n  bond: Bond,\n  bondInMoleculeStruct: MicromoleculesBond,\n) {\n  const moleculeStruct = bond.firstAtom.monomer.monomerItem.struct;\n\n  moleculeStruct.bonds.set(bond.bondIdInMicroMode, bondInMoleculeStruct);\n}\n\nfunction deleteBondFromMoleculeStruct(bond: Bond) {\n  const moleculeStruct = bond.firstAtom.monomer.monomerItem.struct;\n  const bondInMoleculeStruct = moleculeStruct.bonds.get(bond.bondIdInMicroMode);\n\n  moleculeStruct.bonds.delete(bond.bondIdInMicroMode);\n\n  return bondInMoleculeStruct;\n}\n\nexport class BondAddOperation implements Operation {\n  public bond: Bond;\n  private bondInMoleculeStruct?: MicromoleculesBond;\n  public priority = 1;\n  constructor(\n    public addBondChangeModel: (bond?: Bond) => Bond,\n    public deleteBondChangeModel: (bond: Bond) => void,\n  ) {\n    this.bond = this.addBondChangeModel();\n  }\n\n  public execute() {\n    this.bond = this.addBondChangeModel(this.bond);\n\n    if (this.bondInMoleculeStruct) {\n      addBondToMoleculeStruct(this.bond, this.bondInMoleculeStruct);\n    }\n  }\n\n  public invert() {\n    if (this.bond) {\n      this.deleteBondChangeModel(this.bond);\n    }\n\n    this.bondInMoleculeStruct = deleteBondFromMoleculeStruct(this.bond);\n  }\n\n  public executeAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.addBond(this.bond);\n  }\n\n  public invertAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.deleteBond(this.bond);\n  }\n}\n\nexport class BondDeleteOperation implements Operation {\n  private bondInMoleculeStruct?: MicromoleculesBond;\n  public priority = 1;\n\n  constructor(\n    public bond: Bond,\n    public deleteBondChangeModel: (bond: Bond) => void,\n    public addBondChangeModel: (bond: Bond) => Bond,\n  ) {}\n\n  public execute() {\n    this.deleteBondChangeModel(this.bond);\n\n    this.bondInMoleculeStruct = deleteBondFromMoleculeStruct(this.bond);\n  }\n\n  public invert() {\n    this.addBondChangeModel(this.bond);\n\n    if (this.bondInMoleculeStruct) {\n      addBondToMoleculeStruct(this.bond, this.bondInMoleculeStruct);\n    }\n  }\n\n  public executeAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.deleteBond(this.bond);\n  }\n\n  public invertAfterAllOperations(renderersManager: RenderersManager) {\n    renderersManager.addBond(this.bond);\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { Operation } from 'domain/entities/Operation';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\n\nexport class MonomerToAtomBondAddOperation implements Operation {\n  public monomerToAtomBond: MonomerToAtomBond;\n  constructor(\n    public addMonomerToAtomBondChangeModel: (\n      monomerToAtomBond?: MonomerToAtomBond,\n    ) => MonomerToAtomBond,\n    public deleteMonomerToAtomBondChangeModel: (\n      monomerToAtomBond: MonomerToAtomBond,\n    ) => void,\n  ) {\n    this.monomerToAtomBond = this.addMonomerToAtomBondChangeModel();\n  }\n\n  public execute(renderersManager: RenderersManager) {\n    this.monomerToAtomBond = this.addMonomerToAtomBondChangeModel(\n      this.monomerToAtomBond,\n    );\n    renderersManager.addMonomerToAtomBond(this.monomerToAtomBond);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    if (this.monomerToAtomBond) {\n      this.deleteMonomerToAtomBondChangeModel(this.monomerToAtomBond);\n      renderersManager.deleteMonomerToAtomBond(this.monomerToAtomBond);\n    }\n  }\n}\n\nexport class MonomerToAtomBondDeleteOperation implements Operation {\n  constructor(\n    public monomerToAtomBond: MonomerToAtomBond,\n    public deleteMonomerToAtomBondChangeModel: (\n      monomerToAtomBond?: MonomerToAtomBond,\n    ) => void,\n    public addMonomerToAtomBondChangeModel: (\n      monomerToAtomBond?: MonomerToAtomBond,\n    ) => MonomerToAtomBond,\n  ) {}\n\n  public execute(renderersManager: RenderersManager) {\n    this.deleteMonomerToAtomBondChangeModel(this.monomerToAtomBond);\n    renderersManager.deleteMonomerToAtomBond(this.monomerToAtomBond);\n  }\n\n  public invert(renderersManager: RenderersManager) {\n    this.addMonomerToAtomBondChangeModel(this.monomerToAtomBond);\n    renderersManager.addMonomerToAtomBond(this.monomerToAtomBond);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { CoreEditor, EditorHistory } from 'application/editor/internal';\nimport { BaseTool } from 'application/editor/tools/Tool';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { FlexModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/FlexModePolymerBondRenderer';\nimport { SnakeModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/SnakeModePolymerBondRenderer';\nimport assert from 'assert';\nimport { AttachmentPoint } from 'domain/AttachmentPoint';\nimport { UnresolvedMonomer } from 'domain/entities';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { Chem } from 'domain/entities/Chem';\nimport { Command } from 'domain/entities/Command';\nimport { Peptide } from 'domain/entities/Peptide';\nimport { Phosphate } from 'domain/entities/Phosphate';\nimport { RNABase } from 'domain/entities/RNABase';\nimport { Sugar } from 'domain/entities/Sugar';\nimport { AttachmentPointName } from 'domain/types';\n// FIXME: If we replace '../shared/coordinates' by 'application/editor' to make it shorter,\n//  we get `Uncaught ReferenceError: Cannot access 'PolymerBond' before initialization`,\n//  which probably due to a circular dependency\n//  because of using uncontrolled `index.ts` files.\nimport { Coordinates } from '../shared/coordinates';\nimport { AtomRenderer } from 'application/render/renderers/AtomRenderer';\nimport { ToolName } from 'application/editor';\n\ntype FlexModeOrSnakeModePolymerBondRenderer =\n  | FlexModePolymerBondRenderer\n  | SnakeModePolymerBondRenderer;\n\nexport enum MACROMOLECULES_BOND_TYPES {\n  SINGLE = 'single',\n  HYDROGEN = 'hydrogen',\n}\n\nclass PolymerBond implements BaseTool {\n  private bondRenderer?: FlexModeOrSnakeModePolymerBondRenderer;\n  private isBondConnectionModalOpen = false;\n  private history: EditorHistory;\n  private bondType: MACROMOLECULES_BOND_TYPES;\n\n  constructor(private editor: CoreEditor, options: { toolName: ToolName }) {\n    this.editor = editor;\n    this.history = new EditorHistory(this.editor);\n    this.bondType =\n      options.toolName === ToolName.bondSingle\n        ? MACROMOLECULES_BOND_TYPES.SINGLE\n        : MACROMOLECULES_BOND_TYPES.HYDROGEN;\n  }\n\n  get isHydrogenBond() {\n    return this.bondType === MACROMOLECULES_BOND_TYPES.HYDROGEN;\n  }\n\n  public mouseDownAttachmentPoint(event) {\n    if (this.isHydrogenBond) {\n      return;\n    }\n\n    const selectedRenderer = event.target.__data__;\n    if (\n      selectedRenderer instanceof AttachmentPoint &&\n      !selectedRenderer.monomer.isAttachmentPointUsed(event.attachmentPointName)\n    ) {\n      selectedRenderer.monomer.setChosenFirstAttachmentPoint(\n        event.attachmentPointName,\n      );\n    }\n  }\n\n  private removeBond() {\n    if (this.bondRenderer) {\n      const modelChanges =\n        this.editor.drawingEntitiesManager.cancelPolymerBondCreation(\n          this.bondRenderer.polymerBond,\n        );\n      this.bondRenderer = undefined;\n\n      return modelChanges;\n    } else {\n      return new Command();\n    }\n  }\n\n  public mousedown(event) {\n    const selectedRenderer = event.target.__data__;\n    if (\n      selectedRenderer instanceof BaseMonomerRenderer ||\n      selectedRenderer instanceof AttachmentPoint\n    ) {\n      const startAttachmentPoint =\n        selectedRenderer.monomer.startBondAttachmentPoint;\n\n      if (!startAttachmentPoint && !this.isHydrogenBond) {\n        this.editor.events.error.dispatch(\n          \"Selected monomer doesn't have any free attachment points\",\n        );\n        return;\n      }\n      const { polymerBond, command: modelChanges } =\n        this.editor.drawingEntitiesManager.startPolymerBondCreation(\n          selectedRenderer.monomer,\n          selectedRenderer.monomer.position,\n          Coordinates.canvasToModel(this.editor.lastCursorPositionOfCanvas),\n          this.bondType,\n        );\n\n      this.editor.renderersContainer.update(modelChanges);\n      this.bondRenderer = polymerBond.renderer;\n    }\n  }\n\n  public mousemove() {\n    if (this.bondRenderer) {\n      const modelChanges = this.editor.drawingEntitiesManager.movePolymerBond(\n        this.bondRenderer.polymerBond,\n        Coordinates.canvasToModel(this.editor.lastCursorPositionOfCanvas),\n      );\n      this.editor.renderersContainer.update(modelChanges);\n    }\n  }\n\n  // FIXME: Specify the types.\n  public mouseLeavePolymerBond(event): void {\n    const renderer: FlexModeOrSnakeModePolymerBondRenderer =\n      event.target.__data__;\n    if (this.bondRenderer || !renderer.polymerBond) return;\n\n    const modelChanges =\n      this.editor.drawingEntitiesManager.hidePolymerBondInformation(\n        renderer.polymerBond,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  // FIXME: Specify the types.\n  public mouseOverPolymerBond(event) {\n    if (this.bondRenderer) return;\n\n    const renderer: FlexModeOrSnakeModePolymerBondRenderer =\n      event.target.__data__;\n    const modelChanges =\n      this.editor.drawingEntitiesManager.showPolymerBondInformation(\n        renderer.polymerBond,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  public mouseOverMonomer(event) {\n    const renderer: BaseMonomerRenderer = event.target.__data__;\n    let modelChanges;\n\n    if (this.bondRenderer) {\n      // Don't need to do anything if we hover over the first monomer of the bond\n      if (this.bondRenderer?.polymerBond.firstMonomer === renderer.monomer) {\n        return;\n      }\n      const shouldCalculateBonds = !this.shouldInvokeModal(\n        this.bondRenderer?.polymerBond.firstMonomer,\n        renderer.monomer,\n        false,\n      );\n      modelChanges =\n        this.editor.drawingEntitiesManager.intendToFinishBondCreation(\n          renderer.monomer,\n          this.bondRenderer?.polymerBond,\n          this.isHydrogenBond ? false : shouldCalculateBonds,\n        );\n    } else {\n      modelChanges =\n        this.editor.drawingEntitiesManager.intendToStartBondCreation(\n          renderer.monomer,\n        );\n    }\n\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  public mouseOverAttachmentPoint(event) {\n    if (this.isHydrogenBond) {\n      return;\n    }\n\n    const renderer: AttachmentPoint = event.target.__data__;\n    let modelChanges;\n\n    if (renderer.monomer.isAttachmentPointUsed(event.attachmentPointName)) {\n      return;\n    }\n\n    if (this.bondRenderer) {\n      // Don't need to do anything if we hover over the first monomer of the bond\n      if (this.bondRenderer?.polymerBond.firstMonomer === renderer.monomer) {\n        return;\n      }\n      const shouldCalculateBonds = !this.shouldInvokeModal(\n        this.bondRenderer?.polymerBond.firstMonomer,\n        renderer.monomer,\n        false,\n      );\n      modelChanges =\n        this.editor.drawingEntitiesManager.intendToFinishAttachmenPointBondCreation(\n          renderer.monomer,\n          this.bondRenderer?.polymerBond,\n          event.attachmentPointName,\n          shouldCalculateBonds,\n        );\n    } else {\n      modelChanges =\n        this.editor.drawingEntitiesManager.intendToStartAttachmenPointBondCreation(\n          renderer.monomer,\n          event.attachmentPointName,\n        );\n    }\n\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  public mouseLeaveMonomer(event) {\n    const eventToElementData = event.toElement?.__data__;\n    const eventFromElementData = event.fromElement?.__data__;\n    if (\n      eventToElementData instanceof AttachmentPoint &&\n      eventToElementData.monomer === eventFromElementData.monomer\n    ) {\n      eventToElementData.monomer.removePotentialBonds();\n\n      return;\n    }\n\n    const renderer: BaseMonomerRenderer = event.target.__data__;\n\n    if (\n      renderer !== this.bondRenderer?.polymerBond?.firstMonomer?.renderer &&\n      !this.isBondConnectionModalOpen\n    ) {\n      const modelChanges =\n        this.editor.drawingEntitiesManager.cancelIntentionToFinishBondCreation(\n          renderer.monomer,\n          this.bondRenderer?.polymerBond,\n        );\n\n      this.editor.renderersContainer.update(modelChanges);\n    }\n  }\n\n  public mouseLeaveAttachmentPoint(event) {\n    if (this.isBondConnectionModalOpen) {\n      return;\n    }\n    const attachmentPointRenderer: AttachmentPoint = event.target.__data__;\n    if (\n      attachmentPointRenderer.monomer.renderer !==\n      this.bondRenderer?.polymerBond?.firstMonomer?.renderer\n    ) {\n      const modelChanges =\n        this.editor.drawingEntitiesManager.cancelIntentionToFinishBondCreation(\n          attachmentPointRenderer.monomer,\n          this.bondRenderer?.polymerBond,\n        );\n      this.editor.renderersContainer.update(modelChanges);\n    }\n  }\n\n  public mouseUpAttachmentPoint(event) {\n    const renderer = event.target.__data__ as AttachmentPoint;\n    const isFirstMonomerHovered =\n      renderer.monomer.renderer ===\n      this.bondRenderer?.polymerBond?.firstMonomer?.renderer;\n\n    if (this.bondRenderer && !isFirstMonomerHovered) {\n      const firstMonomer = this.bondRenderer?.polymerBond?.firstMonomer;\n      const secondMonomer = renderer.monomer;\n\n      if (secondMonomer.isAttachmentPointUsed(event.attachmentPointName)) {\n        this.mouseup();\n        return;\n      }\n\n      for (const attachmentPoint in secondMonomer.attachmentPointsToBonds) {\n        const bond = secondMonomer.attachmentPointsToBonds[attachmentPoint];\n        if (!bond) {\n          continue;\n        }\n        const alreadyHasBond =\n          (bond.firstMonomer === firstMonomer &&\n            bond.secondMonomer === secondMonomer) ||\n          (bond.firstMonomer === secondMonomer &&\n            bond.secondMonomer === firstMonomer);\n        if (alreadyHasBond) {\n          this.editor.events.error.dispatch(\n            \"There can't be more than 1 bond between the first and the second monomer\",\n          );\n          return;\n        }\n      }\n      secondMonomer.setChosenSecondAttachmentPoint(event.attachmentPointName);\n      const showModal = this.shouldInvokeModal(firstMonomer, secondMonomer);\n      if (showModal) {\n        this.isBondConnectionModalOpen = true;\n\n        this.editor.events.openMonomerConnectionModal.dispatch({\n          firstMonomer,\n          secondMonomer,\n        });\n        return;\n      }\n      const modelChanges = this.finishBondCreation(renderer.monomer);\n      this.history.update(modelChanges);\n      this.editor.renderersContainer.update(modelChanges);\n      this.editor.renderersContainer.deletePolymerBond(\n        this.bondRenderer.polymerBond,\n      );\n      this.bondRenderer = undefined;\n      event.stopPropagation();\n    }\n  }\n\n  private finishBondCreation(secondMonomer: BaseMonomer) {\n    assert(this.bondRenderer);\n\n    if (!this.isHydrogenBond && !secondMonomer.hasFreeAttachmentPoint) {\n      this.editor.events.error.dispatch(\n        \"Monomers don't have any connection point available\",\n      );\n\n      return this.editor.drawingEntitiesManager.cancelPolymerBondCreation(\n        this.bondRenderer.polymerBond,\n      );\n    }\n\n    if (\n      this.isHydrogenBond &&\n      secondMonomer.hasHydrogenBondWithMonomer(\n        this.bondRenderer?.polymerBond.firstMonomer,\n      )\n    ) {\n      this.editor.events.error.dispatch(\n        'Unable to establish multiple hydrogen bonds between two monomers',\n      );\n\n      return this.editor.drawingEntitiesManager.cancelPolymerBondCreation(\n        this.bondRenderer.polymerBond,\n      );\n    }\n\n    const firstMonomerAttachmentPoint = this.isHydrogenBond\n      ? AttachmentPointName.HYDROGEN\n      : this.bondRenderer.polymerBond.firstMonomer.getPotentialAttachmentPointByBond(\n          this.bondRenderer.polymerBond,\n        );\n    const secondMonomerAttachmentPoint = this.isHydrogenBond\n      ? AttachmentPointName.HYDROGEN\n      : secondMonomer.getPotentialAttachmentPointByBond(\n          this.bondRenderer.polymerBond,\n        );\n    assert(firstMonomerAttachmentPoint);\n    assert(secondMonomerAttachmentPoint);\n    if (\n      firstMonomerAttachmentPoint === secondMonomerAttachmentPoint &&\n      !this.isHydrogenBond\n    ) {\n      this.editor.events.error.dispatch(\n        'You have connected monomers with attachment points of the same group',\n      );\n    }\n    return this.editor.drawingEntitiesManager.finishPolymerBondCreation(\n      this.bondRenderer.polymerBond,\n      secondMonomer,\n      firstMonomerAttachmentPoint,\n      this.isHydrogenBond\n        ? AttachmentPointName.HYDROGEN\n        : secondMonomerAttachmentPoint,\n      this.bondType,\n    );\n  }\n\n  public mouseup() {\n    if (this.isBondConnectionModalOpen) {\n      return;\n    }\n\n    const modelChanges = this.removeBond();\n\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  public mouseUpMonomer(event) {\n    const renderer = event.target.__data__;\n    const isFirstMonomerHovered =\n      renderer === this.bondRenderer?.polymerBond?.firstMonomer?.renderer;\n\n    if (this.bondRenderer && !isFirstMonomerHovered) {\n      const firstMonomer = this.bondRenderer?.polymerBond?.firstMonomer;\n      const secondMonomer = renderer.monomer;\n\n      for (const attachmentPoint in secondMonomer.attachmentPointsToBonds) {\n        const bond = secondMonomer.attachmentPointsToBonds[attachmentPoint];\n        if (!bond) {\n          continue;\n        }\n        const alreadyHasBond =\n          (bond.firstMonomer === firstMonomer &&\n            bond.secondMonomer === secondMonomer) ||\n          (bond.firstMonomer === secondMonomer &&\n            bond.secondMonomer === firstMonomer);\n        if (alreadyHasBond) {\n          this.editor.events.error.dispatch(\n            \"There can't be more than 1 bond between the first and the second monomer\",\n          );\n          return;\n        }\n      }\n      const showModal = this.shouldInvokeModal(firstMonomer, secondMonomer);\n      if (showModal) {\n        this.isBondConnectionModalOpen = true;\n\n        this.editor.events.openMonomerConnectionModal.dispatch({\n          firstMonomer,\n          secondMonomer,\n        });\n        return;\n      }\n\n      // This logic so far is only for no-modal connections. Maybe then we can chain it after modal invoke\n      const modelChanges = this.finishBondCreation(renderer.monomer);\n      this.editor.renderersContainer.update(modelChanges);\n      this.editor.renderersContainer.deletePolymerBond(\n        this.bondRenderer.polymerBond,\n      );\n      this.bondRenderer = undefined;\n      this.history.update(modelChanges);\n      event.stopPropagation();\n    }\n  }\n\n  public mouseUpAtom(event) {\n    if (!this.bondRenderer || this.isHydrogenBond) {\n      return;\n    }\n\n    const atomRenderer = event.target.__data__ as AtomRenderer;\n    const monomer = this.bondRenderer?.polymerBond.firstMonomer;\n    const attachmentPoint =\n      monomer.getPotentialAttachmentPointByBond(\n        this.bondRenderer?.polymerBond,\n      ) || monomer?.getValidSourcePoint();\n\n    this.editor.drawingEntitiesManager.deletePolymerBond(\n      this.bondRenderer?.polymerBond,\n    );\n    this.bondRenderer?.remove();\n    this.bondRenderer = undefined;\n\n    if (!attachmentPoint) {\n      return;\n    }\n\n    const modelChanges =\n      this.editor.drawingEntitiesManager.addMonomerToAtomBond(\n        monomer,\n        atomRenderer.atom,\n        attachmentPoint,\n      );\n\n    this.editor.renderersContainer.update(modelChanges);\n    this.history.update(modelChanges);\n  }\n\n  public handleBondCreation = (payload: {\n    firstMonomer: BaseMonomer;\n    secondMonomer: BaseMonomer;\n    firstSelectedAttachmentPoint: AttachmentPointName;\n    secondSelectedAttachmentPoint: AttachmentPointName;\n  }): void => {\n    assert(this.bondRenderer);\n\n    const {\n      secondMonomer,\n      firstSelectedAttachmentPoint,\n      secondSelectedAttachmentPoint,\n    } = payload;\n    const modelChanges =\n      this.editor.drawingEntitiesManager.finishPolymerBondCreation(\n        this.bondRenderer.polymerBond,\n        secondMonomer,\n        firstSelectedAttachmentPoint,\n        secondSelectedAttachmentPoint,\n      );\n    this.history.update(modelChanges);\n    this.editor.renderersContainer.update(modelChanges);\n    if (firstSelectedAttachmentPoint === secondSelectedAttachmentPoint) {\n      this.editor.events.error.dispatch(\n        'You have connected monomers with attachment points of the same group',\n      );\n    }\n    this.isBondConnectionModalOpen = false;\n    this.editor.renderersContainer.deletePolymerBond(\n      this.bondRenderer.polymerBond,\n    );\n    this.bondRenderer = undefined;\n  };\n\n  public handleBondCreationCancellation = (\n    secondMonomer: BaseMonomer,\n  ): void => {\n    if (!this.bondRenderer) {\n      return;\n    }\n\n    const modelChanges =\n      this.editor.drawingEntitiesManager.cancelPolymerBondCreation(\n        this.bondRenderer.polymerBond,\n        secondMonomer,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n    this.isBondConnectionModalOpen = false;\n    this.bondRenderer = undefined;\n  };\n\n  public destroy() {\n    const modelChanges = this.removeBond();\n    modelChanges.merge(\n      this.editor.drawingEntitiesManager.removeHoverForAllMonomers(),\n    );\n\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  private shouldInvokeModal(\n    firstMonomer: BaseMonomer,\n    secondMonomer: BaseMonomer,\n    checkForPotentialBonds = true,\n  ) {\n    if (this.isHydrogenBond) {\n      return;\n    }\n\n    // No Modal: no free attachment point on second monomer\n    if (!secondMonomer.hasFreeAttachmentPoint) {\n      return false;\n    }\n\n    // No Modal: Both monomers have APs selected\n    if (\n      firstMonomer.chosenFirstAttachmentPointForBond !== null &&\n      secondMonomer.chosenSecondAttachmentPointForBond !== null\n    ) {\n      return false;\n    }\n\n    // Modal: either of the monomers doesn't have any potential APs\n    if (\n      checkForPotentialBonds &&\n      (!firstMonomer.hasPotentialBonds() || !secondMonomer.hasPotentialBonds())\n    ) {\n      return true;\n    }\n\n    // No Modal: Both monomers have only 1 attachment point\n    if (\n      firstMonomer.unUsedAttachmentPointsNamesList.length === 1 &&\n      secondMonomer.unUsedAttachmentPointsNamesList.length === 1\n    ) {\n      return false;\n    }\n\n    // Modal: Any or both monomers are Chems\n    if (firstMonomer instanceof Chem || secondMonomer instanceof Chem) {\n      return true;\n    }\n\n    // Modal: Any or both monomers are unresolved\n    if (\n      firstMonomer instanceof UnresolvedMonomer ||\n      secondMonomer instanceof UnresolvedMonomer\n    ) {\n      return true;\n    }\n\n    // Modal: One monomer is Peptide and another is RNA monomer\n    const rnaMonomerClasses = [Sugar, RNABase, Phosphate];\n    const firstMonomerIsRNA = rnaMonomerClasses.find(\n      (RNAClass) => firstMonomer instanceof RNAClass,\n    );\n    const secondMonomerIsRNA = rnaMonomerClasses.find(\n      (RNAClass) => secondMonomer instanceof RNAClass,\n    );\n    if (\n      (firstMonomerIsRNA && secondMonomer instanceof Peptide) ||\n      (secondMonomerIsRNA && firstMonomer instanceof Peptide)\n    ) {\n      return true;\n    }\n\n    // Modal: special case for Peptide chain\n    if (secondMonomer instanceof Peptide && firstMonomer instanceof Peptide) {\n      // one of monomers has more than 2 AP\n      const hasPlentyAttachmentPoints =\n        firstMonomer.listOfAttachmentPoints.length > 2 ||\n        secondMonomer.listOfAttachmentPoints.length > 2;\n\n      // at least one of monomers has more than 1 free AP\n      const hasPlentyFreeAttachmentPoints =\n        firstMonomer.unUsedAttachmentPointsNamesList.length > 1 ||\n        secondMonomer.unUsedAttachmentPointsNamesList.length > 1;\n\n      // there is no possibility to connect R1-R2\n      const BothR1AttachmentPointUsed =\n        firstMonomer.isAttachmentPointUsed(AttachmentPointName.R1) &&\n        secondMonomer.isAttachmentPointUsed(AttachmentPointName.R1);\n\n      const BothR2AttachmentPointUsed =\n        firstMonomer.isAttachmentPointUsed(AttachmentPointName.R2) &&\n        secondMonomer.isAttachmentPointUsed(AttachmentPointName.R2);\n\n      const R1AndR2AttachmentPointUsed =\n        (firstMonomer.isAttachmentPointUsed(AttachmentPointName.R2) &&\n          firstMonomer.isAttachmentPointUsed(AttachmentPointName.R1)) ||\n        (secondMonomer.isAttachmentPointUsed(AttachmentPointName.R2) &&\n          secondMonomer.isAttachmentPointUsed(AttachmentPointName.R1));\n\n      if (\n        hasPlentyAttachmentPoints &&\n        hasPlentyFreeAttachmentPoints &&\n        (BothR1AttachmentPointUsed ||\n          BothR2AttachmentPointUsed ||\n          R1AndR2AttachmentPointUsed)\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport { PolymerBond };\n","import {\n  AmbiguousMonomerType,\n  AttachmentPointName,\n  MonomerItemType,\n  MonomerOrAmbiguousType,\n} from 'domain/types';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { Command } from 'domain/entities/Command';\nimport { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport assert from 'assert';\nimport {\n  BaseMonomer,\n  Chem,\n  LinkerSequenceNode,\n  Phosphate,\n  Pool,\n  RNABase,\n  SGroupForest,\n  Struct,\n  SubChainNode,\n  Sugar,\n} from 'domain/entities';\nimport {\n  AttachmentPointHoverOperation,\n  MonomerAddOperation,\n  MonomerDeleteOperation,\n  MonomerHoverOperation,\n  MonomerItemModifyOperation,\n  MonomerMoveOperation,\n} from 'application/editor/operations/monomer';\nimport {\n  DrawingEntityHoverOperation,\n  DrawingEntityMoveOperation,\n  DrawingEntityRedrawOperation,\n  DrawingEntitySelectOperation,\n} from 'application/editor/operations/drawingEntity';\nimport {\n  PolymerBondAddOperation,\n  PolymerBondCancelCreationOperation,\n  PolymerBondDeleteOperation,\n  PolymerBondFinishCreationOperation,\n  PolymerBondMoveOperation,\n  PolymerBondShowInfoOperation,\n  ReconnectPolymerBondOperation,\n} from 'application/editor/operations/polymerBond';\nimport {\n  MONOMER_CONST,\n  monomerFactory,\n} from 'application/editor/operations/monomer/monomerFactory';\nimport { Coordinates, CoreEditor } from 'application/editor/internal';\nimport {\n  getNextMonomerInChain,\n  getSugarFromRnaBase,\n  isAmbiguousMonomerLibraryItem,\n  isRnaBaseOrAmbiguousRnaBase,\n  isValidNucleoside,\n  isValidNucleotide,\n} from 'domain/helpers/monomers';\nimport { ChainsCollection } from 'domain/entities/monomer-chains/ChainsCollection';\nimport { SequenceRenderer } from 'application/render/renderers/sequence/SequenceRenderer';\nimport { Nucleoside } from './Nucleoside';\nimport { Nucleotide } from './Nucleotide';\nimport { SequenceMode, SnakeMode } from 'application/editor';\nimport { CanvasMatrix } from 'domain/entities/canvas-matrix/CanvasMatrix';\nimport { RecalculateCanvasMatrixOperation } from 'application/editor/operations/modes/snake';\nimport { Matrix } from 'domain/entities/canvas-matrix/Matrix';\nimport { Cell } from 'domain/entities/canvas-matrix/Cell';\nimport { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\nimport { KetMonomerClass } from 'application/formatters';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { Bond } from 'domain/entities/CoreBond';\nimport {\n  AtomAddOperation,\n  AtomDeleteOperation,\n} from 'application/editor/operations/coreAtom/atom';\nimport {\n  BondAddOperation,\n  BondDeleteOperation,\n} from 'application/editor/operations/coreBond/bond';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\nimport {\n  MonomerToAtomBondAddOperation,\n  MonomerToAtomBondDeleteOperation,\n} from 'application/editor/operations/monomerToAtomBond/monomerToAtomBond';\nimport { AtomLabel } from 'domain/constants';\nimport { isMonomerSgroupWithAttachmentPoints } from '../../utilities/monomers';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\nimport { MACROMOLECULES_BOND_TYPES } from 'application/editor/tools/Bond';\nimport {\n  RNA_DNA_NON_MODIFIED_PART,\n  RnaDnaNaturalAnaloguesEnum,\n  StandardAmbiguousRnaBase,\n} from 'domain/constants/monomers';\nimport { isNumber } from 'lodash';\nimport { Chain } from 'domain/entities/monomer-chains/Chain';\n\nconst VERTICAL_DISTANCE_FROM_ROW_WITHOUT_RNA = 30;\nconst VERTICAL_OFFSET_FROM_ROW_WITH_RNA = 142;\nconst DISTANCE_FROM_RIGHT = 55;\nexport const SNAKE_LAYOUT_CELL_WIDTH = 60;\nexport const SNAKE_LAYOUT_Y_OFFSET_BETWEEN_CHAINS =\n  SNAKE_LAYOUT_CELL_WIDTH * 2 + 30;\nexport const MONOMER_START_X_POSITION = 20 + SNAKE_LAYOUT_CELL_WIDTH / 2;\nexport const MONOMER_START_Y_POSITION = 20 + SNAKE_LAYOUT_CELL_WIDTH / 2;\n\ntype RnaPresetAdditionParams = {\n  sugar: MonomerItemType;\n  sugarPosition: Vec2;\n  rnaBase: MonomerItemType | undefined;\n  rnaBasePosition: Vec2 | undefined;\n  phosphate: MonomerItemType | undefined;\n  phosphatePosition: Vec2 | undefined;\n  existingNode?: Nucleotide | Nucleoside | LinkerSequenceNode;\n};\n\nexport class DrawingEntitiesManager {\n  public monomers: Map<number, BaseMonomer> = new Map();\n  public polymerBonds: Map<number, PolymerBond | HydrogenBond> = new Map();\n  public atoms: Map<number, Atom> = new Map();\n  public bonds: Map<number, Bond> = new Map();\n  public monomerToAtomBonds: Map<number, MonomerToAtomBond> = new Map();\n\n  public micromoleculesHiddenEntities: Struct = new Struct();\n  public canvasMatrix?: CanvasMatrix;\n  public snakeLayoutMatrix?: Matrix<Cell>;\n  public get bottomRightMonomerPosition(): Vec2 {\n    let position: Vec2 | null = null;\n\n    this.monomers.forEach((monomer) => {\n      if (\n        !position ||\n        monomer.position.x + monomer.position.y > position.x + position.y\n      ) {\n        position = monomer.position;\n      }\n    });\n\n    return position || new Vec2(0, 0, 0);\n  }\n\n  get selectedEntitiesArr() {\n    const selectedEntities: DrawingEntity[] = [];\n    this.allEntities.forEach(([, drawingEntity]) => {\n      if (drawingEntity.selected) {\n        selectedEntities.push(drawingEntity);\n      }\n    });\n    return selectedEntities;\n  }\n\n  public get selectedEntities() {\n    return this.allEntities.filter(\n      ([, drawingEntity]) => drawingEntity.selected,\n    );\n  }\n\n  public get allEntities() {\n    return [\n      ...(this.monomers as Map<number, DrawingEntity>),\n      ...(this.polymerBonds as Map<number, DrawingEntity>),\n      ...(this.monomerToAtomBonds as Map<number, DrawingEntity>),\n      ...(this.bonds as Map<number, DrawingEntity>),\n      ...(this.atoms as Map<number, DrawingEntity>),\n    ];\n  }\n\n  public get hasDrawingEntities() {\n    return this.allEntities.length !== 0;\n  }\n\n  public get hasMonomers() {\n    const monomers = [...this.monomers.values()].filter(\n      (monomer) =>\n        !monomer.monomerItem.props.isMicromoleculeFragment ||\n        isMonomerSgroupWithAttachmentPoints(monomer),\n    );\n\n    return monomers.length !== 0;\n  }\n\n  public get allBondsToMonomers() {\n    return [\n      ...(this.polymerBonds as Map<number, PolymerBond>),\n      ...(this.monomerToAtomBonds as Map<number, MonomerToAtomBond>),\n    ];\n  }\n\n  public deleteSelectedEntities() {\n    const mergedCommand = new Command();\n    this.selectedEntities.forEach(([, drawingEntity]) => {\n      const command = this.deleteDrawingEntity(drawingEntity);\n      mergedCommand.merge(command);\n    });\n    return mergedCommand;\n  }\n\n  public deleteAllEntities() {\n    const mergedCommand = new Command();\n    this.allEntities.forEach(([, drawingEntity]) => {\n      const command = this.deleteDrawingEntity(drawingEntity, false);\n      mergedCommand.merge(command);\n    });\n    return mergedCommand;\n  }\n\n  public addMonomerChangeModel(\n    monomerItem: MonomerItemType,\n    position: Vec2,\n    _monomer?: BaseMonomer,\n  ) {\n    if (_monomer) {\n      this.monomers.set(_monomer.id, _monomer);\n      return _monomer;\n    }\n\n    const monomer = this.createMonomer(monomerItem, position);\n\n    monomer.moveAbsolute(position);\n    this.monomers.set(monomer.id, monomer);\n\n    return monomer;\n  }\n\n  public createMonomer(monomerItem: MonomerOrAmbiguousType, position: Vec2) {\n    if (isAmbiguousMonomerLibraryItem(monomerItem)) {\n      return new AmbiguousMonomer(monomerItem, position);\n    } else {\n      const [Monomer] = monomerFactory(monomerItem);\n\n      return new Monomer(monomerItem, position);\n    }\n  }\n\n  public updateMonomerItem(\n    monomer: BaseMonomer,\n    monomerItemNew: MonomerItemType,\n  ) {\n    const initialMonomer = this.monomers.get(monomer.id);\n    if (!initialMonomer) return monomer;\n    initialMonomer.monomerItem = monomerItemNew;\n    this.monomers.set(monomer.id, initialMonomer);\n    return initialMonomer;\n  }\n\n  public addMonomer(\n    monomerItem: MonomerItemType,\n    position: Vec2,\n    _monomer?: BaseMonomer,\n  ) {\n    const command = new Command();\n    let addMonomerChangeModelCallback = this.addMonomerChangeModel.bind(\n      this,\n      monomerItem,\n      position,\n    );\n    if (_monomer) {\n      addMonomerChangeModelCallback = addMonomerChangeModelCallback.bind(\n        this,\n        _monomer,\n      );\n    }\n    const operation = new MonomerAddOperation(\n      addMonomerChangeModelCallback,\n      this.deleteMonomerChangeModel.bind(this),\n    );\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public deleteDrawingEntity(\n    drawingEntity: DrawingEntity,\n    needToDeleteConnectedEntities = true,\n  ) {\n    if (drawingEntity instanceof BaseMonomer) {\n      return this.deleteMonomer(drawingEntity, needToDeleteConnectedEntities);\n    } else if (\n      drawingEntity instanceof PolymerBond ||\n      drawingEntity instanceof HydrogenBond\n    ) {\n      return this.deletePolymerBond(drawingEntity);\n    } else if (drawingEntity instanceof MonomerToAtomBond) {\n      return this.deleteMonomerToAtomBond(drawingEntity);\n    } else if (drawingEntity instanceof Bond) {\n      return this.deleteBond(drawingEntity);\n    } else if (drawingEntity instanceof Atom) {\n      return this.deleteAtom(drawingEntity, needToDeleteConnectedEntities);\n    } else {\n      return new Command();\n    }\n  }\n\n  public selectDrawingEntity(drawingEntity: DrawingEntity) {\n    const command = this.unselectAllDrawingEntities();\n\n    drawingEntity.turnOnSelection();\n    command.merge(this.createDrawingEntitySelectionCommand(drawingEntity));\n\n    return command;\n  }\n\n  public selectDrawingEntities(drawingEntities: DrawingEntity[]) {\n    const command = this.unselectAllDrawingEntities();\n    drawingEntities.forEach((drawingEntity: DrawingEntity) => {\n      drawingEntity.turnOnSelection();\n      const operation = new DrawingEntitySelectOperation(drawingEntity);\n      command.addOperation(operation);\n    });\n    return command;\n  }\n\n  public createDrawingEntitySelectionCommand(drawingEntity: DrawingEntity) {\n    const command = new Command();\n\n    const selectionCommand = new DrawingEntitySelectOperation(drawingEntity);\n    command.addOperation(selectionCommand);\n\n    return command;\n  }\n\n  public unselectAllDrawingEntities() {\n    const command = new Command();\n\n    this.allEntities.forEach(([, drawingEntity]) => {\n      if (drawingEntity.selected) {\n        command.merge(this.unselectDrawingEntity(drawingEntity));\n      }\n    });\n\n    return command;\n  }\n\n  public unselectDrawingEntity(drawingEntity: DrawingEntity) {\n    const command = new Command();\n    drawingEntity.turnOffSelection();\n    command.addOperation(new DrawingEntitySelectOperation(drawingEntity));\n    return command;\n  }\n\n  public selectAllDrawingEntities() {\n    const command = new Command();\n\n    this.allEntities.forEach(([, drawingEntity]) => {\n      if (!drawingEntity.selected) {\n        drawingEntity.turnOnSelection();\n        const operation = new DrawingEntitySelectOperation(drawingEntity);\n        command.addOperation(operation);\n      }\n    });\n\n    return command;\n  }\n\n  public addDrawingEntitiesToSelection(drawingEntities: DrawingEntity[]) {\n    const command = new Command();\n    drawingEntities.forEach((drawingEntity: DrawingEntity) => {\n      if (drawingEntity.selected) {\n        drawingEntity.turnOffSelection();\n      } else {\n        drawingEntity.turnOnSelection();\n      }\n      command.addOperation(new DrawingEntitySelectOperation(drawingEntity));\n    });\n    return command;\n  }\n\n  public moveDrawingEntityModelChange(\n    drawingEntity: DrawingEntity,\n    offset?: Vec2,\n  ) {\n    if (\n      drawingEntity instanceof PolymerBond ||\n      drawingEntity instanceof HydrogenBond\n    ) {\n      drawingEntity.moveToLinkedEntities();\n    } else if (drawingEntity instanceof Bond) {\n      drawingEntity.moveToLinkedAtoms();\n    } else if (drawingEntity instanceof MonomerToAtomBond) {\n      drawingEntity.moveToLinkedEntities();\n    } else {\n      assert(offset);\n      drawingEntity.moveRelative(offset);\n      if (\n        drawingEntity instanceof BaseMonomer &&\n        isMonomerSgroupWithAttachmentPoints(drawingEntity)\n      ) {\n        this.moveChemAtomsPoint(drawingEntity, offset);\n      }\n    }\n\n    return drawingEntity;\n  }\n\n  private moveChemAtomsPoint(drawingEntity: BaseMonomer, offset?: Vec2) {\n    if (drawingEntity.monomerItem.props.isMicromoleculeFragment && offset) {\n      drawingEntity.monomerItem.struct.atoms.forEach((atom) => {\n        atom.pp.add_(offset);\n      });\n\n      drawingEntity.monomerItem.struct.sgroups.forEach((sgroup) => {\n        sgroup.pp?.add_(offset);\n      });\n    }\n  }\n\n  public moveSelectedDrawingEntities(\n    partOfMovementOffset: Vec2,\n    fullMovementOffset?: Vec2,\n  ) {\n    const command = new Command();\n\n    [...this.atoms.values(), ...this.monomers.values()].forEach(\n      (drawingEntity) => {\n        if (\n          drawingEntity instanceof BaseMonomer &&\n          drawingEntity.monomerItem.props.isMicromoleculeFragment &&\n          !isMonomerSgroupWithAttachmentPoints(drawingEntity)\n        ) {\n          return;\n        }\n\n        if (drawingEntity.selected) {\n          command.merge(\n            this.createDrawingEntityMovingCommand(\n              drawingEntity,\n              partOfMovementOffset,\n              fullMovementOffset,\n            ),\n          );\n        }\n      },\n    );\n\n    this.polymerBonds.forEach((drawingEntity) => {\n      if (\n        drawingEntity.selected ||\n        drawingEntity.firstMonomer.selected ||\n        drawingEntity.secondMonomer?.selected\n      ) {\n        command.merge(\n          this.createDrawingEntityMovingCommand(\n            drawingEntity,\n            partOfMovementOffset,\n            fullMovementOffset,\n          ),\n        );\n      }\n    });\n\n    this.monomerToAtomBonds.forEach((drawingEntity) => {\n      if (\n        drawingEntity.selected ||\n        drawingEntity.monomer.selected ||\n        drawingEntity.atom.selected\n      ) {\n        command.merge(\n          this.createDrawingEntityMovingCommand(\n            drawingEntity,\n            partOfMovementOffset,\n            fullMovementOffset,\n          ),\n        );\n      }\n    });\n\n    this.bonds.forEach((drawingEntity) => {\n      if (\n        drawingEntity.selected ||\n        drawingEntity.firstAtom.selected ||\n        drawingEntity.secondAtom.selected\n      ) {\n        command.merge(\n          this.createDrawingEntityMovingCommand(\n            drawingEntity,\n            partOfMovementOffset,\n            fullMovementOffset,\n          ),\n        );\n      }\n    });\n\n    return command;\n  }\n\n  public createDrawingEntityMovingCommand(\n    drawingEntity: DrawingEntity,\n    partOfMovementOffset: Vec2,\n    fullMovementOffset?: Vec2,\n  ) {\n    const command = new Command();\n\n    const movingCommand = new DrawingEntityMoveOperation(\n      this.moveDrawingEntityModelChange.bind(\n        this,\n        drawingEntity,\n        partOfMovementOffset,\n      ),\n      this.moveDrawingEntityModelChange.bind(\n        this,\n        drawingEntity,\n        fullMovementOffset\n          ? fullMovementOffset.negated()\n          : partOfMovementOffset.negated(),\n      ),\n      this.moveDrawingEntityModelChange.bind(\n        this,\n        drawingEntity,\n        fullMovementOffset || partOfMovementOffset,\n      ),\n      drawingEntity,\n    );\n    command.addOperation(movingCommand);\n\n    return command;\n  }\n\n  public createDrawingEntityRedrawCommand(\n    drawingEntityRedrawModelChange: () => DrawingEntity,\n    invertDrawingEntityRedrawModelChange: () => DrawingEntity,\n  ) {\n    const command = new Command();\n\n    const redrawCommand = new DrawingEntityRedrawOperation(\n      drawingEntityRedrawModelChange,\n      invertDrawingEntityRedrawModelChange,\n    );\n    command.addOperation(redrawCommand);\n\n    return command;\n  }\n\n  private deleteMonomerChangeModel(monomer: BaseMonomer) {\n    this.monomers.delete(monomer.id);\n  }\n\n  public deleteMonomer(\n    monomer: BaseMonomer,\n    needToDeleteConnectedBonds = true,\n  ) {\n    const command = new Command();\n    const operation = new MonomerDeleteOperation(\n      monomer,\n      this.addMonomerChangeModel.bind(\n        this,\n        monomer.monomerItem,\n        monomer.position,\n      ),\n      this.deleteMonomerChangeModel.bind(this),\n    );\n    command.addOperation(operation);\n\n    if (needToDeleteConnectedBonds && monomer.hasBonds) {\n      monomer.forEachBond((bond) => {\n        // Do not delete connected bond if it is selected because it is done deleteDrawingEntity method\n        // This check helps to avoid operations duplication\n        if (bond.selected) return;\n\n        if (bond instanceof PolymerBond || bond instanceof HydrogenBond) {\n          // We need to remove connected bond when doing a group selection even if it is not selected\n          // and mark it as selected to avoid operations duplication\n          bond.turnOnSelection();\n          command.merge(this.deletePolymerBond(bond));\n        } else {\n          command.merge(this.deleteMonomerToAtomBond(bond));\n        }\n      });\n    }\n\n    return command;\n  }\n\n  public modifyMonomerItem(\n    monomer: BaseMonomer,\n    monomerItemNew: MonomerItemType,\n  ) {\n    const command = new Command();\n    const operation = new MonomerItemModifyOperation(\n      monomer,\n      this.updateMonomerItem.bind(this, monomer, monomerItemNew),\n      this.updateMonomerItem.bind(this, monomer, monomer.monomerItem),\n    );\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public selectIfLocatedInRectangle(\n    rectangleTopLeftPoint: Vec2,\n    rectangleBottomRightPoint: Vec2,\n    previousSelectedEntities: [number, DrawingEntity][],\n    shiftKey = false,\n  ) {\n    const command = new Command();\n    this.allEntities.forEach(([, drawingEntity]) => {\n      if (\n        drawingEntity instanceof Chem &&\n        drawingEntity.monomerItem.props.isMicromoleculeFragment &&\n        !isMonomerSgroupWithAttachmentPoints(drawingEntity)\n      ) {\n        return;\n      }\n\n      const isPreviousSelected = previousSelectedEntities.find(\n        ([, entity]) => entity === drawingEntity,\n      );\n      let isValueChanged;\n      const editor = CoreEditor.provideEditorInstance();\n      if (\n        editor.mode instanceof SequenceMode &&\n        drawingEntity instanceof PolymerBond\n      ) {\n        isValueChanged = this.checkBondSelectionForSequenceMode(\n          drawingEntity,\n          isValueChanged,\n        );\n      } else {\n        isValueChanged = drawingEntity.selectIfLocatedInRectangle(\n          rectangleTopLeftPoint,\n          rectangleBottomRightPoint,\n          !!isPreviousSelected,\n          shiftKey,\n        );\n      }\n      if (isValueChanged) {\n        const selectionCommand =\n          this.createDrawingEntitySelectionCommand(drawingEntity);\n\n        command.merge(selectionCommand);\n      }\n    });\n    return command;\n  }\n\n  private checkBondSelectionForSequenceMode(\n    bond: PolymerBond,\n    isValueChanged: boolean,\n  ) {\n    const prevSelectedValue = bond.selected;\n    if (bond.firstMonomer.selected && bond.secondMonomer?.selected) {\n      bond.turnOnSelection();\n    } else {\n      bond.turnOffSelection();\n    }\n    isValueChanged = prevSelectedValue !== bond.selected;\n    return isValueChanged;\n  }\n\n  public startPolymerBondCreationChangeModel(\n    firstMonomer,\n    startPosition,\n    endPosition,\n    bondType = MACROMOLECULES_BOND_TYPES.SINGLE,\n    _polymerBond?: PolymerBond | HydrogenBond,\n  ) {\n    if (_polymerBond) {\n      this.polymerBonds.set(_polymerBond.id, _polymerBond);\n      return _polymerBond;\n    }\n\n    const polymerBond =\n      bondType === MACROMOLECULES_BOND_TYPES.HYDROGEN\n        ? new HydrogenBond(firstMonomer)\n        : new PolymerBond(firstMonomer);\n    this.polymerBonds.set(polymerBond.id, polymerBond);\n    // If we started from a specific AP, we need to 'attach' the bond to the first monomer\n    if (firstMonomer.chosenFirstAttachmentPointForBond) {\n      const startBondAttachmentPoint = firstMonomer.startBondAttachmentPoint;\n      firstMonomer.setBond(startBondAttachmentPoint, polymerBond);\n      firstMonomer.setPotentialBond(startBondAttachmentPoint, polymerBond);\n    }\n    polymerBond.moveBondStartAbsolute(startPosition.x, startPosition.y);\n    polymerBond.moveBondEndAbsolute(endPosition.x, endPosition.y);\n    return polymerBond;\n  }\n\n  public startPolymerBondCreation(\n    firstMonomer: BaseMonomer,\n    startPosition: Vec2,\n    endPosition: Vec2,\n    bondType: MACROMOLECULES_BOND_TYPES,\n  ) {\n    const command = new Command();\n\n    const operation = new PolymerBondAddOperation(\n      this.startPolymerBondCreationChangeModel.bind(\n        this,\n        firstMonomer,\n        startPosition,\n        endPosition,\n        bondType,\n      ),\n      this.deletePolymerBondChangeModel.bind(this),\n    );\n\n    command.addOperation(operation);\n\n    return { command, polymerBond: operation.polymerBond };\n  }\n\n  public deletePolymerBondChangeModel(polymerBond: PolymerBond | HydrogenBond) {\n    if (this.polymerBonds.get(polymerBond.id) !== polymerBond) {\n      return;\n    }\n\n    this.polymerBonds.delete(polymerBond.id);\n\n    const firstMonomerAttachmentPoint =\n      polymerBond.firstMonomer.getAttachmentPointByBond(polymerBond);\n    const secondMonomerAttachmentPoint =\n      polymerBond.secondMonomer?.getAttachmentPointByBond(polymerBond);\n    polymerBond.firstMonomer.removePotentialBonds();\n    polymerBond.secondMonomer?.removePotentialBonds();\n    polymerBond.firstMonomer.turnOffSelection();\n    polymerBond.secondMonomer?.turnOffSelection();\n    if (firstMonomerAttachmentPoint || polymerBond instanceof HydrogenBond) {\n      polymerBond.firstMonomer.unsetBond(\n        firstMonomerAttachmentPoint,\n        polymerBond,\n      );\n    }\n    if (secondMonomerAttachmentPoint || polymerBond instanceof HydrogenBond) {\n      polymerBond.secondMonomer?.unsetBond(\n        secondMonomerAttachmentPoint,\n        polymerBond,\n      );\n    }\n  }\n\n  public deletePolymerBond(polymerBond: PolymerBond | HydrogenBond) {\n    const command = new Command();\n    const firstAttachmentPoint =\n      polymerBond.firstMonomer.getAttachmentPointByBond(\n        polymerBond,\n      ) as AttachmentPointName;\n    const secondAttachmentPoint =\n      polymerBond.secondMonomer?.getAttachmentPointByBond(\n        polymerBond,\n      ) as AttachmentPointName;\n\n    const operation = new PolymerBondDeleteOperation(\n      polymerBond,\n      this.deletePolymerBondChangeModel.bind(this, polymerBond),\n      (_polymerBond?: PolymerBond | HydrogenBond) =>\n        this.finishPolymerBondCreationModelChange(\n          polymerBond.firstMonomer,\n          polymerBond.secondMonomer as BaseMonomer,\n          firstAttachmentPoint,\n          secondAttachmentPoint,\n          MACROMOLECULES_BOND_TYPES.SINGLE,\n          _polymerBond,\n        ),\n    );\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public cancelPolymerBondCreation(\n    polymerBond: PolymerBond,\n    secondMonomer?: BaseMonomer,\n  ) {\n    this.polymerBonds.delete(polymerBond.id);\n    const command = new Command();\n    polymerBond.firstMonomer.removeBond(polymerBond);\n    polymerBond.firstMonomer.removePotentialBonds(true);\n    polymerBond.firstMonomer.turnOffSelection();\n    polymerBond.firstMonomer.turnOffHover();\n    polymerBond.firstMonomer.turnOffAttachmentPointsVisibility();\n\n    secondMonomer?.turnOffSelection();\n    secondMonomer?.turnOffHover();\n    secondMonomer?.turnOffAttachmentPointsVisibility();\n    const operation = new PolymerBondCancelCreationOperation(\n      polymerBond,\n      secondMonomer,\n    );\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public movePolymerBond(polymerBond: PolymerBond, position: Vec2) {\n    const command = new Command();\n    polymerBond.moveBondEndAbsolute(position.x, position.y);\n\n    const operation = new PolymerBondMoveOperation(polymerBond);\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public finishPolymerBondCreationModelChange(\n    firstMonomer: BaseMonomer,\n    secondMonomer: BaseMonomer,\n    firstMonomerAttachmentPoint: AttachmentPointName,\n    secondMonomerAttachmentPoint: AttachmentPointName,\n    bondType?: MACROMOLECULES_BOND_TYPES,\n    _polymerBond?: PolymerBond,\n  ) {\n    if (_polymerBond) {\n      this.polymerBonds.set(_polymerBond.id, _polymerBond);\n      firstMonomer.setBond(firstMonomerAttachmentPoint, _polymerBond);\n      secondMonomer.setBond(secondMonomerAttachmentPoint, _polymerBond);\n      return _polymerBond;\n    }\n\n    const isHydrogenBond = bondType === MACROMOLECULES_BOND_TYPES.HYDROGEN;\n    const polymerBond = isHydrogenBond\n      ? new HydrogenBond(firstMonomer)\n      : new PolymerBond(firstMonomer);\n    this.polymerBonds.set(polymerBond.id, polymerBond);\n    polymerBond.setSecondMonomer(secondMonomer);\n    polymerBond.firstMonomer.setBond(firstMonomerAttachmentPoint, polymerBond);\n    assert(polymerBond.secondMonomer);\n    polymerBond.secondMonomer.setBond(\n      secondMonomerAttachmentPoint,\n      polymerBond,\n    );\n\n    polymerBond.firstMonomer.removePotentialBonds(true);\n    polymerBond.secondMonomer.removePotentialBonds(true);\n    polymerBond.firstMonomer.setChosenFirstAttachmentPoint(null);\n    polymerBond.secondMonomer?.setChosenSecondAttachmentPoint(null);\n    polymerBond.moveToLinkedEntities();\n    polymerBond.firstMonomer.turnOffSelection();\n    polymerBond.firstMonomer.turnOffHover();\n    polymerBond.firstMonomer.turnOffAttachmentPointsVisibility();\n    polymerBond.secondMonomer.turnOffSelection();\n    polymerBond.secondMonomer.turnOffHover();\n    polymerBond.secondMonomer.turnOffAttachmentPointsVisibility();\n    polymerBond.turnOffHover();\n\n    return polymerBond;\n  }\n\n  public finishPolymerBondCreation(\n    polymerBond: PolymerBond,\n    secondMonomer: BaseMonomer,\n    firstMonomerAttachmentPoint: AttachmentPointName,\n    secondMonomerAttachmentPoint: AttachmentPointName,\n    bondType = MACROMOLECULES_BOND_TYPES.SINGLE,\n  ) {\n    const command = new Command();\n    const editor = CoreEditor.provideEditorInstance();\n\n    const firstMonomer = polymerBond.firstMonomer;\n    this.polymerBonds.delete(polymerBond.id);\n    const operation = new PolymerBondFinishCreationOperation(\n      (polymerBond?: PolymerBond) =>\n        this.finishPolymerBondCreationModelChange(\n          firstMonomer,\n          secondMonomer,\n          firstMonomerAttachmentPoint,\n          secondMonomerAttachmentPoint,\n          bondType,\n          polymerBond,\n        ),\n      this.deletePolymerBondChangeModel.bind(this),\n    );\n\n    command.addOperation(operation);\n\n    if (editor.mode instanceof SnakeMode) {\n      command.merge(this.recalculateCanvasMatrix());\n    }\n\n    command.merge(this.recalculateAntisenseChains());\n\n    return command;\n  }\n\n  public createPolymerBond(\n    firstMonomer: BaseMonomer,\n    secondMonomer: BaseMonomer,\n    firstMonomerAttachmentPoint: AttachmentPointName,\n    secondMonomerAttachmentPoint: AttachmentPointName,\n    bondType = MACROMOLECULES_BOND_TYPES.SINGLE,\n  ) {\n    const command = new Command();\n\n    const operation = new PolymerBondFinishCreationOperation(\n      (polymerBond?: PolymerBond) =>\n        this.finishPolymerBondCreationModelChange(\n          firstMonomer,\n          secondMonomer,\n          firstMonomerAttachmentPoint,\n          secondMonomerAttachmentPoint,\n          bondType,\n          polymerBond,\n        ),\n      this.deletePolymerBondChangeModel.bind(this),\n    );\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public intendToStartBondCreation(monomer: BaseMonomer) {\n    const command = new Command();\n    monomer.turnOnHover();\n    monomer.turnOnAttachmentPointsVisibility();\n\n    const operation = new MonomerHoverOperation(monomer, true);\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public intendToStartAttachmenPointBondCreation(\n    monomer: BaseMonomer,\n    attachmentPointName: AttachmentPointName,\n  ) {\n    const command = new Command();\n    monomer.turnOnHover();\n    monomer.turnOnAttachmentPointsVisibility();\n\n    const operation = new AttachmentPointHoverOperation(\n      monomer,\n      attachmentPointName,\n    );\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public intendToFinishBondCreation(\n    monomer: BaseMonomer,\n    bond: PolymerBond,\n    shouldCalculateBonds: boolean,\n  ) {\n    const command = new Command();\n    monomer.turnOnHover();\n    monomer.turnOnAttachmentPointsVisibility();\n    if (shouldCalculateBonds) {\n      bond.firstMonomer.removePotentialBonds();\n      monomer.removePotentialBonds();\n      const firstMonomerValidSourcePoint =\n        bond.firstMonomer.getValidSourcePoint(monomer);\n      const secondMonomerValidTargetPoint = monomer.getValidTargetPoint(\n        bond.firstMonomer,\n      );\n      bond.firstMonomer.setPotentialBond(firstMonomerValidSourcePoint, bond);\n      monomer.setPotentialBond(secondMonomerValidTargetPoint, bond);\n    }\n    const connectFirstMonomerOperation = new MonomerHoverOperation(\n      bond.firstMonomer,\n      true,\n    );\n    const connectSecondMonomerOperation = new MonomerHoverOperation(\n      monomer,\n      true,\n    );\n    command.addOperation(connectFirstMonomerOperation);\n    command.addOperation(connectSecondMonomerOperation);\n    return command;\n  }\n\n  public intendToFinishAttachmenPointBondCreation(\n    monomer: BaseMonomer,\n    bond: PolymerBond,\n    attachmentPointName: AttachmentPointName,\n    shouldCalculateBonds: boolean,\n  ) {\n    const command = new Command();\n    monomer.turnOnHover();\n    monomer.turnOnAttachmentPointsVisibility();\n\n    if (monomer.isAttachmentPointUsed(attachmentPointName)) {\n      const operation = new MonomerHoverOperation(monomer, true);\n      command.addOperation(operation);\n      return command;\n    }\n    if (attachmentPointName) {\n      monomer.setPotentialSecondAttachmentPoint(attachmentPointName);\n      monomer.setPotentialBond(attachmentPointName, bond);\n    }\n\n    if (shouldCalculateBonds) {\n      bond.firstMonomer.removePotentialBonds();\n      monomer.removePotentialBonds();\n      const firstMonomerValidSourcePoint =\n        bond.firstMonomer.getValidSourcePoint(monomer);\n      const secondMonomerValidTargetPoint = monomer.getValidTargetPoint(\n        bond.firstMonomer,\n      );\n      bond.firstMonomer.setPotentialBond(firstMonomerValidSourcePoint, bond);\n      monomer.setPotentialBond(secondMonomerValidTargetPoint, bond);\n    }\n    const connectFirstMonomerOperation = new MonomerHoverOperation(\n      bond.firstMonomer,\n      true,\n    );\n    const connectSecondMonomerOperation = new AttachmentPointHoverOperation(\n      monomer,\n      attachmentPointName,\n    );\n    command.addOperation(connectFirstMonomerOperation);\n    command.addOperation(connectSecondMonomerOperation);\n    return command;\n  }\n\n  public cancelIntentionToFinishBondCreation(\n    monomer: BaseMonomer,\n    polymerBond?: PolymerBond,\n  ) {\n    const command = new Command();\n    monomer.turnOffHover();\n    monomer.turnOffAttachmentPointsVisibility();\n    monomer.setPotentialSecondAttachmentPoint(null);\n    monomer.removePotentialBonds();\n    const operation = new MonomerHoverOperation(monomer, true);\n    command.addOperation(operation);\n\n    // If the initial AP has been chosen automatically, it needs to be removed\n    if (\n      polymerBond &&\n      !polymerBond.firstMonomer.chosenFirstAttachmentPointForBond\n    ) {\n      polymerBond.firstMonomer.removePotentialBonds();\n      const operation = new MonomerHoverOperation(\n        polymerBond.firstMonomer,\n        true,\n      );\n      command.addOperation(operation);\n    }\n\n    return command;\n  }\n\n  public intendToSelectDrawingEntity(drawingEntity: DrawingEntity) {\n    const command = new Command();\n\n    drawingEntity.turnOnHover();\n\n    const operation = new DrawingEntityHoverOperation(drawingEntity);\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public cancelIntentionToSelectDrawingEntity(drawingEntity: DrawingEntity) {\n    const command = new Command();\n\n    drawingEntity.turnOffHover();\n\n    const operation = new DrawingEntityHoverOperation(drawingEntity);\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public showPolymerBondInformation(polymerBond: PolymerBond) {\n    const command = new Command();\n\n    polymerBond.turnOnHover();\n    polymerBond.firstMonomer.turnOnHover();\n\n    assert(polymerBond.secondMonomer);\n\n    polymerBond.secondMonomer.turnOnHover();\n\n    if (!(polymerBond instanceof HydrogenBond)) {\n      polymerBond.firstMonomer.turnOnAttachmentPointsVisibility();\n      polymerBond.secondMonomer.turnOnAttachmentPointsVisibility();\n    }\n\n    const operation = new PolymerBondShowInfoOperation(polymerBond);\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public hidePolymerBondInformation(polymerBond: PolymerBond) {\n    const command = new Command();\n\n    polymerBond.turnOffHover();\n    polymerBond.firstMonomer.turnOffHover();\n    polymerBond.firstMonomer.turnOffAttachmentPointsVisibility();\n\n    assert(polymerBond.secondMonomer);\n\n    polymerBond.secondMonomer.turnOffHover();\n    polymerBond.secondMonomer.turnOffAttachmentPointsVisibility();\n\n    const operation = new PolymerBondShowInfoOperation(polymerBond);\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public addRnaPresetFromNode = (\n    node: Nucleotide | Nucleoside | LinkerSequenceNode,\n  ) => {\n    // TODO: Consider combining it with the method below to avoid code duplication\n    const command = new Command();\n    const sugarMonomer = node.monomers.find(\n      (monomer) => monomer instanceof Sugar,\n    ) as Sugar | AmbiguousMonomer;\n    const phosphateMonomer = node.monomers.find(\n      (monomer) => monomer instanceof Phosphate,\n    ) as Phosphate | AmbiguousMonomer;\n    const rnaBaseMonomer = node.monomers.find((monomer) =>\n      isRnaBaseOrAmbiguousRnaBase(monomer),\n    ) as RNABase | AmbiguousMonomer;\n    const monomers = [rnaBaseMonomer, sugarMonomer, phosphateMonomer].filter(\n      (monomer) => monomer !== undefined,\n    ) as BaseMonomer[];\n\n    monomers.forEach((monomer, monomerIndex) => {\n      const monomerAddOperation =\n        monomer instanceof AmbiguousMonomer\n          ? new MonomerAddOperation(\n              this.addAmbiguousMonomerChangeModel.bind(\n                this,\n                monomer.variantMonomerItem,\n                monomer.position,\n                monomer,\n              ),\n              this.deleteMonomerChangeModel.bind(this),\n            )\n          : new MonomerAddOperation(\n              this.addMonomerChangeModel.bind(\n                this,\n                monomer.monomerItem,\n                monomer.position,\n                monomer,\n              ),\n              this.deleteMonomerChangeModel.bind(this),\n            );\n\n      command.addOperation(monomerAddOperation);\n      if (monomerIndex > 0) {\n        const previousMonomer = monomers[monomerIndex - 1];\n        const attPointStart = previousMonomer.getValidSourcePoint(monomer);\n        const attPointEnd = monomer.getValidSourcePoint(previousMonomer);\n\n        assert(attPointStart);\n        assert(attPointEnd);\n\n        const operation = new PolymerBondFinishCreationOperation(\n          (polymerBond?: PolymerBond) =>\n            this.finishPolymerBondCreationModelChange(\n              previousMonomer as BaseMonomer,\n              monomer,\n              attPointStart,\n              attPointEnd,\n              MACROMOLECULES_BOND_TYPES.SINGLE,\n              polymerBond,\n            ),\n          this.deletePolymerBondChangeModel.bind(this),\n        );\n        command.addOperation(operation);\n      }\n    });\n\n    return command;\n  };\n\n  public addRnaPreset({\n    sugar,\n    sugarPosition,\n    phosphate,\n    phosphatePosition,\n    rnaBase,\n    rnaBasePosition,\n  }: RnaPresetAdditionParams) {\n    const command = new Command();\n    const monomersToAdd: Array<[MonomerItemType, Vec2]> = [];\n    if (rnaBase && rnaBasePosition) {\n      monomersToAdd.push([rnaBase, rnaBasePosition]);\n    }\n    monomersToAdd.push([sugar, sugarPosition]);\n    if (phosphate && phosphatePosition) {\n      monomersToAdd.push([phosphate, phosphatePosition]);\n    }\n\n    const monomers: BaseMonomer[] = [];\n\n    monomersToAdd.forEach(([monomerItem, monomerPosition], monomerIndex) => {\n      const monomerAddOperation = new MonomerAddOperation(\n        this.addMonomerChangeModel.bind(this, monomerItem, monomerPosition),\n        this.deleteMonomerChangeModel.bind(this),\n      );\n      const monomer = monomerAddOperation.monomer;\n      monomers.push(monomer);\n      command.addOperation(monomerAddOperation);\n      if (monomerIndex > 0) {\n        const previousMonomer = monomers[monomerIndex - 1];\n        // requirements are: Base(R1)-(R3)Sugar(R2)-(R1)Phosphate\n        const attPointStart = previousMonomer.getValidSourcePoint(monomer);\n        const attPointEnd = monomer.getValidSourcePoint(previousMonomer);\n\n        assert(attPointStart);\n        assert(attPointEnd);\n\n        const operation = new PolymerBondFinishCreationOperation(\n          (polymerBond?: PolymerBond) =>\n            this.finishPolymerBondCreationModelChange(\n              previousMonomer as BaseMonomer,\n              monomer,\n              attPointStart,\n              attPointEnd,\n              MACROMOLECULES_BOND_TYPES.SINGLE,\n              polymerBond,\n            ),\n          this.deletePolymerBondChangeModel.bind(this),\n        );\n        command.addOperation(operation);\n      }\n    });\n\n    return { command, monomers };\n  }\n\n  public rearrangeChainModelChange(monomer: BaseMonomer, newPosition: Vec2) {\n    if (isMonomerSgroupWithAttachmentPoints(monomer)) {\n      const offset = newPosition.sub(monomer.position);\n\n      this.moveChemAtomsPoint(monomer, offset);\n    }\n\n    monomer.moveAbsolute(newPosition);\n\n    return monomer;\n  }\n\n  private reArrangeChain(\n    monomer: BaseMonomer,\n    lastPosition: Vec2,\n    canvasWidth: number,\n    rearrangedMonomersSet: Set<number>,\n    maxVerticalDistance: number,\n    restOfRowsWithAntisense = 0,\n    needRepositionMonomers = true,\n    firstMonomer?: BaseMonomer,\n  ) {\n    const command = new Command();\n    const heightMonomerWithBond =\n      SNAKE_LAYOUT_CELL_WIDTH / 2 + VERTICAL_DISTANCE_FROM_ROW_WITHOUT_RNA;\n    const isNewRow = lastPosition.x === MONOMER_START_X_POSITION;\n\n    maxVerticalDistance =\n      restOfRowsWithAntisense > 0\n        ? VERTICAL_OFFSET_FROM_ROW_WITH_RNA\n        : isNewRow\n        ? heightMonomerWithBond\n        : Math.max(maxVerticalDistance, heightMonomerWithBond);\n    monomer.isMonomerInRnaChainRow =\n      maxVerticalDistance > heightMonomerWithBond;\n    const oldMonomerPosition = monomer.position;\n\n    if (needRepositionMonomers) {\n      const operation = new MonomerMoveOperation(\n        this.rearrangeChainModelChange.bind(\n          this,\n          monomer,\n          Coordinates.canvasToModel(lastPosition),\n        ),\n        this.rearrangeChainModelChange.bind(this, monomer, oldMonomerPosition),\n      );\n      command.addOperation(operation);\n    }\n    rearrangedMonomersSet.add(monomer.id);\n\n    const nextPositionAndVerticalDistance =\n      this.getNextMonomerPositionForSnakeLayout(\n        monomer,\n        lastPosition,\n        canvasWidth,\n        rearrangedMonomersSet,\n        maxVerticalDistance,\n        restOfRowsWithAntisense,\n      );\n\n    return {\n      lastPosition:\n        nextPositionAndVerticalDistance?.lastPosition || lastPosition,\n      maxVerticalDistance:\n        nextPositionAndVerticalDistance?.maxVerticalDistance ||\n        maxVerticalDistance,\n      nextMonomer: getNextMonomerInChain(monomer, firstMonomer),\n      command,\n    };\n  }\n\n  private reArrangeRnaChain(\n    nucleotideOrNucleoside: Nucleotide | Nucleoside,\n    lastPosition: Vec2,\n    canvasWidth: number,\n    rearrangedMonomersSet: Set<number>,\n    maxVerticalDistance: number,\n    restOfRowsWithAntisense = 0,\n    isAntisense = false,\n    needRepositionMonomers = true,\n    firstMonomer?: BaseMonomer,\n  ) {\n    const command = new Command();\n    maxVerticalDistance = Math.max(\n      maxVerticalDistance,\n      VERTICAL_OFFSET_FROM_ROW_WITH_RNA,\n    );\n    nucleotideOrNucleoside.sugar.isMonomerInRnaChainRow = true;\n    nucleotideOrNucleoside.rnaBase.isMonomerInRnaChainRow = true;\n    const oldSugarPosition = nucleotideOrNucleoside.sugar.position;\n    const rnaBasePosition = new Vec2(\n      lastPosition.x,\n      lastPosition.y + (isAntisense ? -1 : 1) * SNAKE_LAYOUT_CELL_WIDTH,\n    );\n\n    if (needRepositionMonomers) {\n      this.addRnaOperations(\n        command,\n        oldSugarPosition,\n        lastPosition,\n        nucleotideOrNucleoside.sugar,\n      );\n      this.addRnaOperations(\n        command,\n        nucleotideOrNucleoside.rnaBase?.position,\n        rnaBasePosition,\n        nucleotideOrNucleoside.rnaBase,\n      );\n    }\n\n    rearrangedMonomersSet.add(nucleotideOrNucleoside.sugar.id);\n    rearrangedMonomersSet.add(nucleotideOrNucleoside.rnaBase?.id);\n\n    if (nucleotideOrNucleoside instanceof Nucleotide) {\n      nucleotideOrNucleoside.phosphate.isMonomerInRnaChainRow = true;\n      const phosphatePosition = new Vec2(\n        lastPosition.x + SNAKE_LAYOUT_CELL_WIDTH,\n        lastPosition.y,\n      );\n\n      if (needRepositionMonomers) {\n        this.addRnaOperations(\n          command,\n          nucleotideOrNucleoside.phosphate?.position,\n          phosphatePosition,\n          nucleotideOrNucleoside.phosphate,\n        );\n      }\n\n      rearrangedMonomersSet.add(nucleotideOrNucleoside.phosphate?.id);\n    }\n\n    const nextMonomerPositionAndVerticalDistance =\n      this.getNextMonomerPositionForSnakeLayout(\n        nucleotideOrNucleoside.lastMonomerInNode,\n        lastPosition,\n        canvasWidth,\n        rearrangedMonomersSet,\n        maxVerticalDistance,\n        restOfRowsWithAntisense,\n        nucleotideOrNucleoside instanceof Nucleotide\n          ? SNAKE_LAYOUT_CELL_WIDTH * 2\n          : SNAKE_LAYOUT_CELL_WIDTH,\n      );\n\n    const nextMonomer = getNextMonomerInChain(\n      nucleotideOrNucleoside.lastMonomerInNode,\n      firstMonomer,\n    );\n\n    return {\n      command,\n      lastPosition:\n        nextMonomerPositionAndVerticalDistance?.lastPosition || lastPosition,\n      maxVerticalDistance:\n        nextMonomerPositionAndVerticalDistance?.maxVerticalDistance ||\n        maxVerticalDistance,\n      nextMonomer,\n    };\n  }\n\n  private getNextMonomerPositionForSnakeLayout(\n    monomer: BaseMonomer,\n    lastPosition: Vec2,\n    canvasWidth: number,\n    rearrangedMonomersSet: Set<number>,\n    maxVerticalDistance: number,\n    restOfRowsWithAntisense: number,\n    width?: number,\n  ) {\n    let nextPositionAndDistance;\n    for (const attachmentPointName in monomer.attachmentPointsToBonds) {\n      const polymerBond = monomer.attachmentPointsToBonds[attachmentPointName];\n      const nextMonomer = polymerBond?.getAnotherEntity(monomer);\n      if (\n        !polymerBond ||\n        polymerBond instanceof MonomerToAtomBond ||\n        rearrangedMonomersSet.has(nextMonomer.id)\n      ) {\n        continue;\n      }\n      if (\n        (attachmentPointName === 'R2' &&\n          nextMonomer.getAttachmentPointByBond(polymerBond) === 'R1') ||\n        (attachmentPointName === 'R1' &&\n          nextMonomer.getAttachmentPointByBond(polymerBond) === 'R2')\n      ) {\n        nextPositionAndDistance = this.getNextPositionAndDistance(\n          lastPosition,\n          maxVerticalDistance,\n          canvasWidth,\n          width,\n          restOfRowsWithAntisense,\n        );\n      }\n    }\n    return nextPositionAndDistance;\n  }\n\n  private addRnaOperations(\n    command: Command,\n    oldMonomerPosition: Vec2 | undefined,\n    newPosition: Vec2 | undefined,\n    monomer?: BaseMonomer,\n  ) {\n    if (!monomer || !oldMonomerPosition || !newPosition) {\n      return;\n    }\n    const operation = new MonomerMoveOperation(\n      this.rearrangeChainModelChange.bind(\n        this,\n        monomer,\n        Coordinates.canvasToModel(newPosition),\n      ),\n      this.rearrangeChainModelChange.bind(this, monomer, oldMonomerPosition),\n    );\n    command.addOperation(operation);\n  }\n\n  private recalculateCanvasMatrixModelChange(\n    snakeLayoutMatrix?: Matrix<Cell>,\n    _chainsCollection?: ChainsCollection,\n  ) {\n    if (!snakeLayoutMatrix || snakeLayoutMatrix.height === 0) {\n      return;\n    }\n\n    const chainsCollection =\n      _chainsCollection ||\n      ChainsCollection.fromMonomers(Array.from(this.monomers.values()));\n\n    if (!_chainsCollection) {\n      chainsCollection.rearrange();\n    }\n\n    this.canvasMatrix = new CanvasMatrix(chainsCollection, {\n      initialMatrix: snakeLayoutMatrix,\n    });\n\n    return this.redrawBonds();\n  }\n\n  public recalculateCanvasMatrix(\n    chainsCollection?: ChainsCollection,\n    previousSnakeLayoutMatrix?: Matrix<Cell>,\n  ) {\n    const command = new Command();\n\n    command.addOperation(\n      new RecalculateCanvasMatrixOperation(\n        this.recalculateCanvasMatrixModelChange.bind(\n          this,\n          this.snakeLayoutMatrix,\n          chainsCollection,\n        ),\n        this.recalculateCanvasMatrixModelChange.bind(\n          this,\n          previousSnakeLayoutMatrix,\n          chainsCollection,\n        ),\n      ),\n    );\n\n    return command;\n  }\n\n  private rearrangeAntisenseChain(\n    antisenseChain: Chain,\n    startPosition: Vec2,\n    canvasWidth: number,\n    rearrangedMonomersSet: Set<number>,\n    maxVerticalDistance: number,\n    needRepositionMonomers = true,\n  ) {\n    const command = new Command();\n    let lastPosition = startPosition.add(\n      new Vec2(0, SNAKE_LAYOUT_CELL_WIDTH * 3),\n    );\n    let rowsUsedByAntisense = 1;\n\n    antisenseChain.forEachNode(({ node }) => {\n      if (node instanceof Nucleoside || node instanceof Nucleotide) {\n        const rearrangeResult = this.reArrangeRnaChain(\n          node,\n          lastPosition,\n          canvasWidth,\n          new Set(),\n          maxVerticalDistance,\n          1,\n          true,\n          needRepositionMonomers,\n        );\n\n        if (rearrangeResult.lastPosition.y > lastPosition.y) {\n          rowsUsedByAntisense++;\n        }\n\n        lastPosition = rearrangeResult.lastPosition;\n        maxVerticalDistance = rearrangeResult.maxVerticalDistance;\n        command.merge(rearrangeResult.command);\n      } else {\n        node.monomers.forEach((monomer) => {\n          const rearrangeResult = this.reArrangeChain(\n            monomer,\n            lastPosition,\n            canvasWidth,\n            rearrangedMonomersSet,\n            maxVerticalDistance,\n            1,\n            needRepositionMonomers,\n          );\n\n          if (rearrangeResult.lastPosition.y > lastPosition.y) {\n            rowsUsedByAntisense++;\n          }\n\n          lastPosition = rearrangeResult.lastPosition;\n          maxVerticalDistance = rearrangeResult.maxVerticalDistance;\n          command.merge(rearrangeResult.command);\n        });\n      }\n    });\n\n    return { rowsUsedByAntisense, command };\n  }\n\n  private calculateSnakeLayoutMatrix(chainsCollection: ChainsCollection) {\n    const snakeLayoutMatrix = new Matrix<Cell>();\n    const monomersGroupedByY = new Map<number, Map<number, BaseMonomer>>();\n    const monomerToNode = chainsCollection.monomerToNode;\n\n    this.monomers.forEach((monomer) => {\n      const x = Number(monomer.position.x.toFixed());\n      const y = Number(monomer.position.y.toFixed());\n\n      if (!monomersGroupedByY.has(y)) {\n        monomersGroupedByY.set(y, new Map<number, BaseMonomer>());\n      }\n\n      const monomersGroupedByX = monomersGroupedByY.get(y);\n\n      monomersGroupedByX?.set(x, monomer);\n    });\n\n    const sortedGroupedMonomers = [...monomersGroupedByY.entries()]\n      .map(([y, groupedByX]) => {\n        const groupedByYArray: [number, [number, BaseMonomer][]] = [\n          y,\n          [...groupedByX.entries()],\n        ];\n\n        return groupedByYArray;\n      })\n      .sort((a, b) => a[0] - b[0]);\n\n    sortedGroupedMonomers.forEach(([y, groupedByY], index) => {\n      sortedGroupedMonomers[index] = [\n        y,\n        groupedByY.sort((a, b) => Number(a[0]) - Number(b[0])),\n      ];\n    });\n\n    const monomerXToIndexInMatrix = {};\n\n    const longestRow = sortedGroupedMonomers.reduce(\n      (longestRow, currentRow) =>\n        currentRow[1].length > longestRow[1].length ? currentRow : longestRow,\n      sortedGroupedMonomers[0],\n    );\n\n    longestRow[1].forEach(([x], index) => {\n      monomerXToIndexInMatrix[x] = index;\n    });\n\n    sortedGroupedMonomers.forEach(([, groupedByX], indexY) => {\n      groupedByX.forEach(([x, monomer]) => {\n        snakeLayoutMatrix.set(\n          Number(indexY),\n          Number(monomerXToIndexInMatrix[x]),\n          new Cell(\n            monomerToNode.get(monomer),\n            [],\n            Number(indexY),\n            Number(monomerXToIndexInMatrix[x]),\n            monomer,\n          ),\n        );\n      });\n    });\n\n    return snakeLayoutMatrix;\n  }\n\n  public applySnakeLayout(\n    canvasWidth: number,\n    isSnakeMode: boolean,\n    needRedrawBonds = true,\n    needRepositionMonomers = true,\n  ) {\n    if (this.monomers.size === 0) {\n      return new Command();\n    }\n\n    const previousSnakeLayoutMatrix = this.snakeLayoutMatrix;\n    const command = new Command();\n    let chainsCollection: ChainsCollection;\n\n    command.merge(this.recalculateAntisenseChains());\n\n    if (isSnakeMode) {\n      const rearrangedMonomersSet: Set<number> = new Set();\n      let lastPosition = new Vec2({\n        x: MONOMER_START_X_POSITION,\n        y: MONOMER_START_Y_POSITION,\n      });\n      let maxVerticalDistance = 0;\n      chainsCollection = ChainsCollection.fromMonomers([\n        ...this.monomers.values(),\n      ]);\n      chainsCollection.rearrange();\n\n      chainsCollection.chains.forEach((chain) => {\n        if (chain.isAntisense) {\n          return;\n        }\n\n        const complimentaryChainsWithData =\n          chainsCollection.getComplimentaryChainsWithData(chain);\n        const antisenseChainsWithData = complimentaryChainsWithData.filter(\n          (complimentaryChainWithData) =>\n            complimentaryChainWithData.complimentaryChain.firstMonomer\n              ?.monomerItem.isAntisense,\n        );\n        const antisenseChainsStartIndexes = antisenseChainsWithData.map(\n          (antisenseChainWithData) => {\n            const firstConnectedAntisenseNodeIndex =\n              antisenseChainWithData.complimentaryChain.nodes.findIndex(\n                (node) => {\n                  return (\n                    node ===\n                    antisenseChainWithData.firstConnectedComplimentaryNode\n                  );\n                },\n              );\n            const senseNodeIndex = chain.nodes.indexOf(\n              antisenseChainWithData.firstConnectedNode,\n            );\n\n            if (!isNumber(senseNodeIndex)) {\n              return -1;\n            }\n\n            return senseNodeIndex - firstConnectedAntisenseNodeIndex;\n          },\n        );\n        const antisenseChainsStartIndexesMap = new Map(\n          antisenseChainsStartIndexes.map(\n            (antisenseChainsStartIndex, index) => [\n              antisenseChainsStartIndex,\n              antisenseChainsWithData[index],\n            ],\n          ),\n        );\n\n        let restOfRowsWithAntisense = 0;\n        let isPreviousChainWithAntisense = false;\n\n        for (\n          let nodeIndex = Math.min(0, ...antisenseChainsStartIndexes);\n          nodeIndex < chain.length;\n          nodeIndex++\n        ) {\n          const node = chain.nodes[nodeIndex];\n\n          if (node && rearrangedMonomersSet.has(node.monomer.id)) {\n            return;\n          }\n\n          const antisenseChainWithData =\n            antisenseChainsStartIndexesMap.get(nodeIndex);\n\n          if (antisenseChainWithData) {\n            const { rowsUsedByAntisense, command: rearrangedAntisenseCommand } =\n              this.rearrangeAntisenseChain(\n                antisenseChainWithData.complimentaryChain,\n                lastPosition,\n                canvasWidth,\n                rearrangedMonomersSet,\n                maxVerticalDistance,\n                needRepositionMonomers,\n              );\n\n            restOfRowsWithAntisense = rowsUsedByAntisense;\n            command.merge(rearrangedAntisenseCommand);\n            isPreviousChainWithAntisense = true;\n          }\n\n          if (!node) {\n            continue;\n          }\n\n          const r2PolymerBond =\n            node.lastMonomerInNode.attachmentPointsToBonds[\n              AttachmentPointName.R2\n            ];\n\n          if (r2PolymerBond instanceof PolymerBond) {\n            r2PolymerBond.restOfRowsWithAntisense = restOfRowsWithAntisense;\n          }\n\n          if (node instanceof Nucleoside || node instanceof Nucleotide) {\n            const rearrangeResult = this.reArrangeRnaChain(\n              node,\n              lastPosition,\n              canvasWidth,\n              rearrangedMonomersSet,\n              maxVerticalDistance,\n              restOfRowsWithAntisense,\n              false,\n              needRepositionMonomers,\n            );\n\n            if (\n              rearrangeResult.lastPosition.y > lastPosition.y &&\n              lastPosition\n            ) {\n              restOfRowsWithAntisense--;\n            }\n\n            lastPosition = rearrangeResult.lastPosition;\n            maxVerticalDistance = rearrangeResult.maxVerticalDistance;\n            command.merge(rearrangeResult.command);\n          } else {\n            node.monomers.forEach((monomer) => {\n              const rearrangeResult = this.reArrangeChain(\n                monomer,\n                lastPosition,\n                canvasWidth,\n                rearrangedMonomersSet,\n                maxVerticalDistance,\n                restOfRowsWithAntisense,\n                needRepositionMonomers,\n              );\n\n              if (rearrangeResult.lastPosition.y > lastPosition.y) {\n                restOfRowsWithAntisense--;\n              }\n\n              lastPosition = rearrangeResult.lastPosition;\n              maxVerticalDistance = rearrangeResult.maxVerticalDistance;\n              command.merge(rearrangeResult.command);\n            });\n          }\n        }\n\n        lastPosition = getFirstPosition(maxVerticalDistance, lastPosition);\n        maxVerticalDistance = 0;\n\n        if (isPreviousChainWithAntisense) {\n          lastPosition = lastPosition.add(\n            new Vec2(0, SNAKE_LAYOUT_Y_OFFSET_BETWEEN_CHAINS),\n          );\n          isPreviousChainWithAntisense = false;\n        }\n      });\n\n      const snakeLayoutMatrix =\n        this.calculateSnakeLayoutMatrix(chainsCollection);\n\n      this.snakeLayoutMatrix = snakeLayoutMatrix;\n\n      command.merge(\n        this.recalculateCanvasMatrix(\n          chainsCollection,\n          previousSnakeLayoutMatrix,\n        ),\n      );\n    }\n\n    if (needRedrawBonds) {\n      command.merge(this.redrawBonds());\n    }\n\n    return command;\n  }\n\n  private redrawBondsModelChange(\n    bond: PolymerBond | MonomerToAtomBond,\n    startPosition?: Vec2,\n    endPosition?: Vec2,\n  ) {\n    if (bond instanceof MonomerToAtomBond) {\n      bond.moveToLinkedEntities();\n\n      return bond;\n    }\n\n    if (startPosition && endPosition) {\n      bond.moveBondStartAbsolute(startPosition.x, startPosition.y);\n      bond.moveBondEndAbsolute(endPosition.x, endPosition.y);\n    } else {\n      bond.moveToLinkedEntities();\n    }\n\n    return bond;\n  }\n\n  public redrawBonds() {\n    const command = new Command();\n\n    [\n      ...this.polymerBonds.values(),\n      ...this.monomerToAtomBonds.values(),\n    ].forEach((polymerBond) => {\n      command.merge(\n        this.createDrawingEntityRedrawCommand(\n          this.redrawBondsModelChange.bind(this, polymerBond),\n          this.redrawBondsModelChange.bind(\n            this,\n            polymerBond,\n            polymerBond.startPosition,\n            polymerBond.endPosition,\n          ),\n        ),\n      );\n    });\n\n    return command;\n  }\n\n  public getNextPositionAndDistance(\n    lastPosition: Vec2,\n    height: number,\n    canvasWidth: number,\n    width = SNAKE_LAYOUT_CELL_WIDTH,\n    restOfRowsWithAntisense: number,\n  ) {\n    const isMonomerFitCanvas =\n      lastPosition.x +\n        width +\n        DISTANCE_FROM_RIGHT +\n        SNAKE_LAYOUT_CELL_WIDTH / 2 <\n      canvasWidth;\n\n    if (!isMonomerFitCanvas) {\n      return {\n        maxVerticalDistance: 0,\n        lastPosition: getFirstPosition(\n          height,\n          lastPosition,\n          restOfRowsWithAntisense,\n        ),\n      };\n    }\n\n    return {\n      maxVerticalDistance: height,\n      lastPosition: new Vec2({\n        x: lastPosition.x + width,\n        y: lastPosition.y,\n      }),\n    };\n  }\n\n  public isNucleosideAndPhosphateConnectedAsNucleotide(\n    nucleoside: Nucleoside,\n    phosphate: Phosphate,\n  ) {\n    if (\n      !(nucleoside instanceof Nucleoside) ||\n      !(phosphate instanceof Phosphate)\n    )\n      return false;\n\n    const r2Bond = nucleoside.sugar.attachmentPointsToBonds.R2;\n\n    return (\n      !(r2Bond instanceof MonomerToAtomBond) &&\n      r2Bond?.secondMonomer === phosphate\n    );\n  }\n\n  public setMicromoleculesHiddenEntities(struct: Struct) {\n    struct.mergeInto(this.micromoleculesHiddenEntities);\n    this.micromoleculesHiddenEntities.atoms = new Pool();\n    this.micromoleculesHiddenEntities.bonds = new Pool();\n    this.micromoleculesHiddenEntities.halfBonds = new Pool();\n    this.micromoleculesHiddenEntities.sgroups = new Pool();\n    this.micromoleculesHiddenEntities.functionalGroups = new Pool();\n    this.micromoleculesHiddenEntities.sGroupForest = new SGroupForest();\n    this.micromoleculesHiddenEntities.frags = new Pool();\n  }\n\n  public clearMicromoleculesHiddenEntities() {\n    this.micromoleculesHiddenEntities = new Struct();\n  }\n\n  public mergeInto(targetDrawingEntitiesManager: DrawingEntitiesManager) {\n    const command = new Command();\n    const monomerToNewMonomer = new Map<BaseMonomer, BaseMonomer>();\n    const atomToNewAtom = new Map<Atom, Atom>();\n    const mergedDrawingEntities = new DrawingEntitiesManager();\n    const editor = CoreEditor.provideEditorInstance();\n    const viewModel = editor.viewModel;\n\n    this.monomers.forEach((monomer) => {\n      const monomerAddCommand =\n        monomer instanceof AmbiguousMonomer\n          ? targetDrawingEntitiesManager.addAmbiguousMonomer(\n              {\n                ...monomer.variantMonomerItem,\n              },\n              monomer.position,\n            )\n          : targetDrawingEntitiesManager.addMonomer(\n              monomer.monomerItem,\n              monomer.position,\n            );\n\n      command.merge(monomerAddCommand);\n\n      const addedMonomer = monomerAddCommand.operations[0]\n        .monomer as BaseMonomer;\n\n      mergedDrawingEntities.monomers.set(addedMonomer.id, addedMonomer);\n\n      monomerToNewMonomer.set(\n        monomer,\n        monomerAddCommand.operations[0].monomer as BaseMonomer,\n      );\n    });\n\n    this.polymerBonds.forEach((polymerBond) => {\n      assert(polymerBond.secondMonomer);\n      const polymerBondCreateCommand =\n        targetDrawingEntitiesManager.createPolymerBond(\n          monomerToNewMonomer.get(polymerBond.firstMonomer) as BaseMonomer,\n          monomerToNewMonomer.get(polymerBond.secondMonomer) as BaseMonomer,\n          polymerBond.firstMonomer.getAttachmentPointByBond(\n            polymerBond,\n          ) as AttachmentPointName,\n          polymerBond.secondMonomer.getAttachmentPointByBond(\n            polymerBond,\n          ) as AttachmentPointName,\n          polymerBond instanceof HydrogenBond\n            ? MACROMOLECULES_BOND_TYPES.HYDROGEN\n            : MACROMOLECULES_BOND_TYPES.SINGLE,\n        );\n      command.merge(polymerBondCreateCommand);\n\n      const addedPolymerBond = polymerBondCreateCommand.operations[0]\n        .polymerBond as PolymerBond;\n\n      mergedDrawingEntities.polymerBonds.set(\n        addedPolymerBond.id,\n        addedPolymerBond,\n      );\n    });\n\n    this.atoms.forEach((atom) => {\n      const atomAddCommand = targetDrawingEntitiesManager.addAtom(\n        atom.position,\n        monomerToNewMonomer.get(atom.monomer) as BaseMonomer,\n        atom.atomIdInMicroMode,\n        atom.label,\n      );\n      const addedAtom = atomAddCommand.operations[0].atom as Atom;\n\n      command.merge(atomAddCommand);\n      mergedDrawingEntities.atoms.set(addedAtom.id, addedAtom);\n      atomToNewAtom.set(atom, addedAtom);\n    });\n\n    this.bonds.forEach((bond) => {\n      const newFirstAtom = atomToNewAtom.get(bond.firstAtom);\n      const newSecondAtom = atomToNewAtom.get(bond.secondAtom);\n\n      if (!newFirstAtom || !newSecondAtom) {\n        return;\n      }\n\n      const bondAddCommand = targetDrawingEntitiesManager.addBond(\n        newFirstAtom,\n        newSecondAtom,\n        bond.type,\n        bond.stereo,\n        bond.bondIdInMicroMode,\n      );\n      const addedBond = bondAddCommand.operations[0].bond as Bond;\n\n      command.merge(bondAddCommand);\n      mergedDrawingEntities.bonds.set(addedBond.id, addedBond);\n    });\n\n    viewModel.initialize([...targetDrawingEntitiesManager.bonds.values()]);\n\n    this.monomerToAtomBonds.forEach((monomerToAtomBond) => {\n      const bondAddCommand = targetDrawingEntitiesManager.addMonomerToAtomBond(\n        monomerToNewMonomer.get(monomerToAtomBond.monomer) as BaseMonomer,\n        atomToNewAtom.get(monomerToAtomBond.atom) as Atom,\n        monomerToAtomBond.monomer.getAttachmentPointByBond(\n          monomerToAtomBond,\n        ) as AttachmentPointName,\n      );\n\n      const addedBond = bondAddCommand.operations[0]\n        .monomerToAtomBond as MonomerToAtomBond;\n\n      command.merge(bondAddCommand);\n      mergedDrawingEntities.monomerToAtomBonds.set(addedBond.id, addedBond);\n    });\n\n    this.micromoleculesHiddenEntities.mergeInto(\n      targetDrawingEntitiesManager.micromoleculesHiddenEntities,\n    );\n\n    return { command, mergedDrawingEntities };\n  }\n\n  public centerMacroStructure() {\n    const centerPointOfModel = Coordinates.canvasToModel(\n      this.getCurrentCenterPointOfCanvas(),\n    );\n    const structCenter = this.getMacroStructureCenter();\n    const offset = Vec2.diff(centerPointOfModel, structCenter);\n\n    this.allEntities.forEach(([, entity]) => {\n      this.moveDrawingEntityModelChange(entity, offset);\n    });\n  }\n\n  public getCurrentCenterPointOfCanvas() {\n    const editor = CoreEditor.provideEditorInstance();\n    const originalCenterPointOfCanvas = new Vec2(\n      editor.canvasOffset.width / 2,\n      editor.canvasOffset.height / 2,\n    );\n    return Coordinates.viewToCanvas(originalCenterPointOfCanvas);\n  }\n\n  public getMacroStructureCenter() {\n    let xmin = 1e50;\n    let ymin = xmin;\n    let xmax = -xmin;\n    let ymax = -ymin;\n\n    this.monomers.forEach((monomer: BaseMonomer) => {\n      xmin = Math.min(xmin, monomer.position.x);\n      ymin = Math.min(ymin, monomer.position.y);\n      xmax = Math.max(xmax, monomer.position.x);\n      ymax = Math.max(ymax, monomer.position.y);\n    });\n    this.polymerBonds.forEach((bond: PolymerBond) => {\n      xmin = Math.min(xmin, bond.position.x);\n      ymin = Math.min(ymin, bond.position.y);\n      xmax = Math.max(xmax, bond.position.x);\n      ymax = Math.max(ymax, bond.position.y);\n    });\n    return new Vec2((xmin + xmax) / 2, (ymin + ymax) / 2);\n  }\n\n  public applyMonomersSequenceLayout() {\n    const chainsCollection = ChainsCollection.fromMonomers([\n      ...this.monomers.values(),\n    ]);\n    chainsCollection.rearrange();\n\n    SequenceRenderer.show(chainsCollection);\n\n    return chainsCollection;\n  }\n\n  public clearCanvas() {\n    const editor = CoreEditor.provideEditorInstance();\n\n    this.monomers.forEach((monomer) => {\n      editor.renderersContainer.deleteMonomer(monomer);\n    });\n\n    this.polymerBonds.forEach((polymerBond) => {\n      editor.renderersContainer.deletePolymerBond(polymerBond);\n    });\n\n    this.monomerToAtomBonds.forEach((monomerToAtomBond) => {\n      editor.renderersContainer.deleteMonomerToAtomBond(monomerToAtomBond);\n    });\n\n    SequenceRenderer.removeEmptyNodes();\n  }\n\n  public applyFlexLayoutMode(needRedrawBonds = false) {\n    const editor = CoreEditor.provideEditorInstance();\n    const command = new Command();\n\n    if (needRedrawBonds) {\n      command.merge(this.redrawBonds());\n    }\n\n    this.monomers.forEach((monomer) => {\n      editor.renderersContainer.deleteMonomer(monomer);\n      editor.renderersContainer.addMonomer(monomer);\n    });\n\n    this.polymerBonds.forEach((polymerBond) => {\n      editor.renderersContainer.deletePolymerBond(polymerBond);\n      editor.renderersContainer.addPolymerBond(polymerBond);\n    });\n\n    this.monomerToAtomBonds.forEach((monomerToAtomBond) => {\n      editor.renderersContainer.deleteMonomerToAtomBond(monomerToAtomBond);\n      editor.renderersContainer.addMonomerToAtomBond(monomerToAtomBond);\n    });\n\n    SequenceRenderer.removeEmptyNodes();\n\n    return command;\n  }\n\n  public rerenderPolymerBonds() {\n    const editor = CoreEditor.provideEditorInstance();\n\n    this.polymerBonds.forEach((polymerBond) => {\n      editor.renderersContainer.deletePolymerBond(polymerBond);\n      editor.renderersContainer.addPolymerBond(polymerBond);\n    });\n  }\n\n  public getAllSelectedEntitiesForEntities(drawingEntities: DrawingEntity[]) {\n    const command = new Command();\n    const editor = CoreEditor.provideEditorInstance();\n    drawingEntities.forEach((monomer) => monomer.turnOnSelection());\n    const newDrawingEntities = drawingEntities.reduce(\n      (\n        selectedDrawingEntities: DrawingEntity[],\n        drawingEntity: DrawingEntity,\n      ) => {\n        const res =\n          editor.drawingEntitiesManager.getAllSelectedEntitiesForSingleEntity(\n            drawingEntity,\n            true,\n            selectedDrawingEntities,\n          );\n        res.drawingEntities.forEach((entity) =>\n          command.addOperation(new DrawingEntitySelectOperation(entity)),\n        );\n        return selectedDrawingEntities.concat(res.drawingEntities);\n      },\n      [],\n    );\n    return { command, drawingEntities: newDrawingEntities };\n  }\n\n  public getAllSelectedEntitiesForSingleEntity(\n    drawingEntity: DrawingEntity,\n    needToSelectConnectedBonds = true,\n    selectedDrawingEntities?: DrawingEntity[],\n  ) {\n    const command = new Command();\n    command.addOperation(new DrawingEntitySelectOperation(drawingEntity));\n    drawingEntity.turnOnSelection();\n    let drawingEntities: DrawingEntity[] = [drawingEntity];\n\n    const editor = CoreEditor.provideEditorInstance();\n    if (\n      !(editor.mode instanceof SequenceMode) ||\n      drawingEntity instanceof PolymerBond\n    ) {\n      return { command, drawingEntities };\n    }\n    if (drawingEntity instanceof Sugar && drawingEntity.isPartOfRNA) {\n      const sugar = drawingEntity;\n      if (isValidNucleoside(sugar)) {\n        const nucleoside = Nucleoside.fromSugar(sugar);\n        drawingEntities = nucleoside.monomers;\n      } else if (isValidNucleotide(sugar)) {\n        const nucleotide = Nucleotide.fromSugar(sugar);\n        drawingEntities = nucleotide.monomers;\n      }\n      drawingEntities.forEach((entity) => {\n        if (!(entity instanceof Sugar)) {\n          entity.turnOnSelection();\n          command.addOperation(new DrawingEntitySelectOperation(entity));\n        }\n      });\n    }\n    drawingEntities.forEach((entity) => {\n      const monomer = entity as BaseMonomer;\n      if (needToSelectConnectedBonds && monomer.hasBonds) {\n        monomer.forEachBond((polymerBond) => {\n          if (\n            !selectedDrawingEntities?.includes(polymerBond) &&\n            !drawingEntities.includes(polymerBond) &&\n            polymerBond instanceof PolymerBond &&\n            polymerBond.getAnotherMonomer(monomer)?.selected\n          ) {\n            drawingEntities.push(polymerBond);\n            polymerBond.turnOnSelection();\n            command.addOperation(new DrawingEntitySelectOperation(polymerBond));\n          }\n        });\n      }\n    });\n    return { command, drawingEntities };\n  }\n\n  public validateIfApplicableForFasta() {\n    const monomerTypes = new Set();\n    let isValid = true;\n\n    this.monomers.forEach((monomer) => {\n      const monomerType =\n        monomer instanceof AmbiguousMonomer\n          ? monomer.monomerClass === KetMonomerClass.CHEM\n            ? MONOMER_CONST.CHEM\n            : monomer.monomers[0].monomerItem.props.MonomerType\n          : monomer.monomerItem.props.MonomerType;\n      monomerTypes.add(monomerType);\n      if (monomerType === MONOMER_CONST.CHEM || monomerTypes.size > 1) {\n        isValid = false;\n      }\n    });\n\n    return isValid;\n  }\n\n  public moveMonomer(monomer: BaseMonomer, position: Vec2) {\n    const oldMonomerPosition = monomer.position;\n    const command = new Command();\n    const operation = new MonomerMoveOperation(\n      this.rearrangeChainModelChange.bind(this, monomer, position),\n      this.rearrangeChainModelChange.bind(this, monomer, oldMonomerPosition),\n    );\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  public removeHoverForAllMonomers() {\n    const command = new Command();\n    this.monomers.forEach((monomer) => {\n      if (!monomer.hovered) {\n        return;\n      }\n\n      monomer.turnOffHover();\n      monomer.turnOffAttachmentPointsVisibility();\n\n      command.addOperation(new MonomerHoverOperation(monomer, true));\n    });\n\n    return command;\n  }\n\n  private reconnectPolymerBondModelChange(\n    polymerBond: PolymerBond,\n    {\n      newFirstMonomerAttachmentPoint,\n      newSecondMonomerAttachmentPoint,\n      initialFirstMonomerAttachmentPoint,\n      initialSecondMonomerAttachmentPoint,\n    }: {\n      newFirstMonomerAttachmentPoint: AttachmentPointName;\n      newSecondMonomerAttachmentPoint: AttachmentPointName;\n      initialFirstMonomerAttachmentPoint: AttachmentPointName;\n      initialSecondMonomerAttachmentPoint: AttachmentPointName;\n    },\n  ) {\n    polymerBond.firstMonomer.unsetBond(initialFirstMonomerAttachmentPoint);\n    polymerBond.secondMonomer?.unsetBond(initialSecondMonomerAttachmentPoint);\n\n    polymerBond.firstMonomer.setBond(\n      newFirstMonomerAttachmentPoint,\n      polymerBond,\n    );\n    polymerBond.secondMonomer?.setBond(\n      newSecondMonomerAttachmentPoint,\n      polymerBond,\n    );\n\n    return polymerBond;\n  }\n\n  public reconnectPolymerBond(\n    polymerBond: PolymerBond,\n    newFirstMonomerAttachmentPoint: AttachmentPointName,\n    newSecondMonomerAttachmentPoint: AttachmentPointName,\n    initialFirstMonomerAttachmentPoint: AttachmentPointName,\n    initialSecondMonomerAttachmentPoint: AttachmentPointName,\n  ) {\n    const command = new Command();\n\n    command.addOperation(\n      new ReconnectPolymerBondOperation(\n        this.reconnectPolymerBondModelChange.bind(this, polymerBond, {\n          newFirstMonomerAttachmentPoint,\n          newSecondMonomerAttachmentPoint,\n          initialFirstMonomerAttachmentPoint,\n          initialSecondMonomerAttachmentPoint,\n        }),\n        this.reconnectPolymerBondModelChange.bind(this, polymerBond, {\n          newFirstMonomerAttachmentPoint: initialFirstMonomerAttachmentPoint,\n          newSecondMonomerAttachmentPoint: initialSecondMonomerAttachmentPoint,\n          initialFirstMonomerAttachmentPoint: newFirstMonomerAttachmentPoint,\n          initialSecondMonomerAttachmentPoint: newSecondMonomerAttachmentPoint,\n        }),\n      ),\n    );\n\n    return command;\n  }\n\n  private addAmbiguousMonomerChangeModel(\n    variantMonomerItem: AmbiguousMonomerType,\n    position: Vec2,\n    _monomer?: BaseMonomer,\n  ) {\n    if (_monomer) {\n      this.monomers.set(_monomer.id, _monomer);\n\n      return _monomer;\n    }\n\n    const monomer = new AmbiguousMonomer(variantMonomerItem, position);\n\n    this.monomers.set(monomer.id, monomer);\n\n    return monomer;\n  }\n\n  public addAmbiguousMonomer(\n    ambiguousMonomerItem: AmbiguousMonomerType,\n    position: Vec2,\n  ) {\n    const command = new Command();\n    const operation = new MonomerAddOperation(\n      this.addAmbiguousMonomerChangeModel.bind(\n        this,\n        ambiguousMonomerItem,\n        position,\n      ),\n      this.deleteMonomerChangeModel.bind(this),\n    );\n\n    command.addOperation(operation);\n\n    return command;\n  }\n\n  private addAtomChangeModel(\n    position: Vec2,\n    monomer: BaseMonomer,\n    atomIdInMicroMode: number,\n    label: AtomLabel,\n    _atom?: Atom,\n  ) {\n    if (_atom) {\n      this.atoms.set(_atom.id, _atom);\n\n      return _atom;\n    }\n\n    const atom = new Atom(position, monomer, atomIdInMicroMode, label);\n\n    this.atoms.set(atom.id, atom);\n\n    return atom;\n  }\n\n  public addAtom(\n    position: Vec2,\n    monomer: BaseMonomer,\n    atomIdInMicroMode: number,\n    label: AtomLabel,\n  ) {\n    const command = new Command();\n    const atomAddOperation = new AtomAddOperation(\n      this.addAtomChangeModel.bind(\n        this,\n        position,\n        monomer,\n        atomIdInMicroMode,\n        label,\n      ),\n      this.deleteAtomChangeModel.bind(this),\n    );\n\n    command.addOperation(atomAddOperation);\n\n    return command;\n  }\n\n  private deleteAtomChangeModel(atom: Atom) {\n    this.atoms.delete(atom.id);\n\n    return atom;\n  }\n\n  private deleteAtom(atom: Atom, needToDeleteConnectedEntities = true) {\n    const command = new Command();\n\n    command.addOperation(\n      new AtomDeleteOperation(\n        atom,\n        this.deleteAtomChangeModel.bind(this, atom),\n        this.addAtomChangeModel.bind(\n          this,\n          atom.position,\n          atom.monomer,\n          atom.atomIdInMicroMode,\n          atom.label,\n        ),\n      ),\n    );\n\n    if (needToDeleteConnectedEntities) {\n      atom.bonds.forEach((bond) => {\n        if (bond.selected) {\n          return;\n        }\n\n        command.merge(this.deleteBond(bond));\n      });\n\n      this.monomerToAtomBonds.forEach((monomerToAtomBond) => {\n        if (monomerToAtomBond.atom === atom && !monomerToAtomBond.selected) {\n          command.merge(this.deleteMonomerToAtomBond(monomerToAtomBond));\n        }\n      });\n    }\n\n    return command;\n  }\n\n  private addBondChangeModel(\n    firstAtom: Atom,\n    secondAtom: Atom,\n    type: number,\n    stereo: number,\n    bondIdInMicroMode: number,\n    _bond?: Bond,\n  ) {\n    if (_bond) {\n      this.bonds.set(_bond.id, _bond);\n\n      return _bond;\n    }\n\n    const bond = new Bond(\n      firstAtom,\n      secondAtom,\n      bondIdInMicroMode,\n      type,\n      stereo,\n    );\n\n    this.bonds.set(bond.id, bond);\n    firstAtom.addBond(bond);\n    secondAtom.addBond(bond);\n\n    return bond;\n  }\n\n  public addBond(\n    firstAtom: Atom,\n    secondAtom: Atom,\n    type: number,\n    stereo: number,\n    bondIdInMicroMode: number,\n  ) {\n    const command = new Command();\n    const bondAddOperation = new BondAddOperation(\n      (bond?: Bond) =>\n        this.addBondChangeModel(\n          firstAtom,\n          secondAtom,\n          type,\n          stereo,\n          bondIdInMicroMode,\n          bond,\n        ),\n      (bond: Bond) => this.deleteBondChangeModel(bond),\n    );\n\n    command.addOperation(bondAddOperation);\n\n    return command;\n  }\n\n  private deleteBondChangeModel(bond: Bond) {\n    this.bonds.delete(bond.id);\n\n    return bond;\n  }\n\n  private deleteBond(bond: Bond) {\n    const command = new Command();\n\n    command.addOperation(\n      new BondDeleteOperation(\n        bond,\n        this.deleteBondChangeModel.bind(this, bond),\n        (bond: Bond) =>\n          this.addBondChangeModel(\n            bond.firstAtom,\n            bond.secondAtom,\n            bond.type,\n            bond.stereo,\n            bond.bondIdInMicroMode,\n            bond,\n          ),\n      ),\n    );\n\n    return command;\n  }\n\n  public addMonomerToAtomBondChangeModel(\n    monomer: BaseMonomer,\n    atom: Atom,\n    attachmentPoint: AttachmentPointName,\n    _monomerToAtomBond?: MonomerToAtomBond,\n  ) {\n    if (_monomerToAtomBond) {\n      this.monomerToAtomBonds.set(_monomerToAtomBond.id, _monomerToAtomBond);\n      monomer.setBond(attachmentPoint, _monomerToAtomBond);\n\n      return _monomerToAtomBond;\n    }\n\n    const monomerToAtomBond = new MonomerToAtomBond(monomer, atom);\n\n    this.monomerToAtomBonds.set(monomerToAtomBond.id, monomerToAtomBond);\n\n    monomerToAtomBond.moveToLinkedEntities();\n    monomer.setBond(attachmentPoint, monomerToAtomBond);\n    monomer.turnOffAttachmentPointsVisibility();\n    monomer.turnOffHover();\n\n    return monomerToAtomBond;\n  }\n\n  private deleteMonomerToAtomBondChangeModel(\n    monomerAtomBond: MonomerToAtomBond,\n  ) {\n    const attachmentPointName =\n      monomerAtomBond.monomer.getAttachmentPointByBond(monomerAtomBond);\n\n    if (attachmentPointName) {\n      monomerAtomBond.monomer.unsetBond(attachmentPointName);\n    }\n    this.monomerToAtomBonds.delete(monomerAtomBond.id);\n\n    return monomerAtomBond;\n  }\n\n  private deleteMonomerToAtomBond(monomerAtomBond: MonomerToAtomBond) {\n    const command = new Command();\n\n    command.addOperation(\n      new MonomerToAtomBondDeleteOperation(\n        monomerAtomBond,\n        this.deleteMonomerToAtomBondChangeModel.bind(this, monomerAtomBond),\n        this.addMonomerToAtomBondChangeModel.bind(\n          this,\n          monomerAtomBond.monomer,\n          monomerAtomBond.atom,\n          monomerAtomBond.monomer.getAttachmentPointByBond(\n            monomerAtomBond,\n          ) as AttachmentPointName,\n        ),\n      ),\n    );\n\n    return command;\n  }\n\n  public addMonomerToAtomBond(\n    monomer: BaseMonomer,\n    atom: Atom,\n    attachmentPoint: AttachmentPointName,\n  ) {\n    const command = new Command();\n    const monomerAddToAtomBondOperation = new MonomerToAtomBondAddOperation(\n      this.addMonomerToAtomBondChangeModel.bind(\n        this,\n        monomer,\n        atom,\n        attachmentPoint,\n      ),\n      this.deleteMonomerToAtomBondChangeModel.bind(this),\n    );\n\n    command.addOperation(monomerAddToAtomBondOperation);\n\n    return command;\n  }\n\n  // TODO create separate class for BoundingBox\n  public static geStructureBbox(monomers: BaseMonomer[]) {\n    let left;\n    let right;\n    let top;\n    let bottom;\n\n    monomers.forEach((monomer) => {\n      const monomerPosition = monomer.position;\n\n      left = left ? Math.min(left, monomerPosition.x) : monomerPosition.x;\n      right = right ? Math.max(right, monomerPosition.x) : monomerPosition.x;\n      top = top ? Math.min(top, monomerPosition.y) : monomerPosition.y;\n      bottom = bottom ? Math.max(bottom, monomerPosition.y) : monomerPosition.y;\n    });\n\n    return {\n      left,\n      right,\n      top,\n      bottom,\n      width: right - left,\n      height: bottom - top,\n    };\n  }\n\n  private get antisenseChainBasesMap() {\n    return {\n      [RnaDnaNaturalAnaloguesEnum.ADENINE]: RnaDnaNaturalAnaloguesEnum.URACIL,\n      [RnaDnaNaturalAnaloguesEnum.CYTOSINE]: RnaDnaNaturalAnaloguesEnum.GUANINE,\n      [RnaDnaNaturalAnaloguesEnum.GUANINE]: RnaDnaNaturalAnaloguesEnum.CYTOSINE,\n      [RnaDnaNaturalAnaloguesEnum.THYMINE]: RnaDnaNaturalAnaloguesEnum.ADENINE,\n      [RnaDnaNaturalAnaloguesEnum.URACIL]: RnaDnaNaturalAnaloguesEnum.ADENINE,\n      [StandardAmbiguousRnaBase.N]: StandardAmbiguousRnaBase.N,\n      [StandardAmbiguousRnaBase.B]: StandardAmbiguousRnaBase.V,\n      [StandardAmbiguousRnaBase.D]: StandardAmbiguousRnaBase.H,\n      [StandardAmbiguousRnaBase.H]: StandardAmbiguousRnaBase.D,\n      [StandardAmbiguousRnaBase.K]: StandardAmbiguousRnaBase.M,\n      [StandardAmbiguousRnaBase.W]: StandardAmbiguousRnaBase.W,\n      [StandardAmbiguousRnaBase.Y]: StandardAmbiguousRnaBase.R,\n      [StandardAmbiguousRnaBase.M]: StandardAmbiguousRnaBase.K,\n      [StandardAmbiguousRnaBase.R]: StandardAmbiguousRnaBase.Y,\n      [StandardAmbiguousRnaBase.S]: StandardAmbiguousRnaBase.S,\n      [StandardAmbiguousRnaBase.V]: StandardAmbiguousRnaBase.B,\n    };\n  }\n\n  public markMonomerAsAntisense(monomer: BaseMonomer) {\n    const command = new Command();\n\n    command.merge(\n      this.modifyMonomerItem(monomer, {\n        ...monomer.monomerItem,\n        isAntisense: true,\n      }),\n    );\n\n    return command;\n  }\n\n  public markMonomerAsSense(monomer: BaseMonomer) {\n    const command = new Command();\n\n    command.merge(\n      this.modifyMonomerItem(monomer, {\n        ...monomer.monomerItem,\n        isSense: true,\n      }),\n    );\n\n    return command;\n  }\n\n  public recalculateAntisenseChains() {\n    const command = new Command();\n    const chainsCollection = ChainsCollection.fromMonomers([\n      ...this.monomers.values(),\n    ]);\n    const senseToAntisenseChains = new Map<Chain, Chain[]>();\n    const handledChains = new Set<Chain>();\n\n    this.monomers.forEach((monomer) => {\n      command.merge(\n        this.modifyMonomerItem(monomer, {\n          ...monomer.monomerItem,\n          isAntisense: false,\n          isSense: false,\n        }),\n      );\n    });\n\n    chainsCollection.chains.forEach((chain) => {\n      if (handledChains.has(chain)) {\n        return;\n      }\n\n      let senseChain: Chain;\n      const complimentaryChainsWithData =\n        chainsCollection.getComplimentaryChainsWithData(chain);\n      const chainsToCheck = new Set<Chain>();\n\n      complimentaryChainsWithData.forEach((complimentaryChainWithData) => {\n        const hasHydrogenBondWithRnaBase =\n          complimentaryChainWithData.complimentaryChain.monomers.some(\n            (monomer) => {\n              return (\n                (isRnaBaseOrAmbiguousRnaBase(monomer) &&\n                  Boolean(getSugarFromRnaBase(monomer)) &&\n                  monomer.hydrogenBonds.length > 0) ||\n                monomer.hydrogenBonds.some((hydrogenBond) => {\n                  const anotherMonomer =\n                    hydrogenBond.getAnotherMonomer(monomer);\n\n                  return (\n                    isRnaBaseOrAmbiguousRnaBase(anotherMonomer) &&\n                    Boolean(getSugarFromRnaBase(anotherMonomer))\n                  );\n                })\n              );\n            },\n          );\n\n        if (hasHydrogenBondWithRnaBase) {\n          chainsToCheck.add(complimentaryChainWithData.complimentaryChain);\n        }\n      });\n\n      chainsToCheck.add(chain);\n\n      const chainToMonomers = new Map<Chain, BaseMonomer[]>();\n\n      chainsToCheck.forEach((chainToCheck) => {\n        chainToMonomers.set(chainToCheck, chainToCheck.monomers);\n      });\n\n      const largestChainsMonomersAmount = Math.max(\n        ...[...chainToMonomers.values()].map((monomers) => monomers.length),\n      );\n\n      const largestChains = [...chainToMonomers.entries()].filter(\n        ([, monomers]) => monomers.length === largestChainsMonomersAmount,\n      );\n\n      if (largestChains.length === 1) {\n        senseChain = largestChains[0][0];\n      } else {\n        const chainsToCenters = new Map<Chain, Vec2>();\n\n        largestChains.forEach(([chainToCheck, monomers]) => {\n          const chainBbox = DrawingEntitiesManager.geStructureBbox(monomers);\n\n          chainsToCenters.set(\n            chainToCheck,\n            new Vec2(\n              chainBbox.left + chainBbox.width / 2,\n              chainBbox.top + chainBbox.height / 2,\n            ),\n          );\n        });\n\n        const chainsToCenterArray = [...chainsToCenters.entries()];\n        const chainWithLowestCenter = chainsToCenterArray.reduce(\n          ([previousChain, previousChainCenter], [chainToCheck, center]) => {\n            return center.y < previousChainCenter.y\n              ? [chainToCheck, center]\n              : [previousChain, previousChainCenter];\n          },\n          chainsToCenterArray[0],\n        );\n\n        senseChain = chainWithLowestCenter[0];\n      }\n\n      chainsToCheck.forEach((chainToCheck) => {\n        if (chainToCheck === senseChain) {\n          handledChains.add(chainToCheck);\n\n          return;\n        }\n\n        if (!senseToAntisenseChains.has(senseChain)) {\n          senseToAntisenseChains.set(senseChain, []);\n        }\n\n        senseToAntisenseChains.get(senseChain)?.push(chainToCheck);\n\n        handledChains.add(chainToCheck);\n      });\n    });\n\n    senseToAntisenseChains.forEach((antisenseChains, senseChain) => {\n      senseChain.monomers.forEach((monomer) => {\n        command.merge(this.markMonomerAsSense(monomer));\n      });\n\n      antisenseChains.forEach((antisenseChain) => {\n        antisenseChain.monomers.forEach((monomer) => {\n          command.merge(this.markMonomerAsAntisense(monomer));\n        });\n      });\n    });\n\n    return command;\n  }\n\n  public get hasAntisenseChains() {\n    return [...this.monomers.values()].some(\n      (monomer) => monomer.monomerItem.isAntisense,\n    );\n  }\n\n  private getAntisenseBaseLabel(rnaBase: RNABase | AmbiguousMonomer) {\n    return this.antisenseChainBasesMap[\n      rnaBase instanceof AmbiguousMonomer\n        ? rnaBase.monomerItem.label\n        : rnaBase.monomerItem.props.MonomerNaturalAnalogCode\n    ];\n  }\n\n  public createAntisenseChain() {\n    const editor = CoreEditor.provideEditorInstance();\n    const command = new Command();\n    const selectedMonomers = this.selectedEntities\n      .filter(([, drawingEntity]) => drawingEntity instanceof BaseMonomer)\n      .map(([, monomer]) => monomer as BaseMonomer);\n    const chainsCollection = ChainsCollection.fromMonomers(selectedMonomers);\n    const chainsForAntisenseCreation = chainsCollection.chains.filter(\n      (chain) => {\n        return chain.subChains.some((subChain) =>\n          subChain.nodes.some(\n            (node) =>\n              (node instanceof Nucleotide || node instanceof Nucleoside) &&\n              Boolean(this.getAntisenseBaseLabel(node.rnaBase)) &&\n              node.monomer.selected,\n          ),\n        );\n      },\n    );\n    const selectedPiecesInChains: SubChainNode[][] = [];\n\n    chainsForAntisenseCreation.forEach((chain) => {\n      let selectedPiece: SubChainNode[] = [];\n      let hasRnaInPiece = false;\n\n      chain.nodes.forEach((node) => {\n        const hasSelectedMonomerInNode = node.monomers.some(\n          (monomer) => monomer.selected,\n        );\n\n        if (!hasSelectedMonomerInNode) {\n          if (hasRnaInPiece) {\n            selectedPiecesInChains.push(selectedPiece);\n          }\n          selectedPiece = [];\n          hasRnaInPiece = false;\n        } else {\n          selectedPiece.push(node);\n        }\n\n        if (node instanceof Nucleoside || node instanceof Nucleotide) {\n          hasRnaInPiece = true;\n        }\n      });\n\n      if (hasRnaInPiece) {\n        selectedPiecesInChains.push(selectedPiece);\n      }\n\n      selectedPiece = [];\n      hasRnaInPiece = false;\n    });\n\n    let lastAddedNode;\n    let lastAddedMonomer;\n\n    selectedPiecesInChains.forEach((selectedPiece) => {\n      selectedPiece.forEach((node) => {\n        if (!node.monomer.selected) {\n          lastAddedMonomer = undefined;\n          lastAddedNode = undefined;\n\n          return;\n        }\n\n        if (node instanceof Nucleotide || node instanceof Nucleoside) {\n          const antisenseBaseLabel = this.getAntisenseBaseLabel(node.rnaBase);\n\n          if (!antisenseBaseLabel) {\n            return;\n          }\n\n          const { modelChanges: addNucleotideCommand, node: addedNode } = (\n            node instanceof Nucleotide && node.phosphate.selected\n              ? Nucleotide\n              : Nucleoside\n          ).createOnCanvas(\n            antisenseBaseLabel,\n            node.monomer.position.add(new Vec2(0, 3)),\n            RNA_DNA_NON_MODIFIED_PART.SUGAR_RNA,\n          );\n\n          command.merge(addNucleotideCommand);\n\n          if (lastAddedNode) {\n            command.merge(\n              this.createPolymerBond(\n                lastAddedMonomer || lastAddedNode.lastMonomerInNode,\n                addedNode.firstMonomerInNode,\n                AttachmentPointName.R2,\n                AttachmentPointName.R1,\n              ),\n            );\n          }\n\n          command.merge(\n            this.createPolymerBond(\n              node.rnaBase,\n              addedNode.rnaBase,\n              AttachmentPointName.HYDROGEN,\n              AttachmentPointName.HYDROGEN,\n              MACROMOLECULES_BOND_TYPES.HYDROGEN,\n            ),\n          );\n\n          lastAddedMonomer = null;\n          lastAddedNode = addedNode;\n        } else {\n          lastAddedMonomer =\n            lastAddedMonomer || lastAddedNode?.lastMonomerInNode;\n\n          node.monomers.forEach((monomer) => {\n            if (!monomer.selected) {\n              lastAddedMonomer = undefined;\n              lastAddedNode = undefined;\n\n              return;\n            }\n\n            const monomerAddCommand = this.addMonomer(\n              monomer.monomerItem,\n              monomer.position.add(new Vec2(0, 4.25)),\n            );\n            const addedMonomer = monomerAddCommand.operations[0]\n              .monomer as BaseMonomer;\n\n            command.merge(monomerAddCommand);\n\n            if (lastAddedMonomer) {\n              command.merge(\n                this.createPolymerBond(\n                  lastAddedMonomer,\n                  addedMonomer,\n                  AttachmentPointName.R2,\n                  AttachmentPointName.R1,\n                ),\n              );\n            }\n\n            lastAddedMonomer = addedMonomer;\n          });\n\n          lastAddedNode = node;\n        }\n      });\n      lastAddedNode = undefined;\n      lastAddedMonomer = undefined;\n    });\n\n    command.merge(\n      this.applySnakeLayout(editor.canvas.width.baseVal.value, true, true),\n    );\n\n    command.setUndoOperationsByPriority();\n\n    return command;\n  }\n\n  public get monomersArray() {\n    return [...this.monomers.values()];\n  }\n\n  public get molecules() {\n    return this.monomersArray.filter((monomer) => {\n      return (\n        monomer.monomerItem.props.isMicromoleculeFragment &&\n        !isMonomerSgroupWithAttachmentPoints(monomer)\n      );\n    });\n  }\n}\nfunction getFirstPosition(\n  height: number,\n  lastPosition: Vec2,\n  restOfRowsWithAntisense = 0,\n) {\n  return new Vec2(\n    MONOMER_START_X_POSITION,\n    lastPosition.y +\n      height +\n      (restOfRowsWithAntisense > 0 ? SNAKE_LAYOUT_Y_OFFSET_BETWEEN_CHAINS : 0),\n  );\n}\n","import { Command } from 'domain/entities/Command';\nimport { SelectLayoutModeOperation } from '../operations/polymerBond';\nimport { CoreEditor, EditorHistory } from '../internal';\nimport {\n  DEFAULT_LAYOUT_MODE,\n  LayoutMode,\n  modesMap,\n} from 'application/editor/modes';\nimport {\n  getStructStringFromClipboardData,\n  initHotKeys,\n  isClipboardAPIAvailable,\n  keyNorm,\n  legacyCopy,\n  legacyPaste,\n} from 'utilities';\nimport { BaseMonomer, Struct, Vec2 } from 'domain/entities';\nimport {\n  identifyStructFormat,\n  macromoleculesFilesInputFormats,\n  SupportedFormat,\n} from 'application/formatters';\nimport { KetSerializer } from 'domain/serializers';\nimport { ChemicalMimeType } from 'domain/services';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { ketcherProvider } from 'application/utils';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\nimport { AttachmentPointName } from 'domain/types';\nimport { MACROMOLECULES_BOND_TYPES } from 'application/editor/tools/Bond';\nimport { Atom } from 'domain/entities/CoreAtom';\n\nexport abstract class BaseMode {\n  private _pasteIsInProgress = false;\n\n  protected constructor(\n    public modeName: LayoutMode,\n    public previousMode: LayoutMode = DEFAULT_LAYOUT_MODE,\n  ) {}\n\n  private changeMode(editor: CoreEditor, modeName: LayoutMode, isUndo = false) {\n    editor.events.layoutModeChange.dispatch(modeName);\n    const ModeConstructor = modesMap[modeName];\n    editor.mode.destroy();\n    editor.setMode(new ModeConstructor());\n    editor.mode.initialize(true, isUndo, false);\n  }\n\n  public initialize(\n    needRemoveSelection = true,\n    _isUndo = false,\n    _needReArrangeChains = false,\n  ) {\n    const command = new Command();\n    const editor = CoreEditor.provideEditorInstance();\n\n    command.addOperation(\n      new SelectLayoutModeOperation(\n        this.changeMode.bind(this, editor, this.modeName),\n        this.changeMode.bind(this, editor, this.previousMode, true),\n        this.modeName,\n        this.previousMode,\n      ),\n    );\n\n    if (needRemoveSelection) {\n      editor.events.selectTool.dispatch('select-rectangle');\n    }\n\n    return command;\n  }\n\n  async onKeyDown(event: KeyboardEvent) {\n    await new Promise<void>((resolve) => {\n      setTimeout(() => {\n        const editor = CoreEditor.provideEditorInstance();\n        if (!this.checkIfTargetIsInput(event)) {\n          const hotKeys = initHotKeys(this.keyboardEventHandlers);\n          const shortcutKey = keyNorm.lookup(hotKeys, event);\n          this.keyboardEventHandlers[shortcutKey]?.handler(event);\n        }\n        editor.events.mouseLeaveSequenceItem.dispatch();\n        resolve();\n      }, 0);\n    });\n  }\n\n  get keyboardEventHandlers() {\n    return {};\n  }\n\n  abstract getNewNodePosition();\n\n  abstract applyAdditionalPasteOperations(\n    _drawingEntitiesManager: DrawingEntitiesManager,\n  ): Command;\n\n  abstract isPasteAllowedByMode(\n    drawingEntitiesManager: DrawingEntitiesManager,\n  ): boolean;\n\n  abstract isPasteAvailable(\n    drawingEntitiesManager: DrawingEntitiesManager,\n  ): boolean;\n\n  abstract scrollForView(): void;\n\n  onCopy(event?: ClipboardEvent) {\n    if (event && this.checkIfTargetIsInput(event)) {\n      return;\n    }\n    const editor = CoreEditor.provideEditorInstance();\n    const drawingEntitiesManager = new DrawingEntitiesManager();\n    editor.drawingEntitiesManager.selectedEntities.forEach(([, entity]) => {\n      if (entity instanceof BaseMonomer) {\n        drawingEntitiesManager.addMonomerChangeModel(\n          entity.monomerItem,\n          entity.position,\n          entity,\n        );\n      } else if (entity instanceof Atom) {\n        drawingEntitiesManager.addMonomerChangeModel(\n          entity.monomer.monomerItem,\n          entity.monomer.position,\n          entity.monomer,\n        );\n      } else if (entity instanceof PolymerBond && entity.secondMonomer) {\n        const firstAttachmentPoint =\n          entity.firstMonomer.getAttachmentPointByBond(entity);\n        const secondAttachmentPoint =\n          entity.secondMonomer?.getAttachmentPointByBond(entity);\n        if (\n          firstAttachmentPoint &&\n          secondAttachmentPoint &&\n          entity.firstMonomer.selected &&\n          entity.secondMonomer?.selected\n        ) {\n          drawingEntitiesManager.finishPolymerBondCreationModelChange(\n            entity.firstMonomer,\n            entity.secondMonomer,\n            firstAttachmentPoint,\n            secondAttachmentPoint,\n            undefined,\n            entity,\n          );\n        }\n      } else if (entity instanceof HydrogenBond && entity.secondMonomer) {\n        drawingEntitiesManager.finishPolymerBondCreationModelChange(\n          entity.firstMonomer,\n          entity.secondMonomer,\n          AttachmentPointName.HYDROGEN,\n          AttachmentPointName.HYDROGEN,\n          MACROMOLECULES_BOND_TYPES.HYDROGEN,\n          entity,\n        );\n      }\n    });\n    const ketSerializer = new KetSerializer();\n    const serializedKet = ketSerializer.serialize(\n      new Struct(),\n      drawingEntitiesManager,\n    );\n    if (isClipboardAPIAvailable()) {\n      navigator.clipboard.writeText(serializedKet);\n    } else if (event) {\n      legacyCopy(event.clipboardData, {\n        'text/plain': serializedKet,\n      });\n      event.preventDefault();\n    }\n  }\n\n  async onPaste(event: ClipboardEvent) {\n    if (this.checkIfTargetIsInput(event)) {\n      return;\n    }\n    const editor = CoreEditor.provideEditorInstance();\n    const isCanvasEmptyBeforePaste =\n      !editor.drawingEntitiesManager.hasDrawingEntities;\n\n    if (isClipboardAPIAvailable()) {\n      const isSequenceEditInRNABuilderMode =\n        CoreEditor.provideEditorInstance().isSequenceEditInRNABuilderMode;\n\n      if (isSequenceEditInRNABuilderMode || this._pasteIsInProgress) return;\n      this._pasteIsInProgress = true;\n\n      const clipboardData = await navigator.clipboard.read();\n      this.pasteFromClipboard(clipboardData).finally(() => {\n        this._pasteIsInProgress = false;\n\n        if (!isCanvasEmptyBeforePaste) {\n          return;\n        }\n\n        editor.zoomToStructuresIfNeeded();\n      });\n    } else {\n      const clipboardData = legacyPaste(event.clipboardData, ['text/plain']);\n      this.pasteFromClipboard(clipboardData);\n      event.preventDefault();\n\n      if (!isCanvasEmptyBeforePaste) {\n        return;\n      }\n\n      editor.zoomToStructuresIfNeeded();\n    }\n  }\n\n  async pasteFromClipboard(clipboardData) {\n    let modelChanges;\n    const editor = CoreEditor.provideEditorInstance();\n    const pastedStr = await getStructStringFromClipboardData(clipboardData);\n    const format = identifyStructFormat(pastedStr, true);\n    if (format === SupportedFormat.ket) {\n      modelChanges = this.pasteKetFormatFragment(pastedStr);\n    } else {\n      let inputFormat;\n      let isSequenceOrFasta = false;\n      switch (format) {\n        case SupportedFormat.sequence:\n          inputFormat =\n            macromoleculesFilesInputFormats.seq[\n              editor.sequenceTypeEnterMode.toLowerCase()\n            ];\n          isSequenceOrFasta = true;\n          break;\n        case SupportedFormat.fasta:\n          inputFormat =\n            macromoleculesFilesInputFormats.fasta[\n              editor.sequenceTypeEnterMode.toLowerCase()\n            ];\n          isSequenceOrFasta = true;\n          break;\n        case SupportedFormat.molV3000:\n          inputFormat = macromoleculesFilesInputFormats.mol;\n          break;\n        default:\n          break;\n      }\n\n      modelChanges = await this.pasteWithIndigoConversion(\n        pastedStr,\n        inputFormat,\n        isSequenceOrFasta,\n      );\n    }\n\n    if (!modelChanges || modelChanges.operations.length === 0) {\n      return;\n    }\n    editor.renderersContainer.update(modelChanges);\n    new EditorHistory(editor).update(modelChanges);\n    this.scrollForView();\n  }\n\n  pasteKetFormatFragment(pastedStr: string) {\n    const editor = CoreEditor.provideEditorInstance();\n    const ketSerializer = new KetSerializer();\n    const deserialisedKet =\n      ketSerializer.deserializeToDrawingEntities(pastedStr);\n    if (!deserialisedKet) {\n      throw new Error('Error during parsing file');\n    }\n    const drawingEntitiesManager = deserialisedKet?.drawingEntitiesManager;\n\n    if (\n      !drawingEntitiesManager ||\n      !this.isPasteAllowedByMode(drawingEntitiesManager)\n    ) {\n      return;\n    }\n    if (!this.isPasteAvailable(drawingEntitiesManager)) {\n      editor.events.openErrorModal.dispatch({\n        errorTitle: 'Error Message',\n        errorMessage:\n          'It is impossible to merge fragments. Attachment point to establish bonds are not available.',\n      });\n      return;\n    }\n\n    this.updateEntitiesPosition(drawingEntitiesManager);\n    const { command: modelChanges, mergedDrawingEntities } =\n      drawingEntitiesManager.mergeInto(editor.drawingEntitiesManager);\n\n    modelChanges.merge(\n      this.applyAdditionalPasteOperations(mergedDrawingEntities),\n    );\n\n    return modelChanges;\n  }\n\n  async pasteWithIndigoConversion(\n    pastedStr: string,\n    inputFormat: ChemicalMimeType,\n    isSequenceOrFasta = false,\n  ) {\n    const indigo = ketcherProvider.getKetcher().indigo;\n    try {\n      const ketStruct = await indigo.convert(\n        isSequenceOrFasta ? pastedStr.toUpperCase() : pastedStr,\n        {\n          outputFormat: ChemicalMimeType.KET,\n          inputFormat,\n        },\n      );\n\n      return this.pasteKetFormatFragment(ketStruct.struct);\n    } catch (error) {\n      const stringError =\n        typeof error === 'string' ? error : JSON.stringify(error);\n      const errorMessage = 'Convert error! ' + stringError;\n\n      this.unsupportedSymbolsError(errorMessage, isSequenceOrFasta);\n\n      return new Command();\n    }\n  }\n\n  private updateEntitiesPosition(\n    drawingEntitiesManager: DrawingEntitiesManager,\n  ) {\n    const newNodePosition = this.getNewNodePosition();\n    const firstEntityPosition =\n      drawingEntitiesManager.allEntities[0]?.[1].position;\n    const offset = Vec2.diff(newNodePosition, new Vec2(firstEntityPosition));\n\n    drawingEntitiesManager.allEntities.forEach(([, drawindEntity]) => {\n      drawingEntitiesManager.moveDrawingEntityModelChange(\n        drawindEntity,\n        offset,\n      );\n    });\n  }\n\n  unsupportedSymbolsError(errorMessage: string, isSequenceOrFasta = false) {\n    const editor = CoreEditor.provideEditorInstance();\n    editor.events.openErrorModal.dispatch({\n      errorTitle: isSequenceOrFasta ? 'Unsupported symbols' : 'Error',\n      errorMessage,\n    });\n  }\n\n  private checkIfTargetIsInput(event: Event) {\n    return (\n      event.target instanceof HTMLElement &&\n      (event.target?.nodeName === 'INPUT' ||\n        event.target?.nodeName === 'TEXTAREA')\n    );\n  }\n\n  public destroy() {}\n}\n","import { LayoutMode } from 'application/editor/modes/types';\nimport { BaseMode } from 'application/editor/modes/internal';\nimport { CoreEditor } from '../Editor';\nimport { Coordinates } from '../internal';\nimport { Command } from 'domain/entities/Command';\n\nexport class FlexMode extends BaseMode {\n  constructor(previousMode?: LayoutMode) {\n    super('flex-layout-mode', previousMode);\n  }\n\n  initialize() {\n    const command = super.initialize();\n    const editor = CoreEditor.provideEditorInstance();\n\n    const modelChanges =\n      editor.drawingEntitiesManager.applyFlexLayoutMode(true);\n\n    command.merge(editor.drawingEntitiesManager.recalculateCanvasMatrix());\n\n    editor.renderersContainer.update(modelChanges);\n\n    return command;\n  }\n\n  getNewNodePosition() {\n    const editor = CoreEditor.provideEditorInstance();\n\n    return Coordinates.canvasToModel(editor.lastCursorPositionOfCanvas);\n  }\n\n  applyAdditionalPasteOperations() {\n    const command = new Command();\n    const editor = CoreEditor.provideEditorInstance();\n\n    editor.drawingEntitiesManager.recalculateAntisenseChains();\n\n    if (!editor.drawingEntitiesManager.hasAntisenseChains) {\n      return command;\n    }\n\n    command.merge(\n      editor.drawingEntitiesManager.applySnakeLayout(\n        editor.canvas.width.baseVal.value,\n        true,\n        true,\n        true,\n      ),\n    );\n\n    command.setUndoOperationsByPriority();\n\n    return command;\n  }\n\n  isPasteAllowedByMode(): boolean {\n    return true;\n  }\n\n  isPasteAvailable(): boolean {\n    return true;\n  }\n\n  scrollForView(): void {}\n}\n","import { BaseMonomer } from 'domain/entities/BaseMonomer';\n\nexport class MonomerSequenceNode {\n  constructor(public monomer: BaseMonomer) {}\n\n  public get SubChainConstructor() {\n    return this.monomer.SubChainConstructor;\n  }\n\n  public get firstMonomerInNode() {\n    return this.monomer;\n  }\n\n  public get lastMonomerInNode() {\n    return this.monomer;\n  }\n\n  public get monomers() {\n    return [this.monomer];\n  }\n\n  public get renderer() {\n    return this.monomer.renderer;\n  }\n\n  public get modified() {\n    return this.monomer.isModification;\n  }\n}\n","import { BaseSequenceItemRenderer, SequenceRenderer } from 'application/render';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { CoreEditor } from 'application/editor';\nimport ZoomTool from '../../../../editor/tools/Zoom';\nimport { select } from 'd3';\nimport { drawnStructuresSelector } from 'application/editor/constants';\n\nconst TEXT_COLOR = '#333333';\nconst HOVER_COLOR = '#167782';\nconst BUTTON_OFFSET_FROM_CANVAS = 20;\nconst BUTTON_Y_OFFSET_FROM_ROW = 18;\n\nexport class NewSequenceButton {\n  private buttonElement?: D3SvgElementSelection<SVGElement, void>;\n  private canvas: D3SvgElementSelection<SVGSVGElement, void>;\n  private rootElement?: D3SvgElementSelection<SVGGElement, void>;\n  private bodyElement?: D3SvgElementSelection<SVGForeignObjectElement, void>;\n\n  constructor(private indexOfRowBefore: number) {\n    this.canvas = ZoomTool.instance?.canvas || select(drawnStructuresSelector);\n  }\n\n  public show() {\n    const editor = CoreEditor.provideEditorInstance();\n    const chain =\n      SequenceRenderer.chainsCollection.chains[this.indexOfRowBefore];\n    const lastNodeRendererInChain = chain.lastNode?.renderer;\n\n    if (!(lastNodeRendererInChain instanceof BaseSequenceItemRenderer)) {\n      return;\n    }\n\n    this.rootElement = this.canvas\n      .append('g')\n      .data([this])\n      .attr('class', 'dynamic-element')\n      .attr(\n        'transform',\n        `translate(${BUTTON_OFFSET_FROM_CANVAS}, ${\n          lastNodeRendererInChain.scaledMonomerPositionForSequence.y +\n          BUTTON_Y_OFFSET_FROM_ROW\n        })`,\n      )\n      .attr('cursor', 'pointer') as never as D3SvgElementSelection<\n      SVGGElement,\n      void\n    >;\n\n    this.rootElement.attr('opacity', '0');\n    this.rootElement\n      .append('rect')\n      .attr('x', '16')\n      .attr('y', '14')\n      .attr('width', '595')\n      .attr('height', '4')\n      .attr('stroke', '#B4B9D6')\n      .attr('stroke-width', '1')\n      .attr('fill', '#fff');\n\n    this.bodyElement = this.rootElement\n      .append('foreignObject')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('height', '35')\n      .attr('width', '611');\n\n    this.buttonElement = this.bodyElement.append<SVGElement>('xhtml:div').attr(\n      'style',\n      `\n        width: 32px;\n        padding:  8px;\n        font-size: 12px;\n        color: ${TEXT_COLOR};\n        border-radius: 20px;\n        box-shadow: 0px 2px 5px 0px #67688426;\n        background-color: #ffffff;\n        font-weight: 400;\n        border: none;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      `,\n    );\n\n    NewSequenceButton.appendPlusIcon(this.buttonElement);\n\n    this.rootElement\n      .on('mouseover', () => {\n        this.appendHover();\n        this.rootElement?.attr('opacity', '1');\n      })\n      .on('mouseout', () => {\n        this.removeHover();\n        this.rootElement?.attr('opacity', '0');\n      })\n      .on('click', (event: MouseEvent) => {\n        event.stopPropagation();\n        editor.events.startNewSequence.dispatch({\n          indexOfRowBefore: this.indexOfRowBefore,\n        });\n      });\n  }\n\n  public static appendPlusIcon(\n    element: D3SvgElementSelection<SVGElement, void>,\n  ) {\n    element\n      .append('svg')\n      .attr('width', '16')\n      .attr('height', '16')\n      .attr('fill', 'currentColor')\n      .append('path')\n      .attr(\n        'd',\n        'M16 7.00095V9.00095H9V16.002H7V9.00095H0V7.00095H7V0.00195312H9V7.00095H16Z',\n      );\n  }\n\n  protected appendHover(): D3SvgElementSelection<SVGUseElement, void> | void {\n    this.buttonElement?.style('color', HOVER_COLOR);\n  }\n\n  protected appendHoverAreaElement(): void {}\n\n  drawSelection(): void {}\n\n  moveSelection(): void {}\n\n  protected removeHover(): void {\n    this.buttonElement?.style('color', TEXT_COLOR);\n  }\n\n  public remove() {\n    this.rootElement?.remove();\n    this.rootElement = undefined;\n  }\n}\n","import { CoreEditor, EditorHistory } from 'application/editor/internal';\nimport { LayoutMode } from 'application/editor/modes';\nimport { BaseMode } from 'application/editor/modes/BaseMode';\nimport ZoomTool from 'application/editor/tools/Zoom';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport {\n  NodeSelection,\n  NodesSelection,\n  SequenceRenderer,\n} from 'application/render/renderers/sequence/SequenceRenderer';\nimport { AttachmentPointName, MonomerItemType } from 'domain/types';\nimport { Command } from 'domain/entities/Command';\nimport {\n  AmbiguousMonomer,\n  BaseMonomer,\n  LinkerSequenceNode,\n  Phosphate,\n  RNABase,\n  SequenceType,\n  Sugar,\n  Vec2,\n} from 'domain/entities';\nimport { BaseRenderer } from 'application/render/renderers/internal';\nimport { EmptySequenceNode } from 'domain/entities/EmptySequenceNode';\nimport { Nucleoside } from 'domain/entities/Nucleoside';\nimport { Nucleotide } from 'domain/entities/Nucleotide';\nimport {\n  ReinitializeModeOperation,\n  RestoreSequenceCaretPositionOperation,\n} from 'application/editor/operations/modes';\nimport assert from 'assert';\nimport {\n  getPeptideLibraryItem,\n  getRnaPartLibraryItem,\n  getSugarBySequenceType,\n} from 'domain/helpers/rna';\nimport {\n  peptideNaturalAnalogues,\n  RNA_DNA_NON_MODIFIED_PART,\n  rnaDnaNaturalAnalogues,\n  RnaDnaNaturalAnaloguesEnum,\n} from 'domain/constants/monomers';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { isNumber, uniq } from 'lodash';\nimport { ChainsCollection } from 'domain/entities/monomer-chains/ChainsCollection';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { Chain } from 'domain/entities/monomer-chains/Chain';\nimport { MonomerSequenceNode } from 'domain/entities/MonomerSequenceNode';\nimport {\n  IRnaPreset,\n  LabeledNodesWithPositionInSequence,\n} from 'application/editor/tools/Tool';\nimport { NewSequenceButton } from 'application/render/renderers/sequence/ui-controls/NewSequenceButton';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\n\nconst naturalAnalogues = uniq([\n  ...rnaDnaNaturalAnalogues,\n  ...peptideNaturalAnalogues,\n]);\n\nenum Direction {\n  Left = 'left',\n  Right = 'right',\n}\n\nexport interface StartNewSequenceEventData {\n  indexOfRowBefore: number;\n}\n\nexport class SequenceMode extends BaseMode {\n  private _isEditMode = false;\n  private _isEditInRNABuilderMode = false;\n  private selectionStarted = false;\n  private selectionStartCaretPosition = -1;\n  private mousemoveCounter = 0;\n\n  constructor(previousMode?: LayoutMode) {\n    super('sequence-layout-mode', previousMode);\n  }\n\n  public get isEditMode() {\n    return this._isEditMode;\n  }\n\n  public set isEditMode(isEditMode) {\n    this._isEditMode = isEditMode;\n  }\n\n  public get isEditInRNABuilderMode() {\n    return this._isEditInRNABuilderMode;\n  }\n\n  public set isEditInRNABuilderMode(isEditInRNABuilderMode) {\n    this._isEditInRNABuilderMode = isEditInRNABuilderMode;\n  }\n\n  public initialize(\n    needScroll = true,\n    needRemoveSelection = true,\n    needReArrangeChains = true,\n  ) {\n    const command = super.initialize(needRemoveSelection);\n    const editor = CoreEditor.provideEditorInstance();\n\n    editor.drawingEntitiesManager.clearCanvas();\n\n    // Prevent rearranging chains (and recalculating the layout) when switching to sequence mode,\n    // only recalculate after changes in the sequence\n    const modelChanges = needReArrangeChains\n      ? editor.drawingEntitiesManager.applySnakeLayout(\n          editor.canvas.width.baseVal.value,\n          true,\n          false,\n        )\n      : new Command();\n    const zoom = ZoomTool.instance;\n\n    editor.renderersContainer.update(modelChanges);\n\n    const chainsCollection =\n      editor.drawingEntitiesManager.applyMonomersSequenceLayout();\n    const firstMonomerPosition = (\n      chainsCollection.firstNode?.monomer.renderer as BaseSequenceItemRenderer\n    )?.scaledMonomerPositionForSequence;\n\n    if (firstMonomerPosition && (needScroll || needReArrangeChains)) {\n      zoom.scrollTo(firstMonomerPosition);\n    }\n\n    modelChanges.merge(command);\n\n    return modelChanges;\n  }\n\n  public turnOnEditMode(\n    sequenceItemRenderer?: BaseSequenceItemRenderer,\n    needToRemoveSelection = true,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n\n    this.isEditMode = true;\n    this.initialize(false, needToRemoveSelection, false);\n    if (sequenceItemRenderer) {\n      SequenceRenderer.setCaretPositionNextToMonomer(\n        sequenceItemRenderer.node.monomer,\n      );\n    }\n    editor.events.toggleSequenceEditMode.dispatch(true);\n  }\n\n  public turnOffEditMode() {\n    if (!this.isEditMode) return;\n    const editor = CoreEditor.provideEditorInstance();\n\n    this.isEditMode = false;\n    this.initialize(false, true, false);\n    editor.events.toggleSequenceEditMode.dispatch(false);\n  }\n\n  public turnOnSequenceEditInRNABuilderMode() {\n    const editor = CoreEditor.provideEditorInstance();\n\n    this.isEditInRNABuilderMode = true;\n    this.initialize(false, false, false);\n\n    editor.events.toggleSequenceEditInRNABuilderMode.dispatch(true);\n  }\n\n  public turnOffSequenceEditInRNABuilderMode() {\n    const editor = CoreEditor.provideEditorInstance();\n\n    this.isEditInRNABuilderMode = false;\n    this.initialize(false, true, false);\n    editor.events.toggleSequenceEditInRNABuilderMode.dispatch(false);\n  }\n\n  public startNewSequence(eventData?: StartNewSequenceEventData) {\n    const currentChainIndex = this.isEditMode\n      ? SequenceRenderer.currentChainIndex\n      : SequenceRenderer.chainsCollection.chains.length - 1;\n    const indexOfRowBefore = isNumber(eventData?.indexOfRowBefore)\n      ? eventData?.indexOfRowBefore\n      : currentChainIndex;\n\n    if (!this.isEditMode) {\n      this.turnOnEditMode();\n    }\n\n    SequenceRenderer.startNewSequence(indexOfRowBefore);\n  }\n\n  public modifySequenceInRnaBuilder(\n    updatedSelection: LabeledNodesWithPositionInSequence[],\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const history = new EditorHistory(editor);\n    const modelChanges = new Command();\n\n    // Update Nucleotides one by one\n    for (const labeledNucleoelement of updatedSelection) {\n      const nodeIndexOverall = labeledNucleoelement.nodeIndexOverall;\n\n      if (nodeIndexOverall === undefined) return;\n\n      // Create monomerItem(s) based on label\n      let sugarMonomerItem;\n      let baseMonomerItem;\n      let phosphateMonomerItem;\n      if (labeledNucleoelement.sugarLabel) {\n        sugarMonomerItem = getRnaPartLibraryItem(\n          editor,\n          labeledNucleoelement.sugarLabel,\n        );\n      }\n      if (labeledNucleoelement.baseLabel) {\n        baseMonomerItem = getRnaPartLibraryItem(\n          editor,\n          labeledNucleoelement.baseLabel,\n        );\n      }\n      if (labeledNucleoelement.phosphateLabel) {\n        phosphateMonomerItem = getRnaPartLibraryItem(\n          editor,\n          labeledNucleoelement.phosphateLabel,\n        );\n      }\n\n      const currentNode = SequenceRenderer.getNodeByPointer(nodeIndexOverall);\n\n      // Update Sugar monomerItem object\n      if (currentNode.sugar && sugarMonomerItem) {\n        modelChanges.merge(\n          editor.drawingEntitiesManager.modifyMonomerItem(\n            currentNode.sugar,\n            sugarMonomerItem,\n          ),\n        );\n      }\n      // Update Base monomerItem object\n      if (currentNode.rnaBase && baseMonomerItem) {\n        modelChanges.merge(\n          editor.drawingEntitiesManager.modifyMonomerItem(\n            currentNode.rnaBase,\n            baseMonomerItem,\n          ),\n        );\n      }\n\n      // Update monomerItem object or add Phosphate\n      if (phosphateMonomerItem) {\n        // Update Phosphate monomerItem object for Nucleotide\n        if (currentNode instanceof Nucleotide) {\n          modelChanges.merge(\n            editor.drawingEntitiesManager.modifyMonomerItem(\n              currentNode.phosphate,\n              phosphateMonomerItem,\n            ),\n          );\n          // Add Phosphate to Nucleoside\n        } else if (currentNode instanceof Nucleoside) {\n          const sugarR2 = currentNode.sugar.attachmentPointsToBonds.R2;\n\n          if (sugarR2 instanceof MonomerToAtomBond) {\n            return;\n          }\n\n          const nextMonomerInSameChain = sugarR2?.secondMonomer;\n\n          // Remove existing bond connection between Nucleoside Sugar and next node in case of any\n          if (sugarR2) {\n            modelChanges.merge(\n              editor.drawingEntitiesManager.deletePolymerBond(sugarR2),\n            );\n          }\n\n          modelChanges.merge(\n            this.bondNodesThroughNewPhosphate(\n              new Vec2(0, 0),\n              currentNode.sugar,\n              nextMonomerInSameChain,\n              labeledNucleoelement.phosphateLabel,\n            ),\n          );\n          // Update Phosphate monomerItem object\n        } else if (currentNode.monomer instanceof Phosphate) {\n          modelChanges.merge(\n            editor.drawingEntitiesManager.modifyMonomerItem(\n              currentNode.monomer,\n              phosphateMonomerItem,\n            ),\n          );\n        }\n      }\n    }\n\n    // Refresh UI\n    modelChanges.addOperation(new ReinitializeModeOperation());\n    editor.renderersContainer.update(modelChanges);\n    history.update(modelChanges);\n  }\n\n  public click(event: MouseEvent) {\n    const eventData = event.target?.__data__;\n    const isClickedOnSequenceItem =\n      eventData instanceof BaseSequenceItemRenderer;\n\n    if (this.isEditMode && isClickedOnSequenceItem) {\n      this.unselectAllEntities();\n    }\n  }\n\n  public doubleClickOnSequenceItem(event: MouseEvent) {\n    if (this.isEditInRNABuilderMode) {\n      return;\n    }\n\n    const eventData = event.target?.__data__ as BaseSequenceItemRenderer;\n\n    this.turnOnEditMode(eventData, false);\n  }\n\n  public mousedownBetweenSequenceItems(event: MouseEvent) {\n    if (this.isEditInRNABuilderMode) {\n      return;\n    }\n\n    const eventData = event.target?.__data__ as BaseSequenceItemRenderer;\n\n    this.turnOnEditMode(eventData);\n    SequenceRenderer.moveCaretForward();\n  }\n\n  public mousedown(event: MouseEvent) {\n    const eventData: BaseRenderer | NewSequenceButton | undefined =\n      event.target?.__data__;\n    const isClickedOnEmptyPlace = !(\n      eventData instanceof NewSequenceButton ||\n      eventData instanceof BaseRenderer\n    );\n    const isEventOnSequenceItem = eventData instanceof BaseSequenceItemRenderer;\n\n    if (isClickedOnEmptyPlace) {\n      this.turnOffEditMode();\n\n      return;\n    }\n\n    if (this.isEditMode && isEventOnSequenceItem && !event.shiftKey) {\n      let sequenceItemBoundingBox = eventData.rootBoundingClientRect;\n\n      // Case when user clicks between symbols. In this case renderer stored in eventData\n      // is already destroyed during rerender in mousedownBetweenSequenceItems handler\n      if (!sequenceItemBoundingBox) {\n        sequenceItemBoundingBox = SequenceRenderer.getRendererByMonomer(\n          eventData.node.monomer,\n        )?.rootBoundingClientRect;\n      }\n\n      const isRightSideOfSequenceItemClicked = sequenceItemBoundingBox\n        ? event.clientX >\n          sequenceItemBoundingBox.x + sequenceItemBoundingBox.width / 2\n        : false;\n\n      SequenceRenderer.setCaretPositionByMonomer(eventData.node.monomer);\n\n      if (isRightSideOfSequenceItemClicked) {\n        SequenceRenderer.moveCaretForward();\n      }\n\n      SequenceRenderer.resetLastUserDefinedCaretPosition();\n\n      this.unselectAllEntities();\n      this.selectionStarted = true;\n      this.selectionStartCaretPosition = SequenceRenderer.caretPosition;\n    }\n  }\n\n  public mousemove(event: MouseEvent) {\n    const eventData = event.target?.__data__;\n    const isEventOnSequenceItem = eventData instanceof BaseSequenceItemRenderer;\n    // this.mousemoveCounter > 1 used here to prevent selection of single monomer\n    // when user just clicked on it during the mousemove event\n    if (\n      this.isEditMode &&\n      isEventOnSequenceItem &&\n      this.selectionStarted &&\n      this.mousemoveCounter > 1\n    ) {\n      const editor = CoreEditor.provideEditorInstance();\n      SequenceRenderer.setCaretPositionBySequenceItemRenderer(\n        eventData as BaseSequenceItemRenderer,\n      );\n\n      let startCaretPosition = this.selectionStartCaretPosition;\n      let endCaretPosition = SequenceRenderer.caretPosition;\n      if (this.selectionStartCaretPosition > SequenceRenderer.caretPosition) {\n        startCaretPosition = SequenceRenderer.caretPosition;\n        endCaretPosition = this.selectionStartCaretPosition;\n      }\n      const monomers = SequenceRenderer.getMonomersByCaretPositionRange(\n        startCaretPosition,\n        endCaretPosition,\n      );\n      this.unselectAllEntities();\n      const { command: modelChanges } =\n        editor.drawingEntitiesManager.getAllSelectedEntitiesForEntities(\n          monomers,\n        );\n      const moveCaretOperation = new RestoreSequenceCaretPositionOperation(\n        this.selectionStartCaretPosition,\n        SequenceRenderer.caretPosition,\n      );\n      modelChanges.addOperation(moveCaretOperation);\n      editor.renderersContainer.update(modelChanges);\n    }\n\n    if (this.selectionStarted) {\n      this.mousemoveCounter++;\n    }\n  }\n\n  mouseup() {\n    if (this.selectionStarted) {\n      this.selectionStarted = false;\n    }\n\n    if (this.isEditMode) {\n      SequenceRenderer.resetLastUserDefinedCaretPosition();\n    }\n    this.mousemoveCounter = 0;\n  }\n\n  private bondNodesThroughNewPhosphate(\n    position: Vec2,\n    previousMonomer: BaseMonomer,\n    nextMonomer?: BaseMonomer,\n    phosphate?: string,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const phosphateLibraryItem = getRnaPartLibraryItem(\n      editor,\n      phosphate || RNA_DNA_NON_MODIFIED_PART.PHOSPHATE,\n    );\n\n    assert(phosphateLibraryItem);\n\n    const modelChanges = editor.drawingEntitiesManager.addMonomer(\n      phosphateLibraryItem,\n      position,\n    );\n\n    const additionalPhosphate = modelChanges.operations[0]\n      .monomer as BaseMonomer;\n\n    modelChanges.merge(\n      this.tryToCreatePolymerBond(previousMonomer, additionalPhosphate),\n    );\n\n    if (nextMonomer) {\n      modelChanges.merge(\n        this.tryToCreatePolymerBond(additionalPhosphate, nextMonomer),\n      );\n    }\n\n    return modelChanges;\n  }\n\n  private handlePeptideNodeAddition(\n    enteredSymbol: string,\n    newNodePosition: Vec2,\n  ) {\n    if (!peptideNaturalAnalogues.includes(enteredSymbol)) {\n      return undefined;\n    }\n\n    const modelChanges = new Command();\n    const editor = CoreEditor.provideEditorInstance();\n    const newPeptideLibraryItem = getPeptideLibraryItem(editor, enteredSymbol);\n\n    assert(newPeptideLibraryItem);\n\n    const peptideAddCommand = editor.drawingEntitiesManager.addMonomer(\n      newPeptideLibraryItem,\n      newNodePosition,\n    );\n\n    const newPeptide = peptideAddCommand.operations[0].monomer as BaseMonomer;\n    const newPeptideNode = new MonomerSequenceNode(newPeptide);\n\n    modelChanges.merge(peptideAddCommand);\n\n    modelChanges.merge(this.insertNewSequenceFragment(newPeptideNode));\n\n    return modelChanges;\n  }\n\n  private handleRnaDnaNodeAddition(\n    enteredSymbol: RnaDnaNaturalAnaloguesEnum | string,\n    currentNode: SubChainNode,\n    newNodePosition: Vec2,\n  ) {\n    if (!rnaDnaNaturalAnalogues.includes(enteredSymbol)) {\n      return undefined;\n    }\n\n    const editor = CoreEditor.provideEditorInstance();\n    const modelChanges = new Command();\n    const { modelChanges: addedNodeModelChanges, node: nodeToAdd } =\n      currentNode instanceof Nucleotide || currentNode instanceof Nucleoside\n        ? Nucleotide.createOnCanvas(\n            enteredSymbol,\n            newNodePosition,\n            getSugarBySequenceType(editor.sequenceTypeEnterMode),\n          )\n        : Nucleoside.createOnCanvas(\n            enteredSymbol,\n            newNodePosition,\n            getSugarBySequenceType(editor.sequenceTypeEnterMode),\n          );\n\n    modelChanges.merge(addedNodeModelChanges);\n\n    modelChanges.merge(this.insertNewSequenceFragment(nodeToAdd));\n\n    return modelChanges;\n  }\n\n  private connectNodes(\n    firstNodeToConnect: SubChainNode | undefined,\n    secondNodeToConnect: SubChainNode | undefined,\n    modelChanges: Command,\n    newNodePosition: Vec2,\n    nextNodeInSameChain?: SubChainNode,\n  ) {\n    if (\n      !firstNodeToConnect ||\n      firstNodeToConnect instanceof EmptySequenceNode ||\n      !secondNodeToConnect ||\n      secondNodeToConnect instanceof EmptySequenceNode\n    ) {\n      return;\n    }\n\n    const editor = CoreEditor.provideEditorInstance();\n    const nodeR2Bond =\n      firstNodeToConnect.lastMonomerInNode.attachmentPointsToBonds?.R2;\n    const nextNodeR1Bond =\n      secondNodeToConnect?.firstMonomerInNode?.attachmentPointsToBonds.R1;\n\n    if (nodeR2Bond || nextNodeR1Bond) {\n      editor.events.error.dispatch(\n        'No available attachment points to establish bonds for merge.',\n      );\n\n      return;\n    }\n\n    if (\n      nextNodeInSameChain instanceof EmptySequenceNode &&\n      firstNodeToConnect instanceof Nucleoside &&\n      (secondNodeToConnect instanceof Nucleotide ||\n        secondNodeToConnect instanceof Nucleoside)\n    ) {\n      modelChanges.merge(\n        this.bondNodesThroughNewPhosphate(\n          newNodePosition,\n          firstNodeToConnect.lastMonomerInNode,\n          secondNodeToConnect.firstMonomerInNode,\n        ),\n      );\n    } else {\n      modelChanges.merge(\n        this.tryToCreatePolymerBond(\n          firstNodeToConnect.lastMonomerInNode,\n          secondNodeToConnect.firstMonomerInNode,\n        ),\n      );\n    }\n  }\n\n  private deleteBondToNextNodeInChain(\n    node: SubChainNode | undefined,\n    modelChanges: Command,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const nodeR2Bond = node?.lastMonomerInNode.attachmentPointsToBonds.R2;\n\n    if (!nodeR2Bond || nodeR2Bond instanceof MonomerToAtomBond) {\n      return;\n    }\n\n    modelChanges.merge(\n      editor.drawingEntitiesManager.deletePolymerBond(nodeR2Bond),\n    );\n  }\n\n  private finishNodesDeletion(\n    modelChanges: Command,\n    previousCaretPosition: number,\n    newCaretPosition?: number,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const history = new EditorHistory(editor);\n    const moveCaretOperation = new RestoreSequenceCaretPositionOperation(\n      previousCaretPosition,\n      isNumber(newCaretPosition)\n        ? newCaretPosition\n        : SequenceRenderer.caretPosition,\n    );\n    modelChanges.addOperation(new ReinitializeModeOperation());\n    editor.renderersContainer.update(modelChanges);\n    modelChanges.addOperation(moveCaretOperation);\n    history.update(modelChanges);\n    this.selectionStartCaretPosition = -1;\n    SequenceRenderer.resetLastUserDefinedCaretPosition();\n  }\n\n  private tryToCreatePolymerBond(\n    firstMonomer: BaseMonomer,\n    secondMonomer: BaseMonomer,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n\n    const isConnectionPossible = this.areR1R2Free(secondMonomer, firstMonomer);\n\n    if (!isConnectionPossible) {\n      this.showMergeWarningModal();\n      return new Command();\n    }\n\n    return editor.drawingEntitiesManager.createPolymerBond(\n      firstMonomer,\n      secondMonomer,\n      AttachmentPointName.R2,\n      AttachmentPointName.R1,\n    );\n  }\n\n  private handleNodesDeletion(selections: NodesSelection) {\n    const editor = CoreEditor.provideEditorInstance();\n    const modelChanges = new Command();\n\n    selections.forEach((selectionRange) => {\n      const selectionStartNode = selectionRange[0].node;\n      const selectionEndNode = selectionRange[selectionRange.length - 1].node;\n      let isPhosphateAdditionalyDeleted = false;\n\n      const nodeBeforeSelection =\n        SequenceRenderer.getPreviousNode(selectionStartNode);\n      const nodeAfterSelection = SequenceRenderer.getNextNode(selectionEndNode);\n      const nodeInSameChainBeforeSelection =\n        SequenceRenderer.getPreviousNodeInSameChain(selectionStartNode);\n      const nodeInSameChainAfterSelection =\n        SequenceRenderer.getNextNodeInSameChain(selectionEndNode);\n\n      if (\n        !nodeInSameChainBeforeSelection &&\n        nodeAfterSelection &&\n        !(nodeAfterSelection instanceof EmptySequenceNode)\n      ) {\n        modelChanges.merge(\n          editor.drawingEntitiesManager.moveMonomer(\n            nodeAfterSelection.monomer,\n            selectionStartNode.monomer.position,\n          ),\n        );\n      }\n\n      if (\n        !nodeBeforeSelection ||\n        nodeBeforeSelection instanceof EmptySequenceNode\n      ) {\n        return;\n      }\n\n      if (\n        nodeBeforeSelection === nodeInSameChainBeforeSelection &&\n        nodeBeforeSelection instanceof Nucleotide &&\n        !(nodeInSameChainAfterSelection instanceof Nucleotide) &&\n        !(nodeInSameChainAfterSelection instanceof Nucleoside)\n      ) {\n        // delete phosphate from last nucleotide\n        modelChanges.merge(\n          editor.drawingEntitiesManager.deleteMonomer(\n            nodeBeforeSelection.lastMonomerInNode,\n          ),\n        );\n        // TODO get rid of this boolean\n        isPhosphateAdditionalyDeleted = true;\n      }\n\n      if (\n        !nodeAfterSelection ||\n        nodeAfterSelection instanceof EmptySequenceNode ||\n        (!this.isEditMode &&\n          (nodeAfterSelection !== nodeInSameChainAfterSelection ||\n            nodeBeforeSelection !== nodeInSameChainBeforeSelection))\n      ) {\n        return;\n      }\n\n      if (\n        nodeBeforeSelection instanceof Nucleoside &&\n        nodeAfterSelection instanceof Nucleotide\n      ) {\n        modelChanges.merge(\n          this.bondNodesThroughNewPhosphate(\n            this.getNewSequenceItemPosition(nodeBeforeSelection),\n            nodeBeforeSelection.lastMonomerInNode,\n            nodeAfterSelection.firstMonomerInNode,\n          ),\n        );\n      } else {\n        modelChanges.merge(\n          this.tryToCreatePolymerBond(\n            isPhosphateAdditionalyDeleted\n              ? nodeBeforeSelection.firstMonomerInNode\n              : nodeBeforeSelection.lastMonomerInNode,\n            nodeAfterSelection.firstMonomerInNode,\n          ),\n        );\n      }\n    });\n\n    return modelChanges;\n  }\n\n  get keyboardEventHandlers() {\n    const deleteNode = (direction: Direction) => {\n      const editor = CoreEditor.provideEditorInstance();\n      const nodeToDelete =\n        direction === Direction.Left\n          ? SequenceRenderer.previousNode\n          : SequenceRenderer.getNodeByPointer(SequenceRenderer.caretPosition);\n      const caretPosition =\n        direction === Direction.Left\n          ? (SequenceRenderer.previousCaretPosition as number)\n          : SequenceRenderer.caretPosition;\n      const selections = SequenceRenderer.selections;\n      const modelChanges = new Command();\n      let nodesToDelete: NodesSelection;\n\n      if (selections.length) {\n        modelChanges.merge(this.deleteSelectedDrawingEntities());\n        nodesToDelete = selections;\n      } else if (nodeToDelete) {\n        nodeToDelete.monomers.forEach((monomer) => {\n          modelChanges.merge(\n            editor.drawingEntitiesManager.deleteMonomer(monomer),\n          );\n        });\n        nodesToDelete = [\n          [\n            {\n              node: nodeToDelete,\n              nodeIndexOverall: caretPosition,\n            },\n          ],\n        ];\n      } else {\n        return;\n      }\n\n      modelChanges.merge(this.handleNodesDeletion(nodesToDelete));\n\n      this.finishNodesDeletion(\n        modelChanges,\n        nodesToDelete[0][0].nodeIndexOverall,\n        nodesToDelete[0][0].nodeIndexOverall,\n      );\n\n      if (\n        SequenceRenderer.caretPosition === 0 &&\n        SequenceRenderer.chainsCollection.chains.length === 0\n      ) {\n        this.startNewSequence();\n      }\n    };\n\n    return {\n      delete: {\n        shortcut: ['Delete'],\n        handler: () => deleteNode(Direction.Right),\n      },\n      backspace: {\n        shortcut: ['Backspace'],\n        handler: () => deleteNode(Direction.Left),\n      },\n      'turn-off-edit-mode': {\n        shortcut: ['Escape'],\n        handler: () => {\n          this.turnOffEditMode();\n        },\n      },\n      'start-new-sequence': {\n        shortcut: ['Enter'],\n        handler: () => {\n          this.unselectAllEntities();\n          this.startNewSequence();\n        },\n      },\n      'move-caret-up': {\n        shortcut: ['ArrowUp'],\n        handler: () => {\n          SequenceRenderer.moveCaretUp();\n        },\n      },\n      'move-caret-down': {\n        shortcut: ['ArrowDown'],\n        handler: () => {\n          SequenceRenderer.moveCaretDown();\n        },\n      },\n      'move-caret-forward': {\n        shortcut: ['ArrowRight'],\n        handler: () => {\n          if (!this.isEditMode) {\n            return;\n          }\n          SequenceRenderer.moveCaretForward();\n          SequenceRenderer.resetLastUserDefinedCaretPosition();\n        },\n      },\n      'move-caret-back': {\n        shortcut: ['ArrowLeft'],\n        handler: () => {\n          if (!this.isEditMode) {\n            return;\n          }\n          SequenceRenderer.moveCaretBack();\n          SequenceRenderer.resetLastUserDefinedCaretPosition();\n        },\n      },\n      'add-sequence-item': {\n        shortcut: [\n          ...naturalAnalogues,\n          ...naturalAnalogues.map((naturalAnalogue) =>\n            naturalAnalogue.toLowerCase(),\n          ),\n        ],\n        handler: (event) => {\n          if (\n            SequenceRenderer.chainsCollection.length === 1 &&\n            SequenceRenderer.chainsCollection.firstNode instanceof\n              EmptySequenceNode &&\n            !this.isEditMode\n          ) {\n            this.turnOnEditMode();\n            SequenceRenderer.setCaretPosition(0);\n          }\n\n          if (!this.isEditMode) {\n            return;\n          }\n\n          if (!this.deleteSelection()) {\n            return;\n          }\n\n          const enteredSymbol = event.code.replace('Key', '');\n          const editor = CoreEditor.provideEditorInstance();\n          const history = new EditorHistory(editor);\n          const modelChanges = this.insertNewSequenceItem(\n            editor,\n            enteredSymbol,\n          );\n\n          // Case when user type symbol that does not exist in current sequence type mode\n          if (!modelChanges) {\n            return;\n          }\n\n          modelChanges.addOperation(new ReinitializeModeOperation());\n          editor.renderersContainer.update(modelChanges);\n          modelChanges.addOperation(SequenceRenderer.moveCaretForward());\n          history.update(modelChanges);\n        },\n      },\n      'sequence-edit-select': {\n        shortcut: [\n          'Shift+ArrowLeft',\n          'Shift+ArrowRight',\n          'Shift+ArrowUp',\n          'Shift+ArrowDown',\n        ],\n        handler: (event) => {\n          const arrowKey = event.key;\n\n          if (\n            SequenceRenderer.caretPosition === 0 &&\n            arrowKey === 'ArrowLeft'\n          ) {\n            return;\n          }\n\n          this.selectionStartCaretPosition =\n            this.selectionStartCaretPosition !== -1\n              ? this.selectionStartCaretPosition\n              : SequenceRenderer.caretPosition;\n          SequenceRenderer.shiftArrowSelectionInEditMode(event);\n\n          if (arrowKey === 'ArrowLeft' || arrowKey === 'ArrowRight') {\n            SequenceRenderer.resetLastUserDefinedCaretPosition();\n          }\n        },\n      },\n    };\n  }\n\n  private deleteSelection() {\n    const selections = SequenceRenderer.selections;\n\n    if (selections.length > 1) {\n      return false;\n    }\n\n    if (selections.length === 1) {\n      const deletionModelChanges = this.deleteSelectedDrawingEntities();\n\n      deletionModelChanges.merge(this.handleNodesDeletion(selections));\n      this.finishNodesDeletion(\n        deletionModelChanges,\n        SequenceRenderer.caretPosition,\n        selections[0][0].nodeIndexOverall,\n      );\n    }\n    return true;\n  }\n\n  isPasteAllowedByMode(drawingEntitiesManager: DrawingEntitiesManager) {\n    const editor = CoreEditor.provideEditorInstance();\n    const chainsCollection = ChainsCollection.fromMonomers([\n      ...drawingEntitiesManager.monomers.values(),\n    ]);\n    if (!this.isEditMode) {\n      return true;\n    }\n\n    if (chainsCollection.chains.length > 1) {\n      editor.events.error.dispatch(\n        'Paste of several fragments is prohibited in text-editing mode.',\n      );\n      return false;\n    }\n\n    if (chainsCollection.chains.length === 0) {\n      editor.events.error.dispatch('No copied fragments.');\n      return false;\n    }\n\n    if (!this.deleteSelection()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  private isR1Free(entity: SubChainNode | BaseMonomer): boolean {\n    if (entity instanceof BaseMonomer) {\n      return entity.attachmentPointsToBonds.R1 === null;\n    }\n\n    return entity?.firstMonomerInNode?.attachmentPointsToBonds?.R1 === null;\n  }\n\n  private isR2Free(entity?: SubChainNode | BaseMonomer): boolean {\n    if (entity instanceof BaseMonomer) {\n      return entity.attachmentPointsToBonds.R2 === null;\n    }\n\n    return entity?.lastMonomerInNode?.attachmentPointsToBonds?.R2 === null;\n  }\n\n  private areR1R2Free(\n    firstEntity: SubChainNode | BaseMonomer,\n    lastEntity: SubChainNode | BaseMonomer,\n  ): boolean {\n    return this.isR1Free(firstEntity) && this.isR2Free(lastEntity);\n  }\n\n  private isConnectionPossible(\n    firstMonomer: BaseMonomer,\n    firstMonomerAttachmentPoint: AttachmentPointName,\n    secondMonomer: BaseMonomer,\n    secondMonomerAttachmentPoint: AttachmentPointName,\n  ) {\n    return (\n      firstMonomer.attachmentPointsToBonds[firstMonomerAttachmentPoint] ===\n        null &&\n      secondMonomer.attachmentPointsToBonds[secondMonomerAttachmentPoint] ===\n        null\n    );\n  }\n\n  isPasteAvailable(drawingEntitiesManager: DrawingEntitiesManager) {\n    if (!this.isEditMode) {\n      return true;\n    }\n    const chainsCollection = ChainsCollection.fromMonomers([\n      ...drawingEntitiesManager.monomers.values(),\n    ]);\n    const currentNode = SequenceRenderer.currentEdittingNode;\n    const previousNodeInSameChain = SequenceRenderer.previousNodeInSameChain;\n    const lastNodeOfNewFragment = chainsCollection.lastNode;\n    const firstNodeOfNewFragment = chainsCollection.firstNode;\n    const isPasteInEnd =\n      currentNode instanceof EmptySequenceNode || !currentNode;\n    const isPasteInStart = !previousNodeInSameChain;\n    if (isPasteInEnd && !previousNodeInSameChain) return true;\n    if (isPasteInEnd) {\n      return (\n        this.isR1Free(firstNodeOfNewFragment) &&\n        this.isR2Free(previousNodeInSameChain)\n      );\n    }\n    if (isPasteInStart) {\n      return this.isR2Free(lastNodeOfNewFragment) && this.isR1Free(currentNode);\n    }\n    return this.areR1R2Free(firstNodeOfNewFragment, lastNodeOfNewFragment);\n  }\n\n  applyAdditionalPasteOperations(\n    drawingEntitiesManager: DrawingEntitiesManager,\n  ) {\n    if (!this.isEditMode) {\n      const command = new Command();\n\n      command.addOperation(new ReinitializeModeOperation());\n\n      return command;\n    }\n\n    const chainsCollection = ChainsCollection.fromMonomers([\n      ...drawingEntitiesManager.monomers.values(),\n    ]);\n\n    const currentSequence = SequenceRenderer.currentChain;\n\n    const currentSequenceHasPhosphate =\n      currentSequence?.lastNonEmptyNode?.monomer?.monomerItem?.props?.Name ===\n      'Phosphate';\n\n    let nextCaretPosition =\n      SequenceRenderer.caretPosition + chainsCollection.length;\n\n    if (currentSequenceHasPhosphate) {\n      nextCaretPosition -= 1;\n    }\n\n    const modelChanges = this.insertNewSequenceFragment(chainsCollection);\n\n    modelChanges.addOperation(new ReinitializeModeOperation());\n\n    modelChanges.addOperation(\n      new RestoreSequenceCaretPositionOperation(\n        SequenceRenderer.caretPosition,\n        nextCaretPosition,\n      ),\n    );\n\n    return modelChanges;\n  }\n\n  private preserveSideChainConnections(selection: NodeSelection) {\n    if (selection.node.monomer.sideConnections.length === 0) {\n      return null;\n    }\n\n    const sideConnectionsData: Array<{\n      firstMonomerAttachmentPointName: AttachmentPointName;\n      secondMonomer: BaseMonomer;\n      secondMonomerAttachmentPointName: AttachmentPointName;\n    }> = [];\n\n    Object.entries(selection.node.monomer.attachmentPointsToBonds).forEach(\n      ([key, bond]) => {\n        if (\n          !bond ||\n          bond instanceof MonomerToAtomBond ||\n          !bond.isSideChainConnection\n        ) {\n          return;\n        }\n\n        const secondMonomer = bond.getAnotherMonomer(selection.node.monomer);\n        if (!secondMonomer?.attachmentPointsToBonds) {\n          return;\n        }\n\n        const secondMonomerBondData = Object.entries(\n          secondMonomer?.attachmentPointsToBonds,\n        ).find(([, value]) => value === bond);\n\n        if (!secondMonomerBondData) {\n          return;\n        }\n\n        const [secondMonomerAttachmentPointName] = secondMonomerBondData;\n\n        sideConnectionsData.push({\n          firstMonomerAttachmentPointName: key as AttachmentPointName,\n          secondMonomer,\n          secondMonomerAttachmentPointName:\n            secondMonomerAttachmentPointName as AttachmentPointName,\n        });\n      },\n    );\n\n    return sideConnectionsData;\n  }\n\n  private replaceSelectionWithMonomer(\n    monomerItem: MonomerItemType,\n    selection: NodeSelection,\n    modelChanges: Command,\n    previousSelectionNode?: SubChainNode,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const nextNode = SequenceRenderer.getNextNodeInSameChain(selection.node);\n    const position = selection.node.monomer.position;\n    const sideChainConnections = this.preserveSideChainConnections(selection);\n    const hasPreviousNodeInChain =\n      selection.node.firstMonomerInNode.attachmentPointsToBonds.R1;\n    const hasNextNodeInChain =\n      selection.node.lastMonomerInNode.attachmentPointsToBonds.R2;\n\n    selection.node.monomers.forEach((monomer) => {\n      modelChanges.merge(editor.drawingEntitiesManager.deleteMonomer(monomer));\n      monomer.forEachBond((polymerBond) => {\n        modelChanges.merge(\n          editor.drawingEntitiesManager.deleteDrawingEntity(polymerBond),\n        );\n      });\n    });\n\n    const monomerAddCommand = editor.drawingEntitiesManager.addMonomer(\n      monomerItem,\n      position,\n    );\n    const newMonomer = monomerAddCommand.operations[0].monomer as BaseMonomer;\n    const newMonomerSequenceNode = new MonomerSequenceNode(newMonomer);\n\n    modelChanges.merge(monomerAddCommand);\n    modelChanges.merge(\n      this.insertNewSequenceFragment(\n        newMonomerSequenceNode,\n        nextNode || null,\n        previousSelectionNode,\n        Boolean(hasPreviousNodeInChain),\n        Boolean(hasNextNodeInChain),\n      ),\n    );\n\n    // TODO: Check for multiple side chain connections in Linkers\n    sideChainConnections?.forEach((sideConnectionData) => {\n      const {\n        firstMonomerAttachmentPointName,\n        secondMonomer,\n        secondMonomerAttachmentPointName,\n      } = sideConnectionData;\n      if (\n        !this.isConnectionPossible(\n          newMonomer,\n          firstMonomerAttachmentPointName,\n          secondMonomer,\n          secondMonomerAttachmentPointName,\n        )\n      ) {\n        return;\n      }\n\n      modelChanges.merge(\n        editor.drawingEntitiesManager.createPolymerBond(\n          newMonomer,\n          secondMonomer,\n          firstMonomerAttachmentPointName,\n          secondMonomerAttachmentPointName,\n        ),\n      );\n    });\n\n    return newMonomerSequenceNode;\n  }\n\n  private replaceSelectionsWithMonomer(\n    selections: NodesSelection,\n    monomerItem: MonomerItemType,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const history = new EditorHistory(editor);\n    const modelChanges = new Command();\n\n    selections.forEach((selectionRange) => {\n      let previousReplacedNode = SequenceRenderer.getPreviousNodeInSameChain(\n        selectionRange[0].node,\n      );\n\n      selectionRange.forEach((nodeSelection) => {\n        if (nodeSelection.node instanceof EmptySequenceNode) {\n          return;\n        }\n\n        previousReplacedNode = this.replaceSelectionWithMonomer(\n          monomerItem,\n          nodeSelection,\n          modelChanges,\n          previousReplacedNode,\n        );\n      });\n    });\n\n    modelChanges.addOperation(new ReinitializeModeOperation());\n    editor.renderersContainer.update(modelChanges);\n    modelChanges.setUndoOperationReverse();\n    modelChanges.setUndoOperationsByPriority();\n    history.update(modelChanges);\n  }\n\n  private checkIfNewMonomerCouldEstablishConnections(\n    nodeSelection: NodeSelection,\n    monomerItem: MonomerItemType | undefined,\n    sideChainConnections?: boolean,\n  ) {\n    if (!monomerItem?.attachmentPoints) {\n      return false;\n    }\n\n    const newMonomerAttachmentPoints =\n      BaseMonomer.getAttachmentPointDictFromMonomerDefinition(\n        monomerItem.attachmentPoints,\n      );\n    // Side chains\n    // node.selection.node.monomers.attachmentPoints\n    const oldMonomerBonds: [string, PolymerBond | MonomerToAtomBond | null][] =\n      sideChainConnections\n        ? Object.entries(nodeSelection.node.monomer.attachmentPointsToBonds)\n        : [\n            [\n              AttachmentPointName.R1 as string,\n              // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n              nodeSelection.node.firstMonomerInNode.attachmentPointsToBonds.R1!,\n            ],\n            [\n              AttachmentPointName.R2 as string,\n              // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n              nodeSelection.node.lastMonomerInNode.attachmentPointsToBonds.R2!,\n            ],\n          ];\n    // Backbone\n    // nodeSelection.node.firstMonomerInNode.attachmentPointsToBonds.R1\n    // nodeSelection.node.lastMonomerInNode.attachmentPointsToBonds.R2\n    return oldMonomerBonds.every(([key, bond]) => {\n      if (\n        !bond ||\n        (!(bond instanceof MonomerToAtomBond) &&\n          (sideChainConnections\n            ? !bond.isSideChainConnection\n            : !bond.isBackBoneChainConnection))\n      ) {\n        return true;\n      }\n\n      return newMonomerAttachmentPoints.attachmentPointsList.includes(\n        key as AttachmentPointName,\n      );\n    });\n  }\n\n  private selectionsContainLinkerNode(selections: NodesSelection) {\n    return selections.some((selectionRange) =>\n      selectionRange.some(\n        (nodeSelection) => nodeSelection.node instanceof LinkerSequenceNode,\n      ),\n    );\n  }\n\n  private selectionsCantPreserveConnectionsWithMonomer(\n    selections: NodesSelection,\n    monomerItem: MonomerItemType,\n    sideChainConnections?: boolean,\n  ) {\n    return selections.some((selectionRange) =>\n      selectionRange.some(\n        (nodeSelection) =>\n          !this.checkIfNewMonomerCouldEstablishConnections(\n            nodeSelection,\n            monomerItem,\n            sideChainConnections,\n          ),\n      ),\n    );\n  }\n\n  private presetHasNeededAttachmentPoints(preset) {\n    // TODO: This check is not universal, it won't allow to put presets without R1 in sugar, revisit later\n    if (!preset.sugar) {\n      return false;\n    }\n\n    const sugarHasR1 = BaseMonomer.getAttachmentPointDictFromMonomerDefinition(\n      preset.sugar.attachmentPoints,\n    ).attachmentPointsList.includes(AttachmentPointName.R1);\n\n    if (preset.phosphate) {\n      const phosphateHasR2 =\n        BaseMonomer.getAttachmentPointDictFromMonomerDefinition(\n          preset.phosphate.attachmentPoints,\n        ).attachmentPointsList.includes(AttachmentPointName.R2);\n\n      return sugarHasR1 && phosphateHasR2;\n    }\n\n    return sugarHasR1;\n  }\n\n  private selectionsCantPreserveConnectionsWithPreset(\n    selections: NodesSelection,\n    preset: IRnaPreset,\n    sideChainConnections?: boolean,\n  ) {\n    return selections.some((selectionRange) =>\n      selectionRange.some((nodeSelection) =>\n        [preset.sugar, preset.base, preset.phosphate].some(\n          (monomer) =>\n            monomer &&\n            !this.checkIfNewMonomerCouldEstablishConnections(\n              nodeSelection,\n              monomer,\n              sideChainConnections,\n            ),\n        ),\n      ),\n    );\n  }\n\n  private checkNodeInsertionPossibility(newNode: SubChainNode) {\n    const previousNodeInSameChain = SequenceRenderer.previousNodeInSameChain;\n    const currentNode = SequenceRenderer.currentEdittingNode;\n    const currentNodeIsNotEmpty = !(currentNode instanceof EmptySequenceNode);\n\n    let missingAttachmentPoint: AttachmentPointName | null = null;\n\n    const previousMonomerHasR2 = Boolean(\n      previousNodeInSameChain?.lastMonomerInNode.hasAttachmentPoint(\n        AttachmentPointName.R2,\n      ),\n    );\n    const newMonomerHasR1 = newNode.firstMonomerInNode.hasAttachmentPoint(\n      AttachmentPointName.R1,\n    );\n    const rightSideInsertImpossible =\n      Boolean(previousNodeInSameChain) &&\n      (!previousMonomerHasR2 || !newMonomerHasR1);\n    if (rightSideInsertImpossible && !newMonomerHasR1) {\n      missingAttachmentPoint = AttachmentPointName.R1;\n    }\n\n    const nextMonomerHasR1 = Boolean(\n      currentNode?.firstMonomerInNode.hasAttachmentPoint(\n        AttachmentPointName.R1,\n      ),\n    );\n    const newMonomerHasR2 = newNode.lastMonomerInNode.hasAttachmentPoint(\n      AttachmentPointName.R2,\n    );\n    const leftSideInsertImpossible =\n      Boolean(currentNode) &&\n      currentNodeIsNotEmpty &&\n      (!nextMonomerHasR1 || !newMonomerHasR2);\n    if (leftSideInsertImpossible && !newMonomerHasR2) {\n      missingAttachmentPoint = AttachmentPointName.R2;\n    }\n\n    const nodeCanBeInserted =\n      !rightSideInsertImpossible && !leftSideInsertImpossible;\n\n    return {\n      nodeCanBeInserted,\n      missingAttachmentPoint,\n    };\n  }\n\n  public insertMonomerFromLibrary(monomerItem: MonomerItemType) {\n    const editor = CoreEditor.provideEditorInstance();\n    const history = new EditorHistory(editor);\n    const modelChanges = new Command();\n    const selections = SequenceRenderer.selections;\n\n    if (selections.length > 0) {\n      if (\n        this.selectionsCantPreserveConnectionsWithMonomer(\n          selections,\n          monomerItem,\n        )\n      ) {\n        this.showMergeWarningModal();\n        return;\n      }\n\n      if (this.selectionsContainLinkerNode(selections)) {\n        editor.events.openConfirmationDialog.dispatch({\n          confirmationText:\n            'Symbol @ can represent multiple monomers, all of them are going to be deleted. Do you want to proceed?',\n          onConfirm: () => {\n            this.replaceSelectionsWithMonomer(selections, monomerItem);\n          },\n        });\n      } else if (\n        this.selectionsCantPreserveConnectionsWithMonomer(\n          selections,\n          monomerItem,\n          true,\n        )\n      ) {\n        editor.events.openConfirmationDialog.dispatch({\n          confirmationText:\n            'Side chain connections will be deleted during replacement. Do you want to proceed?',\n          onConfirm: () => {\n            this.replaceSelectionsWithMonomer(selections, monomerItem);\n          },\n        });\n      } else {\n        this.replaceSelectionsWithMonomer(selections, monomerItem);\n      }\n    } else {\n      const newNodePosition = this.getNewNodePosition();\n\n      const newMonomer = editor.drawingEntitiesManager.createMonomer(\n        monomerItem,\n        newNodePosition,\n      );\n      const newMonomerSequenceNode = new MonomerSequenceNode(newMonomer);\n\n      const { nodeCanBeInserted, missingAttachmentPoint } =\n        this.checkNodeInsertionPossibility(newMonomerSequenceNode);\n      if (!nodeCanBeInserted) {\n        const message =\n          missingAttachmentPoint &&\n          `The monomer lacks ${missingAttachmentPoint} attachment point and cannot be inserted at current position`;\n        this.showMergeWarningModal(message);\n        return;\n      }\n\n      const monomerAddCommand = editor.drawingEntitiesManager.addMonomer(\n        monomerItem,\n        newNodePosition,\n        newMonomer,\n      );\n\n      modelChanges.merge(monomerAddCommand);\n      modelChanges.merge(\n        this.insertNewSequenceFragment(newMonomerSequenceNode),\n      );\n\n      modelChanges.addOperation(new ReinitializeModeOperation());\n      editor.renderersContainer.update(modelChanges);\n      SequenceRenderer.moveCaretForward();\n      history.update(modelChanges);\n    }\n  }\n\n  private createRnaPresetNode(preset: IRnaPreset, position: Vec2) {\n    const editor = CoreEditor.provideEditorInstance();\n    const { base: rnaBase, sugar, phosphate } = preset;\n\n    assert(sugar);\n\n    const sugarMonomer = editor.drawingEntitiesManager.createMonomer(\n      sugar,\n      position,\n    ) as Sugar;\n\n    let rnaBaseMonomer: RNABase | AmbiguousMonomer | null = null;\n    if (rnaBase) {\n      rnaBaseMonomer = editor.drawingEntitiesManager.createMonomer(\n        rnaBase,\n        position,\n      ) as RNABase;\n    }\n\n    let phosphateMonomer: Phosphate | null = null;\n    if (phosphate) {\n      phosphateMonomer = editor.drawingEntitiesManager.createMonomer(\n        phosphate,\n        position,\n      ) as Phosphate;\n    }\n\n    let newPresetNode: Nucleotide | Nucleoside | LinkerSequenceNode | null =\n      null;\n\n    if (rnaBaseMonomer && sugarMonomer && phosphateMonomer) {\n      newPresetNode = new Nucleotide(\n        sugarMonomer,\n        rnaBaseMonomer,\n        phosphateMonomer,\n      );\n    } else if (rnaBaseMonomer && sugarMonomer) {\n      newPresetNode = new Nucleoside(sugarMonomer, rnaBaseMonomer);\n    } else {\n      newPresetNode = new LinkerSequenceNode(sugarMonomer);\n    }\n\n    return newPresetNode;\n  }\n\n  private replaceSelectionWithPreset(\n    preset: IRnaPreset,\n    selection: NodeSelection,\n    modelChanges: Command,\n    previousSelectionNode?: SubChainNode,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const nextNode = SequenceRenderer.getNextNodeInSameChain(selection.node);\n    const position = selection.node.monomer.position;\n    const hasPreviousNodeInChain =\n      selection.node.firstMonomerInNode.attachmentPointsToBonds.R1;\n    const hasNextNodeInChain =\n      selection.node.lastMonomerInNode.attachmentPointsToBonds.R2;\n\n    const sideChainConnections = this.preserveSideChainConnections(selection);\n\n    selection.node.monomers.forEach((monomer) => {\n      modelChanges.merge(editor.drawingEntitiesManager.deleteMonomer(monomer));\n      monomer.forEachBond((polymerBond) => {\n        modelChanges.merge(\n          editor.drawingEntitiesManager.deleteDrawingEntity(polymerBond),\n        );\n      });\n    });\n\n    const newPresetNode = this.createRnaPresetNode(preset, position);\n\n    assert(newPresetNode);\n\n    const rnaPresetAddModelChanges =\n      editor.drawingEntitiesManager.addRnaPresetFromNode(newPresetNode);\n\n    modelChanges.merge(rnaPresetAddModelChanges);\n    modelChanges.merge(\n      this.insertNewSequenceFragment(\n        newPresetNode,\n        nextNode || null,\n        previousSelectionNode,\n        Boolean(hasPreviousNodeInChain),\n        Boolean(hasNextNodeInChain),\n      ),\n    );\n\n    // TODO: This check breaks some side chains (e.g. Sugar-to-Sugar for Nucleotides), need another way of preserving connections\n    const monomerForSideConnections =\n      newPresetNode instanceof Nucleotide\n        ? newPresetNode.phosphate\n        : newPresetNode instanceof Nucleoside\n        ? newPresetNode.sugar\n        : newPresetNode.monomer;\n\n    sideChainConnections?.forEach((sideConnectionData) => {\n      const {\n        firstMonomerAttachmentPointName,\n        secondMonomer,\n        secondMonomerAttachmentPointName,\n      } = sideConnectionData;\n      if (\n        !this.isConnectionPossible(\n          monomerForSideConnections,\n          firstMonomerAttachmentPointName,\n          secondMonomer,\n          secondMonomerAttachmentPointName,\n        )\n      ) {\n        return;\n      }\n\n      modelChanges.merge(\n        editor.drawingEntitiesManager.createPolymerBond(\n          monomerForSideConnections,\n          secondMonomer,\n          firstMonomerAttachmentPointName,\n          secondMonomerAttachmentPointName,\n        ),\n      );\n    });\n\n    return newPresetNode;\n  }\n\n  private replaceSelectionsWithPreset(\n    selections: NodesSelection,\n    preset: IRnaPreset,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const history = new EditorHistory(editor);\n    const modelChanges = new Command();\n\n    selections.forEach((selectionRange) => {\n      let previousReplacedNode = SequenceRenderer.getPreviousNodeInSameChain(\n        selectionRange[0].node,\n      );\n\n      selectionRange.forEach((nodeSelection) => {\n        if (nodeSelection.node instanceof EmptySequenceNode) {\n          return;\n        }\n\n        previousReplacedNode = this.replaceSelectionWithPreset(\n          preset,\n          nodeSelection,\n          modelChanges,\n          previousReplacedNode,\n        );\n      });\n    });\n\n    modelChanges.addOperation(new ReinitializeModeOperation());\n    editor.renderersContainer.update(modelChanges);\n    modelChanges.setUndoOperationReverse();\n    modelChanges.setUndoOperationsByPriority();\n    history.update(modelChanges);\n  }\n\n  public insertPresetFromLibrary(preset: IRnaPreset) {\n    const editor = CoreEditor.provideEditorInstance();\n    const history = new EditorHistory(editor);\n    const modelChanges = new Command();\n    const selections = SequenceRenderer.selections;\n\n    if (selections.length > 0) {\n      if (!this.presetHasNeededAttachmentPoints(preset)) {\n        this.showMergeWarningModal();\n        return;\n      }\n\n      if (this.selectionsContainLinkerNode(selections)) {\n        editor.events.openConfirmationDialog.dispatch({\n          confirmationText:\n            'Symbol @ can represent multiple monomers, all of them are going to be deleted. Do you want to proceed?',\n          onConfirm: () => {\n            this.replaceSelectionsWithPreset(selections, preset);\n          },\n        });\n      } else if (\n        this.selectionsCantPreserveConnectionsWithPreset(\n          selections,\n          preset,\n          true,\n        )\n      ) {\n        editor.events.openConfirmationDialog.dispatch({\n          confirmationText:\n            'Side chain connections will be deleted during replacement. Do you want to proceed?',\n          onConfirm: () => {\n            this.replaceSelectionsWithPreset(selections, preset);\n          },\n        });\n      } else {\n        this.replaceSelectionsWithPreset(selections, preset);\n      }\n    } else {\n      const newNodePosition = this.getNewNodePosition();\n\n      const newPresetNode = this.createRnaPresetNode(preset, newNodePosition);\n\n      assert(newPresetNode);\n\n      const { nodeCanBeInserted, missingAttachmentPoint } =\n        this.checkNodeInsertionPossibility(newPresetNode);\n\n      if (!nodeCanBeInserted) {\n        const message =\n          missingAttachmentPoint &&\n          `The monomer lacks ${missingAttachmentPoint} attachment point and cannot be inserted at current position`;\n        this.showMergeWarningModal(message);\n        return;\n      }\n\n      const rnaPresetAddModelChanges =\n        editor.drawingEntitiesManager.addRnaPresetFromNode(newPresetNode);\n\n      modelChanges.merge(rnaPresetAddModelChanges);\n      modelChanges.merge(this.insertNewSequenceFragment(newPresetNode));\n\n      modelChanges.addOperation(new ReinitializeModeOperation());\n      editor.renderersContainer.update(modelChanges);\n      SequenceRenderer.moveCaretForward();\n      history.update(modelChanges);\n    }\n  }\n\n  private insertNewSequenceItem(editor: CoreEditor, enteredSymbol: string) {\n    const currentNode = SequenceRenderer.currentEdittingNode;\n    const newNodePosition = this.getNewNodePosition();\n    let modelChanges;\n    const previousNodeInSameChain = SequenceRenderer.previousNodeInSameChain;\n\n    if (\n      currentNode instanceof MonomerSequenceNode &&\n      currentNode.monomer instanceof Phosphate\n    ) {\n      return;\n    }\n\n    if (currentNode instanceof EmptySequenceNode && previousNodeInSameChain) {\n      if (!this.isR2Free(previousNodeInSameChain)) {\n        this.showMergeWarningModal();\n        return;\n      }\n    }\n    if (\n      !previousNodeInSameChain &&\n      !(currentNode instanceof EmptySequenceNode) &&\n      currentNode\n    ) {\n      if (!this.isR1Free(currentNode)) {\n        this.showMergeWarningModal();\n        return;\n      }\n    }\n    if (editor.sequenceTypeEnterMode === SequenceType.PEPTIDE) {\n      modelChanges = this.handlePeptideNodeAddition(\n        enteredSymbol,\n        newNodePosition,\n      );\n    } else {\n      modelChanges = this.handleRnaDnaNodeAddition(\n        enteredSymbol,\n        currentNode,\n        newNodePosition,\n      );\n    }\n    return modelChanges;\n  }\n\n  private showMergeWarningModal(message?: string | null) {\n    const editor = CoreEditor.provideEditorInstance();\n\n    editor.events.openErrorModal.dispatch({\n      errorTitle: 'Error Message',\n      errorMessage:\n        message ??\n        'It is impossible to merge fragments. Attachment point to establish bonds are not available.',\n    });\n  }\n\n  private insertNewSequenceFragment(\n    chainsCollectionOrNode: ChainsCollection | SubChainNode,\n    nextNodeToConnect?: SubChainNode | null,\n    previousNodeToConnect?: SubChainNode,\n    needConnectWithPreviousNodeInChain = true,\n    needConnectWithNextNodeInChain = true,\n  ) {\n    const chainsCollection =\n      chainsCollectionOrNode instanceof ChainsCollection\n        ? chainsCollectionOrNode\n        : new ChainsCollection().add(\n            new Chain().addNode(chainsCollectionOrNode),\n          );\n    const currentNode =\n      nextNodeToConnect === null\n        ? undefined\n        : nextNodeToConnect || SequenceRenderer.currentEdittingNode;\n    const previousNodeInSameChain =\n      previousNodeToConnect || SequenceRenderer.previousNodeInSameChain;\n    const modelChanges = new Command();\n    const lastNodeOfNewFragment = chainsCollection.lastNode;\n    const firstNodeOfNewFragment = chainsCollection.firstNode;\n    const newNodePosition = this.getNewNodePosition();\n\n    this.deleteBondToNextNodeInChain(previousNodeInSameChain, modelChanges);\n\n    if (needConnectWithPreviousNodeInChain) {\n      this.connectNodes(\n        previousNodeInSameChain,\n        firstNodeOfNewFragment,\n        modelChanges,\n        newNodePosition,\n        currentNode,\n      );\n    }\n\n    if (needConnectWithNextNodeInChain) {\n      this.connectNodes(\n        lastNodeOfNewFragment,\n        currentNode,\n        modelChanges,\n        newNodePosition,\n      );\n    }\n\n    return modelChanges;\n  }\n\n  getNewNodePosition() {\n    if (this.isEditMode) {\n      const currentNode = SequenceRenderer.currentEdittingNode;\n      const previousNode = SequenceRenderer.previousFromCurrentEdittingMonomer;\n      const nodeBeforePreviousNode = previousNode\n        ? SequenceRenderer.getPreviousNodeInSameChain(previousNode)\n        : undefined;\n      const newNodePosition = this.getNewSequenceItemPosition(\n        previousNode,\n        nodeBeforePreviousNode,\n        currentNode,\n      );\n      return newNodePosition;\n    } else {\n      return SequenceRenderer.chainsCollection.chains.length > 0\n        ? SequenceRenderer.getNextChainPosition()\n        : new Vec2(0, 0);\n    }\n  }\n\n  private deleteSelectedDrawingEntities() {\n    const editor = CoreEditor.provideEditorInstance();\n    const modelChanges = new Command();\n    editor.drawingEntitiesManager.selectedEntities.forEach(([, entity]) => {\n      modelChanges.merge(\n        editor.drawingEntitiesManager.deleteDrawingEntity(entity),\n      );\n    });\n\n    return modelChanges;\n  }\n\n  private getNewSequenceItemPosition(\n    previousNode?: SubChainNode,\n    nodeBeforePreviousNode?: SubChainNode,\n    currentNode?: SubChainNode,\n  ) {\n    const offsetFromPrevious = new Vec2(1, 1);\n\n    if (previousNode && !(previousNode instanceof EmptySequenceNode)) {\n      return previousNode.lastMonomerInNode.position.add(offsetFromPrevious);\n    } else if (currentNode && !(currentNode instanceof EmptySequenceNode)) {\n      return currentNode.firstMonomerInNode.position.add(offsetFromPrevious);\n    } else if (nodeBeforePreviousNode) {\n      return nodeBeforePreviousNode.lastMonomerInNode.position.add(\n        offsetFromPrevious,\n      );\n    } else {\n      return new Vec2(0, 0);\n    }\n  }\n\n  scrollForView() {\n    if (this.isEditMode) {\n      return;\n    }\n\n    const zoom = ZoomTool.instance;\n    const drawnEntitiesBoundingBox =\n      SequenceRenderer.getRenderedStructuresBbox();\n\n    if (zoom.isFitToCanvasHeight(drawnEntitiesBoundingBox.height)) {\n      zoom.scrollTo(\n        new Vec2(drawnEntitiesBoundingBox.left, drawnEntitiesBoundingBox.top),\n      );\n    } else {\n      zoom.scrollTo(\n        new Vec2(\n          drawnEntitiesBoundingBox.left,\n          drawnEntitiesBoundingBox.bottom,\n        ),\n        true,\n      );\n    }\n  }\n\n  private unselectAllEntities() {\n    const editor = CoreEditor.provideEditorInstance();\n    const modelChanges =\n      editor.drawingEntitiesManager.unselectAllDrawingEntities();\n    modelChanges.merge(SequenceRenderer.unselectEmptySequenceNodes());\n    editor.renderersContainer.update(modelChanges);\n  }\n\n  public destroy() {\n    this.turnOffEditMode();\n    SequenceRenderer.removeNewSequenceButtons();\n  }\n}\n","import { editorEvents } from 'application/editor/editorEvents';\nimport { Coordinates } from 'application/editor/shared/coordinates';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport assert from 'assert';\nimport { Vec2 } from 'domain/entities';\nimport { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { BaseRenderer } from '../BaseRenderer';\n\nexport class FlexModePolymerBondRenderer extends BaseRenderer {\n  private editorEvents: typeof editorEvents;\n  // TODO: Specify the types.\n  private selectionElement;\n  private previousStateOfIsMonomersOnSameHorizontalLine = false;\n  public declare bodyElement?: D3SvgElementSelection<SVGLineElement, this>;\n\n  constructor(public readonly polymerBond: PolymerBond) {\n    super(polymerBond as DrawingEntity);\n    this.polymerBond.setRenderer(this);\n    this.editorEvents = editorEvents;\n  }\n\n  public get rootBBox(): DOMRect | undefined {\n    const rootNode = this.rootElement?.node();\n    if (!rootNode) return;\n\n    return rootNode.getBBox();\n  }\n\n  public get width(): number {\n    return this.rootBBox?.width || 0;\n  }\n\n  public get height(): number {\n    return this.rootBBox?.height || 0;\n  }\n\n  private get scaledPosition(): {\n    readonly endPosition: Vec2;\n    readonly startPosition: Vec2;\n  } {\n    // we need to convert monomer coordinates(stored in angstroms) to pixels.\n    // it needs to be done in view layer of application (like renderers)\n    const startPositionInPixels = Coordinates.modelToCanvas(\n      this.polymerBond.startPosition,\n    );\n\n    const endPositionInPixels = Coordinates.modelToCanvas(\n      this.polymerBond.endPosition,\n    );\n\n    return {\n      startPosition: startPositionInPixels,\n      endPosition: endPositionInPixels,\n    };\n  }\n\n  public moveSelection(): void {\n    if (\n      this.previousStateOfIsMonomersOnSameHorizontalLine !==\n      this.isMonomersOnSameHorizontalLine()\n    ) {\n      this.remove();\n      this.show();\n    } else {\n      assert(this.rootElement);\n      this.moveStart();\n      this.moveEnd();\n    }\n    this.previousStateOfIsMonomersOnSameHorizontalLine =\n      this.isMonomersOnSameHorizontalLine();\n  }\n\n  // TODO: Specify the types.\n  public appendBond(rootElement) {\n    this.appendBondGraph(rootElement);\n    return this.bodyElement;\n  }\n\n  public isMonomersOnSameHorizontalLine(): boolean {\n    if (!this.polymerBond.secondMonomer) return false;\n\n    const monomer1Y = this.polymerBond.firstMonomer.position.y;\n    const monomer2Y = this.polymerBond.secondMonomer.position.y;\n    const difference = monomer1Y - monomer2Y;\n    return difference < 0.5 && difference > -0.5;\n  }\n\n  // TODO: Specify the types.\n  public appendBondGraph(rootElement) {\n    this.bodyElement = rootElement\n      .append('line')\n      .attr('stroke', this.polymerBond.finished ? '#333333' : '#0097A8')\n      .attr('stroke-width', 1)\n      .attr('class', 'selection-area')\n      .attr('x1', this.scaledPosition.startPosition.x)\n      .attr('y1', this.scaledPosition.startPosition.y)\n      .attr('x2', this.scaledPosition.endPosition.x)\n      .attr('y2', this.scaledPosition.endPosition.y)\n      .attr('pointer-events', this.polymerBond.finished ? 'stroke' : 'none');\n\n    return this.bodyElement;\n  }\n\n  // TODO: Specify the types.\n  private appendRootElement() {\n    return this.canvas\n      .insert('g', `.monomer`)\n      .data([this])\n      .on('mouseover', (event) => {\n        this.editorEvents.mouseOverPolymerBond.dispatch(event);\n        this.editorEvents.mouseOverDrawingEntity.dispatch(event);\n      })\n      .on('mousemove', (event) => {\n        this.editorEvents.mouseOnMovePolymerBond.dispatch(event);\n      })\n      .on('mouseout', (event) => {\n        this.editorEvents.mouseLeavePolymerBond.dispatch(event);\n        this.editorEvents.mouseLeaveDrawingEntity.dispatch(event);\n      })\n      .attr(\n        'pointer-events',\n        this.polymerBond.finished ? 'stroke' : 'none',\n      ) as never as D3SvgElementSelection<SVGGElement, void>;\n  }\n\n  public show(): void {\n    this.rootElement = this.rootElement || this.appendRootElement();\n    this.appendBond(this.rootElement);\n    this.appendHoverAreaElement();\n    this.drawSelection();\n  }\n\n  public drawSelection(): void {\n    if (this.polymerBond.selected) {\n      this.selectionElement?.remove();\n      this.selectionElement = this.rootElement\n        ?.insert('line', ':first-child')\n        .attr('stroke', '#57FF8F')\n        .attr('x1', this.scaledPosition.startPosition.x)\n        .attr('y1', this.scaledPosition.startPosition.y)\n        .attr('x2', this.scaledPosition.endPosition.x)\n        .attr('y2', this.scaledPosition.endPosition.y)\n        .attr('stroke-width', '5')\n        .attr('class', 'dynamic-element');\n    } else {\n      this.selectionElement?.remove();\n    }\n  }\n\n  public moveEnd(): void {\n    this.moveGraphBondEnd();\n  }\n\n  private moveGraphBondEnd(): void {\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n    this.bodyElement\n      .attr('x2', this.scaledPosition.endPosition.x)\n      .attr('y2', this.scaledPosition.endPosition.y);\n\n    this.hoverAreaElement\n      .attr('x2', this.scaledPosition.endPosition.x)\n      .attr('y2', this.scaledPosition.endPosition.y);\n\n    this.hoverCircleAreaElement\n      ?.attr('cx', this.scaledPosition.endPosition.x)\n      .attr('cy', this.scaledPosition.endPosition.y);\n\n    this.selectionElement\n      ?.attr('x2', this.scaledPosition.endPosition.x)\n      ?.attr('y2', this.scaledPosition.endPosition.y);\n  }\n\n  public moveStart(): void {\n    this.moveGraphBondStart();\n  }\n\n  private moveGraphBondStart(): void {\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n    this.bodyElement\n      .attr('x1', this.scaledPosition.startPosition.x)\n      .attr('y1', this.scaledPosition.startPosition.y);\n\n    this.hoverAreaElement\n      .attr('x1', this.scaledPosition.startPosition.x)\n      .attr('y1', this.scaledPosition.startPosition.y);\n\n    this.selectionElement\n      ?.attr('x1', this.scaledPosition.startPosition.x)\n      ?.attr('y1', this.scaledPosition.startPosition.y);\n  }\n\n  protected appendHoverAreaElement(): void {\n    (<D3SvgElementSelection<SVGLineElement, void> | undefined>(\n      this.hoverAreaElement\n    )) = this.rootElement\n      ?.append('line')\n      .attr('stroke', 'transparent')\n      .attr('x1', this.scaledPosition.startPosition.x)\n      .attr('y1', this.scaledPosition.startPosition.y)\n      .attr('x2', this.scaledPosition.endPosition.x)\n      .attr('y2', this.scaledPosition.endPosition.y)\n      .attr('stroke-width', '10');\n\n    (<D3SvgElementSelection<SVGCircleElement, void> | undefined>(\n      this.hoverCircleAreaElement\n    )) = this.rootElement\n      ?.append('circle')\n      .attr('cursor', 'pointer')\n      .attr('r', '1')\n      .attr('fill', 'transparent')\n      .attr('pointer-events', 'none')\n      .attr('stroke-width', '10')\n      .attr('cx', this.scaledPosition.endPosition.x)\n      .attr('cy', this.scaledPosition.endPosition.y);\n  }\n\n  public appendHover(): void {\n    assert(this.bodyElement);\n\n    this.bodyElement.attr('stroke', '#0097A8').attr('pointer-events', 'none');\n\n    if (this.polymerBond.selected && this.selectionElement) {\n      this.selectionElement.attr('stroke', '#CCFFDD');\n    }\n  }\n\n  // TODO: Specify the types.\n  public removeHover() {\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n\n    this.bodyElement\n      .attr('stroke', '#333333')\n      .attr('pointer-events', this.polymerBond.finished ? 'stroke' : 'none');\n\n    if (this.polymerBond.selected && this.selectionElement) {\n      this.selectionElement.attr('stroke', '#57FF8F');\n    }\n\n    return this.hoverAreaElement.attr('stroke', 'transparent');\n  }\n\n  public remove(): void {\n    super.remove();\n    if (this.polymerBond.hovered) {\n      this.editorEvents.mouseLeaveMonomer.dispatch();\n    }\n  }\n}\n","import { editorEvents } from 'application/editor/editorEvents';\nimport { CoreEditor } from 'application/editor/internal';\nimport { Coordinates } from 'application/editor/shared/coordinates';\nimport {\n  BaseMonomerRenderer,\n  BaseSequenceItemRenderer,\n} from 'application/render';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport assert from 'assert';\nimport { BaseMonomer, Vec2 } from 'domain/entities';\nimport { Cell } from 'domain/entities/canvas-matrix/Cell';\nimport {\n  Connection,\n  ConnectionDirectionInDegrees,\n  ConnectionDirectionOfLastCell,\n} from 'domain/entities/canvas-matrix/Connection';\nimport { SNAKE_LAYOUT_CELL_WIDTH } from 'domain/entities/DrawingEntitiesManager';\nimport { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { getSugarFromRnaBase } from 'domain/helpers/monomers';\nimport { BaseRenderer } from '../BaseRenderer';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\nimport { SnakeMode } from 'application/editor';\n\nenum LineDirection {\n  Horizontal = 'Horizontal',\n  Vertical = 'Vertical',\n}\n\nconst LINE_FROM_MONOMER_LENGTH = 15;\nconst VERTICAL_LINE_LENGTH = 21;\nconst RNA_CHAIN_VERTICAL_LINE_LENGTH = 74;\nconst RNA_ANTISENSE_CHAIN_VERTICAL_LINE_LENGTH = 20;\nconst RNA_SENSE_CHAIN_VERTICAL_LINE_LENGTH = 210;\nconst CORNER_LENGTH = 4;\nconst DOUBLE_CORNER_LENGTH = CORNER_LENGTH * 2;\n\nconst BOND_END_LENGTH = 15;\nconst CELL_HEIGHT = 40;\nconst SMOOTH_CORNER_SIZE = 5;\nconst SIDE_CONNECTION_BODY_ELEMENT_CLASS = 'polymer-bond-body';\n\n// TODO: Need to split the class by three:\n//  - SnakeModeBackboneBondRenderer (black snake line)\n//  - SnakeModeSideChainBondRenderer (blue snake line)\n//  - SnakeModeRNABaseAndSugarBondRenderer (black straight line)\nexport class SnakeModePolymerBondRenderer extends BaseRenderer {\n  private editorEvents: typeof editorEvents;\n  private isSnakeBond = false; // `SnakeModeBackboneBondRenderer` or `SnakeModeRNABaseAndSugarBondRenderer`.\n  // TODO: Specify the types.\n  private selectionElement;\n  private path = '';\n  private previousStateOfIsMonomersOnSameHorizontalLine = false;\n  private sideConnectionBondTurnPoint?: number;\n  public declare bodyElement?: D3SvgElementSelection<SVGLineElement, this>;\n\n  constructor(public readonly polymerBond: PolymerBond) {\n    super(polymerBond as DrawingEntity);\n    this.polymerBond.setRenderer(this);\n    this.editorEvents = editorEvents;\n    this.calculateIsSnakeBond();\n  }\n\n  // TODO: Delete.\n  public get isSnake(): true {\n    return true;\n  }\n\n  private get isHydrogenBond() {\n    return this.polymerBond instanceof HydrogenBond;\n  }\n\n  public get rootBBox(): DOMRect | undefined {\n    const rootNode = this.rootElement?.node();\n    if (!rootNode) return;\n\n    return rootNode.getBBox();\n  }\n\n  public get width(): number {\n    return this.rootBBox?.width || 0;\n  }\n\n  public get height(): number {\n    return this.rootBBox?.height || 0;\n  }\n\n  private get scaledPosition(): {\n    readonly endPosition: Vec2;\n    readonly startPosition: Vec2;\n  } {\n    // we need to convert monomer coordinates(stored in angstroms) to pixels.\n    // it needs to be done in view layer of application (like renderers)\n    const startPositionInPixels = Coordinates.modelToCanvas(\n      this.polymerBond.startPosition,\n    );\n\n    const endPositionInPixels = Coordinates.modelToCanvas(\n      this.polymerBond.endPosition,\n    );\n\n    return {\n      startPosition: startPositionInPixels,\n      endPosition: endPositionInPixels,\n    };\n  }\n\n  public moveSelection(): void {\n    if (\n      this.previousStateOfIsMonomersOnSameHorizontalLine !==\n      this.isMonomersOnSameHorizontalLine()\n    ) {\n      this.remove();\n      this.show();\n    } else {\n      assert(this.rootElement);\n      this.moveStart();\n      this.moveEnd();\n    }\n    this.previousStateOfIsMonomersOnSameHorizontalLine =\n      this.isMonomersOnSameHorizontalLine();\n  }\n\n  // TODO: Specify the types.\n  public appendBond(rootElement) {\n    const editor = CoreEditor.provideEditorInstance();\n    const matrix = editor.drawingEntitiesManager.canvasMatrix;\n    const cells = matrix?.polymerBondToCells.get(this.polymerBond);\n\n    if (\n      this.polymerBond.isSideChainConnection &&\n      (!this.isHydrogenBond || editor.mode instanceof SnakeMode) &&\n      cells\n    ) {\n      this.appendSideConnectionBond(rootElement, cells);\n    } else if (\n      this.isSnakeBond &&\n      this.polymerBond.finished &&\n      !this.isMonomersOnSameHorizontalLine()\n    ) {\n      this.appendSnakeBond(rootElement);\n    } else {\n      this.appendBondGraph(rootElement);\n    }\n\n    return this.bodyElement;\n  }\n\n  // TODO: Specify the types.\n  public appendSnakeBond(rootElement) {\n    const startPosition = this.scaledPosition.startPosition;\n    const endPosition = this.scaledPosition.endPosition;\n    this.updateSnakeBondPath(startPosition, endPosition);\n\n    this.bodyElement = rootElement\n      .append('path')\n      .attr('stroke', this.polymerBond.finished ? '#333333' : '#0097A8')\n      .attr('stroke-width', 1)\n      .attr('class', 'selection-area')\n      .attr('d', this.path)\n      .attr('fill-opacity', 0)\n      .attr('pointer-events', 'stroke');\n    return this.bodyElement;\n  }\n\n  private drawPartOfSideConnection(\n    isHorizontal: boolean,\n    connection: Connection,\n    cell: Cell,\n    direction: ConnectionDirectionInDegrees,\n  ): string {\n    const sin = Math.sin((direction * Math.PI) / 180);\n    const cos = Math.cos((direction * Math.PI) / 180);\n    const xOffset = (SNAKE_LAYOUT_CELL_WIDTH / 2) * cos;\n    const yOffset = (CELL_HEIGHT / 2) * sin;\n    const maxXOffset = cell.connections.reduce(\n      (max: number, connection: Connection): number => {\n        return max > connection.xOffset ? max : connection.xOffset;\n      },\n      0,\n    );\n    const maxYOffset = cell.connections.reduce(\n      (max: number, connection: Connection): number => {\n        const connectionYOffset = connection.yOffset || 0;\n        return max > connectionYOffset ? max : connectionYOffset;\n      },\n      0,\n    );\n\n    let endOfPathPart: number;\n    if (isHorizontal && this.sideConnectionBondTurnPoint) {\n      endOfPathPart = this.sideConnectionBondTurnPoint;\n    } else {\n      const { monomerSize, scaledMonomerPosition } = (\n        cell.monomer as BaseMonomer\n      ).renderer as BaseMonomerRenderer | BaseSequenceItemRenderer;\n      endOfPathPart = isHorizontal\n        ? scaledMonomerPosition.x + monomerSize.width / 2 + xOffset\n        : scaledMonomerPosition.y + monomerSize.height / 2 + yOffset;\n    }\n\n    this.sideConnectionBondTurnPoint = endOfPathPart;\n\n    if (isHorizontal) {\n      endOfPathPart +=\n        -(connection.yOffset || 0) * 3 +\n        cos * -connection.xOffset * 3 +\n        cos * (maxXOffset + 1) * 3 +\n        (maxYOffset + 1) * 3;\n    }\n    let pathPart = isHorizontal ? 'H ' : 'V ';\n    pathPart += `${endOfPathPart - SMOOTH_CORNER_SIZE * cos} `;\n    pathPart += generateBend(cos, sin, cos, 1);\n\n    return pathPart;\n  }\n\n  // TODO: Specify the types.\n  private appendSideConnectionBond(rootElement, cells: Cell[]) {\n    const firstCell = cells[0];\n    const firstCellConnection = firstCell.connections.find(\n      (connection: Connection): boolean => {\n        return connection.polymerBond === this.polymerBond;\n      },\n    ) as Connection;\n    const isVerticalConnection = firstCellConnection.isVertical;\n    const isStraightVerticalConnection =\n      (cells.length === 2 ||\n        cells.reduce(\n          (isStraight: boolean, cell: Cell, index: number): boolean => {\n            if (!isStraight || index === 0 || index === cells.length - 1) {\n              return isStraight;\n            }\n            return cell.x === firstCell.x && !cell.monomer;\n          },\n          true,\n        )) &&\n      isVerticalConnection;\n    const isFirstMonomerOfBondInFirstCell = firstCell.node?.monomers.includes(\n      this.polymerBond.firstMonomer,\n    );\n    const isTwoNeighborRowsConnection = cells.every(\n      (cell) => cell.y === firstCell.y || cell.y === firstCell.y + 1,\n    );\n    const startPosition = isFirstMonomerOfBondInFirstCell\n      ? this.scaledPosition.startPosition\n      : this.scaledPosition.endPosition;\n    const endPosition = isFirstMonomerOfBondInFirstCell\n      ? this.scaledPosition.endPosition\n      : this.scaledPosition.startPosition;\n    const xDirection =\n      startPosition.x >= (this.sideConnectionBondTurnPoint || endPosition.x)\n        ? 180\n        : 0;\n    let dAttributeForPath = `M ${startPosition.x},${startPosition.y} `;\n\n    const cos = Math.cos((xDirection * Math.PI) / 180);\n\n    let previousConnection: Connection;\n    let previousCell: Cell;\n\n    const horizontalPartIntersectionsOffset = firstCellConnection.xOffset;\n\n    const areCellsOnSameRow = cells.every((cell) => {\n      return cell.y === firstCell.y;\n    });\n    const isSecondCellEmpty = cells[1].node === null;\n\n    if (areCellsOnSameRow) {\n      dAttributeForPath += `L ${startPosition.x},${\n        startPosition.y -\n        BOND_END_LENGTH -\n        horizontalPartIntersectionsOffset * 3\n      } `;\n      dAttributeForPath += generateBend(0, -1, cos, -1);\n    } else {\n      dAttributeForPath += `L ${startPosition.x},${\n        startPosition.y +\n        BOND_END_LENGTH +\n        horizontalPartIntersectionsOffset * 3\n      } `;\n      if (\n        !isStraightVerticalConnection &&\n        !isSecondCellEmpty &&\n        !isTwoNeighborRowsConnection\n      ) {\n        dAttributeForPath += generateBend(0, 1, cos, 1);\n      }\n    }\n\n    if (isVerticalConnection && !isStraightVerticalConnection) {\n      dAttributeForPath += this.drawPartOfSideConnection(\n        true,\n        firstCellConnection,\n        firstCell,\n        this.sideConnectionBondTurnPoint &&\n          startPosition.x < this.sideConnectionBondTurnPoint\n          ? 0\n          : 180,\n      );\n    }\n\n    let maxHorizontalOffset = 0;\n\n    cells.forEach((cell: Cell, cellIndex: number): void => {\n      const cellConnection = cell.connections.find(\n        (connection: Connection): boolean => {\n          return connection.polymerBond === this.polymerBond;\n        },\n      ) as Connection;\n      const isLastCell = cellIndex === cells.length - 1;\n      const _xDirection = this.sideConnectionBondTurnPoint\n        ? endPosition.x < this.sideConnectionBondTurnPoint\n          ? 180\n          : 0\n        : xDirection;\n      const maxXOffset = cell.connections.reduce(\n        (max: number, connection: Connection): number => {\n          return connection.isVertical || max > connection.xOffset\n            ? max\n            : connection.xOffset;\n        },\n        0,\n      );\n\n      maxHorizontalOffset =\n        maxHorizontalOffset > maxXOffset ? maxHorizontalOffset : maxXOffset;\n\n      if (isLastCell) {\n        if (isStraightVerticalConnection) {\n          return;\n        }\n\n        const directionObject =\n          cellConnection.direction as ConnectionDirectionOfLastCell;\n        const yDirection = isVerticalConnection ? 90 : directionObject.y;\n        const sin = Math.sin((yDirection * Math.PI) / 180);\n        const cos = Math.cos((_xDirection * Math.PI) / 180);\n\n        if (!areCellsOnSameRow) {\n          dAttributeForPath += `V ${\n            endPosition.y -\n            CELL_HEIGHT / 2 -\n            SMOOTH_CORNER_SIZE -\n            sin * (cellConnection.yOffset || 0) * 3 -\n            (isTwoNeighborRowsConnection\n              ? maxHorizontalOffset - cellConnection.xOffset\n              : cellConnection.xOffset) *\n              3\n          } `;\n          dAttributeForPath += generateBend(0, sin, cos, 1);\n        }\n        dAttributeForPath += `H ${endPosition.x - SMOOTH_CORNER_SIZE * cos} `;\n        dAttributeForPath += generateBend(cos, 0, cos, 1);\n        return;\n      }\n      // empty cells\n      if (cell.node === null) {\n        return;\n      }\n\n      // other cells\n      if (\n        previousConnection &&\n        previousConnection.direction !== cellConnection.direction\n      ) {\n        const isHorizontal =\n          previousConnection.direction === 0 ||\n          previousConnection.direction === 180;\n\n        dAttributeForPath += this.drawPartOfSideConnection(\n          isHorizontal,\n          previousConnection,\n          previousCell,\n          // FIXME: Check. Is it correct to use `as ConnectionDirectionInDegrees` here?\n          isHorizontal\n            ? xDirection\n            : (previousConnection.direction as ConnectionDirectionInDegrees),\n        );\n      }\n      previousCell = cell;\n      previousConnection = cellConnection;\n    });\n\n    dAttributeForPath += `L ${endPosition.x},${endPosition.y} `;\n\n    this.bodyElement = rootElement\n      .append('path')\n      .attr('class', `${SIDE_CONNECTION_BODY_ELEMENT_CLASS}`)\n      .attr('stroke', this.isHydrogenBond ? '#333333' : '#43B5C0')\n      .attr('stroke-width', 1)\n      .attr('d', dAttributeForPath)\n      .attr('fill', 'none')\n      .attr('stroke-dasharray', this.isHydrogenBond ? '2' : '0')\n      .attr('pointer-events', 'all');\n\n    this.path = dAttributeForPath;\n\n    return this.bodyElement;\n  }\n\n  private getMonomerWidth(): number {\n    return this.polymerBond.firstMonomer.renderer?.monomerSize.width ?? 0;\n  }\n\n  private getMonomerHeight(): number {\n    return this.polymerBond.firstMonomer.renderer?.monomerSize.height ?? 0;\n  }\n\n  public isMonomersOnSameHorizontalLine(): boolean {\n    if (!this.polymerBond.secondMonomer) return false;\n\n    const monomer1Y = this.polymerBond.firstMonomer.position.y;\n    const monomer2Y = this.polymerBond.secondMonomer.position.y;\n    const difference = monomer1Y - monomer2Y;\n    return difference < 0.5 && difference > -0.5;\n  }\n\n  private updateSnakeBondPath(\n    startPosition: Vec2,\n    endPosition: Vec2,\n    reCheckAttachmentPoint = true,\n  ): void {\n    const isR1TheCurrentAttachmentPointOfFirstMonomer =\n      this.polymerBond.firstMonomer.getAttachmentPointByBond(\n        this.polymerBond,\n      ) === 'R1' ||\n      this.polymerBond.firstMonomer.getPotentialAttachmentPointByBond(\n        this.polymerBond,\n      ) === 'R1';\n\n    // check if there is nucleotide in current row\n    const isBondConnectedWithNucleotide =\n      this.polymerBond.firstMonomer.isMonomerInRnaChainRow;\n    const verticalLineLength = this.polymerBond.firstMonomer.monomerItem\n      .isAntisense\n      ? RNA_ANTISENSE_CHAIN_VERTICAL_LINE_LENGTH\n      : this.polymerBond.firstMonomer.monomerItem.isSense &&\n        (this.polymerBond.restOfRowsWithAntisense || 0) > 0\n      ? RNA_SENSE_CHAIN_VERTICAL_LINE_LENGTH\n      : isBondConnectedWithNucleotide\n      ? RNA_CHAIN_VERTICAL_LINE_LENGTH\n      : VERTICAL_LINE_LENGTH + 5;\n\n    if (this.isSecondMonomerBottomRight(startPosition, endPosition)) {\n      if (\n        isR1TheCurrentAttachmentPointOfFirstMonomer &&\n        reCheckAttachmentPoint\n      ) {\n        this.updateSnakeBondPath(endPosition, startPosition, false);\n        return;\n      }\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth() / 2,\n        startPosition,\n      );\n      this.addLineFromLeftToBottom();\n      this.addLine(\n        LineDirection.Vertical,\n        endPosition.y - startPosition.y - CORNER_LENGTH * 2,\n      );\n      this.addLineFromTopToRight();\n      this.addLine(\n        LineDirection.Horizontal,\n        endPosition.x -\n          startPosition.x -\n          CORNER_LENGTH * 2 -\n          LINE_FROM_MONOMER_LENGTH -\n          this.getMonomerWidth() / 2,\n      );\n    } else if (this.isSecondMonomerTopRight(startPosition, endPosition)) {\n      if (\n        isR1TheCurrentAttachmentPointOfFirstMonomer &&\n        reCheckAttachmentPoint\n      ) {\n        this.updateSnakeBondPath(endPosition, startPosition, false);\n        return;\n      }\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth() / 2,\n        startPosition,\n      );\n      this.addLineFromLeftToTop();\n      this.addLine(\n        LineDirection.Vertical,\n        endPosition.y -\n          startPosition.y -\n          CORNER_LENGTH * 2 +\n          this.getMonomerHeight() / 2,\n      );\n      this.addLineFromBottomToRight();\n      this.addLine(\n        LineDirection.Horizontal,\n        endPosition.x -\n          startPosition.x -\n          CORNER_LENGTH * 2 -\n          LINE_FROM_MONOMER_LENGTH -\n          this.getMonomerWidth() / 2,\n      );\n    } else if (this.isSecondMonomerBottomLeft(startPosition, endPosition)) {\n      if (\n        isR1TheCurrentAttachmentPointOfFirstMonomer &&\n        reCheckAttachmentPoint\n      ) {\n        this.updateSnakeBondPath(endPosition, startPosition, false);\n        return;\n      }\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH -\n          (this.polymerBond.firstMonomer.monomerItem.isAntisense ? 10 : 0) +\n          this.getMonomerWidth() / 2,\n        startPosition,\n      );\n      this.addLineFromLeftToBottom();\n      this.addLine(LineDirection.Vertical, verticalLineLength);\n      this.addLineFromTopToLeft();\n      this.addLine(\n        LineDirection.Horizontal,\n        -(\n          startPosition.x -\n          endPosition.x +\n          LINE_FROM_MONOMER_LENGTH * 2 +\n          this.getMonomerWidth()\n        ),\n      );\n      this.addLineFromRightToBottom();\n      this.addLine(\n        LineDirection.Vertical,\n        endPosition.y -\n          startPosition.y -\n          CORNER_LENGTH * 4 -\n          verticalLineLength,\n      );\n      this.addLineFromTopToRight();\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth() / 2,\n      );\n    } else if (this.isSecondMonomerTopLeft(startPosition, endPosition)) {\n      if (\n        isR1TheCurrentAttachmentPointOfFirstMonomer &&\n        reCheckAttachmentPoint\n      ) {\n        this.updateSnakeBondPath(endPosition, startPosition, false);\n        return;\n      }\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth() / 2,\n        startPosition,\n      );\n      this.addLineFromLeftToBottom();\n      this.addLine(LineDirection.Vertical, this.getMonomerHeight());\n      this.addLineFromTopToLeft();\n      this.addLine(\n        LineDirection.Horizontal,\n        -(\n          startPosition.x -\n          endPosition.x +\n          LINE_FROM_MONOMER_LENGTH * 2 +\n          this.getMonomerWidth()\n        ),\n      );\n\n      this.addLineFromRightToTop();\n      this.addLine(\n        LineDirection.Vertical,\n        endPosition.y - startPosition.y - this.getMonomerHeight(),\n      );\n      this.addLineFromBottomToRight();\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth() / 2,\n      );\n    } else if (this.isSecondMonomerLeft(startPosition, endPosition)) {\n      if (\n        isR1TheCurrentAttachmentPointOfFirstMonomer &&\n        reCheckAttachmentPoint\n      ) {\n        this.updateSnakeBondPath(endPosition, startPosition, false);\n        return;\n      }\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth() / 2,\n        startPosition,\n      );\n      this.addLineFromLeftToBottom();\n      this.addLine(\n        LineDirection.Vertical,\n        endPosition.y - startPosition.y + this.getMonomerHeight(),\n      );\n      this.addLineFromTopToLeft();\n      this.addLine(\n        LineDirection.Horizontal,\n        -(\n          startPosition.x -\n          endPosition.x +\n          LINE_FROM_MONOMER_LENGTH * 2 +\n          this.getMonomerWidth()\n        ),\n      );\n\n      this.addLineFromRightToTop();\n      this.addLine(LineDirection.Vertical, -this.getMonomerHeight());\n      this.addLineFromBottomToRight();\n      this.addLine(\n        LineDirection.Horizontal,\n        LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth() / 2,\n      );\n    } else {\n      this.addRandomLine(startPosition, endPosition);\n    }\n  }\n\n  private isSecondMonomerTopRight(\n    startPosition: Vec2,\n    endPosition: Vec2,\n  ): boolean {\n    return (\n      startPosition.y - endPosition.y > DOUBLE_CORNER_LENGTH &&\n      endPosition.x - startPosition.x >\n        DOUBLE_CORNER_LENGTH + LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth()\n    );\n  }\n\n  private isSecondMonomerBottomRight(\n    startPosition: Vec2,\n    endPosition: Vec2,\n  ): boolean {\n    return (\n      endPosition.y - startPosition.y > DOUBLE_CORNER_LENGTH &&\n      endPosition.x - startPosition.x >\n        DOUBLE_CORNER_LENGTH + LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth()\n    );\n  }\n\n  private isSecondMonomerBottomLeft(\n    startPosition: Vec2,\n    endPosition: Vec2,\n  ): boolean {\n    return (\n      endPosition.y - startPosition.y >=\n        2 * (VERTICAL_LINE_LENGTH + DOUBLE_CORNER_LENGTH) &&\n      endPosition.x - startPosition.x <=\n        DOUBLE_CORNER_LENGTH + LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth()\n    );\n  }\n\n  private isSecondMonomerTopLeft(\n    startPosition: Vec2,\n    endPosition: Vec2,\n  ): boolean {\n    return (\n      startPosition.y - endPosition.y > 0 &&\n      endPosition.x - startPosition.x <=\n        DOUBLE_CORNER_LENGTH + LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth()\n    );\n  }\n\n  private isSecondMonomerLeft(startPosition: Vec2, endPosition: Vec2): boolean {\n    return (\n      startPosition.y - endPosition.y < 0 &&\n      startPosition.y - endPosition.y >\n        -2 * (VERTICAL_LINE_LENGTH + DOUBLE_CORNER_LENGTH) &&\n      endPosition.x - startPosition.x <=\n        DOUBLE_CORNER_LENGTH + LINE_FROM_MONOMER_LENGTH + this.getMonomerWidth()\n    );\n  }\n\n  private addLineFromTopToRight(): void {\n    this.path = `${this.path} c 0,4.418 3.582,${CORNER_LENGTH} ${CORNER_LENGTH},${CORNER_LENGTH}`;\n  }\n\n  private addLineFromLeftToTop(): void {\n    this.path = `${this.path} c 4.418,0 ${CORNER_LENGTH},-3.582 ${CORNER_LENGTH},-${CORNER_LENGTH}`;\n  }\n\n  private addLineFromBottomToRight(): void {\n    this.path = `${this.path} c 0,-4.418 3.582,-${CORNER_LENGTH} ${CORNER_LENGTH},-${CORNER_LENGTH}`;\n  }\n\n  private addLineFromLeftToBottom(): void {\n    this.path = `${this.path} c 4.418,0 ${CORNER_LENGTH},3.582 ${CORNER_LENGTH},${CORNER_LENGTH}`;\n  }\n\n  private addLineFromTopToLeft(): void {\n    this.path = `${this.path} c 0,4.418 -3.582,${CORNER_LENGTH} -${CORNER_LENGTH},${CORNER_LENGTH}`;\n  }\n\n  private addLineFromRightToTop(): void {\n    this.path = `${this.path} c -4.418,0 -${CORNER_LENGTH},-3.582 -${CORNER_LENGTH},-${CORNER_LENGTH}`;\n  }\n\n  private addLineFromRightToBottom(): void {\n    this.path = `${this.path} c -4.418,0 -${CORNER_LENGTH},3.582 -${CORNER_LENGTH},${CORNER_LENGTH}`;\n  }\n\n  private addLine(\n    lineDirection: LineDirection,\n    length: number,\n    startPosition?: Vec2,\n  ): void {\n    const start = startPosition\n      ? `M ${Math.round(startPosition.x)},${Math.round(startPosition.y)}`\n      : this.path;\n    const line =\n      lineDirection === LineDirection.Horizontal\n        ? `l${length}, 0`\n        : `l 0, ${length}`;\n    this.path = `${start} ${line}`;\n  }\n\n  private addRandomLine(startPosition: Vec2, endPosition: Vec2): void {\n    const start = `M ${Math.round(startPosition.x)},${Math.round(\n      startPosition.y,\n    )}`;\n    const line = `L ${Math.round(endPosition.x)},${Math.round(endPosition.y)}`;\n    this.path = `${start} ${line}`;\n  }\n\n  // TODO: Specify the types.\n  public appendBondGraph(rootElement) {\n    this.bodyElement = rootElement\n      .append('line')\n      .attr('stroke', this.polymerBond.finished ? '#333333' : '#0097A8')\n      .attr('stroke-width', 1)\n      .attr('stroke-dasharray', this.isHydrogenBond ? '2' : '0')\n      .attr('class', 'selection-area')\n      .attr('x1', this.scaledPosition.startPosition.x)\n      .attr('y1', this.scaledPosition.startPosition.y)\n      .attr('x2', this.scaledPosition.endPosition.x)\n      .attr('y2', this.scaledPosition.endPosition.y)\n      .attr('pointer-events', this.polymerBond.finished ? 'stroke' : 'none');\n\n    return this.bodyElement;\n  }\n\n  // TODO: Specify the types.\n  private appendRootElement() {\n    return this.canvas\n      .insert('g', `.monomer`)\n      .data([this])\n      .on('mouseover', (event) => {\n        this.editorEvents.mouseOverPolymerBond.dispatch(event);\n        this.editorEvents.mouseOverDrawingEntity.dispatch(event);\n      })\n      .on('mousemove', (event) => {\n        this.editorEvents.mouseOnMovePolymerBond.dispatch(event);\n      })\n      .on('mouseout', (event) => {\n        this.editorEvents.mouseLeavePolymerBond.dispatch(event);\n        this.editorEvents.mouseLeaveDrawingEntity.dispatch(event);\n      })\n      .attr(\n        'pointer-events',\n        this.polymerBond.finished ? 'stroke' : 'none',\n      ) as never as D3SvgElementSelection<SVGGElement, void>;\n  }\n\n  public show(_theme?: unknown, force = false): void {\n    if (force) {\n      this.sideConnectionBondTurnPoint = undefined;\n    }\n    this.rootElement = this.rootElement || this.appendRootElement();\n    this.appendBond(this.rootElement);\n    this.appendHoverAreaElement();\n    this.drawSelection();\n  }\n\n  private get isSideConnectionBondDrawn() {\n    return this.polymerBond.isSideChainConnection && this.path;\n  }\n\n  public drawSelection(): void {\n    if (this.polymerBond.selected) {\n      this.selectionElement?.remove();\n      if (\n        (this.isSnakeBond && !this.isMonomersOnSameHorizontalLine()) ||\n        this.isSideConnectionBondDrawn\n      ) {\n        this.selectionElement = this.rootElement\n          ?.insert('path', ':first-child')\n          .attr('stroke', '#57FF8F')\n          .attr('stroke-width', 2)\n          .attr('fill-opacity', 0)\n          .attr('d', this.path)\n          .attr('class', 'dynamic-element');\n      } else {\n        this.selectionElement = this.rootElement\n          ?.insert('line', ':first-child')\n          .attr('stroke', '#57FF8F')\n          .attr('x1', this.scaledPosition.startPosition.x)\n          .attr('y1', this.scaledPosition.startPosition.y)\n          .attr('x2', this.scaledPosition.endPosition.x)\n          .attr('y2', this.scaledPosition.endPosition.y)\n          .attr('stroke-width', '5')\n          .attr('class', 'dynamic-element');\n      }\n    } else {\n      this.selectionElement?.remove();\n    }\n  }\n\n  public moveEnd(): void {\n    if (\n      this.isSnakeBond &&\n      !this.isMonomersOnSameHorizontalLine() &&\n      this.polymerBond.finished\n    ) {\n      this.moveSnakeBondEnd();\n    } else {\n      this.moveGraphBondEnd();\n    }\n  }\n\n  private moveSnakeBondEnd(): void {\n    const startPosition = this.scaledPosition.startPosition;\n    const endPosition = this.scaledPosition.endPosition;\n    this.updateSnakeBondPath(startPosition, endPosition);\n\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n    this.bodyElement.attr('d', this.path);\n\n    this.hoverAreaElement.attr('d', this.path);\n    this.selectionElement?.attr('d', this.path);\n  }\n\n  private moveGraphBondEnd(): void {\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n    this.bodyElement\n      .attr('x2', this.scaledPosition.endPosition.x)\n      .attr('y2', this.scaledPosition.endPosition.y);\n\n    this.hoverAreaElement\n      .attr('x2', this.scaledPosition.endPosition.x)\n      .attr('y2', this.scaledPosition.endPosition.y);\n\n    this.hoverCircleAreaElement\n      ?.attr('cx', this.scaledPosition.endPosition.x)\n      .attr('cy', this.scaledPosition.endPosition.y);\n\n    this.selectionElement\n      ?.attr('x2', this.scaledPosition.endPosition.x)\n      ?.attr('y2', this.scaledPosition.endPosition.y);\n  }\n\n  public moveStart(): void {\n    if (this.isSnakeBond && !this.isMonomersOnSameHorizontalLine()) {\n      this.moveSnakeBondStart();\n    } else {\n      this.moveGraphBondStart();\n    }\n  }\n\n  private moveSnakeBondStart(): void {\n    const startPosition = this.scaledPosition.startPosition;\n    const endPosition = this.scaledPosition.endPosition;\n    this.updateSnakeBondPath(startPosition, endPosition);\n\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n    this.bodyElement.attr('d', this.path);\n\n    this.hoverAreaElement.attr('d', this.path);\n    this.selectionElement?.attr('d', this.path);\n  }\n\n  private moveGraphBondStart(): void {\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n    this.bodyElement\n      .attr('x1', this.scaledPosition.startPosition.x)\n      .attr('y1', this.scaledPosition.startPosition.y);\n\n    this.hoverAreaElement\n      .attr('x1', this.scaledPosition.startPosition.x)\n      .attr('y1', this.scaledPosition.startPosition.y);\n\n    this.selectionElement\n      ?.attr('x1', this.scaledPosition.startPosition.x)\n      ?.attr('y1', this.scaledPosition.startPosition.y);\n  }\n\n  protected appendHoverAreaElement(): void {\n    if (\n      (this.isSnakeBond && !this.isMonomersOnSameHorizontalLine()) ||\n      this.isSideConnectionBondDrawn\n    ) {\n      (<D3SvgElementSelection<SVGPathElement, void> | undefined>(\n        this.hoverAreaElement\n      )) = this.rootElement\n        ?.append('path')\n        .attr('stroke', 'transparent')\n        .attr('d', this.path)\n        .attr('fill-opacity', 0)\n        .attr('stroke-width', '5');\n    } else {\n      (<D3SvgElementSelection<SVGLineElement, void> | undefined>(\n        this.hoverAreaElement\n      )) = this.rootElement\n        ?.append('line')\n        .attr('stroke', 'transparent')\n        .attr('x1', this.scaledPosition.startPosition.x)\n        .attr('y1', this.scaledPosition.startPosition.y)\n        .attr('x2', this.scaledPosition.endPosition.x)\n        .attr('y2', this.scaledPosition.endPosition.y)\n        .attr('stroke-width', '10');\n\n      (<D3SvgElementSelection<SVGCircleElement, void> | undefined>(\n        this.hoverCircleAreaElement\n      )) = this.rootElement\n        ?.append('circle')\n        .attr('cursor', 'pointer')\n        .attr('r', '1')\n        .attr('fill', 'transparent')\n        .attr('pointer-events', 'none')\n        .attr('stroke-width', '10')\n        .attr('cx', this.scaledPosition.endPosition.x)\n        .attr('cy', this.scaledPosition.endPosition.y);\n    }\n  }\n\n  public appendHover(): void {\n    assert(this.bodyElement);\n\n    const editor = CoreEditor.provideEditorInstance();\n\n    if (this.polymerBond.isSideChainConnection) {\n      const allSideConnectionBondsBodyElements = editor.canvas.querySelectorAll(\n        `.${SIDE_CONNECTION_BODY_ELEMENT_CLASS}`,\n      );\n\n      Array.from(allSideConnectionBondsBodyElements).forEach(\n        (bondBodyElement) => {\n          bondBodyElement.setAttribute(\n            'stroke',\n            this.isHydrogenBond ? 'lightgrey' : '#C0E2E6',\n          );\n        },\n      );\n    }\n\n    this.bodyElement.attr('stroke', '#0097A8').attr('pointer-events', 'none');\n\n    if (this.polymerBond.selected && this.selectionElement) {\n      this.selectionElement.attr('stroke', '#CCFFDD');\n    }\n  }\n\n  // TODO: Specify the types.\n  public removeHover() {\n    assert(this.bodyElement);\n    assert(this.hoverAreaElement);\n\n    const editor = CoreEditor.provideEditorInstance();\n\n    if (this.polymerBond.isSideChainConnection) {\n      const allSideConnectionBondsBodyElements = editor.canvas.querySelectorAll(\n        `.${SIDE_CONNECTION_BODY_ELEMENT_CLASS}`,\n      );\n\n      Array.from(allSideConnectionBondsBodyElements).forEach(\n        (bondBodyElement) => {\n          const renderer =\n            bondBodyElement.__data__ as SnakeModePolymerBondRenderer;\n\n          bondBodyElement.setAttribute(\n            'stroke',\n            renderer.polymerBond.isSideChainConnection && !this.isHydrogenBond\n              ? '#43B5C0'\n              : '#333333',\n          );\n        },\n      );\n    }\n\n    this.bodyElement\n      .attr(\n        'stroke',\n        this.polymerBond.isSideChainConnection && !this.isHydrogenBond\n          ? '#43B5C0'\n          : '#333333',\n      )\n      .attr('pointer-events', 'stroke');\n\n    if (this.polymerBond.selected && this.selectionElement) {\n      this.selectionElement.attr('stroke', '#57FF8F');\n    }\n\n    return this.hoverAreaElement.attr('stroke', 'transparent');\n  }\n\n  private calculateIsSnakeBond(): void {\n    if (this.polymerBond.isSideChainConnection) {\n      this.isSnakeBond = false;\n      return;\n    }\n\n    if (\n      getSugarFromRnaBase(this.polymerBond.firstMonomer) ||\n      getSugarFromRnaBase(this.polymerBond.secondMonomer)\n    ) {\n      this.isSnakeBond = false;\n      return;\n    }\n\n    this.isSnakeBond = true;\n  }\n\n  public remove(): void {\n    super.remove();\n    if (this.polymerBond.hovered) {\n      this.editorEvents.mouseLeaveMonomer.dispatch();\n    }\n  }\n}\n\nfunction generateBend(\n  dx1: number,\n  dy1: number,\n  dx: number,\n  dy: number,\n): string {\n  return `q ${SMOOTH_CORNER_SIZE * dx1},${SMOOTH_CORNER_SIZE * dy1} ${\n    SMOOTH_CORNER_SIZE * dx\n  },${SMOOTH_CORNER_SIZE * dy} `;\n}\n","import { CoreEditor, SnakeMode } from 'application/editor';\nimport { FlexModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/FlexModePolymerBondRenderer';\nimport { SnakeModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/SnakeModePolymerBondRenderer';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\n\nexport enum LayoutMode {\n  Flex = 'Flex',\n  Snake = 'Snake',\n}\n\ntype PolymerBondRendererClass =\n  | FlexModePolymerBondRenderer\n  | SnakeModePolymerBondRenderer;\ntype PolymerBondRendererClassType =\n  | typeof FlexModePolymerBondRenderer\n  | typeof SnakeModePolymerBondRenderer;\nconst polymerBondRendererMap = new Map<\n  LayoutMode,\n  PolymerBondRendererClassType\n>([\n  [LayoutMode.Flex, FlexModePolymerBondRenderer],\n  [LayoutMode.Snake, SnakeModePolymerBondRenderer],\n]);\n\nexport class PolymerBondRendererFactory {\n  public static createInstance(\n    polymerBond: PolymerBond | HydrogenBond,\n  ): PolymerBondRendererClass {\n    const mode = checkIfIsSnakeMode() ? LayoutMode.Snake : LayoutMode.Flex;\n    return polymerBond instanceof HydrogenBond\n      ? new SnakeModePolymerBondRenderer(polymerBond)\n      : (PolymerBondRendererFactory.createInstanceByMode(\n          mode,\n          polymerBond,\n        ) as PolymerBondRendererClass);\n  }\n\n  public static createInstanceByMode(\n    mode: LayoutMode,\n    polymerBond: PolymerBond,\n  ): PolymerBondRendererClass | never {\n    const RendererClass = polymerBondRendererMap.get(mode);\n    if (!RendererClass) {\n      throw new Error(\n        `PolymerBondRenderer for the layout mode ${mode} not found.`,\n      );\n    }\n    return new RendererClass(polymerBond);\n  }\n}\n\nfunction checkIfIsSnakeMode(): boolean {\n  const editor = CoreEditor.provideEditorInstance();\n  return editor?.mode instanceof SnakeMode;\n}\n","import { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { Coordinates } from 'application/editor/shared/coordinates';\nimport { CoreEditor, ZoomTool } from 'application/editor';\nimport { AtomLabel, ElementColor, Elements } from 'domain/constants';\nimport { D3SvgElementSelection } from 'application/render/types';\n\nexport class AtomRenderer extends BaseRenderer {\n  private selectionElement?: D3SvgElementSelection<SVGEllipseElement, void>;\n  private textElement?: D3SvgElementSelection<SVGTextElement, void>;\n\n  constructor(public atom: Atom) {\n    super(atom);\n    atom.setRenderer(this);\n  }\n\n  get scaledPosition() {\n    return Coordinates.modelToCanvas(this.atom.position);\n  }\n\n  get center() {\n    return this.scaledPosition;\n  }\n\n  private appendRootElement() {\n    const editor = CoreEditor.provideEditorInstance();\n\n    const rootElement = this.canvas\n      .insert('g', ':first-child')\n      .data([this])\n      .attr('pointer-events', 'all')\n      .attr(\n        'transform',\n        `translate(${this.scaledPosition.x}, ${this.scaledPosition.y})`,\n      ) as never as D3SvgElementSelection<SVGGElement, void>;\n\n    rootElement\n      ?.on('mouseover', () => {\n        this.showHover();\n      })\n      .on('mouseleave', () => {\n        this.hideHover();\n      })\n      .on('mouseup', (event) => {\n        editor.events.mouseUpAtom.dispatch(event);\n      });\n\n    return rootElement;\n  }\n\n  private appendBody() {\n    return this.rootElement\n      ?.append('circle')\n      .data([this])\n      .attr('r', 0)\n      .attr('cx', 0)\n      .attr('cy', 0);\n  }\n\n  private appendSelectionContour() {\n    if (this.labelLength < 2 || !this.isLabelVisible) {\n      return this.rootElement\n        ?.insert('circle', ':first-child')\n        .attr('r', 10)\n        .attr('cx', 0)\n        .attr('cy', 0);\n    } else {\n      const labelBbox = this.textElement?.node()?.getBoundingClientRect();\n      const labelX = labelBbox?.x || 0;\n      const labelWidth = labelBbox?.width || 8;\n      const labelHeight = labelBbox?.height || 8;\n      const canvasBoundingClientRect = ZoomTool.instance.canvasWrapper\n        .node()\n        ?.getBoundingClientRect();\n      const canvasX = canvasBoundingClientRect?.x || 0;\n      const HOVER_PADDING = 4;\n      const HOVER_RECTANGLE_RADIUS = 10;\n\n      return this.rootElement\n        ?.insert('rect', ':first-child')\n        .attr('x', labelX - this.scaledPosition.x - canvasX - HOVER_PADDING)\n        .attr('y', -(labelHeight / 2 + HOVER_PADDING))\n        .attr('width', labelWidth + HOVER_PADDING * 2)\n        .attr('height', labelHeight + HOVER_PADDING * 2)\n        .attr('rx', HOVER_RECTANGLE_RADIUS)\n        .attr('ry', HOVER_RECTANGLE_RADIUS);\n    }\n  }\n\n  protected appendHover() {\n    const selectionContourElement = this.appendSelectionContour();\n\n    return (\n      selectionContourElement\n        ?.attr('stroke', '#0097a8')\n        // selectionContourElement is union type here. For some reason for union selection types\n        // ts shows error that first call of attr can return string.\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        .attr('stroke-width', '1.2')\n        .attr('fill', 'none')\n        .attr('opacity', '0')\n    );\n  }\n\n  public showHover() {\n    this.hoverElement?.attr('opacity', '1');\n  }\n\n  public hideHover() {\n    this.hoverElement?.attr('opacity', '0');\n  }\n\n  private get shouldHydrogenBeOnLeft() {\n    const viewModel = CoreEditor.provideEditorInstance().viewModel;\n    const atomHaldEdges = viewModel.atomsToHalfEdges.get(this.atom);\n\n    if (atomHaldEdges?.length === 0) {\n      if (this.atom.label === AtomLabel.D || this.atom.label === AtomLabel.T) {\n        return false;\n      } else {\n        const element = Elements.get(this.atom.label);\n\n        return !element || Boolean(element.leftH);\n      }\n    }\n\n    if (atomHaldEdges?.length === 1) {\n      const firstHalfEdge = atomHaldEdges[0];\n\n      return firstHalfEdge.direction.x > 0;\n    }\n\n    return false;\n  }\n\n  public get isLabelVisible() {\n    const editor = CoreEditor.provideEditorInstance();\n    const viewModel = editor.viewModel;\n    const atomNeighborsHalfEdges = viewModel.atomsToHalfEdges.get(this.atom);\n    const isCarbon = this.atom.label === AtomLabel.C;\n    const visibleTerminal = true;\n    const isAtomTerminal =\n      !atomNeighborsHalfEdges?.length || atomNeighborsHalfEdges.length === 1;\n    const isAtomInMiddleOfChain = (atomNeighborsHalfEdges?.length || 0) >= 2;\n\n    if (isCarbon && !isAtomTerminal) {\n      return false;\n    }\n\n    if ((isAtomTerminal && visibleTerminal) || isAtomInMiddleOfChain)\n      return true;\n\n    return false;\n  }\n\n  public get labelLength() {\n    const { hydrogenAmount } = this.atom.calculateValence();\n\n    if (hydrogenAmount === 0) {\n      return 1;\n    }\n\n    return hydrogenAmount === 1 ? 2 : 3;\n  }\n\n  private appendLabel() {\n    if (!this.isLabelVisible) {\n      return;\n    }\n\n    const { hydrogenAmount } = this.atom.calculateValence();\n    const shouldHydrogenBeOnLeft = this.shouldHydrogenBeOnLeft;\n\n    const textElement = this.rootElement\n      ?.append('text')\n      .attr('y', 5)\n      .attr('fill', ElementColor[this.atom.label])\n      .attr(\n        'style',\n        'user-select: none; font-family: Arial; letter-spacing: 1.2px;',\n      )\n      .attr('font-size', '13px')\n      .attr('pointer-events', 'none');\n\n    if (!shouldHydrogenBeOnLeft) {\n      textElement?.append('tspan').text(this.atom.label);\n    }\n\n    if (hydrogenAmount > 0) {\n      textElement?.append('tspan').text('H');\n    }\n\n    if (hydrogenAmount > 1) {\n      textElement?.append('tspan').text(hydrogenAmount).attr('dy', 3);\n    }\n\n    if (shouldHydrogenBeOnLeft) {\n      textElement\n        ?.append('tspan')\n        .text(this.atom.label)\n        .attr('dy', hydrogenAmount > 1 ? -3 : 0);\n    }\n\n    textElement\n      ?.attr(\n        'text-anchor',\n        shouldHydrogenBeOnLeft\n          ? 'end'\n          : hydrogenAmount > 0\n          ? 'start'\n          : 'middle',\n      )\n      .attr('x', shouldHydrogenBeOnLeft ? 5 : hydrogenAmount > 0 ? -5 : 0);\n\n    return textElement;\n  }\n\n  public appendSelection() {\n    if (!this.selectionElement) {\n      const selectionContourElement = this.appendSelectionContour();\n\n      this.selectionElement = selectionContourElement\n        ?.attr('fill', '#57FF8F')\n        // selectionContourElement is union type here. For some reason for union selection types\n        // ts shows error that first call of attr can return string.\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        .attr('class', 'dynamic-element');\n    }\n  }\n\n  public removeSelection() {\n    this.selectionElement?.remove();\n    this.selectionElement = undefined;\n  }\n\n  public drawSelection() {\n    if (!this.rootElement) {\n      return;\n    }\n    if (this.atom.selected) {\n      this.appendSelection();\n    } else {\n      this.removeSelection();\n    }\n  }\n\n  public moveSelection() {\n    if (!this.rootElement) {\n      return;\n    }\n\n    this.drawSelection();\n    this.move();\n  }\n\n  show() {\n    this.rootElement = this.appendRootElement();\n    this.bodyElement = this.appendBody();\n    this.textElement = this.appendLabel();\n    this.hoverElement = this.appendHover();\n    this.drawSelection();\n  }\n\n  public move() {\n    this.rootElement?.attr(\n      'transform',\n      `translate(${this.scaledPosition.x}, ${this.scaledPosition.y})`,\n    );\n  }\n\n  public remove() {\n    this.removeSelection();\n    super.remove();\n  }\n\n  protected appendHoverAreaElement(): void {}\n\n  protected removeHover(): void {}\n}\n","import { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { Coordinates } from 'application/editor/shared/coordinates';\nimport { Bond } from 'domain/entities/CoreBond';\nimport { Scale } from 'domain/helpers';\nimport { Vec2 } from 'domain/entities';\nimport { getBondLineShift } from 'application/render/restruct/rebond';\nimport { CoreEditor } from 'application/editor';\nimport { HalfEdge } from 'application/render/view-model/HalfEdge';\nimport { ViewModel } from 'application/render/view-model/ViewModel';\nimport { KetcherLogger } from 'utilities';\nimport { D3SvgElementSelection } from 'application/render/types';\n\nconst BOND_WIDTH = 2;\n\nexport class BondRenderer extends BaseRenderer {\n  private pathShape = '';\n  private selectionElement:\n    | D3SvgElementSelection<SVGPathElement, void>\n    | undefined;\n\n  constructor(public bond: Bond) {\n    super(bond);\n    bond.setRenderer(this);\n  }\n\n  private get scaledPosition() {\n    const startPositionInPixels = Scale.modelToCanvas(\n      this.bond.startPosition,\n      this.editorSettings,\n    );\n\n    const endPositionInPixels = Scale.modelToCanvas(\n      this.bond.endPosition,\n      this.editorSettings,\n    );\n\n    return {\n      startPosition: startPositionInPixels,\n      endPosition: endPositionInPixels,\n    };\n  }\n\n  private getDoubleBondShiftForChain(\n    firstHalfEdge?: HalfEdge,\n    secondHalfEdge?: HalfEdge,\n  ): number {\n    if (!firstHalfEdge || !secondHalfEdge) return 0;\n    const nLeft =\n      (firstHalfEdge.sinToLeftNeighborHalfEdge > 0.3 ? 1 : 0) +\n      (secondHalfEdge.sinToRightNeighborHalfEdge > 0.3 ? 1 : 0);\n    const nRight =\n      (secondHalfEdge.sinToLeftNeighborHalfEdge > 0.3 ? 1 : 0) +\n      (firstHalfEdge.sinToRightNeighborHalfEdge > 0.3 ? 1 : 0);\n    if (nLeft > nRight) return -1;\n    if (nLeft < nRight) return 1;\n    if (\n      (firstHalfEdge.sinToLeftNeighborHalfEdge > 0.3 ? 1 : 0) +\n        (firstHalfEdge.sinToRightNeighborHalfEdge > 0.3 ? 1 : 0) ===\n      1\n    )\n      return 1;\n    return 0;\n  }\n\n  private getDoubleBondShiftForLoop(\n    loop1HalfEdgesAmount: number,\n    loop2HalfEdgesAmount: number,\n    loop1DoubleBondsAmount: number,\n    loop2DoubleBondsAmount: number,\n  ): number {\n    const BENZENE_RING_BONDS_AMOUNT = 6;\n\n    if (\n      loop1HalfEdgesAmount === BENZENE_RING_BONDS_AMOUNT &&\n      loop2HalfEdgesAmount !== BENZENE_RING_BONDS_AMOUNT &&\n      (loop1DoubleBondsAmount > 1 || loop2DoubleBondsAmount === 1)\n    )\n      return -1;\n    if (\n      loop2HalfEdgesAmount === BENZENE_RING_BONDS_AMOUNT &&\n      loop1HalfEdgesAmount !== BENZENE_RING_BONDS_AMOUNT &&\n      (loop2DoubleBondsAmount > 1 || loop1DoubleBondsAmount === 1)\n    )\n      return 1;\n    if (\n      loop2HalfEdgesAmount * loop1DoubleBondsAmount >\n      loop1HalfEdgesAmount * loop2DoubleBondsAmount\n    )\n      return -1;\n    if (\n      loop2HalfEdgesAmount * loop1DoubleBondsAmount <\n      loop1HalfEdgesAmount * loop2DoubleBondsAmount\n    )\n      return 1;\n    if (loop2HalfEdgesAmount > loop1HalfEdgesAmount) return -1;\n    return 1;\n  }\n\n  private getDoubleBondShift(\n    viewModel: ViewModel,\n    firstHalfEdge?: HalfEdge,\n    secondHalfEdge?: HalfEdge,\n  ) {\n    if (!firstHalfEdge || !secondHalfEdge) {\n      return this.getDoubleBondShiftForChain(firstHalfEdge, secondHalfEdge);\n    }\n\n    const loop1Id = firstHalfEdge.loopId || -1;\n    const loop2Id = secondHalfEdge.loopId || -1;\n    const loop1 = viewModel.loops.get(loop1Id);\n    const loop2 = viewModel.loops.get(loop2Id);\n\n    if (loop1 && loop2) {\n      return this.getDoubleBondShiftForLoop(\n        loop1.halfEdges.length,\n        loop2.halfEdges.length,\n        loop1.doubleBondsAmount,\n        loop2.doubleBondsAmount,\n      );\n    } else if (loop1) {\n      return -1;\n    } else if (loop2) {\n      return 1;\n    } else {\n      return this.getDoubleBondShiftForChain(firstHalfEdge, secondHalfEdge);\n    }\n  }\n\n  private shiftPositionIfAtomLabelVisible(\n    position: Vec2,\n    atom: Atom,\n    halfEdge: HalfEdge,\n  ) {\n    if (atom.renderer?.isLabelVisible) {\n      return position.addScaled(\n        halfEdge.direction,\n        BOND_WIDTH * 3 + (this.bond.firstAtom.renderer?.labelLength || 0) * 4,\n      );\n    }\n\n    return position;\n  }\n\n  public appendSelection() {\n    const pathShape = this.getSelectionContour();\n\n    if (this.selectionElement) {\n      this.selectionElement.attr('d', pathShape);\n    } else {\n      this.selectionElement = this.canvas\n        ?.insert('path', ':first-child')\n        .attr('d', pathShape)\n        .attr('fill', '#57ff8f')\n        .attr('class', 'dynamic-element');\n    }\n  }\n\n  public removeSelection() {\n    this.selectionElement?.remove();\n    this.selectionElement = undefined;\n  }\n\n  public appendHover() {\n    if (this.hoverElement) {\n      return this.hoverElement;\n    }\n\n    const pathShape = this.getSelectionContour();\n\n    this.hoverElement = this.canvas\n      ?.insert('path', ':first-child')\n      .attr('d', pathShape)\n      .attr('fill', 'none')\n      .attr('stroke', '#0097A8')\n      .attr('stroke-width', 1.2)\n      .attr('class', 'dynamic-element');\n\n    return this.hoverElement;\n  }\n\n  public removeHover() {\n    this.hoverElement?.remove();\n    this.hoverElement = undefined;\n  }\n\n  public drawSelection() {\n    if (!this.rootElement) {\n      return;\n    }\n    if (this.bond.selected) {\n      this.appendSelection();\n      // this.raiseElement();\n    } else {\n      this.removeSelection();\n    }\n  }\n\n  private appendRootElement() {\n    return this.canvas\n      .append('g')\n      .data([this])\n      .attr(\n        'transform',\n        `translate(${this.scaledPosition.startPosition.x}, ${this.scaledPosition.startPosition.y})`,\n      ) as never as D3SvgElementSelection<SVGGElement, void>;\n  }\n\n  getSelectionPoints() {\n    // please refer to: ketcher-core/docs/data/hover_selection_1.png\n    const editor = CoreEditor.provideEditorInstance();\n    const viewModel = editor.viewModel;\n    const halfEdges = viewModel.bondsToHalfEdges.get(this.bond);\n    const firstHalfEdge = halfEdges?.[0];\n    const secondHalfEdge = halfEdges?.[1];\n    const bond: Bond = this.bond;\n    const bondSpacingInPx = 6;\n    const stereoBondWidth = 6;\n    const regularSelectionThikness = bondSpacingInPx + BOND_WIDTH;\n\n    if (!firstHalfEdge || !secondHalfEdge) {\n      KetcherLogger.warn(\n        'Failed to draw selection for bond. There is no no half edges.',\n      );\n\n      return [];\n    }\n\n    // get half-bond positions, this is where the actual bond\n    // image on the screen is drawn, it may be different e.g. if the\n    // bond is connected to an atom with a label as opposed\n    // to when it is connected to a Carbon atom w/o a label\n    // please refer to: ketcher-core/docs/data/hover_selection_2.png\n    let halfEdgeStart = Coordinates.modelToCanvas(firstHalfEdge.position);\n    let halfEdgeEnd = Coordinates.modelToCanvas(secondHalfEdge.position);\n\n    halfEdgeStart = this.shiftPositionIfAtomLabelVisible(\n      halfEdgeStart,\n      this.bond.firstAtom,\n      firstHalfEdge,\n    );\n\n    halfEdgeEnd = this.shiftPositionIfAtomLabelVisible(\n      halfEdgeEnd,\n      this.bond.secondAtom,\n      secondHalfEdge,\n    );\n\n    const isStereoBond = bond.stereo !== 0 && bond.stereo !== 3;\n\n    const addPadding = isStereoBond ? 0 : -2;\n\n    // find the points on the line where we will be drawing the curves\n    const contourStart = Vec2.getLinePoint(\n      halfEdgeEnd,\n      halfEdgeStart,\n      addPadding,\n    );\n    const contourEnd = Vec2.getLinePoint(\n      halfEdgeStart,\n      halfEdgeEnd,\n      addPadding,\n    );\n\n    const stereoBondStartHeightCoef = 0.5;\n    const bondPadding = 0.5;\n    const addStart = isStereoBond\n      ? stereoBondWidth * stereoBondStartHeightCoef\n      : regularSelectionThikness + bondPadding;\n    const stereoBondEndHeightCoef = 1;\n    const addEnd = isStereoBond\n      ? stereoBondWidth +\n        (regularSelectionThikness * stereoBondEndHeightCoef) / stereoBondWidth\n      : regularSelectionThikness + bondPadding;\n\n    const contourPaddedStart = Vec2.getLinePoint(\n      contourStart,\n      contourEnd,\n      addEnd,\n    );\n    const contourPaddedEnd = Vec2.getLinePoint(\n      contourEnd,\n      contourStart,\n      addStart,\n    );\n\n    // we need four points for each bezier curve\n    // and two for each line that together form the selection contour\n    // the padded values are for the curve points and the rest of\n    // the values are for drawing the lines\n    // please refer to: ketcher-core/docs/data/hover_selection_3.png\n    const startPoint = contourStart.add(new Vec2(addEnd, 0));\n    const endPoint = contourEnd.add(new Vec2(addStart, 0));\n    const padStartPoint = contourPaddedStart.add(new Vec2(addEnd, 0));\n    const padEndPoint = contourPaddedEnd.add(new Vec2(addStart, 0));\n\n    const angle =\n      (Math.atan2(firstHalfEdge.direction.y, firstHalfEdge.direction.x) * 180) /\n      Math.PI;\n\n    // rotate the points +/-90 degrees to find the\n    // perpendicular points that will be used for actual drawing\n    // of selection contour on canvas\n    const startTop = startPoint.rotateAroundOrigin(\n      angle + 90,\n      new Vec2(contourStart.x, contourStart.y),\n    );\n    const startBottom = startPoint.rotateAroundOrigin(\n      angle - 90,\n      new Vec2(contourStart.x, contourStart.y),\n    );\n    const startPadTop = padStartPoint.rotateAroundOrigin(\n      angle + 90,\n      contourPaddedStart,\n    );\n    const startPadBottom = padStartPoint.rotateAroundOrigin(\n      angle - 90,\n      contourPaddedStart,\n    );\n    const endTop = endPoint.rotateAroundOrigin(angle + 90, contourEnd);\n    const endBottom = endPoint.rotateAroundOrigin(angle - 90, contourEnd);\n    const endPadTop = padEndPoint.rotateAroundOrigin(\n      angle + 90,\n      contourPaddedEnd,\n    );\n    const endPadBottom = padEndPoint.rotateAroundOrigin(\n      angle - 90,\n      contourPaddedEnd,\n    );\n\n    return [\n      startPadTop,\n      startTop,\n      endTop,\n      endPadTop,\n      endPadBottom,\n      endBottom,\n      startPadBottom,\n      startBottom,\n    ];\n  }\n\n  private getSelectionContour() {\n    const [\n      startPadTop,\n      startTop,\n      endTop,\n      endPadTop,\n      endPadBottom,\n      endBottom,\n      startPadBottom,\n      startBottom,\n    ] = this.getSelectionPoints();\n\n    // for a visual representation of the points\n    // please refer to: ketcher-core/docs/data/hover_selection_exp.png\n    const pathString = `\n      M ${startTop.x} ${startTop.y}\n      L ${endTop.x} ${endTop.y}\n      C ${endPadTop.x} ${endPadTop.y}, ${endPadBottom.x} ${endPadBottom.y}, ${endBottom.x} ${endBottom.y}\n      L ${startBottom.x} ${startBottom.y}\n      C ${startPadBottom.x} ${startPadBottom.y}, ${startPadTop.x} ${startPadTop.y}, ${startTop.x} ${startTop.y}\n    `;\n\n    return pathString;\n  }\n\n  public moveSelection() {\n    if (!this.rootElement) {\n      return;\n    }\n\n    this.drawSelection();\n    this.move();\n  }\n\n  show() {\n    this.rootElement = this.appendRootElement();\n    const editor = CoreEditor.provideEditorInstance();\n    const viewModel = editor.viewModel;\n    const halfEdges = viewModel.bondsToHalfEdges.get(this.bond);\n    const firstHalfEdge = halfEdges?.[0];\n    const secondHalfEdge = halfEdges?.[1];\n    const bondSpace = 6;\n    const linesOffset = bondSpace / 2;\n    const stereoBondWidth = 6;\n\n    if (!firstHalfEdge || !secondHalfEdge) {\n      KetcherLogger.warn(\n        'Failed to draw double bond. There is no no half edges.',\n      );\n\n      return;\n    }\n\n    if (this.bond.type === 2) {\n      let bondStartPosition = Coordinates.modelToCanvas(\n        firstHalfEdge.position,\n      ).sub(this.scaledPosition.startPosition);\n      let bondEndPosition = Coordinates.modelToCanvas(\n        secondHalfEdge.position,\n      ).sub(this.scaledPosition.startPosition);\n      bondStartPosition = this.shiftPositionIfAtomLabelVisible(\n        bondStartPosition,\n        this.bond.firstAtom,\n        firstHalfEdge,\n      );\n      bondEndPosition = this.shiftPositionIfAtomLabelVisible(\n        bondEndPosition,\n        this.bond.secondAtom,\n        secondHalfEdge,\n      );\n      const shift = this.getDoubleBondShift(\n        viewModel,\n        firstHalfEdge,\n        secondHalfEdge,\n      );\n      const firstLinePartShift = linesOffset + shift * linesOffset;\n      const secondLinePartShift = -linesOffset + shift * linesOffset;\n\n      let firstLineStartPosition = bondStartPosition.addScaled(\n        firstHalfEdge.leftNormal,\n        firstLinePartShift,\n      );\n      let firstLineEndPosition = bondEndPosition.addScaled(\n        firstHalfEdge.leftNormal,\n        firstLinePartShift,\n      );\n      let secondLineStartPosition = bondStartPosition.addScaled(\n        firstHalfEdge.leftNormal,\n        secondLinePartShift,\n      );\n      let secondLineEndPosition = bondEndPosition.addScaled(\n        firstHalfEdge.leftNormal,\n        secondLinePartShift,\n      );\n\n      if (shift > 0) {\n        firstLineStartPosition = firstLineStartPosition.addScaled(\n          firstHalfEdge.direction,\n          bondSpace *\n            getBondLineShift(\n              firstHalfEdge.cosToRightNeighborHalfEdge,\n              firstHalfEdge.sinToRightNeighborHalfEdge,\n            ),\n        );\n\n        firstLineEndPosition = firstLineEndPosition.addScaled(\n          firstHalfEdge.direction,\n          -bondSpace *\n            getBondLineShift(\n              secondHalfEdge.cosToLeftNeighborHalfEdge,\n              secondHalfEdge.sinToLeftNeighborHalfEdge,\n            ),\n        );\n      } else if (shift < 0) {\n        secondLineStartPosition = secondLineStartPosition.addScaled(\n          firstHalfEdge.direction,\n          bondSpace *\n            getBondLineShift(\n              firstHalfEdge.cosToLeftNeighborHalfEdge,\n              firstHalfEdge.sinToLeftNeighborHalfEdge,\n            ),\n        );\n\n        secondLineEndPosition = secondLineEndPosition.addScaled(\n          firstHalfEdge.direction,\n          -bondSpace *\n            getBondLineShift(\n              secondHalfEdge.cosToRightNeighborHalfEdge,\n              secondHalfEdge.sinToRightNeighborHalfEdge,\n            ),\n        );\n      }\n\n      this.pathShape = `\n          M${firstLineStartPosition.x},${firstLineStartPosition.y} \n          L${firstLineEndPosition.x},${firstLineEndPosition.y} \n          M${secondLineStartPosition.x},${secondLineStartPosition.y}      \n          L${secondLineEndPosition.x},${secondLineEndPosition.y}\n        `;\n\n      this.rootElement\n        .append('path')\n        .attr('d', this.pathShape)\n        .attr('stroke', 'black')\n        .attr('stroke-width', `${BOND_WIDTH}px`)\n        .on('mouseover', () => {\n          this.appendHover();\n        })\n        .on('mouseout', () => {\n          this.removeHover();\n        });\n    } else if (this.bond.type === 1) {\n      if (this.bond.stereo === 1) {\n        let bondStartPosition = Coordinates.modelToCanvas(\n          firstHalfEdge.position,\n        ).sub(this.scaledPosition.startPosition);\n        let bondEndPosition = Coordinates.modelToCanvas(\n          secondHalfEdge.position,\n        ).sub(this.scaledPosition.startPosition);\n        bondStartPosition = this.shiftPositionIfAtomLabelVisible(\n          bondStartPosition,\n          this.bond.firstAtom,\n          firstHalfEdge,\n        );\n        bondEndPosition = this.shiftPositionIfAtomLabelVisible(\n          bondEndPosition,\n          this.bond.secondAtom,\n          secondHalfEdge,\n        );\n        const halfOfBondEndWidth = 0.7 * stereoBondWidth;\n        const bondEndFirstPoint = bondEndPosition.addScaled(\n          firstHalfEdge.leftNormal,\n          halfOfBondEndWidth,\n        );\n        const bondEndSecondPoint = bondEndPosition.addScaled(\n          firstHalfEdge.leftNormal,\n          -halfOfBondEndWidth,\n        );\n\n        this.pathShape = `\n          M${bondStartPosition.x},${bondStartPosition.y}\n          L${bondEndFirstPoint.x},${bondEndFirstPoint.y}\n          L${bondEndSecondPoint.x},${bondEndSecondPoint.y}\n          Z\n          `;\n\n        this.rootElement\n          .append('path')\n          .attr('d', this.pathShape)\n          .attr('stroke', '#000')\n          .attr('stroke-width', 2)\n          .attr('stroke-linecap', 'round')\n          .attr('stroke-linejoin', 'round')\n          .on('mouseenter', () => {\n            this.appendHover();\n          })\n          .on('mouseleave', () => {\n            this.removeHover();\n          });\n      } else if (this.bond.stereo === 6) {\n        let bondStartPosition = Coordinates.modelToCanvas(\n          firstHalfEdge.position,\n        ).sub(this.scaledPosition.startPosition);\n        let bondEndPosition = Coordinates.modelToCanvas(\n          secondHalfEdge.position,\n        ).sub(this.scaledPosition.startPosition);\n\n        bondStartPosition = this.shiftPositionIfAtomLabelVisible(\n          bondStartPosition,\n          this.bond.firstAtom,\n          firstHalfEdge,\n        );\n        bondEndPosition = this.shiftPositionIfAtomLabelVisible(\n          bondEndPosition,\n          this.bond.secondAtom,\n          secondHalfEdge,\n        );\n\n        const direction = bondEndPosition.sub(bondStartPosition);\n        const bondLength = direction.length() + 0.2;\n        const normalizedDirection = direction.normalized();\n        const offsetBetweenLines = 1.2 * BOND_WIDTH;\n        const numberOfLines =\n          Math.max(\n            Math.floor(\n              (bondLength - BOND_WIDTH) / (BOND_WIDTH + offsetBetweenLines),\n            ),\n            0,\n          ) + 2;\n        const step = bondLength / (numberOfLines - 1);\n        const halfOfBondEndWidth = 0.7 * stereoBondWidth;\n\n        let path = '';\n        // TODO define proper names for variables below\n        let p;\n        let q;\n        let r;\n\n        for (let i = 0; i < numberOfLines; ++i) {\n          r = bondStartPosition.addScaled(normalizedDirection, step * i);\n          p = r.addScaled(\n            firstHalfEdge.leftNormal,\n            (halfOfBondEndWidth * (i + 0.5)) / (numberOfLines - 0.5),\n          );\n          q = r.addScaled(\n            firstHalfEdge.leftNormal,\n            (-halfOfBondEndWidth * (i + 0.5)) / (numberOfLines - 0.5),\n          );\n\n          path += `\n            M${p.x},${p.y}\n            L${q.x},${q.y}\n          `;\n        }\n\n        this.pathShape = path;\n\n        this.rootElement\n          .append('path')\n          .attr('d', this.pathShape)\n          .attr('stroke', '#000')\n          .attr('stroke-width', 2)\n          .attr('stroke-linecap', 'round')\n          .attr('stroke-linejoin', 'round')\n          .on('mouseenter', () => {\n            this.appendHover();\n          })\n          .on('mouseleave', () => {\n            this.removeHover();\n          });\n      } else {\n        let startPosition = new Vec2(0, 0);\n        let endPosition = this.scaledPosition.endPosition.sub(\n          this.scaledPosition.startPosition,\n        );\n\n        startPosition = this.shiftPositionIfAtomLabelVisible(\n          startPosition,\n          this.bond.firstAtom,\n          firstHalfEdge,\n        );\n        endPosition = this.shiftPositionIfAtomLabelVisible(\n          endPosition,\n          this.bond.secondAtom,\n          secondHalfEdge,\n        );\n\n        this.pathShape = `M${startPosition.x},${startPosition.y} L${endPosition.x},${endPosition.y}`;\n\n        this.rootElement\n          .append('path')\n          .attr('d', this.pathShape)\n          .attr('stroke', 'black')\n          .attr('stroke-width', `${BOND_WIDTH}px`)\n          .on('mouseenter', () => {\n            this.appendHover();\n          })\n          .on('mouseleave', () => {\n            this.removeHover();\n          });\n      }\n    }\n  }\n\n  public remove() {\n    super.remove();\n    this.removeHover();\n    this.removeSelection();\n  }\n\n  public move() {\n    if (!this.rootElement) {\n      return;\n    }\n\n    this.remove();\n    this.show();\n  }\n\n  protected appendHoverAreaElement(): void {}\n}\n","import { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { Scale } from 'domain/helpers';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\n\nexport class MonomerToAtomBondRenderer extends BaseRenderer {\n  private selectionElement:\n    | D3SvgElementSelection<SVGLineElement, void>\n    | undefined;\n\n  constructor(public monomerToAtomBond: MonomerToAtomBond) {\n    super(monomerToAtomBond);\n    this.monomerToAtomBond.setRenderer(this);\n  }\n\n  private get scaledPosition() {\n    const startPositionInPixels = Scale.modelToCanvas(\n      this.monomerToAtomBond.startPosition,\n      this.editorSettings,\n    );\n\n    const endPositionInPixels = Scale.modelToCanvas(\n      this.monomerToAtomBond.endPosition,\n      this.editorSettings,\n    );\n\n    return {\n      startPosition: startPositionInPixels,\n      endPosition: endPositionInPixels,\n    };\n  }\n\n  show() {\n    this.rootElement = this.canvas\n      .insert('g', `.monomer`)\n      .data([this])\n      .attr(\n        'transform',\n        `translate(${this.scaledPosition.startPosition.x}, ${this.scaledPosition.startPosition.y})`,\n      ) as never as D3SvgElementSelection<SVGGElement, void>;\n\n    this.rootElement\n      ?.append('line')\n      .attr('x1', 0)\n      .attr('y1', 0)\n      .attr(\n        'x2',\n        this.scaledPosition.endPosition.x - this.scaledPosition.startPosition.x,\n      )\n      .attr(\n        'y2',\n        this.scaledPosition.endPosition.y - this.scaledPosition.startPosition.y,\n      )\n      .attr('stroke', '#333333')\n      .attr('stroke-width', 1);\n    this.appendHover();\n  }\n\n  protected appendHover(): D3SvgElementSelection<SVGUseElement, void> | void {\n    this.rootElement\n      ?.append('line')\n      .attr('x1', 0)\n      .attr('y1', 0)\n      .attr(\n        'x2',\n        this.scaledPosition.endPosition.x - this.scaledPosition.startPosition.x,\n      )\n      .attr(\n        'y2',\n        this.scaledPosition.endPosition.y - this.scaledPosition.startPosition.y,\n      )\n      .attr('stroke', 'transparent')\n      .attr('stroke-width', 10);\n  }\n\n  protected appendHoverAreaElement(): void {}\n\n  public drawSelection() {\n    if (!this.rootElement) {\n      return;\n    }\n    if (this.monomerToAtomBond.selected) {\n      this.appendSelection();\n    } else {\n      this.removeSelection();\n    }\n  }\n\n  public appendSelection(): void {\n    this.selectionElement = this.rootElement\n      ?.insert('line', ':first-child')\n      .attr('x1', 0)\n      .attr('y1', 0)\n      .attr(\n        'x2',\n        this.scaledPosition.endPosition.x - this.scaledPosition.startPosition.x,\n      )\n      .attr(\n        'y2',\n        this.scaledPosition.endPosition.y - this.scaledPosition.startPosition.y,\n      )\n      .attr('stroke', '#57ff8f')\n      .attr('stroke-width', 10);\n  }\n\n  public removeSelection() {\n    this.selectionElement?.remove();\n    this.selectionElement = undefined;\n  }\n\n  public move() {\n    if (!this.rootElement) {\n      return;\n    }\n\n    this.remove();\n    this.show();\n  }\n\n  protected removeHover(): void {\n    this.hoverElement?.remove();\n    this.hoverElement = undefined;\n  }\n\n  public moveSelection(): void {}\n}\n","import { CoreEditor } from 'application/editor/Editor';\nimport { monomerFactory } from 'application/editor/operations/monomer/monomerFactory';\nimport { notifyRenderComplete } from 'application/render/internal';\nimport { BaseMonomerRenderer } from 'application/render/renderers/BaseMonomerRenderer';\nimport { FlexModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/FlexModePolymerBondRenderer';\nimport { PolymerBondRendererFactory } from 'application/render/renderers/PolymerBondRenderer/PolymerBondRendererFactory';\nimport { SnakeModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/SnakeModePolymerBondRenderer';\nimport assert from 'assert';\nimport {\n  HydrogenBond,\n  LinkerSequenceNode,\n  MonomerSequenceNode,\n  Nucleoside,\n  Nucleotide,\n  Sugar,\n  UnsplitNucleotide,\n} from 'domain/entities';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { Command } from 'domain/entities/Command';\nimport { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { ChainsCollection } from 'domain/entities/monomer-chains/ChainsCollection';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { AttachmentPointName } from 'domain/types';\nimport { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\nimport { AmbiguousMonomerRenderer } from 'application/render/renderers/AmbiguousMonomerRenderer';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { AtomRenderer } from 'application/render/renderers/AtomRenderer';\nimport { BondRenderer } from 'application/render/renderers/BondRenderer';\nimport { Bond } from 'domain/entities/CoreBond';\nimport { MonomerToAtomBondRenderer } from 'application/render/renderers/MonomerToAtomBondRenderer';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\nimport { PeptideSubChain } from 'domain/entities/monomer-chains/PeptideSubChain';\nimport { RnaSubChain } from 'domain/entities/monomer-chains/RnaSubChain';\nimport { PhosphateSubChain } from 'domain/entities/monomer-chains/PhosphateSubChain';\n\ntype FlexModeOrSnakeModePolymerBondRenderer =\n  | FlexModePolymerBondRenderer\n  | SnakeModePolymerBondRenderer;\n\nexport class RenderersManager {\n  // FIXME: Specify the types.\n  private theme;\n  public monomers: Map<number, BaseMonomerRenderer | AmbiguousMonomerRenderer> =\n    new Map();\n\n  public polymerBonds = new Map<\n    number,\n    FlexModeOrSnakeModePolymerBondRenderer\n  >();\n\n  public atoms = new Map<number, AtomRenderer>();\n\n  public bonds = new Map<number, BondRenderer>();\n\n  private needRecalculateMonomersEnumeration = false;\n\n  constructor({ theme }) {\n    this.theme = theme;\n  }\n\n  public hoverDrawingEntity(drawingEntity: DrawingEntity) {\n    assert(drawingEntity.baseRenderer);\n    drawingEntity.baseRenderer.redrawHover();\n  }\n\n  public selectDrawingEntity(drawingEntity: DrawingEntity) {\n    assert(drawingEntity.baseRenderer);\n    drawingEntity.baseRenderer.drawSelection();\n  }\n\n  public moveDrawingEntity(drawingEntity: DrawingEntity) {\n    assert(drawingEntity.baseRenderer);\n    drawingEntity.baseRenderer.moveSelection();\n    drawingEntity.baseRenderer.drawSelection();\n  }\n\n  private markForReEnumeration() {\n    this.needRecalculateMonomersEnumeration = true;\n  }\n\n  public addMonomer(\n    monomer: BaseMonomer | AmbiguousMonomer,\n    callback?: () => void,\n  ) {\n    let monomerRenderer;\n\n    if (monomer instanceof AmbiguousMonomer) {\n      monomerRenderer = new AmbiguousMonomerRenderer(monomer);\n    } else {\n      const MonomerRenderer = monomerFactory(monomer.monomerItem)[1];\n      monomerRenderer = new MonomerRenderer(monomer);\n    }\n\n    this.monomers.set(monomer.id, monomerRenderer);\n    monomerRenderer.show(this.theme);\n    this.markForReEnumeration();\n    if (callback) {\n      callback();\n    }\n  }\n\n  public moveMonomer(monomer: BaseMonomer) {\n    monomer.renderer?.move();\n    monomer.renderer?.drawSelection();\n  }\n\n  public redrawDrawingEntity(\n    drawingEntity: DrawingEntity,\n    force = false,\n    recalculateEnumeration = false,\n  ) {\n    drawingEntity.baseRenderer?.remove();\n    drawingEntity.baseRenderer?.show(this.theme, force);\n    if (recalculateEnumeration) {\n      this.markForReEnumeration();\n    }\n  }\n\n  public deleteAllDrawingEntities() {\n    this.monomers.forEach((monomerRenderer) => {\n      monomerRenderer.remove();\n    });\n    this.polymerBonds.forEach((polymerBondRenderer) => {\n      polymerBondRenderer.remove();\n    });\n  }\n\n  public deleteMonomer(monomer: BaseMonomer) {\n    monomer.renderer?.remove();\n    this.monomers.delete(monomer.id);\n    this.markForReEnumeration();\n  }\n\n  public addPolymerBond(polymerBond: PolymerBond | HydrogenBond): void {\n    const polymerBondRenderer =\n      PolymerBondRendererFactory.createInstance(polymerBond);\n    this.polymerBonds.set(polymerBond.id, polymerBondRenderer);\n    polymerBondRenderer.show();\n    polymerBondRenderer.polymerBond.firstMonomer.renderer?.redrawAttachmentPoints();\n    this.markForReEnumeration();\n  }\n\n  public movePolymerBond(polymerBond: PolymerBond) {\n    polymerBond.renderer?.moveStart();\n    polymerBond.renderer?.moveEnd();\n    polymerBond.renderer?.drawSelection();\n    // If we started bond from the specific AP, it needs to be redrawn to face the bond direction\n    if (polymerBond.firstMonomer.chosenFirstAttachmentPointForBond) {\n      polymerBond.firstMonomer.renderer?.redrawAttachmentPointsCoordinates();\n    }\n  }\n\n  public showPolymerBondInformation(polymerBond: PolymerBond) {\n    polymerBond.renderer?.redrawHover();\n    polymerBond.firstMonomer.renderer?.redrawAttachmentPoints();\n    polymerBond.firstMonomer.renderer?.redrawHover();\n    polymerBond.secondMonomer?.renderer?.redrawAttachmentPoints();\n    polymerBond.secondMonomer?.renderer?.redrawHover();\n  }\n\n  public deletePolymerBond(\n    polymerBond: PolymerBond | HydrogenBond,\n    recalculateEnumeration = true,\n  ) {\n    polymerBond.renderer?.remove();\n    polymerBond?.firstMonomer?.renderer?.redrawAttachmentPoints?.();\n    polymerBond?.secondMonomer?.renderer?.redrawAttachmentPoints?.();\n    this.polymerBonds.delete(polymerBond.id);\n    if (recalculateEnumeration) {\n      this.markForReEnumeration();\n    }\n  }\n\n  private recalculatePeptideChainEnumeration(subChain: PeptideSubChain) {\n    let currentEnumeration = 1;\n\n    subChain.nodes.forEach((node) => {\n      const monomerRenderer = node.monomer.renderer;\n      const monomerEnumeration = node.monomer.monomerItem.isAntisense\n        ? subChain.length - currentEnumeration + 1\n        : currentEnumeration;\n      const needToDrawTerminalIndicator = node.monomer.monomerItem.isAntisense\n        ? monomerEnumeration === subChain.length\n        : monomerEnumeration === 1;\n\n      if (!monomerRenderer) {\n        return;\n      }\n\n      monomerRenderer.setEnumeration(monomerEnumeration);\n      monomerRenderer.redrawEnumeration(needToDrawTerminalIndicator);\n      currentEnumeration++;\n    });\n  }\n\n  private recalculateRnaChainEnumeration(subChain: RnaSubChain) {\n    let currentEnumeration = 1;\n    const nucleotidesAmount = subChain.nodes.reduce(\n      (nucleotidesAmount, node) =>\n        node instanceof Nucleotide ||\n        node instanceof Nucleoside ||\n        node.monomer instanceof UnsplitNucleotide\n          ? nucleotidesAmount + 1\n          : nucleotidesAmount,\n      0,\n    );\n\n    subChain.nodes.forEach((node) => {\n      const monomerEnumeration = node.monomer.monomerItem.isAntisense\n        ? nucleotidesAmount - currentEnumeration + 1\n        : currentEnumeration;\n      const needToDrawTerminalIndicator = node.monomer.monomerItem.isAntisense\n        ? monomerEnumeration === nucleotidesAmount\n        : monomerEnumeration === 1;\n\n      if (node instanceof Nucleotide || node instanceof Nucleoside) {\n        node.rnaBase.renderer?.setEnumeration(monomerEnumeration);\n        node.rnaBase.renderer?.redrawEnumeration(needToDrawTerminalIndicator);\n        node.sugar.renderer?.setEnumeration(monomerEnumeration);\n        node.sugar.renderer?.redrawEnumeration(needToDrawTerminalIndicator);\n        currentEnumeration++;\n      } else if (node.monomer instanceof UnsplitNucleotide) {\n        node.monomer.renderer?.setEnumeration(monomerEnumeration);\n        node.monomer.renderer?.redrawEnumeration(needToDrawTerminalIndicator);\n        currentEnumeration++;\n      } else if (\n        node instanceof MonomerSequenceNode ||\n        node instanceof LinkerSequenceNode\n      ) {\n        node.monomers.forEach((monomer) => {\n          if (monomer instanceof Sugar) {\n            monomer.renderer?.redrawEnumeration(false);\n          }\n        });\n      }\n    });\n  }\n\n  private recalculateMonomersEnumeration() {\n    const editor = CoreEditor.provideEditorInstance();\n    const chainsCollection = ChainsCollection.fromMonomers([\n      ...editor.drawingEntitiesManager.monomers.values(),\n    ]);\n\n    chainsCollection.chains.forEach((chain) => {\n      chain.subChains.forEach((subChain) => {\n        if (subChain instanceof PeptideSubChain) {\n          this.recalculatePeptideChainEnumeration(subChain);\n        } else if (\n          subChain instanceof RnaSubChain ||\n          subChain instanceof PhosphateSubChain\n        ) {\n          this.recalculateRnaChainEnumeration(subChain);\n        }\n      });\n    });\n\n    this.needRecalculateMonomersEnumeration = false;\n  }\n\n  // FIXME: Specify the types.\n  public finishPolymerBondCreation(polymerBond: PolymerBond) {\n    assert(polymerBond.secondMonomer);\n\n    const polymerBondRenderer =\n      PolymerBondRendererFactory.createInstance(polymerBond);\n    this.polymerBonds.set(polymerBond.id, polymerBondRenderer);\n    this.markForReEnumeration();\n    polymerBond.firstMonomer.renderer?.redrawAttachmentPoints();\n    polymerBond.firstMonomer.renderer?.drawSelection();\n    polymerBond.firstMonomer.renderer?.redrawHover();\n    polymerBond.secondMonomer.renderer?.redrawAttachmentPoints();\n    polymerBond.secondMonomer.renderer?.drawSelection();\n    polymerBond.secondMonomer.renderer?.redrawHover();\n\n    polymerBond.renderer?.show();\n  }\n\n  public cancelPolymerBondCreation(\n    polymerBond: PolymerBond,\n    secondMonomer?: BaseMonomer,\n  ) {\n    this.deletePolymerBond(polymerBond);\n    polymerBond.firstMonomer.renderer?.redrawAttachmentPoints();\n    polymerBond.firstMonomer.renderer?.drawSelection();\n    polymerBond.firstMonomer.renderer?.redrawHover();\n    secondMonomer?.renderer?.redrawAttachmentPoints();\n    secondMonomer?.renderer?.drawSelection();\n    secondMonomer?.renderer?.redrawHover();\n  }\n\n  public hoverMonomer(monomer: BaseMonomer, needRedrawAttachmentPoints) {\n    this.hoverDrawingEntity(monomer as DrawingEntity);\n    if (needRedrawAttachmentPoints) {\n      monomer.renderer?.redrawAttachmentPoints();\n    }\n  }\n\n  public hoverAttachmentPoint(\n    monomer: BaseMonomer,\n    attachmentPointName: AttachmentPointName,\n  ) {\n    this.hoverDrawingEntity(monomer as DrawingEntity);\n    monomer.renderer?.hoverAttachmentPoint(attachmentPointName);\n    monomer.renderer?.updateAttachmentPoints();\n  }\n\n  public reinitializeViewModel() {\n    const editor = CoreEditor.provideEditorInstance();\n    const viewModel = editor.viewModel;\n\n    viewModel.initialize([...editor.drawingEntitiesManager.bonds.values()]);\n  }\n\n  public update(modelChanges?: Command) {\n    this.reinitializeViewModel();\n    modelChanges?.execute(this);\n    this.runPostRenderMethods();\n    notifyRenderComplete();\n  }\n\n  public addAtom(atom: Atom) {\n    const atomRenderer = new AtomRenderer(atom);\n\n    this.atoms.set(atom.id, atomRenderer);\n    atomRenderer.show();\n  }\n\n  public deleteAtom(atom: Atom) {\n    this.atoms.delete(atom.id);\n    atom.renderer?.remove();\n  }\n\n  public addBond(bond: Bond) {\n    const bondRenderer = new BondRenderer(bond);\n\n    this.bonds.set(bond.id, bondRenderer);\n    bondRenderer.show();\n  }\n\n  public deleteBond(bond: Bond) {\n    this.bonds.delete(bond.id);\n    bond.renderer?.remove();\n  }\n\n  public addMonomerToAtomBond(bond: MonomerToAtomBond) {\n    const bondRenderer = new MonomerToAtomBondRenderer(bond);\n\n    bondRenderer.show();\n    bond.monomer.renderer?.redrawAttachmentPoints();\n    bond.monomer.renderer?.redrawHover();\n  }\n\n  public deleteMonomerToAtomBond(bond: MonomerToAtomBond) {\n    bond.renderer?.remove();\n  }\n\n  public runPostRenderMethods() {\n    if (this.needRecalculateMonomersEnumeration) {\n      this.recalculateMonomersEnumeration();\n    }\n  }\n\n  public static getRenderedStructuresBbox(monomers?: BaseMonomer[]) {\n    let left;\n    let right;\n    let top;\n    let bottom;\n    const editor = CoreEditor.provideEditorInstance();\n\n    (monomers || editor.drawingEntitiesManager.monomers).forEach((monomer) => {\n      const monomerPosition = monomer.renderer?.scaledMonomerPosition;\n\n      assert(monomerPosition);\n\n      left = left ? Math.min(left, monomerPosition.x) : monomerPosition.x;\n      right = right ? Math.max(right, monomerPosition.x) : monomerPosition.x;\n      top = top ? Math.min(top, monomerPosition.y) : monomerPosition.y;\n      bottom = bottom ? Math.max(bottom, monomerPosition.y) : monomerPosition.y;\n    });\n    return {\n      left,\n      right,\n      top,\n      bottom,\n      width: right - left,\n      height: bottom - top,\n    };\n  }\n\n  public rerenderSideConnectionPolymerBonds() {\n    this.polymerBonds.forEach((polymerBondRenderer) => {\n      if (!polymerBondRenderer.polymerBond.isSideChainConnection) {\n        return;\n      }\n\n      polymerBondRenderer.remove();\n      polymerBondRenderer.show(undefined, true);\n    });\n  }\n}\n","import { BaseMode } from 'application/editor/modes/BaseMode';\nimport { LayoutMode } from 'application/editor/modes';\nimport ZoomTool from '../tools/Zoom';\nimport { CoreEditor } from '../Editor';\nimport { Coordinates } from '../internal';\nimport { Command } from 'domain/entities/Command';\nimport { ReinitializeModeOperation } from 'application/editor/operations/modes';\nimport { Vec2 } from 'domain/entities';\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\n\nexport class SnakeMode extends BaseMode {\n  constructor(previousMode?: LayoutMode) {\n    super('snake-layout-mode', previousMode);\n  }\n\n  public initialize(_needRemoveSelection: boolean, _isUndo = false) {\n    const command = super.initialize();\n    const editor = CoreEditor.provideEditorInstance();\n\n    // Prevent layout to be called if turn on snake mode by undo operation\n    // because during undo to flex mode if monomers were not moved\n    // we need just redraw canvas to apply new bond view style (straight instead of curved)\n    const modelChanges = _isUndo\n      ? new Command()\n      : editor.drawingEntitiesManager.applySnakeLayout(\n          editor.canvas.width.baseVal.value,\n          true,\n        );\n\n    editor.drawingEntitiesManager.applyFlexLayoutMode();\n    command.merge(modelChanges);\n    editor.renderersContainer.update(modelChanges);\n    command.setUndoOperationReverse();\n    editor.scrollToTopLeftCorner();\n\n    return command;\n  }\n\n  getNewNodePosition() {\n    const editor = CoreEditor.provideEditorInstance();\n\n    return Coordinates.modelToCanvas(\n      editor.drawingEntitiesManager.bottomRightMonomerPosition,\n    );\n  }\n\n  scrollForView() {\n    const zoom = ZoomTool.instance;\n    const drawnEntitiesBoundingBox =\n      RenderersManager.getRenderedStructuresBbox();\n\n    if (zoom.isFitToCanvasHeight(drawnEntitiesBoundingBox.height)) {\n      zoom.scrollTo(\n        new Vec2(drawnEntitiesBoundingBox.left, drawnEntitiesBoundingBox.top),\n        false,\n        2,\n      );\n    } else {\n      zoom.scrollTo(\n        new Vec2(\n          drawnEntitiesBoundingBox.left,\n          drawnEntitiesBoundingBox.bottom,\n        ),\n        true,\n        2,\n      );\n    }\n  }\n\n  applyAdditionalPasteOperations() {\n    const command = new Command();\n    command.addOperation(new ReinitializeModeOperation());\n\n    return command;\n  }\n\n  isPasteAllowedByMode(): boolean {\n    return true;\n  }\n\n  isPasteAvailable(): boolean {\n    return true;\n  }\n}\n","import { BaseMode } from 'application/editor/modes/BaseMode';\nimport { SequenceMode } from 'application/editor';\n\nexport type LayoutMode =\n  | 'flex-layout-mode'\n  | 'snake-layout-mode'\n  | 'sequence-layout-mode';\n\nexport const DEFAULT_LAYOUT_MODE: LayoutMode = 'sequence-layout-mode';\n\nexport function isSequenceMode(mode: BaseMode): mode is SequenceMode {\n  return mode instanceof SequenceMode;\n}\n","import { FlexMode } from './FlexMode';\nimport { SequenceMode } from './SequenceMode';\nimport { SnakeMode } from './SnakeMode';\n\nexport * from './FlexMode';\nexport * from './SequenceMode';\nexport * from './SnakeMode';\nexport * from './types';\n\nexport const modesMap = {\n  'flex-layout-mode': FlexMode,\n  'snake-layout-mode': SnakeMode,\n  'sequence-layout-mode': SequenceMode,\n};\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { Operation } from 'domain/entities/Operation';\nimport { CoreEditor } from 'application/editor/internal';\nimport { SequenceMode, SnakeMode } from 'application/editor/modes';\nimport {\n  SequencePointer,\n  SequenceRenderer,\n} from 'application/render/renderers/sequence/SequenceRenderer';\n\nexport class ReinitializeModeOperation implements Operation {\n  public priority = 2;\n  constructor() {}\n\n  public execute(_renderersManager: RenderersManager) {\n    const editor = CoreEditor.provideEditorInstance();\n    if (\n      editor.mode instanceof SequenceMode ||\n      editor.mode instanceof SnakeMode\n    ) {\n      editor.mode.initialize(false);\n    }\n  }\n\n  public invert(_renderersManager: RenderersManager) {\n    const editor = CoreEditor.provideEditorInstance();\n    if (\n      editor.mode instanceof SequenceMode ||\n      editor.mode instanceof SnakeMode\n    ) {\n      editor.mode.initialize(false);\n    }\n  }\n}\n\nexport class RestoreSequenceCaretPositionOperation implements Operation {\n  constructor(\n    private previousPosition: SequencePointer,\n    private nextPosition: SequencePointer,\n  ) {\n    this.execute();\n  }\n\n  public execute() {\n    SequenceRenderer.setCaretPosition(this.nextPosition);\n  }\n\n  public invert(_renderersManager: RenderersManager) {\n    SequenceRenderer.setCaretPosition(this.previousPosition);\n  }\n}\n","import assert from 'assert';\nimport { BaseSequenceRenderer } from 'application/render/renderers/sequence/BaseSequenceRenderer';\nimport { D3SvgElementSelection } from 'application/render/types';\nimport { MonomerToAtomBond, SubChainNode, Vec2 } from 'domain/entities';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\n\nexport class MonomerToAtomBondSequenceRenderer extends BaseSequenceRenderer {\n  constructor(\n    public monomerToAtomBond: MonomerToAtomBond,\n    private monomerNode: SubChainNode,\n  ) {\n    super(monomerToAtomBond);\n  }\n\n  private get monomer() {\n    return this.monomerNode.monomer;\n  }\n\n  private get atom() {\n    return this.monomerToAtomBond.atom;\n  }\n\n  public get scaledPosition() {\n    assert(this.monomer.renderer instanceof BaseSequenceItemRenderer);\n\n    const monomerY = this.monomer.renderer.scaledMonomerPositionForSequence.y;\n    const monomerX = this.monomer.renderer.scaledMonomerPositionForSequence.x;\n    const atomY = this.atom.renderer?.center.y;\n    const atomX = this.atom.renderer?.center.x;\n\n    return {\n      startPosition: new Vec2(monomerX, monomerY),\n      endPosition: new Vec2(atomX, atomY),\n    };\n  }\n\n  public get center() {\n    return Vec2.centre(\n      new Vec2(\n        this.scaledPosition.startPosition.x + 6,\n        this.mainLineY.mainLineY1,\n      ),\n      new Vec2(\n        this.scaledPosition.startPosition.x + 6,\n        this.mainLineY.mainLineY2,\n      ),\n    );\n  }\n\n  private get mainLineY() {\n    const mainLineY1 =\n      this.scaledPosition.startPosition.y -\n      (this.scaledPosition.startPosition.y > this.scaledPosition.endPosition.y\n        ? 15\n        : -3);\n    const mainLineY2 = this.scaledPosition.endPosition.y;\n\n    return { mainLineY1, mainLineY2 };\n  }\n\n  public show() {\n    this.rootElement = this.canvas\n      .insert('g', `:first-child`)\n      .data([this]) as never as D3SvgElementSelection<SVGGElement, void>;\n\n    this.rootElement\n      ?.append('path')\n      .attr('stroke', 'black')\n      .attr('fill', 'none')\n      .attr('d', this.getBondPath());\n  }\n\n  private getBondPath() {\n    return `M ${this.scaledPosition.startPosition.x + 6}, ${\n      this.mainLineY.mainLineY1\n    } L ${this.scaledPosition.endPosition.x}, ${this.mainLineY.mainLineY2}`;\n  }\n\n  public moveStart(): void {}\n\n  public moveEnd(): void {}\n\n  public get isSnake(): false {\n    return false;\n  }\n\n  public isMonomersOnSameHorizontalLine(): false {\n    return false;\n  }\n}\n","import { ChainsCollection } from 'domain/entities/monomer-chains/ChainsCollection';\nimport { SequenceNodeRendererFactory } from 'application/render/renderers/sequence/SequenceNodeRendererFactory';\nimport {\n  BaseMonomer,\n  MonomerToAtomBond,\n  Nucleotide,\n  Phosphate,\n  Sugar,\n  Vec2,\n} from 'domain/entities';\nimport { AttachmentPointName } from 'domain/types';\nimport { PolymerBondSequenceRenderer } from 'application/render/renderers/sequence/PolymerBondSequenceRenderer';\nimport {\n  getNextMonomerInChain,\n  getRnaBaseFromSugar,\n  getSugarFromRnaBase,\n  isRnaBaseOrAmbiguousRnaBase,\n} from 'domain/helpers/monomers';\nimport { Nucleoside } from 'domain/entities/Nucleoside';\nimport { BackBoneBondSequenceRenderer } from 'application/render/renderers/sequence/BackBoneBondSequenceRenderer';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { EmptySequenceItemRenderer } from 'application/render/renderers/sequence/EmptySequenceItemRenderer';\nimport { EmptySequenceNode } from 'domain/entities/EmptySequenceNode';\nimport { Chain } from 'domain/entities/monomer-chains/Chain';\nimport { EmptySubChain } from 'domain/entities/monomer-chains/EmptySubChain';\nimport { SubChainNode } from 'domain/entities/monomer-chains/types';\nimport { CoreEditor } from 'application/editor/internal';\nimport { RestoreSequenceCaretPositionOperation } from 'application/editor/operations/modes';\nimport assert from 'assert';\nimport { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\nimport { BaseMonomerRenderer } from 'application/render';\nimport { Command } from 'domain/entities/Command';\nimport { NewSequenceButton } from 'application/render/renderers/sequence/ui-controls/NewSequenceButton';\nimport { isNumber } from 'lodash';\nimport { MonomerToAtomBondSequenceRenderer } from 'application/render/renderers/sequence/MonomerToAtomBondSequenceRenderer';\n\nexport type SequencePointer = number;\nexport type NumberOfSymbolsInRow = number;\nexport type SequenceLastCaretPosition = number;\n\nexport type NodeSelection = {\n  node: SubChainNode;\n  nodeIndexOverall: number;\n  isNucleosideConnectedAndSelectedWithPhosphate?: boolean;\n  hasR1Connection?: boolean;\n};\n\nexport type NodesSelection = NodeSelection[][];\nconst NUMBER_OF_SYMBOLS_IN_ROW: NumberOfSymbolsInRow = 30;\n\nexport class SequenceRenderer {\n  public static caretPosition: SequencePointer = -1;\n  public static lastUserDefinedCaretPosition: SequenceLastCaretPosition = 0;\n  public static chainsCollection: ChainsCollection;\n  public static lastChainStartPosition: Vec2;\n  private static emptySequenceItemRenderers: EmptySequenceItemRenderer[] = [];\n  private static newSequenceButtons: NewSequenceButton[] = [];\n  public static show(\n    chainsCollection: ChainsCollection,\n    emptyChainIndex?: number,\n  ) {\n    SequenceRenderer.chainsCollection = chainsCollection;\n    this.removeEmptyNodes();\n    this.removeNewSequenceButtons();\n    this.showNodes(\n      SequenceRenderer.chainsCollection,\n      chainsCollection.length === 0 ? 0 : emptyChainIndex,\n    );\n    this.showBonds(SequenceRenderer.chainsCollection);\n  }\n\n  public static removeEmptyNodes() {\n    SequenceRenderer.emptySequenceItemRenderers.forEach(\n      (emptySequenceItemRenderer) => {\n        emptySequenceItemRenderer.remove();\n        SequenceRenderer.emptySequenceItemRenderers = [];\n      },\n    );\n  }\n\n  public static removeNewSequenceButtons() {\n    this.newSequenceButtons.forEach((newSequenceButton) =>\n      newSequenceButton.remove(),\n    );\n    this.newSequenceButtons = [];\n  }\n\n  private static showNodes(\n    chainsCollection: ChainsCollection,\n    chainBeforeEmptyChainIndex?: number,\n  ) {\n    const firstNode = chainsCollection.firstNode;\n    const emptyChainIndex = isNumber(chainBeforeEmptyChainIndex)\n      ? chainBeforeEmptyChainIndex + 1\n      : undefined;\n    let newSequenceEmptyNode;\n\n    let currentChainStartPosition = firstNode\n      ? BaseMonomerRenderer.getScaledMonomerPosition(\n          firstNode.monomer.position,\n          firstNode.monomer.renderer?.monomerSize,\n        )\n      : new Vec2(41.5, 41.5);\n\n    let currentMonomerIndexInChain = 0;\n    let currentMonomerIndexOverall = 0;\n    const isEditMode = CoreEditor.provideEditorInstance().isSequenceEditMode;\n    const isEditInRnaBuilderMode =\n      CoreEditor.provideEditorInstance().isSequenceEditInRNABuilderMode;\n\n    if (isEditMode) {\n      chainsCollection.chains.forEach((chain) => {\n        const emptySequenceNode = new EmptySequenceNode();\n        const emptySubChain = new EmptySubChain();\n        emptySubChain.add(emptySequenceNode);\n        chain.subChains.push(emptySubChain);\n      });\n    }\n\n    if (isNumber(emptyChainIndex)) {\n      const { emptyChain, emptySequenceNode } =\n        Chain.createChainWithEmptyNode();\n\n      SequenceRenderer.chainsCollection.chains.splice(\n        emptyChainIndex,\n        0,\n        emptyChain,\n      );\n\n      newSequenceEmptyNode = emptySequenceNode;\n    }\n\n    chainsCollection.chains.forEach((chain, chainIndex) => {\n      currentMonomerIndexInChain = 0;\n      chain.subChains.forEach((subChain) => {\n        subChain.nodes.forEach((node) => {\n          const renderer = SequenceNodeRendererFactory.fromNode(\n            node,\n            currentChainStartPosition,\n            currentMonomerIndexInChain,\n            currentMonomerIndexInChain + 1 + (isEditMode ? 1 : 0) ===\n              chain.subChains.reduce(\n                (prev, curr) => prev + curr.nodes.length,\n                0,\n              ),\n            subChain,\n            currentMonomerIndexOverall === SequenceRenderer.caretPosition,\n            node.monomer.renderer,\n          );\n          renderer.show();\n          node.monomers?.forEach((monomer) => monomer.setRenderer(renderer));\n          currentMonomerIndexInChain++;\n          currentMonomerIndexOverall++;\n\n          if (node instanceof EmptySequenceNode) {\n            SequenceRenderer.emptySequenceItemRenderers.push(renderer);\n            node.setRenderer(renderer);\n          }\n        });\n      });\n\n      currentChainStartPosition = SequenceRenderer.getNextChainPosition(\n        currentChainStartPosition,\n        chain,\n      );\n\n      if (!isEditInRnaBuilderMode) {\n        this.showNewSequenceButton(chainIndex);\n      }\n    });\n\n    if (newSequenceEmptyNode) {\n      SequenceRenderer.setCaretPositionByNode(newSequenceEmptyNode);\n    }\n\n    if (this.caretPosition > currentMonomerIndexOverall) {\n      this.setCaretPosition(currentMonomerIndexOverall);\n    }\n\n    this.lastChainStartPosition = currentChainStartPosition;\n  }\n\n  public static getNextChainPosition(\n    currentChainStartPosition: Vec2 = SequenceRenderer.lastChainStartPosition,\n    lastChain: Chain = SequenceRenderer.lastChain,\n  ) {\n    return new Vec2(\n      currentChainStartPosition.x,\n      currentChainStartPosition.y +\n        80 +\n        47 * Math.floor((lastChain.length - 1) / 30),\n    );\n  }\n\n  private static showBonds(chainsCollection: ChainsCollection) {\n    const handledMonomersToAttachmentPoints: Map<\n      BaseMonomer,\n      Set<AttachmentPointName>\n    > = new Map();\n\n    chainsCollection.chains.forEach((chain) => {\n      chain.subChains.forEach((subChain) => {\n        subChain.nodes.forEach((node) => {\n          if (node instanceof EmptySequenceNode) {\n            return;\n          }\n\n          if (!handledMonomersToAttachmentPoints.has(node.monomer)) {\n            handledMonomersToAttachmentPoints.set(node.monomer, new Set());\n          }\n          node.monomer.forEachBond((polymerBond, attachmentPointName) => {\n            const handledAttachmentPoints =\n              handledMonomersToAttachmentPoints.get(\n                node.monomer,\n              ) as Set<AttachmentPointName>;\n\n            if (polymerBond instanceof MonomerToAtomBond) {\n              const bondRenderer = new MonomerToAtomBondSequenceRenderer(\n                polymerBond,\n                node,\n              );\n\n              bondRenderer.show();\n              polymerBond.setRenderer(bondRenderer);\n              handledAttachmentPoints.add(attachmentPointName);\n\n              return;\n            }\n\n            if (!subChain.bonds.includes(polymerBond)) {\n              subChain.bonds.push(polymerBond);\n            }\n            if (!polymerBond.isSideChainConnection) {\n              polymerBond.setRenderer(\n                new BackBoneBondSequenceRenderer(polymerBond),\n              );\n              return;\n            }\n\n            if (handledAttachmentPoints.has(attachmentPointName)) {\n              return;\n            }\n\n            const anotherMonomer = polymerBond.getAnotherEntity(\n              node.monomer,\n            ) as BaseMonomer;\n\n            // Skip handling side chains for sugar(R3) + base(R1) connections.\n            if (\n              (node.monomer instanceof Sugar &&\n                getRnaBaseFromSugar(node.monomer) === anotherMonomer) ||\n              (anotherMonomer instanceof Sugar &&\n                getRnaBaseFromSugar(anotherMonomer) === node.monomer)\n            ) {\n              return;\n            }\n\n            let bondRenderer;\n\n            // If side connection comes from rna base then take connected sugar and draw side connection from it\n            // because for rna we display only one letter instead of three\n            const connectedSugarToBase = getSugarFromRnaBase(anotherMonomer);\n            if (\n              isRnaBaseOrAmbiguousRnaBase(anotherMonomer) &&\n              connectedSugarToBase\n            ) {\n              bondRenderer = new PolymerBondSequenceRenderer(\n                new PolymerBond(node.monomer, connectedSugarToBase),\n              );\n            } else {\n              bondRenderer = new PolymerBondSequenceRenderer(polymerBond);\n            }\n            bondRenderer.show();\n            polymerBond.setRenderer(bondRenderer);\n            handledAttachmentPoints.add(attachmentPointName);\n\n            if (!handledMonomersToAttachmentPoints.get(anotherMonomer)) {\n              handledMonomersToAttachmentPoints.set(anotherMonomer, new Set());\n            }\n            const anotherMonomerHandledAttachmentPoints =\n              handledMonomersToAttachmentPoints.get(\n                anotherMonomer,\n              ) as Set<AttachmentPointName>;\n\n            anotherMonomerHandledAttachmentPoints.add(\n              anotherMonomer?.getAttachmentPointByBond(\n                polymerBond,\n              ) as AttachmentPointName,\n            );\n          });\n        });\n      });\n      if (chain.isCyclic) {\n        const polymerBond = chain.firstMonomer?.attachmentPointsToBonds\n          .R1 as PolymerBond;\n        const bondRenderer = new PolymerBondSequenceRenderer(\n          polymerBond,\n          chain.firstNode,\n          chain.lastNonEmptyNode,\n        );\n        bondRenderer.show();\n        polymerBond.setRenderer(bondRenderer);\n      }\n    });\n  }\n\n  public static setCaretPosition(caretPosition: SequencePointer) {\n    const oldSubChainNode = SequenceRenderer.currentEdittingNode;\n\n    if (oldSubChainNode) {\n      assert(oldSubChainNode.renderer instanceof BaseSequenceItemRenderer);\n      oldSubChainNode.renderer.isEditingSymbol = false;\n      oldSubChainNode.renderer?.removeCaret();\n    }\n    SequenceRenderer.caretPosition = caretPosition;\n    const subChainNode = SequenceRenderer.currentEdittingNode;\n\n    if (!subChainNode) {\n      return;\n    }\n\n    assert(subChainNode.renderer instanceof BaseSequenceItemRenderer);\n    subChainNode.renderer.isEditingSymbol = true;\n    subChainNode.renderer?.showCaret();\n  }\n\n  public static forEachNode(\n    forEachCallback: (params: {\n      chainIndex: number;\n      subChainIndex: number;\n      nodeIndex: number;\n      nodeIndexOverall: number;\n      node: SubChainNode;\n      subChain: BaseSubChain;\n      chain: Chain;\n    }) => void,\n  ) {\n    this.chainsCollection.forEachNode(forEachCallback);\n  }\n\n  public static setCaretPositionBySequenceItemRenderer(\n    sequenceItemRenderer: BaseSequenceItemRenderer,\n  ) {\n    let newCaretPosition = -1;\n\n    SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n      if (node.renderer === sequenceItemRenderer) {\n        newCaretPosition = nodeIndexOverall;\n      }\n    });\n\n    this.setCaretPosition(newCaretPosition);\n  }\n\n  public static setCaretPositionByMonomer(monomer: BaseMonomer) {\n    let newCaretPosition = -1;\n\n    SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n      if (node.monomer === monomer) {\n        newCaretPosition = nodeIndexOverall;\n      }\n    });\n\n    this.setCaretPosition(newCaretPosition);\n  }\n\n  public static setCaretPositionNextToMonomer(monomer: BaseMonomer) {\n    let newCaretPosition = -1;\n\n    SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n      if (node.monomer === monomer) {\n        newCaretPosition = nodeIndexOverall;\n      }\n    });\n\n    if (newCaretPosition === -1) {\n      return;\n    }\n\n    this.setCaretPosition(newCaretPosition + 1);\n  }\n\n  public static setCaretPositionByNode(nodeToCompare: SubChainNode) {\n    let newCaretPosition = -1;\n\n    SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n      if (node === nodeToCompare) {\n        newCaretPosition = nodeIndexOverall;\n      }\n    });\n\n    this.setCaretPosition(newCaretPosition);\n  }\n\n  public static getMonomersByCaretPositionRange(\n    startCaretPosition: SequencePointer,\n    endCaretPosition,\n  ) {\n    const monomers: BaseMonomer[] = [];\n    SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n      if (\n        startCaretPosition <= nodeIndexOverall &&\n        nodeIndexOverall < (endCaretPosition || this.caretPosition)\n      ) {\n        monomers.push(node.monomer);\n      }\n    });\n    return monomers;\n  }\n\n  public static resetLastUserDefinedCaretPosition() {\n    this.lastUserDefinedCaretPosition = this.caretPosition;\n  }\n\n  private static get nodesGroupedByRows() {\n    const finalArray: Array<Array<SubChainNode>> = [];\n    let chainNodes: Array<SubChainNode> = [];\n    SequenceRenderer.forEachNode(({ node }) => {\n      chainNodes.push(node);\n      if (!(node instanceof EmptySequenceNode)) {\n        return;\n      }\n\n      if (chainNodes.length > NUMBER_OF_SYMBOLS_IN_ROW) {\n        while (chainNodes.length > 0) {\n          finalArray.push(chainNodes.splice(0, NUMBER_OF_SYMBOLS_IN_ROW));\n        }\n      } else {\n        finalArray.push([...chainNodes]);\n      }\n      chainNodes = [];\n    });\n\n    return finalArray;\n  }\n\n  private static getNodeIndexInRowByGlobalIndex(nodeIndexOverall: number) {\n    let restNodes = nodeIndexOverall;\n    let nodeIndexInRow;\n\n    this.nodesGroupedByRows.forEach((row) => {\n      if (nodeIndexInRow === undefined && restNodes - row.length < 0) {\n        nodeIndexInRow = restNodes;\n      }\n      restNodes -= row.length;\n    });\n\n    return nodeIndexInRow;\n  }\n\n  private static get currentChainRow() {\n    return (\n      this.nodesGroupedByRows.find((idexRow) =>\n        idexRow.includes(this.currentEdittingNode),\n      ) || []\n    );\n  }\n\n  private static get previousRowOfNodes() {\n    const index = this.nodesGroupedByRows.findIndex((row) =>\n      row.includes(this.currentEdittingNode),\n    );\n    return index > 0 ? this.nodesGroupedByRows[index - 1] : [];\n  }\n\n  private static get nextRowOfNodes() {\n    const currentIndex = this.nodesGroupedByRows.findIndex((row) =>\n      row.includes(this.currentEdittingNode),\n    );\n    return currentIndex !== -1 &&\n      currentIndex + 1 < this.nodesGroupedByRows.length\n      ? this.nodesGroupedByRows[currentIndex + 1]\n      : [];\n  }\n\n  public static moveCaretUp() {\n    const currentNodeIndexInRow = this.currentChainRow.indexOf(\n      this.currentEdittingNode,\n    );\n\n    let newCaretPosition = this.caretPosition;\n    const symbolsBeforeCaretInCurrentRow = currentNodeIndexInRow;\n    const lastUserDefinedCursorPositionInRow =\n      this.getNodeIndexInRowByGlobalIndex(this.lastUserDefinedCaretPosition);\n\n    newCaretPosition -= symbolsBeforeCaretInCurrentRow;\n    newCaretPosition -= Math.max(\n      this.previousRowOfNodes.length === 0 ? 0 : 1,\n      this.previousRowOfNodes.length - lastUserDefinedCursorPositionInRow,\n    );\n\n    SequenceRenderer.setCaretPosition(newCaretPosition);\n  }\n\n  public static moveCaretDown() {\n    const currentNodeIndexInRow = this.currentChainRow.indexOf(\n      this.currentEdittingNode,\n    );\n\n    let newCaretPosition = this.caretPosition;\n    const lastUserDefinedCursorPositionInRow =\n      this.getNodeIndexInRowByGlobalIndex(this.lastUserDefinedCaretPosition);\n    const symbolsAfterCaretInCurrentRow =\n      this.currentChainRow.length - currentNodeIndexInRow;\n\n    newCaretPosition += symbolsAfterCaretInCurrentRow;\n    newCaretPosition += Math.min(\n      lastUserDefinedCursorPositionInRow,\n      this.nextRowOfNodes.length - 1,\n    );\n\n    SequenceRenderer.setCaretPosition(newCaretPosition);\n  }\n\n  public static moveCaretForward() {\n    const operation = new RestoreSequenceCaretPositionOperation(\n      this.caretPosition,\n      this.nextCaretPosition || this.caretPosition,\n    );\n    SequenceRenderer.resetLastUserDefinedCaretPosition();\n\n    return operation;\n  }\n\n  public static moveCaretBack() {\n    const operation = new RestoreSequenceCaretPositionOperation(\n      this.caretPosition,\n      this.previousCaretPosition === undefined\n        ? this.caretPosition\n        : this.previousCaretPosition,\n    );\n    SequenceRenderer.resetLastUserDefinedCaretPosition();\n\n    return operation;\n  }\n\n  public static get currentChainIndex() {\n    let currentChainIndex = -1;\n\n    SequenceRenderer.forEachNode(({ nodeIndexOverall, chainIndex }) => {\n      if (nodeIndexOverall === this.caretPosition) {\n        currentChainIndex = chainIndex;\n      }\n    });\n\n    return currentChainIndex;\n  }\n\n  public static get lastNodeCaretPosition(): SequencePointer | undefined {\n    if (SequenceRenderer.chainsCollection.chains.length === 0) {\n      return undefined;\n    }\n\n    let lastNodeIndex = -1;\n\n    SequenceRenderer.forEachNode(() => {\n      lastNodeIndex++;\n    });\n\n    return lastNodeIndex === -1 ? undefined : lastNodeIndex;\n  }\n\n  public static getNodeByPointer(sequencePointer?: SequencePointer) {\n    if (sequencePointer === undefined) return;\n    let nodeToReturn;\n\n    SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n      if (nodeIndexOverall === sequencePointer) {\n        nodeToReturn = node;\n      }\n    });\n\n    return nodeToReturn;\n  }\n\n  public static get currentEdittingNode() {\n    return SequenceRenderer.getNodeByPointer(this.caretPosition);\n  }\n\n  public static get previousFromCurrentEdittingMonomer() {\n    return SequenceRenderer.getNodeByPointer(\n      SequenceRenderer.previousCaretPosition,\n    );\n  }\n\n  public static get currentChain() {\n    return SequenceRenderer.chainsCollection.chains[\n      SequenceRenderer.currentChainIndex\n    ];\n  }\n\n  public static get previousChain() {\n    return SequenceRenderer.chainsCollection.chains[\n      SequenceRenderer.currentChainIndex - 1\n    ];\n  }\n\n  public static get nextChain() {\n    return SequenceRenderer.chainsCollection.chains[\n      SequenceRenderer.currentChainIndex + 1\n    ];\n  }\n\n  public static getLastNonEmptyNode(chain: Chain) {\n    const subChainBeforeLast = chain.subChains[chain.subChains.length - 2];\n\n    return subChainBeforeLast.nodes[subChainBeforeLast.nodes.length - 1];\n  }\n\n  public static getLastNode(chain: Chain) {\n    const lastSubChain = chain.subChains[chain.subChains.length - 1];\n\n    return lastSubChain.nodes[lastSubChain.nodes.length - 1];\n  }\n\n  public static get nextNode() {\n    return SequenceRenderer.getNodeByPointer(\n      SequenceRenderer.nextCaretPosition,\n    );\n  }\n\n  public static get previousNode() {\n    return SequenceRenderer.getNodeByPointer(\n      SequenceRenderer.previousCaretPosition,\n    );\n  }\n\n  public static get nextNodeInSameChain(): SubChainNode | undefined {\n    if (SequenceRenderer.nextCaretPosition === SequenceRenderer.caretPosition) {\n      return;\n    }\n\n    return SequenceRenderer.getNodeByPointer(\n      SequenceRenderer.nextCaretPosition,\n    );\n  }\n\n  public static get previousNodeInSameChain() {\n    return SequenceRenderer.getPreviousNodeInSameChain(\n      SequenceRenderer.currentEdittingNode,\n    );\n  }\n\n  private static get nextCaretPosition(): SequencePointer | undefined {\n    const nodeOnNextPosition = SequenceRenderer.getNodeByPointer(\n      this.caretPosition + 1,\n    );\n\n    return nodeOnNextPosition ? this.caretPosition + 1 : undefined;\n  }\n\n  public static get previousCaretPosition() {\n    const nodeOnPreviousPosition = SequenceRenderer.getNodeByPointer(\n      this.caretPosition - 1,\n    );\n\n    return nodeOnPreviousPosition ? this.caretPosition - 1 : undefined;\n  }\n\n  public static get lastChain() {\n    return SequenceRenderer.chainsCollection.chains[\n      SequenceRenderer.chainsCollection.chains.length - 1\n    ];\n  }\n\n  public static startNewSequence(indexOfRowBefore?: number) {\n    const editor = CoreEditor.provideEditorInstance();\n    const oldNewSequenceChainIndex =\n      SequenceRenderer.chainsCollection.chains.findIndex((chain) => {\n        return chain.isNewSequenceChain;\n      });\n    const chainsCollection = ChainsCollection.fromMonomers([\n      ...editor.drawingEntitiesManager.monomers.values(),\n    ]);\n    chainsCollection.rearrange();\n\n    editor.drawingEntitiesManager.clearCanvas();\n\n    SequenceRenderer.show(\n      chainsCollection,\n      oldNewSequenceChainIndex !== -1 &&\n        isNumber(indexOfRowBefore) &&\n        indexOfRowBefore > oldNewSequenceChainIndex\n        ? indexOfRowBefore - 1\n        : indexOfRowBefore,\n    );\n  }\n\n  public static getPreviousNodeInSameChain(\n    nodeToCompare: SubChainNode,\n  ): SubChainNode | undefined {\n    let previousNode;\n    let previousNodeChainIndex = -1;\n    let nodeToReturn;\n\n    SequenceRenderer.forEachNode(({ node, chainIndex }) => {\n      if (nodeToCompare === node && chainIndex === previousNodeChainIndex) {\n        nodeToReturn = previousNode;\n      }\n      previousNodeChainIndex = chainIndex;\n      previousNode = node;\n    });\n\n    return nodeToReturn;\n  }\n\n  public static getNextNodeInSameChain(\n    nodeToCompare: SubChainNode,\n  ): SubChainNode {\n    let previousNode;\n    let previousNodeChainIndex = -1;\n    let nodeToReturn;\n\n    SequenceRenderer.forEachNode(({ node, chainIndex }) => {\n      if (\n        nodeToCompare === previousNode &&\n        chainIndex === previousNodeChainIndex\n      ) {\n        nodeToReturn = node;\n      }\n      previousNodeChainIndex = chainIndex;\n      previousNode = node;\n    });\n\n    return nodeToReturn;\n  }\n\n  public static getPreviousNode(nodeToCompare: SubChainNode) {\n    let previousNode;\n    let nodeToReturn;\n\n    SequenceRenderer.forEachNode(({ node }) => {\n      if (nodeToCompare === node) {\n        nodeToReturn = previousNode;\n      }\n      previousNode = node;\n    });\n\n    return nodeToReturn;\n  }\n\n  public static getNextNode(nodeToCompare: SubChainNode) {\n    let previousNode;\n    let nodeToReturn;\n\n    SequenceRenderer.forEachNode(({ node }) => {\n      if (previousNode === nodeToCompare) {\n        nodeToReturn = node;\n      }\n      previousNode = node;\n    });\n\n    return nodeToReturn;\n  }\n\n  public static shiftArrowSelectionInEditMode(event) {\n    const editor = CoreEditor.provideEditorInstance();\n    let modelChanges = new Command();\n    const arrowKey = event.code;\n    if (arrowKey === 'ArrowRight') {\n      modelChanges = SequenceRenderer.getShiftArrowChanges(\n        editor,\n        this.currentEdittingNode.monomer,\n      );\n      modelChanges.addOperation(this.moveCaretForward());\n    } else if (arrowKey === 'ArrowLeft') {\n      if (this.previousNodeInSameChain) {\n        modelChanges = SequenceRenderer.getShiftArrowChanges(\n          editor,\n          this.previousNodeInSameChain.monomer,\n        );\n      } else if (SequenceRenderer.previousChain) {\n        const previousChainLastEmptyNode = SequenceRenderer.getLastNode(\n          SequenceRenderer.previousChain,\n        );\n        ({ command: modelChanges } =\n          editor.drawingEntitiesManager.getAllSelectedEntitiesForSingleEntity(\n            previousChainLastEmptyNode.monomer,\n          ));\n      }\n      modelChanges.addOperation(this.moveCaretBack());\n    } else if (arrowKey === 'ArrowUp') {\n      const previousCaretPosition = SequenceRenderer.caretPosition;\n      SequenceRenderer.moveCaretUp();\n      const newCaretPosition = SequenceRenderer.caretPosition;\n\n      SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n        if (\n          nodeIndexOverall < previousCaretPosition &&\n          nodeIndexOverall >= newCaretPosition\n        ) {\n          modelChanges.merge(\n            SequenceRenderer.getShiftArrowChanges(editor, node.monomer),\n          );\n        }\n      });\n    } else if (arrowKey === 'ArrowDown') {\n      const previousCaretPosition = SequenceRenderer.caretPosition;\n      SequenceRenderer.moveCaretDown();\n      const newCaretPosition = SequenceRenderer.caretPosition;\n\n      SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n        if (\n          nodeIndexOverall >= previousCaretPosition &&\n          nodeIndexOverall < newCaretPosition\n        ) {\n          modelChanges.merge(\n            SequenceRenderer.getShiftArrowChanges(editor, node.monomer),\n          );\n        }\n      });\n    }\n    editor.renderersContainer.update(modelChanges);\n  }\n\n  private static getShiftArrowChanges(\n    editor: CoreEditor,\n    monomer: BaseMonomer,\n  ) {\n    let modelChanges;\n    const needTurnOffSelection = monomer.selected;\n    const result =\n      editor.drawingEntitiesManager.getAllSelectedEntitiesForSingleEntity(\n        monomer,\n      );\n    if (needTurnOffSelection) {\n      modelChanges =\n        editor.drawingEntitiesManager.addDrawingEntitiesToSelection(\n          result.drawingEntities,\n        );\n    } else {\n      modelChanges = result.command;\n    }\n    return modelChanges;\n  }\n\n  public static unselectEmptySequenceNodes() {\n    const command = new Command();\n    const editor = CoreEditor.provideEditorInstance();\n    SequenceRenderer.forEachNode(({ node }) => {\n      if (node instanceof EmptySequenceNode) {\n        command.merge(\n          editor.drawingEntitiesManager.unselectDrawingEntity(node.monomer),\n        );\n      }\n    });\n    return command;\n  }\n\n  public static get selections() {\n    const editor = CoreEditor.provideEditorInstance();\n    const selections: NodesSelection = [];\n    let lastSelectionRangeIndex = -1;\n    let previousNode;\n\n    SequenceRenderer.forEachNode(({ node, nodeIndexOverall }) => {\n      if (node.monomer.selected) {\n        const selection: Partial<NodeSelection> = {};\n\n        // Add field 'isNucleosideConnectedAndSelectedWithPhosphate' to the Nucleoside elements\n        if (node instanceof Nucleoside) {\n          const nextMonomer = getNextMonomerInChain(node.sugar);\n\n          selection.isNucleosideConnectedAndSelectedWithPhosphate =\n            nextMonomer instanceof Phosphate &&\n            nextMonomer.selected &&\n            editor.drawingEntitiesManager.isNucleosideAndPhosphateConnectedAsNucleotide(\n              node,\n              nextMonomer,\n            );\n        }\n\n        // Add field 'hasR1Connection' to the Nucleotide/Nucleoside elements\n        if (node instanceof Nucleotide || node instanceof Nucleoside) {\n          selection.hasR1Connection = !!node.sugar.attachmentPointsToBonds.R1;\n        }\n\n        if (!previousNode?.monomer.selected) {\n          lastSelectionRangeIndex = selections.push([]) - 1;\n        }\n        selections[lastSelectionRangeIndex].push({\n          ...selection,\n          node,\n          nodeIndexOverall,\n        });\n      }\n      previousNode = node;\n    });\n\n    return selections;\n  }\n\n  public static getRenderedStructuresBbox() {\n    let left;\n    let right;\n    let top;\n    let bottom;\n    SequenceRenderer.forEachNode(({ node }) => {\n      assert(node.monomer.renderer instanceof BaseSequenceItemRenderer);\n      const nodePosition =\n        node.monomer.renderer?.scaledMonomerPositionForSequence;\n      left = left ? Math.min(left, nodePosition.x) : nodePosition.x;\n      right = right ? Math.max(right, nodePosition.x) : nodePosition.x;\n      top = top ? Math.min(top, nodePosition.y) : nodePosition.y;\n      bottom = bottom ? Math.max(bottom, nodePosition.y) : nodePosition.y;\n    });\n    return {\n      left,\n      right,\n      top,\n      bottom,\n      width: right - left,\n      height: bottom - top,\n    };\n  }\n\n  public static getRendererByMonomer(monomer: BaseMonomer) {\n    let rendererToReturn;\n\n    SequenceRenderer.forEachNode(({ node }) => {\n      if (node.monomer === monomer) {\n        rendererToReturn = node.renderer;\n      }\n    });\n\n    return rendererToReturn;\n  }\n\n  public static showNewSequenceButton(indexOfRowBefore: number) {\n    const newSequenceButton = new NewSequenceButton(indexOfRowBefore);\n    newSequenceButton.show();\n    this.newSequenceButtons.push(newSequenceButton);\n  }\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { isMonomerSgroupWithAttachmentPoints } from '../../../../utilities/monomers';\n\nexport class ChemSequenceItemRenderer extends BaseSequenceItemRenderer {\n  get symbolToDisplay(): string {\n    return '@';\n  }\n\n  protected drawModification() {}\n\n  public show() {\n    if (\n      this.node.monomer.monomerItem.props.isMicromoleculeFragment &&\n      !isMonomerSgroupWithAttachmentPoints(this.node.monomer)\n    ) {\n      return;\n    }\n\n    super.show();\n  }\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\n\nexport class EmptySequenceItemRenderer extends BaseSequenceItemRenderer {\n  get symbolToDisplay(): string {\n    return '';\n  }\n\n  protected drawModification() {}\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport {\n  AmbiguousMonomer,\n  Nucleoside,\n  Nucleotide,\n  Vec2,\n} from 'domain/entities';\nimport { BaseSubChain } from 'domain/entities/monomer-chains/BaseSubChain';\n\nexport abstract class RNASequenceItemRenderer extends BaseSequenceItemRenderer {\n  constructor(\n    public node: Nucleoside | Nucleotide,\n    _firstNodeInChainPosition: Vec2,\n    _monomerIndexInChain: number,\n    _isLastMonomerInChain: boolean,\n    _subChain: BaseSubChain,\n    _isEditingSymbol: boolean,\n    public monomerSize: { width: number; height: number },\n    public scaledMonomerPosition: Vec2,\n  ) {\n    super(\n      node,\n      _firstNodeInChainPosition,\n      _monomerIndexInChain,\n      _isLastMonomerInChain,\n      _subChain,\n      _isEditingSymbol,\n      monomerSize,\n      scaledMonomerPosition,\n    );\n  }\n\n  get symbolToDisplay(): string {\n    return this.node.rnaBase instanceof AmbiguousMonomer\n      ? this.node.rnaBase.label\n      : this.node.rnaBase.monomerItem?.props.MonomerNaturalAnalogCode || '@';\n  }\n\n  protected drawCommonModification(node: Nucleoside | Nucleotide) {\n    if (node.rnaBase.isModification) {\n      this.backgroundElement?.attr(\n        'fill',\n        this.node.monomer.selected\n          ? this.isSequenceEditInRnaBuilderModeTurnedOn\n            ? '#41A8B2'\n            : '#3ACA6A'\n          : '#CAD3DD',\n      );\n    }\n\n    if (node.sugar.isModification) {\n      this.backgroundElement\n        ?.attr(\n          'stroke',\n          this.isSequenceEditInRnaBuilderModeTurnedOn ? '#24545A' : '#585858',\n        )\n        .attr('stroke-width', '1px');\n    }\n  }\n}\n","import { Nucleotide } from 'domain/entities';\nimport { D3SvgElementSelection } from 'application/render/types';\n\nimport { RNASequenceItemRenderer } from './RNASequenceItemRenderer';\n\nexport class NucleotideSequenceItemRenderer extends RNASequenceItemRenderer {\n  private phosphateModificationCircleElement?: D3SvgElementSelection<\n    SVGCircleElement,\n    void\n  >;\n\n  drawModification() {\n    const node = this.node as Nucleotide;\n\n    this.drawCommonModification(node);\n\n    if (this.phosphateModificationCircleElement) {\n      this.phosphateModificationCircleElement.remove();\n    }\n\n    if (node.phosphate?.isModification) {\n      this.phosphateModificationCircleElement = this.rootElement\n        ?.append('circle')\n        .attr('r', '3px')\n        .attr(\n          'fill',\n          this.isSequenceEditInRnaBuilderModeTurnedOn ? '#24545A' : '#585858',\n        )\n        .attr('cx', '10')\n        .attr('cy', '-16');\n    }\n  }\n}\n","import { Nucleoside, Phosphate } from 'domain/entities';\nimport { getNextMonomerInChain } from 'domain/helpers/monomers';\nimport { RNASequenceItemRenderer } from './RNASequenceItemRenderer';\nimport { D3SvgElementSelection } from 'application/render/types';\n\nexport class NucleosideSequenceItemRenderer extends RNASequenceItemRenderer {\n  private nucleosideCircleElement?: D3SvgElementSelection<\n    SVGCircleElement,\n    void\n  >;\n\n  protected drawModification() {\n    const node = this.node as Nucleoside;\n    const nextNode = getNextMonomerInChain(node.sugar);\n\n    this.drawCommonModification(node);\n\n    if (this.nucleosideCircleElement) {\n      this.nucleosideCircleElement.remove();\n    }\n\n    // show modification for not last Nucleoside\n    if (nextNode && !(nextNode instanceof Phosphate)) {\n      this.nucleosideCircleElement = this.rootElement\n        ?.append('circle')\n        .attr('r', '3px')\n        .attr(\n          'stroke',\n          this.isSequenceEditInRnaBuilderModeTurnedOn ? '#24545A' : '#585858',\n        )\n        .attr('stroke-width', '1px')\n        .attr('fill', 'none')\n        .attr('cx', '10')\n        .attr('cy', '-16');\n    }\n  }\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\n\nexport class PeptideSequenceItemRenderer extends BaseSequenceItemRenderer {\n  #NO_ANALOGUE_SYMBOL = '@';\n\n  get symbolToDisplay(): string {\n    return (\n      this.node.monomer.monomerItem.props.MonomerNaturalAnalogCode ||\n      this.#NO_ANALOGUE_SYMBOL\n    );\n  }\n\n  private drawLine() {\n    const TEXT_COLOR = '#333333';\n    this.rootElement\n      ?.append('path')\n      .attr('d', 'M 0,3 L 12,3')\n      .attr('stroke', TEXT_COLOR)\n      .attr('stroke-linecap', 'round')\n      .attr('stroke-width', '1.7px');\n  }\n\n  protected drawModification() {\n    const isAsparticAcidWithDifferentR3 =\n      this.node.monomer.monomerItem.label === 'D*';\n    if (isAsparticAcidWithDifferentR3) return;\n    if (this.symbolToDisplay === this.#NO_ANALOGUE_SYMBOL) return;\n    this.drawLine();\n  }\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\n\nexport class PhosphateSequenceItemRenderer extends BaseSequenceItemRenderer {\n  get symbolToDisplay(): string {\n    return 'p';\n  }\n\n  protected drawModification() {}\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\n\nexport class UnresolvedMonomerSequenceItemRenderer extends BaseSequenceItemRenderer {\n  get symbolToDisplay(): string {\n    return '?';\n  }\n\n  protected drawModification(): void {\n    return undefined;\n  }\n}\n","import { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { NO_NATURAL_ANALOGUE } from 'domain/constants/monomers';\n\nexport class UnsplitNucleotideSequenceItemRenderer extends BaseSequenceItemRenderer {\n  get symbolToDisplay(): string {\n    const naturalAnalogue =\n      this.node.monomer.monomerItem.props.MonomerNaturalAnalogCode;\n\n    return naturalAnalogue && naturalAnalogue !== NO_NATURAL_ANALOGUE\n      ? naturalAnalogue\n      : '@';\n  }\n\n  protected drawModification(): void {\n    return undefined;\n  }\n}\n","import {\n  AmbiguousMonomerRenderer,\n  BaseMonomerRenderer,\n  ChemRenderer,\n  PeptideRenderer,\n  PhosphateRenderer,\n  RNABaseRenderer,\n  SugarRenderer,\n  UnresolvedMonomerRenderer,\n  UnsplitNucleotideRenderer,\n} from 'application/render/renderers';\nimport { MonomerOrAmbiguousType } from 'domain/types';\nimport {\n  AmbiguousMonomer,\n  Chem,\n  Peptide,\n  Phosphate,\n  RNABase,\n  Sugar,\n  UnresolvedMonomer,\n  UnsplitNucleotide,\n} from 'domain/entities';\nimport { KetMonomerClass } from 'application/formatters/types/ket';\nimport { isAmbiguousMonomerLibraryItem } from 'domain/helpers/monomers';\nimport {\n  rnaDnaNaturalAnalogues,\n  unknownNaturalAnalogues,\n} from 'domain/constants/monomers';\n\ntype DerivedClass<T> = new (...args: unknown[]) => T;\nexport const MONOMER_CONST = {\n  AMINO_ACID: 'AminoAcid',\n  PEPTIDE: 'PEPTIDE',\n  CHEM: 'CHEM',\n  RNA: 'RNA',\n  DNA: 'DNA',\n  MODDNA: 'MODDNA',\n  R: 'R', // states for Ribose\n  P: 'P', // states for Phosphate\n  SUGAR: 'SUGAR',\n  BASE: 'BASE',\n  PHOSPHATE: 'PHOSPHATE',\n};\n\ntype Monomer =\n  | typeof Chem\n  | typeof Sugar\n  | typeof Peptide\n  | typeof RNABase\n  | typeof Phosphate;\n\nexport const monomerFactory = (\n  monomer: MonomerOrAmbiguousType,\n): [\n  Monomer: Monomer,\n  MonomerRenderer: DerivedClass<BaseMonomerRenderer>,\n  ketMonomerClass: KetMonomerClass,\n] => {\n  let Monomer;\n  let MonomerRenderer;\n  let ketMonomerClass: KetMonomerClass;\n\n  if (isAmbiguousMonomerLibraryItem(monomer)) {\n    Monomer = AmbiguousMonomer;\n    MonomerRenderer = AmbiguousMonomerRenderer;\n    ketMonomerClass = AmbiguousMonomer.getMonomerClass(monomer.monomers);\n  } else if (monomer.props.unresolved) {\n    Monomer = UnresolvedMonomer;\n    MonomerRenderer = UnresolvedMonomerRenderer;\n    ketMonomerClass = KetMonomerClass.CHEM;\n  } else if (\n    monomer.props.MonomerClass === KetMonomerClass.RNA ||\n    monomer.props.MonomerClass === KetMonomerClass.DNA\n  ) {\n    Monomer = UnsplitNucleotide;\n    MonomerRenderer = UnsplitNucleotideRenderer;\n    ketMonomerClass = KetMonomerClass.RNA;\n  } else if (\n    monomer.props.MonomerClass === KetMonomerClass.AminoAcid ||\n    monomer.props.MonomerType === MONOMER_CONST.PEPTIDE\n  ) {\n    Monomer = Peptide;\n    MonomerRenderer = PeptideRenderer;\n    ketMonomerClass = KetMonomerClass.AminoAcid;\n  } else if (\n    monomer.props.MonomerClass === KetMonomerClass.Sugar ||\n    (monomer.props.MonomerType === MONOMER_CONST.RNA &&\n      monomer.props.MonomerNaturalAnalogCode === MONOMER_CONST.R)\n  ) {\n    Monomer = Sugar;\n    MonomerRenderer = SugarRenderer;\n    ketMonomerClass = KetMonomerClass.Sugar;\n  } else if (\n    monomer.props.MonomerClass === KetMonomerClass.Phosphate ||\n    (monomer.props.MonomerType === MONOMER_CONST.RNA &&\n      monomer.props.MonomerNaturalAnalogCode === MONOMER_CONST.P)\n  ) {\n    Monomer = Phosphate;\n    MonomerRenderer = PhosphateRenderer;\n    ketMonomerClass = KetMonomerClass.Phosphate;\n  } else if (\n    monomer.props.MonomerClass === KetMonomerClass.Base ||\n    (monomer.props.MonomerType === MONOMER_CONST.RNA &&\n      [...rnaDnaNaturalAnalogues, ...unknownNaturalAnalogues].includes(\n        monomer.props.MonomerNaturalAnalogCode,\n      ))\n  ) {\n    Monomer = RNABase;\n    MonomerRenderer = RNABaseRenderer;\n    ketMonomerClass = KetMonomerClass.Base;\n  } else {\n    Monomer = Chem;\n    MonomerRenderer = ChemRenderer;\n    ketMonomerClass = KetMonomerClass.CHEM;\n  }\n\n  return [Monomer, MonomerRenderer, ketMonomerClass];\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseOperation } from '../operations/base';\nimport { ReStruct } from '../../render';\n//\n// Undo/redo actions\n//\nexport class Action {\n  operations: BaseOperation[];\n\n  constructor(operations = []) {\n    this.operations = operations;\n  }\n\n  addOp(operation: BaseOperation, restruct?: ReStruct): BaseOperation {\n    if (!restruct || !operation.isDummy(restruct)) {\n      this.operations.push(operation);\n    }\n\n    return operation;\n  }\n\n  mergeWith(action) {\n    this.operations = this.operations.concat(action.operations);\n    return this;\n  }\n\n  // Perform action and return inverted one\n  perform(restruct: ReStruct): Action {\n    const action = new Action();\n    const sortedOperations = [...this.operations].sort(\n      (a, b) => a.priority - b.priority,\n    );\n    sortedOperations.forEach((operation) => {\n      const invertedOperation = operation.perform(restruct);\n      action.addOp(invertedOperation);\n    });\n\n    return action;\n  }\n\n  isDummy(restruct?: ReStruct) {\n    return (\n      this.operations.find(\n        // TODO [RB] the condition is always true for op.* operations\n        (operation) => (restruct ? !operation.isDummy(restruct) : true),\n      ) === undefined\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n/**\n * @param restruct { ReStruct }\n * @param _events { Array<PipelineSubscription> }\n * @param bid { number }\n * @param template {{\n * \t\tmolecule: Struct,\n * \t\tbid: number\n *  }}\n * @param simpleFusing { Function }\n * @returns { Promise }\n */\nexport function fromAromaticTemplateOnBond(\n  restruct,\n  template,\n  bid,\n  _events,\n  simpleFusing,\n) {\n  const action = simpleFusing(restruct, template, bid);\n  return Promise.resolve(action);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Fragment, Vec2 } from 'domain/entities';\n\nconst SELECTION_DISTANCE_COEFFICIENT = 0.4;\nconst SELECTION_WITHIN_TEXT = 0;\n\nconst findMaps = {\n  atoms: findClosestAtom,\n  bonds: findClosestBond,\n  enhancedFlags: findClosestEnhancedFlag,\n  sgroupData: findClosestDataSGroupData,\n  sgroups: findClosestSGroup,\n  rxnArrows: findClosestRxnArrow,\n  rxnPluses: findClosestRxnPlus,\n  frags: findClosestFrag,\n  rgroups: findClosestRGroup,\n  simpleObjects: findClosestSimpleObject,\n  texts: findClosestText,\n};\n\nfunction findClosestText(restruct, cursorPosition) {\n  let minDist = null;\n  let ret = null;\n\n  restruct.texts.forEach((text, id) => {\n    const referencePoints = text.getReferencePoints(restruct);\n    const topX = referencePoints[0].x;\n    const topY = referencePoints[0].y;\n    const bottomX = referencePoints[2].x;\n    const bottomY = referencePoints[2].y;\n\n    const distances = [];\n\n    if (cursorPosition.x >= topX && cursorPosition.x <= bottomX) {\n      if (cursorPosition.y < topY) {\n        distances.push(topY - cursorPosition.y);\n      } else if (cursorPosition.y > bottomY) {\n        distances.push(cursorPosition.y - bottomY);\n      } else {\n        distances.push(cursorPosition.y - topY, bottomY - cursorPosition.y);\n      }\n    }\n\n    if (cursorPosition.x < topX && cursorPosition.y < topY) {\n      distances.push(Vec2.dist(new Vec2(topX, topY), cursorPosition));\n    }\n\n    if (cursorPosition.x > bottomX && cursorPosition.y > bottomY) {\n      distances.push(Vec2.dist(new Vec2(bottomX, bottomY), cursorPosition));\n    }\n\n    if (cursorPosition.x < topX && cursorPosition.y > bottomY) {\n      distances.push(Vec2.dist(new Vec2(topX, bottomY), cursorPosition));\n    }\n\n    if (cursorPosition.x > bottomX && cursorPosition.y < topY) {\n      distances.push(Vec2.dist(new Vec2(bottomX, topY), cursorPosition));\n    }\n\n    if (cursorPosition.y >= topY && cursorPosition.y <= bottomY) {\n      if (cursorPosition.x < topX) {\n        distances.push(topX - cursorPosition.x);\n      } else if (cursorPosition.x > bottomX) {\n        distances.push(cursorPosition.x - bottomX);\n      } else {\n        distances.push(SELECTION_WITHIN_TEXT);\n      }\n    }\n\n    const dist = Math.min(...distances);\n\n    if (dist < SELECTION_DISTANCE_COEFFICIENT && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestSimpleObject(restruct, pos) {\n  let minDist = null;\n  let refPoint = null;\n  let ret = null;\n\n  restruct.simpleObjects.forEach((simpleObject, id) => {\n    const dist = simpleObject.calcDistance(\n      pos,\n      restruct.render.options.microModeScale,\n    );\n\n    if (dist.minDist < 0.3 && (!ret || dist.minDist < minDist)) {\n      minDist = dist.minDist;\n      refPoint = dist.refPoint;\n\n      ret = { id, dist: minDist, ref: refPoint };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestAtom(restruct, pos, skip, minDist) {\n  let closestAtom = null;\n  const maxMinDist = SELECTION_DISTANCE_COEFFICIENT;\n  const skipId = skip && skip.map === 'atoms' ? skip.id : null;\n\n  minDist = minDist || maxMinDist;\n  minDist = Math.min(minDist, maxMinDist);\n\n  restruct.atoms.forEach((atom, aid) => {\n    if (aid === skipId) return;\n\n    const dist = Vec2.dist(pos, atom.a.pp);\n\n    if (dist < minDist) {\n      closestAtom = aid;\n      minDist = dist;\n    }\n  });\n\n  if (closestAtom !== null) {\n    return {\n      id: closestAtom,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestBond(restruct, pos, skip, minDist, scale) {\n  // eslint-disable-line max-params\n  let closestBond = null;\n  let closestBondCenter = null;\n  const maxMinDist = 0.8 * SELECTION_DISTANCE_COEFFICIENT;\n  const skipId = skip && skip.map === 'bonds' ? skip.id : null;\n\n  minDist = minDist || maxMinDist;\n  minDist = Math.min(minDist, maxMinDist);\n\n  let minCDist = minDist;\n\n  restruct.bonds.forEach((bond, bid) => {\n    if (bid === skipId) return;\n\n    const p1 = restruct.atoms.get(bond.b.begin).a.pp;\n    const p2 = restruct.atoms.get(bond.b.end).a.pp;\n\n    const mid = Vec2.lc2(p1, 0.5, p2, 0.5);\n    const cdist = Vec2.dist(pos, mid);\n\n    if (cdist < minCDist) {\n      minCDist = cdist;\n      closestBondCenter = bid;\n    }\n  });\n\n  restruct.bonds.forEach((bond, bid) => {\n    if (bid === skipId) return;\n\n    const hb = restruct.molecule.halfBonds.get(bond.b.hb1);\n    const dir = hb.dir;\n    const norm = hb.norm;\n\n    const p1 = restruct.atoms.get(bond.b.begin).a.pp;\n    const p2 = restruct.atoms.get(bond.b.end).a.pp;\n\n    const inStripe =\n      Vec2.dot(pos.sub(p1), dir) * Vec2.dot(pos.sub(p2), dir) < 0;\n\n    if (inStripe) {\n      const dist = Math.abs(Vec2.dot(pos.sub(p1), norm));\n\n      if (dist < minDist) {\n        closestBond = bid;\n        minDist = dist;\n      }\n    }\n  });\n\n  if (closestBondCenter !== null) {\n    return {\n      id: closestBondCenter,\n      dist: minCDist,\n    };\n  }\n\n  if (\n    closestBond !== null &&\n    minDist > SELECTION_DISTANCE_COEFFICIENT * scale\n  ) {\n    return {\n      id: closestBond,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestEnhancedFlag(restruct, pos, skip, _minDist, options) {\n  let minDist;\n  let ret = null;\n  restruct.enhancedFlags.forEach((item, id) => {\n    const fragment = restruct.molecule.frags.get(id);\n    if (!fragment || !fragment.enhancedStereoFlag || !options.showStereoFlags)\n      return;\n\n    const p = fragment.stereoFlagPosition\n      ? new Vec2(fragment.stereoFlagPosition.x, fragment.stereoFlagPosition.y)\n      : Fragment.getDefaultStereoFlagPosition(restruct.molecule, id);\n    if (!p || Math.abs(pos.x - p.x) >= 1.0) return;\n\n    const dist = Math.abs(pos.y - p.y);\n\n    if (dist < 0.3 && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestDataSGroupData(restruct, pos) {\n  let minDist = null;\n  let ret = null;\n\n  restruct.sgroupData.forEach((item, id) => {\n    if (item.sgroup.type !== 'DAT') throw new Error('Data group expected');\n\n    if (item.sgroup.data.fieldName !== 'MRV_IMPLICIT_H') {\n      const box = item.sgroup.dataArea;\n      const inBox =\n        box.p0.y < pos.y &&\n        box.p1.y > pos.y &&\n        box.p0.x < pos.x &&\n        box.p1.x > pos.x;\n      const xDist = Math.min(\n        Math.abs(box.p0.x - pos.x),\n        Math.abs(box.p1.x - pos.x),\n      );\n\n      if (inBox && (ret === null || xDist < minDist)) {\n        ret = { id, dist: xDist };\n        minDist = xDist;\n      }\n    }\n  });\n\n  return ret;\n}\n\nfunction findClosestFrag(restruct, pos, skip, minDist, scale) {\n  minDist = Math.min(\n    minDist || SELECTION_DISTANCE_COEFFICIENT,\n    SELECTION_DISTANCE_COEFFICIENT,\n  );\n\n  const struct = restruct.molecule;\n\n  const closestAtom = findClosestAtom(restruct, pos, skip, minDist);\n\n  if (closestAtom) {\n    return {\n      id: struct.atoms.get(closestAtom.id).fragment,\n      dist: closestAtom.dist,\n    };\n  }\n\n  const closestBond = findClosestBond(restruct, pos, skip, minDist, scale);\n\n  if (closestBond) {\n    const atomId = struct.bonds.get(closestBond.id).begin;\n    return {\n      id: struct.atoms.get(atomId).fragment,\n      dist: closestBond.dist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestRGroup(restruct, pos, skip, minDist) {\n  minDist = Math.min(\n    minDist || SELECTION_DISTANCE_COEFFICIENT,\n    SELECTION_DISTANCE_COEFFICIENT,\n  );\n\n  let ret = null;\n\n  restruct.rgroups.forEach((rgroup, rgid) => {\n    if (\n      rgid !== skip &&\n      rgroup.labelBox &&\n      rgroup.labelBox.contains(pos, 0.5)\n    ) {\n      const dist = Vec2.dist(rgroup.labelBox.centre(), pos);\n\n      if (!ret || dist < minDist) {\n        minDist = dist;\n        ret = { id: rgid, dist: minDist };\n      }\n    }\n  });\n\n  return ret;\n}\n\nfunction findClosestRxnArrow(restruct, pos) {\n  let minDist = null;\n  let refPoint = null;\n  let ret = null;\n\n  restruct.rxnArrows.forEach((rxnArrow, id) => {\n    const dist = rxnArrow.calcDistance(\n      pos,\n      restruct.render.options.microModeScale,\n    );\n\n    if (dist.minDist < 0.3 && (!ret || dist.minDist < minDist)) {\n      minDist = dist.minDist;\n      refPoint = dist.refPoint;\n\n      ret = { id, dist: minDist, ref: refPoint };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestRxnPlus(restruct, pos) {\n  let minDist = null;\n  let ret = null;\n\n  restruct.rxnPluses.forEach((plus, id) => {\n    const p = plus.item.pp;\n    const dist = Math.max(Math.abs(pos.x - p.x), Math.abs(pos.y - p.y));\n\n    if (dist < 0.3 && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n\n  return ret;\n}\n\nfunction findClosestSGroup(restruct, pos) {\n  let ret = null;\n  let minDist = SELECTION_DISTANCE_COEFFICIENT;\n\n  restruct.molecule.sgroups.forEach((sg, sgid) => {\n    if (sg.isContracted()) {\n      const { position } = sg.getContractedPosition(restruct.molecule);\n      const d = sg.bracketDirection;\n      const n = d.rotateSC(1, 0);\n      const pg = new Vec2(Vec2.dot(pos, d), Vec2.dot(pos, n));\n      const shift = new Vec2(0.625, 0.625);\n      const box = {\n        p0: Vec2.diff(position, shift),\n        p1: Vec2.sum(position, shift),\n      };\n\n      const inBox =\n        box.p0.y < pg.y &&\n        box.p1.y > pg.y &&\n        box.p0.x < pg.x &&\n        box.p1.x > pg.x;\n      const xDist = Math.min(\n        Math.abs(box.p0.x - pg.x),\n        Math.abs(box.p1.x - pg.x),\n      );\n\n      if (inBox && (ret === null || xDist < minDist)) {\n        ret = sgid;\n        minDist = xDist;\n      }\n    } else {\n      const d = sg.bracketDirection;\n      const n = d.rotateSC(1, 0);\n      const pg = new Vec2(Vec2.dot(pos, d), Vec2.dot(pos, n));\n\n      sg.areas.forEach((box) => {\n        const inBox =\n          box.p0.y < pg.y &&\n          box.p1.y > pg.y &&\n          box.p0.x < pg.x &&\n          box.p1.x > pg.x;\n        const xDist = Math.min(\n          Math.abs(box.p0.x - pg.x),\n          Math.abs(box.p1.x - pg.x),\n        );\n\n        if (inBox && (ret === null || xDist < minDist)) {\n          ret = sgid;\n          minDist = xDist;\n        }\n      });\n    }\n  });\n\n  if (ret !== null) {\n    return {\n      id: ret,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestItem(restruct, pos, maps, skip, scale) {\n  // eslint-disable-line max-params\n  maps = maps || Object.keys(findMaps);\n\n  return maps.reduce((res, mp) => {\n    const minDist = res ? res.dist : null;\n    const item = findMaps[mp](restruct, pos, skip, minDist, scale);\n\n    if (item !== null && (res === null || item.dist < res.dist)) {\n      const { id, dist, ...other } = item;\n      return {\n        map: mp,\n        id,\n        dist,\n        ...other,\n      };\n    }\n\n    return res;\n  }, null);\n}\n\n/**\n * @param restruct { ReStruct }\n * @param selected { object }\n * @param maps { Array<string> }\n * @param scale { number }\n * @return {{\n * \t\tatoms: Map<number, number>?\n * \t\tbonds: Map<number, number>?\n * }}\n */\nfunction findCloseMerge(restruct, selected, maps = ['atoms', 'bonds'], scale) {\n  const pos = {\n    atoms: new Map(), // aid -> position\n    bonds: new Map(), // bid -> position\n  };\n\n  const struct = restruct.molecule;\n\n  selected.atoms.forEach((aid) => {\n    pos.atoms.set(aid, struct.atoms.get(aid).pp);\n  });\n\n  selected.bonds.forEach((bid) => {\n    const bond = struct.bonds.get(bid);\n    pos.bonds.set(\n      bid,\n      Vec2.lc2(\n        struct.atoms.get(bond.begin).pp,\n        0.5,\n        struct.atoms.get(bond.end).pp,\n        0.5,\n      ),\n    );\n  });\n\n  const result = {};\n  maps.forEach((mp) => {\n    result[mp] = Array.from(pos[mp].keys()).reduce((res, srcId) => {\n      const skip = { map: mp, id: srcId };\n      const item = findMaps[mp](\n        restruct,\n        pos[mp].get(srcId),\n        skip,\n        null,\n        scale,\n      );\n\n      if (item && !selected[mp].includes(item.id)) res.set(srcId, item.id);\n\n      return res;\n    }, new Map());\n  });\n\n  return result;\n}\n\nexport default {\n  atom: findClosestAtom, // used in Actions\n  item: findClosestItem,\n  merge: findCloseMerge,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  AtomAttributes,\n  AtomQueryProperties,\n  Bond,\n  Struct,\n  Vec2,\n} from 'domain/entities';\n\nimport closest from '../shared/closest';\nimport { difference } from 'lodash';\nimport { ReStruct } from 'application/render';\nimport { selectionKeys } from '../shared/constants';\nimport { EditorSelection } from '../editor.types';\nexport type AtomType = 'single' | 'list' | 'pseudo';\nexport type AtomAttributeName = keyof AtomAttributes;\nexport type AtomQueryPropertiesName = keyof AtomQueryProperties;\nexport type AtomAllAttributeName = AtomAttributeName | AtomQueryPropertiesName;\nexport type AtomAllAttributeValue =\n  | AtomAttributes[AtomAttributeName]\n  | AtomQueryProperties[AtomQueryPropertiesName];\n\nexport function atomGetAttr(\n  restruct: ReStruct,\n  aid: number,\n  name: AtomAttributeName,\n) {\n  const atom = restruct.molecule.atoms.get(aid);\n  if (!atom) return null;\n  return atom[name];\n}\n\nexport function atomGetDegree(restruct, aid) {\n  return restruct.atoms.get(aid).a.neighbors.length;\n}\n\nexport function atomGetSGroups(restruct, atomId: number): number[] {\n  return Array.from(restruct.atoms.get(atomId).a.sgs);\n}\n\nexport function atomGetPos(restruct, id) {\n  return restruct.molecule.atoms.get(id).pp;\n}\n\nexport function findStereoAtoms(\n  struct: Struct,\n  atomIds: number[] | undefined,\n): number[] {\n  let monomerAtoms = 0;\n  if (struct.sgroups && struct.sgroups.size > 0) {\n    struct.sgroups.forEach((sgroup) => {\n      monomerAtoms += sgroup.atoms.length;\n    });\n  }\n\n  // no atoms, or only monomers present\n  if (!atomIds || struct.atoms.size === monomerAtoms) {\n    return [] as number[];\n  }\n\n  return atomIds.filter((atomId: number) => {\n    const atom = struct.atoms.get(atomId);\n    if (atom?.stereoLabel !== null) {\n      return true;\n    }\n    const connectedBonds = Atom.getConnectedBondIds(struct, atomId);\n    const connectedWithStereoBond = connectedBonds.some((bondId: number) => {\n      const bond = struct.bonds.get(bondId);\n      return bond?.begin === atomId && bond?.stereo;\n    });\n    return connectedWithStereoBond;\n  });\n}\n\nexport function structSelection(struct): EditorSelection {\n  return selectionKeys.reduce((res, key) => {\n    res[key] = Array.from(struct[key].keys());\n    return res;\n  }, {});\n}\n\nexport function formatSelection(selection): any {\n  return selectionKeys.reduce((res, key) => {\n    res[key] = selection[key] || [];\n\n    return res;\n  }, {});\n}\n\n// Get new atom id/label and pos for bond being added to existing atom\nexport function atomForNewBond(restruct, id, bond?) {\n  // eslint-disable-line max-statements\n  const neighbours: Array<{ id: number; v: Vec2 }> = [];\n  const pos = atomGetPos(restruct, id);\n  const atomNeighbours = restruct.molecule.atomGetNeighbors(id);\n\n  const prevBondId = restruct.molecule.findBondId(\n    id,\n    atomNeighbours.length ? atomNeighbours[0]?.aid : undefined,\n  );\n  const prevBond = restruct.molecule.bonds.get(prevBondId);\n  const prevBondType = prevBond ? prevBond.type : bond ? bond.type : 1;\n\n  restruct.molecule.atomGetNeighbors(id).forEach((nei) => {\n    const neiPos = atomGetPos(restruct, nei.aid);\n\n    if (Vec2.dist(pos, neiPos) < 0.1) return;\n\n    neighbours.push({ id: nei.aid, v: Vec2.diff(neiPos, pos) });\n  });\n\n  neighbours.sort(\n    (nei1, nei2) =>\n      Math.atan2(nei1.v.y, nei1.v.x) - Math.atan2(nei2.v.y, nei2.v.x),\n  );\n\n  let i;\n  let maxI = 0;\n  let angle;\n  let maxAngle = 0;\n\n  // TODO: impove layout: tree, ...\n\n  for (i = 0; i < neighbours.length; i++) {\n    angle = Vec2.angle(\n      neighbours[i].v,\n      neighbours[(i + 1) % neighbours.length].v,\n    );\n\n    if (angle < 0) angle += 2 * Math.PI;\n\n    if (angle > maxAngle) {\n      maxI = i;\n      maxAngle = angle;\n    }\n  }\n\n  let v = new Vec2(1, 0);\n\n  if (neighbours.length > 0) {\n    if (neighbours.length === 1) {\n      maxAngle = -((4 * Math.PI) / 3);\n\n      // zig-zag\n      const nei = restruct.molecule.atomGetNeighbors(id)[0];\n      if (atomGetDegree(restruct, nei.aid) > 1) {\n        const neiNeighbours: Array<any> = [];\n        const neiPos = atomGetPos(restruct, nei.aid);\n        const neiV = Vec2.diff(pos, neiPos);\n        const neiAngle = Math.atan2(neiV.y, neiV.x);\n\n        restruct.molecule.atomGetNeighbors(nei.aid).forEach((neiNei) => {\n          const neiNeiPos = atomGetPos(restruct, neiNei.aid);\n\n          if (neiNei.bid === nei.bid || Vec2.dist(neiPos, neiNeiPos) < 0.1) {\n            return;\n          }\n\n          const vDiff = Vec2.diff(neiNeiPos, neiPos);\n          let ang = Math.atan2(vDiff.y, vDiff.x) - neiAngle;\n\n          if (ang < 0) ang += 2 * Math.PI;\n\n          neiNeighbours.push(ang);\n        });\n        neiNeighbours.sort((nei1, nei2) => nei1 - nei2);\n\n        if (\n          neiNeighbours[0] <= Math.PI * 1.01 &&\n          neiNeighbours[neiNeighbours.length - 1] <= 1.01 * Math.PI\n        ) {\n          maxAngle *= -1;\n        }\n      }\n    }\n\n    const shallBe180DegToPrevBond =\n      (neighbours.length === 1 &&\n        prevBondType === bond?.type &&\n        (bond?.type === Bond.PATTERN.TYPE.DOUBLE ||\n          bond?.type === Bond.PATTERN.TYPE.TRIPLE)) ||\n      (prevBondType === Bond.PATTERN.TYPE.SINGLE &&\n        bond?.type === Bond.PATTERN.TYPE.TRIPLE) ||\n      (prevBondType === Bond.PATTERN.TYPE.TRIPLE &&\n        bond?.type === Bond.PATTERN.TYPE.SINGLE);\n\n    if (shallBe180DegToPrevBond) {\n      const prevBondAngle = restruct.molecule.bonds.get(prevBondId).angle;\n      if (prevBondAngle > -90 && prevBondAngle < 90 && neighbours[0].v.x > 0) {\n        angle = (prevBondAngle * Math.PI) / 180 + Math.PI;\n      } else {\n        angle = (prevBondAngle * Math.PI) / 180;\n      }\n    } else {\n      angle =\n        maxAngle / 2 + Math.atan2(neighbours[maxI].v.y, neighbours[maxI].v.x);\n    }\n\n    v = v.rotate(angle);\n  }\n\n  v.add_(pos); // eslint-disable-line no-underscore-dangle\n\n  let a: any = closest.atom(restruct, v, null, 0.1);\n  a = a === null ? { label: 'C' } : a.id;\n\n  return { atom: a, pos: v };\n}\n\nexport function getRelSGroupsBySelection(\n  struct: Struct,\n  selectedAtoms: number[],\n) {\n  return struct.sgroups.filter(\n    (_sgid, sg) =>\n      !sg.data.attached &&\n      !sg.data.absolute &&\n      difference(sg.atoms, selectedAtoms).length === 0,\n  );\n}\n\nexport function isAttachmentBond(\n  { begin, end }: Bond,\n  selection: EditorSelection,\n) {\n  if (!selection.atoms) {\n    return false;\n  }\n  const isBondStartsInSelectionAndEndsOutside =\n    selection.atoms.includes(begin) && !selection.atoms.includes(end);\n  const isBondEndsInSelectionAndStartsOutside =\n    selection.atoms.includes(end) && !selection.atoms.includes(begin);\n  return (\n    isBondStartsInSelectionAndEndsOutside ||\n    isBondEndsInSelectionAndStartsOutside\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RGroupAttr, RGroupFragment, UpdateIfThen } from '../operations';\n\nimport { Action } from './action';\n\nexport function fromRGroupAttrs(restruct, id, attrs) {\n  const action = new Action();\n\n  Object.keys(attrs).forEach((key) => {\n    action.addOp(new RGroupAttr(id, key, attrs[key]));\n  });\n\n  return action.perform(restruct);\n}\n\nexport function fromRGroupFragment(restruct, rgidNew, frid) {\n  const action = new Action();\n  action.addOp(new RGroupFragment(rgidNew, frid));\n\n  return action.perform(restruct);\n}\n\nexport function fromUpdateIfThen(\n  restruct,\n  rgidNew,\n  rgidOld,\n  skipRgids: Array<number> = [],\n) {\n  const action = new Action();\n  if (!restruct.molecule.rgroups.get(rgidOld)) {\n    action.addOp(new UpdateIfThen(rgidNew, rgidOld, skipRgids));\n  }\n\n  return action.perform(restruct);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AtomAttr,\n  AtomMove,\n  SGroupAddToHierarchy,\n  SGroupAtomAdd,\n  SGroupAtomRemove,\n  SGroupAttr,\n  SGroupCreate,\n  SGroupDataMove,\n  SGroupDelete,\n  SGroupRemoveFromHierarchy,\n} from '../operations';\nimport { Pile, SGroup, SGroupAttachmentPoint, Vec2 } from 'domain/entities';\nimport { atomGetAttr, atomGetDegree, atomGetSGroups } from './utils';\n\nimport { Action } from './action';\nimport { SgContexts } from '..';\nimport { uniq } from 'lodash/fp';\nimport { fromAtomsAttrs } from './atom';\nimport {\n  SGroupAttachmentPointAdd,\n  SGroupAttachmentPointRemove,\n} from 'application/editor/operations/sgroup/sgroupAttachmentPoints';\nimport Restruct from 'application/render/restruct/restruct';\nimport assert from 'assert';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\nimport { isNumber } from 'lodash';\n\nexport function fromSeveralSgroupAddition(\n  restruct: Restruct,\n  type,\n  atoms,\n  attrs,\n) {\n  const attachmentPoints = [];\n\n  const descriptors = attrs.fieldValue;\n  if (typeof descriptors === 'string' || type !== 'DAT') {\n    return fromSgroupAddition(\n      restruct,\n      type,\n      atoms,\n      attrs,\n      restruct.molecule.sgroups.newId(),\n      attachmentPoints,\n    );\n  }\n\n  return descriptors.reduce((acc, fValue) => {\n    const localAttrs = Object.assign({}, attrs);\n    localAttrs.fieldValue = fValue;\n\n    return acc.mergeWith(\n      fromSgroupAddition(\n        restruct,\n        type,\n        atoms,\n        localAttrs,\n        restruct.molecule.sgroups.newId(),\n        attachmentPoints,\n      ),\n    );\n  }, new Action());\n}\n\nexport function fromSgroupAttrs(restruct, id, attrs) {\n  const action = new Action();\n\n  Object.keys(attrs).forEach((key) => {\n    action.addOp(new SGroupAttr(id, key, attrs[key]));\n  });\n\n  return action.perform(restruct);\n}\n\nexport function setExpandSGroup(\n  restruct: Restruct,\n  sgid: number,\n  attrs: { expanded: boolean },\n) {\n  const action = new Action();\n\n  Object.keys(attrs).forEach((key) => {\n    action.addOp(new SGroupAttr(sgid, key, attrs[key]));\n  });\n\n  const sgroup = restruct.molecule.sgroups.get(sgid);\n  assert(sgroup != null);\n  const atoms = SGroup.getAtoms(restruct, sgroup);\n\n  atoms.forEach((aid) => {\n    action.mergeWith(\n      fromAtomsAttrs(restruct, aid, restruct.atoms.get(aid)?.a, false),\n    );\n  });\n\n  return action.perform(restruct);\n}\n\nexport function setExpandMonomerSGroup(\n  restruct: Restruct,\n  sgid: number,\n  attrs: { expanded: boolean },\n) {\n  const action = new Action();\n\n  Object.keys(attrs).forEach((key) => {\n    action.addOp(new SGroupAttr(sgid, key, attrs[key]));\n  });\n\n  const sgroup = restruct.molecule.sgroups.get(sgid);\n  assert(sgroup != null);\n\n  const sGroupAtoms = SGroup.getAtoms(restruct, sgroup);\n  const attachmentPoints = sgroup.getAttachmentPoints();\n  const bondsToOutside = restruct.molecule.bonds.filter((_, bond) => {\n    return (\n      (sGroupAtoms.includes(bond.begin) && !sGroupAtoms.includes(bond.end)) ||\n      (sGroupAtoms.includes(bond.end) && !sGroupAtoms.includes(bond.begin))\n    );\n  });\n\n  const attachmentAtomsFromOutside: number[] = [];\n\n  for (const bond of bondsToOutside.values()) {\n    if (\n      attachmentPoints.some(\n        (attachmentPoint) => attachmentPoint.atomId === bond.begin,\n      )\n    ) {\n      attachmentAtomsFromOutside.push(bond.end);\n    } else {\n      attachmentAtomsFromOutside.push(bond.begin);\n    }\n  }\n\n  const sGroupBBox = SGroup.getObjBBox(sGroupAtoms, restruct.molecule);\n  const sGroupWidth = sGroupBBox.p1.x - sGroupBBox.p0.x;\n  const sGroupHeight = sGroupBBox.p1.y - sGroupBBox.p0.y;\n\n  const visitedAtoms = new Set<number>();\n  const visitedSGroups = new Set<number>();\n\n  const atomsToMove = new Map<number, number[]>();\n  const sGroupsToMove = new Map<number, number[]>();\n\n  const prepareSubStructure = (atomId: number, subStructureKey: number) => {\n    if (visitedAtoms.has(atomId)) {\n      return;\n    }\n    visitedAtoms.add(atomId);\n\n    const atomSGroups = restruct.atoms.get(atomId)?.a.sgs;\n    const atomInSGroup = atomSGroups?.size && atomSGroups.size > 0;\n    if (atomInSGroup) {\n      for (const anotherSGroupId of atomSGroups.values()) {\n        if (visitedSGroups.has(anotherSGroupId) || anotherSGroupId === sgid) {\n          continue;\n        }\n        visitedSGroups.add(anotherSGroupId);\n\n        const anotherSGroup = restruct.molecule.sgroups.get(anotherSGroupId);\n        if (!anotherSGroup) {\n          continue;\n        }\n\n        const previousArray = sGroupsToMove.get(subStructureKey) ?? [];\n        sGroupsToMove.set(\n          subStructureKey,\n          previousArray.concat(anotherSGroupId),\n        );\n      }\n    }\n\n    const atom = restruct.atoms.get(atomId);\n    if (atom) {\n      const previousArray = atomsToMove.get(subStructureKey) ?? [];\n      atomsToMove.set(subStructureKey, previousArray.concat(atomId));\n\n      atom.a.neighbors.forEach((halfBondId) => {\n        const neighborAtomId =\n          restruct.molecule?.halfBonds?.get(halfBondId)?.end;\n        if (\n          neighborAtomId === undefined ||\n          sGroupAtoms.includes(neighborAtomId)\n        ) {\n          return;\n        }\n\n        prepareSubStructure(neighborAtomId, subStructureKey);\n      });\n    }\n  };\n\n  attachmentAtomsFromOutside.forEach((atomId, index) => {\n    prepareSubStructure(atomId, index);\n  });\n\n  atomsToMove.forEach((atomIds, key) => {\n    const sGroups = sGroupsToMove.get(key) ?? [];\n    const subStructBBox = SGroup.getObjBBox(atomIds, restruct.molecule);\n    const subStructCenter = new Vec2(\n      subStructBBox.p0.x + subStructBBox.p1.x / 2,\n      subStructBBox.p0.y + subStructBBox.p1.y / 2,\n    );\n    const sGroupCenter = new Vec2(\n      sGroupBBox.p0.x + sGroupBBox.p1.x / 2,\n      sGroupBBox.p0.y + sGroupBBox.p1.y / 2,\n    );\n    const direction = subStructCenter.sub(sGroupCenter).normalized();\n    const moveVector = new Vec2(\n      (direction.x * sGroupHeight) / 4,\n      (direction.y * sGroupWidth) / 4,\n    );\n\n    const finalMoveVector = attrs.expanded ? moveVector : moveVector.negated();\n\n    atomIds.forEach((atomId) => {\n      action.addOp(new AtomMove(atomId, finalMoveVector));\n    });\n    sGroups.forEach((sGroupId) => {\n      action.addOp(new SGroupDataMove(sGroupId, finalMoveVector));\n    });\n  });\n\n  sGroupAtoms.forEach((aid) => {\n    action.mergeWith(\n      fromAtomsAttrs(restruct, aid, restruct.atoms.get(aid)?.a, false),\n    );\n  });\n\n  return action.perform(restruct);\n}\n\n// todo delete after supporting expand - collapse for 2 attachment points\nexport function expandSGroupWithMultipleAttachmentPoint(restruct) {\n  const action = new Action();\n\n  const struct = restruct.molecule;\n\n  struct.sgroups.forEach((sgroup: SGroup) => {\n    if (\n      sgroup.isNotContractible(struct) &&\n      !(sgroup instanceof MonomerMicromolecule)\n    ) {\n      action.mergeWith(\n        setExpandSGroup(restruct, sgroup.id, {\n          expanded: true,\n        }),\n      );\n    }\n  });\n\n  return action;\n}\n\nexport function sGroupAttributeAction(id, attrs) {\n  const action = new Action();\n\n  Object.keys(attrs).forEach((key) => {\n    action.addOp(new SGroupAttr(id, key, attrs[key]));\n  });\n\n  return action;\n}\n\nexport function fromSgroupDeletion(restruct, id, needPerform = true) {\n  let action = new Action();\n  const struct = restruct.molecule;\n\n  const sG = restruct.sgroups.get(id).item;\n\n  if (sG.type === 'SRU') {\n    struct.sGroupsRecalcCrossBonds();\n\n    sG.neiAtoms.forEach((aid) => {\n      if (atomGetAttr(restruct, aid, 'label') === '*') {\n        action.addOp(new AtomAttr(aid, 'label', 'C'));\n      }\n    });\n  }\n\n  const sg = struct.sgroups.get(id) as SGroup;\n  const atoms = SGroup.getAtoms(struct, sg);\n  const attrs = sg.getAttrs();\n\n  action.addOp(new SGroupRemoveFromHierarchy(id));\n\n  atoms.forEach((atom) => {\n    action.addOp(new SGroupAtomRemove(id, atom));\n  });\n\n  sg.getAttachmentPoints().forEach((attachmentPoint) => {\n    action.addOp(new SGroupAttachmentPointRemove(id, attachmentPoint));\n  });\n\n  action.addOp(new SGroupDelete(id));\n\n  action.mergeWith(sGroupAttributeAction(id, attrs));\n\n  if (needPerform) {\n    action = action.perform(restruct);\n  }\n\n  return action;\n}\n\nexport function fromSgroupAddition(\n  restruct,\n  type,\n  atoms,\n  attrs,\n  sgid,\n  attachmentPoints,\n  pp?,\n  expanded?,\n  name?,\n  oldSgroup?,\n) {\n  // eslint-disable-line\n  let action = new Action();\n\n  // TODO: shoud the id be generated when OpSGroupCreate is executed?\n  //      if yes, how to pass it to the following operations?\n  sgid = sgid - 0 === sgid ? sgid : restruct.molecule.sgroups.newId();\n\n  if (type === 'SUP') {\n    action.addOp(new SGroupCreate(sgid, type, pp, expanded, name, oldSgroup));\n  } else {\n    action.addOp(new SGroupCreate(sgid, type, pp));\n  }\n\n  atoms.forEach((atom) => {\n    action.addOp(new SGroupAtomAdd(sgid, atom));\n  });\n\n  if (type === 'SUP') {\n    attachmentPoints.forEach((attachmentPoint) => {\n      action.addOp(new SGroupAttachmentPointAdd(sgid, attachmentPoint));\n    });\n  }\n\n  action.addOp(\n    type !== 'DAT'\n      ? new SGroupAddToHierarchy(sgid)\n      : new SGroupAddToHierarchy(sgid, -1, []),\n  );\n\n  action = action.perform(restruct);\n\n  if (type === 'SRU') {\n    restruct.molecule.sGroupsRecalcCrossBonds();\n    let asteriskAction = new Action();\n\n    restruct.sgroups.get(sgid).item.neiAtoms.forEach((aid) => {\n      const plainCarbon = restruct.atoms.get(aid).a.isPlainCarbon();\n\n      if (atomGetDegree(restruct, aid) === 1 && plainCarbon) {\n        asteriskAction.addOp(new AtomAttr(aid, 'label', '*'));\n      }\n    });\n\n    asteriskAction = asteriskAction.perform(restruct);\n    asteriskAction.mergeWith(action);\n    action = asteriskAction;\n  }\n\n  return fromSgroupAttrs(restruct, sgid, attrs).mergeWith(action);\n}\n\nexport function fromSgroupAction(\n  context,\n  restruct,\n  newSg,\n  sourceAtoms,\n  selection,\n) {\n  if (context === SgContexts.Bond) {\n    return fromBondAction(restruct, newSg, sourceAtoms, selection);\n  }\n\n  const atomsFromBonds = getAtomsFromBonds(restruct.molecule, selection.bonds);\n  const newSourceAtoms = uniq(sourceAtoms.concat(atomsFromBonds));\n\n  if (context === SgContexts.Fragment) {\n    return fromGroupAction(\n      restruct,\n      newSg,\n      newSourceAtoms,\n      Array.from(restruct.atoms.keys()),\n    );\n  }\n\n  if (context === SgContexts.Multifragment) {\n    return fromMultiFragmentAction(restruct, newSg, newSourceAtoms);\n  }\n\n  if (context === SgContexts.Group) {\n    return fromGroupAction(restruct, newSg, newSourceAtoms, newSourceAtoms);\n  }\n\n  if (context === SgContexts.Atom) {\n    return fromAtomAction(restruct, newSg, newSourceAtoms);\n  }\n\n  if (SGroup.isQuerySGroup(newSg)) {\n    return fromQueryComponentSGroupAction(\n      restruct,\n      newSg,\n      newSourceAtoms as number[],\n      Array.from(restruct.atoms.keys()),\n    );\n  }\n\n  return {\n    action: fromSeveralSgroupAddition(\n      restruct,\n      newSg.type,\n      newSourceAtoms,\n      newSg.attrs,\n    ),\n  };\n}\n\nfunction fromAtomAction(restruct, newSg, sourceAtoms) {\n  return sourceAtoms.reduce(\n    (acc, atom) => {\n      acc.action = acc.action.mergeWith(\n        fromSeveralSgroupAddition(restruct, newSg.type, [atom], newSg.attrs),\n      );\n      return acc;\n    },\n    {\n      action: new Action(),\n      selection: {\n        atoms: sourceAtoms,\n        bonds: [],\n      },\n    },\n  );\n}\n\nfunction fromQueryComponentSGroupAction(\n  restruct: Restruct,\n  newSg: {\n    type: string;\n    attrs: object;\n  },\n  sourceAtoms: number[],\n  targetAtoms: number[],\n) {\n  const selection: {\n    atoms: number[];\n    bonds: number[];\n  } = {\n    atoms: [],\n    bonds: [],\n  };\n\n  const allFragments = new Pile(\n    sourceAtoms.map((aid) => restruct.atoms.get(aid)?.a.fragment),\n  );\n\n  Array.from(allFragments).forEach((fragId) => {\n    const atoms = targetAtoms.reduce((res: number[], aid: number) => {\n      const atom = restruct.atoms.get(aid)?.a;\n      if (fragId === atom?.fragment) res.push(aid);\n\n      return res;\n    }, []);\n\n    const bonds = getAtomsBondIds(restruct.molecule, atoms) as number[];\n\n    selection.atoms = selection.atoms.concat(atoms);\n    selection.bonds = selection.bonds.concat(bonds);\n  });\n\n  return {\n    action: fromSeveralSgroupAddition(\n      restruct,\n      newSg.type,\n      selection.atoms,\n      newSg.attrs,\n    ),\n    selection,\n  };\n}\n\nfunction fromGroupAction(restruct, newSg, sourceAtoms, targetAtoms) {\n  const allFragments = new Pile(\n    sourceAtoms.map((aid) => restruct.atoms.get(aid).a.fragment),\n  );\n\n  return Array.from(allFragments).reduce(\n    (acc, fragId) => {\n      const atoms = targetAtoms.reduce((res, aid) => {\n        const atom = restruct.atoms.get(aid).a;\n        if (fragId === atom.fragment) res.push(aid);\n\n        return res;\n      }, []);\n\n      const bonds = getAtomsBondIds(restruct.molecule, atoms);\n\n      acc.action = acc.action.mergeWith(\n        fromSeveralSgroupAddition(restruct, newSg.type, atoms, newSg.attrs),\n      );\n\n      acc.selection.atoms = acc.selection.atoms.concat(atoms);\n      acc.selection.bonds = acc.selection.bonds.concat(bonds);\n\n      return acc;\n    },\n    {\n      action: new Action(),\n      selection: {\n        atoms: [],\n        bonds: [],\n      },\n    },\n  );\n}\n\nfunction fromBondAction(restruct, newSg, sourceAtoms, currSelection) {\n  const struct = restruct.molecule;\n  let bonds = getAtomsBondIds(struct, sourceAtoms);\n\n  if (currSelection.bonds) bonds = uniq(bonds.concat(currSelection.bonds));\n\n  return bonds.reduce(\n    (acc: any, bondid) => {\n      const bond = struct.bonds.get(bondid);\n\n      acc.action = acc.action.mergeWith(\n        fromSeveralSgroupAddition(\n          restruct,\n          newSg.type,\n          [bond.begin, bond.end],\n          newSg.attrs,\n        ),\n      );\n\n      acc.selection.bonds.push(bondid);\n\n      return acc;\n    },\n    {\n      action: new Action(),\n      selection: {\n        atoms: sourceAtoms,\n        bonds: [],\n      },\n    },\n  );\n}\n\nfunction fromMultiFragmentAction(restruct, newSg, atoms) {\n  const bonds = getAtomsBondIds(restruct.molecule, atoms);\n  return {\n    action: fromSeveralSgroupAddition(restruct, newSg.type, atoms, newSg.attrs),\n    selection: {\n      atoms,\n      bonds,\n    },\n  };\n}\n\n// Add action operation to remove atom from s-group if needed\nexport function removeAtomFromSgroupIfNeeded(action, restruct, id) {\n  const sgroups = atomGetSGroups(restruct, id);\n\n  if (sgroups.length > 0) {\n    sgroups.forEach((sid) => {\n      action.addOp(new SGroupAtomRemove(sid, id));\n    });\n\n    return true;\n  }\n\n  return false;\n}\n\n// Add action operations to remove whole s-group if needed\nexport function removeSgroupIfNeeded(action, restruct: Restruct, atoms) {\n  const struct = restruct.molecule;\n  const sgCounts = new Map();\n\n  atoms.forEach((atomId) => {\n    const sgroups = atomGetSGroups(restruct, atomId);\n\n    sgroups.forEach((sid) => {\n      sgCounts.set(sid, sgCounts.has(sid) ? sgCounts.get(sid) + 1 : 1);\n    });\n  });\n\n  sgCounts.forEach((count, sid) => {\n    const sGroup = restruct.sgroups.get(sid)?.item;\n    const sgAtoms = SGroup.getAtoms(restruct.molecule, sGroup);\n\n    if (sgAtoms.length === count && !sGroup?.isSuperatomWithoutLabel) {\n      // delete whole s-group\n      const sgroup = struct.sgroups.get(sid) as SGroup;\n      action.mergeWith(sGroupAttributeAction(sid, sgroup.getAttrs()));\n      action.addOp(new SGroupRemoveFromHierarchy(sid));\n      sgroup.getAttachmentPoints().forEach((attachmentPoint) => {\n        action.addOp(new SGroupAttachmentPointRemove(sid, attachmentPoint));\n      });\n      action.addOp(new SGroupDelete(sid));\n    }\n\n    if (\n      sGroup?.isSuperatomWithoutLabel &&\n      sGroup.getAttachmentPoints().length === 0\n    ) {\n      action.mergeWith(fromSgroupDeletion(restruct, sid, false));\n    }\n  });\n}\n\nfunction getAtomsBondIds(struct, atoms) {\n  const atomSet = new Pile(atoms);\n\n  return Array.from(struct.bonds.keys()).filter((bid) => {\n    const bond = struct.bonds.get(bid);\n    return atomSet.has(bond.begin) && atomSet.has(bond.end);\n  });\n}\n\nfunction getAtomsFromBonds(struct, bonds) {\n  bonds = bonds || [];\n  return bonds.reduce((acc, bondid) => {\n    const bond = struct.bonds.get(bondid);\n    acc = acc.concat([bond.begin, bond.end]);\n    return acc;\n  }, []);\n}\n\nexport function fromSgroupAttachmentPointAddition(\n  restruct: Restruct,\n  sgroupId: number,\n  attachmentPoint: SGroupAttachmentPoint,\n) {\n  let action = new Action();\n\n  action.addOp(new SGroupAttachmentPointAdd(sgroupId, attachmentPoint));\n  action = action.perform(restruct);\n\n  return action;\n}\n\nexport function fromSgroupAttachmentPointRemove(\n  restruct: Restruct,\n  sgroupId: number,\n  atomId: number,\n  leaveAtomId?: number,\n  needPerform = true,\n) {\n  let action = new Action();\n  const struct = restruct.molecule;\n  const sgroup = struct.sgroups.get(sgroupId);\n  const atomAttachmentPoints = sgroup\n    ?.getAttachmentPoints()\n    .filter((attachmentPoint) => attachmentPoint.atomId === atomId);\n  atomAttachmentPoints?.forEach((attachmentPoint) => {\n    if (\n      sgroup &&\n      (!isNumber(attachmentPoint.leaveAtomId) ||\n        attachmentPoint.leaveAtomId === leaveAtomId)\n    ) {\n      action.addOp(new SGroupAttachmentPointRemove(sgroupId, attachmentPoint));\n    }\n  });\n\n  if (needPerform) {\n    action = action.perform(restruct);\n  }\n\n  return action;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Bond,\n  Vec2,\n  AtomAttributes,\n  BondAttributes,\n  FunctionalGroup,\n  SGroupAttachmentPoint,\n  SGroup,\n} from 'domain/entities';\nimport {\n  AtomAdd,\n  AtomAttr,\n  BondAdd,\n  BondAttr,\n  BondDelete,\n  CalcImplicitH,\n  FragmentAdd,\n  FragmentStereoFlag,\n} from '../operations';\nimport { atomForNewBond, atomGetAttr } from './utils';\nimport {\n  fromAtomMerge,\n  fromStereoAtomAttrs,\n  mergeFragmentsIfNeeded,\n  mergeSgroups,\n} from './atom';\n\nimport { Action } from './action';\nimport { ReSGroup, ReStruct } from '../../render';\nimport utils from '../shared/utils';\nimport { fromSgroupAttachmentPointRemove } from 'application/editor';\nimport { getStereoAtomsMap } from 'application/editor/actions/helpers';\n\nexport function fromBondAddition(\n  reStruct: ReStruct,\n  bond: Partial<BondAttributes>,\n  begin: number | AtomAttributes,\n  end: number | AtomAttributes,\n  beginAtomPos?: Vec2,\n  endAtomPos?: Vec2,\n): [Action, number, number, number] {\n  const action = new Action();\n  const struct = reStruct.molecule;\n\n  const mouseDownNothingAndUpNothing = (\n    beginAtomAttr: AtomAttributes,\n    endAtomAttr: AtomAttributes,\n  ) => {\n    const newFragmentId = (\n      action.addOp(new FragmentAdd().perform(reStruct)) as FragmentAdd\n    ).frid;\n\n    const newBeginAtomId: number = (\n      action.addOp(\n        new AtomAdd(\n          { ...beginAtomAttr, fragment: newFragmentId },\n          beginAtomPos,\n        ).perform(reStruct),\n      ) as AtomAdd\n    ).data.aid;\n\n    const newEndAtomId: number = (\n      action.addOp(\n        new AtomAdd(\n          { ...endAtomAttr, fragment: newFragmentId },\n          endAtomPos,\n        ).perform(reStruct),\n      ) as AtomAdd\n    ).data.aid;\n\n    return [newBeginAtomId, newEndAtomId] as const;\n  };\n\n  const mouseDownNothingAndUpAtom = (\n    beginAtomAttr: AtomAttributes,\n    endAtomId: number,\n  ) => {\n    const fragmentId = atomGetAttr(reStruct, endAtomId, 'fragment');\n\n    const newBeginAtomId: number = (\n      action.addOp(\n        new AtomAdd(\n          { ...beginAtomAttr, fragment: fragmentId },\n          beginAtomPos,\n        ).perform(reStruct),\n      ) as AtomAdd\n    ).data.aid;\n\n    const endAtom = struct.atoms.get(endAtomId);\n    if (\n      endAtom &&\n      !FunctionalGroup.isAtomInContractedFunctionalGroup(\n        endAtom,\n        struct.sgroups,\n        struct.functionalGroups,\n        false,\n      )\n    ) {\n      mergeSgroups(action, reStruct, [newBeginAtomId], endAtomId);\n    }\n    return [newBeginAtomId, endAtomId] as const;\n  };\n\n  const mouseDownAtomAndUpNothing = (\n    beginAtomId: number,\n    endAtomAttr: AtomAttributes,\n  ) => {\n    const fragmentId = atomGetAttr(reStruct, beginAtomId, 'fragment');\n\n    const newEndAtomId: number = (\n      action.addOp(\n        new AtomAdd(\n          {\n            ...endAtomAttr,\n            fragment: fragmentId,\n          },\n          endAtomPos ?? atomForNewBond(reStruct, begin, bond).pos,\n        ).perform(reStruct),\n      ) as AtomAdd\n    ).data.aid;\n\n    const beginAtom = struct.atoms.get(beginAtomId);\n    if (\n      beginAtom &&\n      !FunctionalGroup.isAtomInContractedFunctionalGroup(\n        beginAtom,\n        struct.sgroups,\n        struct.functionalGroups,\n        false,\n      )\n    ) {\n      mergeSgroups(action, reStruct, [newEndAtomId], beginAtomId);\n    }\n\n    return [beginAtomId, newEndAtomId] as const;\n  };\n\n  let beginAtomId: number, endAtomId: number;\n\n  const startsOnAtom = typeof begin === 'number';\n  const endsOnAtom = typeof end === 'number';\n\n  if (!startsOnAtom && !endsOnAtom) {\n    [beginAtomId, endAtomId] = mouseDownNothingAndUpNothing(begin, end);\n  } else if (!startsOnAtom && endsOnAtom) {\n    [beginAtomId, endAtomId] = mouseDownNothingAndUpAtom(begin, end);\n  } else if (startsOnAtom && !endsOnAtom) {\n    [beginAtomId, endAtomId] = mouseDownAtomAndUpNothing(begin, end);\n  } else {\n    [beginAtomId, endAtomId] = [begin as number, end as number];\n\n    if (reStruct.sgroups && reStruct.sgroups.size > 0) {\n      reStruct.sgroups.forEach((sgroup) => {\n        if (sgroup.item?.type && sgroup.item?.type === 'SUP') {\n          addAttachmentPointToSuperatom(sgroup, beginAtomId, endAtomId);\n        }\n      });\n    }\n  }\n\n  if (atomGetAttr(reStruct, beginAtomId, 'label') === '*') {\n    action.addOp(new AtomAttr(beginAtomId, 'label', 'C').perform(reStruct));\n  }\n\n  if (atomGetAttr(reStruct, endAtomId, 'label') === '*') {\n    action.addOp(new AtomAttr(endAtomId, 'label', 'C').perform(reStruct));\n  }\n\n  const newBondId = (\n    action.addOp(\n      new BondAdd(beginAtomId, endAtomId, bond).perform(reStruct),\n    ) as BondAdd\n  ).data.bid;\n  const newBond = struct.bonds.get(newBondId);\n  if (newBond) {\n    action.addOp(\n      new CalcImplicitH([newBond.begin, newBond.end]).perform(reStruct),\n    );\n    action.mergeWith(fromBondStereoUpdate(reStruct, newBond));\n  }\n\n  action.operations.reverse();\n\n  const mergedFragmentId = mergeFragmentsIfNeeded(\n    action,\n    reStruct,\n    beginAtomId,\n    endAtomId,\n  );\n  if (struct.frags.get(mergedFragmentId || 0)?.stereoAtoms && !bond.stereo) {\n    action.addOp(\n      new FragmentStereoFlag(mergedFragmentId || 0).perform(reStruct),\n    );\n  }\n\n  return [action, beginAtomId, endAtomId, newBondId];\n}\n\nexport function fromBondsAttrs(\n  restruct: ReStruct,\n  ids: Array<number> | number,\n  attrs: Bond,\n  reset?: boolean,\n): Action {\n  const struct = restruct.molecule;\n  const action = new Action();\n  const bids = Array.isArray(ids) ? ids : [ids];\n\n  bids.forEach((bid) => {\n    Object.keys(Bond.attrlist).forEach((key) => {\n      if (!(key in attrs) && !reset) return;\n\n      const value = key in attrs ? attrs[key] : Bond.attrGetDefault(key);\n\n      action.addOp(new BondAttr(bid, key, value).perform(restruct));\n      if (key === 'stereo' && key in attrs) {\n        const bond = struct.bonds.get(bid);\n        if (bond) {\n          action.addOp(\n            new CalcImplicitH([bond.begin, bond.end]).perform(restruct),\n          );\n          action.mergeWith(fromBondStereoUpdate(restruct, bond));\n        }\n      }\n    });\n  });\n\n  return action;\n}\n\nexport function fromBondsMerge(\n  restruct: ReStruct,\n  mergeMap: Map<number, number>,\n): Action {\n  const struct = restruct.molecule;\n\n  const atomPairs = new Map();\n  let action = new Action();\n\n  mergeMap.forEach((dstId, srcId) => {\n    const bond = struct.bonds.get(srcId);\n    const bondCI = struct.bonds.get(dstId);\n    if (!bond || !bondCI) return;\n    const params = utils.mergeBondsParams(struct, bond, struct, bondCI);\n    if (!params.merged) return;\n    atomPairs.set(bond.begin, !params.cross ? bondCI.begin : bondCI.end);\n    atomPairs.set(bond.end, !params.cross ? bondCI.end : bondCI.begin);\n  });\n\n  atomPairs.forEach((dst, src) => {\n    action = fromAtomMerge(restruct, src, dst).mergeWith(action);\n  });\n\n  return action;\n}\n\nexport function fromBondFlipping(restruct: ReStruct, id: number): Action {\n  const bond = restruct.molecule.bonds.get(id);\n\n  const action = new Action();\n  action.addOp(new BondDelete(id).perform(restruct));\n\n  // TODO: find better way to avoid problem with bond.begin = 0\n  if (Number.isInteger(bond?.end) && Number.isInteger(bond?.begin)) {\n    action.addOp(new BondAdd(bond?.end, bond?.begin, bond).perform(restruct));\n  }\n\n  // todo: swap atoms stereoLabels and stereoAtoms in fragment\n\n  return action;\n}\n\nexport function fromBondStereoUpdate(\n  restruct: ReStruct,\n  bond: Bond,\n  withReverse?: boolean,\n): Action {\n  const action = new Action();\n  const struct = restruct.molecule;\n\n  const beginFrId = struct.atoms.get(bond?.begin)?.fragment;\n  const endFrId = struct.atoms.get(bond?.end)?.fragment;\n\n  const fragmentStereoBonds: Array<Bond> = [];\n\n  struct.bonds.forEach((bond) => {\n    if (struct.atoms.get(bond.begin)?.fragment === beginFrId) {\n      fragmentStereoBonds.push(bond);\n    }\n\n    if (\n      beginFrId !== endFrId &&\n      struct.atoms.get(bond.begin)?.fragment === endFrId\n    ) {\n      fragmentStereoBonds.push(bond);\n    }\n  });\n\n  const stereoAtomsMap = getStereoAtomsMap(struct, fragmentStereoBonds, bond);\n\n  stereoAtomsMap.forEach((stereoProp, aId) => {\n    if (struct.atoms.get(aId)?.stereoLabel !== stereoProp.stereoLabel) {\n      action.mergeWith(\n        fromStereoAtomAttrs(restruct, aId, stereoProp, withReverse),\n      );\n    }\n  });\n\n  return action;\n}\n\nconst plainBondTypes = [\n  Bond.PATTERN.TYPE.SINGLE,\n  Bond.PATTERN.TYPE.DOUBLE,\n  Bond.PATTERN.TYPE.TRIPLE,\n];\n\nexport function bondChangingAction(\n  restruct: ReStruct,\n  itemID: number,\n  bond: Bond,\n  bondProps: any,\n): Action {\n  const action = new Action();\n  let newItemId = itemID;\n  if (\n    ((bondProps.stereo !== Bond.PATTERN.STEREO.NONE && //\n      bondProps.type === Bond.PATTERN.TYPE.SINGLE) ||\n      bond.type === Bond.PATTERN.TYPE.DATIVE) &&\n    bond.type === bondProps.type &&\n    bond.stereo === bondProps.stereo\n  ) {\n    action.mergeWith(fromBondFlipping(restruct, itemID));\n    newItemId = (action.operations[1] as BondAdd).data.bid;\n  }\n  // if bondTool is stereo and equal to bond for change\n\n  const loop = plainBondTypes.includes(bondProps.type) ? plainBondTypes : null;\n  if (\n    bondProps.stereo === Bond.PATTERN.STEREO.NONE &&\n    bondProps.type === Bond.PATTERN.TYPE.SINGLE &&\n    bond.stereo === Bond.PATTERN.STEREO.NONE &&\n    loop\n  ) {\n    // if `Single bond` tool is chosen and bond for change in `plainBondTypes`\n    bondProps.type = loop[(loop.indexOf(bond.type) + 1) % loop.length];\n  }\n\n  return fromBondsAttrs(restruct, newItemId, bondProps).mergeWith(action);\n}\n\nfunction addAttachmentPointToSuperatom(\n  sgroup: ReSGroup,\n  beginAtomId: number,\n  endAtomId: number,\n) {\n  (sgroup.item?.atoms as number[]).forEach((atomId) => {\n    if (beginAtomId === atomId || endAtomId === atomId) {\n      if (\n        !(sgroup.item as SGroup)\n          .getAttachmentPoints()\n          .map((attachmentPoint) => attachmentPoint.atomId)\n          .includes(atomId)\n      )\n        sgroup.item?.addAttachmentPoint(\n          new SGroupAttachmentPoint(atomId, undefined, undefined),\n        );\n    }\n  });\n}\n\nexport function removeAttachmentPointFromSuperatom(\n  sgroup: ReSGroup,\n  beginAtomId: number | undefined,\n  endAtomId: number | undefined,\n  action: Action,\n  restruct: ReStruct,\n) {\n  (sgroup.item?.atoms as number[]).forEach((atomId) => {\n    if (beginAtomId === atomId || endAtomId === atomId) {\n      const anotherSideAtomId =\n        beginAtomId === atomId ? endAtomId : beginAtomId;\n      action.mergeWith(\n        fromSgroupAttachmentPointRemove(\n          restruct,\n          sgroup.item?.id as number,\n          atomId as number,\n          anotherSideAtomId,\n          false,\n        ),\n      );\n    }\n  });\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  Bond,\n  MonomerMicromolecule,\n  RGroup,\n  SGroupAttachmentPoint,\n} from 'domain/entities';\nimport {\n  AtomAdd,\n  AtomAttr,\n  AtomDelete,\n  BondAdd,\n  BondAttr,\n  BondDelete,\n  CalcImplicitH,\n  FragmentAdd,\n  FragmentAddStereoAtom,\n  FragmentDelete,\n  FragmentDeleteStereoAtom,\n  SGroupAtomAdd,\n} from '../operations';\nimport { atomGetAttr, atomGetDegree, atomGetSGroups } from './utils';\nimport { fromRGroupFragment, fromUpdateIfThen } from './rgroup';\nimport { removeAtomFromSgroupIfNeeded, removeSgroupIfNeeded } from './sgroup';\n\nimport { Action } from './action';\nimport { fromBondStereoUpdate } from './bond';\nimport { without } from 'lodash/fp';\nimport ReStruct from 'application/render/restruct/restruct';\nimport assert from 'assert';\nimport { SGroupAttachmentPointRemove } from '../operations/sgroup/sgroupAttachmentPoints';\n\nexport function fromAtomAddition(restruct, pos, atom) {\n  atom = Object.assign({}, atom);\n  const action = new Action();\n  atom.fragment = (\n    action.addOp(new FragmentAdd().perform(restruct)) as FragmentAdd\n  ).frid;\n\n  const aid = (\n    action.addOp(new AtomAdd(atom, pos).perform(restruct)) as AtomAdd\n  ).data.aid;\n  action.addOp(new CalcImplicitH([aid]).perform(restruct));\n\n  return action;\n}\n\nexport function fromAtomsAttrs(\n  restruct: ReStruct,\n  ids: Array<number> | number,\n  attrs: any,\n  reset: boolean | null,\n) {\n  const action = new Action();\n  const aids = Array.isArray(ids) ? ids : [ids];\n\n  aids.forEach((atomId) => {\n    Object.keys(Atom.attrlist).forEach((key) => {\n      if (key === 'attachmentPoints' && !(key in attrs)) return;\n      if (!(key in attrs) && !reset) return;\n\n      const value = key in attrs ? attrs[key] : Atom.attrGetDefault(key);\n\n      switch (key) {\n        case 'stereoLabel':\n          if (key in attrs && value) {\n            action.addOp(new AtomAttr(atomId, key, value).perform(restruct));\n          }\n          break;\n        case 'stereoParity':\n          if (key in attrs && value) {\n            action.addOp(new AtomAttr(atomId, key, value).perform(restruct));\n          }\n          break;\n        default:\n          action.addOp(new AtomAttr(atomId, key, value).perform(restruct));\n          break;\n      }\n    });\n\n    if (\n      !reset &&\n      'label' in attrs &&\n      attrs.label !== null &&\n      attrs.label !== 'L#' &&\n      !('atomList' in attrs)\n    ) {\n      action.addOp(new AtomAttr(atomId, 'atomList', null).perform(restruct));\n    }\n\n    action.addOp(new CalcImplicitH([atomId]).perform(restruct));\n\n    const atomNeighbors = restruct.molecule.atomGetNeighbors(atomId);\n    const bond = restruct.molecule.bonds.get(atomNeighbors?.[0]?.bid as number);\n    if (bond) {\n      action.mergeWith(fromBondStereoUpdate(restruct, bond));\n    }\n    // when a heteroatom connects to an aromatic ring it's necessary to add a ImplicitHCount\n    // property to this atom to specify the number of hydrogens on it.\n    const atom = restruct.molecule.atoms.get(atomId);\n    assert(atom != null);\n\n    if (Atom.isInAromatizedRing(restruct.molecule, atomId)) {\n      action.addOp(\n        new AtomAttr(atomId, 'implicitHCount', atom.implicitH).perform(\n          restruct,\n        ),\n      );\n    }\n  });\n\n  return action;\n}\n\nexport function fromStereoAtomAttrs(restruct, aid, attrs, withReverse) {\n  const action = new Action();\n  const atom = restruct.molecule.atoms.get(aid);\n  const sgroup = restruct.molecule.getGroupFromAtomId(aid);\n  if (atom && !(sgroup instanceof MonomerMicromolecule)) {\n    const frid = atom.fragment;\n\n    if ('stereoParity' in attrs) {\n      action.addOp(\n        new AtomAttr(aid, 'stereoParity', attrs.stereoParity).perform(restruct),\n      );\n    }\n    if ('stereoLabel' in attrs) {\n      action.addOp(\n        new AtomAttr(aid, 'stereoLabel', attrs.stereoLabel).perform(restruct),\n      );\n      if (attrs.stereoLabel === null) {\n        action.addOp(new FragmentDeleteStereoAtom(frid, aid).perform(restruct));\n      } else {\n        action.addOp(new FragmentAddStereoAtom(frid, aid).perform(restruct));\n      }\n    }\n    if (withReverse) action.operations.reverse();\n  }\n\n  return action;\n}\n\nexport function fromAtomsFragmentAttr(restruct, aids, newfrid) {\n  const action = new Action();\n\n  aids.forEach((aid) => {\n    const atom = restruct.molecule.atoms.get(aid);\n    const sgroup = restruct.molecule.getGroupFromAtomId(aid);\n    const oldfrid = atom.fragment;\n\n    if (sgroup instanceof MonomerMicromolecule) {\n      return;\n    }\n\n    action.addOp(new AtomAttr(aid, 'fragment', newfrid));\n\n    if (atom.stereoLabel !== null) {\n      action.addOp(new FragmentAddStereoAtom(newfrid, aid));\n      action.addOp(new FragmentDeleteStereoAtom(oldfrid, aid));\n    }\n  });\n\n  return action.perform(restruct);\n}\n\n/**\n * @param restruct { ReStruct }\n * @param srcId { number }\n * @param dstId { number }\n * @return { Action }\n */\nexport function fromAtomMerge(restruct, srcId, dstId) {\n  if (srcId === dstId) return new Action();\n\n  const fragAction = new Action();\n  mergeFragmentsIfNeeded(fragAction, restruct, srcId, dstId);\n\n  const action = new Action();\n\n  const atomNeighbors = restruct.molecule.atomGetNeighbors(srcId);\n  atomNeighbors.forEach((nei) => {\n    const bond = restruct.molecule.bonds.get(nei.bid);\n\n    if (dstId === bond.begin || dstId === bond.end) {\n      // src & dst have one nei\n      action.addOp(new BondDelete(nei.bid));\n      return;\n    }\n\n    const begin = bond.begin === nei.aid ? nei.aid : dstId;\n    const end = bond.begin === nei.aid ? dstId : nei.aid;\n\n    const mergeBondId = restruct.molecule.findBondId(begin, end);\n\n    if (mergeBondId === null) {\n      action.addOp(new BondAdd(begin, end, bond));\n    } else {\n      // replace old bond with new bond\n      const attrs = Bond.getAttrHash(bond);\n      Object.keys(attrs).forEach((key) => {\n        action.addOp(new BondAttr(mergeBondId, key, attrs[key]));\n      });\n    }\n\n    action.addOp(new BondDelete(nei.bid));\n  });\n\n  const attrs = Atom.getAttrHash(restruct.molecule.atoms.get(srcId));\n\n  if (atomGetDegree(restruct, srcId) === 1 && attrs.label === '*') {\n    attrs.label = 'C';\n  }\n\n  Object.keys(attrs).forEach((key) => {\n    if (key !== 'stereoLabel' && key !== 'stereoParity') {\n      action.addOp(new AtomAttr(dstId, key, attrs[key]));\n    }\n  });\n\n  const sgChanged = removeAtomFromSgroupIfNeeded(action, restruct, srcId);\n\n  if (sgChanged) removeSgroupIfNeeded(action, restruct, [srcId]);\n\n  const sgroups = atomGetSGroups(restruct, srcId);\n  sgroups.forEach((sgroupId: number) => {\n    const sgroup = restruct.sgroups.get(sgroupId).item;\n    for (let i = 0; i < sgroup.attachmentPoints.length; ++i) {\n      if (sgroup.attachmentPoints[i].atomId === srcId) {\n        action.addOp(\n          new SGroupAttachmentPointRemove(\n            sgroupId,\n            new SGroupAttachmentPoint(srcId, undefined, undefined),\n          ),\n        );\n        return;\n      }\n    }\n  });\n\n  action.addOp(new AtomDelete(srcId));\n  const dstAtomNeighbors = restruct.molecule.atomGetNeighbors(dstId);\n  const bond = restruct.molecule.bonds.get(\n    dstAtomNeighbors[0]?.bid || atomNeighbors[0]?.bid,\n  );\n\n  return action\n    .perform(restruct)\n    .mergeWith(fragAction)\n    .mergeWith(fromBondStereoUpdate(restruct, bond));\n}\n\nexport function mergeFragmentsIfNeeded(action, restruct, srcId, dstId) {\n  const frid = atomGetAttr(restruct, srcId, 'fragment') as number;\n  const frid2 = atomGetAttr(restruct, dstId, 'fragment');\n  if (frid2 === frid || typeof frid !== 'number' || typeof frid2 !== 'number') {\n    return frid;\n  }\n\n  const struct = restruct.molecule;\n\n  const rgid = RGroup.findRGroupByFragment(struct.rgroups, frid2);\n  if (!(typeof rgid === 'undefined')) {\n    action\n      .mergeWith(fromRGroupFragment(restruct, null, frid2))\n      .mergeWith(fromUpdateIfThen(restruct, 0, rgid));\n  }\n\n  const fridAtoms = struct.getFragmentIds(frid);\n\n  const atomsToNewFrag: Array<any> = [];\n  struct.atoms.forEach((atom, aid) => {\n    if (atom.fragment === frid2) atomsToNewFrag.push(aid);\n  });\n  const moveAtomsAction = fromAtomsFragmentAttr(restruct, atomsToNewFrag, frid);\n\n  mergeSgroups(action, restruct, fridAtoms, dstId);\n  action.addOp(new FragmentDelete(frid2).perform(restruct));\n  action.mergeWith(moveAtomsAction);\n\n  return frid;\n}\n\nexport function mergeSgroups(action, restruct, srcAtoms, dstAtom) {\n  const sgroups = atomGetSGroups(restruct, dstAtom);\n\n  sgroups.forEach((sid) => {\n    const sgroup = restruct.molecule.sgroups.get(sid);\n    const notExpandedContexts = ['Atom', 'Bond', 'Group'];\n    if (\n      sgroup.type === 'DAT' &&\n      notExpandedContexts.includes(sgroup.data.context)\n    ) {\n      return;\n    }\n    const atomsToSgroup: any = without(sgroup.atoms, srcAtoms);\n    atomsToSgroup.forEach((aid) =>\n      action.addOp(new SGroupAtomAdd(sid, aid).perform(restruct)),\n    );\n  });\n}\n\nexport function checkAtomValence(restruct, atomId) {\n  const action = new Action();\n\n  if (!restruct.atoms.has(atomId)) return action;\n\n  action.addOp(new CalcImplicitH([atomId]));\n\n  return action.perform(restruct);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AlignDescriptors, CanvasLoad } from '../operations';\n\nimport { Action } from './action';\n\nexport function fromNewCanvas(restruct, struct) {\n  const action = new Action();\n\n  action.addOp(new CanvasLoad(struct));\n  return action.perform(restruct);\n}\n\nexport function fromDescriptorsAlign(restruct) {\n  const action = new Action();\n  action.addOp(new AlignDescriptors());\n  return action.perform(restruct);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AtomAdd, FragmentAdd } from '../operations';\n\nimport { Action } from './action';\nimport { Vec2 } from 'domain/entities';\nimport { atomGetAttr } from './utils';\nimport { fromBondAddition } from './bond';\n\nexport function fromChain(restruct, p0, v, nSect, atomId) {\n  // eslint-disable-line max-params\n  const dx = Math.cos(Math.PI / 6);\n  const dy = Math.sin(Math.PI / 6);\n\n  let action = new Action();\n\n  const frid =\n    atomId !== null\n      ? atomGetAttr(restruct, atomId, 'fragment')\n      : (action.addOp(new FragmentAdd().perform(restruct)) as FragmentAdd).frid;\n\n  const chainItems: any = {\n    atoms: [],\n    bonds: [],\n  };\n\n  let id0 =\n    atomId !== null\n      ? atomId\n      : (\n          action.addOp(\n            new AtomAdd({ label: 'C', fragment: frid }, p0).perform(restruct),\n          ) as AtomAdd\n        ).data.aid;\n\n  chainItems.atoms.push(id0);\n  action.operations.reverse();\n\n  for (let i = 0; i < nSect; i++) {\n    const pos = new Vec2(dx * (i + 1), i & 1 ? 0 : dy).rotate(v).add(p0);\n\n    const ret = fromBondAddition(\n      restruct,\n      {},\n      id0,\n      { label: 'C' },\n      undefined,\n      pos,\n    );\n    action = ret[0].mergeWith(action);\n    id0 = ret[2];\n    chainItems.bonds.push(ret[3]);\n    chainItems.atoms.push(id0);\n  }\n\n  return [action, chainItems];\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Action } from './action';\nimport { checkAtomValence, fromAtomMerge } from './atom';\nimport { fromBondsMerge } from './bond';\nimport utils from '../shared/utils';\n\nexport function fromItemsFuse(restruct, items) {\n  let action = new Action();\n\n  if (!items) return action;\n\n  const usedAtoms = new Set();\n\n  const connectedAtomIds = getAllConnectedAtomsIds(\n    restruct,\n    mergeMapOfItemsToSet(items.atoms),\n    mergeMapOfItemsToSet(items.bonds),\n  );\n\n  // merge single atoms\n  items.atoms.forEach((dst, src) => {\n    if (usedAtoms.has(dst) || usedAtoms.has(src)) return;\n\n    action = fromAtomMerge(restruct, src, dst).mergeWith(action);\n    usedAtoms.add(dst).add(src);\n  });\n\n  // merge bonds\n  action = fromBondsMerge(restruct, items.bonds).mergeWith(action);\n\n  action = valenceCheck(restruct, connectedAtomIds).mergeWith(action);\n\n  return action;\n}\n\nexport function getItemsToFuse(editor, items) {\n  const struct = editor.render.ctab.molecule;\n\n  const mergeItems = items || {\n    atoms: Array.from(struct.atoms.keys()),\n    bonds: Array.from(struct.bonds.keys()),\n  };\n\n  return closestToMerge(\n    struct,\n    editor.findMerge(mergeItems, ['atoms', 'bonds']),\n  );\n}\n\nexport function getHoverToFuse(items) {\n  if (!items) return null;\n\n  const hoverItems = {\n    atoms: Array.from(items.atoms.values()),\n    bonds: Array.from(items.bonds.values()),\n    ...(items.functionalGroups && {\n      functionalGroups: Array.from(items.functionalGroups.values()),\n    }),\n    ...(items.atomToFunctionalGroup && {\n      sgroups: Array.from(items.atomToFunctionalGroup.values()),\n    }),\n  };\n\n  return { map: 'merge', id: +Date.now(), items: hoverItems };\n}\n\nexport function mergeMapOfItemsToSet(items: Map<number, number>): Set<number> {\n  const itemsSet = new Set<number>();\n  items.forEach((value, key) => {\n    itemsSet.add(value).add(key);\n  });\n  return itemsSet;\n}\n\n/**\n * @param struct\n * @param closestMap {{\n * \t\tatoms: Map<number, number>,\n * \t\tbonds: Map<number, number>,\n *    atomToFunctionalGroup: Map<number, number>\n * }}\n * @return {{\n * \t\tatoms: Map<number, number>,\n * \t\tbonds: Map<number, number>,\n *    atomToFunctionalGroup: Map<number, number>\n * }}\n */\nfunction closestToMerge(struct, closestMap) {\n  const mergeMap = {\n    atoms: new Map(closestMap.atoms),\n    bonds: new Map(closestMap.bonds),\n    atomToFunctionalGroup: new Map(closestMap.atomToFunctionalGroup),\n  };\n\n  closestMap.bonds.forEach((dstId, srcId) => {\n    const bond = struct.bonds.get(srcId);\n    const bondCI = struct.bonds.get(dstId);\n\n    if (utils.mergeBondsParams(struct, bond, struct, bondCI).merged) {\n      mergeMap.atoms.delete(bond.begin);\n      mergeMap.atoms.delete(bond.end);\n    } else {\n      mergeMap.bonds.delete(srcId);\n    }\n  });\n\n  if (\n    mergeMap.atoms.size === 0 &&\n    mergeMap.bonds.size === 0 &&\n    mergeMap.atomToFunctionalGroup.size === 0\n  ) {\n    return null;\n  }\n\n  return mergeMap;\n}\n\nfunction getAllConnectedAtomsIds(restruct, atomsIds, bondsIds) {\n  const initialAtoms = new Set(atomsIds);\n  const connectedAtoms = new Set();\n\n  for (const bondId of bondsIds) {\n    const bond = restruct.bonds.get(bondId);\n    if (bond) {\n      const { begin, end } = bond.b;\n      initialAtoms.add(begin).add(end);\n    }\n  }\n\n  for (const initialAtom of initialAtoms) {\n    if (connectedAtoms.has(initialAtom)) continue;\n    const relevantConnectedComponent = [\n      ...restruct.connectedComponents.values(),\n    ].find((component) => component.has(initialAtom));\n    if (relevantConnectedComponent)\n      relevantConnectedComponent.forEach((id) => connectedAtoms.add(id));\n  }\n\n  return connectedAtoms;\n}\n\nfunction valenceCheck(restruct, atomIds) {\n  let action = new Action();\n\n  if (!atomIds) return action;\n  const usedAtoms = new Set();\n\n  // merge single atoms\n  atomIds.forEach((atomId) => {\n    if (usedAtoms.has(atomId)) return;\n\n    action = checkAtomValence(restruct, atomId).mergeWith(action);\n    usedAtoms.add(atomId);\n  });\n\n  return action;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AtomMove,\n  BondMove,\n  EnhancedFlagMove,\n  FragmentAdd,\n  FragmentDelete,\n  FragmentDeleteStereoAtom,\n  FragmentStereoFlag,\n  LoopMove,\n  RxnArrowMove,\n  RxnPlusMove,\n  SGroupDataMove,\n  SimpleObjectMove,\n  TextMove,\n  ImageMove,\n  MultitailArrowMove,\n} from '../operations';\nimport { Pile, RGroup, Vec2 } from 'domain/entities';\nimport { fromRGroupFragment, fromUpdateIfThen } from './rgroup';\n\nimport { Action } from './action';\nimport { fromAtomsFragmentAttr } from './atom';\nimport { getRelSGroupsBySelection } from './utils';\nimport { IMAGE_KEY, MULTITAIL_ARROW_KEY } from 'domain/constants';\n\nexport function fromMultipleMove(\n  restruct,\n  lists,\n  d: Vec2,\n  shouldPerform = true,\n) {\n  d = new Vec2(d);\n\n  const action = new Action();\n  const struct = restruct.molecule;\n  const loops = new Pile();\n  const atomsToInvalidate = new Pile();\n\n  if (lists.atoms) {\n    const atomSet = new Pile(lists.atoms);\n    const bondlist: Array<number> = [];\n\n    restruct.bonds.forEach((bond, bid) => {\n      if (atomSet.has(bond.b.begin) && atomSet.has(bond.b.end)) {\n        bondlist.push(bid);\n        // add all adjacent loops\n        // those that are not completely inside the structure will get redrawn anyway\n        ['hb1', 'hb2'].forEach((hb) => {\n          const loop = struct.halfBonds.get(bond.b[hb]).loop;\n          if (loop >= 0) loops.add(loop);\n        });\n        return;\n      }\n\n      if (atomSet.has(bond.b.begin)) {\n        atomsToInvalidate.add(bond.b.begin);\n        return;\n      }\n\n      if (atomSet.has(bond.b.end)) atomsToInvalidate.add(bond.b.end);\n    });\n\n    bondlist.forEach((bond) => {\n      action.addOp(new BondMove(bond, d));\n    });\n\n    loops.forEach((loopId) => {\n      if (restruct.reloops.get(loopId) && restruct.reloops.get(loopId).visel) {\n        // hack\n        action.addOp(new LoopMove(loopId, d));\n      }\n    });\n\n    lists.atoms.forEach((aid) => {\n      action.addOp(new AtomMove(aid, d, !atomsToInvalidate.has(aid)));\n    });\n\n    if (lists.sgroupData && lists.sgroupData.length === 0) {\n      const sgroups = getRelSGroupsBySelection(struct, lists.atoms);\n      sgroups.forEach((sg) => {\n        action.addOp(new SGroupDataMove(sg.id, d));\n      });\n    }\n  }\n\n  if (lists.rxnArrows) {\n    lists.rxnArrows.forEach((rxnArrow) => {\n      action.addOp(new RxnArrowMove(rxnArrow, d, true));\n    });\n  }\n\n  if (lists.rxnPluses) {\n    lists.rxnPluses.forEach((rxnPulse) => {\n      action.addOp(new RxnPlusMove(rxnPulse, d, true));\n    });\n  }\n\n  if (lists.simpleObjects) {\n    lists.simpleObjects.forEach((simpleObject) => {\n      action.addOp(new SimpleObjectMove(simpleObject, d, true));\n    });\n  }\n\n  if (lists.sgroupData) {\n    lists.sgroupData.forEach((sgData) => {\n      action.addOp(new SGroupDataMove(sgData, d));\n    });\n  }\n\n  if (lists.enhancedFlags) {\n    lists.enhancedFlags.forEach((fid) => {\n      action.addOp(new EnhancedFlagMove(fid, d));\n    });\n  }\n\n  if (lists.texts) {\n    lists.texts.forEach((text) => {\n      action.addOp(new TextMove(text, d, true));\n    });\n  }\n\n  if (lists[IMAGE_KEY]) {\n    lists[IMAGE_KEY].forEach((image) => {\n      action.addOp(new ImageMove(image, d));\n    });\n  }\n\n  if (lists[MULTITAIL_ARROW_KEY]) {\n    lists[MULTITAIL_ARROW_KEY].forEach((multitailArrow) => {\n      action.addOp(new MultitailArrowMove(multitailArrow, d));\n    });\n  }\n\n  return shouldPerform ? action.perform(restruct) : action;\n}\n\nexport function fromStereoFlagUpdate(restruct, frid, flag = null) {\n  const action = new Action();\n\n  if (!flag) {\n    const struct = restruct.molecule;\n    const frag = restruct.molecule.frags.get(frid);\n    if (frag) {\n      frag.stereoAtoms.forEach((aid) => {\n        if (struct.atoms.get(aid).stereoLabel === null) {\n          action.addOp(new FragmentDeleteStereoAtom(frid, aid));\n        }\n      });\n    }\n  }\n\n  action.addOp(new FragmentStereoFlag(frid));\n  return action.perform(restruct);\n}\n\n/**\n * @param restruct { ReStruct }\n * @param aid { number }\n * @param frid { number }\n * @param newfrid { number }\n * @returns { Action }\n */\nfunction processAtom(restruct, aid, frid, newfrid) {\n  const queue = [aid];\n  const usedIds = new Pile(queue);\n\n  while (queue.length > 0) {\n    const id = queue.shift();\n\n    restruct.molecule.atomGetNeighbors(id).forEach((nei) => {\n      if (\n        restruct.molecule.atoms.get(nei.aid).fragment === frid &&\n        !usedIds.has(nei.aid)\n      ) {\n        usedIds.add(nei.aid);\n        queue.push(nei.aid);\n      }\n    });\n  }\n\n  return fromAtomsFragmentAttr(restruct, usedIds, newfrid);\n}\n\n/**\n * @param restruct { ReStruct }\n * @param frid { number }\n * @param rgForRemove\n * @return { Action }\n */\n// TODO [RB] the thing is too tricky :) need something else in future\nexport function fromFragmentSplit(\n  restruct,\n  frid,\n  rgForRemove: Array<number> = [],\n) {\n  const action = new Action();\n  const rgid = RGroup.findRGroupByFragment(restruct.molecule.rgroups, frid);\n\n  restruct.molecule.atoms.forEach((atom, aid) => {\n    if (atom.fragment === frid) {\n      const newfrid = (\n        action.addOp(new FragmentAdd().perform(restruct)) as FragmentAdd\n      ).frid;\n\n      action.mergeWith(processAtom(restruct, aid, frid, newfrid));\n\n      if (rgid) action.mergeWith(fromRGroupFragment(restruct, rgid, newfrid));\n    }\n  });\n\n  if (frid !== -1) {\n    action.mergeWith(fromRGroupFragment(restruct, 0, frid));\n    action.addOp(new FragmentDelete(frid).perform(restruct));\n    action.mergeWith(fromUpdateIfThen(restruct, 0, rgid, rgForRemove));\n  }\n\n  action.operations.reverse();\n  return action;\n}\n","import assert from 'assert';\nimport { ReStruct } from 'application/render';\nimport { AttachmentPoints, Struct } from 'domain/entities';\nimport {\n  RGroupAttachmentPointAdd,\n  RGroupAttachmentPointRemove,\n} from '../operations';\nimport { Action } from './action';\nimport { fromAtomsAttrs } from '.';\n\nexport function fromRGroupAttachmentPointUpdate(\n  restruct: ReStruct,\n  atomId: number,\n  attachmentPoints: AttachmentPoints | null,\n) {\n  const action = new Action();\n  action.mergeWith(fromRGroupAttachmentPointsDeletionByAtom(restruct, atomId));\n  action.mergeWith(\n    fromRGroupAttachmentPointAddition(restruct, attachmentPoints, atomId),\n  );\n  return action;\n}\n\nexport function fromRGroupAttachmentPointAddition(\n  restruct: ReStruct,\n  attachmentPoints: AttachmentPoints | null,\n  atomId: number,\n) {\n  const action = new Action();\n  switch (attachmentPoints) {\n    case AttachmentPoints.FirstSideOnly:\n      action.addOp(\n        new RGroupAttachmentPointAdd({\n          atomId,\n          attachmentPointType: 'primary',\n        }),\n      );\n      break;\n\n    case AttachmentPoints.SecondSideOnly:\n      action.addOp(\n        new RGroupAttachmentPointAdd({\n          atomId,\n          attachmentPointType: 'secondary',\n        }),\n      );\n      break;\n\n    case AttachmentPoints.BothSides:\n      action.addOp(\n        new RGroupAttachmentPointAdd({\n          atomId,\n          attachmentPointType: 'primary',\n        }),\n      );\n      action.addOp(\n        new RGroupAttachmentPointAdd({\n          atomId,\n          attachmentPointType: 'secondary',\n        }),\n      );\n      break;\n\n    default:\n      break;\n  }\n  return action.perform(restruct);\n}\n\nfunction fromRGroupAttachmentPointsDeletionByAtom(\n  restruct: ReStruct,\n  atomId: number,\n) {\n  const action = new Action();\n  const attachmentPointsToDelete =\n    restruct.molecule.getRGroupAttachmentPointsByAtomId(atomId);\n  attachmentPointsToDelete.forEach((rgroupAttachmentPointId) => {\n    action.addOp(new RGroupAttachmentPointRemove(rgroupAttachmentPointId));\n  });\n  return action.perform(restruct);\n}\n\nexport function fromRGroupAttachmentPointDeletion(\n  restruct: ReStruct,\n  id: number,\n) {\n  const { atomId, newAttachmentPoints } = getNewAtomAttachmentPoints(\n    restruct.molecule,\n    id,\n  );\n  const actionToUpdateAtomsAttrs = fromAtomsAttrs(\n    restruct,\n    atomId,\n    { attachmentPoints: newAttachmentPoints },\n    null,\n  );\n\n  const actionToDeletePoint = new Action();\n  actionToDeletePoint.addOp(new RGroupAttachmentPointRemove(id));\n\n  return actionToDeletePoint\n    .perform(restruct)\n    .mergeWith(actionToUpdateAtomsAttrs);\n}\n\nfunction getNewAtomAttachmentPoints(\n  struct: Struct,\n  rgroupAttachmentPointToDelete: number,\n) {\n  const pointToDelete = struct.rgroupAttachmentPoints.get(\n    rgroupAttachmentPointToDelete,\n  );\n  assert(pointToDelete != null);\n  const attachedAtomId = pointToDelete.atomId;\n  const attachedAtom = struct.atoms.get(attachedAtomId);\n  const currentAttachmentPoints = attachedAtom?.attachmentPoints;\n\n  let newAttachmentPoints = AttachmentPoints.None;\n  if (currentAttachmentPoints === AttachmentPoints.BothSides) {\n    const pointToDeleteType = pointToDelete.type;\n    if (pointToDeleteType === 'primary') {\n      newAttachmentPoints = AttachmentPoints.SecondSideOnly;\n    } else if (pointToDeleteType === 'secondary') {\n      newAttachmentPoints = AttachmentPoints.FirstSideOnly;\n    }\n  }\n\n  return { atomId: attachedAtomId, newAttachmentPoints };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AtomDelete,\n  BondDelete,\n  CalcImplicitH,\n  ImageDelete,\n  MultitailArrowDelete,\n  RGroupAttachmentPointRemove,\n  RxnArrowDelete,\n  RxnPlusDelete,\n  SGroupAtomRemove,\n  SimpleObjectDelete,\n  TextDelete,\n} from '../operations';\nimport { RGroup } from 'domain/entities';\nimport { removeAtomFromSgroupIfNeeded, removeSgroupIfNeeded } from './sgroup';\n\nimport { Action } from './action';\nimport assert from 'assert';\nimport { atomGetDegree, formatSelection } from './utils';\nimport {\n  fromBondStereoUpdate,\n  removeAttachmentPointFromSuperatom,\n} from '../actions/bond';\nimport { fromFragmentSplit } from './fragment';\nimport { fromRGroupAttachmentPointDeletion } from './rgroupAttachmentPoint';\nimport { ReStruct } from 'application/render';\nimport { isNumber } from 'lodash';\nimport { IMAGE_KEY, MULTITAIL_ARROW_KEY } from 'domain/constants';\n\nexport function fromOneAtomDeletion(restruct, atomId: number) {\n  return fromFragmentDeletion(restruct, { atoms: [atomId] });\n}\n\nfunction fromBondDeletion(\n  restruct: ReStruct,\n  bid: number,\n  skipAtoms: Array<any> = [],\n) {\n  let action = new Action();\n\n  if (restruct.sgroups && restruct.sgroups.size > 0) {\n    restruct.sgroups.forEach((sgroup) => {\n      if (sgroup.item?.type && sgroup.item?.type === 'SUP') {\n        const beginAtomConnectedToBond = restruct.bonds.get(bid)?.b.begin;\n        const endAtomConnectedToBond = restruct.bonds.get(bid)?.b.end;\n\n        removeAttachmentPointFromSuperatom(\n          sgroup,\n          beginAtomConnectedToBond,\n          endAtomConnectedToBond,\n          action,\n          restruct,\n        );\n      }\n    });\n  }\n\n  const bond: any = restruct.molecule.bonds.get(bid);\n  const atomsToRemove: Array<any> = [];\n\n  action.addOp(new BondDelete(bid));\n\n  if (\n    !skipAtoms.includes(bond.begin) &&\n    atomGetDegree(restruct, bond.begin) === 0\n  ) {\n    if (removeAtomFromSgroupIfNeeded(action, restruct, bond.begin)) {\n      atomsToRemove.push(bond.begin);\n    }\n\n    action.addOp(new AtomDelete(bond.begin));\n  }\n\n  if (\n    !skipAtoms.includes(bond.end) &&\n    atomGetDegree(restruct, bond.end) === 0\n  ) {\n    if (removeAtomFromSgroupIfNeeded(action, restruct, bond.end)) {\n      atomsToRemove.push(bond.end);\n    }\n\n    action.addOp(new AtomDelete(bond.end));\n  }\n\n  removeSgroupIfNeeded(action, restruct, atomsToRemove);\n  action = action.perform(restruct);\n  action.addOp(new CalcImplicitH([bond.begin, bond.end]).perform(restruct));\n  action.mergeWith(fromBondStereoUpdate(restruct, bond, false));\n\n  action.operations.reverse();\n\n  return action;\n}\n\nexport function fromOneBondDeletion(restruct, id) {\n  const frid = restruct.molecule.getBondFragment(id);\n  let action = fromBondDeletion(restruct, id);\n\n  action = fromFragmentSplit(restruct, frid).mergeWith(action);\n\n  return action;\n}\n\nexport function fromFragmentDeletion(restruct, rawSelection) {\n  assert(!!rawSelection != null);\n\n  let action = new Action();\n  const atomsToRemove: Array<number> = [];\n  const frids: Array<number> = [];\n  const struct = restruct.molecule;\n  const selection = formatSelection(rawSelection);\n\n  selection.sgroups.forEach((sgroupId) => {\n    const sgroup = restruct.sgroups.get(sgroupId);\n    const sgroupAtoms = sgroup.item.atoms;\n\n    selection.atoms = selection.atoms.concat(sgroupAtoms);\n\n    restruct.molecule.bonds.forEach((bond, bondId) => {\n      if (\n        sgroupAtoms.indexOf(bond.begin) >= 0 &&\n        sgroupAtoms.indexOf(bond.end) >= 0\n      ) {\n        selection.bonds.push(bondId);\n      }\n    });\n  });\n\n  selection.atoms = Array.from(new Set(selection.atoms));\n  selection.bonds = Array.from(new Set(selection.bonds));\n\n  selection.atoms.forEach((atomId) => {\n    const sgroup = struct.getGroupFromAtomId(atomId);\n    if (sgroup && sgroup.isSuperatomWithoutLabel) {\n      const attachmentPoints = sgroup.getAttachmentPoints();\n      attachmentPoints.forEach((attachmentPoint) => {\n        if (\n          attachmentPoint.atomId === atomId &&\n          isNumber(attachmentPoint.leaveAtomId) &&\n          !selection.atoms.includes(attachmentPoint.leaveAtomId)\n        ) {\n          action.addOp(\n            new SGroupAtomRemove(sgroup.id, attachmentPoint.leaveAtomId),\n          );\n          action.addOp(new AtomDelete(attachmentPoint.leaveAtomId));\n        }\n      });\n    }\n  });\n\n  selection.atoms.forEach((aid) => {\n    restruct.molecule.atomGetNeighbors(aid).forEach((nei) => {\n      if (selection.bonds.indexOf(nei.bid) === -1) {\n        selection.bonds = selection.bonds.concat([nei.bid]);\n      }\n    });\n  });\n\n  const actionRemoveBonds = new Action();\n  selection.bonds.forEach((bid) => {\n    const frid = restruct.molecule.getBondFragment(bid);\n    if (frids.indexOf(frid) < 0) frids.push(frid);\n\n    actionRemoveBonds.mergeWith(\n      fromBondDeletion(restruct, bid, selection.atoms),\n    );\n  });\n\n  const removedRGroupAttachmentPoints: number[] = [];\n  selection.atoms.forEach((aid) => {\n    const frid3 = restruct.molecule.atoms.get(aid).fragment;\n    if (frids.indexOf(frid3) < 0) frids.push(frid3);\n\n    if (removeAtomFromSgroupIfNeeded(action, restruct, aid)) {\n      atomsToRemove.push(aid);\n    }\n\n    action.addOp(new AtomDelete(aid));\n\n    const attachmentPointsToDelete =\n      restruct.molecule.getRGroupAttachmentPointsByAtomId(aid);\n    attachmentPointsToDelete.forEach((id) => {\n      action.addOp(new RGroupAttachmentPointRemove(id));\n      removedRGroupAttachmentPoints.push(id);\n    });\n  });\n\n  removeSgroupIfNeeded(action, restruct, atomsToRemove);\n\n  selection.rxnArrows.forEach((id) => {\n    action.addOp(new RxnArrowDelete(id));\n  });\n\n  selection.rxnPluses.forEach((id) => {\n    action.addOp(new RxnPlusDelete(id));\n  });\n\n  selection.simpleObjects.forEach((id) => {\n    action.addOp(new SimpleObjectDelete(id));\n  });\n\n  selection.texts.forEach((id) => {\n    action.addOp(new TextDelete(id));\n  });\n\n  selection[IMAGE_KEY].forEach((id) => {\n    action.addOp(new ImageDelete(id));\n  });\n\n  selection[MULTITAIL_ARROW_KEY].forEach((id) => {\n    action.addOp(new MultitailArrowDelete(id));\n  });\n\n  const actionToDeleteRGroupAttachmentPoints = new Action();\n  selection.rgroupAttachmentPoints.forEach((id) => {\n    if (!removedRGroupAttachmentPoints.includes(id)) {\n      actionToDeleteRGroupAttachmentPoints.mergeWith(\n        fromRGroupAttachmentPointDeletion(restruct, id),\n      );\n    }\n  });\n\n  action = action.perform(restruct);\n  action\n    .mergeWith(actionRemoveBonds)\n    .mergeWith(actionToDeleteRGroupAttachmentPoints);\n\n  const rgForRemove: Array<number> = frids.map(\n    (frid) => RGroup.findRGroupByFragment(restruct.molecule.rgroups, frid)!,\n  );\n\n  while (frids.length > 0) {\n    action = fromFragmentSplit(restruct, frids.pop(), rgForRemove).mergeWith(\n      action,\n    );\n  }\n\n  return action;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AtomAdd,\n  BondAdd,\n  FragmentAdd,\n  FragmentAddStereoAtom,\n  RGroupFragment,\n  RxnArrowAdd,\n  RxnPlusAdd,\n  SimpleObjectAdd,\n  TextCreate,\n  CalcImplicitH,\n  FragmentSetProperties,\n  BondAttr,\n  AtomAttr,\n  ImageUpsert,\n  MultitailArrowUpsert,\n} from '../operations';\nimport { fromRGroupAttrs, fromUpdateIfThen } from './rgroup';\n\nimport { Action } from './action';\nimport { MultitailArrow, SGroup, Struct, Vec2 } from 'domain/entities';\nimport { fromSgroupAddition } from './sgroup';\nimport { fromRGroupAttachmentPointAddition } from './rgroupAttachmentPoint';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\nimport { Image } from 'domain/entities/image';\n\ntype CreatedItems = {\n  atoms: number[];\n  bonds: number[];\n  rxnArrows: number[];\n  rxnPluses: number[];\n  texts: number[];\n  images: number[];\n  simpleObjects: number[];\n  multitailArrows: number[];\n};\n\nexport function fromPaste(\n  restruct,\n  pstruct,\n  point,\n  angle = 0,\n  isPreview = false,\n): [Action, { atoms: number[]; bonds: number[] }, CreatedItems] {\n  const xy0 = getStructCenter(pstruct);\n  const offset = Vec2.diff(point, xy0);\n\n  const action = new Action();\n\n  const aidMap = new Map();\n  const fridMap = new Map();\n\n  const pasteItems = {\n    // only atoms and bonds now\n    atoms: [] as number[],\n    bonds: [] as number[],\n  };\n\n  const items: CreatedItems = {\n    atoms: [],\n    bonds: [],\n    rxnArrows: [],\n    rxnPluses: [],\n    texts: [],\n    images: [],\n    simpleObjects: [],\n    multitailArrows: [],\n  };\n\n  pstruct.atoms.forEach((atom, aid) => {\n    if (!fridMap.has(atom.fragment) && !pstruct.isAtomFromMacromolecule(aid)) {\n      fridMap.set(\n        atom.fragment,\n        (\n          action.addOp(\n            new FragmentAdd(null, atom.fragment.properties).perform(restruct),\n          ) as FragmentAdd\n        ).frid,\n      );\n    }\n\n    const tmpAtom = Object.assign(atom.clone(), {\n      fragment: fridMap.get(atom.fragment),\n    });\n    const operation = new AtomAdd(\n      tmpAtom,\n      Vec2.diff(atom.pp, xy0).rotate(angle).add(point),\n    ).perform(restruct) as AtomAdd;\n    action.addOp(operation);\n    aidMap.set(aid, operation.data.aid);\n\n    pasteItems.atoms.push(operation.data.aid);\n    items.atoms.push(operation.data.aid);\n\n    action.mergeWith(\n      fromRGroupAttachmentPointAddition(\n        restruct,\n        tmpAtom.attachmentPoints,\n        operation.data.aid,\n      ),\n    );\n  });\n\n  pstruct.frags.forEach((frag, frid) => {\n    if (!frag) return;\n    if (frag.properties) {\n      action.addOp(\n        new FragmentSetProperties(fridMap.get(frid), frag.properties).perform(\n          restruct,\n        ),\n      );\n    }\n    frag.stereoAtoms.forEach((aid) =>\n      action.addOp(\n        new FragmentAddStereoAtom(fridMap.get(frid), aidMap.get(aid)).perform(\n          restruct,\n        ),\n      ),\n    );\n  });\n\n  pstruct.bonds.forEach((bond) => {\n    const operation = new BondAdd(\n      aidMap.get(bond.begin),\n      aidMap.get(bond.end),\n      bond,\n      false,\n    ).perform(restruct) as BondAdd;\n    action.addOp(operation);\n\n    pasteItems.bonds.push(operation.data.bid);\n    items.bonds.push(operation.data.bid);\n    new BondAttr(operation.data.bid, 'isPreview', isPreview, false).perform(\n      restruct,\n    );\n  });\n\n  pstruct.sgroups.forEach((sg: SGroup) => {\n    const newsgid = restruct.molecule.sgroups.newId();\n    const sgAtoms = sg.atoms.map((aid) => aidMap.get(aid));\n    const attachmentPoints = sg.cloneAttachmentPoints(aidMap);\n    if (\n      sg.isNotContractible(pstruct) &&\n      !(sg instanceof MonomerMicromolecule)\n    ) {\n      sg.setAttr('expanded', true);\n    }\n    const sgAction = fromSgroupAddition(\n      restruct,\n      sg.type,\n      sgAtoms,\n      sg.data,\n      newsgid,\n      attachmentPoints,\n      sg.pp ? sg.pp.add(offset) : null,\n      sg.type === 'SUP' ? sg.isExpanded() : null,\n      sg.data.name,\n      sg,\n    );\n    sgAction.operations.reverse().forEach((oper) => {\n      action.addOp(oper);\n    });\n  });\n\n  pasteItems.atoms.forEach((aid) => {\n    action.addOp(new CalcImplicitH([aid]).perform(restruct));\n    new AtomAttr(aid, 'isPreview', isPreview).perform(restruct);\n  });\n\n  pstruct.rxnArrows.forEach((rxnArrow) => {\n    const operation = new RxnArrowAdd(\n      rxnArrow.pos.map((p) => p.add(offset)),\n      rxnArrow.mode,\n    ).perform(restruct);\n    action.addOp(operation);\n    items.rxnArrows.push(operation.data.id);\n  });\n\n  pstruct.rxnPluses.forEach((plus) => {\n    const operation = new RxnPlusAdd(plus.pp.add(offset)).perform(restruct);\n    action.addOp(operation);\n    items.rxnPluses.push(operation.data.plid);\n  });\n\n  pstruct.simpleObjects.forEach((simpleObject) => {\n    const operation = new SimpleObjectAdd(\n      simpleObject.pos.map((p) => p.add(offset)),\n      simpleObject.mode,\n    ).perform(restruct);\n    action.addOp(operation);\n    items.simpleObjects.push(operation.data.id);\n  });\n\n  pstruct.texts.forEach((text) => {\n    const operation = new TextCreate(\n      text.content,\n      text.position.add(offset),\n      text.pos.map((p) => p.add(offset)),\n    ).perform(restruct);\n    action.addOp(operation);\n    items.texts.push(operation.data.id);\n  });\n\n  pstruct.images.forEach((image: Image) => {\n    const clonedImage = image.clone();\n    clonedImage.addPositionOffset(offset);\n    const operation = new ImageUpsert(clonedImage).perform(restruct);\n    action.addOp(operation);\n    items.images.push(operation.data.id);\n  });\n\n  pstruct.multitailArrows.forEach((multitailArrow: MultitailArrow) => {\n    const clonedMultitailArrow = multitailArrow.clone();\n    clonedMultitailArrow.move(offset);\n    const operation = new MultitailArrowUpsert(clonedMultitailArrow).perform(\n      restruct,\n    );\n    action.addOp(operation);\n    items.multitailArrows.push(operation.data.id);\n  });\n\n  pstruct.rgroups.forEach((rg, rgid) => {\n    rg.frags.forEach((__frag, frid) => {\n      action.addOp(\n        new RGroupFragment(rgid, fridMap.get(frid)).perform(restruct),\n      );\n    });\n    const ifThen = pstruct.rgroups.get(rgid).ifthen;\n    const newRgId = pstruct.rgroups.get(ifThen) ? ifThen : 0;\n    action\n      .mergeWith(fromRGroupAttrs(restruct, rgid, rg.getAttrs()))\n      .mergeWith(fromUpdateIfThen(restruct, newRgId, rg.ifthen));\n  });\n\n  action.operations.reverse();\n  return [action, pasteItems, items];\n}\n\nfunction getStructCenter(struct: Struct): Vec2 {\n  const isOnlyOneSGroup = struct.sgroups.size === 1;\n  if (isOnlyOneSGroup) {\n    const onlyOneStructsSgroupId = struct.sgroups.keys().next().value;\n    const sgroup = struct.sgroups.get(onlyOneStructsSgroupId) as SGroup;\n    if (sgroup.isContracted()) {\n      return sgroup.getContractedPosition(struct).position;\n    }\n  }\n  if (struct.atoms.size > 0) {\n    let xmin = 1e50;\n    let ymin = xmin;\n    let xmax = -xmin;\n    let ymax = -ymin;\n\n    struct.atoms.forEach((atom) => {\n      xmin = Math.min(xmin, atom.pp.x);\n      ymin = Math.min(ymin, atom.pp.y);\n      xmax = Math.max(xmax, atom.pp.x);\n      ymax = Math.max(ymax, atom.pp.y);\n    });\n    return new Vec2((xmin + xmax) / 2, (ymin + ymax) / 2); // TODO: check\n  }\n  // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n  if (struct.rxnArrows.size > 0) return struct.rxnArrows.get(0)!.center();\n  // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n  if (struct.rxnPluses.size > 0) return struct.rxnPluses.get(0)!.pp;\n  if (struct.simpleObjects.size > 0)\n    // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n    return struct.simpleObjects.get(0)!.center();\n  // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n  if (struct.texts.size > 0) return struct.texts.get(0)!.position;\n  // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n  if (struct.images.size > 0) return struct.images.get(0)!.center();\n  if (struct.multitailArrows.size > 0)\n    // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n    return struct.multitailArrows.get(0)!.center();\n\n  return new Vec2(0, 0);\n}\n","import { ReStruct } from 'application/render';\nimport { ImageReferencePositionInfo, Vec2 } from 'domain/entities';\nimport {\n  Action,\n  ImageDelete,\n  ImageMove,\n  ImageResize,\n  ImageUpsert,\n} from 'application/editor';\nimport { Image } from 'domain/entities/image';\n\nexport function fromImageCreation(\n  reStruct: ReStruct,\n  bitmap: string,\n  center: Vec2,\n  halfSize: Vec2,\n) {\n  const action = new Action();\n  const image = new Image(bitmap, center, halfSize);\n  action.addOp(new ImageUpsert(image));\n  return action.perform(reStruct);\n}\n\nexport function fromImageDeletion(reStruct: ReStruct, id: number) {\n  const action = new Action();\n  action.addOp(new ImageDelete(id));\n  return action.perform(reStruct);\n}\n\nexport function fromImageMove(reStruct: ReStruct, id: number, offset: Vec2) {\n  const action = new Action();\n  action.addOp(new ImageMove(id, offset));\n  return action.perform(reStruct);\n}\n\nexport function fromImageResize(\n  reStruct: ReStruct,\n  id: number,\n  position: Vec2,\n  referencePositionInfo: ImageReferencePositionInfo,\n) {\n  const action = new Action();\n  const positionWithOffset = position.add(referencePositionInfo.offset);\n  action.addOp(\n    new ImageResize(id, positionWithOffset, referencePositionInfo.name),\n  );\n  return action.perform(reStruct);\n}\n","import { MultitailArrowReferencePosition, ReStruct } from 'application/render';\nimport {\n  Action,\n  MultitailArrowDelete,\n  MultitailArrowUpsert,\n  MultitailArrowMove,\n  MultitailArrowAddTail,\n  MultitailArrowRemoveTail,\n  MultitailArrowResizeTailHead,\n  MultitailArrowMoveHeadTail,\n} from 'application/editor';\nimport { Vec2, MultitailArrow } from 'domain/entities';\n\nexport function fromMultitailArrowCreation(\n  reStruct: ReStruct,\n  topLeft: Vec2,\n  bottomRight: Vec2,\n) {\n  const action = new Action();\n  const multitailArrow = MultitailArrow.fromTwoPoints(topLeft, bottomRight);\n  action.addOp(new MultitailArrowUpsert(multitailArrow));\n  return action.perform(reStruct);\n}\n\nexport function fromMultitailArrowDeletion(reStruct: ReStruct, id: number) {\n  const action = new Action();\n  action.addOp(new MultitailArrowDelete(id));\n  return action.perform(reStruct);\n}\n\nexport function fromMultitailArrowMove(\n  reStruct: ReStruct,\n  id: number,\n  offset: Vec2,\n) {\n  const action = new Action();\n\n  action.addOp(new MultitailArrowMove(id, offset));\n  return action.perform(reStruct);\n}\n\nexport function fromMultitailArrowTailAdd(reStruct: ReStruct, id: number) {\n  const action = new Action();\n\n  action.addOp(new MultitailArrowAddTail(id));\n  return action.perform(reStruct);\n}\n\nexport function fromMultitailArrowTailRemove(\n  reStruct: ReStruct,\n  id: number,\n  tailId: number,\n) {\n  const action = new Action();\n\n  action.addOp(new MultitailArrowRemoveTail(id, tailId));\n  return action.perform(reStruct);\n}\n\nexport function fromMultitailArrowHeadTailsResize(\n  reStruct: ReStruct,\n  id: number,\n  ref: MultitailArrowReferencePosition,\n  offset: number,\n) {\n  const action = new Action();\n  action.addOp(\n    new MultitailArrowResizeTailHead(id, offset, ref.name === 'head'),\n  );\n  return action.perform(reStruct);\n}\n\nexport function fromMultitailArrowHeadTailMove(\n  reStruct: ReStruct,\n  id: number,\n  ref: MultitailArrowReferencePosition,\n  offset: number,\n  normalize?: true,\n) {\n  const action = new Action();\n  action.addOp(\n    new MultitailArrowMoveHeadTail(id, offset, ref.name, ref.tailId, normalize),\n  );\n  return action.perform(reStruct);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ReStruct } from 'application/render';\nimport { Vec2 } from 'domain/entities';\nimport {\n  RxnArrowAdd,\n  RxnArrowDelete,\n  RxnArrowResize,\n  RxnPlusAdd,\n  RxnPlusDelete,\n} from '../operations';\n\nimport { Action } from './action';\n\nexport function fromArrowAddition(restruct, pos, mode) {\n  const action = new Action();\n  action.addOp(new RxnArrowAdd(pos, mode));\n  return action.perform(restruct);\n}\n\nexport function fromArrowResizing(\n  restruct: ReStruct,\n  id: number,\n  d: Vec2,\n  current: Vec2,\n  anchor: Vec2 | null,\n  isSnappingEnabled: boolean,\n) {\n  const action = new Action();\n  action.addOp(\n    new RxnArrowResize(id, d, current, anchor, false, isSnappingEnabled),\n  );\n  return action.perform(restruct);\n}\n\nexport function fromArrowDeletion(restruct, id) {\n  const action = new Action();\n  action.addOp(new RxnArrowDelete(id));\n  return action.perform(restruct);\n}\n\nexport function fromPlusAddition(restruct, pos) {\n  const action = new Action();\n  action.addOp(new RxnPlusAdd(pos).perform(restruct));\n  return action;\n}\n\nexport function fromPlusDeletion(restruct, id) {\n  const action = new Action();\n  action.addOp(new RxnPlusDelete(id));\n  return action.perform(restruct);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AtomMove,\n  BondAttr,\n  EnhancedFlagMove,\n  RxnArrowMove,\n  RxnArrowRotate,\n  RxnPlusMove,\n  SGroupDataMove,\n  TextMove,\n} from '../operations';\nimport { Bond, Fragment, Struct, Vec2 } from 'domain/entities';\nimport { ReStruct } from 'application/render';\nimport { getRelSGroupsBySelection, structSelection } from './utils';\nimport { Action } from './action';\nimport { EditorSelection } from '../editor.types';\n\nexport type FlipDirection = 'horizontal' | 'vertical';\n\nexport function fromFlip(\n  reStruct: ReStruct,\n  selection: EditorSelection | null,\n  flipDirection: FlipDirection,\n  center: Vec2,\n) {\n  const action = new Action();\n  const structToFlip = selection || structSelection(reStruct.molecule);\n\n  action.mergeWith(\n    fromStructureFlip(reStruct, structToFlip, flipDirection, center),\n  );\n\n  if (structToFlip.rxnArrows) {\n    action.mergeWith(\n      fromRxnArrowFlip(reStruct, structToFlip.rxnArrows, flipDirection, center),\n    );\n  }\n\n  if (structToFlip.rxnPluses) {\n    action.mergeWith(\n      fromRxnPlusFlip(reStruct, structToFlip.rxnPluses, flipDirection, center),\n    );\n  }\n\n  if (structToFlip.texts) {\n    action.mergeWith(\n      fromTextFlip(reStruct, structToFlip.texts, flipDirection, center),\n    );\n  }\n\n  return action;\n}\n\nfunction fromRxnArrowFlip(\n  reStruct: ReStruct,\n  rxnArrowIds: number[],\n  flipDirection: FlipDirection,\n  center: Vec2,\n) {\n  const action = new Action();\n\n  rxnArrowIds.forEach((arrowId) => {\n    const rxnArrow = reStruct.molecule.rxnArrows.get(arrowId);\n    if (!rxnArrow) {\n      return;\n    }\n\n    const [start, end] = rxnArrow.pos;\n    const oxAngle = end.sub(start).oxAngle();\n    const oyAngle = oxAngle - Math.PI / 2;\n    const rotateAngle =\n      flipDirection === 'vertical' ? -2 * oxAngle : -2 * oyAngle;\n    action.addOp(new RxnArrowRotate(arrowId, rotateAngle, rxnArrow.center()));\n\n    const difference = flipPointByCenter(\n      rxnArrow.center(),\n      center,\n      flipDirection,\n    );\n    action.addOp(new RxnArrowMove(arrowId, difference));\n  });\n\n  return action.perform(reStruct);\n}\n\nfunction fromRxnPlusFlip(\n  reStruct: ReStruct,\n  rxnPlusIds: number[],\n  flipDirection: FlipDirection,\n  center: Vec2,\n) {\n  const action = new Action();\n\n  rxnPlusIds.forEach((plusId) => {\n    const rxnPlus = reStruct.molecule.rxnPluses.get(plusId);\n    if (!rxnPlus) {\n      return;\n    }\n\n    const difference = flipPointByCenter(rxnPlus.pp, center, flipDirection);\n    action.addOp(new RxnPlusMove(plusId, difference));\n  });\n\n  return action.perform(reStruct);\n}\n\nfunction fromTextFlip(\n  reStruct: ReStruct,\n  textIds: number[],\n  flipDirection: FlipDirection,\n  center: Vec2,\n) {\n  const action = new Action();\n\n  textIds.forEach((textId) => {\n    const text = reStruct.molecule.texts.get(textId);\n    if (!text) {\n      return;\n    }\n\n    // Note: text has two position properties\n    //      `position`: the middle left point\n    //      `pos`: a box (not bounding box)\n    // `TextMove` is to move `position`, so we have to calculate the flipped `position`\n    const textMiddleLeft = text.pos[0];\n    const textMiddleRight = text.pos[2];\n    const textCenter = Vec2.centre(textMiddleLeft, textMiddleRight);\n\n    const difference = flipPointByCenter(textCenter, center, flipDirection);\n    action.addOp(new TextMove(textId, difference));\n  });\n\n  return action.perform(reStruct);\n}\n\nfunction fromStructureFlip(\n  reStruct: ReStruct,\n  selection: EditorSelection | null,\n  flipDirection: FlipDirection,\n  center: Vec2,\n) {\n  const struct = reStruct.molecule;\n  const action = new Action();\n\n  selection?.atoms?.forEach((atomId) => {\n    const atom = struct.atoms.get(atomId);\n    if (!atom) {\n      return;\n    }\n\n    const difference = flipPointByCenter(atom.pp, center, flipDirection);\n    action.addOp(new AtomMove(atomId, difference));\n  });\n\n  const sGroups = getRelSGroupsBySelection(struct, selection?.atoms || []);\n  sGroups.forEach((sGroup) => {\n    if (!sGroup.pp) {\n      return;\n    }\n    const difference = flipPointByCenter(sGroup.pp, center, flipDirection);\n    action.addOp(new SGroupDataMove(sGroup.id, difference));\n  });\n\n  if (selection?.bonds) {\n    flipBonds(selection.bonds, struct, action);\n  }\n\n  return action.perform(reStruct);\n}\n\nfunction flipBonds(bondIds: number[], struct: Struct, action: Action) {\n  bondIds.forEach((bondId) => {\n    const bond = struct.bonds.get(bondId);\n\n    if (!bond) {\n      return;\n    }\n\n    if (bond.type !== Bond.PATTERN.TYPE.SINGLE) {\n      return;\n    }\n\n    if (bond.stereo === Bond.PATTERN.STEREO.UP) {\n      action.addOp(new BondAttr(bondId, 'stereo', Bond.PATTERN.STEREO.DOWN));\n      return;\n    }\n\n    if (bond.stereo === Bond.PATTERN.STEREO.DOWN) {\n      action.addOp(new BondAttr(bondId, 'stereo', Bond.PATTERN.STEREO.UP));\n    }\n  });\n}\n\nfunction flipPointByCenter(\n  pointToFlip: Vec2,\n  center: Vec2,\n  flipDirection: FlipDirection,\n) {\n  const d = new Vec2();\n  if (flipDirection === 'horizontal') {\n    d.x =\n      center.x > pointToFlip.x\n        ? 2 * (center.x - pointToFlip.x)\n        : -2 * (pointToFlip.x - center.x);\n  } else {\n    // 'vertical'\n    d.y =\n      center.y > pointToFlip.y\n        ? 2 * (center.y - pointToFlip.y)\n        : -2 * (pointToFlip.y - center.y);\n  }\n  return d;\n}\n\nexport function fromRotate(restruct, selection, center, angle) {\n  // eslint-disable-line\n  const struct = restruct.molecule;\n\n  const action = new Action();\n\n  if (!selection) {\n    selection = structSelection(struct);\n  }\n\n  if (selection.atoms) {\n    selection.atoms.forEach((aid) => {\n      const atom = struct.atoms.get(aid);\n      action.addOp(new AtomMove(aid, rotateDelta(atom.pp, center, angle)));\n    });\n\n    if (!selection.sgroupData) {\n      const sgroups = getRelSGroupsBySelection(struct, selection.atoms);\n\n      sgroups.forEach((sg) => {\n        action.addOp(\n          new SGroupDataMove(sg.id, rotateDelta(sg.pp, center, angle)),\n        );\n      });\n    }\n  }\n\n  if (selection.rxnArrows) {\n    selection.rxnArrows.forEach((arrowId) => {\n      action.addOp(new RxnArrowRotate(arrowId, angle, center));\n    });\n  }\n\n  if (selection.rxnPluses) {\n    selection.rxnPluses.forEach((pid) => {\n      const plus = struct.rxnPluses.get(pid);\n      action.addOp(new RxnPlusMove(pid, rotateDelta(plus.pp, center, angle)));\n    });\n  }\n\n  if (selection.texts) {\n    selection.texts.forEach((textId) => {\n      const text = struct.texts.get(textId);\n      action.addOp(\n        new TextMove(textId, rotateDelta(text.position, center, angle)),\n      );\n    });\n  }\n\n  if (selection.sgroupData) {\n    selection.sgroupData.forEach((did) => {\n      const data = struct.sgroups.get(did);\n      action.addOp(\n        new SGroupDataMove(did, rotateDelta(data.pp, center, angle)),\n      );\n    });\n  }\n\n  if (selection.enhancedFlags) {\n    selection.enhancedFlags.forEach((flagId) => {\n      const frId = flagId;\n      const frag = restruct.molecule.frags.get(frId);\n      action.addOp(\n        new EnhancedFlagMove(\n          flagId,\n          rotateDelta(\n            frag.stereoFlagPosition ||\n              Fragment.getDefaultStereoFlagPosition(restruct.molecule, frId),\n            center,\n            angle,\n          ),\n        ),\n      );\n    });\n  }\n\n  return action.perform(restruct);\n}\n\nfunction rotateDelta(v, center, angle) {\n  let v1 = v.sub(center);\n  v1 = v1.rotate(angle);\n  v1.add_(center); // eslint-disable-line no-underscore-dangle\n  return v1.sub(v);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  SimpleObjectAdd,\n  SimpleObjectDelete,\n  SimpleObjectResize,\n} from '../operations';\n\nimport { Action } from './action';\n\nexport function fromSimpleObjectDeletion(restruct, id) {\n  const action = new Action();\n  action.addOp(new SimpleObjectDelete(id));\n  return action.perform(restruct);\n}\n\nexport function fromSimpleObjectAddition(restruct, pos, mode, toCircle) {\n  const action = new Action();\n  action.addOp(new SimpleObjectAdd(pos, mode, toCircle));\n  return action.perform(restruct);\n}\n\nexport function fromSimpleObjectResizing(\n  restruct,\n  id,\n  d,\n  current,\n  anchor,\n  toCircle,\n) {\n  const action = new Action();\n  action.addOp(new SimpleObjectResize(id, d, current, anchor, false, toCircle));\n  return action.perform(restruct);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Atom, Bond, SGroup, Struct, Vec2 } from 'domain/entities';\nimport { AtomAdd, BondAdd, BondAttr, CalcImplicitH } from '../operations';\nimport { atomForNewBond, atomGetAttr } from './utils';\nimport { fromAtomsAttrs, mergeSgroups } from './atom';\nimport { fromBondStereoUpdate, fromBondsAttrs, fromBondAddition } from './bond';\n\nimport { Action } from './action';\nimport closest from '../shared/closest';\nimport { fromAromaticTemplateOnBond } from './aromaticFusing';\nimport { fromPaste } from './paste';\nimport utils from '../shared/utils';\nimport { fromSgroupAddition } from './sgroup';\n\nconst benzeneMoleculeName = 'Benzene';\nconst cyclopentadieneMoleculeName = 'Cyclopentadiene';\nconst benzeneDoubleBondIndexes = [2, 4];\n\nexport function fromTemplateOnCanvas(\n  restruct,\n  template,\n  pos,\n  angle = 0,\n  isPreview = true,\n): [Action, { atoms: number[]; bonds: number[] }] {\n  const [action, pasteItems] = fromPaste(\n    restruct,\n    template.molecule,\n    pos,\n    angle,\n    isPreview,\n  );\n\n  action.addOp(new CalcImplicitH(pasteItems.atoms).perform(restruct));\n\n  return [action, pasteItems];\n}\n\nfunction extraBondAction(restruct, aid, angle) {\n  let action = new Action();\n  const frid = atomGetAttr(restruct, aid, 'fragment');\n  let additionalAtom: any = null;\n\n  if (angle === null) {\n    const middleAtom = atomForNewBond(restruct, aid);\n    const actionRes = fromBondAddition(\n      restruct,\n      { type: 1 },\n      aid,\n      middleAtom.atom,\n      undefined,\n      middleAtom.pos.get_xy0(),\n    );\n    action = actionRes[0];\n    action.operations.reverse();\n    additionalAtom = actionRes[2];\n  } else {\n    const operation = new AtomAdd(\n      { label: 'C', fragment: frid },\n      new Vec2(1, 0)\n        .rotate(angle)\n        .add(restruct.molecule.atoms.get(aid).pp)\n        .get_xy0(),\n    ).perform(restruct) as AtomAdd;\n\n    action.addOp(operation);\n    action.addOp(\n      new BondAdd(aid, operation.data.aid, { type: 1 }).perform(restruct),\n    );\n\n    additionalAtom = operation.data.aid;\n  }\n\n  return { action, aid1: additionalAtom };\n}\n\nexport function fromTemplateOnAtom(\n  restruct,\n  template,\n  aid,\n  angle,\n  extraBond,\n  isPreview = false,\n): [Action, { atoms: number[]; bonds: number[] }] {\n  let action = new Action();\n\n  const tmpl = template.molecule;\n  const struct = restruct.molecule;\n\n  const isTmplSingleGroup = template.molecule.isSingleGroup();\n\n  let atom = struct.atoms.get(aid); // aid - the atom that was clicked on\n  let aid1 = aid; // aid1 - the atom on the other end of the extra bond || aid\n\n  let delta: any = null;\n\n  if (extraBond) {\n    // create extra bond after click on atom\n    const extraRes = extraBondAction(restruct, aid, angle);\n    action = extraRes.action;\n    aid1 = extraRes.aid1;\n\n    atom = struct.atoms.get(aid1);\n    delta =\n      utils.calcAngle(struct.atoms.get(aid).pp, atom.pp) - template.angle0;\n  } else {\n    if (angle === null) {\n      angle = utils.calcAngle(atom.pp, atomForNewBond(restruct, aid).pos);\n    }\n    delta = angle - template.angle0;\n  }\n\n  const map = new Map();\n  const xy0 = tmpl.atoms.get(template.aid).pp;\n  const frid = atomGetAttr(restruct, aid, 'fragment');\n\n  /* For merge */\n  const pasteItems = {\n    // only atoms and bonds now\n    atoms: [] as number[],\n    bonds: [] as number[],\n  };\n  /* ----- */\n\n  tmpl.atoms.forEach((a, id) => {\n    const attrs: any = Atom.getAttrHash(a);\n    attrs.fragment = frid;\n\n    if (id === template.aid) {\n      action.mergeWith(fromAtomsAttrs(restruct, aid1, attrs, true));\n      map.set(id, aid1);\n      pasteItems.atoms.push(aid1);\n    } else {\n      const v = Vec2.diff(a.pp, xy0).rotate(delta).add(atom.pp);\n\n      const operation = new AtomAdd(attrs, v.get_xy0()).perform(\n        restruct,\n      ) as AtomAdd;\n      action.addOp(operation);\n      map.set(id, operation.data.aid);\n      pasteItems.atoms.push(operation.data.aid);\n    }\n  });\n\n  if (!isTmplSingleGroup) mergeSgroups(action, restruct, pasteItems.atoms, aid);\n\n  tmpl.bonds.forEach((bond) => {\n    const operation = new BondAdd(\n      map.get(bond.begin),\n      map.get(bond.end),\n      bond,\n    ).perform(restruct) as BondAdd;\n    action.addOp(operation);\n    new BondAttr(operation.data.bid, 'isPreview', isPreview).perform(restruct);\n\n    pasteItems.bonds.push(operation.data.bid);\n  });\n\n  tmpl.sgroups.forEach((sg: SGroup) => {\n    const newsgid = restruct.molecule.sgroups.newId();\n    const sgAtoms = sg.atoms.map((aid) => map.get(aid));\n    const attachmentPoints = sg.cloneAttachmentPoints(map);\n    const sgAction = fromSgroupAddition(\n      restruct,\n      sg.type,\n      sgAtoms,\n      {\n        ...sg.data,\n        expanded: isPreview ? true : sg.data.expanded,\n      },\n      newsgid,\n      attachmentPoints,\n      atom.pp,\n      sg.type === 'SUP' ? sg.isExpanded() : null,\n      sg.data.name,\n    );\n    sgAction.operations.reverse().forEach((oper) => {\n      action.addOp(oper);\n    });\n  });\n\n  action.operations.reverse();\n\n  action.addOp(new CalcImplicitH([...pasteItems.atoms, aid]).perform(restruct));\n  action.mergeWith(\n    fromBondStereoUpdate(\n      restruct,\n      restruct.molecule.bonds.get(pasteItems.bonds[0]),\n    ),\n  );\n\n  return [action, pasteItems];\n}\n\nexport function fromTemplateOnBondAction(\n  restruct,\n  template,\n  bid,\n  events,\n  flip,\n  force,\n  isPreview = false,\n) {\n  if (!force) return fromTemplateOnBond(restruct, template, bid, flip);\n\n  const simpleFusing = (restruct, template, bid) =>\n    fromTemplateOnBond(restruct, template, bid, flip, isPreview); // eslint-disable-line\n  /* aromatic merge (Promise) */\n  return fromAromaticTemplateOnBond(\n    restruct,\n    template,\n    bid,\n    events,\n    simpleFusing,\n  );\n}\n\nfunction getConnectingBond(\n  template: Struct,\n  struct: Struct,\n  bondId: number,\n  bond: Bond,\n) {\n  const isBenzeneTemplate = template.name === benzeneMoleculeName;\n  const isCyclopentadieneTemplate =\n    template.name === cyclopentadieneMoleculeName;\n  if (template.bonds.size && (isBenzeneTemplate || isCyclopentadieneTemplate)) {\n    const { beginBondIds, endBondIds } = Bond.getBondNeighbourIds(\n      struct,\n      bondId,\n    );\n    const isOnlyTwoConnectingBonds =\n      beginBondIds.length === 1 && endBondIds.length === 1;\n\n    if (!isOnlyTwoConnectingBonds) {\n      return null;\n    }\n    const beginBond = struct.bonds.get(beginBondIds[0]);\n    const endBond = struct.bonds.get(endBondIds[0]);\n\n    if (!beginBond || !endBond) {\n      throw new Error('Incorrect bond id was provided');\n    }\n\n    if (isBenzeneTemplate) {\n      return Bond.getBenzeneConnectingBondType(bond, beginBond, endBond);\n    }\n\n    if (isCyclopentadieneTemplate) {\n      return Bond.getCyclopentadieneFusingBondType(bond, beginBond, endBond);\n    }\n  }\n  return null;\n}\n\nfunction fromTemplateOnBond(restruct, template, bid, flip, isPreview = false) {\n  // TODO: refactor function !!\n  const action = new Action();\n\n  const tmpl = template.molecule;\n  const struct = restruct.molecule;\n\n  const bond = struct.bonds.get(bid);\n  const tmplBond = tmpl.bonds.get(template.bid);\n\n  const tmplBegin = tmpl.atoms.get(flip ? tmplBond.end : tmplBond.begin);\n\n  const atomsMap = new Map([\n    [tmplBond.begin, flip ? bond.end : bond.begin],\n    [tmplBond.end, flip ? bond.begin : bond.end],\n  ]);\n\n  // calc angle\n  const bondAtoms = {\n    begin: flip ? tmplBond.end : tmplBond.begin,\n    end: flip ? tmplBond.begin : tmplBond.end,\n  };\n  const { angle, scale } = utils.mergeBondsParams(\n    struct,\n    bond,\n    tmpl,\n    bondAtoms,\n  );\n\n  const frid = struct.getBondFragment(bid);\n\n  /* For merge */\n  const pasteItems: any = {\n    // only atoms and bonds now\n    atoms: [],\n    bonds: [],\n  };\n  /* ----- */\n\n  tmpl.atoms.forEach((atom, id) => {\n    const attrs: any = Atom.getAttrHash(atom);\n    attrs.fragment = frid;\n    if (id === tmplBond.begin || id === tmplBond.end) {\n      action.mergeWith(fromAtomsAttrs(restruct, atomsMap.get(id), attrs, true));\n      return;\n    }\n\n    const v = Vec2.diff(atom.pp, tmplBegin.pp)\n      .rotate(angle)\n      .scaled(scale)\n      .add(struct.atoms.get(bond.begin).pp);\n    const mergeA = closest.atom(restruct, v, null, 0.1);\n\n    if (mergeA === null) {\n      const operation = new AtomAdd(attrs, v).perform(restruct) as AtomAdd;\n      action.addOp(operation);\n      atomsMap.set(id, operation.data.aid);\n      pasteItems.atoms.push(operation.data.aid);\n    } else {\n      atomsMap.set(id, mergeA.id);\n\n      action.mergeWith(fromAtomsAttrs(restruct, atomsMap.get(id), attrs, true));\n      // TODO [RB] need to merge fragments?\n    }\n  });\n  mergeSgroups(action, restruct, pasteItems.atoms, bond.begin);\n\n  // When a template of \"Benzene\" molecule is attached it\n  // uses specific fusing rules when attaching to a bond\n  // that is connected exactly to one bond on each side.\n  // For more info please refer to: https://github.com/epam/ketcher/issues/1855\n  const fusingBondType = getConnectingBond(tmpl, struct, bid, bond);\n  const isFusingBenzeneBySpecialRules = fusingBondType !== null;\n\n  tmpl.bonds.forEach((tBond, tBondIndex) => {\n    const existId = struct.findBondId(\n      atomsMap.get(tBond.begin),\n      atomsMap.get(tBond.end),\n    );\n    let previewBondId = null;\n    if (existId === null) {\n      const operation = new BondAdd(\n        atomsMap.get(tBond.begin),\n        atomsMap.get(tBond.end),\n        tBond,\n      ).perform(restruct) as BondAdd;\n      action.addOp(operation);\n      const newBondId = operation.data.bid;\n      previewBondId = newBondId;\n\n      if (isFusingBenzeneBySpecialRules) {\n        const isBenzeneTemplate = tmpl.name === benzeneMoleculeName;\n        const isCyclopentadieneTemplate =\n          tmpl.name === cyclopentadieneMoleculeName;\n        if (isBenzeneTemplate) {\n          const newBondType = benzeneDoubleBondIndexes.includes(tBondIndex)\n            ? Bond.PATTERN.TYPE.DOUBLE\n            : Bond.PATTERN.TYPE.SINGLE;\n          action.addOp(\n            new BondAttr(newBondId, 'type', newBondType).perform(restruct),\n          );\n        }\n        if (isCyclopentadieneTemplate) {\n          const { beginBondIds, endBondIds } = Bond.getBondNeighbourIds(\n            struct,\n            bid,\n          );\n          const bondBegin = struct.bonds.get(beginBondIds[0])!;\n          const bondEnd = struct.bonds.get(endBondIds[0])!;\n          const newBondType = Bond.getCyclopentadieneDoubleBondIndexes(\n            bond,\n            bondBegin,\n            bondEnd,\n          ).includes(tBondIndex)\n            ? Bond.PATTERN.TYPE.DOUBLE\n            : Bond.PATTERN.TYPE.SINGLE;\n          action.addOp(\n            new BondAttr(newBondId, 'type', newBondType).perform(restruct),\n          );\n        }\n      }\n\n      pasteItems.bonds.push(newBondId);\n    } else {\n      const commonBond = bond.type > tmplBond.type ? bond : tmplBond;\n      action.mergeWith(fromBondsAttrs(restruct, existId, commonBond, true));\n\n      if (isFusingBenzeneBySpecialRules && fusingBondType) {\n        action.addOp(\n          new BondAttr(bid, 'type', fusingBondType).perform(restruct),\n        );\n      }\n      previewBondId = bid;\n    }\n    action.addOp(\n      new BondAttr(previewBondId, 'isPreview', isPreview).perform(restruct),\n    );\n  });\n\n  if (pasteItems.atoms.length) {\n    action.addOp(\n      new CalcImplicitH([bond.begin, bond.end, ...pasteItems.atoms]).perform(\n        restruct,\n      ),\n    );\n  }\n\n  if (pasteItems.bonds.length) {\n    action.mergeWith(\n      fromBondStereoUpdate(\n        restruct,\n        restruct.molecule.bonds.get(pasteItems.bonds[0]),\n      ),\n    );\n  }\n\n  action.operations.reverse();\n\n  return [action, pasteItems];\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { TextCreate, TextDelete, TextUpdate } from '../operations';\n\nimport { Action } from './action';\nimport { ReStruct } from '../../render';\nimport { Vec2 } from 'domain/entities';\n\nexport function fromTextCreation(\n  restruct: ReStruct,\n  content: string,\n  position: Vec2,\n  pos: Array<Vec2>,\n) {\n  const action = new Action();\n  action.addOp(new TextCreate(content, position, pos));\n  return action.perform(restruct);\n}\n\nexport function fromTextUpdating(\n  restruct: ReStruct,\n  id: number,\n  content: string,\n) {\n  const action = new Action();\n  action.addOp(new TextUpdate(id, content));\n  return action.perform(restruct);\n}\n\nexport function fromTextDeletion(restruct: ReStruct, id: number) {\n  const action = new Action();\n\n  action.addOp(new TextDelete(id));\n\n  return action.perform(restruct);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { Highlight } from 'domain/entities';\nimport { ReStruct } from '../../render';\n\nimport { BaseOperation } from './base';\nimport { OperationType } from './OperationType';\n\ntype Data = {\n  atoms: Array<number>;\n  bonds: Array<number>;\n  rgroupAttachmentPoints: Array<number>;\n  color: string;\n  highlightId?: number;\n};\n\nexport class HighlightAdd extends BaseOperation {\n  data: Data;\n\n  constructor(\n    atoms: Array<number>,\n    bonds: Array<number>,\n    rgroupAttachmentPoints: Array<number>,\n    color: string,\n    highlightId?: number,\n  ) {\n    super(OperationType.ADD_HIGHLIGHT);\n    this.data = {\n      atoms,\n      bonds,\n      rgroupAttachmentPoints,\n      color,\n      highlightId,\n    };\n  }\n\n  execute(restruct: ReStruct) {\n    const { atoms, bonds, rgroupAttachmentPoints, color } = this.data;\n\n    if (!color) {\n      return;\n    }\n\n    const struct = restruct.molecule;\n    const highlight = new Highlight({\n      atoms,\n      bonds,\n      rgroupAttachmentPoints,\n      color,\n    });\n\n    if (typeof this.data.highlightId !== 'number') {\n      this.data.highlightId = struct.highlights.add(highlight);\n    } else {\n      struct.highlights.set(this.data.highlightId, highlight);\n    }\n\n    notifyChanged(restruct, atoms, bonds, rgroupAttachmentPoints);\n  }\n\n  invert() {\n    const { atoms, bonds, rgroupAttachmentPoints, color, highlightId } =\n      this.data;\n    const inverted = new HighlightDelete(\n      highlightId,\n      atoms,\n      bonds,\n      rgroupAttachmentPoints,\n      color,\n    );\n    return inverted;\n  }\n}\n\nexport class HighlightDelete extends BaseOperation {\n  data: Data;\n\n  constructor(\n    highlightId?: number,\n    atoms?: Array<number>,\n    bonds?: Array<number>,\n    rgroupAttachmentPoints?: Array<number>,\n    color?: string,\n  ) {\n    super(OperationType.REMOVE_HIGHLIGHT, 5);\n    this.data = {\n      highlightId,\n      atoms: atoms || [],\n      bonds: bonds || [],\n      rgroupAttachmentPoints: rgroupAttachmentPoints || [],\n      color: color || 'white',\n    };\n  }\n\n  execute(restruct: ReStruct) {\n    if (typeof this.data.highlightId === 'number') {\n      const struct = restruct.molecule;\n\n      const highlightToRemove = struct.highlights.get(this.data.highlightId);\n      if (typeof highlightToRemove === 'undefined') {\n        return;\n      }\n\n      const { atoms, bonds, color } = highlightToRemove;\n\n      this.data.atoms = atoms;\n      this.data.bonds = bonds;\n      this.data.color = color;\n\n      struct.highlights.delete(this.data.highlightId);\n      notifyChanged(restruct, atoms, bonds);\n    }\n  }\n\n  invert() {\n    const { atoms, bonds, rgroupAttachmentPoints, color, highlightId } =\n      this.data;\n    const inverted = new HighlightAdd(\n      atoms,\n      bonds,\n      rgroupAttachmentPoints,\n      color,\n      highlightId,\n    );\n    inverted.data = this.data;\n    return inverted;\n  }\n}\n\nexport class HighlightUpdate extends BaseOperation {\n  // making sure highlightId is not optional\n  newData: Data & { highlightId: number };\n  oldData: Data & { highlightId: number };\n\n  constructor(\n    highlightId: number,\n    atoms: Array<number>,\n    bonds: Array<number>,\n    rgroupAttachmentPoints: Array<number>,\n    color: string,\n  ) {\n    super(OperationType.UPDATE_HIGHLIGHT);\n    this.newData = {\n      atoms,\n      bonds,\n      rgroupAttachmentPoints,\n      color,\n      highlightId,\n    };\n\n    // pre-filling with new data. Upon execution this will be replaced\n    this.oldData = {\n      atoms,\n      bonds,\n      rgroupAttachmentPoints,\n      color,\n      highlightId,\n    };\n  }\n\n  execute(restruct: ReStruct) {\n    const { atoms, bonds, rgroupAttachmentPoints, color } = this.newData;\n    if (!color) {\n      return;\n    }\n\n    const highlightId = this.newData.highlightId;\n    const struct = restruct.molecule;\n\n    const highlightToUpdate = struct.highlights.get(highlightId);\n\n    if (highlightToUpdate) {\n      // saving data of existing highlight\n      const {\n        atoms: oldAtoms,\n        bonds: oldBonds,\n        rgroupAttachmentPoints: oldRgroupAttachmentPoints,\n        color: oldColor,\n      } = highlightToUpdate;\n      this.oldData = {\n        atoms: oldAtoms,\n        bonds: oldBonds,\n        rgroupAttachmentPoints: oldRgroupAttachmentPoints,\n        color: oldColor,\n        highlightId,\n      };\n\n      // creating new highlight with new data\n      const updatedHighlight = new Highlight({\n        atoms,\n        bonds,\n        rgroupAttachmentPoints,\n        color,\n      });\n\n      // setting the new highlight\n      struct.highlights.set(this.newData.highlightId, updatedHighlight);\n\n      // notify atoms from both collections that repaint is needed\n      notifyChanged(restruct, [...atoms, ...oldAtoms], [...bonds, ...oldBonds]);\n    }\n  }\n\n  invert() {\n    const { atoms, bonds, rgroupAttachmentPoints, color } = this.oldData;\n    const inverted = new HighlightUpdate(\n      this.newData.highlightId,\n      atoms,\n      bonds,\n      rgroupAttachmentPoints,\n      color,\n    );\n    return inverted;\n  }\n}\n\nfunction notifyChanged(\n  restruct: ReStruct,\n  atoms?: number[],\n  bonds?: number[],\n  rgroupAttachmentPoints?: number[],\n) {\n  // Notifying ReStruct that repaint needed\n  const reAtoms = restruct.atoms;\n  const reBonds = restruct.bonds;\n  const reRgroupAttachmentPoints = restruct.rgroupAttachmentPoints;\n\n  if (atoms) {\n    atoms.forEach((atomId) => {\n      if (typeof reAtoms.get(atomId) !== 'undefined') {\n        restruct.markAtom(atomId, 1);\n      }\n    });\n  }\n\n  if (bonds) {\n    bonds.forEach((bondId) => {\n      if (typeof reBonds.get(bondId) !== 'undefined') {\n        restruct.markBond(bondId, 1);\n      }\n    });\n  }\n\n  if (rgroupAttachmentPoints) {\n    rgroupAttachmentPoints.forEach((rgroupAPid) => {\n      if (typeof reRgroupAttachmentPoints.get(rgroupAPid) !== 'undefined') {\n        restruct.markRgroupAttachmentPoint(rgroupAPid, 1);\n      }\n    });\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ReStruct } from '../../render';\n\nimport { HighlightAdd, HighlightDelete } from '../operations/highlight';\n\nimport { Action } from './action';\n\ntype HighlightType = {\n  atoms: number[];\n  bonds: number[];\n  rgroupAttachmentPoints: number[];\n  color: string;\n};\n\nexport function fromHighlightCreate(\n  restruct: ReStruct,\n  highlights: HighlightType[],\n): Action {\n  const action = new Action();\n\n  highlights.forEach((highlight) => {\n    const { atoms, bonds, rgroupAttachmentPoints, color } = highlight;\n\n    action.addOp(new HighlightAdd(atoms, bonds, rgroupAttachmentPoints, color));\n  });\n  return action.perform(restruct);\n}\n\nexport function fromHighlightClear(restruct: ReStruct): Action {\n  const action = new Action();\n\n  const highlights = restruct.molecule.highlights;\n\n  highlights.forEach((_, key) => {\n    action.addOp(new HighlightDelete(key));\n  });\n\n  return action.perform(restruct);\n}\n\n/*\n// Update highlight by placing new one on the given id\nexport function fromHighlightUpdate(\n  highlightId: number,\n  restruct: ReStruct,\n  atoms: number[],\n  bonds: number[],\n  color: string\n): Action {\n  const action = new Action()\n\n  const highlights = restruct.molecule.highlights\n\n  const selectedHighlight = highlights.get(highlightId)\n  if (!selectedHighlight) {\n    return action\n  }\n\n  const updateOperation = new HighlightUpdate(highlightId, atoms, bonds, color)\n  action.addOp(updateOperation)\n\n  return action.perform(restruct)\n}\n*/\n\n/*\n// Delete single highlight by id\nexport function fromHighlightDelete(\n  restruct: ReStruct,\n  highlightId: number\n): Action {\n  const action = new Action()\n\n  const highlights = restruct.molecule.highlights\n  if (highlights.has(highlightId)) {\n    action.addOp(new HighlightDelete(highlightId))\n\n    return action.perform(restruct)\n  }\n  return action\n}\n*/\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Command } from 'domain/entities/Command';\nimport { CoreEditor } from './Editor';\nimport assert from 'assert';\nimport { ketcherProvider } from 'application/utils';\nconst HISTORY_SIZE = 32; // put me to options\n\nexport type HistoryOperationType = 'undo' | 'redo';\n\nexport class EditorHistory {\n  historyStack: Command[] | [] = [];\n  historyPointer = 0;\n  editor: CoreEditor | undefined;\n\n  private static _instance;\n  constructor(editor: CoreEditor) {\n    if (EditorHistory._instance) {\n      return EditorHistory._instance;\n    }\n    this.editor = editor;\n    this.historyPointer = 0;\n\n    EditorHistory._instance = this;\n    return this;\n  }\n\n  update(command: Command, megreWithLatestHistoryCommand?: boolean) {\n    const latestCommand = this.historyStack[this.historyStack.length - 1];\n    if (megreWithLatestHistoryCommand && latestCommand) {\n      latestCommand.merge(command);\n    } else {\n      this.historyStack.splice(this.historyPointer, HISTORY_SIZE + 1, command);\n      if (this.historyStack.length > HISTORY_SIZE) {\n        this.historyStack.shift();\n      }\n      this.historyPointer = this.historyStack.length;\n    }\n    ketcherProvider.getKetcher()?.changeEvent.dispatch();\n  }\n\n  undo() {\n    if (this.historyPointer === 0) {\n      return;\n    }\n    ketcherProvider.getKetcher()?.changeEvent.dispatch();\n    assert(this.editor);\n\n    this.historyPointer--;\n    const lastCommand = this.historyStack[this.historyPointer];\n    lastCommand.invert(this.editor.renderersContainer);\n    const turnOffSelectionCommand =\n      this.editor?.drawingEntitiesManager.unselectAllDrawingEntities();\n    this.editor?.renderersContainer.update(turnOffSelectionCommand);\n  }\n\n  redo() {\n    if (this.historyPointer === this.historyStack.length) {\n      return;\n    }\n    ketcherProvider.getKetcher()?.changeEvent.dispatch();\n    assert(this.editor);\n\n    const lastCommand = this.historyStack[this.historyPointer];\n    lastCommand.execute(this.editor.renderersContainer);\n    this.historyPointer++;\n  }\n\n  destroy() {\n    EditorHistory._instance = null;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { BaseTool } from 'application/editor/tools/Tool';\nimport { BaseMonomer, AmbiguousMonomer, Vec2 } from 'domain/entities';\nimport { CoreEditor, EditorHistory } from 'application/editor/internal';\nimport {\n  BaseMonomerRenderer,\n  AmbiguousMonomerRenderer,\n} from 'application/render/renderers';\nimport { MonomerOrAmbiguousType } from 'domain/types';\nimport { monomerFactory } from '../operations/monomer/monomerFactory';\nimport assert from 'assert';\nimport { Coordinates } from '../shared/coordinates';\nimport { isAmbiguousMonomerLibraryItem } from 'domain/helpers/monomers';\n\nclass MonomerTool implements BaseTool {\n  private monomerPreview: BaseMonomer | AmbiguousMonomer | undefined;\n\n  private monomerPreviewRenderer:\n    | BaseMonomerRenderer\n    | AmbiguousMonomerRenderer\n    | undefined;\n\n  readonly MONOMER_PREVIEW_SCALE_FACTOR = 0.8;\n  readonly MONOMER_PREVIEW_OFFSET_X = 30;\n  readonly MONOMER_PREVIEW_OFFSET_Y = 30;\n  history: EditorHistory;\n  constructor(\n    private editor: CoreEditor,\n    private monomer: MonomerOrAmbiguousType,\n  ) {\n    this.editor = editor;\n    this.monomer = monomer;\n    this.history = new EditorHistory(this.editor);\n  }\n\n  mousedown() {\n    assert(this.monomerPreviewRenderer);\n    let modelChanges;\n    const position = Coordinates.canvasToModel(\n      new Vec2(\n        this.editor.lastCursorPositionOfCanvas.x,\n        this.editor.lastCursorPositionOfCanvas.y,\n      ),\n    );\n    if (isAmbiguousMonomerLibraryItem(this.monomer)) {\n      modelChanges = this.editor.drawingEntitiesManager.addAmbiguousMonomer(\n        this.monomer,\n        position,\n      );\n    } else {\n      modelChanges = this.editor.drawingEntitiesManager.addMonomer(\n        this.monomer,\n        // We convert monomer coordinates from pixels to angstroms\n        // because the model layer (like BaseMonomer) should not work with pixels\n        position,\n      );\n    }\n\n    this.history.update(modelChanges);\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  mousemove() {\n    const position = Coordinates.canvasToModel(\n      new Vec2(\n        this.editor.lastCursorPosition.x + this.MONOMER_PREVIEW_OFFSET_X,\n        this.editor.lastCursorPosition.y + this.MONOMER_PREVIEW_OFFSET_Y,\n      ),\n    );\n    this.monomerPreview?.moveAbsolute(position);\n    this.monomerPreviewRenderer?.move();\n  }\n\n  public mouseLeaveClientArea() {\n    this.hidePreview();\n  }\n\n  public mouseover() {\n    if (!this.monomerPreview) {\n      if (isAmbiguousMonomerLibraryItem(this.monomer)) {\n        const variantMonomer = new AmbiguousMonomer(this.monomer);\n        this.monomerPreview = variantMonomer;\n        this.monomerPreviewRenderer = new AmbiguousMonomerRenderer(\n          variantMonomer,\n          this.MONOMER_PREVIEW_SCALE_FACTOR,\n        );\n      } else {\n        const [Monomer, MonomerRenderer] = monomerFactory(this.monomer);\n\n        this.monomerPreview = new Monomer(this.monomer);\n        this.monomerPreviewRenderer = new MonomerRenderer(\n          this.monomerPreview,\n          this.MONOMER_PREVIEW_SCALE_FACTOR,\n          false,\n        );\n      }\n\n      this.monomerPreviewRenderer?.show(this.editor.theme);\n    }\n  }\n\n  hidePreview() {\n    this.monomerPreviewRenderer?.remove();\n    this.monomerPreviewRenderer = undefined;\n    this.monomerPreview = undefined;\n  }\n\n  destroy(): void {\n    this.hidePreview();\n  }\n}\n\nexport { MonomerTool };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { CoreEditor, EditorHistory } from 'application/editor/internal';\nimport { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { BaseTool } from 'application/editor/tools/Tool';\nimport { BaseSequenceRenderer } from 'application/render/renderers/sequence/BaseSequenceRenderer';\nimport { SequenceMode } from '../modes';\n\nclass EraserTool implements BaseTool {\n  private history: EditorHistory;\n  constructor(private editor: CoreEditor) {\n    this.editor = editor;\n    this.history = new EditorHistory(editor);\n    if (\n      this.editor.drawingEntitiesManager.selectedEntities.length &&\n      !(this.editor.mode instanceof SequenceMode)\n    ) {\n      const modelChanges =\n        this.editor.drawingEntitiesManager.deleteSelectedEntities();\n      modelChanges.merge(\n        this.editor.drawingEntitiesManager.recalculateAntisenseChains(),\n      );\n      this.history.update(modelChanges);\n      this.editor.renderersContainer.update(modelChanges);\n    }\n  }\n\n  mousedown(event) {\n    const selectedItemRenderer = event.target.__data__;\n\n    if (selectedItemRenderer instanceof BaseSequenceRenderer) {\n      return;\n    }\n\n    if (selectedItemRenderer instanceof BaseRenderer) {\n      const modelChanges =\n        this.editor.drawingEntitiesManager.deleteDrawingEntity(\n          selectedItemRenderer.drawingEntity,\n        );\n      modelChanges.merge(\n        this.editor.drawingEntitiesManager.recalculateAntisenseChains(),\n      );\n      this.history.update(modelChanges);\n      this.editor.renderersContainer.update(modelChanges);\n    }\n  }\n\n  // TODO move hover logic somewhere to apply it for all or several tools from one place.\n  //  Currently it is duplicated from select-rectangle tool\n  mouseOverDrawingEntity(event) {\n    const renderer = event.target.__data__;\n    const modelChanges =\n      this.editor.drawingEntitiesManager.intendToSelectDrawingEntity(\n        renderer.drawingEntity,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  mouseLeaveDrawingEntity(event) {\n    const renderer: BaseRenderer = event.target.__data__;\n\n    const modelChanges =\n      this.editor.drawingEntitiesManager.cancelIntentionToSelectDrawingEntity(\n        renderer.drawingEntity,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  destroy() {}\n}\n\nexport { EraserTool };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { Vec2 } from 'domain/entities';\nimport { CoreEditor, EditorHistory } from 'application/editor/internal';\nimport { brush as d3Brush, select } from 'd3';\nimport { BaseRenderer } from 'application/render/renderers/BaseRenderer';\nimport { Command } from 'domain/entities/Command';\nimport { BaseTool } from 'application/editor/tools/Tool';\nimport { Coordinates } from '../shared/coordinates';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { DrawingEntity } from 'domain/entities/DrawingEntity';\nimport { Nucleoside } from 'domain/entities/Nucleoside';\nimport { Nucleotide } from 'domain/entities/Nucleotide';\nimport { SequenceMode } from '../modes';\nimport { isMacOs } from 'react-device-detect';\nimport { EraserTool } from './Erase';\nimport { DeprecatedFlexModeOrSnakeModePolymerBondRenderer } from 'application/render';\n\nclass SelectRectangle implements BaseTool {\n  private brush;\n  private brushArea;\n  private moveStarted;\n  private mousePositionAfterMove = new Vec2(0, 0, 0);\n  private mousePositionBeforeMove = new Vec2(0, 0, 0);\n  private canvasResizeObserver?: ResizeObserver;\n  private history: EditorHistory;\n  private previousSelectedEntities: [number, DrawingEntity][] = [];\n\n  constructor(private editor: CoreEditor) {\n    this.editor = editor;\n    this.history = new EditorHistory(this.editor);\n    this.destroy();\n    this.createBrush();\n  }\n\n  private createBrush() {\n    this.brushArea = select(this.editor.canvas)\n      .insert('g', ':first-child')\n      .attr('id', 'rectangle-selection-area');\n\n    this.brush = d3Brush();\n\n    const brushed = (mo) => {\n      this.setSelectedEntities();\n      if (mo.selection) {\n        this.brushArea?.call(this.brush?.clear);\n      }\n    };\n\n    const onStartBrush = () => {\n      const editor = CoreEditor.provideEditorInstance();\n      if (editor.isSequenceEditInRNABuilderMode) {\n        this.brushArea.select('rect.selection').style('stroke', 'transparent');\n      } else {\n        this.brushArea.select('rect.selection').style('stroke', 'darkgrey');\n      }\n    };\n\n    const onBrush = (brushEvent) => {\n      const selection = brushEvent.selection;\n      const editor = CoreEditor.provideEditorInstance();\n      if (\n        !selection ||\n        editor.isSequenceEditMode ||\n        editor.isSequenceEditInRNABuilderMode\n      )\n        return;\n      requestAnimationFrame(() => {\n        const topLeftPoint = Coordinates.viewToCanvas(\n          new Vec2(selection[0][0], selection[0][1]),\n        );\n        const bottomRightPoint = Coordinates.viewToCanvas(\n          new Vec2(selection[1][0], selection[1][1]),\n        );\n\n        const modelChanges =\n          this.editor.drawingEntitiesManager.selectIfLocatedInRectangle(\n            topLeftPoint,\n            bottomRightPoint,\n            this.previousSelectedEntities,\n            brushEvent.sourceEvent.shiftKey,\n          );\n\n        this.editor.renderersContainer.update(modelChanges);\n      });\n    };\n\n    this.brush.on('start', onStartBrush);\n    this.brush.on('brush', onBrush);\n    this.brush.on('end', brushed);\n\n    this.brushArea.call(this.brush);\n\n    this.brushArea.select('rect.selection').style('fill', 'transparent');\n    this.brushArea.select('rect.overlay').attr('cursor', 'default');\n\n    const handleResizeCanvas = () => {\n      const { canvas } = this.editor;\n      if (canvas.clientWidth === 0 || canvas.clientHeight === 0) {\n        return;\n      }\n\n      this.brush\n        .extent([\n          [0, 0],\n          [canvas.width.baseVal.value, canvas.height.baseVal.value],\n        ])\n        .keyModifiers(false)\n        .filter((e) => {\n          e.preventDefault();\n          if (e.shiftKey) {\n            e.stopPropagation();\n          }\n          return true;\n        });\n\n      this.brushArea.call(this.brush);\n    };\n\n    const canvasElement = this.editor.canvas;\n\n    if (canvasElement) {\n      this.canvasResizeObserver = new ResizeObserver(handleResizeCanvas);\n      this.canvasResizeObserver.observe(canvasElement);\n    }\n  }\n\n  mousedown(event) {\n    if (CoreEditor.provideEditorInstance().isSequenceAnyEditMode) return;\n\n    const renderer = event.target.__data__;\n    this.mousePositionAfterMove = this.editor.lastCursorPositionOfCanvas;\n    this.mousePositionBeforeMove = this.editor.lastCursorPositionOfCanvas;\n    const ModKey = isMacOs ? event.metaKey : event.ctrlKey;\n\n    let modelChanges: Command;\n    if (renderer instanceof BaseRenderer && !event.shiftKey && !ModKey) {\n      this.moveStarted = true;\n      if (\n        renderer.drawingEntity.selected &&\n        !(this.editor.mode instanceof SequenceMode)\n      ) {\n        return;\n      }\n      modelChanges =\n        this.editor.drawingEntitiesManager.unselectAllDrawingEntities();\n      const { command: selectModelChanges } =\n        this.editor.drawingEntitiesManager.getAllSelectedEntitiesForSingleEntity(\n          renderer.drawingEntity,\n        );\n      modelChanges.merge(selectModelChanges);\n    } else if (renderer instanceof BaseRenderer && event.shiftKey) {\n      if (renderer.drawingEntity.selected) {\n        return;\n      }\n      const drawingEntities: DrawingEntity[] = [\n        ...this.editor.drawingEntitiesManager.selectedEntitiesArr,\n        renderer.drawingEntity,\n      ];\n      ({ command: modelChanges } =\n        this.editor.drawingEntitiesManager.getAllSelectedEntitiesForEntities(\n          drawingEntities,\n        ));\n    } else if (renderer instanceof BaseSequenceItemRenderer && ModKey) {\n      let drawingEntities: DrawingEntity[] = renderer.currentSubChain.nodes\n        .map((node) => {\n          if (node instanceof Nucleoside || node instanceof Nucleotide) {\n            return node.monomers;\n          } else {\n            return node.monomer;\n          }\n        })\n        .flat();\n      drawingEntities.forEach((entity) => entity.turnOnSelection());\n      const bondsInsideCurrentChain = renderer.currentSubChain.bonds.filter(\n        (bond) => bond.firstMonomer.selected && bond.secondMonomer?.selected,\n      );\n      drawingEntities = drawingEntities.concat(bondsInsideCurrentChain);\n      modelChanges =\n        this.editor.drawingEntitiesManager.selectDrawingEntities(\n          drawingEntities,\n        );\n    } else {\n      modelChanges =\n        this.editor.drawingEntitiesManager.unselectAllDrawingEntities();\n    }\n    this.editor.renderersContainer.update(modelChanges);\n    this.setSelectedEntities();\n  }\n\n  mousemove() {\n    if (this.editor.mode instanceof SequenceMode) {\n      return;\n    }\n    if (this.moveStarted) {\n      const modelChanges =\n        this.editor.drawingEntitiesManager.moveSelectedDrawingEntities(\n          Coordinates.canvasToModel(\n            new Vec2(\n              this.editor.lastCursorPositionOfCanvas.x -\n                this.mousePositionAfterMove.x,\n              this.editor.lastCursorPositionOfCanvas.y -\n                this.mousePositionAfterMove.y,\n            ),\n          ),\n        );\n      this.mousePositionAfterMove = this.editor.lastCursorPositionOfCanvas;\n      requestAnimationFrame(() => {\n        this.editor.renderersContainer.update(modelChanges);\n      });\n    }\n  }\n\n  mouseup(event) {\n    const renderer = event.target.__data__;\n    if (this.moveStarted && renderer?.drawingEntity?.selected) {\n      this.moveStarted = false;\n\n      if (\n        Vec2.diff(\n          this.mousePositionAfterMove,\n          this.mousePositionBeforeMove,\n        ).length() === 0\n      ) {\n        return;\n      }\n      const modelChanges =\n        this.editor.drawingEntitiesManager.moveSelectedDrawingEntities(\n          new Vec2(0, 0),\n          Coordinates.canvasToModel(\n            new Vec2(\n              this.mousePositionAfterMove.x - this.mousePositionBeforeMove.x,\n              this.mousePositionAfterMove.y - this.mousePositionBeforeMove.y,\n            ),\n          ),\n        );\n      this.history.update(modelChanges);\n    }\n  }\n\n  mouseOverDrawingEntity(event) {\n    const renderer = event.target.__data__;\n    const modelChanges =\n      this.editor.drawingEntitiesManager.intendToSelectDrawingEntity(\n        renderer.drawingEntity,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  mouseLeaveDrawingEntity(event) {\n    const renderer: BaseRenderer = event.target.__data__;\n\n    const modelChanges =\n      this.editor.drawingEntitiesManager.cancelIntentionToSelectDrawingEntity(\n        renderer.drawingEntity,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  public mouseOverPolymerBond(event) {\n    const renderer: DeprecatedFlexModeOrSnakeModePolymerBondRenderer =\n      event.target.__data__;\n\n    const modelChanges =\n      this.editor.drawingEntitiesManager.showPolymerBondInformation(\n        renderer.polymerBond,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  public mouseLeavePolymerBond(event) {\n    const renderer: DeprecatedFlexModeOrSnakeModePolymerBondRenderer =\n      event.target.__data__;\n    if (!renderer.polymerBond) {\n      return;\n    }\n\n    const modelChanges =\n      this.editor.drawingEntitiesManager.hidePolymerBondInformation(\n        renderer.polymerBond,\n      );\n    this.editor.renderersContainer.update(modelChanges);\n  }\n\n  setSelectedEntities() {\n    this.previousSelectedEntities =\n      this.editor.drawingEntitiesManager.allEntities.filter(\n        ([, drawingEntity]) => drawingEntity.selected,\n      );\n  }\n\n  destroy() {\n    if (this.brush) {\n      this.brushArea.remove();\n      this.brush = null;\n      this.brushArea = null;\n    }\n\n    this.canvasResizeObserver?.disconnect();\n\n    if (!(this.editor.selectedTool instanceof EraserTool)) {\n      const modelChanges =\n        this.editor.drawingEntitiesManager.unselectAllDrawingEntities();\n\n      this.editor.renderersContainer.update(modelChanges);\n    }\n  }\n}\n\nexport { SelectRectangle };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { CoreEditor, EditorHistory } from 'application/editor/internal';\nimport { isSequenceMode } from 'application/editor/modes';\nimport { BaseTool } from 'application/editor/tools/Tool';\nimport { ReinitializeModeOperation } from 'application/editor/operations/modes';\n\nclass ClearTool implements BaseTool {\n  private history: EditorHistory;\n\n  constructor(private editor: CoreEditor) {\n    this.editor = editor;\n    this.history = new EditorHistory(editor);\n    const mode = editor.mode;\n    const isCurrentModeSequence = isSequenceMode(mode);\n    const isSequenceEditMode = isCurrentModeSequence && mode.isEditMode;\n\n    const modelChanges = this.editor.drawingEntitiesManager.deleteAllEntities();\n\n    if (isCurrentModeSequence) {\n      modelChanges.addOperation(new ReinitializeModeOperation());\n    }\n\n    this.editor.renderersContainer.update(modelChanges);\n    this.history.update(modelChanges);\n\n    if (isSequenceEditMode) {\n      mode.startNewSequence();\n    }\n  }\n\n  destroy() {}\n}\n\nexport { ClearTool };\n","import { BaseTool, CoreEditor, ZoomTool } from 'application/editor';\nimport { D3DragEvent, drag, DragBehavior, select } from 'd3';\n\nexport class HandTool implements BaseTool {\n  private readonly dragBehavior: DragBehavior<SVGSVGElement, unknown, unknown>;\n\n  constructor(private editor: CoreEditor) {\n    this.editor.canvas.classList.add('handCursor');\n\n    this.dragBehavior = drag<SVGSVGElement, unknown, unknown>()\n      .on('start', this.handleDragStart.bind(this))\n      .on('drag', this.handleDragging.bind(this))\n      .on('end', this.handleDragEnd.bind(this));\n\n    select(this.editor.canvas).call(this.dragBehavior);\n  }\n\n  private handleDragStart() {\n    this.editor.canvas.classList.add('handCursorGrabbing');\n  }\n\n  private handleDragging(event: D3DragEvent<SVGSVGElement, unknown, unknown>) {\n    ZoomTool.instance.scrollBy(event.dx, event.dy);\n  }\n\n  private handleDragEnd() {\n    this.editor.canvas.classList.remove('handCursorGrabbing');\n  }\n\n  destroy() {\n    this.editor.canvas.classList.remove('handCursor');\n    select(this.editor.canvas).on('.drag', null);\n  }\n}\n","import { MonomerItemType, Entities } from 'domain/types';\nimport { IKetMonomerGroupTemplate } from 'application/formatters';\n\ninterface ToolEventHandler {\n  click?(event: Event): void;\n\n  dblclick?(event: Event): void;\n\n  mousedown?(event: Event): void;\n\n  mousemove?(event: Event): void;\n\n  mouseup?(event: Event): void;\n\n  mouseleave?(event: Event): void;\n\n  mouseLeaveClientArea?(event: Event): void;\n\n  mouseover?(event: Event): void;\n\n  mouseOverPolymerBond?(event: Event): void;\n\n  mouseLeavePolymerBond?(event: Event): void;\n\n  mouseOnMovePolymerBond?(event: Event): void;\n\n  mouseOverMonomer?(event: Event): void;\n\n  mouseOverAttachmentPoint?(event: Event): void;\n\n  mouseLeaveAttachmentPoint?(event: Event): void;\n\n  mouseUpAttachmentPoint?(event: Event): void;\n\n  mouseDownAttachmentPoint?(event: Event): void;\n\n  mouseOnMoveMonomer?(event: Event): void;\n\n  mouseLeaveMonomer?(event: Event): void;\n\n  mouseOverDrawingEntity?(event: Event): void;\n\n  mouseLeaveDrawingEntity?(event: Event): void;\n\n  mouseUpMonomer?(event: Event): void;\n\n  rightClickSequence?(event: Event): void;\n\n  rightClickCanvas?(event: Event): void;\n\n  rightClickPolymerBond?(event: Event): void;\n\n  rightClickSelectedMonomers?(event: Event): void;\n\n  editSequence?(): void;\n\n  startNewSequence?(): void;\n\n  turnOnSequenceEditInRNABuilderMode?(): void;\n\n  turnOffSequenceEditInRNABuilderMode?(): void;\n\n  modifySequenceInRnaBuilder?(): void;\n\n  mouseOverSequenceItem?(event: Event): void;\n\n  mouseOnMoveSequenceItem?(event: Event): void;\n\n  mouseLeaveSequenceItem?(event: Event): void;\n\n  changeSequenceTypeEnterMode?(event: Event): void;\n\n  toggleSequenceEditMode?(event: Event): void;\n\n  toggleSequenceEditInRNABuilderMode?(event: Event): void;\n\n  clickOnSequenceItem?(event: Event): void;\n\n  mousedownBetweenSequenceItems?(event: Event): void;\n\n  mouseDownOnSequenceItem?(event: Event): void;\n\n  doubleClickOnSequenceItem?(event: Event): void;\n\n  mouseUpAtom?(event: Event): void;\n}\n\nexport interface IRnaPreset {\n  name?: string;\n  nameInList?: string;\n  base?: MonomerItemType;\n  sugar?: MonomerItemType;\n  phosphate?: MonomerItemType;\n  default?: boolean;\n  favorite?: boolean;\n  editedName?: boolean;\n}\n\nexport interface IRnaLabeledPreset\n  extends Omit<IRnaPreset, 'base' | 'sugar' | 'phosphate'>,\n    Pick<IKetMonomerGroupTemplate, 'templates'> {}\n\nexport type LabeledNodesWithPositionInSequence = {\n  type: Entities;\n  nodeIndexOverall: number;\n  baseLabel?: string;\n  sugarLabel?: string;\n  phosphateLabel?: string;\n  isNucleosideConnectedAndSelectedWithPhosphate?: boolean;\n  hasR1Connection?: boolean;\n};\n\nexport interface Tool extends ToolEventHandler {\n  cancel?(): void;\n\n  isSelectionRunning?(): boolean;\n\n  isNotActiveTool?: boolean;\n}\n\nexport interface BaseTool extends Tool {\n  destroy(): void;\n}\n\nexport type PeptideToolOptions = MonomerItemType;\n\n// export type ToolOptions = MonomerItemType;\n// !todo\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type ToolOptions = any;\nexport type ToolConstructorInterface = {\n  new (editor, ...args: ToolOptions[]): Tool | BaseTool;\n};\n\nexport type ToolEventHandlerName = keyof ToolEventHandler;\n\nexport function isBaseTool(\n  tool: Tool | BaseTool | undefined,\n): tool is BaseTool {\n  return (tool as BaseTool)?.destroy !== undefined;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { ToolConstructorInterface } from './Tool';\nimport { MonomerTool } from 'application/editor/tools/Monomer';\nimport { RnaPresetTool } from 'application/editor/tools/RnaPreset';\nimport { SelectRectangle } from 'application/editor/tools/SelectRectangle';\nimport { PolymerBond } from 'application/editor/tools/Bond';\nimport { EraserTool } from 'application/editor/tools/Erase';\nimport { ClearTool } from 'application/editor/tools/Clear';\nimport { HandTool } from 'application/editor/tools/Hand';\nimport { ToolName } from 'application/editor/tools/types';\n\nexport const toolsMap: Record<ToolName, ToolConstructorInterface> = {\n  [ToolName.monomer]: MonomerTool,\n  [ToolName.preset]: RnaPresetTool,\n  [ToolName.selectRectangle]: SelectRectangle,\n  [ToolName.bondSingle]: PolymerBond,\n  [ToolName.bondHydrogen]: PolymerBond,\n  [ToolName.erase]: EraserTool,\n  [ToolName.clear]: ClearTool,\n  [ToolName.hand]: HandTool,\n};\n\nexport * from './Tool';\nexport * from './Zoom';\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport utils from './shared/utils';\n\nexport const vectorUtils = {\n  fracAngle: utils.fracAngle,\n  calcAngle: utils.calcAngle,\n  degrees: utils.degrees,\n  calcNewAtomPos: utils.calcNewAtomPos,\n};\n\nexport * from './operations';\nexport * from './actions';\nexport * from './shared/constants';\nexport * from './shared/coordinates';\nexport * from './editor.types';\nexport * from './Editor';\nexport * from './EditorHistory';\nexport * from './modes';\nexport * from './editorEvents';\nexport * from './editorSettings';\nexport * from './tools';\nexport * from 'application/editor/tools/types';\n","import { Struct, Vec2 } from 'domain/entities';\nimport { isEqual } from 'lodash';\nimport { Render } from './raphaelRender';\nimport ReAtom from './restruct/reatom';\nimport { Coordinates } from 'application/editor';\n\n/**\n * Is used to improve search and opening tab performance in Template Dialog\n * Rendering a lot of structures causes great delay\n */\nconst renderCache = new Map();\nlet previousOptions: any;\nconst MIN_ATTACHMENT_POINT_SIZE = 8;\nconst attachmentPointRegExp = /^R[1-8]$/;\n\nexport class RenderStruct {\n  /**\n   * for S-Groups we want to show expanded structure\n   * without brackets\n   */\n  static prepareStruct(struct: Struct) {\n    if (struct.sgroups.size > 0) {\n      const newStruct = struct.clone();\n      convertAllSGroupAttachmentPointsToRGroupAttachmentPoints(newStruct);\n      if (!newStruct.sgroups.get(0)?.isSuperatomWithoutLabel) {\n        newStruct.sgroups.delete(0);\n      }\n      return newStruct;\n    }\n    return struct;\n  }\n\n  static removeSmallAttachmentPointLabelsInModal(\n    render: Render,\n    options: any = {},\n  ) {\n    if (!options.labelInMonomerConnectionsModal) {\n      return;\n    }\n\n    render.ctab.atoms.forEach((atom: ReAtom) => {\n      if (!atom.label) {\n        return;\n      }\n      const isAttachmentPointAtom = attachmentPointRegExp.test(atom.label.text);\n\n      if (!isAttachmentPointAtom) {\n        return;\n      }\n\n      const isSmall =\n        atom.label.path.node.getBoundingClientRect().width <\n        MIN_ATTACHMENT_POINT_SIZE;\n\n      if (isSmall) {\n        atom.label.path.node.remove();\n      }\n    });\n  }\n\n  static render(\n    wrapperElement: HTMLElement | null,\n    struct: Struct | null,\n    options: any = {},\n  ) {\n    if (wrapperElement && struct) {\n      const { cachePrefix = '', needCache = true } = options;\n      const cacheKey = `${cachePrefix}${struct.name}`;\n\n      if (!isEqual(previousOptions, options)) {\n        renderCache.clear();\n        previousOptions = options;\n      }\n\n      if (renderCache.has(cacheKey) && needCache) {\n        wrapperElement.innerHTML = renderCache.get(cacheKey);\n        return;\n      }\n\n      const preparedStruct = this.prepareStruct(struct.clone());\n      preparedStruct.initHalfBonds();\n      preparedStruct.initNeighbors();\n      preparedStruct.setImplicitHydrogen();\n      preparedStruct.markFragments();\n      const structureSize = preparedStruct.getCoordBoundingBox();\n      const structureSizeInPixels = Coordinates.modelToCanvas(\n        new Vec2(\n          structureSize.max.x - structureSize.min.x,\n          structureSize.max.y - structureSize.min.y,\n        ),\n      );\n      const wrapperElementBoundingRect = wrapperElement.getBoundingClientRect();\n      const isStructureLessThanWrapper =\n        structureSizeInPixels.x < wrapperElementBoundingRect.width &&\n        structureSizeInPixels.y < wrapperElementBoundingRect.height;\n      const structureRectangleSize = Math.max(\n        structureSizeInPixels.x,\n        structureSizeInPixels.y,\n      );\n      const svgSize = isStructureLessThanWrapper\n        ? Math.min(\n            structureRectangleSize,\n            wrapperElementBoundingRect.width,\n            wrapperElementBoundingRect.height,\n          )\n        : undefined;\n      const extendedOptions = {\n        autoScale: true,\n        ...options,\n      };\n\n      if (window.isPolymerEditorTurnedOn) {\n        extendedOptions.fontsz = 40;\n        extendedOptions.fontszsub = 30;\n        extendedOptions.width = svgSize;\n        extendedOptions.height = svgSize;\n      }\n\n      const rnd = new Render(wrapperElement, extendedOptions);\n\n      if (!window.isPolymerEditorTurnedOn) {\n        preparedStruct.rescale();\n      }\n\n      rnd.setMolecule(preparedStruct);\n      this.removeSmallAttachmentPointLabelsInModal(rnd, options);\n\n      if (needCache) {\n        renderCache.set(cacheKey, rnd.clientArea.innerHTML);\n      }\n    }\n  }\n}\n\n/**\n * Why?\n * We need somehow display sgroup attachment points (tooltips, preview, templates),\n * But due to current rendering approach for sgroups (ungrouping sgroups)\n * - we have to use RGroup attachment points on atoms for this purposes\n */\nfunction convertAllSGroupAttachmentPointsToRGroupAttachmentPoints(\n  struct: Struct,\n) {\n  struct.sgroups.forEach((sgroup) => {\n    if (sgroup.isSuperatomWithoutLabel) {\n      return;\n    }\n\n    sgroup.getAttachmentPoints().forEach((attachmentPoint) => {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const attachmentPointAtom = struct.atoms.get(attachmentPoint.atomId)!;\n      attachmentPointAtom.setRGAttachmentPointForDisplayPurpose();\n      const rgroupAttachmentPoint =\n        attachmentPoint.convertToRGroupAttachmentPointForDisplayPurpose(\n          attachmentPoint.atomId,\n        );\n      struct.rgroupAttachmentPoints.add(rgroupAttachmentPoint);\n    });\n  });\n}\n","import {\n  AmbiguousMonomer,\n  Atom as MicromoleculesAtom,\n  Bond,\n  FunctionalGroup,\n  Pile,\n  SGroup,\n  SGroupAttachmentPoint,\n  Struct,\n  Vec2,\n} from 'domain/entities';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { ReAtom, ReBond, ReSGroup, ReStruct } from 'application/render';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { MonomerMicromolecule } from 'domain/entities/monomerMicromolecule';\nimport { Command } from 'domain/entities/Command';\nimport { MONOMER_CONST } from 'application/editor/operations/monomer/monomerFactory';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport assert from 'assert';\nimport { AttachmentPointName } from 'domain/types';\nimport {\n  getAttachmentPointLabel,\n  getAttachmentPointNumberFromLabel,\n} from 'domain/helpers/attachmentPointCalculations';\nimport { invert, isNumber } from 'lodash';\nimport { IKetAttachmentPoint } from 'application/formatters';\nimport { MonomerToAtomBond } from 'domain/entities/MonomerToAtomBond';\nimport { CoreEditor } from 'application/editor/Editor';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { AtomLabel } from 'domain/constants';\nimport { isMonomerSgroupWithAttachmentPoints } from '../../utilities/monomers';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\nimport { MACROMOLECULES_BOND_TYPES } from 'application/editor/tools/Bond';\n\nexport class MacromoleculesConverter {\n  private static convertMonomerToMonomerMicromolecule(\n    monomer: BaseMonomer,\n    struct: Struct,\n  ) {\n    const monomerMicromolecule = new MonomerMicromolecule(\n      SGroup.TYPES.SUP,\n      monomer,\n    );\n    const sgroupId = struct.sgroups.add(monomerMicromolecule);\n\n    monomerMicromolecule.data.name = monomer.monomerItem.label;\n    monomerMicromolecule.data.expanded = false;\n    monomerMicromolecule.id = sgroupId;\n    monomerMicromolecule.pp = monomer.position;\n\n    return monomerMicromolecule;\n  }\n\n  private static addMonomerAtomToStruct(\n    atom: MicromoleculesAtom,\n    monomer: BaseMonomer,\n    monomerMicromolecule: MonomerMicromolecule,\n    struct: Struct,\n  ) {\n    const atomClone = atom.clone();\n    atomClone.pp = monomer.position.add(atom.pp);\n    atomClone.sgs = new Pile<number>([monomerMicromolecule.id]);\n    atomClone.fragment = -1;\n    const atomId = struct.atoms.add(atomClone);\n    monomerMicromolecule.atoms.push(atomId);\n\n    return { atomId, atom: atomClone };\n  }\n\n  public static convertAttachmentPointNameToNumber(\n    attachmentPointName: AttachmentPointName,\n  ) {\n    return Number(attachmentPointName?.replace('R', ''));\n  }\n\n  public static findAttachmentPointAtom(\n    polymerBond: PolymerBond | MonomerToAtomBond,\n    monomer: BaseMonomer,\n    monomerToAtomIdMap: Map<BaseMonomer, Map<number, number>>,\n  ) {\n    const attachmentPointName = monomer.getAttachmentPointByBond(polymerBond);\n\n    if (!attachmentPointName) {\n      return {\n        attachmentAtomId: undefined,\n        attachmentPointNumber: undefined,\n      };\n    }\n\n    const attachmentPointNumber =\n      MacromoleculesConverter.convertAttachmentPointNameToNumber(\n        attachmentPointName,\n      );\n    const attachmentPointIndex =\n      monomer.listOfAttachmentPoints.indexOf(attachmentPointName);\n    const attachmentPoint =\n      monomer.monomerItem.attachmentPoints?.[attachmentPointIndex];\n    const atomIdMap = monomerToAtomIdMap.get(monomer);\n    const attachmentPointAtomId =\n      monomer instanceof AmbiguousMonomer ? 0 : attachmentPoint?.attachmentAtom;\n\n    return {\n      globalAttachmentAtomId:\n        isNumber(attachmentPointAtomId) &&\n        atomIdMap?.get(attachmentPointAtomId as number),\n      attachmentAtomId:\n        isNumber(attachmentPointAtomId) && attachmentPointAtomId,\n      attachmentPointNumber,\n    };\n  }\n\n  public static convertDrawingEntitiesToStruct(\n    drawingEntitiesManager: DrawingEntitiesManager,\n    struct: Struct,\n    reStruct?: ReStruct,\n  ) {\n    const monomerToAtomIdMap = new Map<BaseMonomer, Map<number, number>>();\n    const monomerToMonomerMicromolecule = new Map<\n      BaseMonomer,\n      MonomerMicromolecule\n    >();\n\n    drawingEntitiesManager.micromoleculesHiddenEntities.mergeInto(struct);\n\n    drawingEntitiesManager.clearMicromoleculesHiddenEntities();\n    drawingEntitiesManager.monomers.forEach((monomer) => {\n      if (monomer.monomerItem.props.isMicromoleculeFragment) {\n        const atomIdMap = new Map<number, number>();\n        monomer.monomerItem.struct.mergeInto(\n          struct,\n          null,\n          null,\n          false,\n          false,\n          atomIdMap,\n        );\n        monomerToAtomIdMap.set(monomer, atomIdMap);\n      } else {\n        const atomIdsMap = new Map<number, number>();\n        const monomerMicromolecule = this.convertMonomerToMonomerMicromolecule(\n          monomer,\n          struct,\n        );\n        reStruct?.sgroups.set(\n          monomerMicromolecule.id,\n          new ReSGroup(monomerMicromolecule),\n        );\n        const monomerAtoms =\n          monomer instanceof AmbiguousMonomer\n            ? monomer.monomers[0].monomerItem.struct.atoms\n            : monomer.monomerItem.struct.atoms;\n        const monomerBonds =\n          monomer instanceof AmbiguousMonomer\n            ? monomer.monomers[0].monomerItem.struct.bonds\n            : monomer.monomerItem.struct.bonds;\n\n        monomerToMonomerMicromolecule.set(monomer, monomerMicromolecule);\n\n        monomerAtoms.forEach((oldAtom, oldAtomId) => {\n          const { atom, atomId } = this.addMonomerAtomToStruct(\n            oldAtom,\n            monomer,\n            monomerMicromolecule,\n            struct,\n          );\n          atomIdsMap.set(oldAtomId, atomId);\n          monomerToAtomIdMap.set(monomer, atomIdsMap);\n          reStruct?.atoms.set(atomId, new ReAtom(atom));\n        });\n\n        monomerMicromolecule.addAttachmentPoints(\n          monomer.listOfAttachmentPoints.map(\n            (attachmentPointName, attachmentPointIndex) => {\n              const attachmentPointNumber =\n                getAttachmentPointNumberFromLabel(attachmentPointName);\n              const attachmentPoint = monomer.monomerItem.attachmentPoints?.[\n                attachmentPointIndex\n              ] as IKetAttachmentPoint;\n\n              return new SGroupAttachmentPoint(\n                atomIdsMap.get(attachmentPoint.attachmentAtom) as number,\n                atomIdsMap.get(attachmentPoint.leavingGroup?.atoms[0]),\n                undefined,\n                attachmentPointNumber,\n              );\n            },\n          ) || [],\n          false,\n        );\n        struct.sGroupForest.insert(monomerMicromolecule);\n        monomerBonds.forEach((bond) => {\n          const bondClone = bond.clone();\n          bondClone.begin = atomIdsMap.get(bondClone.begin) as number;\n          bondClone.end = atomIdsMap.get(bondClone.end) as number;\n          const bondId = struct.bonds.add(bondClone);\n          reStruct?.bonds.set(bondId, new ReBond(bondClone));\n        });\n\n        struct.functionalGroups.add(new FunctionalGroup(monomerMicromolecule));\n      }\n    });\n\n    let conversionErrorMessage = '';\n\n    drawingEntitiesManager.polymerBonds.forEach((polymerBond) => {\n      assert(polymerBond.secondMonomer);\n\n      if (polymerBond instanceof HydrogenBond) {\n        const bond = new Bond({\n          type: Bond.PATTERN.TYPE.HYDROGEN,\n          begin: monomerToAtomIdMap\n            .get(polymerBond.firstMonomer)\n            ?.values()\n            .next().value,\n          end: monomerToAtomIdMap\n            .get(polymerBond.secondMonomer)\n            ?.values()\n            .next().value,\n        });\n        const bondId = struct.bonds.add(bond);\n\n        reStruct?.bonds.set(bondId, new ReBond(bond));\n\n        return;\n      }\n\n      const {\n        globalAttachmentAtomId: beginAtom,\n        attachmentPointNumber: beginSuperatomAttachmentPointNumber,\n      } = this.findAttachmentPointAtom(\n        polymerBond,\n        polymerBond.firstMonomer,\n        monomerToAtomIdMap,\n      );\n      const {\n        globalAttachmentAtomId: endAtom,\n        attachmentPointNumber: endSuperatomAttachmentPointNumber,\n      } = this.findAttachmentPointAtom(\n        polymerBond,\n        polymerBond.secondMonomer,\n        monomerToAtomIdMap,\n      );\n\n      if (!isNumber(beginAtom) || !isNumber(endAtom)) {\n        conversionErrorMessage =\n          'There is no atom for provided attachment point. Bond between monomers was not created.';\n\n        return;\n      }\n\n      const bond = new Bond({\n        type:\n          polymerBond instanceof HydrogenBond\n            ? Bond.PATTERN.TYPE.HYDROGEN\n            : Bond.PATTERN.TYPE.SINGLE,\n        begin: beginAtom,\n        end: endAtom,\n        beginSuperatomAttachmentPointNumber,\n        endSuperatomAttachmentPointNumber,\n      });\n      const bondId = struct.bonds.add(bond);\n      reStruct?.bonds.set(bondId, new ReBond(bond));\n    });\n\n    drawingEntitiesManager.monomerToAtomBonds.forEach((monomerToAtomBond) => {\n      const {\n        globalAttachmentAtomId: beginAtom,\n        attachmentPointNumber: beginSuperatomAttachmentPointNumber,\n      } = this.findAttachmentPointAtom(\n        monomerToAtomBond,\n        monomerToAtomBond.monomer,\n        monomerToAtomIdMap,\n      );\n\n      const endAtom = monomerToAtomIdMap\n        ?.get(monomerToAtomBond.atom.monomer)\n        ?.get(monomerToAtomBond.atom.atomIdInMicroMode);\n\n      if (!isNumber(beginAtom) || !isNumber(endAtom)) {\n        conversionErrorMessage =\n          'There is no atom for provided attachment point. Bond between monomers was not created.';\n\n        return;\n      }\n\n      const bond = new Bond({\n        type: Bond.PATTERN.TYPE.SINGLE,\n        begin: beginAtom,\n        end: endAtom,\n        beginSuperatomAttachmentPointNumber,\n      });\n      const bondId = struct.bonds.add(bond);\n\n      reStruct?.bonds.set(bondId, new ReBond(bond));\n    });\n\n    return { struct, reStruct, conversionErrorMessage };\n  }\n\n  private static convertMonomerMicromoleculeToMonomer(\n    monomerMicromolecule: MonomerMicromolecule,\n    drawingEntitiesManager: DrawingEntitiesManager,\n    sgroupToMonomer: Map<SGroup, BaseMonomer>,\n  ) {\n    const command = new Command();\n    const monomerAdditionCommand =\n      monomerMicromolecule.monomer instanceof AmbiguousMonomer\n        ? drawingEntitiesManager.addAmbiguousMonomer(\n            monomerMicromolecule.monomer.variantMonomerItem,\n            monomerMicromolecule.monomer.position,\n          )\n        : drawingEntitiesManager.addMonomer(\n            monomerMicromolecule.monomer.monomerItem,\n            monomerMicromolecule.pp as Vec2,\n          );\n    command.merge(monomerAdditionCommand);\n    sgroupToMonomer.set(\n      monomerMicromolecule,\n      monomerAdditionCommand.operations[0].monomer as BaseMonomer,\n    );\n\n    return command;\n  }\n\n  private static convertFragmentToChem(\n    fragmentNumber: number,\n    fragmentStruct: Struct,\n    drawingEntitiesManager: DrawingEntitiesManager,\n  ) {\n    const fragmentBbox = fragmentStruct.getCoordBoundingBox();\n    return drawingEntitiesManager.addMonomer(\n      {\n        struct: fragmentStruct,\n        label: 'F' + fragmentNumber,\n        colorScheme: undefined,\n        favorite: false,\n        props: {\n          Name: 'F' + fragmentNumber,\n          MonomerNaturalAnalogCode: '',\n          MonomerName: 'F' + fragmentNumber,\n          MonomerType: MONOMER_CONST.CHEM,\n          isMicromoleculeFragment: true,\n        },\n      },\n      new Vec2(\n        fragmentBbox.max.x - (fragmentBbox.max.x - fragmentBbox.min.x) / 2,\n        fragmentBbox.max.y - (fragmentBbox.max.y - fragmentBbox.min.y) / 2,\n      ),\n    );\n  }\n\n  public static getAttachmentPointLabel(atom: MicromoleculesAtom) {\n    let attachmentPointLabel = '';\n    const atomRglabel = Number(atom.rglabel);\n    assert(Number.isInteger(atomRglabel));\n    for (let rgi = 0; rgi < 32; rgi++) {\n      if (atomRglabel & (1 << rgi)) {\n        attachmentPointLabel = 'R' + (rgi + 1).toString();\n      }\n    }\n    return attachmentPointLabel;\n  }\n\n  // This method returns array of arrays of fragmentIds grouped by sgroup\n  // It needs to serialize/deserialize several molecules grouped by sgroup as a single molecule\n  public static getFragmentsGroupedBySgroup(struct: Struct) {\n    const groupedFragments: number[][] = [];\n    struct.frags.forEach((_fragment, fragmentId) => {\n      const isAlreadyGrouped = groupedFragments.find((fragmentsGroup) =>\n        fragmentsGroup.includes(fragmentId),\n      );\n      if (isAlreadyGrouped) {\n        return;\n      }\n\n      // Find all sgroups related to fragment\n      const fragmentSgroups = new Set<SGroup>();\n      struct.atoms.forEach((atom, atomId) => {\n        if (atom.fragment !== fragmentId) return;\n        const sgroup = struct.getGroupFromAtomId(atomId);\n        if (sgroup) {\n          fragmentSgroups.add(sgroup);\n        }\n      });\n\n      // Add new group of fragments with fragments related to one sgroup\n      const lastFragmentGroupIndex = groupedFragments.push([fragmentId]) - 1;\n      fragmentSgroups.forEach((sgroup) => {\n        sgroup.atoms.forEach((aid) => {\n          const atomFragmentId = struct.atoms.get(aid)?.fragment;\n          if (\n            atomFragmentId &&\n            !groupedFragments[lastFragmentGroupIndex].includes(atomFragmentId)\n          ) {\n            groupedFragments[lastFragmentGroupIndex].push(atomFragmentId);\n          }\n        });\n      });\n    });\n\n    return groupedFragments;\n  }\n\n  public static findAtomByMicromoleculeAtomId(\n    drawingEntitiesManager: DrawingEntitiesManager,\n    atomId: number,\n    monomer?: BaseMonomer,\n  ) {\n    return [...drawingEntitiesManager.atoms.values()].find(\n      (atom) =>\n        atom.atomIdInMicroMode === atomId &&\n        (!monomer || monomer === atom.monomer),\n    );\n  }\n\n  public static convertStructToDrawingEntities(\n    struct: Struct,\n    drawingEntitiesManager: DrawingEntitiesManager,\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    const sgroupToMonomer = new Map<SGroup, BaseMonomer>();\n    const fragmentIdToMonomer = new Map<number, BaseMonomer>();\n    const command = new Command();\n    struct.sgroups.forEach((sgroup) => {\n      if (sgroup instanceof MonomerMicromolecule) {\n        command.merge(\n          this.convertMonomerMicromoleculeToMonomer(\n            sgroup,\n            drawingEntitiesManager,\n            sgroupToMonomer,\n          ),\n        );\n      }\n    });\n    const fragments = this.getFragmentsGroupedBySgroup(struct);\n\n    let fragmentNumber = 1;\n    const fragmentIdToAtomIdMap = new Map<number, Map<number, number>>();\n    const globalAtomIdToMonomerMap = new Map<number, BaseMonomer>();\n\n    fragments.forEach((_fragment) => {\n      const atomIdMap = new Map<number, number>();\n      const fragmentStruct = struct.getFragment(_fragment, false, atomIdMap);\n      const monomerAddCommand = this.convertFragmentToChem(\n        fragmentNumber,\n        fragmentStruct,\n        drawingEntitiesManager,\n      );\n      const monomer = monomerAddCommand.operations[0].monomer as BaseMonomer;\n      const atomIdMapObject = Object.fromEntries(atomIdMap.entries());\n      const localAtomIdToGlobalAtomId = invert(atomIdMapObject);\n      const atomsMap = new Map<number, Atom>();\n\n      _fragment.forEach((fragmentId) => {\n        fragmentIdToMonomer.set(fragmentId as number, monomer);\n        fragmentIdToAtomIdMap.set(fragmentId, atomIdMap);\n      });\n      command.merge(monomerAddCommand);\n\n      if (\n        monomer.monomerItem.props.isMicromoleculeFragment &&\n        !isMonomerSgroupWithAttachmentPoints(monomer)\n      ) {\n        monomer.monomerItem.struct.atoms.forEach((atom, atomId) => {\n          const atomAddCommand = drawingEntitiesManager.addAtom(\n            atom.pp,\n            monomer,\n            atomId,\n            atom.label as AtomLabel,\n          );\n\n          command.merge(atomAddCommand);\n          atomsMap.set(atomId, atomAddCommand.operations[0].atom as Atom);\n          globalAtomIdToMonomerMap.set(\n            Number(localAtomIdToGlobalAtomId[atomId]),\n            monomer,\n          );\n        });\n\n        monomer.monomerItem.struct.bonds.forEach((bond, bondId) => {\n          const firstAtom = atomsMap.get(bond.begin);\n          const secondAtom = atomsMap.get(bond.end);\n\n          if (!firstAtom || !secondAtom) {\n            return;\n          }\n\n          command.merge(\n            drawingEntitiesManager.addBond(\n              firstAtom,\n              secondAtom,\n              bond.type,\n              bond.stereo,\n              bondId,\n            ),\n          );\n        });\n      }\n\n      fragmentNumber++;\n    });\n\n    const superatomAttachmentPointToBond = new Map<\n      SGroupAttachmentPoint,\n      Bond\n    >();\n\n    struct.bonds.forEach((bond) => {\n      const beginAtom = struct.atoms.get(bond.begin);\n      const endAtom = struct.atoms.get(bond.end);\n      const beginAtomSgroup = struct.getGroupFromAtomId(bond.begin);\n      beginAtomSgroup?.getAttachmentPoints();\n      const endAtomSgroup = struct.getGroupFromAtomId(bond.end);\n      const isConnectionBetweenMonomerAndMolecule =\n        (beginAtomSgroup instanceof MonomerMicromolecule &&\n          !(endAtomSgroup instanceof MonomerMicromolecule) &&\n          !endAtomSgroup?.isSuperatomWithoutLabel) ||\n        (endAtomSgroup instanceof MonomerMicromolecule &&\n          !(beginAtomSgroup instanceof MonomerMicromolecule) &&\n          !beginAtomSgroup?.isSuperatomWithoutLabel);\n\n      if (!isConnectionBetweenMonomerAndMolecule) {\n        return;\n      }\n\n      const moleculeAtomId =\n        beginAtomSgroup instanceof MonomerMicromolecule ? bond.end : bond.begin;\n      const moleculeAtom =\n        beginAtomSgroup instanceof MonomerMicromolecule ? endAtom : beginAtom;\n      const monomerSgroup =\n        beginAtomSgroup instanceof MonomerMicromolecule\n          ? beginAtomSgroup\n          : endAtomSgroup;\n\n      if (!moleculeAtom || !monomerSgroup) {\n        return;\n      }\n\n      const atomsMap = fragmentIdToAtomIdMap.get(moleculeAtom.fragment);\n      const atomIdInMicromolecules = atomsMap?.get(moleculeAtomId);\n      const monomer = sgroupToMonomer.get(monomerSgroup);\n\n      if (!isNumber(atomIdInMicromolecules) || !monomer) {\n        return;\n      }\n\n      const atomToConnect =\n        MacromoleculesConverter.findAtomByMicromoleculeAtomId(\n          drawingEntitiesManager,\n          atomIdInMicromolecules,\n          globalAtomIdToMonomerMap.get(moleculeAtomId),\n        );\n\n      if (\n        !atomToConnect ||\n        !isNumber(bond.beginSuperatomAttachmentPointNumber)\n      ) {\n        return;\n      }\n\n      command.merge(\n        drawingEntitiesManager.addMonomerToAtomBond(\n          monomer,\n          atomToConnect,\n          getAttachmentPointLabel(bond.beginSuperatomAttachmentPointNumber),\n        ),\n      );\n    });\n\n    struct.bonds.forEach((bond) => {\n      const beginAtom = struct.atoms.get(bond.begin);\n      const endAtom = struct.atoms.get(bond.end);\n\n      if (!beginAtom || !endAtom) {\n        return;\n      }\n\n      const beginAtomSgroup = struct.getGroupFromAtomId(bond.begin);\n      const beginAtomSgroupAttachmentPoints =\n        beginAtomSgroup?.getAttachmentPoints();\n      const endAtomSgroup = struct.getGroupFromAtomId(bond.end);\n      const endAtomSgroupAttachmentPoints =\n        endAtomSgroup?.getAttachmentPoints();\n      const beginAtomAttachmentPointNumber = isNumber(\n        bond.beginSuperatomAttachmentPointNumber,\n      )\n        ? bond.beginSuperatomAttachmentPointNumber\n        : beginAtomSgroupAttachmentPoints?.findIndex(\n            (sgroupAttachmentPoint) =>\n              sgroupAttachmentPoint.atomId === bond.begin &&\n              !superatomAttachmentPointToBond.has(sgroupAttachmentPoint),\n          );\n      const beginAtomAttachmentPoint =\n        isNumber(beginAtomAttachmentPointNumber) &&\n        beginAtomSgroupAttachmentPoints?.find(\n          (attachmentPoint) =>\n            attachmentPoint.attachmentPointNumber ===\n            beginAtomAttachmentPointNumber,\n        );\n      const endAtomAttachmentPointNumber = isNumber(\n        bond.endSuperatomAttachmentPointNumber,\n      )\n        ? bond.endSuperatomAttachmentPointNumber\n        : endAtomSgroupAttachmentPoints?.findIndex(\n            (sgroupAttachmentPoint) =>\n              sgroupAttachmentPoint.atomId === bond.end &&\n              !superatomAttachmentPointToBond.has(sgroupAttachmentPoint),\n          );\n      const endAtomAttachmentPoint =\n        isNumber(endAtomAttachmentPointNumber) &&\n        endAtomSgroupAttachmentPoints?.find(\n          (attachmentPoint) =>\n            attachmentPoint.attachmentPointNumber ===\n            endAtomAttachmentPointNumber,\n        );\n\n      if (beginAtomAttachmentPoint) {\n        superatomAttachmentPointToBond.set(beginAtomAttachmentPoint, bond);\n      }\n      if (endAtomAttachmentPoint) {\n        superatomAttachmentPointToBond.set(endAtomAttachmentPoint, bond);\n      }\n      if (\n        endAtomSgroup !== beginAtomSgroup &&\n        isNumber(beginAtomAttachmentPointNumber) &&\n        isNumber(endAtomAttachmentPointNumber) &&\n        beginAtomSgroup &&\n        endAtomSgroup &&\n        (beginAtomSgroup instanceof MonomerMicromolecule ||\n          beginAtomSgroup.isSuperatomWithoutLabel) &&\n        (endAtomSgroup instanceof MonomerMicromolecule ||\n          endAtomSgroup.isSuperatomWithoutLabel)\n      ) {\n        // Here we take monomers from sgroupToMonomer in case of macromolecules structure and\n        // from fragmentIdToMonomer in case of micromolecules structure.\n        const firstMonomer =\n          beginAtomSgroup instanceof MonomerMicromolecule\n            ? sgroupToMonomer.get(beginAtomSgroup)\n            : fragmentIdToMonomer.get(beginAtom.fragment);\n        const secondMonomer =\n          endAtomSgroup instanceof MonomerMicromolecule\n            ? sgroupToMonomer.get(endAtomSgroup)\n            : fragmentIdToMonomer.get(endAtom.fragment);\n\n        assert(firstMonomer);\n        assert(secondMonomer);\n\n        command.merge(\n          drawingEntitiesManager.createPolymerBond(\n            firstMonomer,\n            secondMonomer,\n            getAttachmentPointLabel(beginAtomAttachmentPointNumber),\n            getAttachmentPointLabel(endAtomAttachmentPointNumber),\n            bond.type === Bond.PATTERN.TYPE.HYDROGEN\n              ? MACROMOLECULES_BOND_TYPES.HYDROGEN\n              : MACROMOLECULES_BOND_TYPES.SINGLE,\n          ),\n        );\n      }\n    });\n\n    drawingEntitiesManager.setMicromoleculesHiddenEntities(struct);\n\n    if (editor) {\n      editor.viewModel.initialize([...drawingEntitiesManager.bonds.values()]);\n    }\n\n    return {\n      drawingEntitiesManager,\n      modelChanges: command,\n      fragmentIdToMonomer,\n      fragmentIdToAtomIdMap,\n    };\n  }\n}\n","import { Vec2 } from 'domain/entities';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { Bond } from 'domain/entities/CoreBond';\n\nexport class HalfEdge {\n  public direction: Vec2;\n  public loopId: number;\n  // eslint-disable-next-line no-use-before-define\n  public oppositeHalfEdge: HalfEdge | undefined;\n  // eslint-disable-next-line no-use-before-define\n  public nextHalfEdge: HalfEdge | undefined;\n  public sinToLeftNeighborHalfEdge: number;\n  public cosToLeftNeighborHalfEdge: number;\n  // eslint-disable-next-line no-use-before-define\n  public leftNeighborHalfEdge: HalfEdge | undefined;\n  public sinToRightNeighborHalfEdge: number;\n  public cosToRightNeighborHalfEdge: number;\n  // eslint-disable-next-line no-use-before-define\n  public rightNeighborHalfEdge: HalfEdge | undefined;\n\n  constructor(\n    public id: number,\n    public firstAtom: Atom,\n    public secondAtom: Atom,\n    public bond: Bond,\n  ) {\n    this.direction = new Vec2();\n    this.loopId = -1; // left loop id if the half-bond is in a loop, otherwise -1\n    this.sinToLeftNeighborHalfEdge = 0;\n    this.cosToLeftNeighborHalfEdge = 0;\n    this.sinToRightNeighborHalfEdge = 0;\n    this.cosToRightNeighborHalfEdge = 0;\n  }\n\n  public get leftNormal() {\n    return this.direction.turnLeft();\n  }\n\n  public get angle() {\n    // angle to (1,0), used for sorting the bonds\n    return this.direction.oxAngle();\n  }\n\n  public get position() {\n    return this.firstAtom.position || new Vec2(0, 0);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { HalfEdge } from 'application/render/view-model/HalfEdge';\nimport { Bond } from 'domain/entities';\n\nexport class Loop {\n  public doubleBondsAmount = 0;\n  public aromatic = true;\n\n  constructor(public halfEdges: Array<HalfEdge>, public isConvex = false) {\n    this.calculateDoubleBondsAmount();\n  }\n\n  private calculateDoubleBondsAmount() {\n    this.halfEdges.forEach((halfEdge) => {\n      if (halfEdge.bond.type !== Bond.PATTERN.TYPE.AROMATIC)\n        this.aromatic = false;\n      if (halfEdge.bond.type === Bond.PATTERN.TYPE.DOUBLE)\n        this.doubleBondsAmount++;\n    });\n  }\n}\n","import { HalfEdge } from 'application/render/view-model/HalfEdge';\nimport { Bond } from 'domain/entities/CoreBond';\nimport { KetcherLogger } from 'utilities';\nimport { Box2Abs, Pile, Vec2 } from 'domain/entities';\nimport { Atom } from 'domain/entities/CoreAtom';\nimport { Loop } from 'application/render/view-model/Loop';\n\nexport class ViewModel {\n  public halfEdges = new Map<number, HalfEdge>();\n  public atomsToHalfEdges = new Map<Atom, HalfEdge[]>();\n  public bondsToHalfEdges = new Map<Bond, HalfEdge[]>();\n  public loops = new Map<number, Loop>();\n\n  private setHalfBondProperties(\n    halfEdge: HalfEdge,\n    oppositeHalfEdge: HalfEdge,\n  ) {\n    const coordsDifference = Vec2.diff(\n      halfEdge.secondAtom.position,\n      halfEdge.firstAtom.position,\n    ).normalized();\n\n    halfEdge.oppositeHalfEdge = oppositeHalfEdge;\n    halfEdge.direction =\n      Vec2.dist(halfEdge.secondAtom.position, halfEdge.firstAtom.position) >\n      1e-4\n        ? coordsDifference\n        : new Vec2(1, 0);\n    if (halfEdge.loopId < 0) halfEdge.loopId = -1;\n  }\n\n  private setAtomsToHalfEdgesMap(atom: Atom, halfEdge: HalfEdge) {\n    const atomHalfEdges = this.atomsToHalfEdges.get(atom);\n\n    if (!atomHalfEdges) {\n      this.atomsToHalfEdges.set(atom, [halfEdge]);\n    } else {\n      atomHalfEdges.push(halfEdge);\n    }\n  }\n\n  private setBondsToHalfEdgesMap(bond: Bond, halfEdge: HalfEdge) {\n    const bondsToHalfEdges = this.bondsToHalfEdges.get(bond);\n\n    if (!bondsToHalfEdges) {\n      this.bondsToHalfEdges.set(bond, [halfEdge]);\n    } else {\n      bondsToHalfEdges.push(halfEdge);\n    }\n  }\n\n  private initHalfEdge(bond: Bond) {\n    const firstHalfEdgeId = 2 * bond.id;\n    const secondHalfEdgeId = 2 * bond.id + 1;\n    const firstHalfEdge = new HalfEdge(\n      firstHalfEdgeId,\n      bond.firstAtom,\n      bond.secondAtom,\n      bond,\n    );\n    const secondHalfEdge = new HalfEdge(\n      secondHalfEdgeId,\n      bond.secondAtom,\n      bond.firstAtom,\n      bond,\n    );\n\n    this.halfEdges.set(firstHalfEdgeId, firstHalfEdge);\n    this.halfEdges.set(secondHalfEdgeId, secondHalfEdge);\n    this.setAtomsToHalfEdgesMap(bond.firstAtom, firstHalfEdge);\n    this.setAtomsToHalfEdgesMap(bond.secondAtom, secondHalfEdge);\n    this.setBondsToHalfEdgesMap(bond, firstHalfEdge);\n    this.setBondsToHalfEdgesMap(bond, secondHalfEdge);\n    this.setHalfBondProperties(firstHalfEdge, secondHalfEdge);\n    this.setHalfBondProperties(secondHalfEdge, firstHalfEdge);\n  }\n\n  private initHalfEdges(bonds: Bond[]) {\n    bonds.forEach((bond) => {\n      this.initHalfEdge(bond);\n    });\n  }\n\n  private setHalfEdgesAngle(halfEdge: HalfEdge, nextHalfEdge: HalfEdge) {\n    halfEdge.cosToRightNeighborHalfEdge = Vec2.dot(\n      halfEdge.direction,\n      nextHalfEdge.direction,\n    );\n    nextHalfEdge.cosToLeftNeighborHalfEdge = Vec2.dot(\n      halfEdge.direction,\n      nextHalfEdge.direction,\n    );\n\n    halfEdge.sinToRightNeighborHalfEdge = Vec2.cross(\n      halfEdge.direction,\n      nextHalfEdge.direction,\n    );\n    nextHalfEdge.sinToLeftNeighborHalfEdge = Vec2.cross(\n      halfEdge.direction,\n      nextHalfEdge.direction,\n    );\n\n    nextHalfEdge.leftNeighborHalfEdge = halfEdge;\n    halfEdge.rightNeighborHalfEdge = nextHalfEdge;\n  }\n\n  private sortAtomsHalfEdges() {\n    this.atomsToHalfEdges.forEach((atomHalfEdges, atom) => {\n      atomHalfEdges\n        .sort((halfEdge1, halfEdge2) => halfEdge1.angle - halfEdge2.angle)\n        .forEach((halfEdge, halfEdgeIndex) => {\n          const nextHalfEdge =\n            atomHalfEdges[(halfEdgeIndex + 1) % atomHalfEdges.length];\n\n          if (!halfEdge.oppositeHalfEdge) {\n            KetcherLogger.warn(\n              `Failed to sort HalfEdges for atom ${atom.id}. HalfEdge ${halfEdge.id} has no opposite halfEdge`,\n            );\n\n            return;\n          }\n\n          halfEdge.oppositeHalfEdge.nextHalfEdge = nextHalfEdge;\n          this.setHalfEdgesAngle(halfEdge, nextHalfEdge);\n        });\n    });\n  }\n\n  private partitionLoop(halfEdgesInLoop: HalfEdge[]) {\n    const subloops: Array<HalfEdge[]> = [];\n    let continueFlag = true;\n\n    while (continueFlag) {\n      const atomToHalfBond = {}; // map from every atom in the loop to the index of the first half-bond starting from that atom in the uniqHb array\n      continueFlag = false;\n\n      for (let l = 0; l < halfEdgesInLoop.length; ++l) {\n        const halfEdge = halfEdgesInLoop[l];\n        const firstAtomId = halfEdge.firstAtom.id;\n        const secondAtomId = halfEdge.secondAtom.id;\n        if (secondAtomId in atomToHalfBond) {\n          // subloop found\n          const s = atomToHalfBond[secondAtomId]; // where the subloop begins\n          const subloop = halfEdgesInLoop.slice(s, l + 1);\n          subloops.push(subloop);\n          if (l < halfEdgesInLoop.length) {\n            // remove half-bonds corresponding to the subloop\n            halfEdgesInLoop.splice(s, l - s + 1);\n          }\n          continueFlag = true;\n          break;\n        }\n        atomToHalfBond[firstAtomId] = l;\n      }\n      if (!continueFlag) subloops.push(halfEdgesInLoop); // we're done, no more subloops found\n    }\n    return subloops;\n  }\n\n  private getAngleBetweenHalfEdges(\n    firstHalfEdge: HalfEdge,\n    secondHalfEdge: HalfEdge,\n  ): number {\n    return Math.atan2(\n      Vec2.cross(firstHalfEdge.direction, secondHalfEdge.direction),\n      Vec2.dot(firstHalfEdge.direction, secondHalfEdge.direction),\n    );\n  }\n\n  private loopIsInner(halfEdgesInLoop: HalfEdge[]): boolean {\n    let totalAngle = 2 * Math.PI;\n    halfEdgesInLoop.forEach((halfEdge, i, loopArr) => {\n      const nextHalfEdge = loopArr[(i + 1) % loopArr.length];\n      const angle = this.getAngleBetweenHalfEdges(halfEdge, nextHalfEdge);\n      totalAngle +=\n        nextHalfEdge.oppositeHalfEdge === halfEdge ? Math.PI : angle; // back and forth along the same edge\n    });\n    return Math.abs(totalAngle) < Math.PI;\n  }\n\n  private loopHasSelfIntersections(halfEdges: Array<HalfEdge>) {\n    for (let i = 0; i < halfEdges.length; ++i) {\n      const halfEdge = halfEdges[i];\n      const set = new Pile([halfEdge.firstAtom, halfEdge.secondAtom]);\n\n      for (let j = i + 2; j < halfEdges.length; ++j) {\n        const nextNextHalfEdge = halfEdges[j];\n        if (\n          set.has(nextNextHalfEdge.firstAtom) ||\n          set.has(nextNextHalfEdge.secondAtom)\n        )\n          continue; // skip edges sharing an atom\n\n        if (\n          Box2Abs.segmentIntersection(\n            halfEdge.firstAtom.position,\n            halfEdge.secondAtom.position,\n            nextNextHalfEdge.firstAtom.position,\n            nextNextHalfEdge.secondAtom.position,\n          )\n        )\n          return true;\n      }\n    }\n\n    return false;\n  }\n\n  private loopIsConvex(loop: HalfEdge[]): boolean {\n    return loop.every((halfEdge, k, loopArr) => {\n      const angle = this.getAngleBetweenHalfEdges(\n        halfEdge,\n        loopArr[(k + 1) % loopArr.length],\n      );\n      return angle <= 0;\n    });\n  }\n\n  private findLoops() {\n    const newLoops: Array<number[]> = [];\n    const bondsToMark = new Pile<number>();\n\n    /*\n      Starting from each half-bond not known to be in a loop yet,\n      follow the 'next' links until the initial half-bond is reached or\n      the length of the sequence exceeds the number of half-bonds available.\n      In a planar graph, as long as every bond is a part of some \"loop\" -\n      either an outer or an inner one - every iteration either yields a loop\n      or doesn't start at all. Thus this has linear complexity in the number\n      of bonds for planar graphs.\n   */\n\n    let currentHalfEdge;\n    let index = 0;\n    let halfEdgesInPotentialLoop: HalfEdge[] = [];\n\n    this.halfEdges.forEach((halfEdge) => {\n      if (halfEdge.loopId !== -1) return;\n\n      for (\n        currentHalfEdge = halfEdge, index = 0, halfEdgesInPotentialLoop = [];\n        index <= this.halfEdges.size;\n        currentHalfEdge = currentHalfEdge.nextHalfEdge, ++index\n      ) {\n        if (!(index > 0 && currentHalfEdge === halfEdge)) {\n          halfEdgesInPotentialLoop.push(currentHalfEdge);\n          continue; // eslint-disable-line no-continue\n        }\n\n        // loop found\n        const subloops = this.partitionLoop(halfEdgesInPotentialLoop);\n        subloops.forEach((halfEdgesInSubLoop) => {\n          let loopId;\n          if (\n            this.loopIsInner(halfEdgesInSubLoop) &&\n            !this.loopHasSelfIntersections(halfEdgesInSubLoop)\n          ) {\n            /*\n                        loop is internal\n                        use lowest half-bond id in the loop as the loop id\n                        this ensures that the loop gets the same id if it is discarded and then recreated,\n                        which in turn is required to enable redrawing while dragging, as actions store item id's\n                     */\n            loopId = Math.min(\n              ...halfEdgesInSubLoop.map((halfEdge) => halfEdge.id),\n            );\n            this.loops.set(\n              loopId,\n              new Loop(\n                halfEdgesInSubLoop,\n                this.loopIsConvex(halfEdgesInSubLoop),\n              ),\n            );\n          } else {\n            loopId = -2;\n          }\n\n          halfEdgesInSubLoop.forEach((halfEdge) => {\n            halfEdge.loopId = loopId;\n            bondsToMark.add(halfEdge.bond.id);\n          });\n\n          if (loopId >= 0) newLoops.push(loopId);\n        });\n        break;\n      }\n    });\n\n    return {\n      newLoops,\n      bondsToMark: Array.from(bondsToMark),\n    };\n  }\n\n  private clearState() {\n    this.halfEdges.clear();\n    this.loops.clear();\n    this.atomsToHalfEdges.clear();\n    this.bondsToHalfEdges.clear();\n  }\n\n  public initialize(bonds: Bond[]) {\n    this.clearState();\n    this.initHalfEdges(bonds);\n    this.sortAtomsHalfEdges();\n    this.findLoops();\n  }\n}\n","import { drawnStructuresSelector } from 'application/editor/constants';\nimport { Editor, EditorType } from 'application/editor/editor.types';\nimport {\n  editorEvents,\n  hotkeysConfiguration,\n  renderersEvents,\n  resetEditorEvents,\n} from 'application/editor/editorEvents';\nimport { MacromoleculesConverter } from 'application/editor/MacromoleculesConverter';\nimport {\n  FlexMode,\n  LayoutMode,\n  modesMap,\n  SequenceMode,\n  SnakeMode,\n} from 'application/editor/modes/';\nimport { BaseMode } from 'application/editor/modes/internal';\nimport { toolsMap } from 'application/editor/tools';\nimport { PolymerBond as PolymerBondTool } from 'application/editor/tools/Bond';\nimport {\n  BaseTool,\n  IRnaPreset,\n  isBaseTool,\n  Tool,\n  ToolConstructorInterface,\n  ToolEventHandlerName,\n} from 'application/editor/tools/Tool';\nimport {\n  IKetMacromoleculesContent,\n  IKetMonomerGroupTemplate,\n  KetMonomerGroupTemplateClass,\n  KetTemplateType,\n} from 'application/formatters';\nimport { FlexModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/FlexModePolymerBondRenderer';\nimport { SnakeModePolymerBondRenderer } from 'application/render/renderers/PolymerBondRenderer/SnakeModePolymerBondRenderer';\nimport { RenderersManager } from 'application/render/renderers/RenderersManager';\nimport { BaseSequenceItemRenderer } from 'application/render/renderers/sequence/BaseSequenceItemRenderer';\nimport { SequenceRenderer } from 'application/render/renderers/sequence/SequenceRenderer';\nimport { ketcherProvider } from 'application/utils';\nimport assert from 'assert';\nimport { SequenceType, Struct, Vec2 } from 'domain/entities';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { Command } from 'domain/entities/Command';\nimport {\n  DrawingEntitiesManager,\n  MONOMER_START_X_POSITION,\n  MONOMER_START_Y_POSITION,\n  SNAKE_LAYOUT_CELL_WIDTH,\n} from 'domain/entities/DrawingEntitiesManager';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { KetSerializer } from 'domain/serializers';\nimport { AttachmentPointName, MonomerItemType } from 'domain/types';\nimport { DOMSubscription } from 'subscription';\nimport { initHotKeys, KetcherLogger, keyNorm } from 'utilities';\nimport monomersDataRaw from './data/monomers.ket';\nimport { EditorHistory, HistoryOperationType } from './EditorHistory';\nimport { Coordinates } from './shared/coordinates';\nimport ZoomTool from './tools/Zoom';\nimport { ViewModel } from 'application/render/view-model/ViewModel';\nimport { HandTool } from 'application/editor/tools/Hand';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\nimport { ToolName } from 'application/editor/tools/types';\nimport { BaseMonomerRenderer } from 'application/render';\n\ninterface ICoreEditorConstructorParams {\n  theme;\n  canvas: SVGSVGElement;\n  mode?: BaseMode;\n  monomersLibraryUpdate?: string | JSON;\n}\n\nfunction isMouseMainButtonPressed(event: MouseEvent) {\n  return event.button === 0;\n}\n\nlet persistentMonomersLibrary: MonomerItemType[] = [];\nlet persistentMonomersLibraryParsedJson: IKetMacromoleculesContent | null =\n  null;\n\nlet editor;\nexport class CoreEditor {\n  public events;\n\n  public _type: EditorType;\n  public renderersContainer: RenderersManager;\n  public drawingEntitiesManager: DrawingEntitiesManager;\n  public viewModel: ViewModel;\n  public lastCursorPosition: Vec2 = new Vec2(0, 0);\n  public lastCursorPositionOfCanvas: Vec2 = new Vec2(0, 0);\n  private _monomersLibraryParsedJson: IKetMacromoleculesContent | null = null;\n  private _monomersLibrary: MonomerItemType[] = [];\n  public canvas: SVGSVGElement;\n  public drawnStructuresWrapperElement: SVGGElement;\n  public canvasOffset: DOMRect;\n  public theme;\n  public zoomTool: ZoomTool;\n  // private lastEvent: Event | undefined;\n  private tool?: Tool | BaseTool | undefined;\n  public get selectedTool(): Tool | BaseTool | undefined {\n    return this.tool;\n  }\n\n  public mode: BaseMode;\n  public sequenceTypeEnterMode = SequenceType.RNA;\n  private micromoleculesEditor: Editor;\n  private hotKeyEventHandler: (event: unknown) => void = () => {};\n  private copyEventHandler: (event: ClipboardEvent) => void = () => {};\n  private pasteEventHandler: (event: ClipboardEvent) => void = () => {};\n  private keydownEventHandler: (event: KeyboardEvent) => void = () => {};\n\n  constructor({\n    theme,\n    canvas,\n    mode,\n    monomersLibraryUpdate,\n  }: ICoreEditorConstructorParams) {\n    this._type = EditorType.Macromolecules;\n    this.theme = theme;\n    this.canvas = canvas;\n    this.drawnStructuresWrapperElement = canvas.querySelector(\n      drawnStructuresSelector,\n    ) as SVGGElement;\n    this.mode = mode ?? new SequenceMode();\n    resetEditorEvents();\n    this.events = editorEvents;\n    this.setMonomersLibrary(monomersDataRaw);\n    this._monomersLibraryParsedJson = JSON.parse(monomersDataRaw);\n    if (monomersLibraryUpdate) {\n      this.updateMonomersLibrary(monomersLibraryUpdate);\n    }\n    this.subscribeEvents();\n    this.renderersContainer = new RenderersManager({ theme });\n    this.drawingEntitiesManager = new DrawingEntitiesManager();\n    this.viewModel = new ViewModel();\n    this.domEventSetup();\n    this.setupContextMenuEvents();\n    this.setupKeyboardEvents();\n    this.setupCopyPasteEvent();\n    this.canvasOffset = this.canvas.getBoundingClientRect();\n    this.zoomTool = ZoomTool.initInstance(this.drawingEntitiesManager);\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    editor = this;\n    const ketcher = ketcherProvider.getKetcher();\n    this.micromoleculesEditor = ketcher?.editor;\n    this.switchToMacromolecules();\n    this.rerenderSequenceMode();\n  }\n\n  static provideEditorInstance(): CoreEditor {\n    return editor;\n  }\n\n  private parseMonomersLibrary(monomersDataRaw: string | JSON) {\n    const monomersLibraryParsedJson =\n      typeof monomersDataRaw === 'string'\n        ? JSON.parse(monomersDataRaw)\n        : monomersDataRaw;\n    const serializer = new KetSerializer();\n    const monomersLibrary = serializer.convertMonomersLibrary(\n      monomersLibraryParsedJson,\n    );\n\n    return { monomersLibraryParsedJson, monomersLibrary };\n  }\n\n  private setMonomersLibrary(monomersDataRaw: string) {\n    if (\n      persistentMonomersLibrary.length !== 0 &&\n      persistentMonomersLibraryParsedJson !== undefined\n    ) {\n      this._monomersLibrary = persistentMonomersLibrary;\n      this._monomersLibraryParsedJson = persistentMonomersLibraryParsedJson;\n      return;\n    }\n\n    const { monomersLibraryParsedJson, monomersLibrary } =\n      this.parseMonomersLibrary(monomersDataRaw);\n    this._monomersLibrary = monomersLibrary;\n    this._monomersLibraryParsedJson = monomersLibraryParsedJson;\n    persistentMonomersLibrary = monomersLibrary;\n    persistentMonomersLibraryParsedJson = monomersLibraryParsedJson;\n  }\n\n  public updateMonomersLibrary(monomersDataRaw: string | JSON) {\n    const {\n      monomersLibraryParsedJson: newMonomersLibraryChunkParsedJson,\n      monomersLibrary: newMonomersLibraryChunk,\n    } = this.parseMonomersLibrary(monomersDataRaw);\n\n    newMonomersLibraryChunk.forEach((newMonomer) => {\n      const existingMonomerIndex = this._monomersLibrary.findIndex(\n        (monomer) => {\n          return (\n            monomer?.props?.MonomerName === newMonomer?.props?.MonomerName &&\n            monomer?.props?.MonomerClass === newMonomer?.props?.MonomerClass\n          );\n        },\n      );\n\n      const newMonomerProps = newMonomer.props;\n      const monomerIdToUse = newMonomerProps.id || newMonomerProps.MonomerName;\n\n      if (existingMonomerIndex !== -1) {\n        this._monomersLibrary[existingMonomerIndex] = newMonomer;\n\n        const existingMonomerProps =\n          this._monomersLibrary[existingMonomerIndex].props;\n        const existingMonomerIdToUse =\n          existingMonomerProps.id || existingMonomerProps.MonomerName;\n        // It's safe to use non-null assertion here and below because we already specified monomers library and parsed JSON before\n        const existingMonomerRefIndex =\n          // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n          this._monomersLibraryParsedJson!.root.templates.findIndex(\n            (template) => template.$ref === existingMonomerIdToUse,\n          );\n        if (existingMonomerRefIndex && existingMonomerRefIndex !== -1) {\n          // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n          delete this._monomersLibraryParsedJson!.root.templates[\n            existingMonomerRefIndex\n          ];\n          // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n          delete this._monomersLibraryParsedJson![existingMonomerIdToUse];\n          // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n          this._monomersLibraryParsedJson!.root.templates.push({\n            $ref: monomerIdToUse,\n          });\n          // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n          this._monomersLibraryParsedJson![monomerIdToUse] =\n            newMonomersLibraryChunkParsedJson[monomerIdToUse];\n        }\n      } else {\n        this._monomersLibrary.push(newMonomer);\n        // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n        this._monomersLibraryParsedJson!.root.templates.push({\n          $ref: monomerIdToUse,\n        });\n        // eslint-disable-next-line  @typescript-eslint/no-non-null-assertion\n        this._monomersLibraryParsedJson![monomerIdToUse] =\n          newMonomersLibraryChunkParsedJson[monomerIdToUse];\n      }\n    });\n\n    this.events.updateMonomersLibrary.dispatch();\n  }\n\n  public get monomersLibraryParsedJson() {\n    return this._monomersLibraryParsedJson;\n  }\n\n  public get monomersLibrary() {\n    return this._monomersLibrary;\n  }\n\n  public get defaultRnaPresetsLibraryItems() {\n    const monomersLibraryJson = this.monomersLibraryParsedJson;\n\n    if (!monomersLibraryJson) {\n      return [];\n    }\n\n    return monomersLibraryJson.root.templates\n      .filter((templateRef) => {\n        const template = monomersLibraryJson[templateRef.$ref];\n\n        return (\n          template.type === KetTemplateType.MONOMER_GROUP_TEMPLATE &&\n          template.class === KetMonomerGroupTemplateClass.RNA\n        );\n      })\n      .map(\n        (templateRef) => monomersLibraryJson[templateRef.$ref],\n      ) as IKetMonomerGroupTemplate[];\n  }\n\n  private handleHotKeyEvents(event) {\n    const keySettings = hotkeysConfiguration;\n    const hotKeys = initHotKeys(keySettings);\n    const shortcutKey = keyNorm.lookup(hotKeys, event);\n    const isInput =\n      event.target.nodeName === 'INPUT' || event.target.nodeName === 'TEXTAREA';\n\n    if (keySettings[shortcutKey]?.handler && !isInput) {\n      keySettings[shortcutKey].handler(this);\n      event.preventDefault();\n    }\n  }\n\n  private setupKeyboardEvents() {\n    this.setupHotKeysEvents();\n    this.keydownEventHandler = async (event: KeyboardEvent) => {\n      await this.mode.onKeyDown(event);\n    };\n\n    document.addEventListener('keydown', this.keydownEventHandler);\n  }\n\n  private setupCopyPasteEvent() {\n    this.copyEventHandler = (event: ClipboardEvent) => {\n      this.mode.onCopy(event);\n    };\n    this.pasteEventHandler = (event: ClipboardEvent) => {\n      this.mode.onPaste(event);\n    };\n    document.addEventListener('copy', this.copyEventHandler);\n    document.addEventListener('paste', this.pasteEventHandler);\n  }\n\n  private setupHotKeysEvents() {\n    this.hotKeyEventHandler = (event) => this.handleHotKeyEvents(event);\n    document.addEventListener('keydown', this.hotKeyEventHandler);\n  }\n\n  private setupContextMenuEvents() {\n    document.addEventListener('contextmenu', (event) => {\n      event.preventDefault();\n\n      const eventData = event.target?.__data__;\n      const canvasBoundingClientRect = this.canvas.getBoundingClientRect();\n      const isClickOnCanvas =\n        event.clientX >= canvasBoundingClientRect.left &&\n        event.clientX <= canvasBoundingClientRect.right &&\n        event.clientY >= canvasBoundingClientRect.top &&\n        event.clientY <= canvasBoundingClientRect.bottom;\n\n      if (eventData instanceof BaseSequenceItemRenderer) {\n        this.events.rightClickSequence.dispatch(\n          event,\n          SequenceRenderer.selections,\n        );\n      } else if (\n        eventData instanceof FlexModePolymerBondRenderer ||\n        (eventData instanceof SnakeModePolymerBondRenderer &&\n          !(eventData.polymerBond instanceof HydrogenBond))\n      ) {\n        this.events.rightClickPolymerBond.dispatch(event, eventData);\n      } else if (\n        eventData instanceof BaseMonomerRenderer &&\n        eventData.monomer.selected\n      ) {\n        this.events.rightClickSelectedMonomers.dispatch(\n          event,\n          this.drawingEntitiesManager.selectedEntities\n            .filter(([, drawingEntity]) => drawingEntity instanceof BaseMonomer)\n            .map(([, drawingEntity]) => drawingEntity as BaseMonomer),\n        );\n      } else if (isClickOnCanvas) {\n        this.events.rightClickCanvas.dispatch(event);\n      }\n\n      return false;\n    });\n  }\n\n  private subscribeEvents() {\n    this.events.selectMonomer.add((monomer) => this.onSelectMonomer(monomer));\n    this.events.selectPreset.add((preset) => this.onSelectRNAPreset(preset));\n    this.events.selectTool.add((tool, options) =>\n      this.onSelectTool(tool, options),\n    );\n    this.events.createBondViaModal.add((payload) => this.onCreateBond(payload));\n    this.events.cancelBondCreationViaModal.add((secondMonomer: BaseMonomer) =>\n      this.onCancelBondCreation(secondMonomer),\n    );\n    this.events.selectMode.add((isSnakeMode) => this.onSelectMode(isSnakeMode));\n    this.events.selectHistory.add((name) => this.onSelectHistory(name));\n\n    renderersEvents.forEach((eventName) => {\n      this.events[eventName].add((event) => {\n        this.useModeIfNeeded(eventName, event);\n        this.useToolIfNeeded(eventName, event);\n      });\n    });\n    this.events.editSequence.add(\n      (sequenceItemRenderer: BaseSequenceItemRenderer) =>\n        this.onEditSequence(sequenceItemRenderer),\n    );\n\n    this.events.turnOnSequenceEditInRNABuilderMode.add(() =>\n      this.onTurnOnSequenceEditInRNABuilderMode(),\n    );\n    this.events.turnOffSequenceEditInRNABuilderMode.add(() =>\n      this.onTurnOffSequenceEditInRNABuilderMode(),\n    );\n    this.events.changeSequenceTypeEnterMode.add((mode: SequenceType) =>\n      this.onChangeSequenceTypeEnterMode(mode),\n    );\n    this.events.createAntisenseChain.add(() => {\n      this.onCreateAntisenseChain();\n    });\n    this.events.copySelectedStructure.add(() => {\n      this.mode.onCopy();\n    });\n    this.events.deleteSelectedStructure.add(() => {\n      const command = new Command();\n      const history = new EditorHistory(this);\n\n      command.merge(this.drawingEntitiesManager.deleteSelectedEntities());\n      history.update(command);\n      this.renderersContainer.update(command);\n    });\n  }\n\n  private onEditSequence(sequenceItemRenderer: BaseSequenceItemRenderer) {\n    if (!(this.mode instanceof SequenceMode)) {\n      return;\n    }\n\n    this.mode.turnOnEditMode(sequenceItemRenderer);\n  }\n\n  private onTurnOnSequenceEditInRNABuilderMode() {\n    if (!(this.mode instanceof SequenceMode)) {\n      return;\n    }\n\n    this.mode.turnOnSequenceEditInRNABuilderMode();\n  }\n\n  private onTurnOffSequenceEditInRNABuilderMode() {\n    if (!(this.mode instanceof SequenceMode)) {\n      return;\n    }\n\n    this.mode.turnOffSequenceEditInRNABuilderMode();\n  }\n\n  private onChangeSequenceTypeEnterMode(mode: SequenceType) {\n    this.sequenceTypeEnterMode = mode;\n  }\n\n  private onCreateAntisenseChain() {\n    const modelChanges = this.drawingEntitiesManager.createAntisenseChain();\n    const history = new EditorHistory(this);\n\n    this.renderersContainer.update(modelChanges);\n    history.update(modelChanges);\n    this.scrollToTopLeftCorner();\n  }\n\n  private onSelectMonomer(monomer: MonomerItemType) {\n    if (this.mode instanceof SequenceMode) {\n      this.mode.insertMonomerFromLibrary(monomer);\n    } else {\n      this.selectTool(ToolName.monomer, monomer);\n    }\n  }\n\n  private onSelectRNAPreset(preset: IRnaPreset) {\n    if (this.mode instanceof SequenceMode) {\n      this.mode.insertPresetFromLibrary(preset);\n    } else {\n      if (preset) {\n        this.selectTool(ToolName.preset, preset);\n      } else {\n        this.tool = undefined;\n      }\n    }\n  }\n\n  public onSelectTool(tool: ToolName, options?: object) {\n    this.selectTool(tool, options);\n  }\n\n  private onCreateBond(payload: {\n    firstMonomer: BaseMonomer;\n    secondMonomer: BaseMonomer;\n    firstSelectedAttachmentPoint: AttachmentPointName;\n    secondSelectedAttachmentPoint: AttachmentPointName;\n    polymerBond?: PolymerBond;\n    isReconnection?: boolean;\n    initialFirstMonomerAttachmentPoint?: AttachmentPointName;\n    initialSecondMonomerAttachmentPoint?: AttachmentPointName;\n  }) {\n    if (payload.isReconnection && payload.polymerBond) {\n      const command = new Command();\n      const history = new EditorHistory(this);\n\n      if (\n        !payload.initialFirstMonomerAttachmentPoint ||\n        !payload.initialSecondMonomerAttachmentPoint\n      ) {\n        KetcherLogger.error('Attachment points are not found for the bond');\n\n        return;\n      }\n\n      command.merge(\n        this.drawingEntitiesManager.reconnectPolymerBond(\n          payload.polymerBond,\n          payload.firstSelectedAttachmentPoint,\n          payload.secondSelectedAttachmentPoint,\n          payload.initialFirstMonomerAttachmentPoint,\n          payload.initialSecondMonomerAttachmentPoint,\n        ),\n      );\n\n      if (this.mode instanceof SnakeMode) {\n        command.merge(\n          this.drawingEntitiesManager.recalculateCanvasMatrix(\n            this.drawingEntitiesManager.canvasMatrix?.chainsCollection,\n            this.drawingEntitiesManager.snakeLayoutMatrix,\n          ),\n        );\n      }\n\n      history.update(command);\n      this.renderersContainer.update(command);\n\n      return;\n    }\n\n    if (this.tool instanceof PolymerBondTool) {\n      this.tool.handleBondCreation(payload);\n    }\n  }\n\n  private onCancelBondCreation(secondMonomer: BaseMonomer) {\n    if (this.tool instanceof PolymerBondTool) {\n      this.tool.handleBondCreationCancellation(secondMonomer);\n    }\n  }\n\n  private onSelectMode(\n    data:\n      | LayoutMode\n      | { mode: LayoutMode; mergeWithLatestHistoryCommand: boolean },\n  ) {\n    const mode = typeof data === 'object' ? data.mode : data;\n    const ModeConstructor = modesMap[mode];\n    assert(ModeConstructor);\n    const history = new EditorHistory(this);\n    const hasModeChanged = this.mode.modeName !== mode;\n    this.mode.destroy();\n    this.mode = new ModeConstructor(this.mode.modeName);\n    const command = this.mode.initialize(true, false, !hasModeChanged);\n    history.update(\n      command,\n      typeof data === 'object' ? data?.mergeWithLatestHistoryCommand : false,\n    );\n  }\n\n  public setMode(mode: BaseMode) {\n    this.mode = mode;\n  }\n\n  public get isSequenceMode() {\n    return this?.mode instanceof SequenceMode;\n  }\n\n  public get isSequenceEditMode() {\n    return this?.mode instanceof SequenceMode && this?.mode.isEditMode;\n  }\n\n  public get isSequenceEditInRNABuilderMode() {\n    return (\n      this?.mode instanceof SequenceMode && this?.mode.isEditInRNABuilderMode\n    );\n  }\n\n  public get isSequenceAnyEditMode() {\n    return (\n      this?.mode instanceof SequenceMode &&\n      (this?.mode.isEditMode || this?.mode.isEditInRNABuilderMode)\n    );\n  }\n\n  public onSelectHistory(name: HistoryOperationType) {\n    const history = new EditorHistory(this);\n    if (name === 'undo') {\n      history.undo();\n    } else if (name === 'redo') {\n      history.redo();\n    }\n  }\n\n  public selectTool(name: ToolName, options?) {\n    const ToolConstructor: ToolConstructorInterface = toolsMap[name];\n    const oldTool = this.tool;\n\n    this.tool = new ToolConstructor(this, options);\n\n    if (isBaseTool(oldTool)) {\n      oldTool?.destroy();\n    }\n  }\n\n  public get isHandToolSelected() {\n    return this.selectedTool instanceof HandTool;\n  }\n\n  public unsubscribeEvents() {\n    for (const eventName in this.events) {\n      this.events[eventName].handlers = [];\n    }\n    document.removeEventListener('keydown', this.hotKeyEventHandler);\n    document.removeEventListener('copy', this.copyEventHandler);\n    document.removeEventListener('paste', this.pasteEventHandler);\n    document.removeEventListener('keydown', this.keydownEventHandler);\n  }\n\n  get trackedDomEvents() {\n    const trackedDomEvents: {\n      target: Element | Document;\n      eventName: string;\n      toolEventHandler: ToolEventHandlerName;\n    }[] = [\n      {\n        target: this.canvas,\n        eventName: 'click',\n        toolEventHandler: 'click',\n      },\n      {\n        target: this.canvas,\n        eventName: 'dblclick',\n        toolEventHandler: 'dblclick',\n      },\n      {\n        target: this.canvas,\n        eventName: 'mousedown',\n        toolEventHandler: 'mousedown',\n      },\n      {\n        target: document,\n        eventName: 'mousemove',\n        toolEventHandler: 'mousemove',\n      },\n      {\n        target: document,\n        eventName: 'mouseup',\n        toolEventHandler: 'mouseup',\n      },\n      {\n        target: document,\n        eventName: 'mouseleave',\n        toolEventHandler: 'mouseleave',\n      },\n      {\n        target: this.canvas,\n        eventName: 'mouseleave',\n        toolEventHandler: 'mouseLeaveClientArea',\n      },\n      {\n        target: this.canvas,\n        eventName: 'mouseover',\n        toolEventHandler: 'mouseover',\n      },\n    ];\n\n    return trackedDomEvents;\n  }\n\n  private domEventSetup() {\n    this.trackedDomEvents.forEach(({ target, eventName, toolEventHandler }) => {\n      this.events[eventName] = new DOMSubscription();\n      const subs = this.events[eventName];\n\n      target.addEventListener(eventName, subs.dispatch.bind(subs));\n\n      subs.add((event) => {\n        this.updateLastCursorPosition(event);\n\n        if (\n          ['mouseup', 'mousedown', 'click', 'dbclick'].includes(event.type) &&\n          !isMouseMainButtonPressed(event)\n        ) {\n          return true;\n        }\n\n        // if (eventName !== 'mouseup' && eventName !== 'mouseleave') {\n        //   // to complete drag actions\n        //   if (!event.target || event.target.nodeName === 'DIV') {\n        //     // click on scroll\n        //     this.hover(null);\n        //     return true;\n        //   }\n        // }\n\n        this.useModeIfNeeded(toolEventHandler, event);\n        const isToolUsed = this.useToolIfNeeded(toolEventHandler, event);\n        if (isToolUsed) {\n          return true;\n        }\n\n        return true;\n      }, -1);\n    });\n  }\n\n  private updateLastCursorPosition(event) {\n    const events = ['mousemove', 'click', 'mousedown', 'mouseup', 'mouseover'];\n    if (events.includes(event.type)) {\n      const clientAreaBoundingBox = this.canvasOffset;\n\n      this.lastCursorPosition = new Vec2({\n        x: event.pageX - clientAreaBoundingBox.x,\n        y: event.pageY - clientAreaBoundingBox.y,\n      });\n      this.lastCursorPositionOfCanvas = Coordinates.viewToCanvas(\n        this.lastCursorPosition,\n      );\n    }\n  }\n\n  private useToolIfNeeded(eventHandlerName: ToolEventHandlerName, event) {\n    const editorTool = this.tool as Tool;\n    if (!editorTool) {\n      return false;\n    }\n    // this.lastEvent = event;\n    const conditions = [\n      eventHandlerName in editorTool,\n      this.canvas.contains(event?.target) || editorTool.isSelectionRunning?.(),\n      // isContextMenuClosed(editor.contextMenu),\n    ];\n\n    if (conditions.every((condition) => condition)) {\n      editorTool[eventHandlerName]?.(event);\n      return true;\n    }\n\n    return false;\n  }\n\n  private useModeIfNeeded(\n    eventHandlerName: ToolEventHandlerName,\n    event: Event,\n  ) {\n    if (this.isHandToolSelected) {\n      return;\n    }\n\n    this.mode?.[eventHandlerName]?.(event);\n  }\n\n  public switchToMicromolecules() {\n    this.unsubscribeEvents();\n    const history = new EditorHistory(this);\n    history.destroy();\n    const struct = this.micromoleculesEditor.struct();\n    const reStruct = this.micromoleculesEditor.render.ctab;\n    const { conversionErrorMessage } =\n      MacromoleculesConverter.convertDrawingEntitiesToStruct(\n        this.drawingEntitiesManager,\n        struct,\n        reStruct,\n      );\n    reStruct.render.setMolecule(struct);\n    if (conversionErrorMessage) {\n      const ketcher = ketcherProvider.getKetcher();\n\n      ketcher.editor.setMacromoleculeConvertionError(conversionErrorMessage);\n    }\n    this._monomersLibraryParsedJson = null;\n    this._type = EditorType.Micromolecules;\n  }\n\n  private switchToMacromolecules() {\n    const struct = this.micromoleculesEditor?.struct() || new Struct();\n    const ketcher = ketcherProvider.getKetcher();\n    const { modelChanges } =\n      MacromoleculesConverter.convertStructToDrawingEntities(\n        struct,\n        this.drawingEntitiesManager,\n      );\n\n    if (this.mode instanceof SnakeMode) {\n      modelChanges.merge(\n        this.drawingEntitiesManager.applySnakeLayout(\n          this.canvas.width.baseVal.value,\n          true,\n          true,\n          false,\n        ),\n      );\n    }\n\n    this.renderersContainer.update(modelChanges);\n    ketcher?.editor.clear();\n    this._type = EditorType.Macromolecules;\n  }\n\n  private rerenderSequenceMode() {\n    if (this.mode instanceof SequenceMode) {\n      this.drawingEntitiesManager.clearCanvas();\n      this.drawingEntitiesManager.applyMonomersSequenceLayout();\n    }\n  }\n\n  public isCurrentModeWithAutozoom(): boolean {\n    return this.mode instanceof FlexMode || this.mode instanceof SnakeMode;\n  }\n\n  public zoomToStructuresIfNeeded() {\n    if (\n      // Temporary solution to disable autozoom for the polymer editor in e2e tests\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      window._ketcher_isAutozoomDisabled ||\n      !this.isCurrentModeWithAutozoom() ||\n      !this.drawingEntitiesManager.hasMonomers\n    ) {\n      return;\n    }\n    const structureBbox = RenderersManager.getRenderedStructuresBbox();\n\n    ZoomTool.instance.zoomStructureToFitHalfOfCanvas(structureBbox);\n  }\n\n  public scrollToTopLeftCorner() {\n    const drawnEntitiesBoundingBox =\n      RenderersManager.getRenderedStructuresBbox();\n\n    ZoomTool.instance.scrollTo(\n      new Vec2(drawnEntitiesBoundingBox.left, drawnEntitiesBoundingBox.top),\n      false,\n      MONOMER_START_X_POSITION - SNAKE_LAYOUT_CELL_WIDTH / 4,\n      MONOMER_START_Y_POSITION - SNAKE_LAYOUT_CELL_WIDTH / 4,\n      false,\n    );\n  }\n}\n","import {\n  IKetMacromoleculesContent,\n  IKetMonomerNode,\n  IKetMonomerTemplate,\n  IKetAmbiguousMonomerNode,\n  IKetAmbiguousMonomerTemplate,\n} from 'application/formatters/types/ket';\nimport { Struct, Vec2 } from 'domain/entities';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport {\n  setMonomerTemplatePrefix,\n  switchIntoChemistryCoordSystem,\n} from 'domain/serializers/ket/helpers';\nimport { KetSerializer } from 'domain/serializers';\nimport { monomerFactory } from 'application/editor';\n\nexport function templateToMonomerProps(template: IKetMonomerTemplate) {\n  return {\n    id: template.id,\n    Name: template.fullName || template.name || template.alias || template.id,\n    MonomerNaturalAnalogCode: template.naturalAnalogShort || '',\n    MonomerName: template.alias || template.id,\n    MonomerFullName: template.fullName,\n    MonomerType: template.classHELM,\n    MonomerClass: template.class,\n    MonomerCaps: {},\n    idtAliases: template.idtAliases,\n    unresolved: template.unresolved,\n  };\n}\n\nexport function monomerToDrawingEntity(\n  node: IKetMonomerNode,\n  template: IKetMonomerTemplate,\n  struct: Struct,\n  drawingEntitiesManager: DrawingEntitiesManager,\n) {\n  const position: Vec2 = switchIntoChemistryCoordSystem(\n    new Vec2(node.position.x, node.position.y),\n  );\n  return drawingEntitiesManager.addMonomer(\n    {\n      struct,\n      label: template.alias || template.id,\n      colorScheme: undefined,\n      favorite: false,\n      props: templateToMonomerProps(template),\n      attachmentPoints: KetSerializer.getTemplateAttachmentPoints(template),\n      seqId: node.seqid,\n    },\n    position,\n  );\n}\n\nexport function createMonomersForVariantMonomer(\n  variantMonomerTemplate: IKetAmbiguousMonomerTemplate,\n  parsedFileContent: IKetMacromoleculesContent,\n) {\n  const monomerTemplates = variantMonomerTemplate.options.map((option) => {\n    return parsedFileContent[setMonomerTemplatePrefix(option.templateId)];\n  }) as IKetMonomerTemplate[];\n  const monomers = monomerTemplates.map((monomerTemplate) => {\n    const monomerItem = {\n      label: monomerTemplate.alias,\n      struct: KetSerializer.convertMonomerTemplateToStruct(monomerTemplate),\n      props: templateToMonomerProps(monomerTemplate),\n      attachmentPoints: monomerTemplate.attachmentPoints,\n    };\n    const [MonomerConstructor] = monomerFactory(monomerItem);\n    KetSerializer.fillStructRgLabelsByMonomerTemplate(\n      monomerTemplate,\n      monomerItem,\n    );\n\n    return new MonomerConstructor(monomerItem, undefined, {\n      generateId: false,\n    });\n  });\n\n  return monomers;\n}\n\nexport function variantMonomerToDrawingEntity(\n  drawingEntitiesManager: DrawingEntitiesManager,\n  node: IKetAmbiguousMonomerNode,\n  template: IKetAmbiguousMonomerTemplate,\n  parsedFileContent: IKetMacromoleculesContent,\n) {\n  const position: Vec2 = switchIntoChemistryCoordSystem(\n    new Vec2(node.position.x, node.position.y),\n  );\n\n  const monomers = createMonomersForVariantMonomer(template, parsedFileContent);\n\n  return drawingEntitiesManager.addAmbiguousMonomer(\n    {\n      monomers,\n      id: template.id,\n      subtype: template.subtype,\n      label: node.alias,\n      options: template.options,\n      idtAliases: template.idtAliases,\n      isAmbiguous: true,\n    },\n    position,\n  );\n}\n","import { IKetConnection } from 'application/formatters/types/ket';\nimport { Command } from 'domain/entities/Command';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport { getAttachmentPointLabel } from 'domain/helpers/attachmentPointCalculations';\nimport { BaseMonomer } from 'domain/entities';\nimport { AttachmentPointName } from 'domain/types';\nimport { CoreEditor } from 'application/editor';\n\nexport function polymerBondToDrawingEntity(\n  connection: IKetConnection,\n  drawingEntitiesManager: DrawingEntitiesManager,\n  atomIdMap: Map<number, number>,\n  superatomMonomerToUsedAttachmentPoint: Map<BaseMonomer, Set<string>>,\n  firstMonomer: BaseMonomer,\n  secondMonomer: BaseMonomer,\n) {\n  const command = new Command();\n\n  const firstAttachmentPoint =\n    connection.endpoint1.attachmentPointId ||\n    getAttachmentPointLabel(\n      firstMonomer.monomerItem.struct.sgroups\n        .get(0)\n        ?.getAttachmentPoints()\n        .find(\n          (attachmentPoint) =>\n            attachmentPoint.atomId ===\n              atomIdMap.get(Number(connection.endpoint1.atomId)) &&\n            !superatomMonomerToUsedAttachmentPoint\n              .get(firstMonomer)\n              ?.has(\n                getAttachmentPointLabel(\n                  attachmentPoint.attachmentPointNumber as number,\n                ),\n              ),\n        )?.attachmentPointNumber as number,\n    );\n  const secondAttachmentPoint =\n    connection.endpoint2.attachmentPointId ||\n    getAttachmentPointLabel(\n      secondMonomer.monomerItem.struct.sgroups\n        .get(0)\n        ?.getAttachmentPoints()\n        .find(\n          (attachmentPoint) =>\n            attachmentPoint.atomId ===\n              atomIdMap.get(Number(connection.endpoint2.atomId)) &&\n            !superatomMonomerToUsedAttachmentPoint\n              .get(secondMonomer)\n              ?.has(\n                getAttachmentPointLabel(\n                  attachmentPoint.attachmentPointNumber as number,\n                ),\n              ),\n        )?.attachmentPointNumber as number,\n    );\n\n  if (\n    !firstMonomer.isAttachmentPointExistAndFree(\n      firstAttachmentPoint as AttachmentPointName,\n    ) ||\n    !secondMonomer.isAttachmentPointExistAndFree(\n      secondAttachmentPoint as AttachmentPointName,\n    )\n  ) {\n    const editor = CoreEditor.provideEditorInstance();\n    editor.events.error.dispatch(\n      'There is no free attachment point for bond creation.',\n    );\n    return new Command();\n  }\n\n  if (!superatomMonomerToUsedAttachmentPoint.get(firstMonomer)) {\n    superatomMonomerToUsedAttachmentPoint.set(firstMonomer, new Set());\n  }\n\n  if (!superatomMonomerToUsedAttachmentPoint.get(secondMonomer)) {\n    superatomMonomerToUsedAttachmentPoint.set(secondMonomer, new Set());\n  }\n\n  superatomMonomerToUsedAttachmentPoint\n    .get(firstMonomer)\n    ?.add(firstAttachmentPoint);\n  superatomMonomerToUsedAttachmentPoint\n    .get(secondMonomer)\n    ?.add(secondAttachmentPoint);\n\n  command.merge(\n    drawingEntitiesManager.createPolymerBond(\n      firstMonomer,\n      secondMonomer,\n      firstAttachmentPoint as AttachmentPointName,\n      secondAttachmentPoint as AttachmentPointName,\n    ),\n  );\n  return command;\n}\n","import { KetFileNode } from 'domain/serializers';\nimport { KetFileMultitailArrowNode, MultitailArrow } from 'domain/entities';\nimport { MULTITAIL_ARROW_SERIALIZE_KEY } from 'domain/constants';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const validateMultitailArrows = (json: any): boolean => {\n  const nodes: Array<KetFileNode<unknown | KetFileMultitailArrowNode>> =\n    json.root.nodes;\n  return nodes.every((node) => {\n    if (node.type === MULTITAIL_ARROW_SERIALIZE_KEY) {\n      const result = MultitailArrow.validateKetNode(\n        node.data as KetFileMultitailArrowNode,\n      );\n      if (result !== null) {\n        console.info(result);\n        return null;\n      }\n    }\n    return true;\n  });\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Ajv from 'ajv';\nimport schema from './schema.json';\nimport { validateMultitailArrows } from './multitailArrowsValidator';\n\nexport function validate(ket: any): boolean {\n  const ajv = new Ajv();\n  const validate = ajv.compile(schema);\n  const result = validate(ket);\n  return result ? validateMultitailArrows(ket) : result;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IMAGE_SERIALIZE_KEY } from 'domain/constants';\nimport { KetFileNode } from 'domain/serializers';\nimport { KetFileImageNode } from 'domain/entities';\n\nexport function imageToKet(imageNode: KetFileNode) {\n  return {\n    type: IMAGE_SERIALIZE_KEY,\n    format: (imageNode as KetFileImageNode).format,\n    boundingBox: (imageNode as KetFileImageNode).boundingBox,\n    data: imageNode.data,\n    selected: imageNode.selected,\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Struct } from 'domain/entities';\nimport { Image } from 'domain/entities/image';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function imageToStruct(ketItem: any, struct: Struct): Struct {\n  struct.images.add(Image.fromKetNode(ketItem));\n  return struct;\n}\n","import { KetFileNode } from 'domain/serializers';\nimport { MULTITAIL_ARROW_SERIALIZE_KEY } from 'domain/constants';\n\nexport function multitailArrowToKet(node: KetFileNode) {\n  return {\n    type: MULTITAIL_ARROW_SERIALIZE_KEY,\n    data: node.data,\n    selected: node.selected,\n  };\n}\n","import { Struct, MultitailArrow } from 'domain/entities';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function multitailArrowToStruct(ketItem: any, struct: Struct) {\n  struct.multitailArrows.add(MultitailArrow.fromKetNode(ketItem));\n  return struct;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  Bond,\n  SGroupAttachmentPoint,\n  Struct,\n  UnresolvedMonomer,\n  Vec2,\n} from 'domain/entities';\nimport { arrowToKet, plusToKet } from './toKet/rxnToKet';\nimport { Serializer } from '../serializers.types';\nimport { headerToKet } from './toKet/headerToKet';\nimport { moleculeToKet } from './toKet/moleculeToKet';\nimport { moleculeToStruct } from './fromKet/moleculeToStruct';\nimport { prepareStructForKet } from './toKet/prepare';\nimport { rgroupToKet } from './toKet/rgroupToKet';\nimport { rgroupToStruct } from './fromKet/rgroupToStruct';\nimport { rxnToStruct } from './fromKet/rxnToStruct';\nimport { simpleObjectToKet } from './toKet/simpleObjectToKet';\nimport { simpleObjectToStruct } from './fromKet/simpleObjectToStruct';\nimport { textToKet } from './toKet/textToKet';\nimport { textToStruct } from './fromKet/textToStruct';\nimport {\n  IKetAmbiguousMonomerTemplate,\n  IKetConnection,\n  IKetConnectionEndPoint,\n  IKetConnectionMoleculeEndPoint,\n  IKetConnectionMonomerEndPoint,\n  IKetMacromoleculesContent,\n  IKetMacromoleculesContentRootProperty,\n  IKetMonomerNode,\n  IKetMonomerTemplate,\n  KetConnectionType,\n  KetNodeType,\n  KetTemplateType,\n} from 'application/formatters/types/ket';\nimport { Command } from 'domain/entities/Command';\nimport { CoreEditor, EditorSelection } from 'application/editor/internal';\nimport {\n  createMonomersForVariantMonomer,\n  monomerToDrawingEntity,\n  templateToMonomerProps,\n  variantMonomerToDrawingEntity,\n} from 'domain/serializers/ket/fromKet/monomerToDrawingEntity';\nimport assert from 'assert';\nimport { polymerBondToDrawingEntity } from 'domain/serializers/ket/fromKet/polymerBondToDrawingEntity';\nimport { getMonomerUniqueKey } from 'domain/helpers/monomers';\nimport { monomerFactory } from 'application/editor/operations/monomer/monomerFactory';\nimport { KetcherLogger } from 'utilities';\nimport { Chem } from 'domain/entities/Chem';\nimport { DrawingEntitiesManager } from 'domain/entities/DrawingEntitiesManager';\nimport {\n  getKetRef,\n  populateStructWithSelection,\n  setAmbiguousMonomerTemplatePrefix,\n  setMonomerPrefix,\n  setMonomerTemplatePrefix,\n  switchIntoChemistryCoordSystem,\n} from 'domain/serializers/ket/helpers';\nimport { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport { validate } from 'domain/serializers/ket/validate';\nimport { MacromoleculesConverter } from 'application/editor/MacromoleculesConverter';\nimport { getAttachmentPointLabelWithBinaryShift } from 'domain/helpers/attachmentPointCalculations';\nimport { isNumber } from 'lodash';\nimport {\n  AmbiguousMonomerType,\n  AttachmentPointName,\n  MonomerItemType,\n} from 'domain/types';\nimport { PolymerBond } from 'domain/entities/PolymerBond';\nimport { imageToKet } from 'domain/serializers/ket/toKet/imageToKet';\nimport { imageToStruct } from 'domain/serializers/ket/fromKet/imageToStruct';\nimport {\n  IMAGE_SERIALIZE_KEY,\n  MULTITAIL_ARROW_SERIALIZE_KEY,\n} from 'domain/constants';\nimport { multitailArrowToKet } from 'domain/serializers/ket/toKet/multitailArrowToKet';\nimport { multitailArrowToStruct } from 'domain/serializers/ket/fromKet/multitailArrowToStruct';\nimport { AmbiguousMonomer } from 'domain/entities/AmbiguousMonomer';\nimport { isMonomerSgroupWithAttachmentPoints } from '../../../utilities/monomers';\nimport { HydrogenBond } from 'domain/entities/HydrogenBond';\nimport { MACROMOLECULES_BOND_TYPES } from 'application/editor/tools/Bond';\n\nfunction parseNode(node: any, struct: any) {\n  const type = node.type;\n  switch (type) {\n    case 'arrow': {\n      rxnToStruct(node, struct);\n      break;\n    }\n    case 'plus': {\n      rxnToStruct(node, struct);\n      break;\n    }\n    case 'simpleObject': {\n      simpleObjectToStruct(node, struct);\n      break;\n    }\n    case 'molecule': {\n      const currentStruct = moleculeToStruct(node);\n      if (node.stereoFlagPosition) {\n        const fragment = currentStruct.frags.get(0)!;\n        fragment.stereoFlagPosition = new Vec2(node.stereoFlagPosition);\n      }\n\n      currentStruct.mergeInto(struct);\n      break;\n    }\n    case 'rgroup': {\n      rgroupToStruct(node).mergeInto(struct);\n      break;\n    }\n    case 'text': {\n      textToStruct(node, struct);\n      break;\n    }\n    case MULTITAIL_ARROW_SERIALIZE_KEY: {\n      multitailArrowToStruct(node, struct);\n      break;\n    }\n    case IMAGE_SERIALIZE_KEY: {\n      imageToStruct(node, struct);\n      break;\n    }\n    default:\n      break;\n  }\n}\nexport class KetSerializer implements Serializer<Struct> {\n  deserializeMicromolecules(content: string): Struct {\n    const ket = JSON.parse(content);\n    if (!validate(ket)) {\n      throw new Error('Cannot deserialize input JSON.');\n    }\n\n    return KetSerializer.fillStruct(ket);\n  }\n\n  private static fillStruct(ket) {\n    const resultingStruct = new Struct();\n    const nodes = ket.root.nodes;\n\n    Object.keys(nodes).forEach((i) => {\n      if (nodes[i].type) parseNode(nodes[i], resultingStruct);\n      else if (nodes[i].$ref) parseNode(ket[nodes[i].$ref], resultingStruct);\n    });\n    resultingStruct.name = ket.header ? ket.header.moleculeName : null;\n\n    return resultingStruct;\n  }\n\n  serializeMicromolecules(struct: Struct, monomer?: BaseMonomer): string {\n    const result: any = {\n      root: {\n        nodes: [],\n      },\n    };\n    const header = headerToKet(struct);\n    if (header) result.header = header;\n\n    const ketNodes = prepareStructForKet(struct);\n\n    let moleculeId = 0;\n    ketNodes.forEach((item) => {\n      switch (item.type) {\n        case 'molecule': {\n          result.root.nodes.push({ $ref: `mol${moleculeId}` });\n          result[`mol${moleculeId++}`] = moleculeToKet(item.fragment!, monomer);\n          break;\n        }\n        case 'rgroup': {\n          result.root.nodes.push({ $ref: `rg${item.data!.rgnumber}` });\n          result[`rg${item.data!.rgnumber}`] = rgroupToKet(\n            item.fragment!,\n            item.data,\n          );\n          break;\n        }\n        case 'plus': {\n          result.root.nodes.push(plusToKet(item));\n          break;\n        }\n        case 'arrow': {\n          result.root.nodes.push(arrowToKet(item));\n          break;\n        }\n        case 'simpleObject': {\n          result.root.nodes.push(simpleObjectToKet(item));\n          break;\n        }\n        case 'text': {\n          result.root.nodes.push(textToKet(item));\n          break;\n        }\n        case IMAGE_SERIALIZE_KEY: {\n          result.root.nodes.push(imageToKet(item));\n          break;\n        }\n        case MULTITAIL_ARROW_SERIALIZE_KEY:\n          result.root.nodes.push(multitailArrowToKet(item));\n          break;\n        default:\n          break;\n      }\n    });\n\n    return JSON.stringify(result, null, 4);\n  }\n\n  private validateMonomerNodeTemplate(\n    node: IKetMonomerNode,\n    parsedFileContent: IKetMacromoleculesContent,\n    editor: CoreEditor,\n  ) {\n    const template =\n      parsedFileContent[setMonomerTemplatePrefix(node.templateId)];\n    if (!template) {\n      editor.events.error.dispatch('Error during file parsing');\n      return true;\n    }\n\n    return false;\n  }\n\n  private validateConnectionTypeAndEndpoints(\n    connection: IKetConnection,\n    editor: CoreEditor,\n  ) {\n    if (\n      connection.connectionType !== KetConnectionType.SINGLE &&\n      connection.connectionType !== KetConnectionType.HYDROGEN\n    ) {\n      editor.events.error.dispatch('Error during file parsing');\n      return true;\n    }\n    return false;\n  }\n\n  parseAndValidateMacromolecules(fileContent: string) {\n    const editor = CoreEditor.provideEditorInstance();\n    let parsedFileContent: IKetMacromoleculesContent;\n    try {\n      parsedFileContent = JSON.parse(fileContent);\n    } catch (e) {\n      KetcherLogger.error(\n        'ketSerializer.ts::KetSerializer::parseAndValidateMacromolecules',\n        e,\n      );\n      return { error: true };\n    }\n    let error = false;\n    parsedFileContent.root.nodes.forEach((node) => {\n      const nodeDefinition = parsedFileContent[node.$ref];\n\n      if (nodeDefinition?.type === 'monomer') {\n        error = this.validateMonomerNodeTemplate(\n          nodeDefinition,\n          parsedFileContent,\n          editor,\n        );\n      }\n    });\n    if (error) {\n      return { error: true };\n    }\n    parsedFileContent.root.connections?.forEach(\n      (connection: IKetConnection) => {\n        this.validateConnectionTypeAndEndpoints(connection, editor);\n      },\n    );\n    return {\n      error,\n      parsedFileContent,\n    };\n  }\n\n  deserializeToStruct(fileContent: string) {\n    const struct = new Struct();\n    const deserializedContent = this.deserializeToDrawingEntities(fileContent);\n\n    assert(deserializedContent);\n\n    MacromoleculesConverter.convertDrawingEntitiesToStruct(\n      deserializedContent?.drawingEntitiesManager,\n      struct,\n    );\n    return struct;\n  }\n\n  private filterMacromoleculesContent(\n    parsedFileContent: IKetMacromoleculesContent,\n  ) {\n    const fileContentForMicromolecules = {\n      ...parsedFileContent,\n      root: {\n        nodes: parsedFileContent.root.nodes.filter((node) => {\n          const nodeDefinition = parsedFileContent[node.$ref];\n\n          return (\n            nodeDefinition?.type !== KetNodeType.MONOMER &&\n            nodeDefinition?.type !== KetNodeType.AMBIGUOUS_MONOMER\n          );\n        }),\n      },\n    };\n    parsedFileContent.root.nodes.forEach((node) => {\n      const nodeDefinition = parsedFileContent[node.$ref];\n      if (\n        nodeDefinition?.type === KetNodeType.MONOMER ||\n        nodeDefinition?.type === KetNodeType.AMBIGUOUS_MONOMER\n      ) {\n        fileContentForMicromolecules[node.$ref] = undefined;\n      }\n    });\n\n    parsedFileContent.root.templates?.forEach((template) => {\n      fileContentForMicromolecules[template.$ref] = undefined;\n    });\n\n    return fileContentForMicromolecules;\n  }\n\n  public static getTemplateAttachmentPoints(template: IKetMonomerTemplate) {\n    return template.unresolved\n      ? template.attachmentPoints?.map((_, index) => {\n          return {\n            attachmentAtom: index,\n            leavingGroup: {\n              atoms: [],\n            },\n          };\n        })\n      : template.attachmentPoints;\n  }\n\n  public static convertMonomerTemplateToStruct(template: IKetMonomerTemplate) {\n    const attachmentPoints = template.attachmentPoints || [];\n\n    return KetSerializer.fillStruct({\n      root: {\n        nodes: [{ $ref: 'mol0' }],\n      },\n      mol0: {\n        ...template,\n        type: 'molecule',\n        atoms: template.unresolved\n          ? attachmentPoints?.map((_, index) => {\n              return {\n                label: 'C',\n                location: [index, index, index],\n              };\n            })\n          : template.atoms,\n        bonds: template.unresolved\n          ? attachmentPoints?.map((_, index) => {\n              if (index === attachmentPoints.length - 1) {\n                return {\n                  type: 1,\n                  atoms: [0, attachmentPoints.length - 1],\n                };\n              }\n\n              return {\n                type: 1,\n                atoms: [index, index + 1],\n              };\n            })\n          : template.bonds,\n        attachmentPoints: KetSerializer.getTemplateAttachmentPoints(template),\n      },\n      header: {\n        moleculeName: template.fullName,\n      },\n    });\n  }\n\n  public convertMonomerTemplateToLibraryItem(\n    template: IKetMonomerTemplate,\n  ): MonomerItemType {\n    const monomerLibraryItem = {\n      label: template.alias || template.id,\n      struct: KetSerializer.convertMonomerTemplateToStruct(template),\n      props: templateToMonomerProps(template),\n      attachmentPoints: KetSerializer.getTemplateAttachmentPoints(template),\n    };\n    KetSerializer.fillStructRgLabelsByMonomerTemplate(\n      template,\n      monomerLibraryItem,\n    );\n\n    return monomerLibraryItem;\n  }\n\n  public static fillStructRgLabelsByMonomerTemplate(\n    template: IKetMonomerTemplate,\n    monomerItem: MonomerItemType,\n  ) {\n    if (monomerItem.props.unresolved) {\n      return;\n    }\n\n    const { attachmentPointsList } =\n      BaseMonomer.getAttachmentPointDictFromMonomerDefinition(\n        template.attachmentPoints || [],\n      );\n\n    template.attachmentPoints?.forEach(\n      (attachmentPoint, attachmentPointIndex) => {\n        const firstAtomInLeavingGroup = attachmentPoint.leavingGroup?.atoms[0];\n        const leavingGroupAtom = monomerItem.struct.atoms.get(\n          isNumber(firstAtomInLeavingGroup)\n            ? firstAtomInLeavingGroup\n            : attachmentPoint.attachmentAtom,\n        );\n        assert(leavingGroupAtom);\n        leavingGroupAtom.rglabel = (\n          0 |\n          (1 <<\n            (Number(\n              (attachmentPoint.label\n                ? attachmentPoint.label\n                : attachmentPointsList[attachmentPointIndex]\n              ).replace('R', ''),\n            ) -\n              1))\n        ).toString();\n        assert(monomerItem.props.MonomerCaps);\n        monomerItem.props.MonomerCaps[\n          getAttachmentPointLabelWithBinaryShift(\n            Number(leavingGroupAtom.rglabel),\n          )\n        ] = leavingGroupAtom.label;\n        leavingGroupAtom.label = 'R#';\n      },\n    );\n  }\n\n  deserializeToDrawingEntities(fileContent: string) {\n    const { error: hasValidationErrors, parsedFileContent } =\n      this.parseAndValidateMacromolecules(fileContent);\n    if (hasValidationErrors || !parsedFileContent) return;\n    const command = new Command();\n    const drawingEntitiesManager = new DrawingEntitiesManager();\n    const monomerIdsMap = {};\n    parsedFileContent.root.nodes.forEach((node) => {\n      const nodeDefinition = parsedFileContent[node.$ref];\n\n      switch (nodeDefinition?.type) {\n        case KetNodeType.MONOMER: {\n          const template = parsedFileContent[\n            setMonomerTemplatePrefix(nodeDefinition.templateId)\n          ] as IKetMonomerTemplate;\n          assert(template);\n          const struct = KetSerializer.convertMonomerTemplateToStruct(template);\n          const monomerAdditionCommand = monomerToDrawingEntity(\n            nodeDefinition,\n            template,\n            struct,\n            drawingEntitiesManager,\n          );\n          const monomer = monomerAdditionCommand.operations[0]\n            .monomer as BaseMonomer;\n          monomerIdsMap[node.$ref] = monomer?.id;\n\n          KetSerializer.fillStructRgLabelsByMonomerTemplate(\n            template,\n            monomer.monomerItem,\n          );\n\n          command.merge(monomerAdditionCommand);\n          break;\n        }\n        case KetNodeType.AMBIGUOUS_MONOMER: {\n          const template = parsedFileContent[\n            setAmbiguousMonomerTemplatePrefix(nodeDefinition.templateId)\n          ] as IKetAmbiguousMonomerTemplate;\n          assert(template);\n\n          const monomerAdditionCommand = variantMonomerToDrawingEntity(\n            drawingEntitiesManager,\n            nodeDefinition,\n            template,\n            parsedFileContent,\n          );\n          const monomer = monomerAdditionCommand.operations[0]\n            .monomer as BaseMonomer;\n\n          monomerIdsMap[node.$ref] = monomer?.id;\n\n          command.merge(monomerAdditionCommand);\n          break;\n        }\n        default:\n          break;\n      }\n    });\n    const fileContentForMicromolecules =\n      this.filterMacromoleculesContent(parsedFileContent);\n\n    const deserializedMicromolecules = this.deserializeMicromolecules(\n      JSON.stringify(fileContentForMicromolecules),\n    );\n\n    const structToDrawingEntitiesConversionResult =\n      MacromoleculesConverter.convertStructToDrawingEntities(\n        deserializedMicromolecules,\n        drawingEntitiesManager,\n      );\n    const localAtomIdToGlobalAtomId = new Map<number, number>();\n\n    command.merge(structToDrawingEntitiesConversionResult.modelChanges);\n\n    structToDrawingEntitiesConversionResult.fragmentIdToMonomer.forEach(\n      (monomer, fragmentId) => {\n        monomerIdsMap[`mol${fragmentId}`] = monomer.id;\n      },\n    );\n\n    structToDrawingEntitiesConversionResult.fragmentIdToAtomIdMap.forEach(\n      (_atomIdsMap) => {\n        _atomIdsMap.forEach((globalAtomId, localAtomId) => {\n          localAtomIdToGlobalAtomId.set(localAtomId, globalAtomId);\n        });\n      },\n    );\n\n    const superatomMonomerToUsedAttachmentPoint = new Map<\n      BaseMonomer,\n      Set<string>\n    >();\n\n    parsedFileContent.root.connections?.forEach((connection) => {\n      switch (connection.connectionType) {\n        case KetConnectionType.SINGLE: {\n          const firstMonomer = drawingEntitiesManager.monomers.get(\n            Number(\n              monomerIdsMap[\n                connection.endpoint1.monomerId ||\n                  connection.endpoint1.moleculeId\n              ],\n            ),\n          );\n          const secondMonomer = drawingEntitiesManager.monomers.get(\n            Number(\n              monomerIdsMap[\n                connection.endpoint2.monomerId ||\n                  connection.endpoint2.moleculeId\n              ],\n            ),\n          );\n\n          if (!firstMonomer || !secondMonomer) {\n            return;\n          }\n\n          if (\n            !isMonomerSgroupWithAttachmentPoints(firstMonomer) &&\n            !isMonomerSgroupWithAttachmentPoints(secondMonomer) &&\n            (firstMonomer.monomerItem.props.isMicromoleculeFragment ||\n              secondMonomer.monomerItem.props.isMicromoleculeFragment)\n          ) {\n            const atomId = Number(\n              connection.endpoint1.atomId || connection.endpoint2.atomId,\n            );\n\n            const atom = MacromoleculesConverter.findAtomByMicromoleculeAtomId(\n              drawingEntitiesManager,\n              atomId,\n              firstMonomer.monomerItem.props.isMicromoleculeFragment\n                ? firstMonomer\n                : secondMonomer,\n            );\n            const attachmentPointName =\n              connection.endpoint1.attachmentPointId ||\n              connection.endpoint2.attachmentPointId;\n\n            if (!atom || !attachmentPointName) {\n              return;\n            }\n\n            const bondAdditionCommand =\n              drawingEntitiesManager.addMonomerToAtomBond(\n                firstMonomer.monomerItem.props.isMicromoleculeFragment\n                  ? secondMonomer\n                  : firstMonomer,\n                atom,\n                attachmentPointName as AttachmentPointName,\n              );\n\n            command.merge(bondAdditionCommand);\n          } else {\n            const bondAdditionCommand = polymerBondToDrawingEntity(\n              connection,\n              drawingEntitiesManager,\n              localAtomIdToGlobalAtomId,\n              superatomMonomerToUsedAttachmentPoint,\n              firstMonomer,\n              secondMonomer,\n            );\n\n            command.merge(bondAdditionCommand);\n          }\n\n          break;\n        }\n        case KetConnectionType.HYDROGEN: {\n          const firstMonomer = drawingEntitiesManager.monomers.get(\n            Number(monomerIdsMap[connection.endpoint1.monomerId]),\n          );\n          const secondMonomer = drawingEntitiesManager.monomers.get(\n            Number(monomerIdsMap[connection.endpoint2.monomerId]),\n          );\n\n          if (!firstMonomer || !secondMonomer) {\n            return;\n          }\n\n          command.merge(\n            drawingEntitiesManager.createPolymerBond(\n              firstMonomer,\n              secondMonomer,\n              AttachmentPointName.HYDROGEN,\n              AttachmentPointName.HYDROGEN,\n              MACROMOLECULES_BOND_TYPES.HYDROGEN,\n            ),\n          );\n\n          break;\n        }\n        default:\n          break;\n      }\n    });\n\n    return { modelChanges: command, drawingEntitiesManager };\n  }\n\n  deserialize(fileContent: string) {\n    return this.deserializeToStruct(fileContent);\n  }\n\n  getConnectionMonomerEndpoint(\n    monomer: BaseMonomer,\n    polymerBond: PolymerBond,\n    monomerIdMap: Map<number, number>,\n  ): IKetConnectionMonomerEndPoint {\n    const monomerId = monomerIdMap.get(monomer.id);\n\n    return {\n      monomerId: setMonomerPrefix(isNumber(monomerId) ? monomerId : monomer.id),\n      attachmentPointId:\n        polymerBond instanceof HydrogenBond\n          ? undefined\n          : monomer.getAttachmentPointByBond(polymerBond),\n    };\n  }\n\n  getConnectionMoleculeEndpoint(\n    monomer: BaseMonomer,\n    polymerBond: PolymerBond,\n    monomerToAtomIdMap: Map<BaseMonomer, Map<number, number>>,\n    struct: Struct,\n  ): IKetConnectionMoleculeEndPoint {\n    const { attachmentAtomId, globalAttachmentAtomId } =\n      MacromoleculesConverter.findAttachmentPointAtom(\n        polymerBond,\n        monomer,\n        monomerToAtomIdMap,\n      );\n\n    return {\n      moleculeId: `mol${\n        struct.atoms.get(globalAttachmentAtomId as number)?.fragment\n      }`,\n      atomId: `${attachmentAtomId as number}`,\n    };\n  }\n\n  private serializeMonomerTemplate(\n    templateId: string,\n    monomer: BaseMonomer,\n    fileContent: IKetMacromoleculesContentRootProperty,\n  ) {\n    const [, , monomerClass] = monomerFactory(monomer.monomerItem);\n    const templateNameWithPrefix = setMonomerTemplatePrefix(templateId);\n\n    if (fileContent[templateNameWithPrefix]) {\n      return;\n    }\n\n    fileContent[templateNameWithPrefix] = {\n      ...JSON.parse(\n        this.serializeMicromolecules(monomer.monomerItem.struct, monomer),\n      ).mol0,\n      type: 'monomerTemplate',\n      class: monomer.monomerItem.props.MonomerClass || monomerClass,\n      classHELM: monomer.monomerItem.props.MonomerType,\n      id: templateId,\n      fullName: monomer.monomerItem.props.Name,\n      alias: monomer.monomerItem.label,\n      attachmentPoints: monomer.monomerItem.attachmentPoints,\n      idtAliases: monomer.monomerItem.props.idtAliases,\n      unresolved: monomer instanceof UnresolvedMonomer ? true : undefined,\n    };\n    // CHEMs do not have natural analog\n    if (monomer.monomerItem.props.MonomerType !== 'CHEM') {\n      fileContent[templateNameWithPrefix].naturalAnalogShort =\n        monomer.monomerItem.props.MonomerNaturalAnalogCode;\n    }\n\n    fileContent.root.templates.push(getKetRef(templateNameWithPrefix));\n  }\n\n  private serializeVariantMonomerTemplate(\n    templateId: string,\n    variantMonomer: AmbiguousMonomer,\n    fileContent: IKetMacromoleculesContentRootProperty,\n  ) {\n    const templateNameWithPrefix =\n      setAmbiguousMonomerTemplatePrefix(templateId);\n\n    if (fileContent[templateNameWithPrefix]) {\n      return;\n    }\n\n    fileContent[templateNameWithPrefix] = {\n      type: 'ambiguousMonomerTemplate',\n      id: templateId,\n      alias: variantMonomer.label,\n      idtAliases: variantMonomer.variantMonomerItem.idtAliases,\n      subtype: variantMonomer.variantMonomerItem.subtype,\n      options: variantMonomer.variantMonomerItem.options,\n    };\n\n    fileContent.root.templates.push(getKetRef(templateNameWithPrefix));\n\n    variantMonomer.monomers.forEach((monomer) => {\n      const monomerTemplateId =\n        monomer.monomerItem.props.id ||\n        getMonomerUniqueKey(monomer.monomerItem);\n\n      this.serializeMonomerTemplate(monomerTemplateId, monomer, fileContent);\n    });\n  }\n\n  serializeMacromolecules(\n    struct: Struct,\n    drawingEntitiesManager: DrawingEntitiesManager,\n  ) {\n    const fileContent: IKetMacromoleculesContentRootProperty = {\n      root: {\n        nodes: [],\n        connections: [],\n        templates: [],\n      },\n    };\n    const monomerToAtomIdMap = new Map<BaseMonomer, Map<number, number>>();\n    const monomerIdMap = new Map<number, number>();\n    let nextMonomerId = 0;\n\n    drawingEntitiesManager.monomers.forEach((monomer) => {\n      if (\n        monomer instanceof Chem &&\n        monomer.monomerItem.props.isMicromoleculeFragment\n      ) {\n        const atomIdMap = new Map<number, number>();\n        monomer.monomerItem.struct.mergeInto(\n          struct,\n          null,\n          null,\n          false,\n          false,\n          atomIdMap,\n        );\n        monomerToAtomIdMap.set(monomer, atomIdMap);\n      } else {\n        let templateId;\n        const monomerKey = setMonomerPrefix(nextMonomerId);\n        const position: Vec2 = switchIntoChemistryCoordSystem(\n          new Vec2(monomer.position.x, monomer.position.y),\n        );\n\n        monomerIdMap.set(monomer.id, nextMonomerId);\n\n        if (monomer instanceof AmbiguousMonomer) {\n          templateId =\n            monomer.variantMonomerItem.subtype +\n            '_' +\n            monomer.variantMonomerItem.options.reduce(\n              (templateId, option) =>\n                templateId +\n                '_' +\n                option.templateId +\n                '_' +\n                (option.probability || option.ratio || ''),\n              '',\n            );\n        } else {\n          templateId =\n            monomer.monomerItem.props.id ||\n            getMonomerUniqueKey(monomer.monomerItem);\n        }\n\n        fileContent[monomerKey] = {\n          type:\n            monomer instanceof AmbiguousMonomer\n              ? KetNodeType.AMBIGUOUS_MONOMER\n              : KetNodeType.MONOMER,\n          id: nextMonomerId.toString(),\n          position: {\n            x: position.x,\n            y: position.y,\n          },\n          alias: monomer.label,\n          templateId,\n          seqid: monomer.monomerItem.seqId,\n        };\n        fileContent.root.nodes.push(getKetRef(monomerKey));\n\n        nextMonomerId++;\n\n        if (monomer instanceof AmbiguousMonomer) {\n          this.serializeVariantMonomerTemplate(\n            templateId,\n            monomer,\n            fileContent,\n          );\n        } else {\n          this.serializeMonomerTemplate(templateId, monomer, fileContent);\n        }\n      }\n    });\n\n    drawingEntitiesManager.polymerBonds.forEach((polymerBond) => {\n      assert(polymerBond.secondMonomer);\n      fileContent.root.connections.push({\n        connectionType:\n          polymerBond instanceof HydrogenBond\n            ? KetConnectionType.HYDROGEN\n            : KetConnectionType.SINGLE,\n        endpoint1: polymerBond.firstMonomer.monomerItem.props\n          .isMicromoleculeFragment\n          ? (this.getConnectionMoleculeEndpoint(\n              polymerBond.firstMonomer,\n              polymerBond,\n              monomerToAtomIdMap,\n              struct,\n            ) as IKetConnectionEndPoint)\n          : (this.getConnectionMonomerEndpoint(\n              polymerBond.firstMonomer,\n              polymerBond,\n              monomerIdMap,\n            ) as IKetConnectionEndPoint),\n        endpoint2: polymerBond.secondMonomer.monomerItem.props\n          .isMicromoleculeFragment\n          ? (this.getConnectionMoleculeEndpoint(\n              polymerBond.secondMonomer,\n              polymerBond,\n              monomerToAtomIdMap,\n              struct,\n            ) as IKetConnectionEndPoint)\n          : (this.getConnectionMonomerEndpoint(\n              polymerBond.secondMonomer,\n              polymerBond,\n              monomerIdMap,\n            ) as IKetConnectionEndPoint),\n      });\n    });\n\n    drawingEntitiesManager.monomerToAtomBonds.forEach((monomerToAtomBond) => {\n      const monomer = monomerToAtomBond.monomer;\n      const atomIdMap = monomerToAtomIdMap.get(monomerToAtomBond.atom.monomer);\n      const globalAtomId = atomIdMap?.get(\n        monomerToAtomBond.atom.atomIdInMicroMode,\n      );\n      const monomerId = monomerIdMap.get(monomer.id);\n\n      if (!isNumber(globalAtomId) || !isNumber(monomerId)) {\n        return;\n      }\n\n      fileContent.root.connections.push({\n        connectionType: KetConnectionType.SINGLE,\n        endpoint1: {\n          monomerId: setMonomerPrefix(monomerId),\n          attachmentPointId:\n            monomerToAtomBond.monomer.getAttachmentPointByBond(\n              monomerToAtomBond,\n            ),\n        } as IKetConnectionEndPoint,\n        endpoint2: {\n          moleculeId: `mol${struct.atoms.get(globalAtomId)?.fragment}`,\n          atomId: String(monomerToAtomBond.atom.atomIdInMicroMode),\n        } as IKetConnectionEndPoint,\n      });\n    });\n\n    drawingEntitiesManager.micromoleculesHiddenEntities.mergeInto(struct);\n\n    return {\n      serializedMacromolecules: fileContent,\n      micromoleculesStruct: struct,\n    };\n  }\n\n  public static removeLeavingGroupsFromConnectedAtoms(_struct: Struct) {\n    const struct = _struct.clone();\n\n    struct.atoms.forEach((_atom, atomId) => {\n      if (Atom.isHiddenLeavingGroupAtom(struct, atomId)) {\n        struct.atoms.delete(atomId);\n      }\n    });\n\n    struct.bonds.forEach((bond, bondId) => {\n      if (Bond.isBondToHiddenLeavingGroup(struct, bond)) {\n        struct.bonds.delete(bondId);\n      }\n    });\n\n    struct.sgroups.forEach((sgroup) => {\n      const attachmentPoints = sgroup.getAttachmentPoints();\n      const attachmentPointsToReplace: Map<\n        SGroupAttachmentPoint,\n        SGroupAttachmentPoint\n      > = new Map();\n      attachmentPoints.forEach((attachmentPoint) => {\n        if (\n          isNumber(attachmentPoint.leaveAtomId) &&\n          Atom.isHiddenLeavingGroupAtom(struct, attachmentPoint.leaveAtomId)\n        ) {\n          const attachmentPointClone = new SGroupAttachmentPoint(\n            attachmentPoint.atomId,\n            undefined,\n            attachmentPoint.attachmentId,\n            attachmentPoint.attachmentPointNumber,\n          );\n          attachmentPointsToReplace.set(attachmentPoint, attachmentPointClone);\n          sgroup.atoms.splice(\n            sgroup.atoms.indexOf(attachmentPoint.leaveAtomId),\n            1,\n          );\n        }\n      });\n      attachmentPointsToReplace.forEach(\n        (attachmentPointToAdd, attachmentPointToDelete) => {\n          sgroup.removeAttachmentPoint(attachmentPointToDelete);\n          sgroup.addAttachmentPoint(attachmentPointToAdd);\n        },\n      );\n    });\n\n    return struct;\n  }\n\n  serialize(\n    _struct: Struct,\n    drawingEntitiesManager = new DrawingEntitiesManager(),\n    selection?: EditorSelection,\n  ) {\n    const struct = KetSerializer.removeLeavingGroupsFromConnectedAtoms(_struct);\n    struct.enableInitiallySelected();\n    const populatedStruct = populateStructWithSelection(struct, selection);\n    MacromoleculesConverter.convertStructToDrawingEntities(\n      populatedStruct,\n      drawingEntitiesManager,\n    );\n\n    const { serializedMacromolecules, micromoleculesStruct } =\n      this.serializeMacromolecules(new Struct(), drawingEntitiesManager);\n\n    if (selection === undefined) {\n      // if selection is not provided, then reset all initially selected flags\n      // before serialization of micromolecules.\n      // It is case of saving molecules in macromolecules mode, so we don't send to indigo/save selection.\n      micromoleculesStruct.enableInitiallySelected();\n    }\n\n    const serializedMicromoleculesStruct = JSON.parse(\n      this.serializeMicromolecules(micromoleculesStruct),\n    );\n\n    micromoleculesStruct.disableInitiallySelected();\n    const fileContent = {\n      ...serializedMicromoleculesStruct,\n      ...serializedMacromolecules,\n    };\n    fileContent.root.nodes = [\n      ...serializedMacromolecules.root.nodes,\n      ...serializedMicromoleculesStruct.root.nodes,\n    ];\n\n    return JSON.stringify(fileContent, null, 4) as unknown as string;\n  }\n\n  convertMonomersLibrary(monomersLibrary: IKetMacromoleculesContent) {\n    const library: MonomerItemType[] & AmbiguousMonomerType[] = [];\n\n    monomersLibrary.root.templates.forEach((templateRef) => {\n      const template = monomersLibrary[templateRef.$ref];\n\n      switch (template.type) {\n        case KetTemplateType.MONOMER_TEMPLATE: {\n          library.push(\n            this.convertMonomerTemplateToLibraryItem(\n              template as IKetMonomerTemplate,\n            ),\n          );\n\n          break;\n        }\n        case KetTemplateType.AMBIGUOUS_MONOMER_TEMPLATE: {\n          const variantMonomerTemplate =\n            template as IKetAmbiguousMonomerTemplate;\n          const variantMonomerLibraryItem: AmbiguousMonomerType = {\n            id: variantMonomerTemplate.id,\n            label: variantMonomerTemplate.alias || '%',\n            idtAliases: variantMonomerTemplate.idtAliases,\n            isAmbiguous: true,\n            monomers: createMonomersForVariantMonomer(\n              variantMonomerTemplate,\n              monomersLibrary,\n            ),\n            options: variantMonomerTemplate.options,\n            subtype: variantMonomerTemplate.subtype,\n          };\n\n          library.push(variantMonomerLibraryItem);\n\n          break;\n        }\n      }\n    });\n\n    return library;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport {\n  Bond,\n  RxnArrow,\n  RxnPlus,\n  Struct,\n  Vec2,\n  RGroup,\n  Fragment,\n} from 'domain/entities';\n\nfunction paddedNum(number, width, precision) {\n  number = parseFloat(number);\n\n  const numStr = number.toFixed(precision || 0).replace(',', '.'); // Really need to replace?\n  if (numStr.length > width) throw new Error('number does not fit');\n\n  return numStr.padStart(width);\n}\n\n/**\n * @param str {string}\n * @returns {number}\n */\nfunction parseDecimalInt(str) {\n  /* reader */\n  const val = parseInt(str, 10);\n\n  return isNaN(val) ? 0 : val; // eslint-disable-line\n}\n\nfunction partitionLine(\n  /* string */ str,\n  /* array of int */ parts,\n  /* bool */ withspace,\n) {\n  /* reader */\n  const res = [];\n  for (let i = 0, shift = 0; i < parts.length; ++i) {\n    res.push(str.slice(shift, shift + parts[i]));\n    if (withspace) shift++;\n    shift += parts[i];\n  }\n  return res;\n}\n\nfunction partitionLineFixed(\n  /* string */ str,\n  /* int */ itemLength,\n  /* bool */ withspace,\n) {\n  /* reader */\n  const res = [];\n  for (let shift = 0; shift < str.length; shift += itemLength) {\n    res.push(str.slice(shift, shift + itemLength));\n    if (withspace) shift++;\n  }\n  return res;\n}\n\nconst fmtInfo = {\n  bondTypeMap: {\n    1: Bond.PATTERN.TYPE.SINGLE,\n    2: Bond.PATTERN.TYPE.DOUBLE,\n    3: Bond.PATTERN.TYPE.TRIPLE,\n    4: Bond.PATTERN.TYPE.AROMATIC,\n    5: Bond.PATTERN.TYPE.SINGLE_OR_DOUBLE,\n    6: Bond.PATTERN.TYPE.SINGLE_OR_AROMATIC,\n    7: Bond.PATTERN.TYPE.DOUBLE_OR_AROMATIC,\n    8: Bond.PATTERN.TYPE.ANY,\n    9: Bond.PATTERN.TYPE.DATIVE,\n    10: Bond.PATTERN.TYPE.HYDROGEN,\n  },\n  bondStereoMap: {\n    0: Bond.PATTERN.STEREO.NONE,\n    1: Bond.PATTERN.STEREO.UP,\n    4: Bond.PATTERN.STEREO.EITHER,\n    6: Bond.PATTERN.STEREO.DOWN,\n    3: Bond.PATTERN.STEREO.CIS_TRANS,\n  },\n  v30bondStereoMap: {\n    0: Bond.PATTERN.STEREO.NONE,\n    1: Bond.PATTERN.STEREO.UP,\n    2: Bond.PATTERN.STEREO.EITHER,\n    3: Bond.PATTERN.STEREO.DOWN,\n  },\n  bondTopologyMap: {\n    0: Bond.PATTERN.TOPOLOGY.EITHER,\n    1: Bond.PATTERN.TOPOLOGY.RING,\n    2: Bond.PATTERN.TOPOLOGY.CHAIN,\n  },\n  countsLinePartition: [3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 6],\n  atomLinePartition: [10, 10, 10, 1, 3, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3],\n  bondLinePartition: [3, 3, 3, 3, 3, 3, 3],\n  atomListHeaderPartition: [3, 1, 1, 4, 1, 1],\n  atomListHeaderLength: 11, // = atomListHeaderPartition.reduce(function(a,b) { return a + b; }, 0)\n  atomListHeaderItemLength: 4,\n  chargeMap: [null, +3, +2, +1, null, -1, -2, -3],\n  valenceMap: [undefined, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 0],\n  implicitHydrogenMap: [undefined, 0, 1, 2, 3, 4],\n  v30atomPropMap: {\n    CHG: 'charge',\n    RAD: 'radical',\n    MASS: 'isotope',\n    VAL: 'explicitValence',\n    HCOUNT: 'hCount',\n    INVRET: 'invRet',\n    SUBST: 'substitutionCount',\n    UNSAT: 'unsaturatedAtom',\n    RBCNT: 'ringBondCount',\n  },\n  rxnItemsPartition: [3, 3, 3],\n};\n\nconst FRAGMENT = {\n  NONE: 0,\n  REACTANT: 1,\n  PRODUCT: 2,\n  AGENT: 3,\n};\n\nconst SHOULD_RESCALE_MOLECULES = true;\n\nfunction rxnMerge(\n  mols,\n  nReactants,\n  nProducts,\n  nAgents,\n  shouldReactionRelayout,\n) /* Struct */ {\n  // eslint-disable-line max-statements\n  /* reader */\n  const ret = new Struct();\n  const bbReact = [];\n  const bbAgent = [];\n  const bbProd = [];\n  const molReact = [];\n  const molAgent = [];\n  const molProd = [];\n  let j;\n  const bondLengthData = { cnt: 0, totalLength: 0 };\n  for (j = 0; j < mols.length; ++j) {\n    var mol = mols[j];\n    const bondLengthDataMol = mol.getBondLengthData();\n    bondLengthData.cnt += bondLengthDataMol.cnt;\n    bondLengthData.totalLength += bondLengthDataMol.totalLength;\n  }\n  if (SHOULD_RESCALE_MOLECULES) {\n    const avgBondLength =\n      1 /\n      (bondLengthData.cnt === 0\n        ? 1\n        : bondLengthData.totalLength / bondLengthData.cnt);\n    for (j = 0; j < mols.length; ++j) {\n      mol = mols[j];\n      mol.scale(avgBondLength);\n    }\n  }\n\n  for (j = 0; j < mols.length; ++j) {\n    mol = mols[j];\n    const bb = mol.getCoordBoundingBoxObj();\n    if (!bb) continue; // eslint-disable-line no-continue\n\n    var fragmentType =\n      j < nReactants\n        ? FRAGMENT.REACTANT // eslint-disable-line no-nested-ternary\n        : j < nReactants + nProducts\n        ? FRAGMENT.PRODUCT\n        : FRAGMENT.AGENT;\n    if (fragmentType === FRAGMENT.REACTANT) {\n      bbReact.push(bb);\n      molReact.push(mol);\n    } else if (fragmentType === FRAGMENT.AGENT) {\n      bbAgent.push(bb);\n      molAgent.push(mol);\n    } else if (fragmentType === FRAGMENT.PRODUCT) {\n      bbProd.push(bb);\n      molProd.push(mol);\n    }\n\n    mol.atoms.forEach((atom) => {\n      atom.rxnFragmentType = fragmentType;\n    });\n  }\n\n  function shiftMol(ret, mol, bb, xorig, over) {\n    // eslint-disable-line max-params\n    const d = new Vec2(\n      xorig - bb.min.x,\n      over ? 1 - bb.min.y : -(bb.min.y + bb.max.y) / 2,\n    );\n    mol.atoms.forEach((atom) => {\n      atom.pp.add_(d); // eslint-disable-line no-underscore-dangle\n    });\n\n    mol.sgroups.forEach((item) => {\n      if (item.pp) item.pp.add_(d); // eslint-disable-line no-underscore-dangle\n    });\n    bb.min.add_(d); // eslint-disable-line no-underscore-dangle\n    bb.max.add_(d); // eslint-disable-line no-underscore-dangle\n    mol.mergeInto(ret);\n    return bb.max.x - bb.min.x;\n  }\n\n  if (shouldReactionRelayout) {\n    // reaction fragment layout\n    let xorig = 0;\n    for (j = 0; j < molReact.length; ++j) {\n      xorig += shiftMol(ret, molReact[j], bbReact[j], xorig, false) + 2.0;\n    }\n    xorig += 2.0;\n    for (j = 0; j < molAgent.length; ++j) {\n      xorig += shiftMol(ret, molAgent[j], bbAgent[j], xorig, true) + 2.0;\n    }\n    xorig += 2.0;\n\n    for (j = 0; j < molProd.length; ++j) {\n      xorig += shiftMol(ret, molProd[j], bbProd[j], xorig, false) + 2.0;\n    }\n  } else {\n    for (j = 0; j < molReact.length; ++j) molReact[j].mergeInto(ret);\n    for (j = 0; j < molAgent.length; ++j) molAgent[j].mergeInto(ret);\n    for (j = 0; j < molProd.length; ++j) molProd[j].mergeInto(ret);\n  }\n\n  let bb1;\n  let bb2;\n  let x;\n  let y;\n  let bbReactAll = null;\n  let bbProdAll = null;\n  for (j = 0; j < bbReact.length - 1; ++j) {\n    bb1 = bbReact[j];\n    bb2 = bbReact[j + 1];\n\n    x = (bb1.max.x + bb2.min.x) / 2;\n    y = (bb1.max.y + bb1.min.y + bb2.max.y + bb2.min.y) / 4;\n\n    ret.rxnPluses.add(new RxnPlus({ pp: new Vec2(x, y) }));\n  }\n  for (j = 0; j < bbReact.length; ++j) {\n    if (j === 0) {\n      bbReactAll = {};\n      bbReactAll.max = new Vec2(bbReact[j].max);\n      bbReactAll.min = new Vec2(bbReact[j].min);\n    } else {\n      bbReactAll.max = Vec2.max(bbReactAll.max, bbReact[j].max);\n      bbReactAll.min = Vec2.min(bbReactAll.min, bbReact[j].min);\n    }\n  }\n  for (j = 0; j < bbProd.length - 1; ++j) {\n    bb1 = bbProd[j];\n    bb2 = bbProd[j + 1];\n\n    x = (bb1.max.x + bb2.min.x) / 2;\n    y = (bb1.max.y + bb1.min.y + bb2.max.y + bb2.min.y) / 4;\n\n    ret.rxnPluses.add(new RxnPlus({ pp: new Vec2(x, y) }));\n  }\n  for (j = 0; j < bbProd.length; ++j) {\n    if (j === 0) {\n      bbProdAll = {};\n      bbProdAll.max = new Vec2(bbProd[j].max);\n      bbProdAll.min = new Vec2(bbProd[j].min);\n    } else {\n      bbProdAll.max = Vec2.max(bbProdAll.max, bbProd[j].max);\n      bbProdAll.min = Vec2.min(bbProdAll.min, bbProd[j].min);\n    }\n  }\n  bb1 = bbReactAll;\n  bb2 = bbProdAll;\n  const defaultArrowLength = 2;\n\n  if (!bb1 && !bb2) {\n    ret.rxnArrows.add(\n      new RxnArrow({\n        mode: 'open-angle',\n        pos: [new Vec2(0, 0), new Vec2(defaultArrowLength, 0)],\n      }),\n    );\n  } else {\n    let v1 = bb1 ? new Vec2(bb1.max.x, (bb1.max.y + bb1.min.y) / 2) : null;\n    let v2 = bb2 ? new Vec2(bb2.min.x, (bb2.max.y + bb2.min.y) / 2) : null;\n    const defaultOffset = 3;\n    if (!v1) v1 = new Vec2(v2.x - defaultOffset, v2.y);\n    if (!v2) v2 = new Vec2(v1.x + defaultOffset, v1.y);\n    const arrowCenter = Vec2.lc2(v1, 0.5, v2, 0.5);\n    const arrowStart = new Vec2(\n      arrowCenter.x - 0.5 * defaultArrowLength,\n      arrowCenter.y,\n      arrowCenter.z,\n    );\n    const arrowEnd = new Vec2(\n      arrowCenter.x + 0.5 * defaultArrowLength,\n      arrowCenter.y,\n      arrowCenter.z,\n    );\n    ret.rxnArrows.add(\n      new RxnArrow({\n        mode: 'open-angle',\n        pos: [arrowStart, arrowEnd],\n      }),\n    );\n  }\n  ret.isReaction = true;\n  return ret;\n}\n\nfunction rgMerge(scaffold, rgroups) /* Struct */ {\n  /* reader */\n  const ret = new Struct();\n\n  scaffold.mergeInto(ret, null, null, false, true);\n\n  Object.keys(rgroups).forEach((id) => {\n    const rgid = parseInt(id, 10);\n\n    for (let j = 0; j < rgroups[rgid].length; ++j) {\n      const ctab = rgroups[rgid][j];\n      ctab.rgroups.set(rgid, new RGroup());\n      const frag = new Fragment();\n      const frid = ctab.frags.add(frag);\n      ctab.rgroups.get(rgid).frags.add(frid);\n      ctab.atoms.forEach((atom) => {\n        atom.fragment = frid;\n      });\n      ctab.mergeInto(ret);\n    }\n  });\n\n  return ret;\n}\n\nexport default {\n  fmtInfo,\n  paddedNum,\n  parseDecimalInt,\n  partitionLine,\n  partitionLineFixed,\n  rxnMerge,\n  rgMerge,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Pool, SGroup, Vec2, SGroupAttachmentPoint } from 'domain/entities';\n\nimport utils from './utils';\nimport assert from 'assert';\n\n/**\n * @param str { string }\n * @param valueString { boolean }\n * @returns { Pool }\n */\nfunction readKeyValuePairs(str, valueString) {\n  const ret = new Pool();\n  const partition = utils.partitionLineFixed(str, 3, true);\n  const count = utils.parseDecimalInt(partition[0]);\n\n  for (let i = 0; i < count; ++i) {\n    const key = utils.parseDecimalInt(partition[2 * i + 1]) - 1;\n    const value = valueString\n      ? partition[2 * i + 2].trim()\n      : utils.parseDecimalInt(partition[2 * i + 2]);\n\n    ret.set(key, value);\n  }\n\n  return ret;\n}\n\n/**\n * @param str { string }\n * @param valueString { boolean }\n * @returns { Array }\n */\nfunction readKeyMultiValuePairs(str, valueString) {\n  /* reader */\n  const ret = [];\n  const partition = utils.partitionLineFixed(str, 3, true);\n  const count = utils.parseDecimalInt(partition[0]);\n  for (let i = 0; i < count; ++i) {\n    ret.push([\n      /* eslint-disable no-mixed-operators */\n      utils.parseDecimalInt(partition[2 * i + 1]) - 1,\n      valueString\n        ? partition[2 * i + 2].trim()\n        : utils.parseDecimalInt(partition[2 * i + 2]),\n      /* eslint-enable no-mixed-operators */\n    ]);\n  }\n  return ret;\n}\n\nfunction postLoadMul(sgroup, mol, atomMap) {\n  // eslint-disable-line max-statements\n  sgroup.data.mul = sgroup.data.subscript - 0;\n  const atomReductionMap = {};\n\n  sgroup.atoms = SGroup.filterAtoms(sgroup.atoms, atomMap);\n  sgroup.patoms = SGroup.filterAtoms(sgroup.patoms, atomMap);\n\n  // mark repetitions for removal\n  for (let k = 1; k < sgroup.data.mul; ++k) {\n    for (let m = 0; m < sgroup.patoms.length; ++m) {\n      const raid = sgroup.atoms[k * sgroup.patoms.length + m]; // eslint-disable-line no-mixed-operators\n      if (raid < 0) continue; // eslint-disable-line no-continue\n      if (sgroup.patoms[m] < 0) throw new Error('parent atom missing');\n      atomReductionMap[raid] = sgroup.patoms[m]; // \"merge\" atom in parent\n    }\n  }\n  sgroup.patoms = SGroup.removeNegative(sgroup.patoms);\n\n  const patomsMap = identityMap(sgroup.patoms);\n\n  const bondsToRemove = [];\n  mol.bonds.forEach((bond, bid) => {\n    const beginIn = bond.begin in atomReductionMap;\n    const endIn = bond.end in atomReductionMap;\n    // if both adjacent atoms of a bond are to be merged, remove it\n    /* eslint-disable no-mixed-operators */\n    if (\n      (beginIn && endIn) ||\n      (beginIn && bond.end in patomsMap) ||\n      (endIn && bond.begin in patomsMap)\n    ) {\n      bondsToRemove.push(bid);\n    }\n    /* eslint-enable no-mixed-operators */\n    // if just one atom is merged, modify the bond accordingly\n    else if (beginIn) bond.begin = atomReductionMap[bond.begin];\n    else if (endIn) bond.end = atomReductionMap[bond.end];\n  }, sgroup);\n\n  // apply removal lists\n  for (let b = 0; b < bondsToRemove.length; ++b) {\n    mol.bonds.delete(bondsToRemove[b]);\n  }\n  for (const a in atomReductionMap) {\n    mol.atoms.delete(+a);\n    atomMap[a] = -1;\n  }\n  sgroup.atoms = sgroup.patoms;\n  sgroup.patoms = null;\n}\n\nfunction postLoadSru(sgroup) {\n  sgroup.data.connectivity = (sgroup.data.connectivity || 'EU')\n    .trim()\n    .toLowerCase();\n}\n\nfunction postLoadSup(sgroup) {\n  sgroup.data.name = (sgroup.data.subscript || '').trim();\n  sgroup.data.subscript = '';\n}\n\nfunction postLoadGen(_sgroup, _mol, _atomMap) {\n  // empty function\n}\n\nfunction postLoadDat(sgroup, mol) {\n  if (!sgroup.data.absolute) {\n    sgroup.pp = sgroup.pp.add(SGroup.getMassCentre(mol, sgroup.atoms));\n  }\n}\n\nfunction postLoadMon(_sgroup) {\n  // TODO: Implement after adding MON type support\n}\n\nfunction postLoadMer(_sgroup) {\n  // TODO: Implement after adding MER type support\n}\n\nfunction postLoadCop(_sgroup) {\n  // TODO: Implement after adding COP type support\n}\n\nfunction postLoadCro(_sgroup) {\n  // TODO: Implement after adding CRO type support\n}\n\nfunction postLoadMod(_sgroup) {\n  // TODO: Implement after adding MOD type support\n}\n\nfunction postLoadGra(_sgroup) {\n  // TODO: Implement after adding GRA type support\n}\n\nfunction postLoadCom(_sgroup) {\n  // TODO: Implement after adding COM type support\n}\n\nfunction postLoadMix(_sgroup) {\n  // TODO: Implement after adding MIX type support\n}\n\nfunction postLoadFor(_sgroup) {\n  // TODO: Implement after adding FOR type support\n}\n\nfunction postLoadAny(_sgroup) {\n  // TODO: Implement after adding ANY type support\n}\n\nfunction loadSGroup(mol, sg, atomMap) {\n  const postLoadMap = {\n    SUP: postLoadSup,\n    MUL: postLoadMul,\n    SRU: postLoadSru,\n    MON: postLoadMon,\n    MER: postLoadMer,\n    COP: postLoadCop,\n    CRO: postLoadCro,\n    MOD: postLoadMod,\n    GRA: postLoadGra,\n    COM: postLoadCom,\n    MIX: postLoadMix,\n    FOR: postLoadFor,\n    DAT: postLoadDat,\n    ANY: postLoadAny,\n    GEN: postLoadGen,\n  };\n\n  // add the group to the molecule\n  sg.id = mol.sgroups.add(sg);\n\n  // apply type-specific post-processing\n  postLoadMap[sg.type](sg, mol, atomMap);\n  // mark atoms in the group as belonging to it\n  for (let s = 0; s < sg.atoms.length; ++s) {\n    if (mol.atoms.has(sg.atoms[s])) mol.atoms.get(sg.atoms[s]).sgs.add(sg.id);\n  }\n\n  if (sg.type === 'DAT') mol.sGroupForest.insert(sg, -1, []);\n  else mol.sGroupForest.insert(sg);\n\n  return sg.id;\n}\n\nfunction initSGroup(sGroups, propData) {\n  /* reader */\n  const kv = readKeyValuePairs(propData, true);\n  for (const [key, type] of kv) {\n    const sg = new SGroup(type);\n    sg.number = key;\n    sGroups[key] = sg;\n  }\n}\n\nfunction applySGroupProp(sGroups, propName, propData, numeric, core) {\n  // eslint-disable-line max-params\n  const kv = readKeyValuePairs(propData, !numeric);\n  // \"core\" properties are stored directly in an sgroup, not in sgroup.data\n  for (const key of kv.keys()) {\n    (core ? sGroups[key] : sGroups[key].data)[propName] = kv.get(key);\n  }\n}\n\nfunction applySGroupArrayProp(sGroups, propName, propData, shift) {\n  /* reader */\n  const sid = utils.parseDecimalInt(propData.slice(1, 4)) - 1;\n  const num = utils.parseDecimalInt(propData.slice(4, 8));\n  let part = toIntArray(utils.partitionLineFixed(propData.slice(8), 3, true));\n\n  if (part.length !== num) throw new Error('File format invalid');\n  if (shift) part = part.map((v) => v + shift);\n\n  sGroups[sid][propName] = sGroups[sid][propName].concat(part);\n}\n\nfunction applyDataSGroupName(sg, name) {\n  /* reader */\n  sg.data.fieldName = name;\n}\n\nfunction applyDataSGroupExpand(sg, expanded) {\n  sg.data.expanded = expanded;\n}\n\nfunction applyDataSGroupQuery(sg, query) {\n  /* reader */\n  sg.data.query = query;\n}\n\nfunction applyDataSGroupQueryOp(sg, queryOp) {\n  /* reader */\n  sg.data.queryOp = queryOp;\n}\n\nfunction applyDataSGroupDesc(sGroups, propData) {\n  /* reader */\n  const split = utils.partitionLine(propData, [4, 31, 2, 20, 2, 3], false);\n  const id = utils.parseDecimalInt(split[0]) - 1;\n  const fieldName = split[1].trim();\n  const fieldType = split[2].trim();\n  const units = split[3].trim();\n  const query = split[4].trim();\n  const queryOp = split[5].trim();\n  const sGroup = sGroups[id];\n  sGroup.data.fieldType = fieldType;\n  sGroup.data.fieldName = fieldName;\n  sGroup.data.units = units;\n  sGroup.data.query = query;\n  sGroup.data.queryOp = queryOp;\n}\n\nfunction applyDataSGroupInfo(sg, propData) {\n  // eslint-disable-line max-statements\n  /* reader */\n  const split = utils.partitionLine(\n    propData,\n    [\n      10 /* x.x */, 10 /* y.y */, 4 /* eee */, 1 /* f */, 1 /* g */, 1 /* h */,\n      3 /* i */, 3 /* jjj */, 3 /* kkk */, 3 /* ll */, 2 /* m */, 3 /* n */,\n      2 /* oo */,\n    ],\n    false,\n  );\n\n  const x = parseFloat(split[0]);\n  const y = parseFloat(split[1]);\n  const attached = split[3].trim() === 'A';\n  const absolute = split[4].trim() === 'A';\n  const showUnits = split[5].trim() === 'U';\n  let nCharsToDisplay = split[7].trim();\n  nCharsToDisplay =\n    nCharsToDisplay === 'ALL' ? -1 : utils.parseDecimalInt(nCharsToDisplay);\n  const tagChar = split[10].trim();\n  const daspPos = utils.parseDecimalInt(split[11].trim());\n\n  sg.pp = new Vec2(x, -y);\n  sg.data.attached = attached;\n  sg.data.absolute = absolute;\n  sg.data.showUnits = showUnits;\n  sg.data.nCharsToDisplay = nCharsToDisplay;\n  sg.data.tagChar = tagChar;\n  sg.data.daspPos = daspPos;\n}\n\nfunction applyDataSGroupInfoLine(sGroups, propData) {\n  /* reader */\n  const id = utils.parseDecimalInt(propData.substr(0, 4)) - 1;\n  const sg = sGroups[id];\n  applyDataSGroupInfo(sg, propData.substr(5));\n}\n\nfunction applyDataSGroupData(sg, data, finalize) {\n  /* reader */\n  sg.data.fieldValue = (sg.data.fieldValue || '') + data;\n  if (finalize) {\n    sg.data.fieldValue = trimRight(sg.data.fieldValue);\n    if (\n      sg.data.fieldValue.startsWith('\"') &&\n      sg.data.fieldValue.endsWith('\"')\n    ) {\n      sg.data.fieldValue = sg.data.fieldValue.substr(\n        1,\n        sg.data.fieldValue.length - 2,\n      );\n    }\n  }\n}\n\nfunction applyDataSGroupDataLine(sGroups, propData, finalize) {\n  /* reader */\n  const id = utils.parseDecimalInt(propData.substr(0, 5)) - 1;\n  const data = propData.substr(5);\n  const sg = sGroups[id];\n  applyDataSGroupData(sg, data, finalize);\n}\n\n// Utilities functions\nfunction toIntArray(strArray) {\n  /* reader */\n  const ret = [];\n  for (let j = 0; j < strArray.length; ++j) {\n    ret[j] = utils.parseDecimalInt(strArray[j]);\n  }\n  return ret;\n}\n\nfunction trimRight(str) {\n  return str.replace(/\\s+$/, '');\n}\n\nfunction identityMap(array) {\n  const map = {};\n  for (let i = 0; i < array.length; ++i) map[array[i]] = array[i];\n  return map;\n}\n\n/**\n * Superatom attachment point parsing for 'ctab' v2000\n * Implemented based on: https://github.com/epam/ketcher/issues/2467\n * @param ctabString {string} example '   1  1   2   0   '\n *        M SAP sssnn6 iii ooo cc\n *             ^\n *             start position for ctabString content\n * @returns {{sGroupId: number, attachmentPoints: SGroupAttachmentPoint[]}}\n */\nfunction parseSGroupSAPLineV2000(ctabString) {\n  const [, sss, nn6] = utils.partitionLine(\n    ctabString.slice(0, 7),\n    [1, 3, 3],\n    false,\n  );\n  const chunksNumberInLine = utils.parseDecimalInt(nn6);\n  assert(chunksNumberInLine <= 6);\n  const sGroupId = utils.parseDecimalInt(sss) - 1;\n  const attachmentPointsStr = ctabString.slice(7);\n  const attachmentPoints = [];\n  for (let i = 0; i < chunksNumberInLine; i++) {\n    // length of ' iii ooo cc'\n    const CHUNK_SIZE = 11;\n    const stringForParse = attachmentPointsStr.slice(i * CHUNK_SIZE);\n    const CHUNK_PARTS_LENGTHS = [1, 3, 1, 3, 1, 2];\n    const [, iii, , ooo, , cc] = utils.partitionLine(\n      stringForParse,\n      CHUNK_PARTS_LENGTHS,\n      false,\n    );\n    const atomId = utils.parseDecimalInt(iii) - 1;\n    assert(atomId >= 0);\n    const leaveAtomParsedId = utils.parseDecimalInt(ooo);\n    const leaveAtomId =\n      leaveAtomParsedId > 0 ? leaveAtomParsedId - 1 : undefined;\n    attachmentPoints.push(new SGroupAttachmentPoint(atomId, leaveAtomId, cc));\n  }\n  return { sGroupId, attachmentPoints };\n}\n\nexport default {\n  readKeyValuePairs,\n  readKeyMultiValuePairs,\n  loadSGroup,\n  initSGroup,\n  applySGroupProp,\n  applySGroupArrayProp,\n  applyDataSGroupName,\n  applyDataSGroupQuery,\n  applyDataSGroupQueryOp,\n  applyDataSGroupDesc,\n  applyDataSGroupInfo,\n  applyDataSGroupData,\n  applyDataSGroupInfoLine,\n  applyDataSGroupDataLine,\n  applyDataSGroupExpand,\n  parseSGroupSAPLineV2000,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n/* eslint-disable guard-for-in */ // todo\n\nimport {\n  Atom,\n  AtomList,\n  Bond,\n  Pool,\n  RGroup,\n  SGroup,\n  StereoLabel,\n  Struct,\n  Vec2,\n} from 'domain/entities';\n\nimport { Elements } from 'domain/constants';\nimport sGroup from './parseSGroup';\nimport utils from './utils';\n\nconst loadRGroupFragments = true; // TODO: set to load the fragments\n\nfunction parseAtomLine(atomLine) {\n  /* reader */\n  const atomSplit = utils.partitionLine(\n    atomLine,\n    utils.fmtInfo.atomLinePartition,\n  );\n  const params = {\n    // generic\n    pp: new Vec2(\n      parseFloat(atomSplit[0]),\n      -parseFloat(atomSplit[1]),\n      parseFloat(atomSplit[2]),\n    ),\n    label: atomSplit[4].trim(),\n    explicitValence:\n      utils.fmtInfo.valenceMap[utils.parseDecimalInt(atomSplit[10])],\n\n    // obsolete\n    massDifference: utils.parseDecimalInt(atomSplit[5]),\n    charge: utils.fmtInfo.chargeMap[utils.parseDecimalInt(atomSplit[6])],\n\n    // query\n    hCount: utils.parseDecimalInt(utils.parseDecimalInt(atomSplit[8])),\n    stereoCare: utils.parseDecimalInt(atomSplit[9]) !== 0,\n\n    // reaction\n    aam: utils.parseDecimalInt(atomSplit[14]),\n    invRet: utils.parseDecimalInt(atomSplit[15]),\n\n    // reaction query\n    exactChangeFlag: utils.parseDecimalInt(atomSplit[16]),\n  };\n  return new Atom(params);\n}\n\nfunction parseBondLine(bondLine) {\n  /* reader */\n  const bondSplit = utils.partitionLine(\n    bondLine,\n    utils.fmtInfo.bondLinePartition,\n  );\n\n  const params = {\n    begin: utils.parseDecimalInt(bondSplit[0]) - 1,\n    end: utils.parseDecimalInt(bondSplit[1]) - 1,\n    type: utils.fmtInfo.bondTypeMap[utils.parseDecimalInt(bondSplit[2])],\n    stereo: utils.fmtInfo.bondStereoMap[utils.parseDecimalInt(bondSplit[3])],\n    xxx: bondSplit[4],\n    topology:\n      utils.fmtInfo.bondTopologyMap[utils.parseDecimalInt(bondSplit[5])],\n    reactingCenterStatus: utils.parseDecimalInt(bondSplit[6]),\n  };\n\n  return new Bond(params);\n}\n\nfunction parseAtomListLine(/* string */ atomListLine) {\n  /* reader */\n  const split = utils.partitionLine(\n    atomListLine,\n    utils.fmtInfo.atomListHeaderPartition,\n  );\n\n  const number = utils.parseDecimalInt(split[0]) - 1;\n  const notList = split[2].trim() === 'T';\n  const count = utils.parseDecimalInt(split[4].trim());\n\n  const ids = atomListLine.slice(utils.fmtInfo.atomListHeaderLength);\n  const list = [];\n  const itemLength = utils.fmtInfo.atomListHeaderItemLength;\n  for (let i = 0; i < count; ++i) {\n    list[i] = utils.parseDecimalInt(\n      ids.slice(i * itemLength, (i + 1) * itemLength - 1),\n    );\n  }\n\n  return {\n    aid: number,\n    atomList: new AtomList({\n      notList,\n      ids: list,\n    }),\n  };\n}\n\n/**\n * @param ctab\n * @param ctabLines\n * @param shift\n * @param end\n * @param sGroups\n * @param rLogic\n * @returns { Pool }\n */\nfunction parsePropertyLines(ctab, ctabLines, shift, end, sGroups, rLogic) {\n  // eslint-disable-line max-statements, max-params\n  /* reader */\n  const props = new Pool();\n\n  while (shift < end) {\n    const line = ctabLines[shift];\n    if (line.charAt(0) === 'A') {\n      const propValue = ctabLines[++shift];\n      // TODO: Atom entity only have pseudo getter. Check during refactoring\n      // this type of pseudo labeling is not used in current BIOVIA products. See ctab documentation 2020\n      // https://discover.3ds.com/sites/default/files/2020-08/biovia_ctfileformats_2020.pdf (page 47)\n      const isPseudo = /'.+'/.test(propValue);\n      if (isPseudo && !props.get('pseudo')) {\n        props.set('pseudo', new Pool());\n      }\n      if (!isPseudo && !props.get('alias')) {\n        props.set('alias', new Pool());\n      }\n      props\n        .get(isPseudo ? 'pseudo' : 'alias')\n        .set(utils.parseDecimalInt(line.slice(3)) - 1, propValue);\n    } else if (line.charAt(0) === 'M') {\n      const type = line.slice(3, 6);\n      let propertyData = line.slice(6);\n      if (type === 'END') {\n        break;\n      } else if (type === 'CHG') {\n        if (!props.get('charge')) {\n          props.set('charge', sGroup.readKeyValuePairs(propertyData));\n        }\n      } else if (type === 'RAD') {\n        if (!props.get('radical')) {\n          props.set('radical', sGroup.readKeyValuePairs(propertyData));\n        }\n      } else if (type === 'ISO') {\n        if (!props.get('isotope')) {\n          props.set('isotope', sGroup.readKeyValuePairs(propertyData));\n        }\n      } else if (type === 'RBC') {\n        if (!props.get('ringBondCount')) {\n          props.set('ringBondCount', sGroup.readKeyValuePairs(propertyData));\n        }\n      } else if (type === 'SUB') {\n        if (!props.get('substitutionCount'))\n          props.set('substitutionCount', new Pool());\n        const subLabels = props.get('substitutionCount');\n        const arrs = sGroup.readKeyMultiValuePairs(propertyData);\n\n        for (let arri = 0; arri < arrs.length; arri++) {\n          const a2r = arrs[arri];\n          subLabels.set(a2r[0], a2r[1]);\n        }\n      } else if (type === 'UNS') {\n        if (!props.get('unsaturatedAtom')) {\n          props.set('unsaturatedAtom', sGroup.readKeyValuePairs(propertyData));\n        }\n        // else if (type == \"LIN\") // link atom\n      } else if (type === 'RGP') {\n        // rgroup atom\n        if (!props.get('rglabel')) props.set('rglabel', new Pool());\n        const rglabels = props.get('rglabel');\n        const a2rs = sGroup.readKeyMultiValuePairs(propertyData);\n        for (let a2ri = 0; a2ri < a2rs.length; a2ri++) {\n          const a2r = a2rs[a2ri];\n          rglabels.set(\n            a2r[0],\n            (rglabels.get(a2r[0]) || 0) | (1 << (a2r[1] - 1)),\n          );\n        }\n      } else if (type === 'LOG') {\n        // rgroup atom\n        propertyData = propertyData.slice(4);\n        const rgid = utils.parseDecimalInt(propertyData.slice(0, 3).trim());\n        const iii = utils.parseDecimalInt(propertyData.slice(4, 7).trim());\n        const hhh = utils.parseDecimalInt(propertyData.slice(8, 11).trim());\n        const ooo = propertyData.slice(12).trim();\n        const logic = {};\n        if (iii > 0) logic.ifthen = iii;\n        logic.resth = hhh === 1;\n        logic.range = ooo;\n        rLogic[rgid] = logic;\n      } else if (type === 'APO') {\n        if (!props.get('attachmentPoints')) {\n          props.set('attachmentPoints', sGroup.readKeyValuePairs(propertyData));\n        }\n      } else if (type === 'ALS') {\n        // atom list\n        const pool = parsePropertyLineAtomList(\n          utils.partitionLine(propertyData, [1, 3, 3, 1, 1, 1]),\n          utils.partitionLineFixed(propertyData.slice(10), 4, false),\n        );\n\n        if (!props.get('atomList')) props.set('atomList', new Pool());\n        if (!props.get('label')) props.set('label', new Pool());\n\n        pool.forEach((atomList, aid) => {\n          props.get('label').set(aid, 'L#');\n          props.get('atomList').set(aid, atomList);\n        });\n      } else if (type === 'STY') {\n        // introduce s-group\n        sGroup.initSGroup(sGroups, propertyData);\n      } else if (type === 'SST') {\n        sGroup.applySGroupProp(sGroups, 'subtype', propertyData);\n      } else if (type === 'SLB') {\n        sGroup.applySGroupProp(sGroups, 'label', propertyData, true);\n      } else if (type === 'SPL') {\n        sGroup.applySGroupProp(sGroups, 'parent', propertyData, true, true);\n      } else if (type === 'SCN') {\n        sGroup.applySGroupProp(sGroups, 'connectivity', propertyData);\n      } else if (type === 'SAL') {\n        sGroup.applySGroupArrayProp(sGroups, 'atoms', propertyData, -1);\n      } else if (type === 'SBL') {\n        sGroup.applySGroupArrayProp(sGroups, 'bonds', propertyData, -1);\n      } else if (type === 'SPA') {\n        sGroup.applySGroupArrayProp(sGroups, 'patoms', propertyData, -1);\n      } else if (type === 'SMT') {\n        const sid = utils.parseDecimalInt(propertyData.slice(0, 4)) - 1;\n        sGroups[sid].data.subscript = propertyData.slice(4).trim();\n      } else if (type === 'SDT') {\n        sGroup.applyDataSGroupDesc(sGroups, propertyData);\n      } else if (type === 'SDD') {\n        sGroup.applyDataSGroupInfoLine(sGroups, propertyData);\n      } else if (type === 'SCD') {\n        sGroup.applyDataSGroupDataLine(sGroups, propertyData, false);\n      } else if (type === 'SED') {\n        sGroup.applyDataSGroupDataLine(sGroups, propertyData, true);\n      } else if (type === 'SDS') {\n        const expandedSGroups = propertyData.slice(7).trim().split('   ');\n        expandedSGroups.forEach((eg) => {\n          const sGroupId = Number(eg) - 1;\n          sGroups[sGroupId].data.expanded = true;\n        });\n      } else if (type === 'SAP') {\n        const { sGroupId, attachmentPoints } =\n          sGroup.parseSGroupSAPLineV2000(propertyData);\n        attachmentPoints.forEach((attachmentPoint) => {\n          sGroups[sGroupId].addAttachmentPoint(attachmentPoint);\n        });\n      }\n    }\n    ++shift;\n  }\n  return props;\n}\n\n/**\n * @param atoms { Pool }\n * @param values { Pool }\n * @param propId { string }\n */\nfunction applyAtomProp(atoms, values, propId) {\n  /* reader */\n  values.forEach((propVal, aid) => {\n    atoms.get(aid)[propId] = propVal;\n  });\n}\n\nfunction parseCTabV2000(\n  ctabLines,\n  countsSplit,\n  /* boolean */ ignoreChiralFlag,\n) {\n  // eslint-disable-line max-statements\n  /* reader */\n  const ctab = new Struct();\n  let i;\n  const atomCount = utils.parseDecimalInt(countsSplit[0]);\n  const bondCount = utils.parseDecimalInt(countsSplit[1]);\n  const atomListCount = utils.parseDecimalInt(countsSplit[2]);\n  const isAbs = utils.parseDecimalInt(countsSplit[4]) === 1 || ignoreChiralFlag;\n  const isAnd =\n    utils.parseDecimalInt(countsSplit[4]) === 0 && !ignoreChiralFlag;\n  const stextLinesCount = utils.parseDecimalInt(countsSplit[5]);\n  const propertyLinesCount = utils.parseDecimalInt(countsSplit[10]);\n  let shift = 0;\n  const atomLines = ctabLines.slice(shift, shift + atomCount);\n  shift += atomCount;\n  const bondLines = ctabLines.slice(shift, shift + bondCount);\n  shift += bondCount;\n  const atomListLines = ctabLines.slice(shift, shift + atomListCount);\n  shift += atomListCount + stextLinesCount;\n\n  const atoms = atomLines.map(parseAtomLine);\n  atoms.forEach((atom) => ctab.atoms.add(atom));\n\n  const bonds = bondLines.map(parseBondLine);\n  bonds.forEach((bond) => {\n    if (bond.stereo && isAbs) {\n      ctab.atoms.get(bond.begin).stereoLabel = StereoLabel.Abs;\n    }\n    if (bond.stereo && isAnd) {\n      ctab.atoms.get(bond.begin).stereoLabel = `${StereoLabel.And}1`;\n    }\n    ctab.bonds.add(bond);\n  });\n\n  const atomLists = atomListLines.map(parseAtomListLine);\n  atomLists.forEach((pair) => {\n    ctab.atoms.get(pair.aid).atomList = pair.atomList;\n    ctab.atoms.get(pair.aid).label = 'L#';\n  });\n\n  const sGroups = {};\n  const rLogic = {};\n  const props = parsePropertyLines(\n    ctab,\n    ctabLines,\n    shift,\n    Math.min(ctabLines.length, shift + propertyLinesCount),\n    sGroups,\n    rLogic,\n  );\n  props.forEach((values, propId) => {\n    applyAtomProp(ctab.atoms, values, propId);\n  });\n\n  const atomMap = {};\n  let sid;\n  for (sid in sGroups) {\n    const sg = sGroups[sid];\n    if (sg.type === 'DAT' && sg.atoms.length === 0) {\n      const parent = sGroups[sid].parent;\n      if (parent >= 0) {\n        const psg = sGroups[parent - 1];\n        if (psg.type === 'GEN') sg.atoms = [].slice.call(psg.atoms);\n      }\n    }\n  }\n  for (sid in sGroups) sGroup.loadSGroup(ctab, sGroups[sid], atomMap);\n  const emptyGroups = [];\n  for (sid in sGroups) {\n    // TODO: why do we need that?\n    SGroup.filter(ctab, sGroups[sid], atomMap);\n    if (sGroups[sid].atoms.length === 0 && !sGroups[sid].allAtoms) {\n      emptyGroups.push(+sid);\n    }\n  }\n  for (i = 0; i < emptyGroups.length; ++i) {\n    ctab.sGroupForest.remove(emptyGroups[i]);\n    ctab.sgroups.delete(emptyGroups[i]);\n  }\n  for (const id in rLogic) {\n    const rgid = parseInt(id, 10);\n    ctab.rgroups.set(rgid, new RGroup(rLogic[rgid]));\n  }\n  return ctab;\n}\n\nfunction parseRg2000(\n  /* string[] */ ctabLines,\n  /* boolean */ ignoreChiralFlag,\n) /* Struct */ {\n  // eslint-disable-line max-statements\n  ctabLines = ctabLines.slice(7);\n  if (ctabLines[0].trim() !== '$CTAB') throw new Error('RGFile format invalid');\n  let i = 1;\n  while (ctabLines[i].charAt(0) !== '$') i++;\n  if (ctabLines[i].trim() !== '$END CTAB') {\n    throw new Error('RGFile format invalid');\n  }\n  const coreLines = ctabLines.slice(1, i);\n  ctabLines = ctabLines.slice(i + 1);\n  const fragmentLines = {};\n  while (true) {\n    // eslint-disable-line no-constant-condition\n    if (ctabLines.length === 0) throw new Error('Unexpected end of file');\n    let line = ctabLines[0].trim();\n    if (line === '$END MOL') {\n      ctabLines = ctabLines.slice(1);\n      break;\n    }\n    if (line !== '$RGP') throw new Error('RGFile format invalid');\n\n    const rgid = parseInt(ctabLines[1].trim(), 10);\n    fragmentLines[rgid] = [];\n    ctabLines = ctabLines.slice(2);\n    while (true) {\n      // eslint-disable-line no-constant-condition\n      if (ctabLines.length === 0) throw new Error('Unexpected end of file');\n      line = ctabLines[0].trim();\n      if (line === '$END RGP') {\n        ctabLines = ctabLines.slice(1);\n        break;\n      }\n      if (line !== '$CTAB') throw new Error('RGFile format invalid');\n      i = 1;\n      while (ctabLines[i].charAt(0) !== '$') i++;\n      if (ctabLines[i].trim() !== '$END CTAB') {\n        throw new Error('RGFile format invalid');\n      }\n      fragmentLines[rgid].push(ctabLines.slice(1, i));\n      ctabLines = ctabLines.slice(i + 1);\n    }\n  }\n\n  const core = parseCTab(coreLines, ignoreChiralFlag);\n  const frag = {};\n  if (loadRGroupFragments) {\n    for (const strId in fragmentLines) {\n      const id = parseInt(strId, 10);\n      frag[id] = [];\n      for (let j = 0; j < fragmentLines[id].length; ++j) {\n        frag[id].push(parseCTab(fragmentLines[id][j], ignoreChiralFlag));\n      }\n    }\n  }\n  return utils.rgMerge(core, frag);\n}\n\nfunction parseRxn2000(\n  /* string[] */ ctabLines,\n  /* boolean */ shouldReactionRelayout,\n  /* boolean */ ignoreChiralFlag,\n) /* Struct */ {\n  // eslint-disable-line max-statements\n  /* reader */\n  ctabLines = ctabLines.slice(4);\n  const countsSplit = utils.partitionLine(\n    ctabLines[0],\n    utils.fmtInfo.rxnItemsPartition,\n  );\n  const nReactants = countsSplit[0] - 0;\n  const nProducts = countsSplit[1] - 0;\n  const nAgents = countsSplit[2] - 0;\n  ctabLines = ctabLines.slice(1); // consume counts line\n  const mols = [];\n  while (ctabLines.length > 0 && ctabLines[0].substr(0, 4) === '$MOL') {\n    ctabLines = ctabLines.slice(1);\n    let n = 0;\n    while (n < ctabLines.length && ctabLines[n].substr(0, 4) !== '$MOL') n++;\n\n    const lines = ctabLines.slice(0, n);\n    var struct;\n    if (lines[0].search('\\\\$MDL') === 0) {\n      struct = parseRg2000(lines, /* boolean */ ignoreChiralFlag);\n    } else {\n      struct = parseCTab(lines.slice(3), /* boolean */ ignoreChiralFlag);\n      struct.name = lines[0].trim();\n    }\n    mols.push(struct);\n    ctabLines = ctabLines.slice(n);\n  }\n  return utils.rxnMerge(\n    mols,\n    nReactants,\n    nProducts,\n    nAgents,\n    shouldReactionRelayout,\n  );\n}\n\nfunction parseCTab(\n  /* string */ ctabLines,\n  /* boolean */ ignoreChiralFlag,\n) /* Struct */ {\n  /* reader */\n  const countsSplit = utils.partitionLine(\n    ctabLines[0],\n    utils.fmtInfo.countsLinePartition,\n  );\n  ctabLines = ctabLines.slice(1);\n  return parseCTabV2000(ctabLines, countsSplit, ignoreChiralFlag);\n}\n\nfunction labelsListToIds(labels) {\n  /* reader */\n  const ids = [];\n  for (let i = 0; i < labels.length; ++i) {\n    const element = Elements.get(labels[i].trim());\n    if (element) {\n      ids.push(element.number);\n    }\n  }\n\n  return ids;\n}\n\n/**\n * @param hdr\n * @param lst\n * @returns { Pool }\n */\nfunction parsePropertyLineAtomList(hdr, lst) {\n  /* reader */\n  const aid = utils.parseDecimalInt(hdr[1]) - 1;\n  const count = utils.parseDecimalInt(hdr[2]);\n  const notList = hdr[4].trim() === 'T';\n  const ids = labelsListToIds(lst.slice(0, count));\n  const ret = new Pool();\n  ret.set(\n    aid,\n    new AtomList({\n      notList,\n      ids,\n    }),\n  );\n  return ret;\n}\n\nexport default {\n  parseCTabV2000,\n  parseRg2000,\n  parseRxn2000,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  AtomList,\n  Bond,\n  RGroup,\n  SGroup,\n  Struct,\n  Vec2,\n} from 'domain/entities';\n\nimport { Elements } from 'domain/constants';\nimport sGroup from './parseSGroup';\nimport utils from './utils';\n\nfunction parseAtomLineV3000(line) {\n  /* reader */\n  let subsplit, key, value, i;\n  const split = spacebarsplit(line);\n  const params = {\n    pp: new Vec2(\n      parseFloat(split[2]),\n      -parseFloat(split[3]),\n      parseFloat(split[4]),\n    ),\n    aam: split[5].trim(),\n  };\n  let label = split[1].trim();\n  if (label.charAt(0) === '\"' && label.charAt(label.length - 1) === '\"') {\n    label = label.substr(1, label.length - 2);\n  } // strip qutation marks\n  if (label.charAt(label.length - 1) === ']') {\n    // assume atom list\n    label = label.substr(0, label.length - 1); // remove ']'\n    const atomListParams = {};\n    atomListParams.notList = false;\n    const matchNotListInfo = label.match(/NOT ?\\[/);\n    if (matchNotListInfo) {\n      atomListParams.notList = true;\n      const [matchedSubstr] = matchNotListInfo;\n      label = label.substr(matchedSubstr.length); // remove 'NOT [' or 'NOT['\n    } else if (label.charAt(0) !== '[') {\n      throw new Error(\"Error: atom list expected, found '\" + label + \"'\");\n    } else {\n      label = label.substr(1); // remove '['\n    }\n    atomListParams.ids = labelsListToIds(label.split(','));\n    params.atomList = new AtomList(atomListParams);\n    params.label = 'L#';\n  } else {\n    params.label = label;\n  }\n  split.splice(0, 6);\n  for (i = 0; i < split.length; ++i) {\n    subsplit = splitonce(split[i], '=');\n    key = subsplit[0];\n    value = subsplit[1];\n    if (key in utils.fmtInfo.v30atomPropMap) {\n      let ival = utils.parseDecimalInt(value);\n      if (key === 'VAL') {\n        if (ival === 0) continue; // eslint-disable-line no-continue\n        if (ival === -1) ival = 0;\n      }\n      params[utils.fmtInfo.v30atomPropMap[key]] = ival;\n    } else if (key === 'RGROUPS') {\n      value = value.trim().substr(1, value.length - 2);\n      const rgrsplit = value.split(' ').slice(1);\n      params.rglabel = 0;\n      for (let j = 0; j < rgrsplit.length; ++j) {\n        params.rglabel |= 1 << (rgrsplit[j] - 1);\n      }\n    } else if (key === 'ATTCHPT') {\n      params.attpnt = value.trim() - 0;\n    }\n  }\n\n  return new Atom(params);\n}\n\nfunction parseBondLineV3000(line) {\n  /* reader */\n  let subsplit, key, value, i;\n  const split = spacebarsplit(line);\n  const params = {\n    begin: utils.parseDecimalInt(split[2]) - 1,\n    end: utils.parseDecimalInt(split[3]) - 1,\n    type: utils.fmtInfo.bondTypeMap[utils.parseDecimalInt(split[1])],\n  };\n  split.splice(0, 4);\n  for (i = 0; i < split.length; ++i) {\n    subsplit = splitonce(split[i], '=');\n    key = subsplit[0];\n    value = subsplit[1];\n    if (key === 'CFG') {\n      params.stereo =\n        utils.fmtInfo.v30bondStereoMap[utils.parseDecimalInt(value)];\n      if (\n        params.type === Bond.PATTERN.TYPE.DOUBLE &&\n        params.stereo === Bond.PATTERN.STEREO.EITHER\n      ) {\n        params.stereo = Bond.PATTERN.STEREO.CIS_TRANS;\n      }\n    } else if (key === 'TOPO') {\n      params.topology =\n        utils.fmtInfo.bondTopologyMap[utils.parseDecimalInt(value)];\n    } else if (key === 'RXCTR') {\n      params.reactingCenterStatus = utils.parseDecimalInt(value);\n    } else if (key === 'STBOX') {\n      params.stereoCare = utils.parseDecimalInt(value);\n    }\n  }\n  return new Bond(params);\n}\n\nfunction v3000parseCollection(ctab, ctabLines, shift) {\n  /* reader */\n  shift++;\n  while (ctabLines[shift].trim() !== 'M  V30 END COLLECTION') shift++;\n  shift++;\n  return shift;\n}\n\nfunction v3000parseSGroup(ctab, ctabLines, sgroups, atomMap, shift) {\n  // eslint-disable-line max-params, max-statements\n  /* reader */\n  let line = '';\n  shift++;\n  while (shift < ctabLines.length) {\n    line = stripV30(ctabLines[shift++]).trim();\n    if (line.trim() === 'END SGROUP') return shift;\n    while (line.charAt(line.length - 1) === '-') {\n      line = (\n        line.substr(0, line.length - 1) + stripV30(ctabLines[shift++])\n      ).trim();\n    }\n    const split = splitSGroupDef(line);\n    const type = split[1];\n    const sg = new SGroup(type);\n    sg.number = split[0] - 0;\n    sg.type = type;\n    sg.label = split[2] - 0;\n    sgroups[sg.number] = sg;\n    const props = {};\n    for (let i = 3; i < split.length; ++i) {\n      const subsplit = splitonce(split[i], '=');\n      if (subsplit.length !== 2) {\n        throw new Error(\n          \"A record of form AAA=BBB or AAA=(...) expected, got '\" +\n            split[i] +\n            \"'\",\n        );\n      }\n      const name = subsplit[0];\n      if (!(name in props)) props[name] = [];\n      props[name].push(subsplit[1]);\n    }\n    sg.atoms = parseBracedNumberList(props.ATOMS[0], -1);\n    if (props.PATOMS) {\n      sg.patoms = parseBracedNumberList(props.PATOMS[0], -1);\n    }\n    sg.bonds = props.BONDS ? parseBracedNumberList(props.BONDS[0], -1) : [];\n    const brkxyzStrs = props.BRKXYZ;\n    sg.brkxyz = [];\n    if (brkxyzStrs) {\n      for (let j = 0; j < brkxyzStrs.length; ++j) {\n        sg.brkxyz.push(parseBracedNumberList(brkxyzStrs[j]));\n      }\n    }\n    if (props.MULT) sg.data.subscript = props.MULT[0] - 0;\n    if (props.LABEL) sg.data.subscript = props.LABEL[0].trim();\n    if (props.CONNECT) {\n      sg.data.connectivity = props.CONNECT[0].toLowerCase();\n    }\n    if (props.FIELDDISP) {\n      sGroup.applyDataSGroupInfo(sg, stripQuotes(props.FIELDDISP[0]));\n    }\n    if (props.FIELDDATA) {\n      sGroup.applyDataSGroupData(sg, props.FIELDDATA[0], true);\n    }\n    if (props.FIELDNAME) {\n      sGroup.applyDataSGroupName(sg, props.FIELDNAME[0]);\n    }\n    if (props.QUERYTYPE) {\n      sGroup.applyDataSGroupQuery(sg, props.QUERYTYPE[0]);\n    }\n    if (props.QUERYOP) sGroup.applyDataSGroupQueryOp(sg, props.QUERYOP[0]);\n    sGroup.loadSGroup(ctab, sg, atomMap);\n    if (props.ESTATE) sGroup.applyDataSGroupExpand(sg, props.ESTATE[0]);\n  }\n  throw new Error('S-group declaration incomplete.');\n}\n\nfunction parseCTabV3000(ctabLines, norgroups) {\n  // eslint-disable-line max-statements\n  /* reader */\n  const ctab = new Struct();\n\n  let shift = 0;\n  if (ctabLines[shift++].trim() !== 'M  V30 BEGIN CTAB') {\n    throw Error('CTAB V3000 invalid');\n  }\n  if (ctabLines[shift].slice(0, 13) !== 'M  V30 COUNTS') {\n    throw Error('CTAB V3000 invalid');\n  }\n  const vals = ctabLines[shift].slice(14).split(' ');\n  const isAbs = utils.parseDecimalInt(vals[4]) === 1;\n  shift++;\n\n  if (ctabLines[shift].trim() === 'M  V30 BEGIN ATOM') {\n    shift++;\n    let line;\n    while (shift < ctabLines.length) {\n      line = stripV30(ctabLines[shift++]).trim();\n      if (line === 'END ATOM') break;\n      while (line.charAt(line.length - 1) === '-') {\n        line = (\n          line.substring(0, line.length - 1) + stripV30(ctabLines[shift++])\n        ).trim();\n      }\n      ctab.atoms.add(parseAtomLineV3000(line));\n    }\n\n    if (ctabLines[shift].trim() === 'M  V30 BEGIN BOND') {\n      shift++;\n      while (shift < ctabLines.length) {\n        line = stripV30(ctabLines[shift++]).trim();\n        if (line === 'END BOND') break;\n        while (line.charAt(line.length - 1) === '-') {\n          line = (\n            line.substring(0, line.length - 1) + stripV30(ctabLines[shift++])\n          ).trim();\n        }\n        const bond = parseBondLineV3000(line);\n        if (bond.stereo && isAbs)\n          ctab.atoms.get(bond.begin).stereoLabel = 'abs';\n        ctab.bonds.add(bond);\n      }\n    }\n\n    // TODO: let sections follow in arbitrary order\n    const sgroups = {};\n    const atomMap = {};\n\n    while (ctabLines[shift].trim() !== 'M  V30 END CTAB') {\n      if (ctabLines[shift].trim() === 'M  V30 BEGIN COLLECTION') {\n        // TODO: read collection information\n        shift = v3000parseCollection(ctab, ctabLines, shift);\n      } else if (ctabLines[shift].trim() === 'M  V30 BEGIN SGROUP') {\n        shift = v3000parseSGroup(ctab, ctabLines, sgroups, atomMap, shift);\n      } else throw Error('CTAB V3000 invalid');\n    }\n  }\n  if (ctabLines[shift++].trim() !== 'M  V30 END CTAB') {\n    throw Error('CTAB V3000 invalid');\n  }\n\n  if (!norgroups) readRGroups3000(ctab, ctabLines.slice(shift));\n\n  return ctab;\n}\n\nfunction readRGroups3000(ctab, /* string */ ctabLines) /* Struct */ {\n  // eslint-disable-line max-statements\n  /* reader */\n  const rfrags = {};\n  const rLogic = {};\n  let shift = 0;\n  while (\n    shift < ctabLines.length &&\n    ctabLines[shift].search('M  V30 BEGIN RGROUP') === 0\n  ) {\n    const id = ctabLines[shift++].split(' ').pop();\n    rfrags[id] = [];\n    rLogic[id] = {};\n    while (true) {\n      // eslint-disable-line no-constant-condition\n      let line = ctabLines[shift].trim();\n      if (line.search('M  V30 RLOGIC') === 0) {\n        line = line.slice(13);\n        const rlsplit = line.trim().split(/\\s+/g);\n        const iii = utils.parseDecimalInt(rlsplit[0]);\n        const hhh = utils.parseDecimalInt(rlsplit[1]);\n        const ooo = rlsplit.slice(2).join(' ');\n        const logic = {};\n        if (iii > 0) logic.ifthen = iii;\n        logic.resth = hhh === 1;\n        logic.range = ooo;\n        rLogic[id] = logic;\n        shift++;\n        continue; // eslint-disable-line no-continue\n      }\n      if (line !== 'M  V30 BEGIN CTAB') throw Error('CTAB V3000 invalid');\n      for (var i = 0; i < ctabLines.length; ++i) {\n        if (ctabLines[shift + i].trim() === 'M  V30 END CTAB') break;\n      }\n      const lines = ctabLines.slice(shift, shift + i + 1);\n      const rfrag = parseCTabV3000(lines, true);\n      rfrags[id].push(rfrag);\n      shift = shift + i + 1;\n      if (ctabLines[shift].trim() === 'M  V30 END RGROUP') {\n        shift++;\n        break;\n      }\n    }\n  }\n\n  Object.keys(rfrags).forEach((rgid) => {\n    rfrags[rgid].forEach((rg) => {\n      rg.rgroups.set(rgid, new RGroup(rLogic[rgid]));\n      const frid = rg.frags.add({});\n      rg.rgroups.get(rgid).frags.add(frid);\n      rg.atoms.forEach((atom) => {\n        atom.fragment = frid;\n      });\n      rg.mergeInto(ctab);\n    });\n  });\n}\n\nfunction parseRxn3000(\n  /* string[] */ ctabLines,\n  shouldReactionRelayout,\n) /* Struct */ {\n  // eslint-disable-line max-statements\n  /* reader */\n  ctabLines = ctabLines.slice(4);\n  const countsSplit = ctabLines[0].split(/\\s+/g).slice(3);\n  const nReactants = countsSplit[0] - 0;\n  const nProducts = countsSplit[1] - 0;\n  const nAgents = countsSplit.length > 2 ? countsSplit[2] - 0 : 0;\n\n  function findCtabEnd(i) {\n    for (let j = i; j < ctabLines.length; ++j) {\n      if (ctabLines[j].trim() === 'M  V30 END CTAB') return j;\n    }\n\n    return console.error('CTab format invalid');\n  }\n\n  function findRGroupEnd(i) {\n    for (let j = i; j < ctabLines.length; ++j) {\n      if (ctabLines[j].trim() === 'M  V30 END RGROUP') return j;\n    }\n    return console.error('CTab format invalid');\n  }\n\n  const molLinesReactants = [];\n  const molLinesProducts = [];\n  const molLinesAgents = [];\n  let current = null;\n  const rGroups = [];\n  for (let i = 0; i < ctabLines.length; ++i) {\n    const line = ctabLines[i].trim();\n    var j;\n\n    if (line.startsWith('M  V30 COUNTS')) {\n      // do nothing\n    } else if (line === 'M  END') {\n      break; // stop reading\n    } else if (line === 'M  V30 BEGIN PRODUCT') {\n      current = molLinesProducts;\n    } else if (line === 'M  V30 END PRODUCT') {\n      current = null;\n    } else if (line === 'M  V30 BEGIN REACTANT') {\n      current = molLinesReactants;\n    } else if (line === 'M  V30 END REACTANT') {\n      current = null;\n    } else if (line === 'M  V30 BEGIN AGENT') {\n      current = molLinesAgents;\n    } else if (line === 'M  V30 END AGENT') {\n      current = null;\n    } else if (line.startsWith('M  V30 BEGIN RGROUP')) {\n      j = findRGroupEnd(i);\n      rGroups.push(ctabLines.slice(i, j + 1));\n      i = j;\n    } else if (line === 'M  V30 BEGIN CTAB') {\n      j = findCtabEnd(i);\n      current.push(ctabLines.slice(i, j + 1));\n      i = j;\n    } else {\n      throw new Error('line unrecognized: ' + line);\n    }\n  }\n  const mols = [];\n  const molLines = molLinesReactants\n    .concat(molLinesProducts)\n    .concat(molLinesAgents);\n  for (j = 0; j < molLines.length; ++j) {\n    const mol = parseCTabV3000(molLines[j], countsSplit);\n    mols.push(mol);\n  }\n  const ctab = utils.rxnMerge(\n    mols,\n    nReactants,\n    nProducts,\n    nAgents,\n    shouldReactionRelayout,\n  );\n\n  readRGroups3000(\n    ctab,\n    (function (array) {\n      let res = [];\n      for (let k = 0; k < array.length; ++k) res = res.concat(array[k]);\n      return res;\n    })(rGroups),\n  );\n\n  return ctab;\n}\n\n// split a line by spaces outside parentheses\nfunction spacebarsplit(line) {\n  // eslint-disable-line max-statements\n  /* reader */\n  const split = [];\n  let bracketEquality = 0;\n  let currentIndex = 0;\n  let firstSliceIndex = -1;\n  let quoted = false;\n\n  for (currentIndex; currentIndex < line.length; currentIndex += 1) {\n    const currentSymbol = line[currentIndex];\n    if (line.substr(currentIndex, 3) === 'NOT') {\n      const closingBracketIndex = line.indexOf(']');\n      split.push(line.slice(currentIndex, closingBracketIndex + 1));\n      currentIndex = closingBracketIndex + 1;\n      firstSliceIndex = currentIndex;\n    } else if (currentSymbol === '(') bracketEquality += 1;\n    else if (currentSymbol === ')') bracketEquality -= 1;\n    else if (currentSymbol === '\"') quoted = !quoted;\n    else if (!quoted && line[currentIndex] === ' ' && bracketEquality === 0) {\n      if (currentIndex > firstSliceIndex + 1) {\n        split.push(line.slice(firstSliceIndex + 1, currentIndex));\n      }\n      firstSliceIndex = currentIndex;\n    }\n  }\n  if (currentIndex > firstSliceIndex + 1) {\n    split.push(line.slice(firstSliceIndex + 1, currentIndex));\n  }\n  return split;\n}\n\n// utils\nfunction stripQuotes(str) {\n  if (str[0] === '\"' && str[str.length - 1] === '\"') {\n    return str.substr(1, str.length - 2);\n  }\n  return str;\n}\n\nfunction splitonce(line, delim) {\n  /* reader */\n  const p = line.indexOf(delim);\n  return [line.slice(0, p), line.slice(p + 1)];\n}\n\nfunction splitSGroupDef(line) {\n  // eslint-disable-line max-statements\n  /* reader */\n  const split = [];\n  let braceBalance = 0;\n  let quoted = false;\n  for (let i = 0; i < line.length; ++i) {\n    const c = line.charAt(i);\n    if (c === '\"') {\n      quoted = !quoted;\n    } else if (!quoted) {\n      if (c === '(') {\n        braceBalance++;\n      } else if (c === ')') {\n        braceBalance--;\n      } else if (c === ' ' && braceBalance === 0) {\n        split.push(line.slice(0, i));\n        line = line.slice(i + 1).trim();\n        i = 0;\n      }\n    }\n  }\n  if (braceBalance !== 0) {\n    throw new Error('Brace balance broken. S-group properies invalid!');\n  }\n  if (line.length > 0) split.push(line.trim());\n  return split;\n}\n\nfunction parseBracedNumberList(line, shift) {\n  /* reader */\n  if (!line) return null;\n  const list = [];\n  line = line.trim();\n  line = line.substr(1, line.length - 2);\n  const split = line.split(' ');\n  shift = shift || 0;\n\n  for (let i = 1; i < split.length; ++i) {\n    const value = parseInt(split[i]);\n    if (!isNaN(value)) {\n      // eslint-disable-line\n      list.push(value + shift);\n    }\n  }\n\n  return list;\n}\n\nfunction stripV30(line) {\n  /* reader */\n  if (line.slice(0, 7) !== 'M  V30 ') throw new Error('Prefix invalid');\n  return line.slice(7);\n}\n\nfunction labelsListToIds(labels) {\n  /* reader */\n  const ids = [];\n  for (let i = 0; i < labels.length; ++i) {\n    const element = Elements.get(labels[i].trim());\n    if (element) {\n      ids.push(element.number);\n    }\n  }\n\n  return ids;\n}\n\nexport default {\n  parseCTabV3000,\n  readRGroups3000,\n  parseRxn3000,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MonomerMicromolecule, Pile, SGroup } from 'domain/entities';\n\nimport utils from './utils';\nimport v2000 from './v2000';\nimport v3000 from './v3000';\n\nconst loadRGroupFragments = true; // TODO: set to load the fragments\n\n/* Parse Mol */\nfunction parseMol(\n  /* string */ ctabLines,\n  /* boolean */ ignoreChiralFlag,\n) /* Struct */ {\n  /* reader */\n  if (ctabLines[0].search('\\\\$MDL') === 0) {\n    const struct = v2000.parseRg2000(ctabLines, ignoreChiralFlag);\n    struct.name = ctabLines[3].trim();\n    return struct;\n  }\n  const struct = parseCTab(ctabLines.slice(3), ignoreChiralFlag);\n  struct.name = ctabLines[0].trim();\n  return struct;\n}\n\nfunction parseCTab(\n  /* string */ ctabLines,\n  /* boolean */ ignoreChiralFlag,\n) /* Struct */ {\n  /* reader */\n  const countsSplit = partitionLine(\n    ctabLines[0],\n    utils.fmtInfo.countsLinePartition,\n  );\n  const version = countsSplit[11].trim();\n  ctabLines = ctabLines.slice(1);\n  if (version === 'V2000') {\n    return v2000.parseCTabV2000(ctabLines, countsSplit, ignoreChiralFlag);\n  }\n  if (version === 'V3000') {\n    return v3000.parseCTabV3000(ctabLines, !loadRGroupFragments);\n  } else {\n    throw new Error('Molfile version unknown: ' + version);\n  }\n}\n\n/* Parse Rxn */\nfunction parseRxn(\n  /* string[] */ ctabLines,\n  /* boolean */ shouldReactionRelayout,\n  /* boolean */ ignoreChiralFlag,\n) /* Struct */ {\n  /* reader */\n  const split = ctabLines[0].trim().split(' ');\n  if (split.length > 1 && split[1] === 'V3000') {\n    return v3000.parseRxn3000(ctabLines, shouldReactionRelayout);\n  }\n\n  const struct = v2000.parseRxn2000(\n    ctabLines,\n    shouldReactionRelayout,\n    ignoreChiralFlag,\n  );\n  struct.name = ctabLines[1].trim();\n  return struct;\n}\n\n/* Prepare For Saving */\nconst prepareForSaving = {\n  MUL: SGroup.prepareMulForSaving,\n  SRU: prepareSruForSaving,\n  SUP: prepareSupForSaving,\n  DAT: prepareDatForSaving,\n  GEN: prepareGenForSaving,\n  queryComponent: prepareQueryComponentForSaving,\n};\n\nfunction prepareSruForSaving(sgroup, mol) {\n  const xBonds = [];\n  mol.bonds.forEach((bond, bid) => {\n    const a1 = mol.atoms.get(bond.begin);\n    const a2 = mol.atoms.get(bond.end);\n    /* eslint-disable no-mixed-operators */\n    if (\n      (a1.sgs.has(sgroup.id) && !a2.sgs.has(sgroup.id)) ||\n      (a2.sgs.has(sgroup.id) && !a1.sgs.has(sgroup.id))\n    ) {\n      /* eslint-enable no-mixed-operators */\n      xBonds.push(bid);\n    }\n  }, sgroup);\n  if (xBonds.length !== 0 && xBonds.length !== 2) {\n    // TODO fix this eslint error\n    // eslint-disable-next-line no-throw-literal\n    throw {\n      id: sgroup.id,\n      'error-type': 'cross-bond-number',\n      message: 'Unsupported cross-bonds number',\n    };\n  }\n  sgroup.bonds = xBonds;\n}\n\nfunction prepareSupForSaving(sgroup, mol) {\n  // This code is also used for GroupSru and should be moved into a separate common method\n  // It seems that such code should be used for any sgroup by this this should be checked\n  const xBonds = [];\n  mol.bonds.forEach((bond, bid) => {\n    const a1 = mol.atoms.get(bond.begin);\n    const a2 = mol.atoms.get(bond.end);\n    /* eslint-disable no-mixed-operators */\n    if (\n      (a1.sgs.has(sgroup.id) && !a2.sgs.has(sgroup.id)) ||\n      (a2.sgs.has(sgroup.id) && !a1.sgs.has(sgroup.id))\n    ) {\n      /* eslint-enable no-mixed-operators */\n      xBonds.push(bid);\n    }\n  }, sgroup);\n  sgroup.bonds = xBonds;\n}\n\nfunction prepareGenForSaving(_sgroup, _mol) {\n  // eslint-disable-line no-unused-vars\n}\n\nfunction prepareQueryComponentForSaving(_sgroup, _mol) {\n  // eslint-disable-line no-unused-vars\n}\n\nfunction prepareDatForSaving(sgroup, mol) {\n  sgroup.atoms = SGroup.getAtoms(mol, sgroup);\n}\n\n/* Save To Molfile */\nconst saveToMolfile = {\n  MUL: saveMulToMolfile,\n  SRU: saveSruToMolfile,\n  SUP: saveSupToMolfile,\n  DAT: saveDatToMolfile,\n  GEN: saveGenToMolfile,\n};\n\nfunction saveMulToMolfile(sgroup, mol, sgMap, atomMap, bondMap) {\n  // eslint-disable-line max-params\n  const idstr = (sgMap[sgroup.id] + '').padStart(3);\n\n  let lines = [];\n  lines = lines.concat(\n    makeAtomBondLines(\n      'SAL',\n      idstr,\n      Array.from(sgroup.atomSet.values()),\n      atomMap,\n    ),\n  ); // TODO: check atomSet\n  lines = lines.concat(\n    makeAtomBondLines(\n      'SPA',\n      idstr,\n      Array.from(sgroup.parentAtomSet.values()),\n      atomMap,\n    ),\n  );\n  lines = lines.concat(makeAtomBondLines('SBL', idstr, sgroup.bonds, bondMap));\n  const smtLine = 'M  SMT ' + idstr + ' ' + sgroup.data.mul;\n  lines.push(smtLine);\n  lines = lines.concat(bracketsToMolfile(mol, sgroup, idstr));\n  return lines.join('\\n');\n}\n\nfunction saveSruToMolfile(sgroup, mol, sgMap, atomMap, bondMap) {\n  // eslint-disable-line max-params\n  const idstr = (sgMap[sgroup.id] + '').padStart(3);\n\n  let lines = [];\n  lines = lines.concat(makeAtomBondLines('SAL', idstr, sgroup.atoms, atomMap));\n  lines = lines.concat(makeAtomBondLines('SBL', idstr, sgroup.bonds, bondMap));\n  lines = lines.concat(bracketsToMolfile(mol, sgroup, idstr));\n  return lines.join('\\n');\n}\n\nfunction saveSupToMolfile(sgroup, mol, sgMap, atomMap, bondMap) {\n  // eslint-disable-line max-params\n  const idstr = (sgMap[sgroup.id] + '').padStart(3);\n\n  let lines = [];\n  lines = lines.concat(makeAtomBondLines('SAL', idstr, sgroup.atoms, atomMap));\n  lines = lines.concat(makeAtomBondLines('SBL', idstr, sgroup.bonds, bondMap));\n\n  let sgroupName;\n\n  if (sgroup instanceof MonomerMicromolecule) {\n    sgroupName = sgroup.monomer.label;\n  } else if (sgroup.data.name && sgroup.data.name !== '') {\n    sgroupName = sgroup.data.name;\n  }\n\n  if (sgroupName) {\n    lines.push('M  SMT ' + idstr + ' ' + sgroupName);\n  }\n\n  return lines.join('\\n');\n}\n\nfunction saveDatToMolfile(sgroup, mol, sgMap, atomMap) {\n  const idstr = (sgMap[sgroup.id] + '').padStart(3);\n\n  const data = sgroup.data;\n  let pp = sgroup.pp;\n  if (!data.absolute) pp = pp.sub(SGroup.getMassCentre(mol, sgroup.atoms));\n  let lines = [];\n  lines = lines.concat(makeAtomBondLines('SAL', idstr, sgroup.atoms, atomMap));\n  let sdtLine =\n    'M  SDT ' +\n    idstr +\n    ' ' +\n    (data.fieldName || '').padEnd(30) +\n    (data.fieldType || '').padStart(2) +\n    (data.units || '').padEnd(20) +\n    (data.query || '').padStart(2);\n\n  if (data.queryOp) {\n    // see gitlab #184\n    sdtLine += data.queryOp.padEnd(80 - 65);\n  }\n\n  lines.push(sdtLine);\n  const sddLine =\n    'M  SDD ' +\n    idstr +\n    ' ' +\n    utils.paddedNum(pp.x, 10, 4) +\n    utils.paddedNum(-pp.y, 10, 4) +\n    '    ' + // ' eee'\n    (data.attached ? 'A' : 'D') + // f\n    (data.absolute ? 'A' : 'R') + // g\n    (data.showUnits ? 'U' : ' ') + // h\n    '   ' + //  i\n    (data.nCharnCharsToDisplay >= 0\n      ? utils.paddedNum(data.nCharnCharsToDisplay, 3)\n      : 'ALL') + // jjj\n    '  1   ' + // 'kkk ll '\n    (data.tagChar || ' ') + // m\n    '  ' +\n    utils.paddedNum(data.daspPos, 1) + // n\n    '  '; // oo\n  lines.push(sddLine);\n  const val = normalizeNewlines(data.fieldValue).replace(/\\n*$/, '');\n  const charsPerLine = 69;\n  val.split('\\n').forEach((chars) => {\n    while (chars.length > charsPerLine) {\n      lines.push('M  SCD ' + idstr + ' ' + chars.slice(0, charsPerLine));\n      chars = chars.slice(charsPerLine);\n    }\n    lines.push('M  SED ' + idstr + ' ' + chars);\n  });\n  return lines.join('\\n');\n}\n\nfunction saveGenToMolfile(sgroup, mol, sgMap, atomMap, bondMap) {\n  // eslint-disable-line max-params\n  const idstr = (sgMap[sgroup.id] + '').padStart(3);\n\n  let lines = [];\n  lines = lines.concat(makeAtomBondLines('SAL', idstr, sgroup.atoms, atomMap));\n  lines = lines.concat(makeAtomBondLines('SBL', idstr, sgroup.bonds, bondMap));\n  lines = lines.concat(bracketsToMolfile(mol, sgroup, idstr));\n  return lines.join('\\n');\n}\n\nfunction makeAtomBondLines(prefix, idstr, ids, map) {\n  if (!ids) return [];\n  const lines = [];\n  for (let i = 0; i < Math.floor((ids.length + 14) / 15); ++i) {\n    const rem = Math.min(ids.length - 15 * i, 15); // eslint-disable-line no-mixed-operators\n    let salLine = 'M  ' + prefix + ' ' + idstr + ' ' + utils.paddedNum(rem, 2);\n    for (let j = 0; j < rem; ++j) {\n      salLine += ' ' + utils.paddedNum(map[ids[i * 15 + j]], 3);\n    } // eslint-disable-line no-mixed-operators\n    lines.push(salLine);\n  }\n  return lines;\n}\n\nfunction bracketsToMolfile(mol, sg, idstr) {\n  // eslint-disable-line max-statements\n  const atomSet = new Pile(sg.atoms);\n  const crossBonds = SGroup.getCrossBonds(mol, atomSet);\n  SGroup.bracketPos(sg, mol, crossBonds);\n  const bb = sg.bracketBox;\n  const d = sg.bracketDirection;\n  const n = d.rotateSC(1, 0);\n  const brackets = SGroup.getBracketParameters(\n    mol,\n    crossBonds,\n    atomSet,\n    bb,\n    d,\n    n,\n  );\n  const lines = [];\n  for (let i = 0; i < brackets.length; ++i) {\n    const bracket = brackets[i];\n    const a0 = bracket.c.addScaled(bracket.n, -0.5 * bracket.h).yComplement();\n    const a1 = bracket.c.addScaled(bracket.n, 0.5 * bracket.h).yComplement();\n    let line = 'M  SDI ' + idstr + utils.paddedNum(4, 3);\n    const coord = [a0.x, a0.y, a1.x, a1.y];\n    for (let j = 0; j < coord.length; ++j) {\n      line += utils.paddedNum(coord[j], 10, 4);\n    }\n    lines.push(line);\n  }\n  return lines;\n}\n\n// According Unicode Consortium sould be\n// nlRe = /\\r\\n|[\\n\\v\\f\\r\\x85\\u2028\\u2029]/g;\n// http://www.unicode.org/reports/tr18/#Line_Boundaries\nconst nlRe = /\\r\\n|[\\n\\r]/g;\nfunction normalizeNewlines(str) {\n  return str.replace(nlRe, '\\n');\n}\n\nfunction partitionLine(\n  /* string */ str,\n  /* array of int */ parts,\n  /* bool */ withspace,\n) {\n  /* reader */\n  const res = [];\n  for (let i = 0, shift = 0; i < parts.length; ++i) {\n    res.push(str.slice(shift, shift + parts[i]));\n    if (withspace) shift++;\n    shift += parts[i];\n  }\n  return res;\n}\n\nexport default {\n  parseCTab,\n  parseMol,\n  parseRxn,\n  prepareForSaving,\n  saveToMolfile,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  StereoFlag,\n  Struct,\n  SGroupAttachmentPoint,\n  SGroup,\n} from 'domain/entities';\n\nimport { Elements } from 'domain/constants';\nimport common from './common';\nimport utils from './utils';\nimport { KetcherLogger } from 'utilities';\n\nconst END_V2000 = '2D 1   1.00000     0.00000     0';\n\ntype Mapping = {\n  [key in number]: number;\n};\ntype NumberTuple = [number, number];\n\ninterface ParseCTFileProps {\n  molfileLines: string[];\n  shouldReactionRelayout?: boolean;\n  ignoreChiralFlag?: boolean;\n}\n\nexport class Molfile {\n  molecule: Struct | null;\n  molfile: string | null;\n  reaction: boolean;\n  mapping: Mapping;\n  bondMapping: Mapping;\n\n  constructor() {\n    this.molecule = null;\n    this.molfile = null;\n\n    this.reaction = false;\n    this.mapping = {};\n    this.bondMapping = {};\n  }\n\n  parseCTFile(props: ParseCTFileProps) {\n    const { molfileLines, shouldReactionRelayout, ignoreChiralFlag } = props;\n    let ret;\n    if (molfileLines[0].search('\\\\$RXN') === 0) {\n      ret = common.parseRxn(\n        molfileLines,\n        shouldReactionRelayout,\n        ignoreChiralFlag,\n      );\n    } else {\n      ret = common.parseMol(molfileLines, ignoreChiralFlag);\n    }\n    ret.initHalfBonds();\n    ret.initNeighbors();\n    ret.bindSGroupsToFunctionalGroups();\n    ret.markFragments();\n\n    return ret;\n  }\n\n  prepareSGroups(skipErrors: boolean, preserveIndigoDesc?: boolean) {\n    const mol = this.molecule;\n    const toRemove: any[] = [];\n    let errors = 0;\n\n    this.molecule?.sGroupForest\n      .getSGroupsBFS()\n      .reverse()\n      .forEach((id) => {\n        const sgroup = mol!.sgroups.get(id)!;\n        let errorIgnore = false;\n\n        try {\n          common.prepareForSaving[sgroup.type](sgroup, mol);\n        } catch (e: any) {\n          KetcherLogger.error('molfile.ts::Molfile::prepareSGroups', e);\n          if (!skipErrors || typeof e.id !== 'number') {\n            throw new Error(`Error: ${e.message}`);\n          }\n          errorIgnore = true;\n        }\n        /* eslint-disable no-mixed-operators */\n        if (\n          errorIgnore ||\n          (!preserveIndigoDesc &&\n            /^INDIGO_.+_DESC$/i.test(sgroup.data.fieldName))\n        ) {\n          errors += +errorIgnore;\n          toRemove.push(sgroup.id);\n        }\n      }, this);\n\n    if (errors) {\n      throw new Error(\n        'Warning: ' +\n          errors +\n          ' invalid S-groups were detected. They will be omitted.',\n      );\n    }\n\n    for (let i = 0; i < toRemove.length; ++i) {\n      mol?.sGroupDelete(toRemove[i]);\n    }\n  }\n\n  getCTab(molecule: Struct, rgroups?: Map<any, any>) {\n    /* saver */\n    this.molecule = molecule.clone();\n    this.prepareSGroups(false, false);\n    this.molfile = '';\n    this.writeCTab2000(rgroups);\n    return this.molfile;\n  }\n\n  saveMolecule(\n    molecule: Struct,\n    skipSGroupErrors: boolean,\n    norgroups?: boolean,\n    preserveIndigoDesc?: boolean,\n  ) {\n    // eslint-disable-line max-statements\n    /* saver */\n    this.reaction = molecule.hasRxnArrow();\n    this.molfile = '' + molecule.name;\n    if (this.reaction) {\n      if (molecule.rgroups.size > 0) {\n        throw new Error(\n          'Reactions with r-groups are not supported at the moment',\n        );\n      }\n      const components = molecule.getComponents();\n\n      const reactants = components.reactants;\n      const products = components.products;\n      const all = reactants.concat(products);\n      this.molfile =\n        '$RXN\\n' +\n        molecule.name +\n        '\\n\\n\\n' +\n        utils.paddedNum(reactants.length, 3) +\n        utils.paddedNum(products.length, 3) +\n        utils.paddedNum(0, 3) +\n        '\\n';\n      for (let i = 0; i < all.length; ++i) {\n        const saver = new Molfile();\n        const submol = molecule.clone(all[i], null, true);\n        const molfile = saver.saveMolecule(submol, false, true);\n        this.molfile += '$MOL\\n' + molfile;\n      }\n      return this.molfile;\n    }\n\n    if (molecule.rgroups.size > 0) {\n      if (norgroups) {\n        molecule = molecule.getScaffold();\n      } else {\n        const scaffold = new Molfile().getCTab(\n          molecule.getScaffold(),\n          molecule.rgroups,\n        );\n        this.molfile =\n          '$MDL  REV  1\\n$MOL\\n$HDR\\n' + molecule.name + '\\n\\n\\n$END HDR\\n';\n        this.molfile += '$CTAB\\n' + scaffold + '$END CTAB\\n';\n\n        molecule.rgroups.forEach((rg, rgid) => {\n          this.molfile += '$RGP\\n';\n          this.writePaddedNumber(rgid, 3);\n          this.molfile += '\\n';\n          rg.frags.forEach((fid) => {\n            const group = new Molfile().getCTab(molecule.getFragment(fid));\n            this.molfile += '$CTAB\\n' + group + '$END CTAB\\n';\n          });\n          this.molfile += '$END RGP\\n';\n        });\n        this.molfile += '$END MOL\\n';\n\n        return this.molfile;\n      }\n    }\n\n    this.molecule = molecule.clone();\n\n    this.prepareSGroups(skipSGroupErrors, preserveIndigoDesc);\n\n    this.writeHeader();\n    this.writeCTab2000(undefined);\n\n    return this.molfile;\n  }\n\n  writeHeader() {\n    /* saver */\n\n    const date = new Date();\n\n    this.writeCR(); // TODO: write structure name\n    this.writeWhiteSpace(2);\n    this.write('Ketcher');\n    this.writeWhiteSpace();\n    this.writeCR(\n      (date.getMonth() + 1 + '').padStart(2) +\n        (date.getDate() + '').padStart(2) +\n        ((date.getFullYear() % 100) + '').padStart(2) +\n        (date.getHours() + '').padStart(2) +\n        (date.getMinutes() + '').padStart(2) +\n        END_V2000,\n    );\n    this.writeCR();\n  }\n\n  write(str: string) {\n    /* saver */\n    this.molfile += str;\n  }\n\n  writeCR(str?: string) {\n    /* saver */\n    if (arguments.length === 0) {\n      str = '';\n    }\n\n    this.molfile += str + '\\n';\n  }\n\n  writeWhiteSpace(length = 0) {\n    /* saver */\n    if (arguments.length === 0) {\n      length = 1;\n    }\n\n    this.write(' '.repeat(Math.max(length, 0)));\n  }\n\n  writePadded(str: string, width: number) {\n    /* saver */\n    this.write(str);\n    this.writeWhiteSpace(width - str.length);\n  }\n\n  writePaddedNumber(number: number, width: number) {\n    /* saver */\n    const str = (number - 0).toString();\n\n    this.writeWhiteSpace(width - str.length);\n    this.write(str);\n  }\n\n  writePaddedFloat(number: string | number, width: number, precision: number) {\n    /* saver */\n    this.write(utils.paddedNum(number, width, precision));\n  }\n\n  writeCTab2000Header() {\n    /* saver */\n    this.writePaddedNumber(this.molecule!.atoms.size, 3);\n    this.writePaddedNumber(this.molecule!.bonds.size, 3);\n\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n    const isAbsFlag = Array.from(this.molecule!.frags.values()).some((fr) =>\n      fr ? fr.enhancedStereoFlag === StereoFlag.Abs : false,\n    );\n\n    this.writePaddedNumber(isAbsFlag ? 1 : 0, 3);\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(999, 3);\n    this.writeCR(' V2000');\n  }\n\n  writeCTab2000(rgroups?: Map<any, any>) {\n    // eslint-disable-line max-statements\n    /* saver */\n    this.writeCTab2000Header();\n\n    this.mapping = {};\n    let i = 1;\n\n    const atomsIds: number[] = [];\n    const atomsProps: {\n      id: number;\n      value: string;\n    }[] = [];\n    this.molecule!.atoms.forEach((atom, id) => {\n      let label = atom.label;\n      if (atom.atomList != null) {\n        label = 'L';\n        atomsIds.push(id);\n      } else if (atom.pseudo) {\n        if (atom.pseudo.length > 3) {\n          label = 'A';\n          atomsProps.push({ id, value: `'${atom.pseudo}'` });\n        }\n      } else if (atom.alias) {\n        atomsProps.push({ id, value: atom.alias });\n      } else if (\n        !Elements.get(atom.label) &&\n        ['A', 'Q', 'X', '*', 'R#'].indexOf(atom.label) === -1\n      ) {\n        // search in generics?\n        label = 'C';\n        atomsProps.push({ id, value: atom.label });\n      }\n\n      this.writeAtom(atom, label);\n\n      this.mapping[id] = i++;\n    }, this);\n\n    this.bondMapping = {};\n    i = 1;\n    this.molecule!.bonds.forEach((bond, id) => {\n      this.bondMapping[id] = i++;\n      this.writeBond(bond);\n    }, this);\n\n    while (atomsProps.length > 0) {\n      this.writeAtomProps(atomsProps[0]);\n      atomsProps.splice(0, 1);\n    }\n\n    const chargeList: NumberTuple[] = [];\n    const isotopeList: NumberTuple[] = [];\n    const radicalList: NumberTuple[] = [];\n    const rglabelList: NumberTuple[] = [];\n    const rglogicList: string[] = [];\n    const aplabelList: NumberTuple[] = [];\n    const rbcountList: NumberTuple[] = [];\n    const unsaturatedList: NumberTuple[] = [];\n    const substcountList: NumberTuple[] = [];\n\n    this.molecule!.atoms.forEach((atom, id) => {\n      if (atom.charge !== 0 && atom.charge !== null) {\n        chargeList.push([id, atom.charge]);\n      }\n      if (atom.isotope !== 0 && atom.isotope !== null) {\n        isotopeList.push([id, atom.isotope]);\n      }\n      if (atom.radical !== 0) {\n        radicalList.push([id, atom.radical]);\n      }\n      if (atom.rglabel != null && atom.label === 'R#') {\n        // TODO need to force rglabel=null when label is not 'R#'\n        for (let rgi = 0; rgi < 32; rgi++) {\n          if ((atom.rglabel as any) & (1 << rgi)) {\n            rglabelList.push([id, rgi + 1]);\n          }\n        }\n      }\n      if (atom.attachmentPoints != null) {\n        aplabelList.push([id, atom.attachmentPoints]);\n      }\n      if (atom.ringBondCount !== 0) {\n        rbcountList.push([id, atom.ringBondCount]);\n      }\n      if (atom.substitutionCount !== 0) {\n        substcountList.push([id, atom.substitutionCount]);\n      }\n      if (atom.unsaturatedAtom !== 0) {\n        unsaturatedList.push([id, atom.unsaturatedAtom]);\n      }\n    });\n\n    if (rgroups) {\n      rgroups.forEach((rg, rgid) => {\n        if (rg.resth || rg.ifthen > 0 || rg.range.length > 0) {\n          const line =\n            '  1 ' +\n            utils.paddedNum(rgid, 3) +\n            ' ' +\n            utils.paddedNum(rg.ifthen, 3) +\n            ' ' +\n            utils.paddedNum(rg.resth ? 1 : 0, 3) +\n            '   ' +\n            rg.range;\n          rglogicList.push(line);\n        }\n      });\n    }\n\n    this.writeAtomPropList('M  CHG', chargeList);\n    this.writeAtomPropList('M  ISO', isotopeList);\n    this.writeAtomPropList('M  RAD', radicalList);\n    this.writeAtomPropList('M  RGP', rglabelList);\n    for (let j = 0; j < rglogicList.length; ++j) {\n      this.write('M  LOG' + rglogicList[j] + '\\n');\n    }\n\n    this.writeAtomPropList('M  APO', aplabelList);\n    this.writeAtomPropList('M  RBC', rbcountList);\n    this.writeAtomPropList('M  SUB', substcountList);\n    this.writeAtomPropList('M  UNS', unsaturatedList);\n\n    if (atomsIds.length > 0) {\n      for (let j = 0; j < atomsIds.length; ++j) {\n        const atomId = atomsIds[j];\n        const atomList = this.molecule!.atoms.get(atomId)!.atomList!;\n        this.write('M  ALS');\n        this.writePaddedNumber(atomId + 1, 4);\n        this.writePaddedNumber(atomList.ids.length, 3);\n        this.writeWhiteSpace();\n        this.write(atomList.notList ? 'T' : 'F');\n\n        const labelList = atomList.labelList();\n        for (let k = 0; k < labelList.length; ++k) {\n          this.writeWhiteSpace();\n          this.writePadded(labelList[k], 3);\n        }\n        this.writeWhiteSpace();\n        this.writeCR();\n      }\n    }\n\n    const sgmap = {};\n    let cnt = 1;\n    const sgmapback = {};\n    const sgorder = this.molecule!.sGroupForest.getSGroupsBFS();\n    sgorder.forEach((id) => {\n      sgmapback[cnt] = id;\n      sgmap[id] = cnt++;\n    });\n    for (let sGroupIdInCTab = 1; sGroupIdInCTab < cnt; ++sGroupIdInCTab) {\n      // each group on its own\n      const id = sgmapback[sGroupIdInCTab];\n      const sgroup = this.molecule!.sgroups.get(id)!;\n      if (SGroup.isQuerySGroup(sgroup)) {\n        console.warn('Query group does not support in mol format');\n        continue;\n      }\n      this.write('M  STY');\n      this.writePaddedNumber(1, 3);\n      this.writeWhiteSpace(1);\n      this.writePaddedNumber(sGroupIdInCTab, 3);\n      this.writeWhiteSpace(1);\n      this.writePadded(sgroup.type, 3);\n      this.writeCR();\n\n      // TODO: write subtype, M SST\n\n      this.write('M  SLB');\n      this.writePaddedNumber(1, 3);\n      this.writeWhiteSpace(1);\n      this.writePaddedNumber(sGroupIdInCTab, 3);\n      this.writeWhiteSpace(1);\n      this.writePaddedNumber(sGroupIdInCTab, 3);\n      this.writeCR();\n\n      const parentId = this.molecule!.sGroupForest.parent.get(id)!;\n      if (parentId >= 0) {\n        this.write('M  SPL');\n        this.writePaddedNumber(1, 3);\n        this.writeWhiteSpace(1);\n        this.writePaddedNumber(sGroupIdInCTab, 3);\n        this.writeWhiteSpace(1);\n        this.writePaddedNumber(sgmap[parentId], 3);\n        this.writeCR();\n      }\n\n      // connectivity\n      if (sgroup.type === 'SRU' && sgroup.data.connectivity) {\n        const connectivity = ` ${sGroupIdInCTab.toString().padStart(3)} ${(\n          sgroup.data.connectivity || ''\n        ).padEnd(3)}`;\n\n        this.write('M  SCN');\n        this.writePaddedNumber(1, 3);\n        this.write(connectivity.toUpperCase());\n        this.writeCR();\n      }\n\n      if (sgroup.type === 'SRU') {\n        this.write('M  SMT ');\n        this.writePaddedNumber(sGroupIdInCTab, 3);\n        this.writeWhiteSpace();\n        this.write(sgroup.data.subscript || 'n');\n        this.writeCR();\n      }\n      sgroup.getAttachmentPoints().forEach((attachmentPoint) => {\n        this.writeSGroupAttachmentPointLine(sGroupIdInCTab, attachmentPoint);\n      });\n\n      this.writeCR(\n        common.saveToMolfile[sgroup.type](\n          sgroup,\n          this.molecule,\n          sgmap,\n          this.mapping,\n          this.bondMapping,\n        ),\n      );\n    }\n\n    // TODO: write M  APO\n    // TODO: write M  AAL\n    // TODO: write M  RGP\n    // TODO: write M  LOG\n\n    const expandedGroups: number[] = [];\n    this.molecule!.sgroups.forEach((sg) => {\n      if (sg.isExpanded() && !SGroup.isQuerySGroup(sg))\n        expandedGroups.push(sg.id + 1);\n    });\n\n    if (expandedGroups.length) {\n      const expandedGroupsLine = `M  SDS EXP  ${\n        expandedGroups.length\n      }   ${expandedGroups.join('   ')}`;\n      this.writeCR(expandedGroupsLine);\n    }\n\n    this.writeCR('M  END');\n  }\n\n  private writeAtom(atom, atomLabel: string) {\n    this.writePaddedFloat(atom.pp.x, 10, 4);\n    this.writePaddedFloat(-atom.pp.y, 10, 4);\n    this.writePaddedFloat(atom.pp.z, 10, 4);\n    this.writeWhiteSpace();\n    this.writePadded(atomLabel, 3);\n    this.writePaddedNumber(0, 2);\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n\n    if (typeof atom.hCount === 'undefined') {\n      atom.hCount = 0;\n    }\n    this.writePaddedNumber(atom.hCount, 3);\n\n    if (typeof atom.stereoCare === 'undefined') {\n      atom.stereoCare = 0;\n    }\n    this.writePaddedNumber(atom.stereoCare, 3);\n\n    let number: number;\n    if (atom.explicitValence < 0) {\n      number = 0;\n    } else if (atom.explicitValence === 0) {\n      number = 15;\n    } else {\n      number = atom.explicitValence;\n    }\n    this.writePaddedNumber(number, 3);\n\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n    this.writePaddedNumber(0, 3);\n\n    if (typeof atom.aam === 'undefined') {\n      atom.aam = 0;\n    }\n    this.writePaddedNumber(atom.aam, 3);\n\n    if (typeof atom.invRet === 'undefined') {\n      atom.invRet = 0;\n    }\n    this.writePaddedNumber(atom.invRet, 3);\n\n    if (typeof atom.exactChangeFlag === 'undefined') {\n      atom.exactChangeFlag = 0;\n    }\n    this.writePaddedNumber(atom.exactChangeFlag, 3);\n\n    this.writeCR();\n  }\n\n  private writeBond(bond) {\n    this.writePaddedNumber(this.mapping[bond.begin], 3);\n    this.writePaddedNumber(this.mapping[bond.end], 3);\n    this.writePaddedNumber(bond.type, 3);\n\n    if (typeof bond.stereo === 'undefined') {\n      bond.stereo = 0;\n    }\n    this.writePaddedNumber(bond.stereo, 3);\n\n    this.writePadded(bond.xxx, 3);\n\n    if (typeof bond.topology === 'undefined') {\n      bond.topology = 0;\n    }\n    this.writePaddedNumber(bond.topology, 3);\n\n    if (typeof bond.reactingCenterStatus === 'undefined') {\n      bond.reactingCenterStatus = 0;\n    }\n    this.writePaddedNumber(bond.reactingCenterStatus, 3);\n\n    this.writeCR();\n  }\n\n  private writeAtomProps(props) {\n    this.write('A  ');\n    this.writePaddedNumber(props.id + 1, 3);\n    this.writeCR();\n    this.writeCR(props.value);\n  }\n\n  private writeAtomPropList(propId: string, values: NumberTuple[]) {\n    while (values.length > 0) {\n      const part: NumberTuple[] = [];\n\n      while (values.length > 0 && part.length < 8) {\n        part.push(values[0]);\n        values.splice(0, 1);\n      }\n\n      this.write(propId);\n      this.writePaddedNumber(part.length, 3);\n\n      part.forEach((value) => {\n        this.writeWhiteSpace();\n        this.writePaddedNumber(this.mapping[value[0]], 3);\n        this.writeWhiteSpace();\n        this.writePaddedNumber(value[1], 3);\n      });\n\n      this.writeCR();\n    }\n  }\n\n  private writeSGroupAttachmentPointLine(\n    sgroupId: number,\n    attachmentPoint: SGroupAttachmentPoint,\n  ) {\n    this.write(`M  SAP`);\n    this.writeWhiteSpace(1);\n    this.writePaddedNumber(sgroupId, 3);\n    this.writePaddedNumber(1, 3);\n    this.writeWhiteSpace(1);\n    const atomId = this.mapping[attachmentPoint.atomId];\n    this.writePaddedNumber(atomId, 3);\n    this.writeWhiteSpace(1);\n    const leaveAtomId =\n      this.mapping[attachmentPoint.leaveAtomId as number] ?? 0;\n    this.writePaddedNumber(leaveAtomId, 3);\n    this.writeWhiteSpace(1);\n\n    const attachmentId = attachmentPoint.attachmentId\n      ? attachmentPoint.attachmentId.slice(0, 2)\n      : '  ';\n    this.writePadded(attachmentId, 2);\n    this.writeCR();\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MolSerializerOptions } from './mol.types';\nimport { Molfile } from './molfile';\nimport { Serializer } from '../serializers.types';\nimport { Struct } from 'domain/entities';\nimport { KetcherLogger } from 'utilities';\nimport { KetSerializer } from 'domain/serializers';\n\nexport class MolSerializer implements Serializer<Struct> {\n  static DefaultOptions: MolSerializerOptions = {\n    badHeaderRecover: false,\n    ignoreErrors: false,\n    noRgroups: false,\n    preserveIndigoDesc: false,\n    reactionRelayout: false,\n  };\n\n  readonly options: MolSerializerOptions;\n\n  constructor(options?: Partial<MolSerializerOptions>) {\n    this.options = { ...MolSerializer.DefaultOptions, ...options };\n  }\n\n  deserialize(content: string): Struct {\n    const molfile = new Molfile();\n    const lines = content?.split(/\\r\\n|[\\n\\r]/g);\n\n    const parseCTFileParams = {\n      molfileLines: lines,\n      shouldReactionRelayout: this.options.reactionRelayout,\n      ignoreChiralFlag: this.options.ignoreChiralFlag,\n    };\n\n    try {\n      return molfile.parseCTFile(parseCTFileParams);\n    } catch (e) {\n      KetcherLogger.error('molSerializer::MolSerializer::deserialize', e);\n      if (this.options.badHeaderRecover) {\n        try {\n          // check whether there's an extra empty line on top\n          // this often happens when molfile text is pasted into the dialog window\n          return molfile.parseCTFile({\n            ...parseCTFileParams,\n            molfileLines: lines.slice(1),\n          });\n        } catch (e1) {\n          KetcherLogger.error('molSerializer::MolSerializer::deserialize', e1);\n        }\n        try {\n          // check for a missing first line\n          // this sometimes happens when pasting\n          return molfile.parseCTFile({\n            ...parseCTFileParams,\n            molfileLines: [''].concat(lines),\n          });\n        } catch (e2) {\n          KetcherLogger.error('molSerializer::MolSerializer::deserialize', e2);\n        }\n      }\n      throw e;\n    }\n  }\n\n  serialize(_struct: Struct): string {\n    const struct = KetSerializer.removeLeavingGroupsFromConnectedAtoms(_struct);\n\n    return new Molfile().saveMolecule(\n      struct,\n      this.options.ignoreErrors,\n      this.options.noRgroups,\n      this.options.preserveIndigoDesc,\n    );\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Bond, Pool, Vec2 } from 'domain/entities';\n\nfunction CisTrans(mol, neighborsFunc, context) {\n  this.molecule = mol;\n  this.bonds = new Pool();\n  this.getNeighbors = neighborsFunc;\n  this.context = context;\n}\n\nCisTrans.PARITY = {\n  NONE: 0,\n  CIS: 1,\n  TRANS: 2,\n};\n\nCisTrans.prototype.each = function (func) {\n  this.bonds.forEach(func);\n};\n\nCisTrans.prototype.getParity = function (idx) {\n  return this.bonds.get(idx).parity;\n};\n\nCisTrans.prototype.getSubstituents = function (idx) {\n  return this.bonds.get(idx).substituents;\n};\n\nCisTrans.prototype.sameside = function (beg, end, neiBeg, neiEnd) {\n  const diff = Vec2.diff(beg, end);\n  const norm = new Vec2(-diff.y, diff.x);\n\n  if (!norm.normalize()) return 0;\n\n  const normBeg = Vec2.diff(neiBeg, beg);\n  const normEnd = Vec2.diff(neiEnd, end);\n\n  if (!normBeg.normalize()) return 0;\n  if (!normEnd.normalize()) return 0;\n\n  const prodBeg = Vec2.dot(normBeg, norm);\n  const prodEnd = Vec2.dot(normEnd, norm);\n\n  if (Math.abs(prodBeg) < 0.001 || Math.abs(prodEnd) < 0.001) return 0;\n\n  return prodBeg * prodEnd > 0 ? 1 : -1;\n};\n\nCisTrans.prototype.samesides = function (iBeg, iEnd, iNeiBeg, iNeiEnd) {\n  return this.sameside(\n    this.molecule.atoms.get(iBeg).pp,\n    this.molecule.atoms.get(iEnd).pp,\n    this.molecule.atoms.get(iNeiBeg).pp,\n    this.molecule.atoms.get(iNeiEnd).pp,\n  );\n};\n\nCisTrans.prototype.sortSubstituents = function (substituents) {\n  // eslint-disable-line max-statements\n  const h0 = this.molecule.atoms.get(substituents[0]).pureHydrogen();\n  const h1 =\n    substituents[1] < 0 ||\n    this.molecule.atoms.get(substituents[1]).pureHydrogen();\n  const h2 = this.molecule.atoms.get(substituents[2]).pureHydrogen();\n  const h3 =\n    substituents[3] < 0 ||\n    this.molecule.atoms.get(substituents[3]).pureHydrogen();\n\n  if (h0 && h1) return false;\n  if (h2 && h3) return false;\n\n  if (h1) {\n    substituents[1] = -1;\n  } else if (h0) {\n    substituents[0] = substituents[1];\n    substituents[1] = -1;\n  } else if (substituents[0] > substituents[1]) {\n    swap(substituents, 0, 1);\n  }\n\n  if (h3) {\n    substituents[3] = -1;\n  } else if (h2) {\n    substituents[2] = substituents[3];\n    substituents[3] = -1;\n  } else if (substituents[2] > substituents[3]) {\n    swap(substituents, 2, 3);\n  }\n\n  return true;\n};\n\nCisTrans.prototype.isGeomStereoBond = function (bondIdx, substituents) {\n  // eslint-disable-line max-statements\n  // it must be [C,N,Si]=[C,N,Si] bond\n  const bond = this.molecule.bonds.get(bondIdx);\n\n  if (bond.type !== Bond.PATTERN.TYPE.DOUBLE) return false;\n\n  const label1 = this.molecule.atoms.get(bond.begin).label;\n  const label2 = this.molecule.atoms.get(bond.end).label;\n\n  if (label1 !== 'C' && label1 !== 'N' && label1 !== 'Si' && label1 !== 'Ge') {\n    return false;\n  }\n  if (label2 !== 'C' && label2 !== 'N' && label2 !== 'Si' && label2 !== 'Ge') {\n    return false;\n  }\n\n  // the atoms should have 1 or 2 single bonds\n  // (apart from the double bond under consideration)\n  const neiBegin = this.getNeighbors.call(this.context, bond.begin);\n  const neiEnd = this.getNeighbors.call(this.context, bond.end);\n\n  if (\n    neiBegin.length < 2 ||\n    neiBegin.length > 3 ||\n    neiEnd.length < 2 ||\n    neiEnd.length > 3\n  ) {\n    return false;\n  }\n\n  substituents[0] = -1;\n  substituents[1] = -1;\n  substituents[2] = -1;\n  substituents[3] = -1;\n\n  let i;\n  let nei;\n\n  for (i = 0; i < neiBegin.length; i++) {\n    nei = neiBegin[i];\n\n    if (nei.bid === bondIdx) continue; // eslint-disable-line no-continue\n\n    if (this.molecule.bonds.get(nei.bid).type !== Bond.PATTERN.TYPE.SINGLE) {\n      return false;\n    }\n\n    if (substituents[0] === -1) substituents[0] = nei.aid;\n    // (substituents[1] === -1)\n    else substituents[1] = nei.aid;\n  }\n\n  for (i = 0; i < neiEnd.length; i++) {\n    nei = neiEnd[i];\n\n    if (nei.bid === bondIdx) continue; // eslint-disable-line no-continue\n\n    if (this.molecule.bonds.get(nei.bid).type !== Bond.PATTERN.TYPE.SINGLE) {\n      return false;\n    }\n\n    if (substituents[2] === -1) substituents[2] = nei.aid;\n    // (substituents[3] == -1)\n    else substituents[3] = nei.aid;\n  }\n\n  if (\n    substituents[1] !== -1 &&\n    this.samesides(bond.begin, bond.end, substituents[0], substituents[1]) !==\n      -1\n  ) {\n    return false;\n  }\n  if (\n    substituents[3] !== -1 &&\n    this.samesides(bond.begin, bond.end, substituents[2], substituents[3]) !==\n      -1\n  ) {\n    return false;\n  }\n\n  return true;\n};\n\nCisTrans.prototype.build = function (excludeBonds) {\n  this.molecule.bonds.forEach((bond, bid) => {\n    const ct = {\n      parity: 0,\n      substituents: [],\n    };\n    this.bonds.set(bid, ct);\n\n    if (Array.isArray(excludeBonds) && excludeBonds[bid]) return;\n\n    if (!this.isGeomStereoBond(bid, ct.substituents)) return;\n\n    if (!this.sortSubstituents(ct.substituents)) return;\n\n    const sign = this.samesides(\n      bond.begin,\n      bond.end,\n      ct.substituents[0],\n      ct.substituents[2],\n    );\n\n    if (sign === 1) ct.parity = CisTrans.PARITY.CIS;\n    else if (sign === -1) ct.parity = CisTrans.PARITY.TRANS;\n  });\n};\n\nfunction swap(arr, i1, i2) {\n  const tmp = arr[i1];\n  arr[i1] = arr[i2];\n  arr[i2] = tmp;\n}\n\nexport default CisTrans;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nfunction Dfs(mol, atomData, components, nReactants) {\n  this.molecule = mol;\n  this.atom_data = atomData;\n  this.components = components;\n  this.nComponentsInReactants = -1;\n  this.nReactants = nReactants;\n\n  this.vertices = new Array(this.molecule.atoms.size); // Minimum size\n  this.molecule.atoms.forEach((atom, aid) => {\n    this.vertices[aid] = new Dfs.VertexDesc();\n  }, this);\n\n  this.edges = new Array(this.molecule.bonds.size); // Minimum size\n  this.molecule.bonds.forEach((bond, bid) => {\n    this.edges[bid] = new Dfs.EdgeDesc();\n  }, this);\n\n  this.v_seq = [];\n}\n\nDfs.VertexDesc = function () {\n  this.dfs_state = 0; // 0 -- not on stack\n  // 1 -- on stack\n  // 2 -- removed from stack\n  this.parent_vertex = 0; // parent vertex in DFS tree\n  this.parent_edge = 0; // edge to parent vertex\n  this.branches = 0; // how many DFS branches go out from this vertex}\n};\n\nDfs.EdgeDesc = function () {\n  this.opening_cycles = 0; // how many cycles are\n  // (i) starting with this edge\n  // and (ii) ending in this edge's first vertex\n  this.closing_cycle = 0; // 1 if this edge closes a cycle\n};\n\nDfs.SeqElem = function (vIdx, parVertex, parEdge) {\n  this.idx = vIdx; // index of vertex in _graph\n  this.parent_vertex = parVertex; // parent vertex in DFS tree\n  this.parent_edge = parEdge; // edge to parent vertex\n};\n\nDfs.prototype.walk = function () {\n  // eslint-disable-line max-statements\n  const vStack = [];\n  let i, j;\n  let cid = 0;\n  let component = 0;\n\n  while (true) {\n    // eslint-disable-line no-constant-condition\n    if (vStack.length < 1) {\n      let selected = -1;\n\n      while (cid < this.components.length && selected === -1) {\n        selected = this.components[cid].find((aid) => {\n          if (this.vertices[aid].dfs_state === 0) {\n            selected = aid;\n            return true;\n          }\n          return false;\n        });\n        if (selected === null) {\n          selected = -1;\n          cid++;\n        }\n        if (cid === this.nReactants) this.nComponentsInReactants = component;\n      }\n      if (selected < -1) {\n        this.molecule.atoms.find((aid) => {\n          if (this.vertices[aid].dfs_state === 0) {\n            selected = aid;\n            return true;\n          }\n          return false;\n        });\n      }\n      if (selected === -1) break;\n      this.vertices[selected].parent_vertex = -1;\n      this.vertices[selected].parent_edge = -1;\n      vStack.push(selected);\n      component++;\n    }\n\n    const vIdx = vStack.pop();\n    const parentVertex = this.vertices[vIdx].parent_vertex;\n\n    let seqElem = new Dfs.SeqElem(\n      vIdx,\n      parentVertex,\n      this.vertices[vIdx].parent_edge,\n    );\n    this.v_seq.push(seqElem);\n\n    this.vertices[vIdx].dfs_state = 2;\n\n    const atomD = this.atom_data[vIdx];\n\n    for (i = 0; i < atomD.neighbours.length; i++) {\n      const neiIdx = atomD.neighbours[i].aid;\n      const edgeIdx = atomD.neighbours[i].bid;\n\n      if (neiIdx === parentVertex) continue; // eslint-disable-line no-continue\n\n      if (this.vertices[neiIdx].dfs_state === 2) {\n        this.edges[edgeIdx].closing_cycle = 1;\n\n        j = vIdx;\n\n        while (j !== -1 && this.vertices[j].parent_vertex !== neiIdx) {\n          j = this.vertices[j].parent_vertex;\n        }\n\n        if (j === -1) throw new Error('cycle unwind error');\n\n        this.edges[this.vertices[j].parent_edge].opening_cycles++;\n        this.vertices[vIdx].branches++;\n\n        seqElem = new Dfs.SeqElem(neiIdx, vIdx, edgeIdx);\n        this.v_seq.push(seqElem);\n      } else {\n        if (this.vertices[neiIdx].dfs_state === 1) {\n          j = vStack.indexOf(neiIdx);\n\n          if (j === -1) {\n            // eslint-disable-line max-depth\n            throw new Error('internal: removing vertex from stack');\n          }\n\n          vStack.splice(j, 1);\n\n          const parent = this.vertices[neiIdx].parent_vertex;\n\n          if (parent >= 0) {\n            // eslint-disable-line max-depth\n            this.vertices[parent].branches--;\n          }\n        }\n\n        this.vertices[vIdx].branches++;\n        this.vertices[neiIdx].parent_vertex = vIdx;\n        this.vertices[neiIdx].parent_edge = edgeIdx;\n        this.vertices[neiIdx].dfs_state = 1;\n        vStack.push(neiIdx);\n      }\n    }\n  }\n};\n\nDfs.prototype.edgeClosingCycle = function (eIdx) {\n  return this.edges[eIdx].closing_cycle !== 0;\n};\n\nDfs.prototype.numBranches = function (vIdx) {\n  return this.vertices[vIdx].branches;\n};\n\nDfs.prototype.numOpeningCycles = function (eIdx) {\n  return this.edges[eIdx].opening_cycles;\n};\n\nDfs.prototype.toString = function () {\n  let str = '';\n  this.v_seq.forEach((seqElem) => {\n    str += seqElem.idx + ' -> ';\n  });\n  str += '*';\n  return str;\n};\n\nexport default Dfs;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Bond, Pile, Pool, Vec2 } from 'domain/entities';\n\nfunction Stereocenters(mol, neighborsFunc, context) {\n  this.molecule = mol;\n  this.atoms = new Pool();\n  this.getNeighbors = neighborsFunc;\n  this.context = context;\n}\n\nStereocenters.prototype.each = function (func, context) {\n  this.atoms.forEach(func, context);\n};\n\nStereocenters.prototype.buildFromBonds = function (\n  /* const int *atom_types, const int *atom_groups, const int *bond_orientations, */ ignoreErrors,\n) {\n  const atoms = this.molecule.atoms;\n  const bonds = this.molecule.bonds;\n\n  /*\n\t\tthis is a set of atoms that are likely to belong to allene structures and\n\t\ttherefore should not be considered as potential stereocenters in the code below,\n\t\tas allenes cannot be encoded in the SMILES notation\n\t*/\n\n  const alleneMask = new Pile();\n  atoms.forEach((atom, aid) => {\n    const neiList = this.getNeighbors.call(this.context, aid);\n    if (neiList.length !== 2) return false;\n    const nei1 = neiList[0];\n    const nei2 = neiList[1];\n    // check atom labels\n    if (\n      [aid, nei1.aid, nei2.aid].findIndex(\n        (aid) => ['C', 'Si'].indexOf(atoms.get(aid).label) < 0,\n        this,\n      ) >= 0\n    ) {\n      return false;\n    }\n\n    // check adjacent bond types\n    if (\n      [nei1.bid, nei2.bid].findIndex(\n        (bid) => bonds.get(bid).type !== Bond.PATTERN.TYPE.DOUBLE,\n        this,\n      ) >= 0\n    ) {\n      return false;\n    }\n\n    // get the other neighbors of the two adjacent atoms except for the central atom\n    const nei1nei = this.getNeighbors\n      .call(this.context, nei1.aid)\n      .filter((nei) => nei.aid !== aid);\n    const nei2nei = this.getNeighbors\n      .call(this.context, nei2.aid)\n      .filter((nei) => nei.aid !== aid);\n    if (\n      nei1nei.length < 1 ||\n      nei1nei.length > 2 ||\n      nei2nei.length < 1 ||\n      nei2nei.length > 2\n    ) {\n      return false;\n    }\n\n    if (\n      nei1nei\n        .concat(nei2nei)\n        .findIndex(\n          (nei) => bonds.get(nei.bid).type !== Bond.PATTERN.TYPE.SINGLE,\n          this,\n        ) >= 0\n    ) {\n      return false;\n    }\n\n    if (\n      nei1nei\n        .concat(nei2nei)\n        .findIndex(\n          (nei) => bonds.get(nei.bid).stereo === Bond.PATTERN.STEREO.EITHER,\n          this,\n        ) >= 0\n    ) {\n      return false;\n    }\n    alleneMask.add(nei1.aid).add(nei2.aid);\n    return true;\n  });\n\n  if (alleneMask.size > 0) {\n    // TODO: add error handler call\n    // legacy message: This structure may contain allenes, which cannot be represented in the SMILES notation. Relevant stereo-information will be discarded.\n\n    atoms.forEach((atom, aid) => {\n      if (alleneMask.has(aid)) return;\n      /*\n      if (atom_types[atom_idx] == 0)\n         continue;\n         */\n      const neiList = this.getNeighbors.call(this.context, aid);\n      let stereocenter = false;\n\n      neiList.find(function (nei) {\n        const bond = this.molecule.bonds.get(nei.bid);\n\n        if (bond.type === Bond.PATTERN.TYPE.SINGLE && bond.begin === aid) {\n          if (\n            bond.stereo === Bond.PATTERN.STEREO.UP ||\n            bond.stereo === Bond.PATTERN.STEREO.DOWN\n          ) {\n            stereocenter = true;\n            return true;\n          }\n        }\n        return false;\n      }, this);\n\n      if (!stereocenter) return;\n\n      if (ignoreErrors) {\n        this.buildOneCenter(\n          aid /* , atom_groups[atom_idx], atom_types[atom_idx], bond_orientations */,\n        );\n      } else {\n        this.buildOneCenter(\n          aid /* , atom_groups[atom_idx], atom_types[atom_idx], bond_orientations */,\n        );\n      }\n    });\n  }\n};\n\nStereocenters.allowed_stereocenters = [\n  { elem: 'C', charge: 0, degree: 3, n_double_bonds: 0, implicit_degree: 4 },\n  { elem: 'C', charge: 0, degree: 4, n_double_bonds: 0, implicit_degree: 4 },\n  { elem: 'Si', charge: 0, degree: 3, n_double_bonds: 0, implicit_degree: 4 },\n  { elem: 'Si', charge: 0, degree: 4, n_double_bonds: 0, implicit_degree: 4 },\n  { elem: 'N', charge: 1, degree: 3, n_double_bonds: 0, implicit_degree: 4 },\n  { elem: 'N', charge: 1, degree: 4, n_double_bonds: 0, implicit_degree: 4 },\n  { elem: 'N', charge: 0, degree: 3, n_double_bonds: 0, implicit_degree: 3 },\n  { elem: 'S', charge: 0, degree: 4, n_double_bonds: 2, implicit_degree: 4 },\n  { elem: 'S', charge: 1, degree: 3, n_double_bonds: 0, implicit_degree: 3 },\n  { elem: 'S', charge: 0, degree: 3, n_double_bonds: 1, implicit_degree: 3 },\n  { elem: 'P', charge: 0, degree: 3, n_double_bonds: 0, implicit_degree: 3 },\n  { elem: 'P', charge: 1, degree: 4, n_double_bonds: 0, implicit_degree: 4 },\n  { elem: 'P', charge: 0, degree: 4, n_double_bonds: 1, implicit_degree: 4 },\n];\n\nStereocenters.prototype.buildOneCenter = function (\n  atomIdx /* , int group, int type, const int *bond_orientations */,\n) {\n  // eslint-disable-line max-statements\n  const atom = this.molecule.atoms.get(atomIdx);\n\n  const neiList = this.getNeighbors.call(this.context, atomIdx);\n  const degree = neiList.length;\n  let implicitDegree = -1;\n\n  const stereocenter = {\n    group: 0, // = group;\n    type: 0, // = type;\n    pyramid: [],\n  };\n\n  const edgeIds = [];\n\n  let lastAtomDir = 0;\n  let nDoubleBonds = 0;\n\n  stereocenter.pyramid[0] = -1;\n  stereocenter.pyramid[1] = -1;\n  stereocenter.pyramid[2] = -1;\n  stereocenter.pyramid[3] = -1;\n\n  let nPureHydrogens = 0;\n\n  if (degree > 4) {\n    throw new Error('stereocenter with %d bonds are not supported' + degree);\n  }\n\n  neiList.forEach((nei, neiIdx) => {\n    const neiAtom = this.molecule.atoms.get(nei.aid);\n    const bond = this.molecule.bonds.get(nei.bid);\n    edgeIds[neiIdx] = {\n      edge_idx: nei.bid,\n      nei_idx: nei.aid,\n      rank: nei.aid,\n      vec: Vec2.diff(neiAtom.pp, atom.pp).yComplement(),\n    };\n\n    if (neiAtom.pureHydrogen()) {\n      nPureHydrogens++;\n      edgeIds[neiIdx].rank = 10000;\n    } else if (neiAtom.label === 'H') {\n      edgeIds[neiIdx].rank = 5000;\n    }\n\n    if (!edgeIds[neiIdx].vec.normalize()) throw new Error('zero bond length');\n\n    if (bond.type === Bond.PATTERN.TYPE.TRIPLE) {\n      throw new Error('non-single bonds not allowed near stereocenter');\n    } else if (bond.type === Bond.PATTERN.TYPE.AROMATIC) {\n      throw new Error('aromatic bonds not allowed near stereocenter');\n    } else if (bond.type === Bond.PATTERN.TYPE.DOUBLE) nDoubleBonds++;\n  });\n\n  Stereocenters.allowed_stereocenters.find((as) => {\n    if (\n      as.elem === atom.label &&\n      as.charge === atom.charge &&\n      as.degree === degree &&\n      as.n_double_bonds === nDoubleBonds\n    ) {\n      implicitDegree = as.implicit_degree;\n      return true;\n    }\n    return false;\n  });\n\n  if (implicitDegree === -1) {\n    throw new Error(\n      'unknown stereocenter configuration: ' +\n        atom.label +\n        ', charge ' +\n        atom.charge +\n        ', ' +\n        degree +\n        ' bonds (' +\n        nDoubleBonds +\n        ' double)',\n    );\n  }\n\n  if (degree === 4 && nPureHydrogens > 1) {\n    throw new Error(nPureHydrogens + ' hydrogens near stereocenter');\n  }\n\n  if (degree === 3 && implicitDegree === 4 && nPureHydrogens > 0) {\n    throw new Error(\n      'have hydrogen(s) besides implicit hydrogen near stereocenter',\n    );\n  }\n\n  if (degree === 4) {\n    // sort by neighbor atom index (ascending)\n    if (edgeIds[0].rank > edgeIds[1].rank) swap(edgeIds, 0, 1);\n    if (edgeIds[1].rank > edgeIds[2].rank) swap(edgeIds, 1, 2);\n    if (edgeIds[2].rank > edgeIds[3].rank) swap(edgeIds, 2, 3);\n    if (edgeIds[1].rank > edgeIds[2].rank) swap(edgeIds, 1, 2);\n    if (edgeIds[0].rank > edgeIds[1].rank) swap(edgeIds, 0, 1);\n    if (edgeIds[1].rank > edgeIds[2].rank) swap(edgeIds, 1, 2);\n\n    var main1 = -1;\n    let main2 = -1;\n    var side1 = -1;\n    var side2 = -1;\n    var mainDir = 0;\n\n    for (var neiIdx = 0; neiIdx < 4; neiIdx++) {\n      const stereo = this.getBondStereo(atomIdx, edgeIds[neiIdx].edge_idx);\n\n      if (\n        stereo === Bond.PATTERN.STEREO.UP ||\n        stereo === Bond.PATTERN.STEREO.DOWN\n      ) {\n        main1 = neiIdx;\n        mainDir = stereo;\n        break;\n      }\n    }\n\n    if (main1 === -1) {\n      throw new Error('none of 4 bonds going from stereocenter is stereobond');\n    }\n\n    let xyz1, xyz2;\n\n    // find main2 as opposite to main1\n    if (main2 === -1) {\n      xyz1 = Stereocenters.xyzzy(\n        edgeIds[main1].vec,\n        edgeIds[(main1 + 1) % 4].vec,\n        edgeIds[(main1 + 2) % 4].vec,\n      );\n      xyz2 = Stereocenters.xyzzy(\n        edgeIds[main1].vec,\n        edgeIds[(main1 + 1) % 4].vec,\n        edgeIds[(main1 + 3) % 4].vec,\n      );\n\n      if (xyz1 + xyz2 === 3 || xyz1 + xyz2 === 12) {\n        main2 = (main1 + 1) % 4;\n        side1 = (main1 + 2) % 4;\n        side2 = (main1 + 3) % 4;\n      }\n    }\n    if (main2 === -1) {\n      xyz1 = Stereocenters.xyzzy(\n        edgeIds[main1].vec,\n        edgeIds[(main1 + 2) % 4].vec,\n        edgeIds[(main1 + 1) % 4].vec,\n      );\n      xyz2 = Stereocenters.xyzzy(\n        edgeIds[main1].vec,\n        edgeIds[(main1 + 2) % 4].vec,\n        edgeIds[(main1 + 3) % 4].vec,\n      );\n\n      if (xyz1 + xyz2 === 3 || xyz1 + xyz2 === 12) {\n        main2 = (main1 + 2) % 4;\n        side1 = (main1 + 1) % 4;\n        side2 = (main1 + 3) % 4;\n      }\n    }\n    if (main2 === -1) {\n      xyz1 = Stereocenters.xyzzy(\n        edgeIds[main1].vec,\n        edgeIds[(main1 + 3) % 4].vec,\n        edgeIds[(main1 + 1) % 4].vec,\n      );\n      xyz2 = Stereocenters.xyzzy(\n        edgeIds[main1].vec,\n        edgeIds[(main1 + 3) % 4].vec,\n        edgeIds[(main1 + 2) % 4].vec,\n      );\n\n      if (xyz1 + xyz2 === 3 || xyz1 + xyz2 === 12) {\n        main2 = (main1 + 3) % 4;\n        side1 = (main1 + 2) % 4;\n        side2 = (main1 + 1) % 4;\n      }\n    }\n\n    if (main2 === -1) {\n      throw new Error('internal error: can not find opposite bond');\n    }\n\n    if (\n      mainDir === Bond.PATTERN.STEREO.UP &&\n      this.getBondStereo(atomIdx, edgeIds[main2].edge_idx) ===\n        Bond.PATTERN.STEREO.DOWN\n    ) {\n      throw new Error('stereo types of the opposite bonds mismatch');\n    }\n    if (\n      mainDir === Bond.PATTERN.STEREO.DOWN &&\n      this.getBondStereo(atomIdx, edgeIds[main2].edge_idx) ===\n        Bond.PATTERN.STEREO.UP\n    ) {\n      throw new Error('stereo types of the opposite bonds mismatch');\n    }\n\n    if (mainDir === this.getBondStereo(atomIdx, edgeIds[side1].edge_idx)) {\n      throw new Error('stereo types of non-opposite bonds match');\n    }\n    if (mainDir === this.getBondStereo(atomIdx, edgeIds[side2].edge_idx)) {\n      throw new Error('stereo types of non-opposite bonds match');\n    }\n\n    if (main1 === 3 || main2 === 3) lastAtomDir = mainDir;\n    else {\n      lastAtomDir =\n        mainDir === Bond.PATTERN.STEREO.UP\n          ? Bond.PATTERN.STEREO.DOWN\n          : Bond.PATTERN.STEREO.UP;\n    }\n\n    const sign = Stereocenters.sign(\n      edgeIds[0].vec,\n      edgeIds[1].vec,\n      edgeIds[2].vec,\n    );\n\n    if (\n      (lastAtomDir === Bond.PATTERN.STEREO.UP && sign > 0) ||\n      (lastAtomDir === Bond.PATTERN.STEREO.DOWN && sign < 0)\n    ) {\n      stereocenter.pyramid[0] = edgeIds[0].nei_idx;\n      stereocenter.pyramid[1] = edgeIds[1].nei_idx;\n      stereocenter.pyramid[2] = edgeIds[2].nei_idx;\n    } else {\n      stereocenter.pyramid[0] = edgeIds[0].nei_idx;\n      stereocenter.pyramid[1] = edgeIds[2].nei_idx;\n      stereocenter.pyramid[2] = edgeIds[1].nei_idx;\n    }\n\n    stereocenter.pyramid[3] = edgeIds[3].nei_idx;\n  } else if (degree === 3) {\n    // sort by neighbor atom index (ascending)\n    if (edgeIds[0].rank > edgeIds[1].rank) swap(edgeIds, 0, 1);\n    if (edgeIds[1].rank > edgeIds[2].rank) swap(edgeIds, 1, 2);\n    if (edgeIds[0].rank > edgeIds[1].rank) swap(edgeIds, 0, 1);\n\n    const stereo0 = this.getBondStereo(atomIdx, edgeIds[0].edge_idx);\n    const stereo1 = this.getBondStereo(atomIdx, edgeIds[1].edge_idx);\n    const stereo2 = this.getBondStereo(atomIdx, edgeIds[2].edge_idx);\n\n    let nUp = 0;\n    let nDown = 0;\n\n    nUp += stereo0 === Bond.PATTERN.STEREO.UP ? 1 : 0;\n    nUp += stereo1 === Bond.PATTERN.STEREO.UP ? 1 : 0;\n    nUp += stereo2 === Bond.PATTERN.STEREO.UP ? 1 : 0;\n\n    nDown += stereo0 === Bond.PATTERN.STEREO.DOWN ? 1 : 0;\n    nDown += stereo1 === Bond.PATTERN.STEREO.DOWN ? 1 : 0;\n    nDown += stereo2 === Bond.PATTERN.STEREO.DOWN ? 1 : 0;\n\n    if (implicitDegree === 4) {\n      // have implicit hydrogen\n      if (nUp === 3) throw new Error('all 3 bonds up near stereoatom');\n      if (nDown === 3) throw new Error('all 3 bonds down near stereoatom');\n\n      if (nUp === 0 && nDown === 0) {\n        throw new Error('no up/down bonds near stereoatom -- indefinite case');\n      }\n      if (nUp === 1 && nDown === 1) {\n        throw new Error('one bond up, one bond down -- indefinite case');\n      }\n\n      mainDir = 0;\n\n      if (nUp === 2) {\n        lastAtomDir = Bond.PATTERN.STEREO.DOWN;\n      } else if (nDown === 2) {\n        lastAtomDir = Bond.PATTERN.STEREO.UP;\n      } else {\n        main1 = -1;\n        side1 = -1;\n        side2 = -1;\n\n        for (neiIdx = 0; neiIdx < 3; neiIdx++) {\n          const dir = this.getBondStereo(atomIdx, edgeIds[neiIdx].edge_idx);\n\n          if (\n            dir === Bond.PATTERN.STEREO.UP ||\n            dir === Bond.PATTERN.STEREO.DOWN\n          ) {\n            // eslint-disable-line max-depth\n            main1 = neiIdx;\n            mainDir = dir;\n            side1 = (neiIdx + 1) % 3;\n            side2 = (neiIdx + 2) % 3;\n            break;\n          }\n        }\n\n        if (main1 === -1) {\n          throw new Error('internal error: can not find up or down bond');\n        }\n\n        const xyz = Stereocenters.xyzzy(\n          edgeIds[side1].vec,\n          edgeIds[side2].vec,\n          edgeIds[main1].vec,\n        );\n\n        if (xyz === 3 || xyz === 4) {\n          throw new Error('degenerate case for 3 bonds near stereoatom');\n        }\n\n        if (xyz === 1) lastAtomDir = mainDir;\n        else {\n          lastAtomDir =\n            mainDir === Bond.PATTERN.STEREO.UP\n              ? Bond.PATTERN.STEREO.DOWN\n              : Bond.PATTERN.STEREO.UP;\n        }\n      }\n\n      const sign = Stereocenters.sign(\n        edgeIds[0].vec,\n        edgeIds[1].vec,\n        edgeIds[2].vec,\n      );\n\n      if (\n        (lastAtomDir === Bond.PATTERN.STEREO.UP && sign > 0) ||\n        (lastAtomDir === Bond.PATTERN.STEREO.DOWN && sign < 0)\n      ) {\n        stereocenter.pyramid[0] = edgeIds[0].nei_idx;\n        stereocenter.pyramid[1] = edgeIds[1].nei_idx;\n        stereocenter.pyramid[2] = edgeIds[2].nei_idx;\n      } else {\n        stereocenter.pyramid[0] = edgeIds[0].nei_idx;\n        stereocenter.pyramid[1] = edgeIds[2].nei_idx;\n        stereocenter.pyramid[2] = edgeIds[1].nei_idx;\n      }\n\n      stereocenter.pyramid[3] = -1;\n    } else {\n      // 3-connected P, N or S; no implicit hydrogens\n      let dir;\n\n      if (nDown > 0 && nUp > 0) {\n        throw new Error('one bond up, one bond down -- indefinite case');\n      } else if (nDown === 0 && nUp === 0) {\n        throw new Error('no up-down bonds attached to stereocenter');\n      } else if (nUp > 0) dir = 1;\n      else dir = -1;\n\n      if (\n        Stereocenters.xyzzy(edgeIds[0].vec, edgeIds[1].vec, edgeIds[2].vec) ===\n          1 ||\n        Stereocenters.xyzzy(edgeIds[0].vec, edgeIds[2].vec, edgeIds[1].vec) ===\n          1 ||\n        Stereocenters.xyzzy(edgeIds[2].vec, edgeIds[1].vec, edgeIds[0].vec) ===\n          1\n      ) {\n        // all bonds belong to the same half-plane\n        dir = -dir;\n      }\n\n      const sign = Stereocenters.sign(\n        edgeIds[0].vec,\n        edgeIds[1].vec,\n        edgeIds[2].vec,\n      );\n\n      if (sign === dir) {\n        stereocenter.pyramid[0] = edgeIds[0].nei_idx;\n        stereocenter.pyramid[1] = edgeIds[2].nei_idx;\n        stereocenter.pyramid[2] = edgeIds[1].nei_idx;\n      } else {\n        stereocenter.pyramid[0] = edgeIds[0].nei_idx;\n        stereocenter.pyramid[1] = edgeIds[1].nei_idx;\n        stereocenter.pyramid[2] = edgeIds[2].nei_idx;\n      }\n      stereocenter.pyramid[3] = -1;\n    }\n  }\n  this.atoms.set(atomIdx, stereocenter);\n};\n\nStereocenters.prototype.getBondStereo = function (centerIdx, edgeIdx) {\n  const bond = this.molecule.bonds.get(edgeIdx);\n\n  if (centerIdx !== bond.begin) {\n    // TODO: check this\n    return 0;\n  }\n\n  return bond.stereo;\n};\n\n// 1 -- in the smaller angle, 2 -- in the bigger angle,\n// 4 -- in the 'positive' straight angle, 8 -- in the 'negative' straight angle\nStereocenters.xyzzy = function (v1, v2, u) {\n  const eps = 0.001;\n\n  const sine1 = Vec2.cross(v1, v2);\n  const cosine1 = Vec2.dot(v1, v2);\n\n  const sine2 = Vec2.cross(v1, u);\n  const cosine2 = Vec2.dot(v1, u);\n\n  if (Math.abs(sine1) < eps) {\n    if (Math.abs(sine2) < eps) {\n      throw new Error('degenerate case -- bonds overlap');\n    }\n\n    return sine2 > 0 ? 4 : 8;\n  }\n\n  if (sine1 * sine2 < -eps * eps) return 2;\n\n  if (cosine2 < cosine1) return 2;\n\n  return 1;\n};\n\nStereocenters.sign = function (v1, v2, v3) {\n  const res = (v1.x - v3.x) * (v2.y - v3.y) - (v1.y - v3.y) * (v2.x - v3.x); // eslint-disable-line no-mixed-operators\n  const eps = 0.001;\n\n  if (res > eps) return 1;\n  if (res < -eps) return -1;\n\n  throw new Error('degenerate triangle');\n};\n\nStereocenters.isPyramidMappingRigid = function (mapping) {\n  const arr = mapping.slice();\n  let rigid = true;\n\n  if (arr[0] > arr[1]) {\n    swap(arr, 0, 1);\n    rigid = !rigid;\n  }\n  if (arr[1] > arr[2]) {\n    swap(arr, 1, 2);\n    rigid = !rigid;\n  }\n  if (arr[2] > arr[3]) {\n    swap(arr, 2, 3);\n    rigid = !rigid;\n  }\n  if (arr[1] > arr[2]) {\n    swap(arr, 1, 2);\n    rigid = !rigid;\n  }\n  if (arr[0] > arr[1]) {\n    swap(arr, 0, 1);\n    rigid = !rigid;\n  }\n  if (arr[1] > arr[2]) {\n    swap(arr, 1, 2);\n    rigid = !rigid;\n  }\n\n  return rigid;\n};\n\nfunction swap(arr, i1, i2) {\n  const tmp = arr[i1];\n  arr[i1] = arr[i2];\n  arr[i2] = tmp;\n}\n\nexport default Stereocenters;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Atom, Bond, Pile, SGroup } from 'domain/entities';\nimport { KetcherLogger } from 'utilities';\n\nimport CisTrans from './cis_trans';\nimport Dfs from './dfs';\nimport Stereocenters from './stereocenters';\n\nexport function Smiles() {\n  this.smiles = '';\n  this.writtenAtoms = [];\n  this.writtenComponents = 0;\n\n  this.ignoreErrors = false;\n}\n\nSmiles._Atom = function (hCount) {\n  // eslint-disable-line no-underscore-dangle\n  this.neighbours = []; // Array of integer pairs {a, b}\n  this.aromatic = false; // has aromatic bond\n  this.lowercase = false; // aromatic and has to be written lowercase\n  this.chirality = 0; // 0 means no chirality, 1 means CCW pyramid, 2 means CW pyramid\n  this.branch_cnt = 0; // runs from 0 to (branches - 1)\n  this.paren_written = false;\n  this.h_count = hCount;\n  this.parent = -1;\n};\n\n// NB: only loops of length up to 6 are included here\nSmiles.prototype.isBondInRing = function (bid) {\n  return this.inLoop[bid];\n};\n\nSmiles.prototype.saveMolecule = function (struct, ignoreErrors) {\n  // eslint-disable-line max-statements\n  let i, j, k;\n\n  if (!ignoreErrors) this.ignoreErrors = ignoreErrors;\n\n  // [RB]: KETCHER-498 (Incorrect smile-string for multiple Sgroup)\n  // TODO the fix is temporary, still need to implement error handling/reporting\n  // BEGIN\n  struct = struct.clone(\n    undefined,\n    undefined,\n    !struct.hasRxnArrow(), // make it drop multiple reactions\n    undefined,\n    undefined,\n    undefined,\n  );\n  struct.initHalfBonds();\n  struct.initNeighbors();\n  struct.sortNeighbors();\n  struct.setImplicitHydrogen();\n  struct.sgroups.forEach((sg) => {\n    if (sg.type === 'MUL') {\n      try {\n        SGroup.prepareMulForSaving(sg, struct);\n      } catch (error) {\n        KetcherLogger.error('smiles.js::Smiles.prototype.saveMolecule', error);\n        throw Error('Bad s-group (' + error.message + ')');\n      }\n    }\n    // 'SMILES data format doesn\\'t support s-groups'\n  });\n  // END\n\n  this.atoms = new Array(struct.atoms.size);\n\n  struct.atoms.forEach((atom, aid) => {\n    this.atoms[aid] = new Smiles._Atom(atom.implicitH); // eslint-disable-line no-underscore-dangle\n  });\n\n  // From the SMILES specification:\n  // Please note that only atoms on the following list\n  // can be considered aromatic: C, N, O, P, S, As, Se, and * (wildcard).\n  const allowedLowercase = ['B', 'C', 'N', 'O', 'P', 'S', 'Se', 'As'];\n\n  // Detect atoms that have aromatic bonds and count neighbours\n  struct.bonds.forEach((bond, bid) => {\n    if (bond.type === Bond.PATTERN.TYPE.AROMATIC) {\n      this.atoms[bond.begin].aromatic = true;\n      if (allowedLowercase.indexOf(struct.atoms.get(bond.begin).label) !== -1) {\n        this.atoms[bond.begin].lowercase = true;\n      }\n      this.atoms[bond.end].aromatic = true;\n      if (allowedLowercase.indexOf(struct.atoms.get(bond.end).label) !== -1) {\n        this.atoms[bond.end].lowercase = true;\n      }\n    }\n    this.atoms[bond.begin].neighbours.push({ aid: bond.end, bid });\n    this.atoms[bond.end].neighbours.push({ aid: bond.begin, bid });\n  });\n\n  this.inLoop = (function () {\n    struct.prepareLoopStructure();\n    let bondsInLoops = new Pile();\n    struct.loops.forEach((loop) => {\n      if (loop.hbs.length <= 6) {\n        const hbids = loop.hbs.map((hbid) => struct.halfBonds.get(hbid).bid);\n        bondsInLoops = bondsInLoops.union(new Pile(hbids));\n      }\n    });\n    const inLoop = {};\n    bondsInLoops.forEach((bid) => {\n      inLoop[bid] = 1;\n    });\n    return inLoop;\n  })();\n\n  this.touchedCistransbonds = 0;\n  this.markCisTrans(struct);\n\n  const components = struct.getComponents();\n  const componentsAll = components.reactants.concat(components.products);\n\n  const walk = new Dfs(\n    struct,\n    this.atoms,\n    componentsAll,\n    components.reactants.length,\n  );\n\n  walk.walk();\n  this.atoms.forEach((atom) => {\n    atom.neighbours = [];\n  });\n\n  // fill up neighbor lists for the stereocenters calculation\n  for (i = 0; i < walk.v_seq.length; i++) {\n    var seqEl = walk.v_seq[i];\n    var vIdx = seqEl.idx;\n    var eIdx = seqEl.parent_edge;\n    var vPrevIdx = seqEl.parent_vertex;\n\n    if (eIdx >= 0) {\n      const atom = this.atoms[vIdx];\n\n      var openingCycles = walk.numOpeningCycles(eIdx);\n\n      for (j = 0; j < openingCycles; j++) {\n        this.atoms[vPrevIdx].neighbours.push({ aid: -1, bid: -1 });\n      }\n\n      if (walk.edgeClosingCycle(eIdx)) {\n        for (k = 0; k < atom.neighbours.length; k++) {\n          if (atom.neighbours[k].aid === -1) {\n            // eslint-disable-line max-depth\n            atom.neighbours[k].aid = vPrevIdx;\n            atom.neighbours[k].bid = eIdx;\n            break;\n          }\n        }\n        if (k === atom.neighbours.length) {\n          throw new Error('internal: can not put closing bond to its place');\n        }\n      } else {\n        atom.neighbours.push({ aid: vPrevIdx, bid: eIdx });\n        atom.parent = vPrevIdx;\n      }\n      this.atoms[vPrevIdx].neighbours.push({ aid: vIdx, bid: eIdx });\n    }\n  }\n\n  try {\n    // detect chiral configurations\n    const stereocenters = new Stereocenters(\n      struct,\n      function (idx) {\n        return this.atoms[idx].neighbours;\n      },\n      this,\n    );\n    stereocenters.buildFromBonds(this.ignoreErrors);\n\n    stereocenters.each((sc, atomIdx) => {\n      // eslint-disable-line max-statements\n      // if (sc.type < MoleculeStereocenters::ATOM_AND)\n      //    continue;\n\n      let implicitHIdx = -1;\n\n      if (sc.pyramid[3] === -1) implicitHIdx = 3;\n      /*\n\t\t\telse for (j = 0; j < 4; j++)\n\t\t\t\tif (ignored_vertices[pyramid[j]])\n\t\t\t\t{\n\t\t\t\t\timplicit_h_idx = j;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t*/\n\n      const pyramidMapping = [];\n      let counter = 0;\n\n      const atom = this.atoms[atomIdx];\n\n      if (atom.parent !== -1) {\n        for (k = 0; k < 4; k++) {\n          if (sc.pyramid[k] === atom.parent) {\n            pyramidMapping[counter++] = k;\n            break;\n          }\n        }\n      }\n\n      if (implicitHIdx !== -1) pyramidMapping[counter++] = implicitHIdx;\n\n      for (j = 0; j !== atom.neighbours.length; j++) {\n        if (atom.neighbours[j].aid === atom.parent) continue; // eslint-disable-line no-continue\n\n        for (k = 0; k < 4; k++) {\n          if (atom.neighbours[j].aid === sc.pyramid[k]) {\n            if (counter >= 4) throw new Error('internal: pyramid overflow');\n            pyramidMapping[counter++] = k;\n            break;\n          }\n        }\n      }\n\n      if (counter === 4) {\n        // move the 'from' atom to the end\n        counter = pyramidMapping[0];\n        pyramidMapping[0] = pyramidMapping[1];\n        pyramidMapping[1] = pyramidMapping[2];\n        pyramidMapping[2] = pyramidMapping[3];\n        pyramidMapping[3] = counter;\n      } else if (counter !== 3) {\n        throw new Error('cannot calculate chirality');\n      }\n\n      if (Stereocenters.isPyramidMappingRigid(pyramidMapping)) {\n        this.atoms[atomIdx].chirality = 1;\n      } else this.atoms[atomIdx].chirality = 2;\n    });\n  } catch (e) {\n    KetcherLogger.error('smiles.js::Smiles.prototype.saveMolecule', e);\n    // TODO: add error handler call\n  }\n\n  // write the SMILES itself\n\n  // cycle_numbers[i] == -1 means that the number is available\n  // cycle_numbers[i] == n means that the number is used by vertex n\n  const cycleNumbers = [];\n\n  cycleNumbers.push(0); // never used\n\n  let firstComponent = true;\n\n  for (i = 0; i < walk.v_seq.length; i++) {\n    seqEl = walk.v_seq[i];\n    vIdx = seqEl.idx;\n    eIdx = seqEl.parent_edge;\n    vPrevIdx = seqEl.parent_vertex;\n    let writeAtom = true;\n\n    if (vPrevIdx >= 0) {\n      if (walk.numBranches(vPrevIdx) > 1) {\n        if (\n          this.atoms[vPrevIdx].branch_cnt > 0 &&\n          this.atoms[vPrevIdx].paren_written\n        ) {\n          this.smiles += ')';\n        }\n      }\n\n      openingCycles = walk.numOpeningCycles(eIdx);\n\n      for (j = 0; j < openingCycles; j++) {\n        for (k = 1; k < cycleNumbers.length; k++) {\n          if (cycleNumbers[k] === -1) {\n            // eslint-disable-line max-depth\n            break;\n          }\n        }\n        if (k === cycleNumbers.length) cycleNumbers.push(vPrevIdx);\n        else cycleNumbers[k] = vPrevIdx;\n\n        this.writeCycleNumber(k);\n      }\n\n      if (vPrevIdx >= 0) {\n        const branches = walk.numBranches(vPrevIdx);\n\n        if (branches > 1 && this.atoms[vPrevIdx].branch_cnt < branches - 1) {\n          if (walk.edgeClosingCycle(eIdx)) {\n            // eslint-disable-line max-depth\n            this.atoms[vPrevIdx].paren_written = false;\n          } else {\n            this.smiles += '(';\n            this.atoms[vPrevIdx].paren_written = true;\n          }\n        }\n\n        this.atoms[vPrevIdx].branch_cnt++;\n\n        if (this.atoms[vPrevIdx].branch_cnt > branches) {\n          throw new Error('unexpected branch');\n        }\n      }\n\n      const bond = struct.bonds.get(eIdx);\n\n      let dir = 0;\n\n      if (bond.type === Bond.PATTERN.TYPE.SINGLE) {\n        dir = this.calcBondDirection(struct, eIdx, vPrevIdx);\n      }\n\n      if (\n        (dir === 1 && vIdx === bond.end) ||\n        (dir === 2 && vIdx === bond.begin)\n      ) {\n        this.smiles += '/';\n      } else if (\n        (dir === 2 && vIdx === bond.end) ||\n        (dir === 1 && vIdx === bond.begin)\n      ) {\n        this.smiles += '\\\\';\n      } else if (bond.type === Bond.PATTERN.TYPE.ANY) {\n        this.smiles += '~';\n      } else if (bond.type === Bond.PATTERN.TYPE.DOUBLE) {\n        this.smiles += '=';\n      } else if (bond.type === Bond.PATTERN.TYPE.TRIPLE) {\n        this.smiles += '#';\n      } else if (bond.type === Bond.PATTERN.TYPE.SINGLE_OR_AROMATIC) {\n        this.smiles += '-,:';\n      } else if (bond.type === Bond.PATTERN.TYPE.DOUBLE_OR_AROMATIC) {\n        this.smiles += '=,:';\n      } else if (bond.type === Bond.PATTERN.TYPE.SINGLE_OR_DOUBLE) {\n        this.smiles += '-,=';\n      } else if (\n        bond.type === Bond.PATTERN.TYPE.AROMATIC &&\n        (!this.atoms[bond.begin].lowercase ||\n          !this.atoms[bond.end].lowercase ||\n          !this.isBondInRing(eIdx))\n      ) {\n        this.smiles += ':';\n      }\n      // TODO: Check if this : is needed\n      else if (\n        bond.type === Bond.PATTERN.TYPE.SINGLE &&\n        this.atoms[bond.begin].aromatic &&\n        this.atoms[bond.end].aromatic\n      ) {\n        this.smiles += '-';\n      }\n\n      if (walk.edgeClosingCycle(eIdx)) {\n        for (j = 1; j < cycleNumbers.length; j++) {\n          if (cycleNumbers[j] === vIdx) break;\n        }\n\n        if (j === cycleNumbers.length)\n          throw new Error('cycle number not found');\n\n        this.writeCycleNumber(j);\n\n        cycleNumbers[j] = -1;\n        writeAtom = false;\n      }\n    } else {\n      if (!firstComponent) {\n        this.smiles +=\n          this.writtenComponents === walk.nComponentsInReactants &&\n          walk.nReactants !== 0\n            ? '>>'\n            : '.'; // when walk.nReactants === 0 - not reaction\n      }\n      firstComponent = false;\n      this.writtenComponents++;\n    }\n    if (writeAtom) {\n      this.writeAtom(\n        struct,\n        vIdx,\n        this.atoms[vIdx].aromatic,\n        this.atoms[vIdx].lowercase,\n        this.atoms[vIdx].chirality,\n      );\n      this.writtenAtoms.push(seqEl.idx);\n    }\n  }\n\n  this.comma = false;\n\n  // this._writeStereogroups(mol, atoms);\n  this.writeRadicals(struct);\n  // this._writePseudoAtoms(mol);\n  // this._writeHighlighting();\n\n  if (this.comma) this.smiles += '|';\n\n  return this.smiles;\n};\n\nSmiles.prototype.writeCycleNumber = function (n) {\n  if (n > 0 && n < 10) this.smiles += n;\n  else if (n >= 10 && n < 100) this.smiles += '%' + n;\n  else if (n >= 100 && n < 1000) this.smiles += '%%' + n;\n  else throw new Error('bad cycle number: ' + n);\n};\n\nSmiles.prototype.writeAtom = function (\n  mol,\n  idx,\n  aromatic,\n  lowercase,\n  chirality,\n) {\n  // eslint-disable-line max-params, max-statements\n  const atom = mol.atoms.get(idx);\n  let needBrackets = false;\n  let hydro = -1;\n  let aam = 0;\n\n  /*\n\tif (mol.haveQueryAtoms())\n\t{\n\t  query_atom = &mol.getQueryAtom(idx);\n\n\t  if (query_atom->type == QUERY_ATOM_RGROUP)\n\t  {\n\t\t if (mol.getRGroups()->isRGroupAtom(idx))\n\t\t {\n\t\t\tconst Array<int> &rg = mol.getRGroups()->getSiteRGroups(idx);\n\n\t\t\tif (rg.length != 1)\n\t\t\t   throw Error(\"rgroup count %d\", rg.length);\n\n\t\t\t_output.printf(\"[&%d]\", rg[0] + 1);\n\t\t }\n\t\t else\n\t\t\t_output.printf(\"[&%d]\", 1);\n\n\t\t return;\n\t  }\n\t}\n\t*/\n\n  if (atom.label === 'A') {\n    this.smiles += '*';\n    return;\n  }\n\n  if (atom.label === 'R' || atom.label === 'R#') {\n    this.smiles += '[*]';\n    return;\n  }\n\n  // KETCHER-598 (Ketcher does not save AAM into reaction SMILES)\n  // BEGIN\n  //    if (this.atom_atom_mapping)\n  //        aam = atom_atom_mapping[idx];\n  aam = atom.aam;\n  // END\n\n  if (\n    atom.label !== 'C' &&\n    atom.label !== 'P' &&\n    atom.label !== 'N' &&\n    atom.label !== 'S' &&\n    atom.label !== 'O' &&\n    atom.label !== 'Cl' &&\n    atom.label !== 'F' &&\n    atom.label !== 'Br' &&\n    atom.label !== 'B' &&\n    atom.label !== 'I'\n  ) {\n    needBrackets = true;\n  }\n\n  if (\n    atom.explicitValence >= 0 ||\n    atom.radical !== 0 ||\n    chirality > 0 ||\n    (aromatic && atom.label !== 'C' && atom.label !== 'O') ||\n    (aromatic &&\n      atom.label === 'C' &&\n      this.atoms[idx].neighbours.length < 3 &&\n      this.atoms[idx].h_count === 0)\n  ) {\n    hydro = this.atoms[idx].h_count;\n  }\n\n  let label = atom.label;\n  if (atom.atomList && !atom.atomList.notList) {\n    label = atom.atomList.label();\n    needBrackets = false; // atom list label already has brackets\n  } else if (atom.isPseudo() || (atom.atomList && atom.atomList.notList)) {\n    label = '*';\n    needBrackets = false;\n  } else if (\n    chirality ||\n    (atom.charge !== 0 && atom.charge !== null) ||\n    atom.isotope > 0 ||\n    hydro >= 0 ||\n    aam > 0\n  ) {\n    needBrackets = true;\n  }\n\n  if (needBrackets) {\n    if (hydro === -1) hydro = this.atoms[idx].h_count;\n    this.smiles += '[';\n  }\n\n  if (atom.isotope > 0) this.smiles += atom.isotope;\n\n  if (lowercase) this.smiles += label.toLowerCase();\n  else this.smiles += label;\n\n  if (chirality > 0) {\n    if (chirality === 1) this.smiles += '@';\n    // chirality == 2\n    else this.smiles += '@@';\n\n    if (atom.implicitH > 1) {\n      throw new Error(atom.implicitH + ' implicit H near stereocenter');\n    }\n  }\n\n  if (atom.label !== 'H') {\n    if (hydro > 1 || (hydro === 0 && !needBrackets)) this.smiles += 'H' + hydro;\n    else if (hydro === 1) this.smiles += 'H';\n  }\n\n  if (atom.charge > 1) this.smiles += '+' + atom.charge;\n  else if (atom.charge < -1) this.smiles += atom.charge;\n  else if (atom.charge === 1) this.smiles += '+';\n  else if (atom.charge === -1) this.smiles += '-';\n\n  if (aam > 0) this.smiles += ':' + aam;\n\n  if (needBrackets) this.smiles += ']';\n\n  /*\n\tif (mol.getRGroupFragment() != 0)\n\t{\n\t  for (i = 0; i < 2; i++)\n\t  {\n\t\t int j;\n\n\t\t for (j = 0; mol.getRGroupFragment()->getAttachmentPoint(i, j) != -1; j++)\n\t\t\tif (idx == mol.getRGroupFragment()->getAttachmentPoint(i, j))\n\t\t\t{\n\t\t\t   _output.printf(\"([*])\");\n\t\t\t   break;\n\t\t\t}\n\n\t\t if (mol.getRGroupFragment()->getAttachmentPoint(i, j) != -1)\n\t\t\tbreak;\n\t  }\n\t}\n\t*/\n};\n\nSmiles.prototype.markCisTrans = function (mol) {\n  this.cis_trans = new CisTrans(\n    mol,\n    function (idx) {\n      return this.atoms[idx].neighbours;\n    },\n    this,\n  );\n  this.cis_trans.build();\n  this.dbonds = new Array(mol.bonds.size);\n\n  mol.bonds.forEach((bond, bid) => {\n    this.dbonds[bid] = {\n      ctbond_beg: -1,\n      ctbond_end: -1,\n      saved: 0,\n    };\n  });\n\n  this.cis_trans.each((ct, bid) => {\n    const bond = mol.bonds.get(bid);\n\n    if (ct.parity !== 0 && !this.isBondInRing(bid)) {\n      const neiBeg = this.atoms[bond.begin].neighbours;\n      const neiEnd = this.atoms[bond.end].neighbours;\n      let aromFailBeg = true;\n      let aromFailEnd = true;\n\n      neiBeg.forEach((nei) => {\n        if (\n          nei.bid !== bid &&\n          mol.bonds.get(nei.bid).type === Bond.PATTERN.TYPE.SINGLE\n        ) {\n          aromFailBeg = false;\n        }\n      });\n\n      neiEnd.forEach((nei) => {\n        if (\n          nei.bid !== bid &&\n          mol.bonds.get(nei.bid).type === Bond.PATTERN.TYPE.SINGLE\n        ) {\n          aromFailEnd = false;\n        }\n      });\n\n      if (aromFailBeg || aromFailEnd) return;\n\n      neiBeg.forEach((nei) => {\n        if (nei.bid === bid) return;\n        if (mol.bonds.get(nei.bid).begin === bond.begin) {\n          this.dbonds[nei.bid].ctbond_beg = bid;\n        } else this.dbonds[nei.bid].ctbond_end = bid;\n      });\n\n      neiEnd.forEach((nei) => {\n        if (nei.bid === bid) return;\n        if (mol.bonds.get(nei.bid).begin === bond.end) {\n          this.dbonds[nei.bid].ctbond_beg = bid;\n        } else this.dbonds[nei.bid].ctbond_end = bid;\n      });\n    }\n  });\n};\n\nSmiles.prototype.updateSideBonds = function (mol, bondIdx) {\n  // eslint-disable-line max-statements\n  const bond = mol.bonds.get(bondIdx);\n  const subst = this.cis_trans.getSubstituents(bondIdx);\n  const parity = this.cis_trans.getParity(bondIdx);\n\n  const sidebonds = [-1, -1, -1, -1];\n\n  sidebonds[0] = mol.findBondId(subst[0], bond.begin);\n  if (subst[1] !== -1) sidebonds[1] = mol.findBondId(subst[1], bond.begin);\n\n  sidebonds[2] = mol.findBondId(subst[2], bond.end);\n  if (subst[3] !== -1) sidebonds[3] = mol.findBondId(subst[3], bond.end);\n\n  let n1 = 0;\n  let n2 = 0;\n  let n3 = 0;\n  let n4 = 0;\n\n  if (this.dbonds[sidebonds[0]].saved !== 0) {\n    if (\n      (this.dbonds[sidebonds[0]].saved === 1 &&\n        mol.bonds.get(sidebonds[0]).begin === bond.begin) ||\n      (this.dbonds[sidebonds[0]].saved === 2 &&\n        mol.bonds.get(sidebonds[0]).end === bond.begin)\n    ) {\n      n1++;\n    } else n2++;\n  }\n  if (sidebonds[1] !== -1 && this.dbonds[sidebonds[1]].saved !== 0) {\n    if (\n      (this.dbonds[sidebonds[1]].saved === 2 &&\n        mol.bonds.get(sidebonds[1]).begin === bond.begin) ||\n      (this.dbonds[sidebonds[1]].saved === 1 &&\n        mol.bonds.get(sidebonds[1]).end === bond.begin)\n    ) {\n      n1++;\n    } else n2++;\n  }\n  if (this.dbonds[sidebonds[2]].saved !== 0) {\n    if (\n      (this.dbonds[sidebonds[2]].saved === 1 &&\n        mol.bonds.get(sidebonds[2]).begin === bond.end) ||\n      (this.dbonds[sidebonds[2]].saved === 2 &&\n        mol.bonds.get(sidebonds[2]).end === bond.end)\n    ) {\n      n3++;\n    } else n4++;\n  }\n  if (sidebonds[3] !== -1 && this.dbonds[sidebonds[3]].saved !== 0) {\n    if (\n      (this.dbonds[sidebonds[3]].saved === 2 &&\n        mol.bonds.get(sidebonds[3]).begin === bond.end) ||\n      (this.dbonds[sidebonds[3]].saved === 1 &&\n        mol.bonds.get(sidebonds[3]).end === bond.end)\n    ) {\n      n3++;\n    } else n4++;\n  }\n\n  if (parity === CisTrans.PARITY.CIS) {\n    n1 += n3;\n    n2 += n4;\n  } else {\n    n1 += n4;\n    n2 += n3;\n  }\n\n  if (n1 > 0 && n2 > 0) throw new Error('incompatible cis-trans configuration');\n\n  if (n1 === 0 && n2 === 0) return false;\n\n  if (n1 > 0) {\n    this.dbonds[sidebonds[0]].saved =\n      mol.bonds.get(sidebonds[0]).begin === bond.begin ? 1 : 2;\n    if (sidebonds[1] !== -1) {\n      this.dbonds[sidebonds[1]].saved =\n        mol.bonds.get(sidebonds[1]).begin === bond.begin ? 2 : 1;\n    }\n\n    this.dbonds[sidebonds[2]].saved =\n      (mol.bonds.get(sidebonds[2]).begin === bond.end) ===\n      (parity === CisTrans.PARITY.CIS)\n        ? 1\n        : 2;\n    if (sidebonds[3] !== -1) {\n      this.dbonds[sidebonds[3]].saved =\n        (mol.bonds.get(sidebonds[3]).begin === bond.end) ===\n        (parity === CisTrans.PARITY.CIS)\n          ? 2\n          : 1;\n    }\n  }\n  if (n2 > 0) {\n    this.dbonds[sidebonds[0]].saved =\n      mol.bonds.get(sidebonds[0]).begin === bond.begin ? 2 : 1;\n    if (sidebonds[1] !== -1) {\n      this.dbonds[sidebonds[1]].saved =\n        mol.bonds.get(sidebonds[1]).begin === bond.begin ? 1 : 2;\n    }\n\n    this.dbonds[sidebonds[2]].saved =\n      (mol.bonds.get(sidebonds[2]).begin === bond.end) ===\n      (parity === CisTrans.PARITY.CIS)\n        ? 2\n        : 1;\n    if (sidebonds[3] !== -1) {\n      this.dbonds[sidebonds[3]].saved =\n        (mol.bonds.get(sidebonds[3]).begin === bond.end) ===\n        (parity === CisTrans.PARITY.CIS)\n          ? 1\n          : 2;\n    }\n  }\n\n  return true;\n};\n\nSmiles.prototype.calcBondDirection = function (mol, idx, vprev) {\n  let ntouched;\n\n  if (\n    this.dbonds[idx].ctbond_beg === -1 &&\n    this.dbonds[idx].ctbond_end === -1\n  ) {\n    return 0;\n  }\n\n  if (mol.bonds.get(idx).type !== Bond.PATTERN.TYPE.SINGLE) {\n    throw new Error('internal: directed bond type ' + mol.bonds.get(idx).type);\n  }\n\n  while (true) {\n    // eslint-disable-line no-constant-condition\n    ntouched = 0;\n    this.cis_trans.each((ct, bid) => {\n      if (ct.parity !== 0 && !this.isBondInRing(bid)) {\n        if (this.updateSideBonds(mol, bid)) ntouched++;\n      }\n    });\n    if (ntouched === this.touchedCistransbonds) break;\n    this.touchedCistransbonds = ntouched;\n  }\n\n  if (this.dbonds[idx].saved === 0) {\n    if (vprev === mol.bonds.get(idx).begin) this.dbonds[idx].saved = 1;\n    else this.dbonds[idx].saved = 2;\n  }\n\n  return this.dbonds[idx].saved;\n};\n\nSmiles.prototype.writeRadicals = function (mol) {\n  // eslint-disable-line max-statements\n  const marked = new Array(this.writtenAtoms.length);\n  let i, j;\n\n  for (i = 0; i < this.writtenAtoms.length; i++) {\n    if (marked[i]) continue; // eslint-disable-line no-continue\n\n    const radical = mol.atoms.get(this.writtenAtoms[i]).radical;\n\n    if (radical === 0) continue; // eslint-disable-line no-continue\n\n    if (this.comma) {\n      this.smiles += ',';\n    } else {\n      this.smiles += ' |';\n      this.comma = true;\n    }\n\n    if (radical === Atom.PATTERN.RADICAL.SINGLET) this.smiles += '^3:';\n    else if (radical === Atom.PATTERN.RADICAL.DOUPLET) this.smiles += '^1:';\n    // RADICAL_TRIPLET\n    else this.smiles += '^4:';\n\n    this.smiles += i;\n\n    for (j = i + 1; j < this.writtenAtoms.length; j++) {\n      if (mol.atoms.get(this.writtenAtoms[j]).radical === radical) {\n        marked[j] = true;\n        this.smiles += ',' + j;\n      }\n    }\n  }\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Serializer } from '../serializers.types';\nimport { SmiSerializerOptions } from './smi.types';\nimport { Smiles } from './smiles';\nimport { Struct } from 'domain/entities';\n\nexport class SmiSerializer implements Serializer<Struct> {\n  static DefaultOptions: SmiSerializerOptions = {\n    ignoreErrors: false,\n  };\n\n  private readonly options: SmiSerializerOptions;\n\n  constructor(options?: Partial<SmiSerializerOptions>) {\n    this.options = { ...SmiSerializer.DefaultOptions, ...options };\n  }\n\n  deserialize(_content: string): Struct {\n    throw new Error('Not implemented yet.');\n  }\n\n  serialize(struct: Struct): string {\n    return new Smiles().saveMolecule(struct, this.options.ignoreErrors);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { SdfItem, StructAssociatedData } from './sdf.types';\n\nimport { MolSerializer } from '../mol/molSerializer';\nimport { Serializer } from '../serializers.types';\nimport { MolSerializerOptions } from '../mol';\n\nconst DelimeterRegex = /^[^]+?\\$\\$\\$\\$$/gm;\nexport class SdfSerializer implements Serializer<Array<SdfItem>> {\n  private readonly molSerializerOptions?: Partial<MolSerializerOptions>;\n\n  constructor(options?: Partial<MolSerializerOptions>) {\n    this.molSerializerOptions = options;\n  }\n\n  deserialize(content: string): Array<SdfItem> {\n    let m: any;\n    const result: Array<SdfItem> = [];\n    const molSerializer = new MolSerializer(this.molSerializerOptions);\n    while ((m = DelimeterRegex.exec(content)) !== null) {\n      const chunk = m[0].replace(/\\r/g, '').trim(); // TODO: normalize newline?\n      const end = chunk.indexOf('M  END');\n      if (end !== -1) {\n        const propChunks: any = chunk\n          .substr(end + 7)\n          .trim()\n          .split(/^$\\n?/m);\n\n        const struct = molSerializer.deserialize(chunk.substring(0, end + 6));\n        const props = propChunks.reduce(\n          (acc: StructAssociatedData, pc: string) => {\n            const m = pc.match(/^> [ \\d]*<(\\S+)>/);\n            if (m) {\n              const field = m[1];\n              const valueArr = pc.split('\\n').slice(1, -1);\n              let value = '';\n              if (valueArr.length > 1) {\n                value = valueArr.join(',');\n              } else {\n                value = pc.split('\\n')[1].trim();\n              }\n\n              acc[field] = Number.isFinite(value) ? +value : value.toString(); // eslint-disable-line\n            }\n            return acc;\n          },\n          {} as StructAssociatedData,\n        );\n\n        result.push({ struct, props });\n      }\n    }\n    return result;\n  }\n\n  serialize(sdfItems: Array<SdfItem>): string {\n    const molSerializer = new MolSerializer(this.molSerializerOptions);\n    return sdfItems.reduce((res, item) => {\n      res += molSerializer.serialize(item.struct);\n\n      Object.keys(item.props).forEach((prop) => {\n        res += `> <${prop}>\\n`;\n        res += `${item.props[prop]}\\n\\n`;\n      });\n\n      return `${res}$$$$\\n`;\n    }, '');\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseMicromoleculeEntity } from 'domain/entities/BaseMicromoleculeEntity';\nimport { Vec2 } from 'domain/entities/vec2';\nimport { getNodeWithInvertedYCoord, KetFileNode } from 'domain/serializers';\nimport { IMAGE_SERIALIZE_KEY } from 'domain/constants';\n\nexport interface KetFileImageNode extends KetFileNode<string> {\n  format: string;\n  boundingBox: {\n    x: number;\n    y: number;\n    z?: number;\n    width: number;\n    height: number;\n  };\n}\n\nexport interface ImageReferencePositions {\n  topLeftPosition: Vec2;\n  topMiddlePosition: Vec2;\n  topRightPosition: Vec2;\n  rightMiddlePosition: Vec2;\n  bottomRightPosition: Vec2;\n  bottomMiddlePosition: Vec2;\n  bottomLeftPosition: Vec2;\n  leftMiddlePosition: Vec2;\n}\n\nexport type ImageReferenceName = keyof ImageReferencePositions;\n\nexport interface ImageReferencePositionInfo {\n  name: ImageReferenceName;\n  offset: Vec2;\n}\n\nexport class Image extends BaseMicromoleculeEntity {\n  constructor(\n    public bitmap: string,\n    private _center: Vec2,\n    private halfSize: Vec2,\n  ) {\n    super();\n  }\n\n  getTopLeftPosition(): Vec2 {\n    return this._center.sub(this.halfSize);\n  }\n\n  getTopRightPosition(): Vec2 {\n    return new Vec2(\n      this._center.x + this.halfSize.x,\n      this._center.y - this.halfSize.y,\n    );\n  }\n\n  getBottomRightPosition(): Vec2 {\n    return this._center.add(this.halfSize);\n  }\n\n  getBottomLeftPosition(): Vec2 {\n    return new Vec2(\n      this._center.x - this.halfSize.x,\n      this._center.y + this.halfSize.y,\n    );\n  }\n\n  getCornerPositions() {\n    return [\n      this.getTopLeftPosition(),\n      this.getTopRightPosition(),\n      this.getBottomRightPosition(),\n      this.getBottomLeftPosition(),\n    ];\n  }\n\n  getReferencePositions(): ImageReferencePositions {\n    const [\n      topLeftPosition,\n      topRightPosition,\n      bottomRightPosition,\n      bottomLeftPosition,\n    ] = this.getCornerPositions();\n    return {\n      topLeftPosition,\n      topMiddlePosition: Vec2.centre(topLeftPosition, topRightPosition),\n      topRightPosition,\n      rightMiddlePosition: Vec2.centre(topRightPosition, bottomRightPosition),\n      bottomRightPosition,\n      bottomMiddlePosition: Vec2.centre(\n        bottomLeftPosition,\n        bottomRightPosition,\n      ),\n      bottomLeftPosition,\n      leftMiddlePosition: Vec2.centre(topLeftPosition, bottomLeftPosition),\n    };\n  }\n\n  clone(): Image {\n    return new Image(\n      this.bitmap,\n      new Vec2(this._center),\n      new Vec2(this.halfSize),\n    );\n  }\n\n  addPositionOffset(offset: Vec2) {\n    this._center = this._center.add(offset);\n  }\n\n  resize(topLeftPosition: Vec2, bottomRightPosition: Vec2) {\n    this._center = Vec2.centre(topLeftPosition, bottomRightPosition);\n    const halfSize = Vec2.diff(bottomRightPosition, topLeftPosition).scaled(\n      0.5,\n    );\n    this.halfSize = new Vec2(Math.abs(halfSize.x), Math.abs(halfSize.y));\n  }\n\n  rescaleSize(scale: number): void {\n    this.halfSize = this.halfSize.scaled(scale);\n  }\n\n  center(): Vec2 {\n    return this._center;\n  }\n\n  toKetNode(): KetFileImageNode {\n    const topLeftCorner = this.getTopLeftPosition();\n    const base64Data = this.bitmap.replace(/^.*;base64,/, '');\n    const format = this.bitmap.match(\n      /^data:(image\\/.*);base64,/,\n    )?.[1] as string;\n    return {\n      type: IMAGE_SERIALIZE_KEY,\n      center: getNodeWithInvertedYCoord(this._center),\n      format,\n      boundingBox: {\n        ...getNodeWithInvertedYCoord(topLeftCorner),\n        width: this.halfSize.x * 2,\n        height: this.halfSize.y * 2,\n      },\n      data: base64Data,\n      selected: this.getInitiallySelected(),\n    };\n  }\n\n  static fromKetNode(ketFileNode: KetFileImageNode): Image {\n    const { width, height, ...point } = getNodeWithInvertedYCoord(\n      ketFileNode.boundingBox,\n    );\n    const halfSize = new Vec2(width / 2, height / 2);\n    const topLeftCorner = new Vec2(point);\n    const center = topLeftCorner.add(halfSize);\n    const imageSrc = `data:${ketFileNode.format};base64,${ketFileNode.data}`;\n\n    // Should be validated already\n    const image = new Image(imageSrc, center, halfSize);\n    image.setInitiallySelected(ketFileNode.selected);\n    return image;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport interface HighlightAttributes {\n  atoms: Array<number>;\n  bonds: Array<number>;\n  rgroupAttachmentPoints: Array<number>;\n  color: string;\n}\n\nexport class Highlight {\n  atoms: Array<number>;\n  bonds: Array<number>;\n  rgroupAttachmentPoints: Array<number>;\n  color: string;\n\n  constructor(attributes: HighlightAttributes) {\n    const { atoms, bonds, rgroupAttachmentPoints, color } = attributes;\n    this.color = color;\n    this.atoms = atoms;\n    this.bonds = bonds;\n    this.rgroupAttachmentPoints = rgroupAttachmentPoints;\n  }\n}\n","import assert from 'assert';\nimport { RGroupAttachmentPoint } from './rgroupAttachmentPoint';\n\n/**\n * This is data model for Sgrou attachment point.\n * each of the property is according to the specification of CT files for \"SAP\" instruction.\n * Implemented under requirements: https://github.com/epam/ketcher/issues/2467\n */\nexport class SGroupAttachmentPoint {\n  /**\n   * This is the index of the atom in the S-group that serves as the attachment point.\n   */\n  public readonly atomId: number;\n  /**\n   * This is the index of the atom that is being replaced or removed at the attachment point\n   * when the S-group is connected to another structure.\n   * If no atom is being replaced, this value should be set to zero.\n   *\n   * NOTE: The logic is not supported in the current implementation of Ketcher.\n   * Only reading from file and saving to file.\n   */\n  public readonly leaveAtomId: number | undefined;\n  /**\n   * 2 character attachment identifier (for example, H or T for head/tail).\n   * No validation of any kind is performed, and   is allowed.\n   * ISIS/Desktop uses the first character as the ID of the leaving group\n   * to attach if the bond between ooo and iii is deleted, and uses the second character\n   * to indicate the sequence polarity: l for left, r for right, and x for none (a crosslink).\n   *\n   * NOTE: The logic is not supported in the current implementation of Ketcher.\n   * Only reading from file and saving to file.\n   */\n  public readonly attachmentId: string | undefined;\n\n  // Field attachmentPointNumber is used for superatom attachment points\n  // which are used for connection between molecule and monomer.\n  public readonly attachmentPointNumber?: number;\n\n  constructor(\n    atomId: number,\n    leaveAtomId: number | undefined,\n    attachmentId: string | undefined,\n    attachmentPointNumber?: number,\n  ) {\n    this.atomId = atomId;\n    this.leaveAtomId = leaveAtomId;\n    this.attachmentId = attachmentId;\n    this.attachmentPointNumber = attachmentPointNumber;\n  }\n\n  clone(atomIdMap: Map<number, number>): SGroupAttachmentPoint {\n    const newAtomId = atomIdMap.get(this.atomId);\n    assert(newAtomId != null);\n    const newLeaveAtomId = atomIdMap.get(this.leaveAtomId as number);\n    return new SGroupAttachmentPoint(\n      newAtomId,\n      newLeaveAtomId,\n      this.attachmentId,\n      this.attachmentPointNumber,\n    );\n  }\n\n  /**\n   * Trick: used for cloned struct for tooltips, for preview, for templates\n   *\n   * Why?\n   * Currently, tooltips are implemented with removing sgroups (wrong implementation)\n   * That's why we need to mark atoms as sgroup attachment points.\n   *\n   * If we change preview approach to flagged (option for showing sgroups without abbreviation),\n   * then we will be able to remove this hack.\n   */\n  convertToRGroupAttachmentPointForDisplayPurpose(attachedAtomId: number) {\n    return new RGroupAttachmentPoint(attachedAtomId, 'primary');\n  }\n}\n","export enum Axis {\n  x = 'x',\n  y = 'y',\n  z = 'z',\n}\n\nexport type Axises = 'x' | 'y' | 'z';\n","import { BaseMonomer } from 'domain/entities/BaseMonomer';\nimport {\n  getNextMonomerInChain,\n  isValidNucleoside,\n  isValidNucleotide,\n} from 'domain/helpers/monomers';\nimport { Chem } from 'domain/entities/Chem';\nimport { Phosphate } from 'domain/entities/Phosphate';\nimport { RNABase } from 'domain/entities/RNABase';\nimport { Sugar } from 'domain/entities/Sugar';\n\nexport class LinkerSequenceNode {\n  constructor(public monomer: BaseMonomer) {}\n\n  public get SubChainConstructor() {\n    return this.monomer.SubChainConstructor;\n  }\n\n  public get firstMonomerInNode() {\n    return this.monomer;\n  }\n\n  public get lastMonomerInNode() {\n    return this.monomers[this.monomers.length - 1];\n  }\n\n  public get monomers() {\n    const monomers = [this.firstMonomerInNode];\n    const firstMonomer = this.firstMonomerInNode;\n    let nextMonomer = getNextMonomerInChain(this.firstMonomerInNode);\n    while (\n      nextMonomer instanceof Chem ||\n      nextMonomer instanceof Phosphate ||\n      nextMonomer instanceof RNABase ||\n      (nextMonomer instanceof Sugar &&\n        !isValidNucleotide(nextMonomer) &&\n        !isValidNucleoside(nextMonomer))\n    ) {\n      monomers.push(nextMonomer);\n      nextMonomer = getNextMonomerInChain(nextMonomer, firstMonomer);\n    }\n\n    return monomers;\n  }\n\n  public get renderer() {\n    return this.monomer.renderer;\n  }\n\n  public get modified() {\n    return false;\n  }\n}\n","import { ShowHydrogenLabels } from 'application/render';\nimport { ketcherProvider } from 'application/utils';\n\nenum IndigoShowHydrogenLabelsMode {\n  OFF = 'none',\n  HETERO = 'hetero',\n  TERMINAL_HETERO = 'terminal-hetero',\n  ALL = 'all',\n}\n\nexport function getLabelRenderModeForIndigo() {\n  // Terminal does not supported by indigo so TERMINAL_HETERO used\n  // Off removing all labels in indigo so HETERO used\n  const renderModeMapping = {\n    [ShowHydrogenLabels.Off]: IndigoShowHydrogenLabelsMode.HETERO,\n    [ShowHydrogenLabels.Hetero]: IndigoShowHydrogenLabelsMode.HETERO,\n    [ShowHydrogenLabels.Terminal]: IndigoShowHydrogenLabelsMode.TERMINAL_HETERO,\n    [ShowHydrogenLabels.TerminalAndHetero]:\n      IndigoShowHydrogenLabelsMode.TERMINAL_HETERO,\n    [ShowHydrogenLabels.On]: IndigoShowHydrogenLabelsMode.ALL,\n  };\n\n  return (\n    renderModeMapping[\n      ketcherProvider.getKetcher().editor.options().showHydrogenLabels\n    ] || IndigoShowHydrogenLabelsMode.OFF\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CoreEditor } from 'application/editor';\nimport {\n  AromatizeData,\n  AromatizeResult,\n  AutomapData,\n  AutomapResult,\n  CalculateCipData,\n  CalculateCipResult,\n  CalculateData,\n  CalculateResult,\n  CheckData,\n  CheckResult,\n  CleanData,\n  CleanResult,\n  ConvertData,\n  ConvertResult,\n  DearomatizeData,\n  DearomatizeResult,\n  ExplicitHydrogensData,\n  ExplicitHydrogensResult,\n  GenerateImageOptions,\n  InfoResult,\n  LayoutData,\n  LayoutResult,\n  OutputFormatType,\n  RecognizeResult,\n  StructService,\n  StructServiceOptions,\n} from 'domain/services';\nimport { KetcherLogger } from 'utilities';\nimport { getLabelRenderModeForIndigo } from 'infrastructure/services/helpers';\nimport { ketcherProvider } from 'application/utils';\n\nfunction pollDeferred(process, complete, timeGap, startTimeGap) {\n  return new Promise((resolve, reject) => {\n    function iterate() {\n      process().then(\n        (val) => {\n          try {\n            if (complete(val)) resolve(val);\n            else setTimeout(iterate, timeGap);\n          } catch (error) {\n            KetcherLogger.error('remoteStructService.ts::pollDeferred', error);\n            reject(error);\n          }\n        },\n        (err) => reject(err),\n      );\n    }\n    setTimeout(iterate, startTimeGap || 0);\n  });\n}\n\nfunction parametrizeUrl(url, params) {\n  return url.replace(/:(\\w+)/g, (_, val) => params[val]);\n}\n\nfunction request(\n  method: string,\n  url: string,\n  data?: any,\n  headers?: any,\n  responseHandler?: (promise: Promise<any>) => Promise<any>,\n) {\n  let requestUrl = url;\n  if (data && method === 'GET') requestUrl = parametrizeUrl(url, data);\n  let response: any = fetch(requestUrl, {\n    method,\n    headers: Object.assign(\n      {\n        Accept: 'application/json',\n      },\n      headers,\n    ),\n    body: method !== 'GET' ? data : undefined,\n    credentials: 'same-origin',\n  });\n\n  if (responseHandler) {\n    response = responseHandler(response);\n  } else {\n    response = response.then((response) =>\n      response\n        .json()\n        .then((res) => (response.ok ? res : Promise.reject(res.error))),\n    );\n  }\n\n  return response;\n}\n\nfunction indigoCall(\n  method: string,\n  url: string,\n  baseUrl: string,\n  defaultOptions: any,\n  customHeaders?: Record<string, string>,\n) {\n  return function (\n    data,\n    options,\n    responseHandler?: (promise: Promise<any>) => Promise<any>,\n  ) {\n    const body = Object.assign({}, data);\n    body.options = Object.assign(body.options || {}, defaultOptions, options);\n    return request(\n      method,\n      baseUrl + url,\n      JSON.stringify(body),\n      {\n        'Content-Type': 'application/json',\n        ...customHeaders,\n      },\n      responseHandler,\n    );\n  };\n}\n\nexport function pickStandardServerOptions(options?: StructServiceOptions) {\n  const ketcherInstance = ketcherProvider.getKetcher();\n\n  return {\n    'dearomatize-on-load': options?.['dearomatize-on-load'],\n    'smart-layout': options?.['smart-layout'],\n    'ignore-stereochemistry-errors': options?.['ignore-stereochemistry-errors'],\n    'mass-skip-error-on-pseudoatoms':\n      options?.['mass-skip-error-on-pseudoatoms'],\n    'gross-formula-add-rsites': options?.['gross-formula-add-rsites'],\n    'gross-formula-add-isotopes': options?.['gross-formula-add-isotopes'],\n    'ignore-no-chiral-flag': ketcherInstance.editor.options().ignoreChiralFlag,\n    'aromatize-skip-superatoms': true,\n  };\n}\n\nexport class RemoteStructService implements StructService {\n  private readonly apiPath: string;\n  private readonly defaultOptions: StructServiceOptions;\n  private readonly customHeaders?: Record<string, string>;\n\n  constructor(\n    apiPath: string,\n    defaultOptions: StructServiceOptions,\n    customHeaders?: Record<string, string>,\n  ) {\n    this.apiPath = apiPath;\n    this.defaultOptions = defaultOptions;\n    this.customHeaders = customHeaders;\n  }\n\n  getInChIKey(struct: string): Promise<string> {\n    return indigoCall(\n      'POST',\n      'indigo/convert',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(\n      {\n        struct,\n        output_format: 'chemical/x-inchi',\n      },\n      {},\n    );\n  }\n\n  private getStandardServerOptions(options?: StructServiceOptions) {\n    if (!options) {\n      return this.defaultOptions;\n    }\n\n    return pickStandardServerOptions(options);\n  }\n\n  async info(): Promise<InfoResult> {\n    let indigoVersion: string;\n    let imagoVersions: Array<string>;\n    let isAvailable = false;\n\n    try {\n      const response = await request('GET', this.apiPath + 'info');\n      indigoVersion = response.indigo_version;\n      imagoVersions = response.imago_versions;\n      isAvailable = true;\n    } catch (e) {\n      KetcherLogger.error(\n        'remoteStructService.ts::RemoteStructService::info',\n        e,\n      );\n      indigoVersion = '';\n      imagoVersions = [];\n      isAvailable = false;\n    }\n\n    return {\n      indigoVersion,\n      imagoVersions,\n      isAvailable,\n    };\n  }\n\n  convert(\n    data: ConvertData,\n    options?: StructServiceOptions,\n  ): Promise<ConvertResult> {\n    const monomerLibrary = JSON.stringify(\n      CoreEditor.provideEditorInstance()?.monomersLibraryParsedJson,\n    );\n    const expandedOptions = {\n      monomerLibrary,\n      ...this.getStandardServerOptions(options),\n      'bond-length-unit': options?.['bond-length-unit'],\n      'bond-length': options?.['bond-length'],\n      'reaction-component-margin-size-unit':\n        options?.['reaction-component-margin-size-unit'],\n      'reaction-component-margin-size':\n        options?.['reaction-component-margin-size'],\n      'image-resolution': options?.['image-resolution'],\n      'molfile-saving-mode': options?.['molfile-saving-mode'],\n    };\n\n    return indigoCall(\n      'POST',\n      'indigo/convert',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, expandedOptions);\n  }\n\n  layout(\n    data: LayoutData,\n    options?: StructServiceOptions,\n  ): Promise<LayoutResult> {\n    const expandedOptions = {\n      ...this.getStandardServerOptions(options),\n\n      'render-label-mode': getLabelRenderModeForIndigo(),\n      'render-font-size': options?.['render-font-size'],\n      'render-font-size-unit': options?.['render-font-size-unit'],\n      'render-font-size-sub': options?.['render-font-size-sub'],\n      'render-font-size-sub-unit': options?.['render-font-size-sub-unit'],\n      'output-content-type': 'application/json',\n      'bond-length-unit': options?.['bond-length-unit'],\n      'bond-length': options?.['bond-length'],\n      'reaction-component-margin-size-unit':\n        options?.['reaction-component-margin-size-unit'],\n      'reaction-component-margin-size':\n        options?.['reaction-component-margin-size'],\n      'image-resolution': options?.['image-resolution'],\n    };\n\n    return indigoCall(\n      'POST',\n      'indigo/layout',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, expandedOptions);\n  }\n\n  clean(data: CleanData, options?: StructServiceOptions): Promise<CleanResult> {\n    return indigoCall(\n      'POST',\n      'indigo/clean',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n\n  aromatize(\n    data: AromatizeData,\n    options?: StructServiceOptions,\n  ): Promise<AromatizeResult> {\n    return indigoCall(\n      'POST',\n      'indigo/aromatize',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n\n  dearomatize(\n    data: DearomatizeData,\n    options?: StructServiceOptions,\n  ): Promise<DearomatizeResult> {\n    return indigoCall(\n      'POST',\n      'indigo/dearomatize',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n\n  calculateCip(\n    data: CalculateCipData,\n    options?: StructServiceOptions,\n  ): Promise<CalculateCipResult> {\n    return indigoCall(\n      'POST',\n      'indigo/calculate_cip',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n\n  automap(\n    data: AutomapData,\n    options?: StructServiceOptions,\n  ): Promise<AutomapResult> {\n    return indigoCall(\n      'POST',\n      'indigo/automap',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n\n  check(data: CheckData, options?: StructServiceOptions): Promise<CheckResult> {\n    return indigoCall(\n      'POST',\n      'indigo/check',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n\n  calculate(\n    data: CalculateData,\n    options?: StructServiceOptions,\n  ): Promise<CalculateResult> {\n    return indigoCall(\n      'POST',\n      'indigo/calculate',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n\n  recognize(blob: Blob, version: string): Promise<RecognizeResult> {\n    const parVersion = version ? `?version=${version}` : '';\n    const req = request(\n      'POST',\n      this.apiPath + `imago/uploads${parVersion}`,\n      blob,\n      {\n        'Content-Type': blob.type || 'application/octet-stream',\n      },\n    );\n    const status = request.bind(\n      null,\n      'GET',\n      this.apiPath + 'imago/uploads/:id',\n    );\n    return req\n      .then((data) =>\n        pollDeferred(\n          status.bind(null, { id: data.upload_id }),\n          (response: any) => {\n            if (response.state === 'FAILURE') throw response;\n            return response.state === 'SUCCESS';\n          },\n          500,\n          300,\n        ),\n      )\n      .then((response: any) => ({ struct: response.metadata.mol_str }));\n  }\n\n  generateImageAsBase64(\n    data: string,\n    options?: GenerateImageOptions,\n  ): Promise<string> {\n    const outputFormat: OutputFormatType = options?.outputFormat || 'png';\n\n    return indigoCall(\n      'POST',\n      'indigo/render',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(\n      { struct: data },\n      {\n        ...this.getStandardServerOptions(options),\n        'render-coloring': options?.['render-coloring'],\n        'render-font-size': options?.['render-font-size'],\n        'render-font-size-unit': options?.['render-font-size-unit'],\n        'render-font-size-sub': options?.['render-font-size-sub'],\n        'render-font-size-sub-unit': options?.['render-font-size-sub-unit'],\n        'image-resolution': options?.['image-resolution'],\n        'bond-length-unit': options?.['bond-length-unit'],\n        'bond-length': options?.['bond-length'],\n        'render-bond-thickness': options?.['render-bond-thickness'],\n        'render-bond-thickness-unit': options?.['render-bond-thickness-unit'],\n        'render-bond-spacing': options?.['render-bond-spacing'],\n        'render-stereo-bond-width': options?.['render-stereo-bond-width'],\n        'render-stereo-bond-width-unit':\n          options?.['render-stereo-bond-width-unit'],\n        'render-hash-spacing': options?.['render-hash-spacing'],\n        'render-hash-spacing-unit': options?.['render-hash-spacing-unit'],\n        'render-output-sheet-width': options?.['render-output-sheet-width'],\n        'render-output-sheet-height': options?.['render-output-sheet-height'],\n        'render-output-format': outputFormat,\n        'render-label-mode': getLabelRenderModeForIndigo(),\n      },\n      (response) => response.then((resp) => resp.text()),\n    );\n  }\n\n  toggleExplicitHydrogens(\n    data: ExplicitHydrogensData,\n    options?: StructServiceOptions,\n  ): Promise<ExplicitHydrogensResult> {\n    return indigoCall(\n      'POST',\n      'indigo/convert_explicit_hydrogens',\n      this.apiPath,\n      this.defaultOptions,\n      this.customHeaders,\n    )(data, this.getStandardServerOptions(options));\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ServiceMode,\n  StructService,\n  StructServiceOptions,\n  StructServiceProvider,\n} from 'domain/services';\n\nimport { RemoteStructService } from './remoteStructService';\n\nexport class RemoteStructServiceProvider implements StructServiceProvider {\n  private readonly apiPath: string;\n  mode: ServiceMode = 'remote';\n  customHeaders?: Record<string, string>;\n\n  constructor(apiPath: string, customHeaders?: Record<string, string>) {\n    let currentApiPath = apiPath;\n    this.customHeaders = customHeaders;\n    const params = new URLSearchParams(document.location.search);\n    if (params.has('api_path')) {\n      currentApiPath = params.get('api_path')!;\n    }\n    this.apiPath =\n      !currentApiPath || /\\/$/.test(currentApiPath)\n        ? currentApiPath\n        : currentApiPath + '/';\n  }\n\n  createStructService(options: StructServiceOptions): StructService {\n    return new RemoteStructService(this.apiPath, options, this.customHeaders);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AutomapMode,\n  CalculateProps,\n  CalculateResult,\n  CheckResult,\n  CheckTypes,\n  ChemicalMimeType,\n  ConvertResult,\n  InfoResult,\n  OutputFormatType,\n  StructService,\n} from 'domain/services';\nimport { StructOrString } from 'application/indigo.types';\nimport { KetSerializer } from 'domain/serializers';\nimport { Struct } from 'domain/entities';\nimport { defaultBondThickness } from './editor';\n\nconst defaultTypes: Array<CheckTypes> = [\n  'radicals',\n  'pseudoatoms',\n  'stereo',\n  'query',\n  'overlapping_atoms',\n  'overlapping_bonds',\n  'rgroups',\n  'chiral',\n  '3d',\n];\nconst defaultCalcProps: Array<CalculateProps> = [\n  'molecular-weight',\n  'most-abundant-mass',\n  'monoisotopic-mass',\n  'gross',\n  'mass-composition',\n];\n\ntype ConvertOptions = {\n  outputFormat?: ChemicalMimeType;\n  inputFormat?: ChemicalMimeType;\n};\ntype AutomapOptions = {\n  mode?: AutomapMode;\n};\ntype CheckOptions = {\n  types?: Array<CheckTypes>;\n};\ntype CalculateOptions = {\n  properties?: Array<CalculateProps>;\n};\ntype RecognizeOptions = {\n  version?: string;\n};\ntype GenerateImageOptions = {\n  outputFormat?: OutputFormatType;\n  backgroundColor?: string;\n  bondThickness?: number;\n};\n\nfunction convertStructToString(\n  struct: StructOrString,\n  serializer: KetSerializer,\n): string {\n  if (typeof struct !== 'string') {\n    const aidMap = new Map();\n    const result = struct.clone(null, null, false, aidMap);\n\n    return serializer.serialize(result);\n  }\n\n  return struct;\n}\n\nexport class Indigo {\n  #structService: StructService;\n  #ketSerializer: KetSerializer;\n\n  constructor(structService) {\n    this.#structService = structService;\n    this.#ketSerializer = new KetSerializer();\n  }\n\n  info(): Promise<InfoResult> {\n    return this.#structService.info();\n  }\n\n  convert(\n    struct: StructOrString,\n    options?: ConvertOptions,\n  ): Promise<ConvertResult> {\n    const outputFormat = options?.outputFormat || ChemicalMimeType.KET;\n    const inputFormat = options?.inputFormat;\n\n    return this.#structService.convert({\n      struct: convertStructToString(struct, this.#ketSerializer),\n      output_format: outputFormat,\n      input_format: inputFormat,\n    });\n  }\n\n  layout(struct: StructOrString, options): Promise<Struct> {\n    return this.#structService\n      .layout(\n        {\n          struct: convertStructToString(struct, this.#ketSerializer),\n          output_format: ChemicalMimeType.KET,\n        },\n        options,\n      )\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n\n  clean(struct: StructOrString): Promise<Struct> {\n    return this.#structService\n      .clean({\n        struct: convertStructToString(struct, this.#ketSerializer),\n        output_format: ChemicalMimeType.KET,\n      })\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n\n  aromatize(struct: StructOrString): Promise<Struct> {\n    return this.#structService\n      .aromatize({\n        struct: convertStructToString(struct, this.#ketSerializer),\n        output_format: ChemicalMimeType.KET,\n      })\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n\n  dearomatize(struct: StructOrString): Promise<Struct> {\n    return this.#structService\n      .dearomatize({\n        struct: convertStructToString(struct, this.#ketSerializer),\n        output_format: ChemicalMimeType.KET,\n      })\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n\n  calculateCip(struct: StructOrString): Promise<Struct> {\n    return this.#structService\n      .calculateCip({\n        struct: convertStructToString(struct, this.#ketSerializer),\n        output_format: ChemicalMimeType.KET,\n      })\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n\n  automap(struct: StructOrString, options?: AutomapOptions): Promise<Struct> {\n    const mode = options?.mode || 'discard';\n\n    return this.#structService\n      .automap({\n        struct: convertStructToString(struct, this.#ketSerializer),\n        output_format: ChemicalMimeType.KET,\n        mode,\n      })\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n\n  check(struct: StructOrString, options?: CheckOptions): Promise<CheckResult> {\n    const types = options?.types || defaultTypes;\n\n    return this.#structService.check({\n      struct: convertStructToString(struct, this.#ketSerializer),\n      types,\n    });\n  }\n\n  calculate(\n    struct: StructOrString,\n    options?: CalculateOptions,\n  ): Promise<CalculateResult> {\n    const properties = options?.properties || defaultCalcProps;\n\n    return this.#structService.calculate({\n      struct: convertStructToString(struct, this.#ketSerializer),\n      properties,\n    });\n  }\n\n  recognize(image: Blob, options?: RecognizeOptions): Promise<Struct> {\n    const version = options?.version || '';\n\n    return this.#structService\n      .recognize(image, version)\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n\n  generateImageAsBase64(\n    struct: StructOrString,\n    options?: GenerateImageOptions,\n  ): Promise<string> {\n    const outputFormat = options?.outputFormat || 'png';\n    const backgroundColor = options?.backgroundColor || '';\n    const bondThickness = options?.bondThickness || defaultBondThickness;\n    return this.#structService.generateImageAsBase64(\n      convertStructToString(struct, this.#ketSerializer),\n      {\n        outputFormat,\n        backgroundColor,\n        bondThickness,\n      },\n    );\n  }\n\n  toggleExplicitHydrogens(struct: StructOrString): Promise<Struct> {\n    return this.#structService\n      .toggleExplicitHydrogens({\n        struct: convertStructToString(struct, this.#ketSerializer),\n        output_format: ChemicalMimeType.KET,\n      })\n      .then((data) => this.#ketSerializer.deserialize(data.struct));\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","// Types for 'setMode'\nexport enum ModeTypes {\n  flex = 'flex-layout-mode',\n  snake = 'snake-layout-mode',\n  sequence = 'sequence-layout-mode',\n}\nexport type SupportedModes = keyof typeof ModeTypes;\n\n// Types for 'exportImage'\nexport enum BlobTypes {\n  svg = 'image/svg+xml',\n}\nexport type SupportedImageFormats = keyof typeof BlobTypes;\nexport type ExportImageParams = {\n  margin?: number;\n};\n","import { Subscription } from 'subscription';\n/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { saveAs } from 'file-saver';\nimport { FormatterFactory, SupportedFormat } from './formatters';\nimport {\n  GenerateImageOptions,\n  StructService,\n  CalculateData,\n  type CalculateResult,\n} from 'domain/services';\n\nimport { CoreEditor, Editor } from './editor';\nimport { Indigo } from 'application/indigo';\nimport { KetSerializer, MolfileFormat } from 'domain/serializers';\nimport { SGroup, Struct } from 'domain/entities';\nimport assert from 'assert';\nimport { EventEmitter } from 'events';\nimport {\n  LogSettings,\n  LogLevel,\n  runAsyncAction,\n  SettingsManager,\n  getSvgFromDrawnStructures,\n} from 'utilities';\nimport {\n  deleteAllEntitiesOnCanvas,\n  getStructure,\n  ketcherProvider,\n  parseAndAddMacromoleculesOnCanvas,\n  prepareStructToRender,\n} from './utils';\nimport { EditorSelection, EditorType } from './editor/editor.types';\nimport {\n  BlobTypes,\n  ExportImageParams,\n  ModeTypes,\n  SupportedImageFormats,\n  SupportedModes,\n} from 'application/ketcher.types';\n\nconst allowedApiSettings = {\n  'general.dearomatize-on-load': 'dearomatize-on-load',\n  ignoreChiralFlag: 'ignoreChiralFlag',\n  disableQueryElements: 'disableQueryElements',\n  bondThickness: 'bondThickness',\n};\n\nexport class Ketcher {\n  logging: LogSettings;\n  structService: StructService;\n  #formatterFactory: FormatterFactory;\n  #editor: Editor;\n  _indigo: Indigo;\n  #eventBus: EventEmitter;\n  changeEvent: Subscription;\n\n  get editor(): Editor {\n    return this.#editor;\n  }\n\n  get eventBus(): EventEmitter {\n    return this.#eventBus;\n  }\n\n  constructor(\n    editor: Editor,\n    structService: StructService,\n    formatterFactory: FormatterFactory,\n  ) {\n    assert(editor != null);\n    assert(structService != null);\n    assert(formatterFactory != null);\n    this.changeEvent = new Subscription();\n    this.#editor = editor;\n    this.structService = structService;\n    this.#formatterFactory = formatterFactory;\n    this._indigo = new Indigo(this.structService);\n    this.#eventBus = new EventEmitter();\n    this.logging = {\n      enabled: false,\n      level: LogLevel.ERROR,\n      showTrace: false,\n    };\n  }\n\n  get formatterFactory() {\n    return this.#formatterFactory;\n  }\n\n  get indigo() {\n    return this._indigo;\n  }\n\n  // TEMP.: getting only dearomatize-on-load setting\n  get settings() {\n    const options = this.#editor.options();\n    const result = Object.entries(allowedApiSettings).reduce(\n      (acc, [apiSetting, clientSetting]) => {\n        if (clientSetting in options) {\n          return { ...acc, [apiSetting]: clientSetting };\n        }\n        return acc;\n      },\n      {},\n    );\n\n    if (!Object.keys(result).length) {\n      throw new Error('Allowed options are not provided');\n    }\n\n    return result;\n  }\n\n  // TODO: create options type\n  setSettings(settings: Record<string, string>) {\n    // TODO: need to expand this and refactor this method\n    if (!settings) {\n      throw new Error('Please provide settings');\n    }\n    const options = {};\n    for (const [apiSetting, clientSetting] of Object.entries(\n      allowedApiSettings,\n    )) {\n      options[clientSetting] = settings[apiSetting];\n    }\n\n    if (Object.hasOwn(settings, 'disableCustomQuery')) {\n      SettingsManager.disableCustomQuery = !!settings.disableCustomQuery;\n    }\n\n    return this.#editor.setOptions(JSON.stringify(options));\n  }\n\n  getSmiles(isExtended = false): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('SMILES format is not available in macro mode');\n    }\n    const format = isExtended\n      ? SupportedFormat.smilesExt\n      : SupportedFormat.smiles;\n    return getStructure(format, this.#formatterFactory, this.editor.struct());\n  }\n\n  async getMolfile(molfileFormat?: MolfileFormat): Promise<string> {\n    if (this.containsReaction()) {\n      throw Error(\n        'The structure cannot be saved as *.MOL due to reaction arrows.',\n      );\n    }\n\n    const formatPassed =\n      molfileFormat === 'v3000'\n        ? SupportedFormat.molV3000\n        : SupportedFormat.mol;\n    const format = molfileFormat ? formatPassed : SupportedFormat.molAuto;\n\n    const molfile = await getStructure(\n      format,\n      this.#formatterFactory,\n      this.#editor.struct(),\n      CoreEditor.provideEditorInstance()?.drawingEntitiesManager,\n    );\n\n    return molfile;\n  }\n\n  getIdt(): Promise<string> {\n    return getStructure(\n      SupportedFormat.idt,\n      this.#formatterFactory,\n      this.#editor.struct(),\n      CoreEditor.provideEditorInstance()?.drawingEntitiesManager,\n    );\n  }\n\n  async getRxn(molfileFormat: MolfileFormat = 'v2000'): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('RXN format is not available in macro mode');\n    }\n    if (!this.containsReaction()) {\n      throw Error(\n        'The structure cannot be saved as *.RXN: there is no reaction arrows.',\n      );\n    }\n    const format =\n      molfileFormat === 'v3000'\n        ? SupportedFormat.rxnV3000\n        : SupportedFormat.rxn;\n    const rxnfile = await getStructure(\n      format,\n      this.#formatterFactory,\n      this.#editor.struct(),\n    );\n\n    return rxnfile;\n  }\n\n  getKet(): Promise<string> {\n    return getStructure(\n      SupportedFormat.ket,\n      this.#formatterFactory,\n      (CoreEditor.provideEditorInstance()?._type ??\n        EditorType.Micromolecules) === EditorType.Micromolecules\n        ? this.#editor.struct()\n        : CoreEditor.provideEditorInstance()?.drawingEntitiesManager.micromoleculesHiddenEntities?.clone(),\n      (CoreEditor.provideEditorInstance()?._type ??\n        EditorType.Micromolecules) === EditorType.Micromolecules\n        ? undefined\n        : CoreEditor.provideEditorInstance()?.drawingEntitiesManager,\n      this.#editor.selection() as EditorSelection,\n    );\n  }\n\n  getFasta(): Promise<string> {\n    return getStructure(\n      SupportedFormat.fasta,\n      this.#formatterFactory,\n      this.#editor.struct(),\n      CoreEditor.provideEditorInstance()?.drawingEntitiesManager,\n    );\n  }\n\n  getSequence(): Promise<string> {\n    return getStructure(\n      SupportedFormat.sequence,\n      this.#formatterFactory,\n      this.#editor.struct(),\n      CoreEditor.provideEditorInstance()?.drawingEntitiesManager,\n    );\n  }\n\n  getSmarts(): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('SMARTS format is not available in macro mode');\n    }\n    return getStructure(\n      SupportedFormat.smarts,\n      this.#formatterFactory,\n      this.#editor.struct(),\n    );\n  }\n\n  getCml(): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('CML format is not available in macro mode');\n    }\n    return getStructure(\n      SupportedFormat.cml,\n      this.#formatterFactory,\n      this.#editor.struct(),\n    );\n  }\n\n  getSdf(molfileFormat: MolfileFormat = 'v2000'): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('SDF format is not available in macro mode');\n    }\n    const format =\n      molfileFormat === 'v2000'\n        ? SupportedFormat.sdf\n        : SupportedFormat.sdfV3000;\n    return getStructure(format, this.#formatterFactory, this.#editor.struct());\n  }\n\n  getRdf(molfileFormat: MolfileFormat = 'v2000'): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('RDF format is not available in macro mode');\n    }\n    const format =\n      molfileFormat === 'v2000'\n        ? SupportedFormat.rdf\n        : SupportedFormat.rdfV3000;\n    return getStructure(format, this.#formatterFactory, this.#editor.struct());\n  }\n\n  getCDXml(): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('CDXML format is not available in macro mode');\n    }\n    return getStructure(\n      SupportedFormat.cdxml,\n      this.#formatterFactory,\n      this.#editor.struct(),\n    );\n  }\n\n  getCDX(): Promise<string> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('CDX format is not available in macro mode');\n    }\n    return getStructure(\n      SupportedFormat.cdx,\n      this.#formatterFactory,\n      this.#editor.struct(),\n    );\n  }\n\n  getInchi(withAuxInfo = false): Promise<string> {\n    return getStructure(\n      withAuxInfo ? SupportedFormat.inChIAuxInfo : SupportedFormat.inChI,\n      this.#formatterFactory,\n      this.#editor.struct(),\n    );\n  }\n\n  async getInChIKey(): Promise<string> {\n    const struct: string = await getStructure(\n      SupportedFormat.ket,\n      this.#formatterFactory,\n      this.#editor.struct(),\n    );\n\n    return this.structService.getInChIKey(struct);\n  }\n\n  containsReaction(): boolean {\n    const editor = CoreEditor.provideEditorInstance();\n    return (\n      this.editor.struct().hasRxnArrow() ||\n      editor?.drawingEntitiesManager?.micromoleculesHiddenEntities.hasRxnArrow()\n    );\n  }\n\n  isQueryStructureSelected(): boolean {\n    const structure = this.editor.struct();\n    const selection = this.editor.selection();\n\n    if (!selection) {\n      return false;\n    }\n\n    let hasQueryAtoms = false;\n    if (selection.atoms) {\n      hasQueryAtoms = selection.atoms.some((atomId) => {\n        const atom = structure.atoms.get(atomId);\n        assert(atom);\n        const sGroupIds = Array.from(atom.sgs.values());\n        const isQueryComponentSGroup = sGroupIds.some((sGroupId) => {\n          const sGroup = structure.sgroups.get(sGroupId);\n          assert(sGroup);\n          return SGroup.isQuerySGroup(sGroup);\n        });\n        return atom.isQuery() || isQueryComponentSGroup;\n      });\n    }\n\n    let hasQueryBonds = false;\n    if (selection.bonds) {\n      hasQueryBonds = selection.bonds.some((bondId) => {\n        const bond = structure.bonds.get(bondId);\n        assert(bond);\n        return bond.isQuery();\n      });\n    }\n    return hasQueryAtoms || hasQueryBonds;\n  }\n\n  async setMolecule(structStr: string): Promise<void | undefined> {\n    if (CoreEditor.provideEditorInstance()?.isSequenceEditInRNABuilderMode)\n      return;\n\n    runAsyncAction<void>(async () => {\n      assert(typeof structStr === 'string');\n\n      if (window.isPolymerEditorTurnedOn) {\n        deleteAllEntitiesOnCanvas();\n        await parseAndAddMacromoleculesOnCanvas(structStr, this.structService);\n      } else {\n        const struct: Struct = await prepareStructToRender(\n          structStr,\n          this.structService,\n          this,\n        );\n\n        struct.rescale();\n        this.#editor.struct(struct);\n        this.#editor.zoomAccordingContent(struct);\n        this.#editor.centerStruct();\n      }\n    }, this.eventBus);\n  }\n\n  async setHelm(helmStr: string): Promise<void | undefined> {\n    runAsyncAction<void>(async () => {\n      assert(typeof helmStr === 'string');\n      const struct: Struct = await prepareStructToRender(\n        helmStr,\n        this.structService,\n        this,\n      );\n      struct.rescale();\n      this.#editor.struct(struct);\n      this.#editor.zoomAccordingContent(struct);\n      this.#editor.centerStruct();\n    }, this.eventBus);\n  }\n\n  async addFragment(structStr: string): Promise<void | undefined> {\n    if (CoreEditor.provideEditorInstance()?.isSequenceEditInRNABuilderMode)\n      return;\n\n    runAsyncAction<void>(async () => {\n      assert(typeof structStr === 'string');\n\n      if (window.isPolymerEditorTurnedOn) {\n        await parseAndAddMacromoleculesOnCanvas(structStr, this.structService);\n      } else {\n        const struct: Struct = await prepareStructToRender(\n          structStr,\n          this.structService,\n          this,\n        );\n\n        struct.rescale();\n        this.#editor.structToAddFragment(struct);\n      }\n    }, this.eventBus);\n  }\n\n  async layout(): Promise<void> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('Layout is not available in macro mode');\n    }\n\n    runAsyncAction<void>(async () => {\n      const struct = await this._indigo.layout(\n        this.#editor.struct(),\n        this.editor.serverSettings,\n      );\n      const ketSerializer = new KetSerializer();\n      this.setMolecule(ketSerializer.serialize(struct));\n    }, this.eventBus);\n  }\n\n  async calculate(options?: CalculateData): Promise<CalculateResult> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('Calculate is not available in macro mode');\n    }\n    return await this._indigo.calculate(this.#editor.struct(), options);\n  }\n\n  /**\n   * @param {number} value - in a range [ZoomTool.instance.MINZOOMSCALE, ZoomTool.instance.MAXZOOMSCALE]\n   */\n  setZoom(value: number) {\n    const editor = CoreEditor.provideEditorInstance();\n    if (editor && value) editor.zoomTool.zoomTo(value);\n  }\n\n  setMode(mode: SupportedModes) {\n    const editor = CoreEditor.provideEditorInstance();\n    if (editor && mode) editor.events.selectMode.dispatch(ModeTypes[mode]);\n  }\n\n  exportImage(format: SupportedImageFormats, params?: ExportImageParams) {\n    const editor = CoreEditor.provideEditorInstance();\n    const fileName = 'ketcher';\n    let blobPart;\n\n    if (format === 'svg' && editor?.canvas) {\n      blobPart = getSvgFromDrawnStructures(\n        editor.canvas,\n        'file',\n        params?.margin,\n      );\n    }\n    if (!blobPart) {\n      throw new Error('Cannot export image');\n    }\n\n    const blob = new Blob([blobPart], {\n      type: BlobTypes[format],\n    });\n    saveAs(blob, `${fileName}.${format}`);\n  }\n\n  recognize(image: Blob, version?: string): Promise<Struct> {\n    if (window.isPolymerEditorTurnedOn) {\n      throw new Error('Recognize is not available in macro mode');\n    }\n    return this._indigo.recognize(image, { version });\n  }\n\n  async generateImage(\n    data: string,\n    options: GenerateImageOptions = {\n      outputFormat: 'png',\n    },\n  ): Promise<Blob> {\n    let meta = '';\n\n    switch (options.outputFormat) {\n      case 'svg':\n        meta = 'image/svg+xml';\n        break;\n\n      case 'png':\n      default:\n        meta = 'image/png';\n        options.outputFormat = 'png';\n    }\n    const serverSettings = this.editor.serverSettings;\n\n    const base64 = await this.structService.generateImageAsBase64(data, {\n      ...serverSettings,\n      ...options,\n    });\n    const byteCharacters = atob(base64);\n    const byteNumbers = new Array(byteCharacters.length);\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    const blob = new Blob([byteArray], { type: meta });\n    return blob;\n  }\n\n  public reinitializeIndigo(structService: StructService) {\n    this.structService = structService;\n    this._indigo = new Indigo(structService);\n  }\n\n  public sendCustomAction(name: string) {\n    this.eventBus.emit('CUSTOM_BUTTON_PRESSED', name);\n  }\n\n  public updateMonomersLibrary(rawMonomersData: string | JSON) {\n    const editor = CoreEditor.provideEditorInstance();\n\n    ketcherProvider.getKetcher();\n\n    if (!editor) {\n      throw new Error(\n        'Updating monomer library in small molecules mode is not allowed, please switch to macromolecules mode',\n      );\n    }\n\n    editor.updateMonomersLibrary(rawMonomersData);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  StructService,\n  StructServiceOptions,\n  StructServiceProvider,\n} from 'domain/services';\n\nimport { Editor } from 'application/editor';\nimport { FormatterFactory } from 'application/formatters';\nimport { Ketcher } from './ketcher';\nimport assert from 'assert';\nimport { ketcherProvider } from './utils';\n\nexport const DefaultStructServiceOptions = {\n  'smart-layout': true,\n  'ignore-stereochemistry-errors': true,\n  'mass-skip-error-on-pseudoatoms': false,\n  'gross-formula-add-rsites': true,\n  'aromatize-skip-superatoms': true,\n  'dearomatize-on-load': false,\n  'ignore-no-chiral-flag': false,\n};\n\nexport class KetcherBuilder {\n  #structServiceProvider?: StructServiceProvider;\n\n  withStructServiceProvider(\n    structServiceProvider: StructServiceProvider,\n  ): KetcherBuilder {\n    this.#structServiceProvider = structServiceProvider;\n    return this;\n  }\n\n  build(editor: Editor, serviceOptions?: StructServiceOptions): Ketcher {\n    assert(editor != null);\n    assert(this.#structServiceProvider != null);\n\n    const mergedServiceOptions: StructServiceOptions = {\n      ...DefaultStructServiceOptions,\n      ...serviceOptions,\n    };\n    const structService: StructService =\n      this.#structServiceProvider!.createStructService(mergedServiceOptions);\n    const ketcher = new Ketcher(\n      editor,\n      structService,\n      new FormatterFactory(structService),\n    );\n    ketcher[this.#structServiceProvider.mode] = true;\n\n    ketcherProvider.setKetcherInstance(ketcher);\n    return ketcher;\n  }\n}\n"],"names":["ElementColor","H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og","elementsArray","number","label","period","group","title","state","origin","type","mass","leftH","elementsMap","reduce","acc","element","set","Map","Elements","get","key","filter","predicate","getAll","concat","AtomLabel","Generics","itemSets","displayName","items","description","subGroups","getGenericsList","generics","_generics$","Array","isArray","map","item","result","_i","_Object$values","Object","values","length","subGroup","_toConsumableArray","genericsList","IMAGE_KEY","IMAGE_SERIALIZE_KEY","CURSOR_DIAGONAL_NWSE","CURSOR_DIAGONAL_NESW","CURSOR_VERTICAL","CURSOR_HORIZONTAL","imageReferencePositionToCursor","topLeftPosition","topMiddlePosition","topRightPosition","rightMiddlePosition","bottomRightPosition","bottomMiddlePosition","bottomLeftPosition","leftMiddlePosition","MULTITAIL_ARROW_KEY","MULTITAIL_ARROW_TOOL_NAME","MULTITAIL_ARROW_SERIALIZE_KEY","MOVE","CURSOR_RESIZE_VERTICAL","CURSOR_RESIZE_HORIZONTAL","multitailReferencePositionToCursor","topTail","tails","bottomTail","topSpine","bottomSpine","head","multitailArrowReferenceLinesToCursor","spine","AtomList","params","_classCallCheck","notList","ids","_createClass","value","labelList","labels","_iterator","_createForOfIteratorHelper","_step","s","n","done","id","currenElement","push","err","e","f","join","equals","atomList","sort","toString","ifDef","target","defaultValue","undefined","tfx","parsedValue","parseFloat","toFixed","LogLevel","KetcherLogger","_window","_window$ketcher$loggi","_window$ketcher","window","ketcher","Error","logging","newSettings","_Object$entries","entries","_Object$entries$_i","_slicedToArray","settingName","settingValue","settings","log","isMinimumLogLevel","LOG","showTrace","_len","arguments","messages","_key","console","trace","info","INFO","_len2","_key2","warn","WARN","_len3","warnings","_key3","error","ERROR","_len4","errors","_key4","minimumLevel","_this$settings","enabled","level","KetcherAsyncEvents","runAsyncAction","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","action","eventEmitter","res","wrap","_callee$","_context","prev","next","emit","LOADING","sent","SUCCESS","abrupt","t0","FAILURE","stop","_x","_x2","apply","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","i","charCodeAt","byteArray","Uint8Array","blob","Blob","notifyRequestCompleted","event","Event","dispatchEvent","KETCHER_SAVED_SETTINGS_KEY","KETCHER_SAVED_OPTIONS_KEY","SettingsManager","getSettings","JSON","parse","localStorage","getItem","saveSettings","setItem","stringify","getOptions","optionsFromLocalStorage","bondLength","bondLengthUnit","saveOptions","options","_this$getSettings","selectionTool","_objectSpread","_disableCustomQuery","disableCustomQuery","_this$getOptions","ignoreChiralFlag","mac","navigator","test","platform","normalizeKeyName","name","parts","split","alt","ctrl","shift","meta","mod","normalizeKeyMap","copy","create","keys","forEach","prop","modifiers","altKey","ctrlKey","metaKey","shiftKey","symbolByEvent","KN","keyCode","normalizeKeyEvent","base","isChar","isControlKey","keyNorm","obj","KeyboardEvent","_typeof","setHotKey","actName","hotKeys","initHotKeys","actions","act","shortcut","lookup","baseName","shortcutAliasMap","Escape","Delete","Mod","isMacOs","shortcutStr","shortcutKey","replace","toUpperCase","generateMenuShortcuts","_obj$key","processedShortcut","ChemicalMimeType","isClipboardAPIAvailable","_navigator","_navigator2","clipboard","writeText","read","legacyCopy","clipboardData","data","curFmt","setData","fmt","legacyPaste","cb","formats","getData","d","notifyCopyCut","getStructStringFromClipboardData","_getStructStringFromClipboardData","clipboardItem","structStr","ClipboardItem","safelyGetMimeType","KET","t2","Mol","t1","Rxn","text","_x3","_safelyGetMimeType","_callee2","mimeType","_callee2$","_context2","getType","Vec2","args","x","y","z","Math","sqrt","v","add","add_","get_xy0","sub","scaled","sInitial","isFinite","negated","yComplement","y1","addScaled","normalized","normalize","l","turnLeft","coordStr","max","assert","min","ceil","floor","rotate","angle","sin","cos","rotateSC","rotateAroundOrigin","angleInDegrees","angleInRadians","PI","offsetX","offsetY","rotatedX","rotatedY","Number","isInsidePolygon","points","inside","j","xi","yi","xj","yj","intersect","calculateDistanceToLine","line","dist","a","b","c","per","oxAngle","atan2","diff","v1","v2","sum","dot","cross","lc","lc2","f1","f2","centre","getLinePoint","lineStart","lineEnd","difference","distance","ratio","crossProduct","radiansToDegrees","radians","degrees_to_radians","degrees","oxAngleForVector","findSecondPoint","startPoint","lineLength","lineAngleRadians","deltaX","deltaY","endPoint","_defineProperty","Pile","_Set","_inherits","_callSuper","find","setB","isSuperset","subset","_iterator2","_step2","has","expression","from","union","_iterator3","_step3","intersection","thisSet","unionIntersections","sets","unionized","setsToReturn","prevSets","curSet","isCurSetMerged","newSets","intersec","size","_wrapNativeSuper","Set","INVALID","BaseMicromoleculeEntity","initiallySelected","getInitiallySelected","setInitiallySelected","resetInitiallySelected","invalidate","CIP","Bond","_BaseMicromoleculeEnt","attributes","_attributes$cip","_this","begin","end","xxx","stereo","PATTERN","STEREO","NONE","topology","TOPOLOGY","EITHER","customQuery","reactingCenterStatus","cip","len","sb","sa","isPreview","beginSuperatomAttachmentPointNumber","endSuperatomAttachmentPointNumber","TYPE","ANY","center","isQuery","TYPES","QUERY_BOND_TYPES","SINGLE_OR_DOUBLE","SINGLE_OR_AROMATIC","DOUBLE_OR_AROMATIC","AROMATIC","includes","SINGLE","hasRxnProps","getCenter","struct","p1","atoms","pp","p2","getDir","clone","aidMap","cp","getAttachedSGroups","_struct$atoms$get","_struct$atoms$get2","sGroupsWithBeginAtom","sgs","sGroupsWithEndAtom","isExternalBondBetweenMonomers","isBondFromMacromolecule","sGroup1","getGroupFromAtomId","sGroup2","getAttrHash","bond","attrs","attr","attrlist","getBondNeighbourIds","bondId","bonds","beginBondIds","Atom","getConnectedBondIds","endBondIds","getFusingConditions","bondBegin","bondEnd","_this$PATTERN$TYPE","DOUBLE","isFusingToDoubleBond","isFusingToSingleBond","isFusingDoubleSingleSingle","isFusingSingleSingleDouble","isAllSingle","getBenzeneConnectingBondType","_this$PATTERN$TYPE2","_Bond$getFusingCondit","getCyclopentadieneFusingBondType","_this$PATTERN$TYPE3","_Bond$getFusingCondit2","getCyclopentadieneDoubleBondIndexes","_Bond$getFusingCondit3","attrGetDefault","isBondToHiddenLeavingGroup","beginSuperatomAttachmentPoint","getSuperAtomAttachmentPointByLeavingGroup","endSuperatomAttachmentPoint","isHiddenLeavingGroupAtom","atomId","isBondToExpandedMonomer","sgroups","some","sgroup","isExpanded","MonomerMicromolecule","TRIPLE","DATIVE","HYDROGEN","UP","DOWN","CIS_TRANS","RING","CHAIN","REACTING_CENTER","NOT_CENTER","UNMARKED","CENTER","UNCHANGED","MADE_OR_BROKEN","ORDER_CHANGED","MADE_OR_BROKEN_AND_CHANGED","Box2Abs","p0","extend","lp","rb","include","p","contains","ext","translate","transform","sz","pos","hasZeroArea","fromRelBox","relBox","width","height","b1","b2","segmentIntersection","dc","dd","da","db","_classStaticPrivateMethodGet","_isPointOnSegment","call","segPointA","segPointB","point","minX","maxX","minY","maxY","canvasToModel","microModeScale","modelToCanvas","vector","Scale","isCorrectStereoCenter","beginNeighs","endNeighs","beginAtom","EndAtomNeigh","NaN","aid","_struct$atomGetNeighb","implicitH","atomGetNeighbors","StereoValidator","FunctionalGroupsProvider","functionalGroupsList","getFunctionalGroupsList","setFunctionalGroupsList","list","addToFunctionalGroupsList","getInstance","instance","SaltsAndSolventsProvider","saltsAndSolventsList","getSaltsAndSolventsList","setSaltsAndSolventsList","SgContexts","Fragment","Multifragment","Group","selectionKeys","defaultBondThickness","MonomerGroups","MonomerGroupCodes","MonomerCodeToGroup","R","SUGARS","A","BASES","G","T","X","PHOSPHATES","SGroupBracketParams","w","h","SGroup","bracketBox","bracketDirection","areas","hover","hovering","selected","selectionPlate","patoms","xBonds","neiAtoms","attachmentPoints","mul","connectivity","subscript","expanded","attached","absolute","showUnits","nCharsToDisplay","tagChar","daspPos","fieldType","fieldName","fieldValue","units","query","queryOp","getAttr","setFunctionalGroup","functionalGroup","getAttrs","setAttr","oldValue","checkAttr","updateOffset","isSuperAtom","Boolean","isContracted","calculatePP","topLeftPoint","isAtomContext","context","isBondContent","contentBoxes","contentBB","atom","bba","bbb","descriptorIntersects","sAtom","sAtomPP","getMassCentre","isGroupAttached","getConnectionPointsCount","addAttachmentPoint","attachmentPoint","validateUniqueness","isAttachmentPointAlreadyExist","leaveAtomId","addAttachmentPoints","removeAttachmentPoint","index","indexOf","splice","getAttachmentPoints","connectionAtoms","neighbors","isNotContractible","getAttachmentAtomId","_this$attachmentPoint","getContractedPosition","_this$attachmentPoint2","_this2","representAtom","externalConnectionAtom","isBeginAtomInCurrentSgroup","isEndAtomInCurrentSgroup","isNumber","position","cloneAttachmentPoints","atomIdMap","SUP","getOffset","isSaltOrSolvent","moleculeName","saltsAndSolventsProvider","saltsAndSolvents","_ref2","abbreviation","isAtomInSaltOrSolvent","sgroupsOnCanvas","_this3","onlySaltsOrSolvents","_ref3","atomIdInSaltOrSolvent","isBondInSaltOrSolvent","_this4","_ref4","bondIdInSaltOrSolvent","filterAtoms","newAtoms","removeNegative","_mol","sg","atomMap","field","elem","allAtoms","addAtom","removeAtom","getCrossBonds","mol","parentAtomSet","crossBonds","bid","bracketPos","sGroup","crossBondsPerAtom","remol","render","BORDER_EXT","PADDING_VECTOR","flat","isMonomer","braketBox","getAtom","structBoundingBox","getVBoxObj","editor","attachmentPointsVBox","ctab","getRGroupAttachmentPointsVBoxByAtomIds","getBracketParameters","atomSet","bb","brackets","crossBondsPerAtomValues","bracketWidth","cl","cr","bracketHeight","cl0","cr0","dr","dl","getObjBBox","a0","getAtoms","_atom","getBonds","prepareMulForSaving","inBonds","xAtom1","xAtom2","crossBond","bond1","bond2","tailAtom","_loop","amap","aid2","newBond","newCrossBond","xBond2","sGroupForest","getPathToRoot","reverse","sgid","atomAddToSGroup","isBondInContractedSGroup","sGroups","sGroupOrReSGroup","atomsInSGroup","isDataSGroup","DAT","isQuerySGroup","queryComponent","isSRUSGroup","SRU","isMulSGroup","MUL","MON","MER","COP","CRO","MOD","GRA","COM","MIX","FOR","GEN","contractedSGroup","sgBottomRightPoint","bottomRightPoint","_SGroup","monomer","sgroupContractedPosition","_get","_getPrototypeOf","prototype","monomerMicromolecule","monomerMicromoleculeClone","AttachmentPoints","StereoLabel","fragment","getValueOrDefault","alias","isotope","radical","charge","rglabel","implicitHCount","explicitValence","valence","ringBondCount","substitutionCount","unsaturatedAtom","hCount","queryProperties","property","_attributes$queryProp","aam","invRet","exactChangeFlag","rxnFragmentType","stereoLabel","stereoParity","badConn","defineProperty","_assertThisInitialized","enumerable","getPseudo","isCorrectPseudo","setRGAttachmentPointForDisplayPurpose","FirstSideOnly","fidMap","ret","isAnyAtom","isAnyMetal","isAnyHalogen","isAnyGroup","pureHydrogen","isPlainCarbon","isPseudo","calcValence","connectionCount","groupno","radicalCount","radicalElectrons","hydrogenCount","absCharge","abs","isHeteroAtom","calcValenceMinusHyd","conn","rad","_step$value","isInAromatizedRing","loops","_step2$value","_","loop","halfBondIds","hbs","aromatic","halfBondId","halfBond","halfBonds","getSuperAtomAttachmentPointByAttachmentAtom","isSuperatomLeavingGroupAtom","isSuperatomAttachmentAtom","getAttachmentAtomExternalConnections","attachmentAtomId","leavingGroupAtomid","attachmentPointAtomBonds","attachmentAtomExternalConnection","endAtom","attachmentAtomExternalConnections","isSuperatomWithoutLabel","attachmentPointNumber","RADICAL","SINGLET","DOUPLET","TRIPLET","STEREO_PARITY","ODD","EVEN","aromaticity","ringMembership","ringSize","chirality","FixedPrecisionCoordinates","fixedPrecisionValue","multiply","isFixedPrecision","multiplier","round","MULTIPLIER","divide","delimiter","getFloatingPrecision","fromFloatingPrecision","pow","StereoFlag","calcStereoFlag","stereoAids","filteredStereoAtoms","hasAnotherLabel","stereoFlag","Mixed","_stereoLabel$match","match","Abs","And","Or","_enhancedStereoFlag","WeakMap","_stereoAtoms","stereoAtoms","stereoFlagPosition","properties","_classPrivateFieldInitSpec","writable","_classPrivateFieldSet","_classPrivateFieldGet","fr","updateStereoFlag","updateStereoAtom","frId","isAdd","addStereoAtom","deleteStereoAtom","fragmentId","getDefaultStereoFlagPosition","getFragment","getCoordBoundingBox","_sgroup","FunctionalGroup","isFunctionalGroup","provider","functionalGroups","atomsInFunctionalGroup","isNeedCheckForGroups","fg","relatedSGroup","bondsInFunctionalGroup","molecule","isRGroupAttachmentPointInsideFunctionalGroup","rgroupAttachmentPoint","rgroupAttachmentPoints","attachedAtom","findFunctionalGroupByAtom","isFunctionalGroupReturned","relatedSGroupId","findFunctionalGroupByBond","_iterator4","_step4","findFunctionalGroupBySGroup","isAtomInContractedFunctionalGroup","sgroupsFromReStruct","contractedFunctionalGroups","isContractedFunctionalGroup","isBondInContractedFunctionalGroup","_sGroup","isHalfBondInContractedFunctionalGroup","HalfBond","dir","norm","ang","contra","leftSin","leftCos","leftNeighbor","rightSin","rightCos","rightNeighbor","Loop","isConvex","dblBonds","convex","hb","RGroup","atrributes","frags","resth","range","ifthen","fid","findRGroupByFragment","rgroups","frid","_rgid","rgroup","RGroupAttachmentPoint","atomToNewAtom","newAtomId","RxnArrowMode","RxnArrow","currentP","mode","defaultHeight","isElliptical","_attributes$height","arrow","EllipticalArcFilledBow","EllipticalArcFilledTriangle","EllipticalArcOpenHalfAngle","EllipticalArcOpenAngle","RxnPlus","SGroupForest","parent","children","atomSets","getSGroupsBFS","order","queue","getAtomSetRelations","newId","isStrictSuperset","isSubset","parents","childs","findIndex","childId","path","insert","_this$children$get","guess","resetParentLink","parentId","childIndex","remove","_this$children$get2","_this3$children$get","checkOverlapping","sGroupType","searchFunction","common","sid","sgAtoms","SimpleObjectMode","SimpleObject","rectangle","Pool","_Map","nextId","keyOf","changeInitiallySelectedPropertiesForPool","newPool","getStereoAtomsMap","stereoAtomsMap","correctAtomIds","_stereoAtomsMap$get","getStereoParity","newAtomParity","arrayAddIfMissing","array","Struct","isReaction","rxnArrows","rxnPluses","simpleObjects","texts","highlights","_aid","_bid","hasRxnArrow","hasMultitailArrow","multitailArrows","hasRxnPluses","isRxn","isBlank","images","isSingleGroup","bondSet","dropRxnSymbols","simpleObjectsSet","textsSet","rgroupAttachmentPointSet","imagesSet","multitailArrowsSet","bidMap","mergeInto","getScaffold","rg","_fnum","getFragmentIds","_fid","copyNonFragmentObjects","keepAllRGroups","bidMapEntity","fidMask","_frag","rgroupsIds","rgid","keepGroup","newfid","oldfid","sgroupIdMap","sgroupId","oldSgroup","soid","prepareLoopStructure","initHalfBonds","initNeighbors","updateHalfBonds","sortNeighbors","findLoops","calcConn","findBondId","a1","a2","hb1","hb2","bondInitHalfBonds","halfBondUpdate","sgroup1","sgroup2","startCoords","endCoords","coordsDifference","clear","setHbNext","hbid","halfBondSetAngle","left","hbl","atomAddNeighbor","ir","il","atomSortNeighbors","_this5","nei","nei2","nextNei","_this6","atomUpdateHalfBonds","_this7","_this8","sGroupsRecalcCrossBonds","_this9","sGroupDelete","_this10","atomSetPos","rxnPlusSetPos","rxnArrowSetPos","simpleObjectSetPos","textSetPosition","vec","global","getCoordBoundingBoxObj","getBondLengthData","_this11","totalLength","cnt","getAvgBondLength","bld","getAvgClosestAtomDistance","totalDist","minDist","k","checkBondExists","findConnectedComponent","firstaid","_this12","pop","neiId","findConnectedComponents","discardExistingFragments","_this13","addedAtoms","components","component","markFragment","idSet","_this14","frag","markFragments","_this15","comp","_comp","firstAtom","scale","image","rescaleSize","multitailArrow","rescale","avg","loopHasSelfIntersections","hbi","ai","bi","hbj","aj","bj","partitionLoop","subloops","continueFlag","atomToHalfBond","aid1","subloop","halfBondAngle","hbid1","hbid2","hba","hbb","loopIsConvex","_this16","every","loopArr","loopIsInner","_this17","totalAngle","hbida","hbidb","_this18","newLoops","bondsToMark","hbIdNext","hbId","loopId","calcImplicitHydrogen","_this$calcConn","_this$calcConn2","isAromatic","correctConn","hasImplicitH","setImplicitHydrogen","_this19","setStereoLabelsToAtoms","_this20","stereAtomsMap","_this20$atomGetNeighb","stereoProp","_this$atoms$get","_this21","getComponents","_this22","connectedComponents","barriers","arrowPos","reactants","products","defineRxnFragmentTypeForAtomset","atomset","arrowpos","getBondFragment","_this$bonds$get","_this$atoms$get2","bindSGroupsToFunctionalGroups","_this23","getGroupIdFromAtomId","_Array$from","_Array$from$_i","groupId","_this$sgroups","getGroupIdFromBondId","_i2","_Array$from2","_Array$from2$_i","getGroupFromBondId","_this$sgroups2","getGroupsIdsFromBondId","groupsIds","_i3","_Array$from3","_Array$from3$_i","getBondIdByHalfBond","getSelectedVisibleAtoms","selection","_selection$atoms","_this24","isAtomNotInContractedGroup","getRGroupAttachmentPointsByAtomId","_id","isAtomFromMacromolecule","bondOrBondId","isFunctionalGroupFromMacromolecule","functionalGroupId","isTargetFromMacromolecule","disableInitiallySelected","enableInitiallySelected","TextCommand","preparePositions","positions","Text","content","setPos","coords","customizer","clonedValue","cloneDeep","getNodeWithInvertedYCoord","node","cloneDeepWith","setMonomerTemplatePrefix","templateName","setMonomerPrefix","monomerId","setAmbiguousMonomerTemplatePrefix","setAmbiguousMonomerPrefix","getKetRef","entityId","$ref","rotateCoordAxisBy180Degrees","axis","rotatedPosition","switchIntoChemistryCoordSystem","Axis","populateStructWithSelection","populatedStruct","entity","_populatedStruct$enti","selectedEntities","arrowToKet","arrowNode","plusToKet","plusNode","coord","location","headerToKet","header","editorSettings","macroModeScale","provideEditorSettings","canvasSelector","drawnStructuresSelector","notifyRenderComplete","debounce","notifyItemsToMergeInitializationComplete","SCROLL_POSITION","AUTO_SCROLL_OFFSET_X","AUTO_SCROLL_OFFSET_Y","ZoomTool","drawingEntitiesManager","_this$zoom","zoom","translateBy","canvasWrapper","dx","_this$zoom2","dy","resizeObserver","ResizeObserver","drawScrollBars","observe","select","canvas","zoomLevel","zoomTransform","ZoomTransform","initActions","scaleExtent","MINZOOMSCALE","MAXZOOMSCALE","wheelDelta","defaultWheelDelta","preventDefault","on","zoomAction","bind","mouseWheeled","setZoom","getZoomLevel","setZoomTransform","requestAnimationFrame","dispatchZoomEventHandlers","subscribeOnZoomEvent","zoomEventHandler","zoomEventHandlers","initScrollBars","renderScrollBar","scrollBars","horizontal","vertical","scrollBar","hasOffset","offsetStart","offsetEnd","bar","updateScrollBarAttrs","drawScrollBar","_scrollBar$bar","_scrollBar$bar2","append","dragged","drag","_scrollBar$bar5","_this$calculateDynami","calculateDynamicAttr","start","_scrollBar$bar3","maxHeight","HORIZONTAL_DIST_TO_EDGE","WIDTH","_scrollBar$bar4","VERTICAL_DIST_TO_EDGE","RADIUS","COLOR","clamp","MARGIN","maxWidth","MIN_LENGTH","scrollTo","_this$canvasWrapper$n","_this$canvasWrapper$n2","_this$zoom3","stickToBottom","xOffset","yOffset","isOffsetInPercents","canvasWrapperHeight","baseVal","canvasWrapperWidth","translateTo","unzoomValue","scrollBy","_this$zoom4","scrollToVerticalCenter","structCenterY","_this$zoom5","centerPointOfModel","getCurrentCenterPointOfCanvas","scrollToVerticalBottom","_this$zoom6","isShiftKeydown","boxNode","_this$zoom7","_this$zoom8","_this$canvas$node","_this$canvasWrapper$n3","_this$canvasWrapper$n4","_this$canvasWrapper$n5","_this$scrollBars","_this$scrollBars2","boundingBox","getBoundingClientRect","wrapperBoundingBox","right","top","bottom","zoomIn","zoomStep","zoomToLeftTopCorner","zoomOut","_newZoomLevel","_this$zoom9","newZoomLevel","_this$zoomTransform","scaleFactor","newX","newY","zoomTo","resetZoom","_this$zoom10","deltaMode","scaleCoordinates","applyX","applyY","invertZoom","invertX","invertY","zoomValue","destroy","_this$scrollBars$hori","_this$scrollBars$vert","_this$resizeObserver","unobserve","isFitToCanvasHeight","zoomStructureToFitHalfOfCanvas","structureBbox","MAX_AUTOSCALE","OFFSET_FROM_CANVAS_BORDER","canvasWrapperSize","_this$canvasWrapper$n6","canvasWrapperBbox","_this$canvasWrapper$n7","_instance","initInstance","Coordinates","viewToModel","modelToView","canvasToView","viewToCanvas","canvasToMonomerCoordinates","coordinatesOnCanvas","centerOFMonomer","monomerWidth","monomerHeight","zeroPointCoord","monomerCoord","findLabelPoint","pointOnBorder","lineOffset","labelSize","isUsed","angleRadians","pointOfAttachment","attachmentVector","rotatedVector","normalizedVector","normalizedAttachmentVector","addedOrtogonalOffset","addedParallelOffset","ortogonalOffset","parallelOffset","labelCoordinates","getSearchFunction","initialAngle","canvasOffset","findPointOnMonomerBorder","coordStart","applyZoomForPositionCalculation","secondPoint","newLength","newCoordStart","zoomedCoordinateOfSecondPoint","CoordinatesTool","newPointCoord","elementsAtPoint","document","elementsFromPoint","isCurrentMonomerAtNewPoint","_monomer$renderer","renderer","bodyElement","newAngle","anglesToSector","attachmentPointNumberToAngle","sectorsList","checkFor0and360","getAttachmentPointLabelWithBinaryShift","attachmentPointLabel","rgi","getAttachmentPointLabel","getAttachmentPointNumberFromLabel","fromRlabel","val","moleculeToKet","body","rglabelToKet","atomToKet","bondToKet","sgroupToKet","source","_monomer$monomerItem$","monomerItem","props","MonomerCaps","parseInt","stereoCare","weight","refsToRGroups","rgnumber","sgroupAttachmentPointToKet","attachmentId","mergeFragmentsToStruct","ketItem","atomsOffset","fragments","_fragment$atoms","_fragment$bonds","_fragment$atoms2","atomToStruct","bondToStruct","toRlabel","moleculeToStruct","rglabelToStruct","addRGroupAttachmentPointsToStruct","sgroupData","sgroupToStruct","queryAttribute","elements","el","_Elements$get","mapping","attributeName","newAtom","$refs","attachedAtomId","SecondSideOnly","BothSides","atomOffset","toLowerCase","_source$attachmentPoi","sourceAttachmentPoint","sourceAttachmentPointIndex","sgroupAttachmentPointToStruct","placement","display","fieldData","attachmentAtom","leavingAtomId","leavingAtom","SGroupAttachmentPoint","prepareStructForKet","ketNodes","rgFrags","fragsAtoms","getFragmentCenter","filteredFragmentIds","addMolecules","toKetNode","ketNode","filteredSGroups","filteredSGroupsMap","fragmentIds","sGroupFragmentsMap","generateSGroupFragmentsMap","mergedFragments","atomsInFragment","hasAtomInSGroup","sGroupId","fragmentSet","rgroupToKet","rlogic","rgroupLogicToKet","rglogic","rgroupToStruct","rgroupLogicToStruct","_value","rxnToStruct","plus","simpleObjectToKet","simpleObjectNode","simpleObjectToStruct","object","circleToEllipse","simpleObject","radius","pos0","ellipse","textToKet","textNode","textToStruct","KetNodeType","KetConnectionType","KetMonomerClass","KetTemplateType","KetAmbiguousMonomerTemplateSubType","KetMonomerGroupTemplateClass","Command","addOperation","operation","operations","merge","command","setUndoOperationByPriority","setUndoOperationReverse","undoOperationReverse","setUndoOperationsByPriority","invert","renderersManagers","priority","reinitializeViewModel","invertAfterAllOperations","runPostRenderMethods","execute","executeAfterAllOperations","EditorType","SequenceType","IsChainCycled","ToolName","editorEvents","resetEditorEvents","selectMonomer","Subscription","selectPreset","selectTool","createBondViaModal","cancelBondCreationViaModal","selectMode","layoutModeChange","selectHistory","openErrorModal","openMonomerConnectionModal","mouseOverPolymerBond","mouseLeavePolymerBond","mouseOnMovePolymerBond","mouseOverMonomer","mouseOnMoveMonomer","mouseLeaveMonomer","mouseOverAttachmentPoint","mouseLeaveAttachmentPoint","mouseUpAttachmentPoint","mouseDownAttachmentPoint","mouseOverDrawingEntity","mouseLeaveDrawingEntity","mouseUpMonomer","rightClickSequence","rightClickCanvas","rightClickPolymerBond","rightClickSelectedMonomers","editSequence","startNewSequence","turnOnSequenceEditInRNABuilderMode","turnOffSequenceEditInRNABuilderMode","modifySequenceInRnaBuilder","mouseOverSequenceItem","mouseOnMoveSequenceItem","mouseLeaveSequenceItem","changeSequenceTypeEnterMode","toggleSequenceEditMode","toggleSequenceEditInRNABuilderMode","clickOnSequenceItem","mousedownBetweenSequenceItems","mouseDownOnSequenceItem","doubleClickOnSequenceItem","openConfirmationDialog","mouseUpAtom","updateMonomersLibrary","createAntisenseChain","copySelectedStructure","deleteSelectedStructure","renderersEvents","hotkeysConfiguration","RNASequenceType","handler","events","dispatch","RNA","DNASequenceType","DNA","PEPTIDESequenceTYpe","PEPTIDE","exit","selectRectangle","undo","onSelectHistory","redo","erase","isSequenceEditMode","modelChanges","selectAllDrawingEntities","renderersContainer","update","hand","Raphael","raphaelModule","require","translateAbs","delta","st","Visel","paths","boxes","oldBoundingBox","exts","degree","ReObject","viselType","visel","changeSelectionStyle","hoverStyle","_this$hovering","_this$hovering2","fill","vbox","setHover","noredraw","removed","show","paper","setStart","drawHover","setFinish","hide","_render","makeSelectionPlate","_restruct","_paper","_styles","LayerMap","StereoColoringType","StereLabelStyleType","FRAC","setFracAngle","calcAngle","pos1","fracAngle","angle2","calcNewAtomPos","BONDS_MERGE_ANGLE","BONDS_MERGE_SCALE","mergeBondsParams","struct1","struct2","begin1","begin2","end1","end2","mergeAngle","merged","inRange","defaultOptions","renderOptions","getOptionsWithConvertedUnits","scaleFactorMicro","scaleFactorMacro","rotationStep","utils","labelFontSize","subFontSize","disableQueryElements","showAtomIds","showBondIds","showHalfBondIds","showLoopIds","showValenceWarnings","autoScale","autoScaleMargin","maxBondLength","atomColoring","hideImplicitHydrogen","hideTerminalLabels","carbonExplicitly","showCharge","showHydrogenLabels","ShowHydrogenLabels","TerminalAndHetero","showValence","aromaticCircle","lineWidth","bondSpace","bondSpacingInPx","stereoBond","stereoBondWidthInPx","fontszsubInPx","font","fontszInPx","fontRLabel","fontRLogic","radiusScaleFactor","lineattr","stroke","bondThicknessInPx","arrowSnappingStyle","bondSnappingStyle","selectionStyle","innerHoverStyle","sgroupBracketStyle","lassoStyle","selectionStyleSimpleObject","movingStyle","cursor","atomSelectionPlateRadius","contractedFunctionalGroupSize","previewOpacity","viewOnlyMode","assign","measureMap","px","cm","pt","inch","convertValue","measureFrom","measureTo","convertedValue","convertHashSpacingToPx","convertedOptions","defaultUnit","fontsz","fontszUnit","fontszsub","fontszsubUnit","bondSpacing","convertedBondLength","bondThickness","bondThicknessUnit","stereoBondWidth","stereoBondWidthUnit","hashSpacing","hashSpacingInPx","hashSpacingUnit","MeasurementUnits","UsageInMacromolecule","box","shiftRayBox","r","rc","rd","pid","nid","id0","id1","calcCoordinates","aPoint","bPoint","lengthHyp","pos2","oPos2","D","getCIPValuePath","cipLabelPosition","atomOrBond","getBBox","rect","toFront","drawCIPLabel","restruct","_restruct$render","cipValuePath","addReObjectPath","additionalInfo","updateHalfBondCoordinates","xShift","escapeHtml","str","useLabelStyles","attachmentPointSelected","attachmentPointUsed","usageInMacromolecule","color","MonomerPreview","MonomerConnectionsModal","BondPreview","util","PathBuilder","initialPath","pathParts","addMovement","to","generatePoint","addLine","addClosedLine","addQuadraticBezierCurve","control","addPathParts","addOpenArrowPathParts","arrowLength","tipXOffset","tipYOffset","endX","tipX","addFilledTriangleArrowPathParts","triangleLength","triangleWidth","triangleBottom","addMultitailArrowBase","topY","bottomY","spineX","tailLength","cubicBezierOffset","tailX","tailStart","build","ARROW_HEAD_LENGHT","ARROW_HEAD_WIDTH","ARROW_HEAD_ATTR","ARROW_OFFSET","ARROW_DASH_INTERVAL","ARROW_FAIL_SIGN_WIDTH","ARROW_UNBALANCED_OFFSET","getArrowHeadDimensions","_getOptionsWithConver","arrowHeadLength","arrowHeadWidth","arrowHeadAttr","arrowOffset","getUnbalancedArrowHeadOffset","_getOptionsWithConver2","rectangleArrowHighlightAndSelection","_ref$pos","wOffset","hOffset","svgPath","rx","ry","polyline","isResizing","shouldApplySnappingStyle","OpenAngle","arrowOpenAngle","FilledTriangle","arrowFilledTriangle","FilledBow","arrowFilledBow","DashedOpenAngle","arrowDashedOpenAngle","Failed","arrowFailed","Retrosynthetic","arrowRetrosynthetic","BothEndsFilledTriangle","arrowBothEndsFilledTriangle","EquilibriumFilledHalfBow","arrowEquilibriumFilledHalfBow","EquilibriumFilledTriangle","arrowEquilibriumFilledTriangle","EquilibriumOpenAngle","arrowEquilibriumOpenAngle","UnbalancedEquilibriumFilledHalfBow","arrowUnbalancedEquilibriumFilledHalfBow","UnbalancedEquilibriumOpenHalfAngle","arrowUnbalancedEquilibriumOpenHalfAngle","UnbalancedEquilibriumLargeFilledHalfBow","arrowUnbalancedEquilibriumLargeFilledHalfBow","UnbalancedEquilibriumFilledHalfTriangle","arrowUnbalancedEquilibriumFilledHalfTriangle","arrowEllipticalArcFilledBow","arrowEllipticalArcFilledTriangle","arrowEllipticalArcOpenAngle","arrowEllipticalArcOpenHalfAngle","arrowAngle","_ref2$pos","direction","_getArrowHeadDimensio","transformedPath","_ref3$pos","_getArrowHeadDimensio2","_ref4$pos","_getArrowHeadDimensio3","_ref5","_ref5$pos","_getArrowHeadDimensio4","_ref6","_ref6$pos","_getArrowHeadDimensio5","pathBuilder","_ref7","_ref7$pos","_getArrowHeadDimensio6","_ref8","_ref8$pos","_getArrowHeadDimensio7","_ref9","_ref9$pos","_getArrowHeadDimensio8","_getOptionsWithConver3","dashInterval","_ref10","_ref10$pos","_getArrowHeadDimensio9","_getOptionsWithConver4","failSignWidth","arrowCenter","_ref11","_ref11$pos","_getArrowHeadDimensio10","_ref12","_ref12$pos","_getArrowHeadDimensio11","_ref13","_ref13$pos","_getArrowHeadDimensio12","_ref14","_ref14$pos","_getArrowHeadDimensio13","_ref15","_ref15$pos","_getArrowHeadDimensio14","_ref16","_ref16$pos","_getArrowHeadDimensio15","unbalanceVal","_ref17","_ref17$pos","_getArrowHeadDimensio16","_ref18","_ref18$pos","_getArrowHeadDimensio17","arrowHeadWidthNormal","_ref19","_ref19$pos","_getArrowHeadDimensio18","bondSingle","halfBond1","halfBond2","isSnapping","makeStroke","bondSingleUp","b3","bondSingleStereoBold","a3","a4","bondDoubleStereoBold","sgBondPath","bondSingleDown","nlines","step","bsp","q","bondSingleEither","bondDouble","cisTrans","bondSingleOrDouble","nSect","pi","bondTriple","bondAromatic","bondShift","l1","l2","bondAny","bondHydrogen","bondDative","reactingCenter","pathDesc","bondMark","rbb","recenterText","radicalCap","point1","dw","dh","radicalBullet","circle","bracket","bracketAngleDirection","bondCenter","isBracketContainAttachment","halfBracketHeight","bracketPoint0","bracketPoint1","longHalfBracketHeight","shortHalfBracketHeight","bracketArc0","bracketArc1","selectionRectangle","point2","selectionPolygon","pstr","selectionLine","dashedPath","dash","black","aromaticBondPaths","mask","relativeBox","vml","gap","shiftedAtomPositionVector","attachmentPointEnd","directionVector","linePath","curvePath","getSvgCurveShapeAttachmentPoint","resultShape","centerPosition","basicSize","attachmentPointSvgPathString","attachmentPointSvgPathSize","shapeScale","angleDegrees","rgroupAttachmentPointLabel","labelPosition","labelText","labelPath","AttachmentPointName","attachmentPointNames","Entities","StereoLabelMinOpacity","MAX_LABEL_LENGTH","ShowHydrogenLabelNames","ReAtom","_ReObject","style","isPlateShouldBeHidden","getSelectionContour","showLabel","hydrogenOnTheLeft","makeHoverPlate","getLabeledSelectionContour","isHighlight","highlightPadding","padding","ps1","ps2","getUnlabeledSelectionContour","ps","hasLabel","pseudo","getQueryAttrsText","isNeedShiftForCharge","MIN_BOND_LENGTH","isBondLengthTooShort","hasCharge","getRatio","bondLen","DEFAULT_BOND_LENGTH","DEFAULT_SUB_FONT_SIZE","isNeedShift","DEFAULT_PROPORTION","currentProportion","getShiftedSegmentPosition","_atomPosition","atomPosition","atomSymbolShift","hasAttachmentPoint","_restruct$atoms$get","isPositionAtom","fontFamily","substr","shouldHydrogenBeOnLeft","isLabelVisible","rightMargin","leftMargin","implh","isHydrogen","buildLabel","background","idPos","draw","indices","hydroIndex","showHydroIndex","showRadical","showIsotope","displayHydrogen","showHydrogen","hydrogen","showExplicitValence","warning","showWarning","pathAndRBoxTranslate","aamText","getAamText","customQueryText","checkIsSmartPropertiesExist","getOnlyQueryAttributesCustomQuery","shortenCustomQueryText","customQueryTooltipText","substring","displayStereoLabel","shouldDisplayStereoLabel","stereoLabelStyle","enhancedStereoFlag","aamPath","getStereoAtomColor","childNodes","setAttribute","opacity","getStereoAtomOpacity","aamBox","t","bisectLargestSector","addTooltip","isHighlighted","highlightColor","highlight","_highlight$atoms","hasCurrentHighlight","makeHighlightePlate","getLargestSectorFromNeighbors","angles","largeAngles","largestAngle","neighborAngle","_this$getLargestSecto","bisectAngle","newVectorFromAngle","isSelectable","colorStereogenicCenters","Off","BondsOnly","getColorFromStereoLabel","stereoLabelType","colorOfAndCenters","colorOfOrCenters","colorOfAbsoluteCenters","stereoLabelNumber","autoFadeOfStereoLabels","labelStyle","flag","On","Classic","IUPAC","isAttachmentPointAtom","isCarbon","visibleTerminal","Hetero","neighborsLength","shouldBeVisible","nei1","sameNotStereo","hydrogenLabels","_atom$label","_atom$label2","Terminal","neighbor","neighborDirection","queryText","getAtomCustomQuery","tooltip","_label$text","currentlySelectedMonomerAttachmentPoint","connectedMonomerAttachmentPoints","getLabelText","shouldStyleLabel","isMonomerAttachmentPoint","isMonomerAttachmentPointSelected","isMonomerAttachmentPointUsed","_util$useLabelStyles","_label$text2","backgroundSize","hshift","vshift","mapValence","hydrogenLeft","getRingBondCountAttrText","attrText","getRingConnectivity","getDegree","getSubstitutionCountAttrText","getAtomType","smartsSpecificProperties","_atom$queryProperties","includeOnlyQueryAttributes","queryAttrsText","nonQueryAttributes","addSemicolon","patterns","regExpResult","exec","propertyName","_atom$a","ReBond","bondRecalc","doubleBondShift","getSelectionPoints","regularSelectionThikness","halfBondStart","halfBondEnd","isStereoBond","stereoPadding","addPadding","contourStart","contourEnd","stereoBondStartHeightCoef","bondPadding","highlightBondPadding","addStart","stereoBondEndHeightCoef","addEnd","contourPaddedStart","contourPaddedEnd","padStartPoint","padEndPoint","startTop","startBottom","startPadTop","startPadBottom","endTop","endBottom","endPadTop","endPadBottom","_this$getSelectionPoi","_this$getSelectionPoi2","pathString","makeHighlitePlate","highlightStyle","checkStereoBold","setDoubleBondShift","isSnappingBond","getBondPath","bondSkeleton","getReactingCenterPath","getBondMark","ipath","bondIdxOff","getIdsPath","_highlight$bonds","getAtomPositionForBond","findIncomingStereoUpBond","bid0","includeBoldStereoBond","neibond","singleUp","boldStereo","findIncomingUpBonds","_restruct$atoms$get2","halfbonds","neihbid1","neihbid2","_restruct$atoms$get3","_restruct$atoms$get4","shiftA","shiftB","newHalfBonds","xShiftMinus1","xShiftPlus1","getBondSingleStereoBoldPath","getBondSingleUpPath","getBondSingleDownPath","getBondSingleEitherPath","getStereoBondColor","getBondDoubleStereoBoldPath","getBondDoublePath","_struct$loops$get","_struct$loops$get2","inAromaticLoop","getBondAromaticPath","getSingleOrDoublePath","stereoUpBondGetCoordinates","defaultColor","beginAtomStereoLabel","endAtomStereoLabel","LabelsOnly","coords1","coords2","getBondLineShift","neihbid","neihb","cosHalf","biss","denomAdd","calculateLines","interval","usableLength","linesCount","_options$hashSpacingI","MIN_LINES","DEFAULT_HASH_SPACING_IN_PX","gaps","isHashSpacingTooLarge","averageSpacing","intervalAdjusted","finalLines","s1","s2","dashdotPattern","getAromaticBondPaths","lw","bs","alongIntRc","alongIntMadeBroken","alongSz","acrossInt","acrossSz","tiltTan","fixed","param1","param2","pb","irbb","selectDoubleBondShiftChain","loop1","loop2","d1","d2","n1","n2","selectDoubleBondShift","nLeft","nRight","_path","ReEnhancedFlag","hoverPath","_classPrivateFieldGet2","_classPrivateFieldGet3","stereoFlagMap","absFlagLabel","andFlagLabel","mixedFlagLabel","orFlagLabel","showStereoFlags","ReFrag","fragGetAtoms","fragGetBonds","firstFrag","secondFrag","calcBBox","_ui_editor","_draw","ReRGroup","labelBox","rGroupBoundingBox","fragBox","rGroupAttachmentPointsVBox","rGroupdrawBrackets","labelSet","logicStyle","logic","rLogicToString","logicPath","logicBox","fnum","drawing","cy","leftBracket","rightBracket","rLogic","ifThen","rangeExists","startsWith","restH","nextRg","ReRxnArrow","calcDistance","distRef","getReferencePointDistance","_this$getReferencePoi","getReferencePoints","_this$getReferencePoi2","middlePoint","refPoint","refPoints","rp","current","generatePath","_item$pos","findMiddlePoint","makeAdditionalInfo","selectionSet","scaledRP","styles","_this$getArrowParams","getArrowParams","x1","x2","y2","hypot","coordinates1","coordinates2","ReRxnPlus","ReDataSGroupData","dataArea","BracketParams","ReSGroup","SGroupdrawBracketsOptions","lowerIndexText","upperIndexText","indexAttribute","drawGroupDat","sgroupTypesWithBrackets","SGroupdrawBrackets","getTextHighlightDimensions","startX","startY","_sGroup$getContracted","reSGroupAtom","sGroupTextBoundingBox","_Scale$modelToCanvas","getContractedSelectionContour","_this$getTextHighligh","sGroupItem","_getHighlighPathInfo","getHighlighPathInfo","b0","_render$ctab","_render$ctab2","arr","rgroupAttachmentPointIds","crossBondsValues","rightBracketIndex","bracketR","renderIndex","isLowerText","lowerPath","getPath","bracketPoint2","indexPos","indexPath","indexBox","showValue","drawAttachedDat","drawAbsoluteDat","_sgroup$pp","sbox","nameI","boxI","sboxI","getBracketParamersWithCrossBondsLessThan2","getBracketParamersWithCrossBondsEquals2","getBracketParamersWithCrossBondsMoreThan2OnOneAtom","notTemplateShapeFirstAtom","bondDirections","needNegated","bondDirection","attachmentDirection","_render$ctab$rgroupAt","lineDirectionVector","_mol$sGroupForest","leftCenter","rightCenter","leftShift","rightShift","bracketShift","bracketShiftNegated","centerConnection","rightDirection","leftDirection","bracketDirectionNegated","_render$ctab3","_boundingBox","vext","_sgroup$getContracted","contractedPosition","hoverPp","ReSimpleObject","pointToCenter","topX","bottomX","distances","onlyOnObject","getFigureHoverPath","isBorder","centerX","centerY","outerBorderEllipse","stylesApplied","fillEllipse","innerBorderEllipse","leftX","rightX","outerBorderRect","fillRect","innerRect","poly","atan","enhPath","selectionPointsSet","selectionPoints","togglePoints","displayFlag","_this$selectionPoints","_this$selectionPoints2","ReLoop","rlid","apos","bpos","pathStr","halfAngle","minSin","qi","isValid","SCALE","ReText","_this$getRelBox","getRelBox","leftTopPoint","rightBottomPoint","_this$getRelBox2","topLeft","_p1$sub","firstElOfFirstRow","leftEdge","firstRow","topEdge","widestRow","nextRow","getRowWidth","lastElOfWidestRow","rightEdge","lastRow","bottomEdge","row","rowWidth","paperScale","shiftY","rawContentState","blocks","block","ranges","getRanges","shiftX","_this3$getRelBox","flatten","getStyles","nextStyles","isEqual","inlineStyleRanges","inlineRange","customFontSize","FontSize","_range$style$match","nextRange","textRange","Bold","Italic","Subscript","Superscript","ReRGroupAttachmentPoint","reAtom","hoverPlatePath","getHoverPlatePath","outlineEndPoint","normalizedLineDirectionVector","CURVE_OUTLINE_HEIGHT","OUTLINE_PADDING","getOutlinePoints","curveOutlineWidth","CURVE_OUTLINE_WIDTH","lineOutlineWidth","LINE_OUTLINE_WIDTH","topLeftPadPoint","normalizedCurveDirectionVector","topRightPadPoint","topRightPoint","middleMostLeftPadPoint","middleMostLeftPoint","middleMostRightPadPoint","middleMostRightPoint","middleLeftPoint","middleRightPoint","bottomLeftPadPoint","bottomLeftPoint","bottomRightPadPoint","getDistanceTo","destination","rgroupAttachmentPointId","getAttachmentPointDirectionVector","showAttachmentPointShape","isAttachmentPointLabelRequired","showAttachmentPointLabel","_highlight$rgroupAtta","outlinePoints","scaledOutlinePoints","_scaledOutlinePoints","hoverPlate","isTrisectionAttachmentPoint","trisectionLargestSector","hasOnlyOneBond","getAttachmentDirectionForOnlyOneBond","atomPositionVector","attachmentPointType","_atom$getLargestSecto","firstTrisectorAngle","secondTrisectorAngle","_struct$bonds$get","DEGREE_120_FOR_ONE_BOND","DEGREE_180_FOR_TRIPLE_BOND","onlyNeighbor","neighbour","isTripleBond","finalAngle","getLabelPositionForAttachmentPoint","shapeHeight","normal","REFERENCE_POINT_LINE_WIDTH_MULTIPLIER","ReImage","getScaledPointWithOffset","originalPoint","scaledPoint","getScale","getDimensions","getBottomRightPosition","getTopLeftPosition","getSelectionReferencePositions","_this$image$getCorner","getCornerPositions","_this$image$getCorner2","selectionTopLeftPosition","selectionTopRightPosition","selectionBottomRightPosition","selectionBottomLeftPosition","drawSelectionLine","_this$getSelectionRef","polygon","styleOptions","strokeWidth","drawSelectionPoints","reStruct","selectionReferencePositions","_ref2$","nextPath","scaledTopLeftWithOffset","dimensions","bitmap","insertBefore","STROKE_WIDTH","FILL_WIDTH","_this$getSelectionRef2","outerBorderOffset","topLeftCorner","dimensionsWithBorders","calculateDistanceToPoint","isPointInsidePolygon","_this$getSelectionRef3","calculateClosestReferencePosition","ref","POSITIVE_INFINITY","referencePositions","MultitailValidationErrors","MultitailArrow","spineTopX","spineTopY","headOffsetX","headOffsetY","tailsYOffset","getReferencePositions","tailYOffset","getReferencePositionsArray","_this$getReferencePos","_objectWithoutProperties","_excluded","getReferenceLines","headSpinePosition","tail","getTailsDistance","tailsYOffsets","allTailsOffsets","centerFloatingPoint","getTailsMaxDistance","getTailCoordinate","addTail","coordinate","_this$getTailsMaxDist","canAddTail","centerFixedPrecision","removeTail","resizeHead","fixedPrecisionOffset","MIN_HEAD_LENGTH","realOffset","moveHead","MIN_TOP_BOTTOM_OFFSET","resizeTails","updatedLength","MIN_TAIL_LENGTH","normalizeTailPosition","proposedPosition","tailId","proposedPositionFloatingPrecision","getDistanceToTailDistance","tailDistance","tailsWithoutCurrent","tailMinDistance","at","positionCenter","positionDistance","maxDistanceFromCenter","MIN_TAIL_DISTANCE","distanceFromCenter","moveTail","second","offsetFixedPrecision","minHeight","MIN_HEIGHT","tailsOffset","lastTail","firstTail","Infinity","closestTopLimit","closestBottomLimit","originalValue","updatedHeight","BOTTOM_TAIL_NAME","updatedTails","move","nonBorderTails","convertTail","zOrder","fromTwoPoints","bottomRight","topSpineX","topSpineY","validateKetNode","ketFileData","_tailsFixedPrecision$","_tailsFixedPrecision$2","_spine$pos","spineStart","spineEnd","spineStartX","spineStartY","spineEndX","spineEndY","headX","headY","tailsFixedPrecision","KET_MIN_DISTANCE","INCORRECT_SPINE","INCORRECT_HEAD","INCORRECT_TAILS","firstTailX","allTails","fromKetNode","ketFileNode","_data$spine$pos","tailsLength","fromFloatingPointCoordinates","spineTop","headOffset","tailsYOffsetFixedPrecision","pool","MultitailArrowRefName","ReMultitailArrow","getFrameOffset","FRAME_OFFSET","getSelectionPointOffset","SELECTION_POINT_OFFSET_FROM_SPINE","drawSingleLineHover","builder","verticalDirection","horizontalDirection","CUBIC_BEZIER_OFFSET","buildFrame","tailsPoints","tailPoint","getSelectionPointsFromReferencePoint","spineOffset","spineOffsetWithDirection","addTestSelectionPoints","OFFSET","_this$getReferencePos2","selectionPointSet","TAILS_NAME","clearVisel","headPathBuilder","_this$getReferencePos3","topTailOffsetX","arrowStart","getClosestArrowPartPosition","entities","isLine","getTailIdFromRefName","refName","TAILS","HEAD","BOTTOM_TAIL","TOP_TAIL","SPINE","getTailArrayFromPool","maxDistanceToPoint","referenceLines","rest","tailsAndHeadLines","lineResult","validReferencePositions","_excluded2","tailsAnddHeadPoints","pointsResult","ReStruct","initLayers","clearMarks","lid","reloops","enhancedFlags","reItem","connectedComponentRemoveAtom","cc","clearConnectedComponents","getConnectedComponent","adjacentComponents","addConnectedComponent","compId","aidSet","ccFragmentType","removeConnectedComponent","ccid","assignConnectedComponents","layers","visible","parentNode","maps","structChanged","markItemRemoved","markBond","markItem","markAtom","markRgroupAttachmentPoint","rgAPid","mapChanged","eachItem","func","getSelectionBoxCenter","atomPositionPoint","atomBox","selectionExceptAtoms","selectionExceptAtomsBoundingBox","getBoundingBoxForSelection","isSelectionEmpty","getAllElementsAsSelectionMap","elementKey","_selection$elementKey","elementId","scaleVisel","clearVisels","force","initialized","_item","atomsChanged","emptyFrags","atomsChangedArray","verifyLoops","updLoops","updateLoops","showAtoms","showBonds","showRgroupAttachmentPoints","showLoops","showReactionSymbols","showSGroups","showFragments","showRGroups","showEnhancedFlags","showSimpleObjects","showTexts","showImages","showMultitailArrows","reloop","simpleObjectsChanged","textsChanged","rxnArrowsChanged","rxnPlusesChanged","resgroup","loopRemove","bondlist","atomsIds","allAtomAttachmentPointsVBox","attachmentPointIds","oneAtomAttachmentPointsVBox","previousVBox","attachmentPointId","currentVBox","_allAtomAttachmentPoi","_this25","isInsideContractedSGroup","_this26","_this27","enhancedFlagsChanged","chid","_this28","bondsChanged","_this29","imagesChanged","_this30","multitailArrowsChanged","setSelection","_this31","_this31$map$values","_this31$map$values2","mapValues","_item$item","sgId","sGroupAtoms","_item$item2","showItemSelection","exists","isSelectionSvgObjectExists","_item$additionalInfo","_item$cip","_item$additionalInfo2","_item$cip2","addSnappingBonds","snappingBonds","clearSnappingBonds","anySelection","scaleRPath","_item$selectionPlate","_item$selectionPlate2","_item$selectionPlate3","_item$selectionPlate$","viewBox","pointInCanvas","pageToView","renderClientArea","_renderClientArea$get","offsetTop","offsetLeft","clientX","clientY","pageToCanvas","pointInViewBox","clientArea","pageToModel","CoordinateTransformation","_calculateOffset","WeakSet","ScrollOffset","_classPrivateMethodInitSpec","getAbsViewBox","viewBoxMinXY","viewBoxMaxXY","getAbsBoundingBox","protoBoundingBox","boundingBoxMinXY","boundingBoxMaxXY","_classPrivateMethodGet","_calculateOffset2","hasVerticalOffset","up","down","hasHorizontalOffset","absBoundingBox","absViewBox","Scrollbar","redraw","updateAttr","_this$bar","getDynamicAttr","_this$bar2","_this$bar3","undrag","_this$getDynamicAttr","onDragMove","onDragStart","onDragEnd","_y","viewBoxBeforeDrag","stopPropagation","SCALE_FACTOR","getUserFriendlyScrollOffset","getUserFriendlyViewBoxDelta","getZoomedValue","_scrollOffset","VerticalScrollbar","_Scrollbar","scrollOffset","DIST_TO_EDGE","_dx","_event","setViewBox","HorizontalScrollbar","_dy","_verticalBar","_horizontalBar","ScrollbarContainer","Render","reuseRestructIfExist","_global$ketcher","getCanvasSizeVector","resizeViewBox","userOpts","_global$ketcher2","scrollbar","updateOptions","opts","passedOptions","point0","page2obj","zoomedWidth","zoomedHeight","zoomOnMouse","zoomOnCanvasCenter","viewBoxX","viewBoxY","clientWidth","clientHeight","newWidth","newHeight","fixedPoint","widthRatio","heightRatio","arg","newViewBox","setMolecule","forceUpdateWithTimeout","setTimeout","viewSz","changes","downScale","isAutoScale","oldCb","sz1","marg","mv","csz","rescaleAmount","isForceDownscale","isBondsLengthFit","sz2","BaseOperation","perform","_inverted","isDummy","invalidateAtom","invalidateLoop","invalidateBond","invalidateItem","mapName","invalidateEnhancedFlag","OperationType","freeze","ATOM_ADD","ATOM_DELETE","ATOM_ATTR","ATOM_MOVE","CALC_IMPLICIT_H","BOND_ADD","BOND_DELETE","BOND_ATTR","BOND_MOVE","LOOP_MOVE","S_GROUP_ATTACHMENT_POINT_ADD","S_GROUP_ATTACHMENT_POINT_REMOVE","S_GROUP_ATOM_ADD","S_GROUP_ATOM_REMOVE","S_GROUP_ATTR","S_GROUP_CREATE","S_GROUP_DELETE","S_GROUP_ADD_TO_HIERACHY","S_GROUP_REMOVE_FROM_HIERACHY","R_GROUP_ATTR","R_GROUP_FRAGMENT","R_GROUP_ATTACHMENT_POINT_ADD","R_GROUP_ATTACHMENT_POINT_REMOVE","UPDATE_IF_THEN","RESTORE_IF_THEN","RXN_ARROW_ADD","RXN_ARROW_DELETE","RXN_ARROW_MOVE","RXN_ARROW_ROTATE","RXN_ARROW_RESIZE","RXN_PLUS_ADD","RXN_PLUS_DELETE","RXN_PLUS_MOVE","S_GROUP_DATA_MOVE","CANVAS_LOAD","ALIGN_DESCRIPTORS","SIMPLE_OBJECT_ADD","SIMPLE_OBJECT_DELETE","SIMPLE_OBJECT_MOVE","SIMPLE_OBJECT_RESIZE","RESTORE_DESCRIPTORS_POSITION","FRAGMENT_ADD","FRAGMENT_DELETE","FRAGMENT_SET_PROPERTIES","FRAGMENT_STEREO_FLAG","FRAGMENT_ADD_STEREO_ATOM","FRAGMENT_DELETE_STEREO_ATOM","ENHANCED_FLAG_MOVE","TEXT_CREATE","TEXT_UPDATE","TEXT_DELETE","TEXT_MOVE","ADD_HIGHLIGHT","UPDATE_HIGHLIGHT","REMOVE_HIGHLIGHT","POLYMER_BOND_ADD","POLYMER_BOND_DELETE","POLYMER_BOND_MOVE","POLYMER_BOND_FINISH_CREATION","POLYMER_BOND_CANCEL_CREATION","PEPTIDE_ADD","PEPTIDE_REMOVE","PEPTIDE_MOVE","PEPTIDE_HOVER","DRAWING_ENTITY_SELECT","DRAWING_ENTITY_HOVER","SHOW_POLYMER_BOND_INFORMATION","IMAGE_UPSERT","IMAGE_DELETE","IMAGE_MOVE","IMAGE_RESIZE","MULTITAIL_ARROW_UPSERT","MULTITAIL_ARROW_DELETE","MULTITAIL_ARROW_MOVE","MULTITAIL_ARROW_ADD_TAIL","MULTITAIL_ARROW_REMOVE_TAIL","MULTITAIL_ARROW_RESIZE_HEAD_TAIL","MULTITAIL_ARROW_MOVE_HEAD_TAIL","OperationPriority","AtomAttr","_BaseOperation","attribute","data2","_this$data","inverted","_this$data2","_this$data3","_this$data4","AtomMove","noinvalidate","reatom","AtomAdd","atomData","AtomDelete","_BaseOperation2","restructedAtom","BondAttr","needInvalidateBond","BondMove","BondAdd","needInvalidateAtoms","structBond","BondDelete","rebond","CanvasLoad","oldStruct","AlignDescriptors","history","structBox","alignPoint","RestoreDescriptorsPosition","EnhancedFlagMove","currentPosition","newPosition","UpdateIfThen","rgNew","rgOld","skipRgids","rgid_new","rgid_old","ifThenHistory","RestoreIfThen","rgValue","FragmentAdd","FragmentDelete","FragmentSetProperties","_BaseOperation3","enhancedFalg","FragmentAddStereoAtom","FragmentDeleteStereoAtom","FragmentStereoFlag","CalcImplicitH","aids","atomIds","aIds","LoopMove","ImageMove","renderItem","scaledOffset","addPositionOffset","moveLeftPositions","moveRightPositions","moveTopPositions","moveBottomPositions","ImageResize","referencePositionName","previousPosition","resize","ImageUpsert","ImageDelete","reImage","MultitailArrowAddTail","itemId","reMultitailArrow","MultitailArrowRemoveTail","MultitailArrowMove","MultitailArrowMoveHeadTail","MultitailArrowResizeTailHead","isHead","MultitailArrowUpsert","MultitailArrowDelete","RGroupAttr","rgroupId","rgp","RGroupFragment","rg_new","rg_old","removeOld","setNew","RGroupAttachmentPointAdd","newAttachmentPoint","revertedId","RGroupAttachmentPointRemove","INITIAL_DATA","RxnArrowMove","_Base","Base","RxnArrowRotate","_reStruct$rxnArrows$g","arrowId","drawingCenter","ARROW_MAX_SNAPPING_ANGLE","RxnArrowResize","anchor","isSnappingEnabled","_middlePoint","_middlePoint2","previousPos0","previousPos1","_reItem$getReferenceP","_reItem$getReferenceP2","currentArrowVector","snappedArrowVector","getSnappedArrowVector","snappedCurrent","_reItem$getArrowParam","cosAngle","sinAngle","diffX","diffY","_reItem$getReferenceP3","_reItem$getReferenceP4","newMiddlePoint","AXIS","POSITIVE_X","POSITIVE_Y","NEGATIVE_X","NEGATIVE_Y","isSnappingToPositiveXAxis","isSnappingToPositiveYAxis","isSnappingToNegativeXAxis","isSnappingToNegativeYAxis","RxnPlusMove","rxn","RxnPlusAdd","plid","newRxn","structRxn","RxnPlusDelete","RxnArrowAdd","RxnArrowDelete","_Base2","performed","SimpleObjectAdd","toCircle","makeCircleFromEllipse","SimpleObjectDelete","SimpleObjectMove","_Base3","handleRectangleChangeWithAnchor","SimpleObjectResize","_Base4","circlePoint","position0","position1","SGroupAtomAdd","SGroupAtomRemove","SGroupAttr","SGroupDataMove","_sgroups$get$pp","SGroupAddToHierarchy","relations","SGroupRemoveFromHierarchy","SGroupAttachmentPointAdd","apAtom","SGroupAttachmentPointRemove","SGroupCreate","existingSGroup","SGroupDelete","_sgroup$item","_sgroup$item2","_sgroup$item3","_sgroup$item4","relatedFGroupId","fgid","TextCreate","TextDelete","TextUpdate","previousContent","TextMove","BaseRenderer","drawingEntity","_ZoomTool$instance","_ZoomTool$instance2","_this$rootElement","rootNode","rootElement","_this$rootElement2","_this$rootBBox","rootBBox","_this$rootBBox2","_this$rootBBox3","_this$rootBBox4","_this$rootElement3","redrawHover","hovered","hoverElement","appendHover","hoverAreaElement","removeHover","BaseSequenceRenderer","_BaseRenderer","_hoverArea","appendHoverAreaElement","drawSelection","moveSelection","_theme","DrawingEntity","_this$config","_position","config","generateId","moveRelative","moveAbsolute","turnOnHover","turnOffHover","turnOnSelection","turnOffSelection","selectIfLocatedInRectangle","rectangleTopLeftPoint","rectangleBottomRightPoint","isPreviousSelected","baseRenderer","prevSelectedValue","locatedInRectangle","setBaseRenderer","BaseBond","_DrawingEntity","firstEndEntity","secondEndEntity","startPosition","endPosition","moveToLinkedEntities","_this$secondEndEntity","firstMonomerCenter","secondMonomerCenter","moveBondStartAbsolute","moveBondEndAbsolute","getAnotherEntity","MonomerToAtomBond","_BaseBond","setRenderer","AttachmentPoint","constructorParams","skipInit","_constructorParams$ca","_constructorParams$mo","bodyWidth","bodyHeight","DOMRect","attachmentPointName","centerOfMonomer","isSnake","appendAttachmentPoint","isAttachmentPointPotentiallyUsed","colors","fillPotentially","isAttachmentPointUsed","fillUsed","strokePotentially","strokeUsed","_this$element","renderAttachmentPointByCoordinates","attachmentOnBorder","attachmentPointCoordinates","labelCoordinatesOnMonomer","attachmentPointElement","labelGroup","renderHoverableArea","monomerCenter","attachmentPointCenter","hasBond","rotation","halfWidth","areaHeight","lineFunction","hoverableAreaElement","_polymerBond$renderer","polymerBond","attachmentPointsToBonds","firstMonomer","flip","isAttachmentpointR1","isMonomersOnSameHorizontalLine","rotateToAngle","_this$getCoordinates","getCoordinates","_this$getCoordinates2","attachmentToBorderCoordinates","attachmentToCenterCoordinates","hoverableArea","updateAttachmentPointStyleForHover","_this$catchThePoint","catchThePoint","_this$catchThePoint2","labelPoint","updateCoords","_polymerBond$firstMon","_this$attachmentPoint3","_this$attachmentPoint4","_this$attachmentPoint5","_this$getCoordinates3","_this$getCoordinates4","rotationAngle","currentMonomerCenter","_findLabelPoint","attachmentPointLength","labelOffset","_findLabelPoint2","getElement","getAttachmentPointName","getHoverableArea","getAngle","attachmentPointVector","HydrogenBond","secondMonomer","setFirstMonomer","setSecondMonomer","getAttachmentPointByBond","_this$secondMonomer","getAnotherMonomer","HYDROGEN_BOND_ATTACHMENT_POINT","BaseMonomer","getAttachmentPointDict","potentialAttachmentPointsToBonds","getMonomerDefinitionAttachmentPoints","chosenFirstAttachmentPointForBond","potentialSecondAttachmentPointForBond","chosenSecondAttachmentPointForBond","maxAttachmentPointNumber","getMaxAttachmentPointNumber","attachmentPointList","turnOnAttachmentPointsVisibility","attachmentPointsVisible","turnOffAttachmentPointsVisibility","setChosenFirstAttachmentPoint","setChosenSecondAttachmentPoint","setPotentialSecondAttachmentPoint","setPotentialBond","potentialBond","hydrogenBonds","hydrogenBond","getPotentialAttachmentPointByBond","pointNumber","isNaN","R1","R2","firstFreeAttachmentPoint","isAttachmentPointExistAndFree","forEachBond","callback","setBond","unsetBond","bondToDelete","compact","hasBonds","bondName","hasHydrogenBondWithMonomer","hasPotentialBonds","getPotentialBond","removeBond","removePotentialBonds","clearSelectedPoints","listOfAttachmentPoints","getBondByAttachmentPoint","getPotentialBondByAttachmentPoint","_BaseMonomer$getAttac","getAttachmentPointDictFromMonomerDefinition","attachmentPointDictionary","getAttachmentPointDictFromAtoms","moreThanTwo","monomerDefinitionAttachmentPoints","superatomAttachmentPoints","superatomAttachmentPoint","bondsToLeavingGroupAtom","leavingGroup","attachmentPointNumberToType","_struct$sgroups$filte","superatomWithoutLabel","attachmentPointNameToBond","leavingGroupAtomId","isMonomerTypeDifferentForChaining","monomerToChain","SubChainConstructor","MonomerNaturalAnalogCode","sideConnections","isSideChainConnection","attachmentPointsList","attachmentPointTypeToNumber","side","attachmentPointIndex","calculatedAttachmentPointNumber","getLabelByTypeAction","calculatedLabel","BaseSubChain","nodes","ChemSubChain","_BaseSubChain","SupportedFormatProperties","mime","extensions","supportsCoords","formatProperties","molAuto","molV3000","rxnV3000","smiles","DaylightSmiles","smilesExt","ExtendedSmiles","smarts","DaylightSmarts","inChI","InChI","inChIAuxInfo","InChIAuxInfo","inChIKey","InChIKey","cml","CML","ket","cdxml","CDXML","cdx","CDX","binaryCdx","sdf","SDF","sdfV3000","fasta","FASTA","idt","IDT","helm","HELM","sequence","SEQUENCE","unknown","UNKNOWN","rdf","RDF","rdfV3000","imgFormatProperties","svg","extension","png","getPropertiesByImgFormat","format","getPropertiesByFormat","getFormatMimeTypeByFileName","fileName","fileExtension","SupportedFormat","KetFormatter","serializer","_ketSerializer","_getStructureFromStructAsync","serialize","getStructureFromStructAsync","_getStructureFromStringAsync","deserialize","getStructureFromStringAsync","_x4","parseMacromoleculeString","deserializeMicromolecules","_smiSerializer","_structService","_format","_options","SmilesFormatter","smiSerializer","structService","ketSerializer","stringifiedMolfile","stringifiedStruct","serverFormatter","ServerFormatter","isContainsCoordinates","convertResult","message","convert","output_format","getCallingMethod","method","layout","withCoords","trim","_this$getCallingMetho","parsedStruct","formatError","MolfileV2000Formatter","molSerializer","_molSerializer","FormatterFactory","separateOptions","reactionRelayout","badHeaderRecover","structServiceOptions","molfileParseOptions","queryPropertiesAreUsed","_this$separateOptions","_this$separateOptions2","molSerializerOptions","formatter","KetSerializer","MolSerializer","identifyStructFormat","isMacromolecules","sanitizedString","isRXN","isSDF","isV2000","isV3000","search","clearStr","isBase64String","cdxHeader","isSequence","isThreeLetter","isIdt","macromoleculesFilesInputFormats","seq","rna","dna","peptide","peptide3Letter","PhosphateSubChain","RnaSubChain","Phosphate","_BaseMonomer","getValidSourcePoint","getValidPoint","getValidTargetPoint","otherMonomer","potentialPointOnOther","unUsedAttachmentPointsNamesList","Sugar","isRnaBaseOrAmbiguousRnaBase","R3","r3PolymerBond","PolymerBond","RNABase","firstMonomerAttachmentPoint","secondMonomerAttachmentPoint","backBoneChainAttachmentPoints","isMonomerConnectedToR2RnaBase","getMonomerUniqueKey","MonomerName","Name","checkIsR2R1Connection","nextMonomer","r1PolymerBond","isR2R1ConnectionFromRnaBase","_polymerBond$secondMo","R1PolymerBond","R1ConnectedMonomer","r2PolymerBond","getSugarFromRnaBase","getPreviousMonomerInChain","previousMonomer","getNextMonomerInChain","_r2PolymerBond$getAno","getRnaBaseFromSugar","r3ConnectedMonomer","r1PolymerBondOfConnectedMonomer","r1ConnectedMonomer","r3PolymerBondOfConnectedMonomer","getPhosphateFromSugar","nextMonomerInChain","isMonomerBeginningOfChain","MonomerTypes","isPreviousMonomerPartOfChain","MonomerType","AmbiguousMonomer","MONOMER_CLASS_TO_CONSTRUCTOR","monomerClass","previousConnectionNotR2","UnsplitNucleotide","isValidNucleotide","sugar","firstMonomerInCyclicChain","phosphate","nextMonomerAfterPhosphate","isValidNucleoside","isRnaBaseVariantMonomer","isAmbiguousMonomerLibraryItem","isAmbiguous","isPeptideOrAmbiguousPeptide","Peptide","AminoAcid","PeptideSubChain","Chem","UnresolvedMonomer","RNA_DNA_NON_MODIFIED_PART","RnaDnaNaturalAnaloguesEnum","StandardAmbiguousRnaBase","rnaDnaNaturalAnalogues","ADENINE","THYMINE","GUANINE","CYTOSINE","URACIL","unknownNaturalAnalogues","peptideNaturalAnalogues","NO_NATURAL_ANALOGUE","CHEM","DEFAULT_VARIANT_MONOMER_LABEL","variantMonomerItem","_variantMonomerItem$l","variantMonomerLabel","subtype","MIXTURE","monomers","getMonomerClass","monomerCaps","_secondMonomer","_firstMonomer","monomerClassToSubchainConstructor","_monomerFactory","monomerFactory","_monomerFactory2","containDifferentMonomerTypes","_monomerFactory3","_monomerFactory4","MonomerClassToCompare","monomersAttachmentPoints","possibleAttachmentPoints","monomerAttachmentPoints","labelPositions","MONOMER_CSS_CLASS","monomerSize","BaseMonomerRenderer","monomerSelectedElementId","monomerHoveredElementId","monomerSymbolElementId","_this$monomerSymbolEl","_this$monomerSymbolEl2","CoreEditor","provideEditorInstance","monomerSymbolElement","querySelector","getAttribute","isSnakeBondForAttachmentPoint","_this$monomer$attachm","scaledMonomerPosition","WHITE","colorsMap","Q","getMonomerColor","theme","_theme$monomer$color$","regular","getPeptideColor","_theme$peptide$color$","naturalAnalogCode","peptideColor","redrawAttachmentPoints","hoveredAttachmentPoint","removeAttachmentPoints","drawAttachmentPoints","updateAttachmentPoints","redrawAttachmentPointsCoordinates","chosenAttachmentPointName","chosenAttachmentPoint","allAngles","isSectorOccupied","appendFn","appendFnToUse","usedAttachmentPointsNamesList","newList","freeSectorsList","unrenderedAtPoints","properAngleForFreeAttachmentPoint","customAngle","prepareAttachmentPointsParams","isPotentiallyUsed","attachmentPointParams","hoverAttachmentPoint","appendRootElement","appendLabel","_labelPositions$monom","_labelPositions$monom2","fontSize","textElement","textColor","monomerUniqueKey","textBBox","selectedTool","SelectRectangle","getScaledMonomerPosition","appendSelection","selectionCircle","_this$canvas","selectionBorder","removeSelection","_this$selectionCircle","_this$selectionBorder","appendEvents","setEnumeration","enumeration","appendEnumeration","enumerationElementPosition","enumerationElement","redrawEnumeration","needToDrawTerminalIndicator","redrawChainTerminalIndicator","needToDraw","_this$terminalIndicat","CHAIN_START_TERMINAL_INDICATOR_TEXT","beginningElementPosition","terminalIndicatorElement","isAntisense","CHAIN_END_TERMINAL_INDICATOR_TEXT","drawModification","modificationConfig","DARK_COLOR","LIGHT_COLOR","isModification","fillColor","requiresFill","isTextColorDark","useElement","backgroundId","appendBody","raiseElement","_this$selectionCircle2","raise","_this$rootElement4","_this$rootElement5","positionInAngstoms","monomerPositionInPixels","MONOMER_SYMBOLS_IDS","variant","isMonomerSgroupWithAttachmentPoints","isMicromoleculeFragment","CHEM_SELECTED_ELEMENT_ID","CHEM_SYMBOL_ELEMENT_ID","ChemRenderer","_BaseMonomerRenderer","PEPTIDE_SELECTED_ELEMENT_ID","PEPTIDE_HOVERED_ELEMENT_ID","PEPTIDE_SYMBOL_ELEMENT_ID","PeptideRenderer","_peptideColorsMap$mon","peptideColorsMap","E","L","M","monomerCode","baseColor","PHOSPHATE_SELECTED_ELEMENT_ID","PHOSPHATE_SYMBOL_ELEMENT_ID","PhosphateRenderer","PHOSPHATE","SUGAR_SELECTED_ELEMENT_ID","SUGAR_SYMBOL_ELEMENT_ID","SugarRenderer","SUGAR_RNA","RNABASE_SELECTED_ELEMENT_ID","RNABASE_SYMBOL_ELEMENT_ID","RNABaseRenderer","UNRESOLVED_MONOMER_SELECTED_ELEMENT_ID","UNRESOLVED_MONOMER_HOVERED_ELEMENT_ID","UNRESOLVED_MONOMER_SYMBOL_ELEMENT_ID","UnresolvedMonomerRenderer","NUCLEOTIDE_SELECTED_ELEMENT_ID","NUCLEOTIDE_HOVERED_ELEMENT_ID","NUCLEOTIDE_SYMBOL_ELEMENT_ID","UnsplitNucleotideRenderer","Y_OFFSET_FROM_MIDDLE","html","EmptySubChain","getEmptyMonomerItem","EmptyMonomer","PreviewAttachmentPoint","_AttachmentPoint","connected","usage","rectX","rectY","labelX","labelY","AmbiguousMonomerRenderer","monomerSymbolElementsIds","MonomerRenderer","monomerRenderer","appendNumberOfMonomers","isMonomersAmountTenOrMore","numberOfMonomersElement","appendPreviewAttachmentPoint","_connectedAttachmentP","selectedAttachmentPoint","connectedAttachmentPoints","showExternal","AmbiguousMonomerSequenceNode","Chain","isCyclic","fillSubChains","createSubChainIfNeed","_this$lastNode","needCreateNewSubchain","lastNode","subChains","lastSubChain","MonomerSequenceNode","Nucleoside","fromSugar","Nucleotide","isNextMonomerNucleosideOrNucleotideOrPeptide","isNucleosideOrNucleotide","lastMonomerInNode","LinkerSequenceNode","addNode","_this$lastNode2","subChain","_this$lastSubChain","EmptySequenceNode","_this$firstSubChain","firstSubChain","firstNode","forEachNode","nodeIndex","createChainWithEmptyNode","emptyChain","emptySequenceNode","emptySubChain","ChainsCollection","chains","chain","monomerToNode","rearrange","chain1","chain2","_chain2$firstNode","_chain2$firstNode2","_chain1$firstNode","_chain1$firstNode2","X_COORDINATE_REDUCTION_FACTOR","reorderedChains","sideConnection","anotherMonomer","anotherChain","_this$chains$","forEachCallback","nodeIndexOverall","chainIndex","subChainIndex","getFirstAntisenseMonomerInNode","getComplimentaryChainsWithData","complimentaryChainsWithData","handledChains","complimentaryMonomer","complimentaryNode","complimentaryChain","firstConnectedNode","firstConnectedComplimentaryNode","fromMonomers","chainsCollection","filteredMonomers","_this$getFirstMonomer","getFirstMonomersInChains","_this$getFirstMonomer2","firstMonomersInRegularChains","firstMonomersInCycledChains","CYCLED","firstMonomersInMiddleOfChains","getFirstMonomersInMiddleOfChains","firstMonomerInMiddleOfChain","monomersList","firstMonomersInChains","getFirstMonomersInRegularChains","getFirstMonomersInCycledChains","initialMonomersSet","handledMonomers","previousMonomerInChain","isFirstMonomerWithR2R1connection","isRnaBaseConnectedToSugar","cyclicChains","monomersInSameChain","firstMonomersOfCycledChainsSet","cyclicChain","getMonomerWithLowerCoordsFromMonomerList","monomerList","monomerListShallowCopy","monomer1","monomer2","monomerWithLowerCoords","CHAIN_START_ARROW_SYMBOL_ID","BaseSequenceItemRenderer","_BaseSequenceRenderer","firstNodeInChainPosition","monomerIndexInChain","isLastMonomerInChain","_isEditingSymbol","isEditingSymbol","SequenceRenderer","indexInRow","symbolsInRow","rowIndex","nthSeparationInRow","scaledMonomerPositionForSequence","isSequenceEditInRNABuilderMode","isSequenceEditModeTurnedOn","isSingleEmptyNode","appendBackgroundElement","backgroundElement","appendSpacerElement","spacerGroupElement","isSequenceEditInRnaBuilderModeTurnedOn","appendCounterElement","showCaret","_this$spacerElement","caretElement","spacerElement","removeCaret","_this$caretElement","redrawBackgroundElementColor","_this$backgroundEleme","appendChainStartArrow","drawGreyOverlay","isBeginningOfChain","symbolToDisplay","needDisplayCounter","counterElement","modified","_this$backgroundEleme2","_this$selectionRectan","_this$selectionRectan2","_this$selectionRectan3","_this$selectionRectan4","lower","_this$rootElement6","redrawChainBeginning","drawBackgroundElementHover","_this$backgroundEleme3","removeBackgroundElementHover","_this$backgroundEleme4","_this$spacerElement2","_this$backgroundEleme5","_this$backgroundEleme6","_this$backgroundEleme7","_this$backgroundEleme8","_this$backgroundEleme9","AmbiguousSequenceItemRenderer","_BaseSequenceItemRend","SequenceNodeRendererFactory","fromNode","firstMonomerInChainPosition","RendererClass","constructor","NucleotideSequenceItemRenderer","NucleosideSequenceItemRenderer","EmptySequenceItemRenderer","ChemSequenceItemRenderer","PhosphateSequenceItemRenderer","PeptideSequenceItemRenderer","UnresolvedMonomerSequenceItemRenderer","UnsplitNucleotideSequenceItemRenderer","PolymerBondSequenceRenderer","secondNode","_this$firstNode","_this$secondNode","_this$firstMonomer$re","_this$secondMonomer2","_this$secondMonomer3","firstMonomerY","firstMonomerX","secondMonomerY","secondMonomerX","scaledPosition","mainLineY","mainLineY1","mainLineY2","areMonomersOnSameRow","isHydrogenBond","_this$selectionElemen","selectionElement","_this$selectionElemen2","moveStart","moveEnd","getRnaPartLibraryItem","rnaBaseName","monomersLibrary","libraryItem","MonomerClass","getPeptideLibraryItem","peptideName","MONOMER_CONST","getSugarBySequenceType","sequenceType","SUGAR_DNA","RNA_MONOMER_DISTANCE","RnaPresetTool","preset","rnaBase","EditorHistory","mousedown","_this$sugarPreviewRen","sugarPreviewRenderer","_this$editor$drawingE","addRnaPreset","sugarPosition","lastCursorPositionOfCanvas","phosphatePosition","phosphatePreviewRenderer","rnaBasePosition","rnaBasePreviewRenderer","mousemove","_this$sugarPreview","_this$rnaBasePreview","_this$phosphatePrevie","_this$rnaBasePreviewR","_this$phosphatePrevie2","_this$sugarPreviewRen2","sugarPreview","lastCursorPosition","MONOMER_PREVIEW_OFFSET_X","MONOMER_PREVIEW_OFFSET_Y","rnaBasePreview","RNA_BASE_PREVIEW_OFFSET_X","RNA_BASE_PREVIEW_OFFSET_Y","phosphatePreview","PHOSPHATE_PREVIEW_OFFSET_X","mouseLeaveClientArea","_this$sugarPreviewRen3","_this$phosphatePrevie3","_this$rnaBasePreviewR2","mouseover","_this$sugarPreviewRen4","MONOMER_PREVIEW_SCALE_FACTOR","_this$rnaBasePreviewR3","_this$phosphatePrevie4","_monomerFactory5","_monomerFactory6","hidePreview","_this$rnaBasePreviewR4","_this$phosphatePrevie5","_this$sugarPreviewRen5","isNotLastNode","needValidation","isNucleotide","createOnCanvas","sugarName","rnaBaseLibraryItem","sugarLibraryItem","topLeftItemPosition","bottomItemPosition","addMonomer","createPolymerBond","BackBoneBondSequenceRenderer","PolymerBondAddOperation","addPolymerBondChangeModel","deletePolymerBondChangeModel","renderersManager","addPolymerBond","deletePolymerBond","PolymerBondDeleteOperation","finishPolymerBondCreationModelChange","PolymerBondMoveOperation","movePolymerBond","PolymerBondShowInfoOperation","showPolymerBondInformation","PolymerBondCancelCreationOperation","cancelPolymerBondCreation","PolymerBondFinishCreationOperation","deletePolymerBondCreationModelChange","finishPolymerBondCreation","SelectLayoutModeOperation","_onExecute","_onInvert","prevMode","onExecute","onInvert","ReconnectPolymerBondOperation","reconnectPolymerBondModelChange","revertReconnectPolymerBondModelChange","redrawDrawingEntity","KetcherProvider","setKetcherInstance","ketcherInstance","getKetcher","ketcherProvider","getStructure","structureFormat","formatterFactory","serverSettings","prepareStructToRender","_prepareStructToRender","parseStruct","factory","service","deleteAllEntitiesOnCanvas","deleteAllEntities","parseAndAddMacromoleculesOnCanvas","_x5","_parseAndAddMacromoleculesOnCanvas","ketStruct","deserialisedKet","_deserialisedKet$draw","deserializeToDrawingEntities","MonomerAddOperation","addMonomerChangeModel","deleteMonomerChangeModel","deleteMonomer","MonomerMoveOperation","monomerMoveModelChange","invertMonomerMoveModelChange","moveMonomer","MonomerHoverOperation","needRedrawAttachmentPoints","hoverMonomer","AttachmentPointHoverOperation","MonomerDeleteOperation","MonomerItemModifyOperation","updateMonomerItem","revertMonomerItem","DrawingEntityHoverOperation","hoverDrawingEntity","DrawingEntitySelectOperation","selectDrawingEntity","DrawingEntityMoveOperation","moveDrawingEntityChangeModel","invertMoveDrawingEntityChangeModel","redoDrawingEntityChangeModel","wasInverted","moveDrawingEntity","DrawingEntityRedrawOperation","drawingEntityRedrawModelChange","invertDrawingEntityRedrawModelChange","isNucleoside","phosphateLibraryItem","_editor$drawingEntiti","SNAKE_LAYOUT_CELL_WIDTH","Matrix","matrix","getRow","_this$matrix$x","forEachRightToLeft","_this$matrix$x2","forEachBottomToTop","_this$matrix$","Connection","connectedNode","isVertical","Cell","connections","CanvasMatrix","matrixConfig","initialMatrix","initialMatrixWidth","fillCells","fillConnectionsOffset","increaseOffset","connection","increaseValue","currentConnections","iterationMethod","cell","biggestOffsetInCell","biggestOffset","polymerBondConnections","polymerBondToConnections","polymerBondConnection","currentConnection","fillRightConnectionsOffset","handledConnections","rowNumber","columnNumber","initialMatrixCell","monomerToCell","_this3$polymerBondToC5","_this3$polymerBondToC6","connectedCell","xDistance","yDistance","xDirection","yDirection","xDistanceAbsolute","yDistanceAbsolute","polymerBondToCells","nextCellX","nextCellY","_this3$polymerBondToC","_this3$polymerBondToC2","sign","nextCellToHandle","_this3$polymerBondToC3","_this3$polymerBondToC4","lastCellToHandle","RecalculateCanvasMatrixOperation","recalculateCanvasMatrixModelChange","invertRecalculateCanvasMatrixModelChange","rerenderSideConnectionPolymerBonds","atomIdInMicroMode","addBond","calculateConnections","connectionsAmount","MicromoleculesBond","calculateCharge","calculateRadicalAmount","calculateValence","elementGroupNumber","connectionAmount","radicalAmount","hydrogenAmount","secondAtom","bondIdInMicroMode","moveToLinkedAtoms","firstAtomCenter","secondAtomCenter","addAtomToMoleculeStruct","atomInMoleculeStruct","bondsInMoleculeStruct","moleculeStruct","deleteAtomFromMoleculeStruct","AtomAddOperation","addAtomChangeModel","deleteAtomChangeModel","deletedMoleculeStructItems","deleteAtom","AtomDeleteOperation","addBondToMoleculeStruct","bondInMoleculeStruct","deleteBondFromMoleculeStruct","BondAddOperation","addBondChangeModel","deleteBondChangeModel","deleteBond","BondDeleteOperation","MonomerToAtomBondAddOperation","addMonomerToAtomBondChangeModel","deleteMonomerToAtomBondChangeModel","monomerToAtomBond","addMonomerToAtomBond","deleteMonomerToAtomBond","MonomerToAtomBondDeleteOperation","MACROMOLECULES_BOND_TYPES","payload","bondRenderer","firstSelectedAttachmentPoint","secondSelectedAttachmentPoint","isBondConnectionModalOpen","bondType","toolName","selectedRenderer","__data__","startAttachmentPoint","startBondAttachmentPoint","startPolymerBondCreation","hidePolymerBondInformation","_this$bondRenderer","_this$bondRenderer2","_this$bondRenderer3","shouldCalculateBonds","shouldInvokeModal","intendToFinishBondCreation","intendToStartBondCreation","_this$bondRenderer4","_this$bondRenderer5","_this$bondRenderer6","intendToFinishAttachmenPointBondCreation","intendToStartAttachmenPointBondCreation","_event$toElement","_event$fromElement","_this$bondRenderer7","eventToElementData","toElement","eventFromElementData","fromElement","_this$bondRenderer8","cancelIntentionToFinishBondCreation","_this$bondRenderer9","attachmentPointRenderer","_this$bondRenderer10","_this$bondRenderer11","isFirstMonomerHovered","_this$bondRenderer12","mouseup","alreadyHasBond","showModal","finishBondCreation","_this$bondRenderer13","hasFreeAttachmentPoint","_this$bondRenderer14","_this$bondRenderer15","_this$bondRenderer16","_this$bondRenderer17","_this$bondRenderer18","_this$bondRenderer19","atomRenderer","removeHoverForAllMonomers","checkForPotentialBonds","rnaMonomerClasses","firstMonomerIsRNA","RNAClass","secondMonomerIsRNA","hasPlentyAttachmentPoints","hasPlentyFreeAttachmentPoints","BothR1AttachmentPointUsed","BothR2AttachmentPointUsed","R1AndR2AttachmentPointUsed","VERTICAL_DISTANCE_FROM_ROW_WITHOUT_RNA","VERTICAL_OFFSET_FROM_ROW_WITH_RNA","DISTANCE_FROM_RIGHT","SNAKE_LAYOUT_Y_OFFSET_BETWEEN_CHAINS","MONOMER_START_X_POSITION","MONOMER_START_Y_POSITION","DrawingEntitiesManager","sugarMonomer","phosphateMonomer","rnaBaseMonomer","monomerIndex","monomerAddOperation","addAmbiguousMonomerChangeModel","attPointStart","attPointEnd","allEntities","polymerBonds","monomerToAtomBonds","deleteSelectedEntities","mergedCommand","deleteDrawingEntity","_monomer","createMonomer","Monomer","monomerItemNew","initialMonomer","addMonomerChangeModelCallback","needToDeleteConnectedEntities","unselectAllDrawingEntities","createDrawingEntitySelectionCommand","selectDrawingEntities","drawingEntities","selectionCommand","unselectDrawingEntity","addDrawingEntitiesToSelection","moveDrawingEntityModelChange","moveChemAtomsPoint","moveSelectedDrawingEntities","partOfMovementOffset","fullMovementOffset","createDrawingEntityMovingCommand","_drawingEntity$second","movingCommand","createDrawingEntityRedrawCommand","redrawCommand","needToDeleteConnectedBonds","modifyMonomerItem","previousSelectedEntities","isValueChanged","SequenceMode","checkBondSelectionForSequenceMode","_bond$secondMonomer","startPolymerBondCreationChangeModel","_polymerBond","_polymerBond$secondMo2","_polymerBond$secondMo3","_polymerBond$secondMo4","_polymerBond$secondMo5","firstAttachmentPoint","secondAttachmentPoint","_polymerBond$secondMo6","SnakeMode","recalculateCanvasMatrix","recalculateAntisenseChains","firstMonomerValidSourcePoint","secondMonomerValidTargetPoint","connectFirstMonomerOperation","connectSecondMonomerOperation","intendToSelectDrawingEntity","cancelIntentionToSelectDrawingEntity","monomersToAdd","monomerPosition","rearrangeChainModelChange","reArrangeChain","lastPosition","canvasWidth","rearrangedMonomersSet","maxVerticalDistance","restOfRowsWithAntisense","needRepositionMonomers","heightMonomerWithBond","isNewRow","isMonomerInRnaChainRow","oldMonomerPosition","nextPositionAndVerticalDistance","getNextMonomerPositionForSnakeLayout","reArrangeRnaChain","nucleotideOrNucleoside","_nucleotideOrNucleosi2","oldSugarPosition","_nucleotideOrNucleosi","addRnaOperations","_nucleotideOrNucleosi4","_nucleotideOrNucleosi3","nextMonomerPositionAndVerticalDistance","nextPositionAndDistance","getNextPositionAndDistance","snakeLayoutMatrix","_chainsCollection","canvasMatrix","redrawBonds","previousSnakeLayoutMatrix","rearrangeAntisenseChain","antisenseChain","rowsUsedByAntisense","_ref20","rearrangeResult","calculateSnakeLayoutMatrix","monomersGroupedByY","monomersGroupedByX","sortedGroupedMonomers","_ref21","_ref22","groupedByX","groupedByYArray","_ref23","_ref24","groupedByY","monomerXToIndexInMatrix","longestRow","currentRow","_ref25","_ref26","_ref27","indexY","_ref28","_ref29","_ref30","applySnakeLayout","isSnakeMode","needRedrawBonds","antisenseChainsWithData","complimentaryChainWithData","_complimentaryChainWi","antisenseChainsStartIndexes","antisenseChainWithData","firstConnectedAntisenseNodeIndex","senseNodeIndex","antisenseChainsStartIndexesMap","antisenseChainsStartIndex","isPreviousChainWithAntisense","_this13$rearrangeAnti","rearrangedAntisenseCommand","getFirstPosition","redrawBondsModelChange","isMonomerFitCanvas","isNucleosideAndPhosphateConnectedAsNucleotide","nucleoside","r2Bond","setMicromoleculesHiddenEntities","micromoleculesHiddenEntities","clearMicromoleculesHiddenEntities","targetDrawingEntitiesManager","monomerToNewMonomer","mergedDrawingEntities","viewModel","monomerAddCommand","addAmbiguousMonomer","addedMonomer","polymerBondCreateCommand","addedPolymerBond","atomAddCommand","addedAtom","newFirstAtom","newSecondAtom","bondAddCommand","addedBond","initialize","centerMacroStructure","structCenter","getMacroStructureCenter","_ref31","_ref32","originalCenterPointOfCanvas","xmin","ymin","xmax","ymax","applyMonomersSequenceLayout","clearCanvas","removeEmptyNodes","applyFlexLayoutMode","rerenderPolymerBonds","getAllSelectedEntitiesForEntities","newDrawingEntities","selectedDrawingEntities","getAllSelectedEntitiesForSingleEntity","needToSelectConnectedBonds","isPartOfRNA","nucleotide","_polymerBond$getAnoth","validateIfApplicableForFasta","monomerTypes","monomerType","_ref33","_polymerBond$secondMo7","_polymerBond$secondMo8","newFirstMonomerAttachmentPoint","newSecondMonomerAttachmentPoint","initialFirstMonomerAttachmentPoint","initialSecondMonomerAttachmentPoint","reconnectPolymerBond","ambiguousMonomerItem","atomAddOperation","_bond","bondAddOperation","_monomerToAtomBond","monomerAtomBond","monomerAddToAtomBondOperation","_ref34","markMonomerAsAntisense","markMonomerAsSense","isSense","senseToAntisenseChains","senseChain","chainsToCheck","hasHydrogenBondWithRnaBase","chainToMonomers","chainToCheck","largestChainsMonomersAmount","largestChains","_ref35","_ref36","chainsToCenters","_ref37","_ref38","chainBbox","geStructureBbox","chainsToCenterArray","chainWithLowestCenter","_ref39","_ref40","_ref41","previousChain","previousChainCenter","_ref42","_senseToAntisenseChai","antisenseChains","getAntisenseBaseLabel","antisenseChainBasesMap","selectedMonomers","_ref43","_ref44","_ref45","_ref46","chainsForAntisenseCreation","selectedPiecesInChains","selectedPiece","hasRnaInPiece","hasSelectedMonomerInNode","lastAddedNode","lastAddedMonomer","antisenseBaseLabel","_createOnCanvas","addNucleotideCommand","addedNode","firstMonomerInNode","_lastAddedNode","monomersArray","BaseMode","modeName","previousMode","DEFAULT_LAYOUT_MODE","changeMode","isUndo","ModeConstructor","modesMap","setMode","needRemoveSelection","_onKeyDown","Promise","resolve","checkIfTargetIsInput","_this$keyboardEventHa","keyboardEventHandlers","onKeyDown","onCopy","_entity$secondMonomer","_entity$secondMonomer2","serializedKet","_onPaste","isCanvasEmptyBeforePaste","_clipboardData","hasDrawingEntities","_pasteIsInProgress","pasteFromClipboard","zoomToStructuresIfNeeded","onPaste","_pasteFromClipboard","_callee3","pastedStr","inputFormat","isSequenceOrFasta","_callee3$","_context3","pasteKetFormatFragment","sequenceTypeEnterMode","pasteWithIndigoConversion","scrollForView","isPasteAllowedByMode","isPasteAvailable","errorTitle","errorMessage","updateEntitiesPosition","_drawingEntitiesManag","applyAdditionalPasteOperations","_pasteWithIndigoConversion","_callee4","indigo","stringError","_args4","_callee4$","_context4","outputFormat","unsupportedSymbolsError","_drawingEntitiesManag2","newNodePosition","getNewNodePosition","firstEntityPosition","drawindEntity","_event$target","_event$target2","HTMLElement","nodeName","FlexMode","_BaseMode","hasAntisenseChains","TEXT_COLOR","HOVER_COLOR","BUTTON_OFFSET_FROM_CANVAS","BUTTON_Y_OFFSET_FROM_ROW","NewSequenceButton","indexOfRowBefore","_chain$lastNode","lastNodeRendererInChain","buttonElement","appendPlusIcon","_this$buttonElement","_this$buttonElement2","naturalAnalogues","uniq","Direction","_isEditMode","isEditMode","_isEditInRNABuilderMode","isEditInRNABuilderMode","_chainsCollection$fir","needScroll","needReArrangeChains","firstMonomerPosition","turnOnEditMode","sequenceItemRenderer","needToRemoveSelection","setCaretPositionNextToMonomer","turnOffEditMode","eventData","currentChainIndex","updatedSelection","labeledNucleoelement","sugarMonomerItem","baseMonomerItem","phosphateMonomerItem","sugarLabel","baseLabel","phosphateLabel","currentNode","getNodeByPointer","sugarR2","nextMonomerInSameChain","bondNodesThroughNewPhosphate","ReinitializeModeOperation","click","isClickedOnSequenceItem","unselectAllEntities","_event$target3","moveCaretForward","_event$target4","isClickedOnEmptyPlace","isEventOnSequenceItem","sequenceItemBoundingBox","rootBoundingClientRect","_SequenceRenderer$get","getRendererByMonomer","isRightSideOfSequenceItemClicked","setCaretPositionByMonomer","resetLastUserDefinedCaretPosition","selectionStarted","selectionStartCaretPosition","caretPosition","_event$target5","mousemoveCounter","setCaretPositionBySequenceItemRenderer","startCaretPosition","endCaretPosition","getMonomersByCaretPositionRange","moveCaretOperation","RestoreSequenceCaretPositionOperation","additionalPhosphate","tryToCreatePolymerBond","handlePeptideNodeAddition","enteredSymbol","newPeptideLibraryItem","peptideAddCommand","newPeptide","newPeptideNode","insertNewSequenceFragment","handleRnaDnaNodeAddition","addedNodeModelChanges","nodeToAdd","connectNodes","firstNodeToConnect","secondNodeToConnect","nextNodeInSameChain","_firstNodeToConnect$l","_secondNodeToConnect$","nodeR2Bond","nextNodeR1Bond","deleteBondToNextNodeInChain","finishNodesDeletion","previousCaretPosition","newCaretPosition","isConnectionPossible","areR1R2Free","showMergeWarningModal","handleNodesDeletion","selections","selectionRange","selectionStartNode","selectionEndNode","isPhosphateAdditionalyDeleted","nodeBeforeSelection","getPreviousNode","nodeAfterSelection","getNextNode","nodeInSameChainBeforeSelection","getPreviousNodeInSameChain","nodeInSameChainAfterSelection","getNextNodeInSameChain","getNewSequenceItemPosition","deleteNode","nodeToDelete","Left","previousNode","nodesToDelete","deleteSelectedDrawingEntities","Right","backspace","moveCaretUp","moveCaretDown","moveCaretBack","naturalAnalogue","setCaretPosition","deleteSelection","code","insertNewSequenceItem","arrowKey","shiftArrowSelectionInEditMode","deletionModelChanges","isR1Free","_entity$firstMonomerI","isR2Free","_entity$lastMonomerIn","firstEntity","lastEntity","currentEdittingNode","previousNodeInSameChain","lastNodeOfNewFragment","firstNodeOfNewFragment","isPasteInEnd","isPasteInStart","_currentSequence$last","currentSequence","currentChain","currentSequenceHasPhosphate","lastNonEmptyNode","nextCaretPosition","preserveSideChainConnections","sideConnectionsData","secondMonomerBondData","_secondMonomerBondDat","secondMonomerAttachmentPointName","firstMonomerAttachmentPointName","replaceSelectionWithMonomer","previousSelectionNode","nextNode","sideChainConnections","hasPreviousNodeInChain","hasNextNodeInChain","newMonomer","newMonomerSequenceNode","sideConnectionData","replaceSelectionsWithMonomer","previousReplacedNode","nodeSelection","checkIfNewMonomerCouldEstablishConnections","newMonomerAttachmentPoints","oldMonomerBonds","isBackBoneChainConnection","selectionsContainLinkerNode","selectionsCantPreserveConnectionsWithMonomer","presetHasNeededAttachmentPoints","sugarHasR1","phosphateHasR2","selectionsCantPreserveConnectionsWithPreset","checkNodeInsertionPossibility","newNode","currentNodeIsNotEmpty","missingAttachmentPoint","previousMonomerHasR2","newMonomerHasR1","rightSideInsertImpossible","nextMonomerHasR1","newMonomerHasR2","leftSideInsertImpossible","nodeCanBeInserted","insertMonomerFromLibrary","confirmationText","onConfirm","_this$checkNodeInsert","createRnaPresetNode","newPresetNode","replaceSelectionWithPreset","rnaPresetAddModelChanges","addRnaPresetFromNode","monomerForSideConnections","replaceSelectionsWithPreset","insertPresetFromLibrary","_this$checkNodeInsert2","chainsCollectionOrNode","nextNodeToConnect","previousNodeToConnect","needConnectWithPreviousNodeInChain","needConnectWithNextNodeInChain","previousFromCurrentEdittingMonomer","nodeBeforePreviousNode","getNextChainPosition","offsetFromPrevious","drawnEntitiesBoundingBox","getRenderedStructuresBbox","unselectEmptySequenceNodes","removeNewSequenceButtons","FlexModePolymerBondRenderer","startPositionInPixels","endPositionInPixels","previousStateOfIsMonomersOnSameHorizontalLine","appendBond","appendBondGraph","monomer1Y","monomer2Y","finished","moveGraphBondEnd","_this$hoverCircleArea","_this$selectionElemen3","hoverCircleAreaElement","moveGraphBondStart","_this$selectionElemen4","LineDirection","LINE_FROM_MONOMER_LENGTH","VERTICAL_LINE_LENGTH","RNA_CHAIN_VERTICAL_LINE_LENGTH","RNA_ANTISENSE_CHAIN_VERTICAL_LINE_LENGTH","RNA_SENSE_CHAIN_VERTICAL_LINE_LENGTH","CORNER_LENGTH","DOUBLE_CORNER_LENGTH","BOND_END_LENGTH","CELL_HEIGHT","SMOOTH_CORNER_SIZE","SIDE_CONNECTION_BODY_ELEMENT_CLASS","SnakeModePolymerBondRenderer","calculateIsSnakeBond","cells","appendSideConnectionBond","isSnakeBond","appendSnakeBond","updateSnakeBondPath","drawPartOfSideConnection","isHorizontal","maxXOffset","maxYOffset","connectionYOffset","endOfPathPart","sideConnectionBondTurnPoint","_cell$monomer$rendere","pathPart","generateBend","_firstCell$node","firstCell","firstCellConnection","isVerticalConnection","isStraightVerticalConnection","isStraight","isFirstMonomerOfBondInFirstCell","isTwoNeighborRowsConnection","dAttributeForPath","previousConnection","previousCell","horizontalPartIntersectionsOffset","areCellsOnSameRow","isSecondCellEmpty","maxHorizontalOffset","cellIndex","cellConnection","isLastCell","_xDirection","directionObject","getMonomerWidth","_this$polymerBond$fir","_this$polymerBond$fir2","getMonomerHeight","_this$polymerBond$fir3","_this$polymerBond$fir4","reCheckAttachmentPoint","isR1TheCurrentAttachmentPointOfFirstMonomer","isBondConnectedWithNucleotide","verticalLineLength","isSecondMonomerBottomRight","Horizontal","addLineFromLeftToBottom","Vertical","addLineFromTopToRight","isSecondMonomerTopRight","addLineFromLeftToTop","addLineFromBottomToRight","isSecondMonomerBottomLeft","addLineFromTopToLeft","addLineFromRightToBottom","isSecondMonomerTopLeft","addLineFromRightToTop","isSecondMonomerLeft","addRandomLine","lineDirection","isSideConnectionBondDrawn","moveSnakeBondEnd","moveSnakeBondStart","_this$selectionElemen5","_this$selectionElemen6","allSideConnectionBondsBodyElements","querySelectorAll","bondBodyElement","dx1","dy1","LayoutMode","polymerBondRendererMap","Flex","Snake","PolymerBondRendererFactory","createInstance","checkIfIsSnakeMode","createInstanceByMode","AtomRenderer","showHover","hideHover","appendSelectionContour","labelLength","_this$textElement","_ZoomTool$instance$ca","labelBbox","labelWidth","labelHeight","canvasBoundingClientRect","canvasX","HOVER_PADDING","HOVER_RECTANGLE_RADIUS","selectionContourElement","_this$hoverElement","_this$hoverElement2","atomHaldEdges","atomsToHalfEdges","firstHalfEdge","atomNeighborsHalfEdges","isAtomTerminal","isAtomInMiddleOfChain","_this$atom$calculateV","_this$atom$calculateV2","BOND_WIDTH","BondRenderer","getDoubleBondShiftForChain","secondHalfEdge","sinToLeftNeighborHalfEdge","sinToRightNeighborHalfEdge","getDoubleBondShiftForLoop","loop1HalfEdgesAmount","loop2HalfEdgesAmount","loop1DoubleBondsAmount","loop2DoubleBondsAmount","BENZENE_RING_BONDS_AMOUNT","getDoubleBondShift","loop1Id","loop2Id","halfEdges","doubleBondsAmount","shiftPositionIfAtomLabelVisible","halfEdge","_atom$renderer","_this$bond$firstAtom$","pathShape","_this$canvas2","bondsToHalfEdges","halfEdgeStart","halfEdgeEnd","linesOffset","bondStartPosition","bondEndPosition","firstLinePartShift","secondLinePartShift","firstLineStartPosition","leftNormal","firstLineEndPosition","secondLineStartPosition","secondLineEndPosition","cosToRightNeighborHalfEdge","cosToLeftNeighborHalfEdge","halfOfBondEndWidth","bondEndFirstPoint","bondEndSecondPoint","normalizedDirection","offsetBetweenLines","numberOfLines","MonomerToAtomBondRenderer","RenderersManager","markForReEnumeration","needRecalculateMonomersEnumeration","_monomer$renderer2","_drawingEntity$baseRe","_drawingEntity$baseRe2","recalculateEnumeration","deleteAllDrawingEntities","polymerBondRenderer","_monomer$renderer3","_polymerBondRenderer$","_polymerBond$renderer2","_polymerBond$renderer3","_polymerBond$renderer4","_polymerBond$firstMon2","_polymerBond$firstMon3","_polymerBond$renderer5","_polymerBond$firstMon4","_polymerBond$firstMon5","recalculatePeptideChainEnumeration","currentEnumeration","monomerEnumeration","recalculateRnaChainEnumeration","nucleotidesAmount","_node$rnaBase$rendere","_node$rnaBase$rendere2","_node$sugar$renderer","_node$sugar$renderer2","_node$monomer$rendere","_node$monomer$rendere2","_monomer$renderer4","recalculateMonomersEnumeration","_polymerBond$firstMon6","_polymerBond$firstMon7","_polymerBond$firstMon8","_polymerBond$renderer6","_polymerBond$firstMon9","_polymerBond$firstMon10","_polymerBond$firstMon11","_secondMonomer$render","_secondMonomer$render2","_secondMonomer$render3","_monomer$renderer5","_monomer$renderer6","_monomer$renderer7","_bond$renderer","_bond$monomer$rendere","_bond$monomer$rendere2","_bond$renderer2","_monomer$renderer8","_needRemoveSelection","_isUndo","scrollToTopLeftCorner","bottomRightMonomerPosition","isSequenceMode","_renderersManager","nextPosition","MonomerToAtomBondSequenceRenderer","monomerNode","_this$atom$renderer","_this$atom$renderer2","monomerY","monomerX","atomY","atomX","NUMBER_OF_SYMBOLS_IN_ROW","emptyChainIndex","showNodes","emptySequenceItemRenderers","emptySequenceItemRenderer","newSequenceButtons","newSequenceButton","chainBeforeEmptyChainIndex","_firstNode$monomer$re","newSequenceEmptyNode","currentChainStartPosition","currentMonomerIndexInChain","currentMonomerIndexOverall","isEditInRnaBuilderMode","_Chain$createChainWit","_node$monomers","curr","showNewSequenceButton","setCaretPositionByNode","lastChainStartPosition","lastChain","handledMonomersToAttachmentPoints","handledAttachmentPoints","connectedSugarToBase","anotherMonomerHandledAttachmentPoints","_chain$firstMonomer","_subChainNode$rendere","oldSubChainNode","_oldSubChainNode$rend","subChainNode","nodeToCompare","lastUserDefinedCaretPosition","finalArray","chainNodes","getNodeIndexInRowByGlobalIndex","restNodes","nodeIndexInRow","nodesGroupedByRows","idexRow","currentIndex","currentNodeIndexInRow","currentChainRow","symbolsBeforeCaretInCurrentRow","lastUserDefinedCursorPositionInRow","previousRowOfNodes","symbolsAfterCaretInCurrentRow","nextRowOfNodes","lastNodeIndex","sequencePointer","nodeToReturn","getLastNonEmptyNode","subChainBeforeLast","getLastNode","nodeOnNextPosition","nodeOnPreviousPosition","oldNewSequenceChainIndex","isNewSequenceChain","previousNodeChainIndex","getShiftArrowChanges","previousChainLastEmptyNode","needTurnOffSelection","lastSelectionRangeIndex","_previousNode","isNucleosideConnectedAndSelectedWithPhosphate","hasR1Connection","nodePosition","rendererToReturn","RNASequenceItemRenderer","_firstNodeInChainPosition","_monomerIndexInChain","_isLastMonomerInChain","_subChain","_this$node$rnaBase$mo","drawCommonModification","_RNASequenceItemRende","_node$phosphate","phosphateModificationCircleElement","nucleosideCircleElement","_NO_ANALOGUE_SYMBOL","drawLine","isAsparticAcidWithDifferentR3","AMINO_ACID","MODDNA","SUGAR","BASE","ketMonomerClass","unresolved","Action","addOp","mergeWith","sortedOperations","invertedOperation","fromAromaticTemplateOnBond","template","_events","simpleFusing","SELECTION_DISTANCE_COEFFICIENT","SELECTION_WITHIN_TEXT","findMaps","findClosestAtom","findClosestBond","findClosestEnhancedFlag","findClosestDataSGroupData","findClosestSGroup","findClosestRxnArrow","findClosestRxnPlus","findClosestFrag","findClosestRGroup","findClosestSimpleObject","findClosestText","cursorPosition","referencePoints","skip","closestAtom","maxMinDist","skipId","closestBond","closestBondCenter","minCDist","mid","cdist","inStripe","_minDist","inBox","xDist","rxnArrow","_sg$getContractedPosi","pg","findClosestItem","mp","other","findCloseMerge","srcId","atomGetAttr","atomGetDegree","atomGetSGroups","atomGetPos","findStereoAtoms","monomerAtoms","connectedBonds","connectedWithStereoBond","structSelection","formatSelection","atomForNewBond","_atomNeighbours$","neighbours","atomNeighbours","prevBondId","prevBond","prevBondType","neiPos","maxI","maxAngle","neiNeighbours","neiV","neiAngle","neiNei","neiNeiPos","vDiff","shallBe180DegToPrevBond","prevBondAngle","closest","getRelSGroupsBySelection","selectedAtoms","_sgid","isAttachmentBond","isBondStartsInSelectionAndEndsOutside","isBondEndsInSelectionAndStartsOutside","fromRGroupAttrs","fromRGroupFragment","rgidNew","fromUpdateIfThen","rgidOld","fromSeveralSgroupAddition","descriptors","fromSgroupAddition","fValue","localAttrs","fromSgroupAttrs","setExpandSGroup","fromAtomsAttrs","setExpandMonomerSGroup","bondsToOutside","attachmentAtomsFromOutside","sGroupBBox","sGroupWidth","sGroupHeight","visitedAtoms","visitedSGroups","atomsToMove","sGroupsToMove","prepareSubStructure","subStructureKey","atomSGroups","atomInSGroup","_sGroupsToMove$get","anotherSGroupId","anotherSGroup","previousArray","_atomsToMove$get","_restruct$molecule","neighborAtomId","_sGroupsToMove$get2","subStructBBox","subStructCenter","sGroupCenter","moveVector","finalMoveVector","expandSGroupWithMultipleAttachmentPoint","sGroupAttributeAction","fromSgroupDeletion","needPerform","sG","asteriskAction","plainCarbon","fromSgroupAction","newSg","sourceAtoms","fromBondAction","atomsFromBonds","getAtomsFromBonds","newSourceAtoms","fromGroupAction","fromMultiFragmentAction","fromAtomAction","fromQueryComponentSGroupAction","targetAtoms","allFragments","fragId","_restruct$atoms$get5","getAtomsBondIds","currSelection","bondid","removeAtomFromSgroupIfNeeded","removeSgroupIfNeeded","sgCounts","count","_restruct$sgroups$get","fromSgroupAttachmentPointAddition","fromSgroupAttachmentPointRemove","atomAttachmentPoints","fromBondAddition","beginAtomPos","endAtomPos","_struct$frags$get","mouseDownNothingAndUpNothing","beginAtomAttr","endAtomAttr","newFragmentId","newBeginAtomId","newEndAtomId","mouseDownNothingAndUpAtom","endAtomId","mergeSgroups","mouseDownAtomAndUpNothing","beginAtomId","startsOnAtom","endsOnAtom","_mouseDownNothingAndU","_mouseDownNothingAndU2","_mouseDownNothingAndU3","_mouseDownNothingAndU4","_mouseDownAtomAndUpNo","_mouseDownAtomAndUpNo2","addAttachmentPointToSuperatom","newBondId","fromBondStereoUpdate","mergedFragmentId","mergeFragmentsIfNeeded","fromBondsAttrs","reset","bids","fromBondsMerge","mergeMap","atomPairs","dstId","bondCI","dst","src","fromAtomMerge","fromBondFlipping","isInteger","withReverse","beginFrId","endFrId","fragmentStereoBonds","_struct$atoms$get3","_struct$atoms$get4","aId","_struct$atoms$get5","fromStereoAtomAttrs","plainBondTypes","bondChangingAction","itemID","bondProps","newItemId","removeAttachmentPointFromSuperatom","_sgroup$item5","_sgroup$item6","anotherSideAtomId","fromAtomAddition","_atomNeighbors$","atomNeighbors","fromAtomsFragmentAttr","newfrid","oldfrid","_dstAtomNeighbors$","_atomNeighbors$2","fragAction","mergeBondId","sgChanged","dstAtomNeighbors","frid2","fridAtoms","atomsToNewFrag","moveAtomsAction","srcAtoms","dstAtom","notExpandedContexts","atomsToSgroup","without","checkAtomValence","fromNewCanvas","fromDescriptorsAlign","fromChain","chainItems","fromItemsFuse","usedAtoms","connectedAtomIds","getAllConnectedAtomsIds","mergeMapOfItemsToSet","valenceCheck","getItemsToFuse","mergeItems","closestToMerge","findMerge","getHoverToFuse","hoverItems","atomToFunctionalGroup","Date","now","itemsSet","closestMap","bondsIds","initialAtoms","connectedAtoms","_bond$b","initialAtom","relevantConnectedComponent","fromMultipleMove","lists","shouldPerform","atomsToInvalidate","rxnPulse","sgData","fromStereoFlagUpdate","processAtom","usedIds","fromFragmentSplit","rgForRemove","fromRGroupAttachmentPointUpdate","fromRGroupAttachmentPointsDeletionByAtom","fromRGroupAttachmentPointAddition","attachmentPointsToDelete","fromRGroupAttachmentPointDeletion","_getNewAtomAttachment","getNewAtomAttachmentPoints","newAttachmentPoints","actionToUpdateAtomsAttrs","actionToDeletePoint","rgroupAttachmentPointToDelete","pointToDelete","currentAttachmentPoints","None","pointToDeleteType","fromOneAtomDeletion","fromFragmentDeletion","fromBondDeletion","skipAtoms","_restruct$bonds$get","_restruct$bonds$get2","beginAtomConnectedToBond","endAtomConnectedToBond","atomsToRemove","fromOneBondDeletion","rawSelection","frids","sgroupAtoms","actionRemoveBonds","removedRGroupAttachmentPoints","frid3","actionToDeleteRGroupAttachmentPoints","fromPaste","pstruct","xy0","getStructCenter","fridMap","pasteItems","tmpAtom","newsgid","sgAction","oper","clonedImage","clonedMultitailArrow","__frag","newRgId","isOnlyOneSGroup","onlyOneStructsSgroupId","fromImageCreation","halfSize","Image","fromImageDeletion","fromImageMove","fromImageResize","referencePositionInfo","positionWithOffset","fromMultitailArrowCreation","fromMultitailArrowDeletion","fromMultitailArrowMove","fromMultitailArrowTailAdd","fromMultitailArrowTailRemove","fromMultitailArrowHeadTailsResize","fromMultitailArrowHeadTailMove","fromArrowAddition","fromArrowResizing","fromArrowDeletion","fromPlusAddition","fromPlusDeletion","fromFlip","flipDirection","structToFlip","fromStructureFlip","fromRxnArrowFlip","fromRxnPlusFlip","fromTextFlip","rxnArrowIds","_rxnArrow$pos","oyAngle","rotateAngle","flipPointByCenter","rxnPlusIds","plusId","rxnPlus","textIds","textId","textMiddleLeft","textMiddleRight","textCenter","flipBonds","bondIds","pointToFlip","fromRotate","rotateDelta","did","flagId","fromSimpleObjectDeletion","fromSimpleObjectAddition","fromSimpleObjectResizing","benzeneMoleculeName","cyclopentadieneMoleculeName","benzeneDoubleBondIndexes","fromTemplateOnCanvas","_fromPaste","_fromPaste2","extraBondAction","additionalAtom","middleAtom","actionRes","fromTemplateOnAtom","extraBond","tmpl","isTmplSingleGroup","extraRes","angle0","fromTemplateOnBondAction","fromTemplateOnBond","getConnectingBond","isBenzeneTemplate","isCyclopentadieneTemplate","_Bond$getBondNeighbou","isOnlyTwoConnectingBonds","beginBond","endBond","tmplBond","tmplBegin","atomsMap","bondAtoms","_utils$mergeBondsPara","mergeA","fusingBondType","isFusingBenzeneBySpecialRules","tBond","tBondIndex","existId","previewBondId","newBondType","_Bond$getBondNeighbou2","commonBond","fromTextCreation","fromTextUpdating","fromTextDeletion","HighlightAdd","highlightId","Highlight","notifyChanged","HighlightDelete","highlightToRemove","HighlightUpdate","newData","oldData","_this$newData","highlightToUpdate","oldAtoms","oldBonds","oldRgroupAttachmentPoints","oldColor","updatedHighlight","_this$oldData","reAtoms","reBonds","reRgroupAttachmentPoints","rgroupAPid","fromHighlightCreate","fromHighlightClear","HISTORY_SIZE","historyPointer","megreWithLatestHistoryCommand","_ketcherProvider$getK","latestCommand","historyStack","changeEvent","_ketcherProvider$getK2","_this$editor","_this$editor2","lastCommand","turnOffSelectionCommand","_ketcherProvider$getK3","MonomerTool","monomerPreviewRenderer","_this$monomerPreview","_this$monomerPreviewR","monomerPreview","_this$monomerPreviewR2","variantMonomer","_this$monomerPreviewR3","EraserTool","selectedItemRenderer","createBrush","brushArea","brush","d3Brush","brushed","mo","setSelectedEntities","_this$brushArea","_this$brush","onStartBrush","onBrush","brushEvent","sourceEvent","handleResizeCanvas","extent","keyModifiers","canvasElement","canvasResizeObserver","isSequenceAnyEditMode","mousePositionAfterMove","mousePositionBeforeMove","ModKey","moveStarted","selectModelChanges","selectedEntitiesArr","_this$editor$drawingE2","currentSubChain","bondsInsideCurrentChain","_renderer$drawingEnti","_this$canvasResizeObs","disconnect","ClearTool","isCurrentModeSequence","HandTool","classList","dragBehavior","handleDragStart","handleDragging","handleDragEnd","isBaseTool","tool","toolsMap","vectorUtils","renderCache","previousOptions","MIN_ATTACHMENT_POINT_SIZE","attachmentPointRegExp","RenderStruct","prepareStruct","_newStruct$sgroups$ge","newStruct","convertAllSGroupAttachmentPointsToRGroupAttachmentPoints","removeSmallAttachmentPointLabelsInModal","labelInMonomerConnectionsModal","isSmall","wrapperElement","_options$cachePrefix","cachePrefix","_options$needCache","needCache","cacheKey","innerHTML","preparedStruct","structureSize","structureSizeInPixels","wrapperElementBoundingRect","isStructureLessThanWrapper","structureRectangleSize","svgSize","extendedOptions","isPolymerEditorTurnedOn","rnd","attachmentPointAtom","convertToRGroupAttachmentPointForDisplayPurpose","MacromoleculesConverter","convertMonomerToMonomerMicromolecule","addMonomerAtomToStruct","atomClone","convertAttachmentPointNameToNumber","findAttachmentPointAtom","monomerToAtomIdMap","attachmentPointAtomId","globalAttachmentAtomId","convertDrawingEntitiesToStruct","monomerToMonomerMicromolecule","atomIdsMap","monomerBonds","oldAtom","oldAtomId","_this$addMonomerAtomT","_monomer$monomerItem$2","_attachmentPoint$leav","bondClone","conversionErrorMessage","_monomerToAtomIdMap$g","_monomerToAtomIdMap$g2","_this$findAttachmentP","_this$findAttachmentP2","_monomerToAtomIdMap$g3","_this$findAttachmentP3","convertMonomerMicromoleculeToMonomer","sgroupToMonomer","monomerAdditionCommand","convertFragmentToChem","fragmentNumber","fragmentStruct","fragmentBbox","colorScheme","favorite","atomRglabel","getFragmentsGroupedBySgroup","groupedFragments","_fragment","isAlreadyGrouped","fragmentsGroup","fragmentSgroups","lastFragmentGroupIndex","atomFragmentId","findAtomByMicromoleculeAtomId","convertStructToDrawingEntities","fragmentIdToMonomer","fragmentIdToAtomIdMap","globalAtomIdToMonomerMap","atomIdMapObject","fromEntries","localAtomIdToGlobalAtomId","superatomAttachmentPointToBond","beginAtomSgroup","endAtomSgroup","isConnectionBetweenMonomerAndMolecule","moleculeAtomId","moleculeAtom","monomerSgroup","atomIdInMicromolecules","atomToConnect","beginAtomSgroupAttachmentPoints","endAtomSgroupAttachmentPoints","beginAtomAttachmentPointNumber","sgroupAttachmentPoint","beginAtomAttachmentPoint","endAtomAttachmentPointNumber","endAtomAttachmentPoint","HalfEdge","calculateDoubleBondsAmount","ViewModel","setHalfBondProperties","oppositeHalfEdge","setAtomsToHalfEdgesMap","atomHalfEdges","setBondsToHalfEdgesMap","initHalfEdge","firstHalfEdgeId","secondHalfEdgeId","initHalfEdges","setHalfEdgesAngle","nextHalfEdge","leftNeighborHalfEdge","rightNeighborHalfEdge","sortAtomsHalfEdges","halfEdge1","halfEdge2","halfEdgeIndex","halfEdgesInLoop","firstAtomId","secondAtomId","getAngleBetweenHalfEdges","nextNextHalfEdge","currentHalfEdge","halfEdgesInPotentialLoop","halfEdgesInSubLoop","clearState","isMouseMainButtonPressed","button","persistentMonomersLibrary","persistentMonomersLibraryParsedJson","monomersLibraryUpdate","_type","Macromolecules","drawnStructuresWrapperElement","setMonomersLibrary","monomersDataRaw","_monomersLibraryParsedJson","subscribeEvents","domEventSetup","setupContextMenuEvents","setupKeyboardEvents","setupCopyPasteEvent","zoomTool","micromoleculesEditor","switchToMacromolecules","rerenderSequenceMode","parseMonomersLibrary","monomersLibraryParsedJson","convertMonomersLibrary","_monomersLibrary","_this$parseMonomersLi","_this$parseMonomersLi2","newMonomersLibraryChunkParsedJson","newMonomersLibraryChunk","existingMonomerIndex","_monomer$props","_newMonomer$props","_monomer$props2","_newMonomer$props2","newMonomerProps","monomerIdToUse","existingMonomerProps","existingMonomerIdToUse","existingMonomerRefIndex","root","templates","monomersLibraryJson","templateRef","MONOMER_GROUP_TEMPLATE","handleHotKeyEvents","_keySettings$shortcut","keySettings","isInput","setupHotKeysEvents","keydownEventHandler","addEventListener","copyEventHandler","pasteEventHandler","hotKeyEventHandler","isClickOnCanvas","onSelectMonomer","onSelectRNAPreset","onSelectTool","onCreateBond","onCancelBondCreation","onSelectMode","eventName","useModeIfNeeded","useToolIfNeeded","onEditSequence","onTurnOnSequenceEditInRNABuilderMode","onTurnOffSequenceEditInRNABuilderMode","onChangeSequenceTypeEnterMode","onCreateAntisenseChain","isReconnection","_this$drawingEntities","PolymerBondTool","handleBondCreation","handleBondCreationCancellation","hasModeChanged","mergeWithLatestHistoryCommand","ToolConstructor","oldTool","unsubscribeEvents","handlers","removeEventListener","trackedDomEvents","toolEventHandler","DOMSubscription","subs","updateLastCursorPosition","isToolUsed","clientAreaBoundingBox","pageX","pageY","eventHandlerName","_editorTool$isSelecti","editorTool","conditions","isSelectionRunning","condition","_editorTool$eventHand","_this$mode","_this$mode$eventHandl","isHandToolSelected","switchToMicromolecules","_MacromoleculesConver","setMacromoleculeConvertionError","Micromolecules","_this$micromoleculesE","_MacromoleculesConver2","isCurrentModeWithAutozoom","_ketcher_isAutozoomDisabled","hasMonomers","templateToMonomerProps","fullName","naturalAnalogShort","MonomerFullName","classHELM","idtAliases","monomerToDrawingEntity","getTemplateAttachmentPoints","seqId","seqid","createMonomersForVariantMonomer","variantMonomerTemplate","parsedFileContent","monomerTemplates","option","templateId","monomerTemplate","convertMonomerTemplateToStruct","MonomerConstructor","fillStructRgLabelsByMonomerTemplate","variantMonomerToDrawingEntity","polymerBondToDrawingEntity","superatomMonomerToUsedAttachmentPoint","_firstMonomer$monomer","_secondMonomer$monome","_superatomMonomerToUs3","_superatomMonomerToUs4","endpoint1","_superatomMonomerToUs","endpoint2","_superatomMonomerToUs2","validateMultitailArrows","json","validate","ajv","Ajv","compile","schema","imageToKet","imageNode","imageToStruct","multitailArrowToKet","multitailArrowToStruct","parseNode","currentStruct","fillStruct","serializeMicromolecules","moleculeId","validateMonomerNodeTemplate","validateConnectionTypeAndEndpoints","connectionType","parseAndValidateMacromolecules","fileContent","_parsedFileContent$ro","nodeDefinition","deserializeToStruct","deserializedContent","filterMacromoleculesContent","_parsedFileContent$ro2","fileContentForMicromolecules","MONOMER","AMBIGUOUS_MONOMER","convertMonomerTemplateToLibraryItem","monomerLibraryItem","_parsedFileContent$ro3","_this$parseAndValidat","hasValidationErrors","monomerIdsMap","deserializedMicromolecules","structToDrawingEntitiesConversionResult","_atomIdsMap","globalAtomId","localAtomId","bondAdditionCommand","getConnectionMonomerEndpoint","monomerIdMap","getConnectionMoleculeEndpoint","serializeMonomerTemplate","templateNameWithPrefix","mol0","serializeVariantMonomerTemplate","monomerTemplateId","serializeMacromolecules","nextMonomerId","monomerKey","probability","String","serializedMacromolecules","micromoleculesStruct","_struct","removeLeavingGroupsFromConnectedAtoms","_this$serializeMacrom","serializedMicromoleculesStruct","library","MONOMER_TEMPLATE","AMBIGUOUS_MONOMER_TEMPLATE","variantMonomerLibraryItem","resultingStruct","_template$attachmentP","_template$attachmentP2","firstAtomInLeavingGroup","leavingGroupAtom","attachmentPointsToReplace","attachmentPointClone","attachmentPointToAdd","attachmentPointToDelete","paddedNum","precision","numStr","padStart","parseDecimalInt","partitionLine","withspace","partitionLineFixed","itemLength","fmtInfo","bondTypeMap","bondStereoMap","v30bondStereoMap","bondTopologyMap","countsLinePartition","atomLinePartition","bondLinePartition","atomListHeaderPartition","atomListHeaderLength","atomListHeaderItemLength","chargeMap","valenceMap","implicitHydrogenMap","v30atomPropMap","CHG","RAD","MASS","VAL","HCOUNT","INVRET","SUBST","UNSAT","RBCNT","rxnItemsPartition","FRAGMENT","REACTANT","PRODUCT","AGENT","rxnMerge","mols","nReactants","nProducts","nAgents","shouldReactionRelayout","bbReact","bbAgent","bbProd","molReact","molAgent","molProd","bondLengthData","bondLengthDataMol","avgBondLength","fragmentType","shiftMol","xorig","over","bb1","bb2","bbReactAll","bbProdAll","defaultArrowLength","defaultOffset","arrowEnd","rgMerge","scaffold","readKeyValuePairs","valueString","partition","readKeyMultiValuePairs","postLoadMul","atomReductionMap","m","raid","patomsMap","identityMap","bondsToRemove","beginIn","endIn","postLoadSru","postLoadSup","postLoadGen","_atomMap","postLoadDat","postLoadMon","postLoadMer","postLoadCop","postLoadCro","postLoadMod","postLoadGra","postLoadCom","postLoadMix","postLoadFor","postLoadAny","loadSGroup","postLoadMap","initSGroup","propData","kv","applySGroupProp","propName","numeric","core","applySGroupArrayProp","num","part","toIntArray","applyDataSGroupName","applyDataSGroupExpand","applyDataSGroupQuery","applyDataSGroupQueryOp","applyDataSGroupDesc","applyDataSGroupInfo","applyDataSGroupInfoLine","applyDataSGroupData","finalize","trimRight","endsWith","applyDataSGroupDataLine","strArray","parseSGroupSAPLineV2000","ctabString","_utils$partitionLine","_utils$partitionLine2","sss","nn6","chunksNumberInLine","attachmentPointsStr","CHUNK_SIZE","stringForParse","CHUNK_PARTS_LENGTHS","_utils$partitionLine3","_utils$partitionLine4","iii","ooo","leaveAtomParsedId","parseAtomLine","atomLine","atomSplit","massDifference","parseBondLine","bondLine","bondSplit","parseAtomListLine","atomListLine","parsePropertyLines","ctabLines","charAt","propValue","propertyData","subLabels","arrs","arri","a2r","rglabels","a2rs","a2ri","hhh","parsePropertyLineAtomList","expandedSGroups","eg","_sGroup$parseSGroupSA","applyAtomProp","propId","propVal","parseCTabV2000","countsSplit","atomCount","bondCount","atomListCount","isAbs","isAnd","stextLinesCount","propertyLinesCount","atomLines","bondLines","atomListLines","atomLists","pair","psg","emptyGroups","parseRg2000","coreLines","fragmentLines","parseCTab","strId","parseRxn2000","lines","labelsListToIds","hdr","lst","parseAtomLineV3000","subsplit","spacebarsplit","atomListParams","matchNotListInfo","_matchNotListInfo","matchedSubstr","splitonce","ival","rgrsplit","attpnt","parseBondLineV3000","v3000parseCollection","v3000parseSGroup","stripV30","splitSGroupDef","parseBracedNumberList","ATOMS","PATOMS","BONDS","brkxyzStrs","BRKXYZ","brkxyz","MULT","LABEL","CONNECT","FIELDDISP","stripQuotes","FIELDDATA","FIELDNAME","QUERYTYPE","QUERYOP","ESTATE","parseCTabV3000","norgroups","vals","readRGroups3000","rfrags","rlsplit","rfrag","parseRxn3000","findCtabEnd","findRGroupEnd","molLinesReactants","molLinesProducts","molLinesAgents","rGroups","molLines","bracketEquality","firstSliceIndex","quoted","currentSymbol","closingBracketIndex","delim","braceBalance","loadRGroupFragments","parseMol","v2000","version","v3000","parseRxn","prepareForSaving","prepareSruForSaving","prepareSupForSaving","prepareDatForSaving","prepareGenForSaving","prepareQueryComponentForSaving","saveToMolfile","saveMulToMolfile","saveSruToMolfile","saveSupToMolfile","saveDatToMolfile","saveGenToMolfile","sgMap","bondMap","idstr","makeAtomBondLines","smtLine","bracketsToMolfile","sgroupName","sdtLine","padEnd","sddLine","nCharnCharsToDisplay","normalizeNewlines","charsPerLine","chars","prefix","rem","salLine","nlRe","END_V2000","Molfile","molfile","reaction","bondMapping","parseCTFile","molfileLines","prepareSGroups","skipErrors","preserveIndigoDesc","_this$molecule","toRemove","errorIgnore","getCTab","writeCTab2000","saveMolecule","skipSGroupErrors","all","saver","submol","writePaddedNumber","writeHeader","date","writeCR","writeWhiteSpace","write","getMonth","getDate","getFullYear","getHours","getMinutes","repeat","writePadded","writePaddedFloat","writeCTab2000Header","isAbsFlag","atomsProps","writeAtom","writeBond","writeAtomProps","chargeList","isotopeList","radicalList","rglabelList","rglogicList","aplabelList","rbcountList","unsaturatedList","substcountList","writeAtomPropList","sgmap","sgmapback","sgorder","sGroupIdInCTab","writeSGroupAttachmentPointLine","expandedGroups","expandedGroupsLine","atomLabel","_this$mapping$attachm","DefaultOptions","parseCTFileParams","e1","e2","ignoreErrors","noRgroups","CisTrans","neighborsFunc","getNeighbors","PARITY","CIS","TRANS","each","getParity","idx","parity","getSubstituents","substituents","sameside","beg","neiBeg","neiEnd","normBeg","normEnd","prodBeg","prodEnd","samesides","iBeg","iEnd","iNeiBeg","iNeiEnd","sortSubstituents","h0","h1","h2","h3","swap","isGeomStereoBond","bondIdx","label1","label2","neiBegin","excludeBonds","ct","i1","i2","tmp","Dfs","atom_data","nComponentsInReactants","vertices","VertexDesc","edges","EdgeDesc","v_seq","dfs_state","parent_vertex","parent_edge","branches","opening_cycles","closing_cycle","SeqElem","vIdx","parVertex","parEdge","walk","vStack","cid","parentVertex","seqElem","atomD","neiIdx","edgeIdx","edgeClosingCycle","eIdx","numBranches","numOpeningCycles","Stereocenters","buildFromBonds","alleneMask","neiList","nei1nei","nei2nei","stereocenter","buildOneCenter","allowed_stereocenters","n_double_bonds","implicit_degree","atomIdx","implicitDegree","pyramid","edgeIds","lastAtomDir","nDoubleBonds","nPureHydrogens","neiAtom","edge_idx","nei_idx","rank","as","main1","main2","side1","side2","mainDir","getBondStereo","xyz1","xyz2","xyzzy","stereo0","stereo1","stereo2","nUp","nDown","xyz","centerIdx","u","eps","sine1","cosine1","sine2","cosine2","v3","isPyramidMappingRigid","rigid","Smiles","writtenAtoms","writtenComponents","_Atom","lowercase","branch_cnt","paren_written","h_count","isBondInRing","inLoop","allowedLowercase","bondsInLoops","hbids","touchedCistransbonds","markCisTrans","componentsAll","seqEl","vPrevIdx","openingCycles","stereocenters","sc","implicitHIdx","pyramidMapping","counter","cycleNumbers","firstComponent","writeCycleNumber","calcBondDirection","comma","writeRadicals","needBrackets","hydro","cis_trans","dbonds","ctbond_beg","ctbond_end","saved","aromFailBeg","aromFailEnd","updateSideBonds","subst","sidebonds","n3","n4","vprev","ntouched","marked","SmiSerializer","_content","DelimeterRegex","SdfSerializer","chunk","propChunks","pc","valueArr","sdfItems","_center","getTopRightPosition","getBottomLeftPosition","_this$getCornerPositi","_this$getCornerPositi2","_this$bitmap$match","base64Data","_getNodeWithInvertedY","imageSrc","newLeaveAtomId","IndigoShowHydrogenLabelsMode","getLabelRenderModeForIndigo","renderModeMapping","HETERO","TERMINAL_HETERO","ALL","OFF","pollDeferred","process","complete","timeGap","startTimeGap","reject","iterate","then","parametrizeUrl","url","request","headers","responseHandler","requestUrl","response","fetch","Accept","credentials","ok","indigoCall","baseUrl","customHeaders","pickStandardServerOptions","RemoteStructService","apiPath","getInChIKey","getStandardServerOptions","_info","indigoVersion","imagoVersions","isAvailable","indigo_version","imago_versions","_CoreEditor$provideEd","monomerLibrary","expandedOptions","clean","aromatize","dearomatize","calculateCip","automap","check","calculate","recognize","parVersion","req","status","upload_id","metadata","mol_str","generateImageAsBase64","resp","toggleExplicitHydrogens","RemoteStructServiceProvider","currentApiPath","URLSearchParams","createStructService","defaultTypes","defaultCalcProps","convertStructToString","Indigo","input_format","types","backgroundColor","ModeTypes","BlobTypes","allowedApiSettings","_formatterFactory","_editor","_eventBus","Ketcher","_indigo","EventEmitter","apiSetting","clientSetting","setSettings","hasOwn","setOptions","getSmiles","isExtended","_getMolfile","molfileFormat","formatPassed","containsReaction","getMolfile","getIdt","_CoreEditor$provideEd2","_getRxn","rxnfile","_args2","getRxn","getKet","_CoreEditor$provideEd3","_CoreEditor$provideEd4","_CoreEditor$provideEd5","_CoreEditor$provideEd6","_CoreEditor$provideEd7","_CoreEditor$provideEd8","getFasta","_CoreEditor$provideEd9","getSequence","_CoreEditor$provideEd10","getSmarts","getCml","getSdf","getRdf","getCDXml","getCDX","getInchi","withAuxInfo","_getInChIKey","isQueryStructureSelected","structure","hasQueryAtoms","sGroupIds","isQueryComponentSGroup","hasQueryBonds","_setMolecule","_callee5","_CoreEditor$provideEd11","_callee5$","_context5","zoomAccordingContent","centerStruct","eventBus","_setHelm","_callee7","helmStr","_callee7$","_context7","_callee6","_callee6$","_context6","setHelm","_addFragment","_callee9","_CoreEditor$provideEd12","_callee9$","_context9","_callee8","_callee8$","_context8","structToAddFragment","addFragment","_layout","_callee11","_callee11$","_context11","_callee10","_callee10$","_context10","_calculate","_callee12","_callee12$","_context12","exportImage","blobPart","getSvgFromDrawnStructures","margin","saveAs","_generateImage","_callee13","base64","_args13","_callee13$","_context13","generateImage","_x6","reinitializeIndigo","sendCustomAction","rawMonomersData","DefaultStructServiceOptions","_structServiceProvider","KetcherBuilder","withStructServiceProvider","structServiceProvider","serviceOptions","mergedServiceOptions"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBO,IAAMA,YAAY,GAAqB;AAC5CC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,CAAC,EAAE,SAAS;AACZC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AAEbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAS;AACbC,EAAAA,EAAE,EAAE,SAAA;;;AC3HN,IAAMC,aAAa,GAAmB,CACpC;AACEC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,OAAO;AACbC,EAAAA,IAAI,EAAE,SAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,QAAQ;AACdC,EAAAA,IAAI,EAAE,IAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,WAAW;AACjBC,EAAAA,IAAI,EAAE,KAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRM,EAAAA,KAAK,EAAE,IAAI;AACXL,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRM,EAAAA,KAAK,EAAE,IAAI;AACXL,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,SAAS;AACfC,EAAAA,IAAI,EAAE,aAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,OAAO;AACbC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,QAAQ;AACdC,EAAAA,IAAI,EAAE,YAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,WAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,WAAW;AACjBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,aAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRM,EAAAA,KAAK,EAAE,IAAI;AACXL,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,KAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRM,EAAAA,KAAK,EAAE,IAAI;AACXL,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,SAAS;AACfC,EAAAA,IAAI,EAAE,KAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,OAAO;AACbC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,QAAQ;AACdC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,WAAW;AACjBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,WAAW;AACjBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRM,EAAAA,KAAK,EAAE,IAAI;AACXL,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRM,EAAAA,KAAK,EAAE,IAAI;AACXL,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,SAAS;AACfC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,OAAO;AACbC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,QAAQ;AACdC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,SAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,SAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,EAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,SAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,WAAW;AACjBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,WAAW;AACjBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRM,EAAAA,KAAK,EAAE,IAAI;AACXL,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,SAAS;AACfC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,OAAO;AACbC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,QAAQ;AACdC,EAAAA,IAAI,EAAE,aAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,cAAc;AACrBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,SAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,OAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,WAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,QAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,MAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,WAAW;AACjBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,SAAS;AACfC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,KAAK,EAAE,KAAK;AACZC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,OAAO;AACbC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,QAAQ;AACdC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,gBAAgB;AACtBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,SAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,cAAc;AACrBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,YAAY;AACpBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,UAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,OAAO;AACfC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,aAAa;AACpBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,EAAE;AACVC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,aAAa;AACpBC,EAAAA,KAAK,EAAE,OAAO;AACdC,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,aAAa;AACpBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,UAAU;AAChBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,eAAe;AACtBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,SAAS;AAChBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,cAAc;AACrBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,aAAa;AACpBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,aAAa;AACpBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,YAAY;AAClBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,UAAU;AACjBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,aAAa;AACpBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,iBAAiB;AACvBC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,YAAY;AACnBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,SAAS;AACfC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,EACD;AACER,EAAAA,MAAM,EAAE,GAAG;AACXC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,WAAW;AAClBE,EAAAA,MAAM,EAAE,WAAW;AACnBC,EAAAA,IAAI,EAAE,OAAO;AACbC,EAAAA,IAAI,EAAE,GAAA;AACP,CAAA,CACF,CAAA;AAED,IAAME,WAAW,GAAGX,aAAa,CAACY,MAAM,CAAC,UAACC,GAAG,EAAEC,OAAO,EAAI;EACxDD,GAAG,CAACE,GAAG,CAACD,OAAO,CAACZ,KAAK,EAAEY,OAAO,CAAC,CAAA;EAC/BD,GAAG,CAACE,GAAG,CAACD,OAAO,CAACb,MAAM,EAAEa,OAAO,CAAC,CAAA;AAChC,EAAA,OAAOD,GAAG,CAAA;AACZ,CAAC,EAAE,IAAIG,GAAG,EAA4B,CAAC,CAAA;AAEhC,IAAMC,QAAQ,GAAG;EACtBC,GAAG,EAAE,SAAAA,GAAAA,CAACC,GAAoB,EAAA;AAAA,IAAA,OAA0BR,WAAW,CAACO,GAAG,CAACC,GAAG,CAAC,CAAA;AAAA,GAAA;AACxEC,EAAAA,MAAM,EAAE,SAAAA,MAACC,CAAAA,SAAwC,EAAoB;AACnE,IAAA,OAAOrB,aAAa,CAACoB,MAAM,CAACC,SAAS,CAAC,CAAA;GACvC;EACDC,MAAM,EAAE,SAAAA,MAAA,GAAA;IAAA,OAAAC,EAAAA,CAAAA,MAAA,CAAUvB,aAAa,CAAA,CAAA;AAAA,GAAA;;;AC9oCrBwB,2BA0HX;AA1HD,CAAA,UAAYA,SAAS,EAAA;AACnBA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,GAAA,CAAA,GAAA,GAAO,CAAA;AACPA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AACTA,EAAAA,SAAA,CAAA,IAAA,CAAA,GAAA,IAA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"}