import {
  require_react_dom
} from "./chunk-6W5FFVKH.js";
import {
  clsx_m_default
} from "./chunk-74BNEYOJ.js";
import {
  require_react
} from "./chunk-NKBGLYTV.js";
import {
  __toESM
} from "./chunk-PLDDJCW6.js";

// node_modules/react-contexify/dist/index.mjs
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var Y = (0, import_react.createContext)({});
var F = () => (0, import_react.useContext)(Y);
var $ = (t) => import_react.default.createElement(Y.Provider, { ...t });
function le() {
  let t = /* @__PURE__ */ new Map();
  return { on(e, r) {
    return t.has(e) ? t.get(e).add(r) : t.set(e, /* @__PURE__ */ new Set([r])), this;
  }, off(e, r) {
    return t.has(e) && t.get(e).delete(r), this;
  }, emit(e, r) {
    return t.has(e) && t.get(e).forEach((f) => {
      f(r);
    }), this;
  } };
}
var R = le();
var B = () => (0, import_react.useRef)(/* @__PURE__ */ new Map()).current;
var z = () => {
};
var U = ["resize", "contextmenu", "click", "scroll", "blur"];
var A = { show({ event: t, id: e, props: r, position: f }) {
  t.preventDefault && t.preventDefault(), R.emit(0).emit(e, { event: t.nativeEvent || t, props: r, position: f });
}, hideAll() {
  R.emit(0);
} };
function Fe(t) {
  return { show(e) {
    A.show({ ...t, ...e });
  }, hideAll() {
    A.hideAll();
  } };
}
function G() {
  let t = /* @__PURE__ */ new Map(), e, r, f, s, i = false;
  function P(n) {
    s = Array.from(n.values()), e = -1, f = true;
  }
  function v() {
    s[e].node.focus();
  }
  let x = () => e >= 0 && s[e].isSubmenu, w = () => Array.from(s[e].submenuRefTracker.values());
  function m() {
    return e === -1 ? (b(), false) : true;
  }
  function b() {
    e + 1 < s.length ? e++ : e + 1 === s.length && (e = 0), i && a(), v();
  }
  function E() {
    e === -1 || e === 0 ? e = s.length - 1 : e - 1 < s.length && e--, i && a(), v();
  }
  function T() {
    if (m() && x()) {
      let n = w(), { node: c, setSubmenuPosition: h } = s[e];
      return t.set(c, { isRoot: f, focusedIndex: e, parentNode: r || c, items: s }), h(), c.classList.add("contexify_submenu-isOpen"), r = c, n.length > 0 ? (e = 0, s = n) : i = true, f = false, v(), true;
    }
    return false;
  }
  function a() {
    if (m() && !f) {
      let n = t.get(r);
      r.classList.remove("contexify_submenu-isOpen"), s = n.items, r = n.parentNode, n.isRoot && (f = true, t.clear()), i || (e = n.focusedIndex, v());
    }
  }
  function y(n) {
    function c(h) {
      for (let o of h) o.isSubmenu && o.submenuRefTracker && c(Array.from(o.submenuRefTracker.values())), o.keyMatcher && o.keyMatcher(n);
    }
    c(s);
  }
  return { init: P, moveDown: b, moveUp: E, openSubmenu: T, closeSubmenu: a, matchKeys: y };
}
function I(t) {
  return typeof t == "function";
}
function V(t) {
  return typeof t == "string";
}
function _(t, e) {
  return import_react.Children.map(import_react.Children.toArray(t).filter(Boolean), (r) => (0, import_react.cloneElement)(r, e));
}
function J(t) {
  let e = { x: t.clientX, y: t.clientY }, r = t.changedTouches;
  return r && (e.x = r[0].clientX, e.y = r[0].clientY), (!e.x || e.x < 0) && (e.x = 0), (!e.y || e.y < 0) && (e.y = 0), e;
}
function k(t, e) {
  return I(t) ? t(e) : t;
}
function be(t, e) {
  return { ...t, ...I(e) ? e(t) : e };
}
var it = ({ id: t, theme: e, style: r, className: f, children: s, animation: i = "fade", preventDefaultOnKeydown: P = true, disableBoundariesCheck: v = false, onVisibilityChange: x, ...w }) => {
  let [m, b] = (0, import_react.useReducer)(be, { x: 0, y: 0, visible: false, triggerEvent: {}, propsFromTrigger: null, willLeave: false }), E = (0, import_react.useRef)(null), T = B(), [a] = (0, import_react.useState)(() => G()), y = (0, import_react.useRef)(), n = (0, import_react.useRef)();
  (0, import_react.useEffect)(() => (R.on(t, h).on(0, o), () => {
    R.off(t, h).off(0, o);
  }), [t, i, v]), (0, import_react.useEffect)(() => {
    m.visible ? a.init(T) : T.clear();
  }, [m.visible, a, T]);
  function c(u, p) {
    if (E.current && !v) {
      let { innerWidth: d, innerHeight: C } = window, { offsetWidth: K, offsetHeight: O } = E.current;
      u + K > d && (u -= u + K - d), p + O > C && (p -= p + O - C);
    }
    return { x: u, y: p };
  }
  (0, import_react.useEffect)(() => {
    m.visible && b(c(m.x, m.y));
  }, [m.visible]), (0, import_react.useEffect)(() => {
    function u(d) {
      P && d.preventDefault();
    }
    function p(d) {
      switch (d.key) {
        case "Enter":
        case " ":
          a.openSubmenu() || o();
          break;
        case "Escape":
          o();
          break;
        case "ArrowUp":
          u(d), a.moveUp();
          break;
        case "ArrowDown":
          u(d), a.moveDown();
          break;
        case "ArrowRight":
          u(d), a.openSubmenu();
          break;
        case "ArrowLeft":
          u(d), a.closeSubmenu();
          break;
        default:
          a.matchKeys(d);
          break;
      }
    }
    if (m.visible) {
      window.addEventListener("keydown", p);
      for (let d of U) window.addEventListener(d, o);
    }
    return () => {
      window.removeEventListener("keydown", p);
      for (let d of U) window.removeEventListener(d, o);
    };
  }, [m.visible, a, P]);
  function h({ event: u, props: p, position: d }) {
    u.stopPropagation();
    let C = d || J(u), { x: K, y: O } = c(C.x, C.y);
    (0, import_react_dom.flushSync)(() => {
      b({ visible: true, willLeave: false, x: K, y: O, triggerEvent: u, propsFromTrigger: p });
    }), clearTimeout(n.current), !y.current && I(x) && (x(true), y.current = true);
  }
  function o(u) {
    u != null && (u.button === 2 || u.ctrlKey) && u.type !== "contextmenu" || (i && (V(i) || "exit" in i && i.exit) ? b((p) => ({ willLeave: p.visible })) : b((p) => ({ visible: p.visible ? false : p.visible })), n.current = setTimeout(() => {
      I(x) && x(false), y.current = false;
    }));
  }
  function M() {
    m.willLeave && m.visible && (0, import_react_dom.flushSync)(() => b({ visible: false, willLeave: false }));
  }
  function S() {
    return V(i) ? clsx_m_default({ [`${"contexify_willEnter-"}${i}`]: g && !D, [`${"contexify_willLeave-"}${i} ${"contexify_willLeave-"}'disabled'`]: g && D }) : i && "enter" in i && "exit" in i ? clsx_m_default({ [`${"contexify_willEnter-"}${i.enter}`]: i.enter && g && !D, [`${"contexify_willLeave-"}${i.exit} ${"contexify_willLeave-"}'disabled'`]: i.exit && g && D }) : null;
  }
  let { visible: g, triggerEvent: l, propsFromTrigger: L, x: oe, y: ie, willLeave: D } = m, ae = clsx_m_default("contexify", f, { [`${"contexify_theme-"}${e}`]: e }, S());
  return import_react.default.createElement($, { value: T }, g && import_react.default.createElement("div", { ...w, className: ae, onAnimationEnd: M, style: { ...r, left: oe, top: ie, opacity: 1 }, ref: E, role: "menu" }, _(s, { propsFromTrigger: L, triggerEvent: l })));
};
var pt = ({ id: t, children: e, className: r, style: f, triggerEvent: s, data: i, propsFromTrigger: P, keyMatcher: v, onClick: x = z, disabled: w = false, hidden: m = false, closeOnClick: b = true, handlerEvent: E = "onClick", ...T }) => {
  let a = (0, import_react.useRef)(), y = F(), n = { id: t, data: i, triggerEvent: s, props: P }, c = k(w, n), h = k(m, n);
  function o(l) {
    n.event = l, l.stopPropagation(), c || (b ? M() : x(n));
  }
  function M() {
    let l = a.current;
    l.focus(), l.addEventListener("animationend", () => setTimeout(A.hideAll), { once: true }), l.classList.add("contexify_item-feedback"), x(n);
  }
  function S(l) {
    l && !c && (a.current = l, y.set(l, { node: l, isSubmenu: false, keyMatcher: !c && I(v) && ((L) => {
      v(L) && (L.stopPropagation(), L.preventDefault(), n.event = L, M());
    }) }));
  }
  function g(l) {
    (l.key === "Enter" || l.key === " ") && (l.stopPropagation(), n.event = l, M());
  }
  return h ? null : import_react.default.createElement("div", { ...T, [E]: o, className: clsx_m_default("contexify_item", r, { [`${"contexify_item-disabled"}`]: c }), style: f, onKeyDown: g, ref: S, tabIndex: -1, role: "menuitem", "aria-disabled": c }, import_react.default.createElement("div", { className: "contexify_itemContent" }, e));
};
var Et = ({ triggerEvent: t, data: e, propsFromTrigger: r, hidden: f = false }) => k(f, { data: e, triggerEvent: t, props: r }) ? null : import_react.default.createElement("div", { className: "contexify_separator" });
var re = () => import_react.default.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, import_react.default.createElement("polyline", { points: "9 18 15 12 9 6" }));
var ne = ({ className: t, ...e }) => import_react.default.createElement("div", { className: clsx_m_default("contexify_rightSlot", t), ...e });
var Kt = ({ arrow: t, children: e, disabled: r = false, hidden: f = false, label: s, className: i, triggerEvent: P, propsFromTrigger: v, style: x, ...w }) => {
  let m = F(), b = B(), E = (0, import_react.useRef)(null), T = { triggerEvent: P, props: v }, a = k(r, T), y = k(f, T);
  function n() {
    let o = E.current;
    if (o) {
      let M = `${"contexify_submenu"}-bottom`, S = `${"contexify_submenu"}-right`;
      o.classList.remove(M, S);
      let g = o.getBoundingClientRect();
      g.right > window.innerWidth && o.classList.add(S), g.bottom > window.innerHeight && o.classList.add(M);
    }
  }
  function c(o) {
    o && !a && m.set(o, { node: o, isSubmenu: true, submenuRefTracker: b, setSubmenuPosition: n });
  }
  if (y) return null;
  let h = clsx_m_default("contexify_item", i, { [`${"contexify_item-disabled"}`]: a });
  return import_react.default.createElement($, { value: b }, import_react.default.createElement("div", { ...w, className: h, ref: c, tabIndex: -1, role: "menuitem", "aria-haspopup": true, "aria-disabled": a, onMouseEnter: n, onTouchStart: n }, import_react.default.createElement("div", { className: "contexify_itemContent", onClick: (o) => o.stopPropagation() }, s, import_react.default.createElement(ne, null, t || import_react.default.createElement(re, null))), import_react.default.createElement("div", { className: `${"contexify"} ${"contexify_submenu"}`, ref: E, style: x }, _(e, { propsFromTrigger: v, triggerEvent: P }))));
};

export {
  A,
  Fe,
  it,
  pt,
  Et,
  ne,
  Kt
};
//# sourceMappingURL=chunk-KBCDIJ25.js.map
